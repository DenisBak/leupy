(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[36137],{57729:function(e,t,r){"use strict";r.d(t,{t:function(){return u}});var n=r(47166),a=r.n(n),s=r(10001),i=r(88998),l=r(39535),o=r(28225),c=r(85893);const d=a().bind({root:"s__w_nOJrMIw5n9NgYqTvAf","with-background":"s__QtsZNf4x87678JmrdQmf",title:"s__xSJyw9OnIlhr72y4g6ps",text:"s__BPpM6irh0nSV8lZgHbCN"}),u=({onActionButtonClick:e,withBackground:t=!1,customButtonText:r,customContent:n,customTitle:a,className:u,icon:p})=>{const{t:g}=(0,o.useTranslation)("component_blet_error_message"),h=p?void 0:s.i.Warning,f=a??g("title"),m=n??g("content"),b=r??g("button");return(0,c.jsx)("section",{className:d("root",u,{"with-background":t}),children:(0,c.jsxs)(i.A,{children:[(0,c.jsx)(i.A.Icon,{mod:h,children:p}),(0,c.jsx)(i.A.Title,{className:d("title"),children:f}),(0,c.jsx)(i.A.Content,{className:d("text"),children:m}),(0,c.jsx)(i.A.Actions,{children:(0,c.jsx)(i.A.Action,{onClick:e,priority:l.Ji.Primary,className:d("text"),children:b})})]})})}},97374:function(e,t,r){"use strict";r.d(t,{cT:function(){return u},dw:function(){return b},a:function(){return w},V_:function(){return j}});var n=r(67294),a=r(47166),s=r.n(a),i=r(49963),l=r(44619),o=r(80871),c=r(85893);const d=s().bind({root:"s__qDEAWRi4IyP4T9einkdY",root_disabled:"s__TxzWYbrUom4O5bfGpE8A",icon:"s__MVPAY3Z_as7zwHFk2_XE"}),u=({isDisabled:e,text:t,handleClick:r,className:a})=>{const s=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),r()}),[r]);return(0,c.jsxs)("div",{className:d("root",a,{root_disabled:e}),onClick:s,children:[(0,c.jsx)(i.x,{type:l.y.Body2Regular,children:t}),(0,c.jsx)(o.i,{className:d("icon")})]})};var p=r(28225),g=r(38694),h=r(1156),f=r(39535);const m=s().bind({root:"s__Y9HI3t2ZpWJ0z8jLpb21","price-title":"s__n_yHAW9fdH2GZIOd3UqT"}),b=({title:e,price:t,selectedInfo:r})=>{const{t:n}=(0,p.useTranslation)("component_ticket_fares_card"),a=Boolean(t);return(0,c.jsxs)("div",{className:m("root"),children:[(0,c.jsxs)("div",{children:[(0,c.jsx)(i.x,{type:a?l.y.Body2Bold:l.y.Body1Bold,className:m({"price-title":a}),children:e}),t&&(0,c.jsx)(i.x,{type:l.y.Title4Bold,children:(0,c.jsx)(g.t,{value:t.value,currency:t.currency})})]}),r&&(0,c.jsx)(h.z,{priority:r.isSelected?f.Ji.Secondary:f.Ji.Primary,size:f.qE.S,shape:f.jL.Round,inline:!0,children:r.isSelected?n("textButton.selected"):n("textButton.select")})]})};var _=r(94063),x=r(83557),y=r(54446),k=r(69135),F=r(5070);const v=s().bind({option:"s__oZCeFCP4RlKf2fZHYFzS","text-wrapper":"s__tuh_bkpw7YjEhq_dBcco","text-wrapper_with_tooltip":"s__fqN6ypYXQioPEq48OyXD","text-wrapper_right":"s__vmhwwsJYRfEaN8gshQkM","dimensions-icon":"s__rKjipBBtg268Qgcs16_D",icon:"s__YxFxa4PpXboHWsWJqFyQ","available-icon":"s__ZJoiWtcPEVhDHEiCIqpe","not-available-icon":"s__r8xkyXTCf6PNvWFTLB_b","main-text":"s__PEE_Hxw4JZKKpmUoPqMQ","info-icon":"s__3tl_gWpiYF1aJWSTr5F8"}),C=()=>-8,S={AVAILABLE:(0,c.jsx)(_.I,{className:v("icon","available-icon")}),NOT_AVAILABLE:(0,c.jsx)(x.Z,{className:v("icon","not-available-icon")})},T=({option:e,onInformerTooltipClick:t})=>{const{state:r,mainText:a,secondaryText:s,tooltipText:o,tooltipInformerType:d,isDimensionsIconVisible:u}=e,p=Boolean(o||d),[g,h]=(0,n.useState)(!1),f=(0,n.useCallback)((()=>h(!0)),[]),m=(0,n.useCallback)((()=>h(!1)),[]),b=(0,n.useCallback)((e=>{p&&(e.preventDefault(),e.stopPropagation(),g?m():d?t?.(d):f())}),[t,d,p,g,f,m]);return(0,c.jsxs)("div",{className:v("option"),children:[(0,c.jsx)(F.u,{touch:!0,placement:"top-start",fallbackPlacements:["bottom-start"],disabled:!o,content:o,visible:g,onClickOutside:m,calculateCustomSkidding:C,children:(0,c.jsxs)("div",{className:v("text-wrapper",{"text-wrapper_with_tooltip":p}),onClick:b,children:[S[r],(0,c.jsx)(i.x,{type:l.y.Body2Regular,className:v("main-text"),children:a}),p&&(0,c.jsx)(y.E,{className:v("info-icon")})]})}),(0,c.jsxs)("div",{className:v("text-wrapper","text-wrapper_right"),children:[s&&(0,c.jsx)(i.x,{type:l.y.Body3Regular,className:v("test"),children:s}),u&&(0,c.jsx)(k.d,{className:v("dimensions-icon")})]})]})},w=({options:e,className:t,onInformerTooltipClick:r})=>(0,c.jsx)("div",{className:t,children:e.map(((e,t)=>(0,c.jsx)(T,{option:e,onInformerTooltipClick:r},t)))});var E=r(3745);const B=s().bind({root:"s__BCLMuDIaaHQZqvawUUxT","ticket-front-animation":"s__NjyzgIW5DfvFvOZfsxQ9",root_disabled:"s__q70BAjWKkibtaZGsQl1m","text-wrapper":"s__TDwvgplrq2_zcSI17L9M",text:"s__aClRmNIvbRLGvy7ZRlBd","delta-price":"s__A0TZrMnL55LLm_qP0R2K",switch:"s__I4OShWReE9jtA0xQnW5H"}),j=({isDisabled:e,handleSwitchChange:t,text:r,deltaPrice:a,isToggleEnabled:s})=>{const o=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),t()}),[t]);return(0,c.jsxs)("div",{className:B("root",{root_disabled:e}),onClick:o,children:[(0,c.jsxs)("div",{className:B("text-wrapper"),children:[(0,c.jsx)(i.x,{type:l.y.Body2Regular,className:B("text"),children:r}),a&&a.value>0&&(0,c.jsxs)(i.x,{type:l.y.Body2Semi,className:B("delta-price"),children:["+",(0,c.jsx)(g.t,{value:a.value,currency:a.currency})]})]}),(0,c.jsx)(E.r,{className:B("switch"),disabled:e,checked:s,readOnly:!0})]})}},89677:function(e,t,r){"use strict";r.d(t,{K:function(){return et}});var n=r(30091),a=r(98116),s=r(85658),i=r(31401),l=r(4449),o=r(27497),c=r(5016),d=r(4517),u=r(66714),p=r(43551),g=r(31645);const h=(0,a.createEvent)({sid:"-ssjct8"}),f=(0,a.createEvent)({sid:"-efamsp"}),m=(0,a.createEvent)({sid:"-1hktwm"}),b=(0,a.createEvent)({sid:"-17t8w3"}),_=(0,a.createEvent)({sid:"vq8a38"}),x=(0,a.createEvent)({sid:"-6wifju"}),y=(0,a.createEvent)({sid:"vlay14"}),k=(0,a.createEvent)({sid:"-xdpnb1"}),F=(0,a.createEvent)({sid:"jf59s1"}),v=(0,a.createEvent)({sid:"5n00kf"}),C=(0,a.createEvent)({sid:"-ogd9du"}),S=(0,a.createStore)(null,{sid:"9w404x"}).on(m,((e,t)=>t)).reset(h),T=(0,a.createStore)([],{sid:"-t3oyvf"}).on(b,((e,t)=>t)).reset([h,f]),w=(0,a.createStore)(!1,{sid:"xuz31v"}).on(k,(()=>!0)).reset([C,h,_]),E=(0,a.createStore)(null,{sid:"-z13uvd"}).on(y,((e,t)=>t)).reset([x]),B=d.r.outputs.$faresFiltersFlag.map((({enabled:e})=>e)),j={inputs:{changeFareButtonClicked:k,upsellFareToggleClicked:F,upsellSearchClicked:v,faresModalClosed:C,fareSelected:_,resetFares:f,fareInformerClosed:x,fareInformerOpened:y},outputs:{$currentFare:S,$fares:T,$isFaresModalVisible:w,$fareInformerType:E,$showHandbagFilter:(0,a.combine)({and:[[c.j.outputs.$filtersBoundaries,d.r.outputs.$faresFiltersFlag],([e,{isHandbagFilterShown:t}])=>t&&Boolean((0,u.c)(e))],or:{sid:"-vixk8r"}}),$showFaresFilters:B,$showReturnTicketFilter:c.j.outputs.$filtersBoundaries.map((e=>Boolean((0,p.X)(e)))),$showChangeTicketFilter:c.j.outputs.$filtersBoundaries.map((e=>Boolean((0,g.G)(e))))},internals:{currentFareUpdated:m,faresUpdated:b,reset:h}},{internals:N,inputs:I,outputs:R}=j;(0,a.sample)({and:[{clock:l.X.outputs.chunksLoaded,fn:e=>e.data.search?.ticket.currentFare??null,target:N.currentFareUpdated}],or:{sid:"-k3smt8"}}),(0,a.sample)({and:[{clock:l.X.outputs.chunksLoaded,fn:e=>e.data.search?.ticket.fares??[],target:N.faresUpdated}],or:{sid:"-k0hv92"}}),(0,a.sample)({and:[{clock:I.upsellFareToggleClicked,source:R.$currentFare,fn:e=>!e?.baggageUpsell?.isBaggageEnabled,target:l.X.inputs.ticketSearchHasBaggageUpdated}],or:{sid:"-jlnf8b"}}),(0,a.sample)({and:[{clock:I.fareSelected,fn:()=>!1,target:l.X.inputs.ticketSearchHasBaggageUpdated}],or:{sid:"-j696m7"}}),(0,a.sample)({and:[{clock:I.upsellFareToggleClicked,fn:()=>"fare_baggage_upsell",target:l.X.inputs.ticketChangeHandlerSourceUpdated}],or:{sid:"-iprctd"}}),(0,a.sample)({and:[{clock:I.fareSelected,fn:()=>"fare",target:l.X.inputs.ticketChangeHandlerSourceUpdated}],or:{sid:"-i99j0j"}}),(0,a.sample)({and:[{clock:l.X.inputs.ticketChangeHandlerSourceUpdated,target:I.resetFares}],or:{sid:"-i4bdoa"}}),(0,a.sample)({and:[{clock:o.N.outputs.searchExpired,target:I.faresModalClosed}],or:{sid:"-hq0q8w"}}),(0,a.sample)({and:[{clock:I.upsellSearchClicked,fn:e=>({changes:e,source:i.ng.FaresUpsellFilters}),target:c.j.inputs.filtersChangedByUser}],or:{sid:"-hn9ra3"}}),(0,a.sample)({and:[{source:I.upsellSearchClicked,target:[I.faresModalClosed,s.u.inputs.scrollToTop]}],or:{sid:"-h6rxh9"}});var A=r(23588);const{internals:U,inputs:L,outputs:D}=j;(0,a.sample)({and:[{clock:[A.z.outputs.ticketPopupClosed,A.z.outputs.resetSearchResultsPage],target:U.reset}],or:{sid:"-3do9rl"}}),(0,a.sample)({and:[{clock:L.upsellFareToggleClicked,source:{currentFare:D.$currentFare,ticketSign:l.X.outputs.$ticketSignature},filter:({ticketSign:e})=>Boolean(e),fn:({currentFare:e,ticketSign:t})=>({ticketSign:t,fareKey:e?.baggageUpsell?.toggleFareKey}),target:A.z.inputs.bletFareKeyChangeFx}],or:{sid:"-399x0p"}}),(0,a.sample)({and:[{clock:L.fareSelected,source:l.X.outputs.$ticketSignature,filter:e=>Boolean(e),fn:(e,t)=>({ticketSign:e,fareKey:t}),target:A.z.inputs.bletFareKeyChangeFx}],or:{sid:"-2ddulr"}}),(0,a.sample)({and:[{source:L.upsellSearchClicked,target:A.z.inputs.closeTicketPopupFx}],or:{sid:"-1uoufh"}});var O=r(4190),P=r(47166),$=r.n(P),H=r(24530),M=r.n(H),q=r(67294),K=r(80191),V=r(97374),z=r(85893);const W=$().bind({root:"s___1abXbnJIlma3F8bPkAo","root_with-change-fare":"s__Ld8mGFH_CytUywOoyavQ",root_selected:"s__c1tolEMIumLnxqdGgmll",root_selectable:"s__FEIRFMUii_qMGmm1lO4d",root_clickable:"s__nwnsB5kpYsC9AzLvdO0J","options-list":"s__PM6d1DSl5m8s6bGjDQuq","change-fares-wrapper":"s__fzi1YNmiA8JVONzHg2WU","change-fares-wrapper_expired":"s__TgotJHWDk2xLaixNe88j",divider:"s__BTkC6ETnKT3DIqv09heI"}),G=({fareOptions:e,title:t,isDisabled:r=!1,baggageUpsell:n,changeFareButtonText:a,isExpired:s=!1,selectedInfo:i,price:l,className:o,changeFareButtonClick:c=M(),upsellFareToggleClick:d=M(),onClick:u,handleSelectFare:p,onInformerTooltipClick:g})=>{const h=!s&&n?.text,f=!s&&a,m=Boolean(h&&f),b=i&&!i.isSelected,_=u&&!s||b,x=(0,q.useCallback)((()=>{u&&u(),i?.fareKey&&p&&p(i.fareKey)}),[i,u,p]),y=Boolean(h||f);return(0,z.jsxs)("div",{className:W("root",o,{root_selected:i&&i.isSelected,root_selectable:b,root_clickable:_,"root_with-change-fare":y}),onClick:_?x:void 0,children:[(0,z.jsx)(V.dw,{title:t,price:l,selectedInfo:i}),(0,z.jsx)(V.a,{onInformerTooltipClick:g,options:e,className:W("options-list")}),y&&(0,z.jsxs)("div",{className:W("change-fares-wrapper",{"change-fares-wrapper_expired":s}),children:[!s&&n?.text&&(0,z.jsx)(V.V_,{isDisabled:r,handleSwitchChange:d,text:n.text,deltaPrice:n.deltaPrice,isToggleEnabled:Boolean(n.isBaggageEnabled)}),m&&(0,z.jsx)(K.i,{className:W("divider")}),!s&&a&&(0,z.jsx)(V.cT,{isDisabled:r,text:a,handleClick:c})]})]})},{outputs:X,inputs:Z}=j,J=$().bind({root:"s__hMK436jSMusuwxbluACm"});var Q=r(46531),Y=r(9071),ee=r(5393),te=r(28225);const re=$().bind({root:"s__mu8mUviNDSytQhtepId6",header:"s__zZ5n96c7JHhtyMcIHzf7",icon:"s__Z1kIlpVm4tlu6DlF4kX7",title:"s__mOT2Mvk_MuA8Ht36cs6V","background-container":"s__RSrCG1loQvEJTMkMCf61",background:"s__K0WFrfqCA43ankGygqKj",dark:"s__cQQIIYzfhwMFsLFsAGyD",text:"s__MyEd3fJnHUleboEmcur_"}),ne=({title:e,iconSrc:t,backgroundClassName:r,text:n})=>(0,z.jsxs)("div",{className:re("root"),children:[(0,z.jsxs)("div",{className:re("header"),children:[(0,z.jsx)("img",{src:t,className:re("icon"),alt:"header-icon"}),(0,z.jsx)("div",{className:re("background-container"),children:(0,z.jsx)("div",{className:re("background",r),children:(0,z.jsx)("span",{className:re("title"),children:e})})})]}),(0,z.jsx)("div",{className:re("text"),children:n})]});var ae=r.p+"a47949c23d739a508bf4.svg",se=r.p+"57ea2426ea2785c6c6df.svg",ie=r.p+"4ab68ae522fcea2c6577.svg";const le=$().bind({item:"s__NuTR_ttnsDxL5QHwOOC3","icon-container":"s__zYI7GOAyOtPCG3FyD0aR",icon:"s__pB8JCUaYfioeh0ammfP9",paragraph:"s__Klj38wlu8Cx2e94ujuVy"}),oe={check:ae,pageWithCurl:se,speechBalloon:ie},ce=({startText:e,list:t,endText:r})=>(0,z.jsxs)("div",{children:[Boolean(e)&&(0,z.jsx)("p",{className:le("paragraph"),children:e}),(0,z.jsx)("div",{children:t.map((({key:e,value:t})=>(0,z.jsxs)("div",{className:le("item"),children:[(0,z.jsx)("div",{className:le("icon-container"),children:(0,z.jsx)("img",{className:le("icon"),src:oe[e],alt:oe[e]})}),(0,z.jsx)("p",{className:le("paragraph"),children:t})]},e)))}),(0,z.jsx)("p",{className:le("paragraph"),children:r})]});var de=r.p+"fa09dcc3cae6f6a90ea5.svg",ue=r.p+"a8881d8632eb01a58420.svg";const pe=({isNightMode:e})=>{const{t:t}=(0,te.useTranslation)("component_fare_informer"),r=e?ue:de,n=e?"dark":"light",a=(0,z.jsx)(ce,{startText:t("paid_return.startText"),list:[{key:"check",value:t("paid_return.list.1")},{key:"pageWithCurl",value:t("paid_return.list.2")},{key:"speechBalloon",value:t("paid_return.list.3")}],endText:t("paid_return.endText")});return(0,z.jsx)(ne,{title:t("paid_return.title"),iconSrc:r,backgroundClassName:n,text:a})};var ge=r.p+"3e2282603ec3e142489a.svg",he=r.p+"fff09d04ce2701d2195b.svg";const fe=({isNightMode:e})=>{const{t:t}=(0,te.useTranslation)("component_fare_informer"),r=e?he:ge,n=e?"dark":"light",a=(0,z.jsx)(ce,{startText:t("paid_change.startText"),list:[{key:"check",value:t("paid_change.list.1")},{key:"pageWithCurl",value:t("paid_change.list.2")},{key:"speechBalloon",value:t("paid_change.list.3")}],endText:t("paid_change.endText")});return(0,z.jsx)(ne,{title:t("paid_change.title"),iconSrc:r,backgroundClassName:n,text:a})};var me=r.p+"f0ee23b8cfae06ff52a7.svg",be=r.p+"5a3793226e133633e55a.svg";const _e=({isNightMode:e})=>{const{t:t}=(0,te.useTranslation)("component_fare_informer"),r=e?be:me,n=e?"dark":"light",a=(0,z.jsx)(ce,{list:[{key:"check",value:t("change_without_airline_fees.list.1")},{key:"pageWithCurl",value:t("change_without_airline_fees.list.2")},{key:"speechBalloon",value:t("change_without_airline_fees.list.3")}],endText:t("change_without_airline_fees.endText")});return(0,z.jsx)(ne,{title:t("change_without_airline_fees.title"),iconSrc:r,backgroundClassName:n,text:a})};var xe=r.p+"ed683d8f121eeecfdce1.svg",ye=r.p+"e75510716fc29c7368d2.svg";const ke=({isNightMode:e})=>{const{t:t}=(0,te.useTranslation)("component_fare_informer"),r=e?ye:xe,n=e?"dark":"light",a=(0,z.jsx)(ce,{list:[{key:"check",value:t("return_without_airline_fees.list.1")},{key:"pageWithCurl",value:t("return_without_airline_fees.list.2")},{key:"speechBalloon",value:t("return_without_airline_fees.list.3")}],endText:t("return_without_airline_fees.endText")});return(0,z.jsx)(ne,{title:t("return_without_airline_fees.title"),iconSrc:r,backgroundClassName:n,text:a})},Fe=({informerType:e,isNightMode:t})=>"PAID_CHANGE"===e?(0,z.jsx)(fe,{isNightMode:t}):"PAID_RETURN"===e?(0,z.jsx)(pe,{isNightMode:t}):"CHANGE_WITHOUT_AIRLINE_FEES"===e?(0,z.jsx)(_e,{isNightMode:t}):"RETURN_WITHOUT_AIRLINE_FEES"===e?(0,z.jsx)(ke,{isNightMode:t}):null,ve=$().bind({root:"s___bV2DDfKTHLUz5HMtHXt"}),Ce=({isOpen:e,onClose:t,informerType:r,isNightMode:n})=>e?(0,z.jsxs)(Q.G,{width:480,visible:e,onClose:t,children:[(0,z.jsx)(Q.G.Navigation,{children:(0,z.jsx)(Y.w.RightAccessory,{children:(0,z.jsx)(ee.P,{onClick:t})})}),(0,z.jsx)("div",{className:ve("root"),children:(0,z.jsx)(Fe,{informerType:r,isNightMode:n})})]}):null;var Se=r(89421);const{inputs:Te,outputs:we}=j;r(26699);var Ee=r(49963),Be=r(44619),je=r(57729),Ne=r(37723),Ie=r(99491),Re=r(6328),Ae={root:"s__Z8CXgUAfJomyq9PuoGQB",root_empty:"s__VSIGbPqZZDZBPz8NaKy1",fare:"s__lAL2eHnxHCo6CEvrrEsV",fares:"s__dJLbowVJmnmg8jpR6J7S","empty-text":"s__jOnjK7gblS6_4RZ2hRqd",popup:"s__X8ksYNm_0GuTTn2X_Keo",spinner:"s__Xqsmawm055SrRKN7_rxr","filters-row":"s__oMEIS8Ww3CCNR_qLMKeA","filters-row_hidden":"s__b4FbdyBQYOyfjzOqkqVB","search-filters-upsell":"s__Zni5P9s5SAKaP6joF75g",appear:"s__w61yulzMh048bqlUOa50",enter:"s__YG1SffkJEZKQi7ObTXnr",appearActive:"s__VaqbTw6EVmAAmlLde0Im",enterActive:"s__Qd4f7eKk9w8CHBjveNQJ",exit:"s__g1jHLDO5ItNrXDeSPILs",exitActive:"s__lcaX9ueZNhEDwiLw78U4"},Ue=r(1552);const Le=$().bind({root:"s__kT4FVjJZrE_OBtf6UJcR"}),De=({onToggleFilter:e,className:t,filters:r})=>(0,z.jsx)("div",{className:Le("root",t),children:r.map((t=>(0,z.jsx)(Ue.A,{onClick:()=>e(t.filterType),isSelected:t.isEnabled,isDisabled:!1,isActive:!0,className:Le("chip"),children:t.text},t.filterType)))});var Oe=r(16375),Pe=r(1156),$e=r(39535);const He=$().bind({root:"s__YGqOZLAcUYmW53V0xUJd",title:"s__faWYuAgoN3q3WExFzbtL",text:"s__gyEGtCOWwTIXpnyl_CyO",emoji:"s__RSM_Ik5wfIgB5krWXf7u",content:"s__kVuCWvzOUlkXEFDE7q9W","filters-row":"s__cxMeHdj_CjgF6EyHjAMx","filters-row_hidden":"s__X8eqnfcIQTkcY7bMU6Dw",button:"s__qxl6kZ4bDrrw4LXwHxTr",button_hidden:"s__OmCgT9PEiQyUQ6SqjX6D","group-buttons":"s__BlUz6sGeZJQ2LfYKBnK3","group-buttons_hidden":"s__Lqr2yVVWprrpouViXp18","cancel-button":"s__FXNJx3JvnpWzVGfMo5CN"}),Me=({className:e,isEmptyFares:t=!1,topSlotFilters:r,isFiltersSearchRowVisible:n,setIsFiltersSearchRowVisible:a,onSearchClick:s})=>{const{t:i}=(0,te.useTranslation)("component_ticket_fares_modal"),[l,o]=(0,q.useState)(r.map((e=>({...e,isEnabled:!1})))),c=l.every((e=>!e.isEnabled)),d=(0,q.useCallback)((e=>{const t=l.map((t=>t.filterType===e?{...t,isEnabled:!t.isEnabled}:t));o(t)}),[l]),u=(0,q.useMemo)((()=>r.filter((({isEnabled:e})=>e))),[r]),p=i(t?"searchFiltersUpsell.header.emptyText":"searchFiltersUpsell.header.text"),g=i(t?"searchFiltersUpsell.description.emptyText":"searchFiltersUpsell.description.text"),h=i(t?"searchFiltersUpsell.buttons.search":"searchFiltersUpsell.buttons.configureFilters"),f=i("searchFiltersUpsell.buttons.cancel"),m=(0,q.useCallback)((()=>{if(t)s?.(u.map((({filterType:e})=>e)));else if(n){const e=l.filter((({isEnabled:e})=>e));s?.(e.map((({filterType:e})=>e)))}else a?.(!0)}),[u,l,a,t,n,s]),b=(0,q.useCallback)((()=>{a?.(!1),o(r.map((e=>({...e,isEnabled:!1}))))}),[r,a]);return(0,q.useEffect)((()=>{o((e=>r.map((t=>({...t,isEnabled:e.find((e=>e.filterType===t.filterType))?.isEnabled||!1})))))}),[r]),(0,z.jsxs)("div",{className:He(e,"root"),children:[(0,z.jsxs)("div",{className:He("content"),children:[(0,z.jsx)(Oe.m,{className:He("emoji")}),(0,z.jsx)(Ee.x,{className:He("text"),type:Be.y.Title4Bold,children:p}),(0,z.jsx)(Ee.x,{className:He("text"),type:Be.y.Body2Regular,children:g})]}),(0,z.jsx)(De,{className:He("filters-row",{"filters-row_hidden":!n||t}),filters:l,onToggleFilter:d}),(0,z.jsx)(Pe.z,{className:He("button",{button_hidden:n}),shape:$e.jL.Round,size:$e.qE.XS,onClick:m,inline:!0,children:h}),(0,z.jsxs)("div",{className:He("group-buttons",{"group-buttons_hidden":!n}),children:[(0,z.jsx)(Pe.z,{shape:$e.jL.Round,size:$e.qE.XS,onClick:m,disabled:c,inline:!0,children:i("searchFiltersUpsell.buttons.searchTickets")}),(0,z.jsx)(Pe.z,{shape:$e.jL.Round,size:$e.qE.XS,inline:!0,priority:$e.Ji.Tertiary,onClick:b,className:He("cancel-button"),children:f})]})]})},qe=$().bind(Ae),Ke={appear:Ae.appear,appearActive:Ae.appearActive,enter:Ae.enter,enterActive:Ae.enterActive,exit:Ae.exit,exitActive:Ae.exitActive},Ve=({fares:e,filters:t,onToggleFilter:r,handleSelectFare:n,onInformerTooltipClick:a,isLoading:s=!1,isSearchFiltersUpsellVisible:i=!1,onSearchClick:l})=>{const[o,c]=(0,q.useState)(!1),d=(0,q.useCallback)((()=>{c(!1)}),[]),{handleTouchStart:u,handleTouchMove:p,handleTouchEnd:g}=(({onSwipeUp:e,disable:t})=>(0,q.useMemo)((()=>{let r=null;return{handleTouchStart:e=>{t||(r=e.changedTouches[0].clientY)},handleTouchMove:n=>{t||null===r||n.changedTouches[0].clientY-r>0&&e()},handleTouchEnd:()=>{r=null}}}),[e,t]))({onSwipeUp:d,disable:!o}),{t:h}=(0,te.useTranslation)("component_ticket_fares_modal"),f=(0,q.useRef)(null),m=0===e.length,b=m&&!s&&!i,_=!s||Boolean(!m),x=m?Ie.Ey.L:Ie.Ey.M;return(0,z.jsxs)("div",{onTouchStart:u,onTouchMove:p,onTouchEnd:g,className:qe("root",{root_empty:m&&!i}),children:[(0,z.jsx)(Ne.Z,{appear:!0,mountOnEnter:!0,unmountOnExit:!0,in:s,nodeRef:f,timeout:300,classNames:Ke,children:(0,z.jsx)("div",{ref:f,className:Ae.spinner,children:(0,z.jsx)(Re.$,{size:x})})}),_&&(0,z.jsx)(De,{className:qe("filters-row",{"filters-row_hidden":o}),filters:t,onToggleFilter:r}),!m&&(0,z.jsx)("div",{className:qe("fares"),children:e.map((e=>(0,z.jsx)(G,{onInformerTooltipClick:a,...e,handleSelectFare:n,className:qe("fare")},e.selectedInfo.fareKey)))}),b&&(0,z.jsx)("div",{className:qe("empty-text"),children:(0,z.jsx)(Ee.x,{type:Be.y.Body1Regular,children:h("emptyText")})}),i&&(0,z.jsx)(Me,{topSlotFilters:t,className:qe("search-filters-upsell"),isFiltersSearchRowVisible:o,setIsFiltersSearchRowVisible:c,isEmptyFares:m,onSearchClick:l})]})},ze=$().bind(Ae),We=({isOpen:e,onClose:t,fares:r,filters:n,onToggleFilter:a,handleSelectFare:s,onInformerTooltipClick:i,isLoading:l=!1,retryRequest:o,isError:c,isSearchFiltersUpsellVisible:d,onSearchClick:u})=>{const{t:p}=(0,te.useTranslation)("component_ticket_fares_modal"),g=(0,q.useMemo)((()=>c?(0,z.jsx)("div",{className:ze("root","root_empty"),children:(0,z.jsx)(je.t,{onActionButtonClick:o})}):(0,z.jsx)(Ve,{fares:r,filters:n,handleSelectFare:s,onToggleFilter:a,isLoading:l,onInformerTooltipClick:i,isSearchFiltersUpsellVisible:d,onSearchClick:u})),[r,n,s,l,i,a,c,o,d,u]);return e?(0,z.jsxs)(Q.G,{className:ze("popup"),noAutoFocus:!0,visible:e,onClose:t,theme:"gray",noHeader:c,width:480,children:[(0,z.jsxs)(Q.G.Navigation,{children:[(0,z.jsx)(Y.w.Title,{children:(0,z.jsx)(Ee.x,{type:Be.y.Body1Semi,children:p("title")})}),(0,z.jsx)(Y.w.RightAccessory,{children:(0,z.jsx)(ee.P,{onClick:t})})]}),g]}):null};let Ge;!function(e){e.Baggage="baggage",e.Return="return",e.Change="change",e.Handbag="handbag"}(Ge||(Ge={}));const{outputs:Xe,inputs:Ze}=j,Je={[Ge.Handbag]:"handbag",[Ge.Baggage]:"baggage",[Ge.Return]:"returnBeforeFlight",[Ge.Change]:"changeBeforeFlight"},{inputs:Qe,outputs:Ye}=j,et=(0,n.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp_ticket/services/fares/index.ts",api:{containers:{SelectedFareCardContainer:()=>{const{currentFare:e,changeFareButtonClick:t,upsellFareToggleClick:r,isSearchExpired:n,fareInformerOpenedEvent:a}=(0,O.useUnit)({currentFare:X.$currentFare,changeFareButtonClick:Z.changeFareButtonClicked,upsellFareToggleClick:Z.upsellFareToggleClicked,isSearchExpired:o.N.outputs.$isSearchExpired,fareInformerOpenedEvent:Z.fareInformerOpened});if(!e)return null;const{title:s,options:i,changeFareButtonText:l,baggageUpsell:c}=e;return(0,z.jsx)(G,{title:s,fareOptions:i,onClick:t,changeFareButtonText:l,changeFareButtonClick:t,upsellFareToggleClick:r,baggageUpsell:c,isExpired:n,className:J("root"),onInformerTooltipClick:a})},FareInformerModalContainer:()=>{const{fareInformerClosedEvent:e,fareInformerType:t,isNightMode:r}=(0,O.useUnit)({fareInformerClosedEvent:Te.fareInformerClosed,fareInformerType:we.$fareInformerType,isNightMode:Se.H.outputs.$isNight});return t?(0,z.jsx)(Ce,{onClose:e,informerType:t,isNightMode:r,isOpen:!0}):null},FaresModalContainer:()=>{const{t:e}=(0,te.useTranslation)("component_ticket_fares_modal"),{showHandbagFilter:t,showFaresFilters:r,showReturnTicketFilter:n,showChangeTicketFilter:a,isFaresModalVisible:s,handleCloseModal:i,fares:o,handleFareSelected:c,isLoading:d,requiredTicketFromDirectScheduleLoading:u,isBletError:p,retryRequest:g,fareInformerOpenedEvent:h,upsellSearchClicked:f}=(0,O.useUnit)({showHandbagFilter:Xe.$showHandbagFilter,showReturnTicketFilter:Xe.$showReturnTicketFilter,showChangeTicketFilter:Xe.$showChangeTicketFilter,showFaresFilters:Xe.$showFaresFilters,isFaresModalVisible:Xe.$isFaresModalVisible,handleCloseModal:Ze.faresModalClosed,fares:Xe.$fares,handleFareSelected:Ze.fareSelected,isLoading:l.X.outputs.$isLoading,requiredTicketFromDirectScheduleLoading:l.X.outputs.$requiredTicketFromDirectScheduleLoading,isBletError:l.X.outputs.$isBletError,retryRequest:l.X.inputs.fetchBletApi,fareInformerOpenedEvent:Ze.fareInformerOpened,upsellSearchClicked:Ze.upsellSearchClicked}),m=(0,q.useMemo)((()=>{const r=[];return t&&r.push({filterType:Ge.Handbag,text:e("filters.largeHandLuggage"),isEnabled:!1}),r.push({filterType:Ge.Baggage,text:e("filters.baggage"),isEnabled:!1}),a&&r.push({filterType:Ge.Change,text:e("filters.change"),isEnabled:!1}),n&&r.push({filterType:Ge.Return,text:e("filters.return"),isEnabled:!1}),r}),[e,t,a,n]),[b,_]=(0,q.useState)(m),x=(0,q.useMemo)((()=>o.filter((e=>b.every((t=>{switch(t.filterType){case Ge.Handbag:return!t.isEnabled||e.hasLargeHandbags;case Ge.Baggage:return!t.isEnabled||e.hasBaggage;case Ge.Change:return!t.isEnabled||e.hasChange;case Ge.Return:return!t.isEnabled||e.hasReturn;default:return!0}})))).map((({fareKey:e,isCurrent:t,...r})=>({...r,selectedInfo:{fareKey:e,isSelected:t}})))),[o,b]),y=(0,q.useCallback)((e=>{_((t=>t.map((t=>t.filterType===e?{...t,isEnabled:!t.isEnabled}:t))))}),[]),k=(0,q.useCallback)((e=>{f(Object.values(Ge).reduce(((t,r)=>({...t,[Je[r]]:e.includes(r)})),{}))}),[f]);return(0,q.useEffect)((()=>{s||_(m)}),[s,m]),(0,q.useEffect)((()=>{_((e=>m.map((t=>({...t,isEnabled:e.find((e=>e.filterType===t.filterType))?.isEnabled||!1})))))}),[m]),s?(0,z.jsx)(We,{isOpen:!0,onClose:i,fares:x,filters:b,handleSelectFare:c,onToggleFilter:y,isSearchFiltersUpsellVisible:r,onSearchClick:k,isLoading:d||u,onInformerTooltipClick:h,retryRequest:g,isError:p}):null}},inputs:Qe,outputs:Ye}})},68557:function(e,t,r){"use strict";r.d(t,{d:function(){return se}}),r(26699);var n=r(98116),a=r(47480),s=r(31438),i=r(80472),l=r(38032),o=r(65740),c=r(76588),d=r(43639),u=r(99186),p=r(54824),g=r(28258),h=r(27497),f=r(5016),m=r(54801),b=r(4517),_=r(39060),x=r.n(_),y=r(74359);const k=({filtersState:e,fareKey:t,isFaresFlagEnabled:r,filtersBoundaries:n,withFares:a})=>{const s=y.Dp.toDto(e,n),{price:i,agents:l,transfers_without_virtual_interline:o,payment_methods:c,transfers_without_visa:d,airlines:u,alliances:p,without_interlines:g,without_lowcosts:h,with_same_departure_arrival_airport:f,pin_flight_signatures:m,transfers_count:b,transfers_duration:_,segments:k,transfers_without_airport_change:F,without_night_transfers:v,without_short_layover:C,transfers_airports:S,without_covid_restrictions:T,baggage:w,return_before_flight:E,change_before_flight:B}=s;return{...r||a?{fareKey:t}:{},baggage:w,withoutVirtualInterline:o,paymentMethods:c,transfersWithoutVisa:d,transfersCount:b,transfersDuration:_,transfersAirports:S,transfersWithoutAirportChange:F,withoutInterlines:g,withoutLowcosts:h,withoutShortLayover:C,withoutNightTransfers:v,withoutCovidRestrictions:T,withSameDepartureArrivalAirport:f,pinFlightSignatures:m,agents:l,price:i,airlines:u,alliances:p,returnBeforeFlight:E,changeBeforeFlight:B,segments:k?x()(k).map((([e,t])=>{const r={airportsArrival:t.airports_arrival,airportsDeparture:t.airports_departure,arrivalTime:t.arrival_time,departureTime:t.departure_time,tripDuration:t.trip_duration};return{key:Number(e),value:r}})):void 0}};var F=r(55902);const v=(0,n.createEvent)({sid:"-j2kzd8"}),C=(0,n.createEvent)({sid:"acz7lp"}),S=(0,n.createEvent)({sid:"-ajojvr"}),T=(0,n.createEvent)({sid:"wf35gk"}),w=(0,n.createEvent)({sid:"pbtnl9"}),E=(0,n.createEvent)({sid:"-gh2bx2"}),B=(0,n.createEvent)({sid:"-qcsjkr"}),j=(0,n.createEvent)({sid:"dlsvrs"}),N=(0,n.createEvent)({sid:"xeuthc"}),I=(0,n.createEvent)({sid:"-w94tdv"}),R=(0,n.createEvent)({sid:"2qtvft"}),A=(0,n.createEvent)({sid:"mrntew"}),U=(0,n.createStore)(!1,{sid:"-kdcj1"}).on(v,((e,t)=>t)),L=(0,n.createStore)(null,{sid:"llvsjh"}).on(E,((e,t)=>t)).reset(j),D=(0,n.createStore)(null,{sid:"-kvcto5"}).on(T,((e,t)=>t)).reset(w),O=(0,n.createStore)(null,{sid:"-z35a3x"}).on(A,((e,t)=>t)).reset(j),P=(0,n.createStore)(!1,{sid:"4x447n"}).on(B,((e,t)=>t)).reset(j),$=(0,n.createStore)("",{sid:"kf6auz"}).on(C,(()=>(0,a.x0)())),H=g.E.outputs.$searchSession.map((e=>`${e?.ticketUrl&&e?.ticketUrl.includes("://")?"":"https://"}${e?.ticketUrl}`)),M=b.r.outputs.$faresFlag.map((({enabled:e})=>e)),q=b.r.outputs.$directTicketsScheduleV3Flag.map((({enabled:e})=>e)),K=b.r.outputs.$faresFlag.map((({enabled:e})=>e)),V=b.r.outputs.$faresV2Flag.map((({enabled:e})=>e)),z=b.r.outputs.$ticketHeaderFlag.map((({enabled:e})=>e)),W=b.r.outputs.$bletInformersFlag.map((({enabled:e})=>e)),G=(0,n.createStore)(!1,{sid:"-uvxjz7"}).on(R,(()=>!0)).reset(j),X=(0,n.createEvent)({sid:"-qj4t9n"}),Z=(0,n.createEvent)({sid:"xqe23j"}),J=(0,n.createStore)(null,{sid:"k4px4w"}).on(X,((e,t)=>t)).reset([j,Z]),Q=(0,n.combine)({and:[{meta:g.E.outputs.$searchSession,searchStatus:h.N.outputs.$searchStatus,ticketSign:L},({searchStatus:e,meta:t,ticketSign:r})=>e!==s.S.Expired&&null!==t&&null!==r],or:{sid:"ea1grg"}}),Y=(0,n.combine)({and:[{currentDirectScheduleCarrier:O,isDirectTicketsScheduleV3Enabled:q,isFaresEnabled:K,isBletFareEnabled:V,isTicketHeaderEnabled:z,areBletInformersEnabled:W},({currentDirectScheduleCarrier:e,isDirectTicketsScheduleV3Enabled:t,isFaresEnabled:r,isBletFareEnabled:n,isTicketHeaderEnabled:a,areBletInformersEnabled:s})=>({withDirectSchedule:Boolean(t&&e),withBaggageUpsell:!r&&!n,withFares:n,withTicketHeader:a,withBletInformers:s})],or:{sid:"1zelwi"}}),ee=(0,n.combine)({and:[{meta:g.E.outputs.$searchSession,locale:u.l.outputs.$language,weightUnit:d.J.outputs.$weightUnit,lengthUnit:d.J.outputs.$lengthUnit,filtersState:f.j.outputs.$filtersState,filtersBoundaries:f.j.outputs.$filtersBoundaries,signature:L,fareKey:D,isFaresFlagEnabled:M,hasTicketBaggage:P,directFlightGroupKey:O,fetchDataQueryConfig:Y},({meta:e,locale:t,weightUnit:r,lengthUnit:n,filtersState:a,signature:s,fareKey:i,isFaresFlagEnabled:l,hasTicketBaggage:o,filtersBoundaries:c,directFlightGroupKey:d,fetchDataQueryConfig:u})=>{const{withDirectSchedule:p,withBaggageUpsell:g,withFares:h}=u,f=(({weightMetricSystem:e,lengthMetricSystem:t,withFares:r,withBaggageUpsell:n,hasTicketBaggage:a})=>{const s={weightMetricSystem:e,lengthMetricSystem:t};return r?(s.isFareBaggageToggled=a,s):n?(s.isBaggageToggled=a,s):s})({weightMetricSystem:"kilogram"===r?F.bO.KG:F.bO.LBS,lengthMetricSystem:"kilometer"===n?F._z.CM:F._z.INCH,withFares:h||l,withBaggageUpsell:g,hasTicketBaggage:o});return{searchId:e?.searchId,locale:t,signature:s,filters:k({filtersState:a,filtersBoundaries:c,fareKey:i,isFaresFlagEnabled:l,withFares:h}),bletFiltersInput:f,directFlightGroupKey:p?d:null,...u}}],or:{sid:"1edzk4"}}),te=(0,n.withFactory)({sid:"dubj4c",fn:()=>(0,p.$)({name:"Blet",params:p.z,graphQL:{query:"query GetTicket(\n  $searchId: String!,\n  $locale: Language!,\n  $filters: FiltersStateInput,\n  $signature: String!,\n  $directFlightGroupKey: String,\n  $withDirectSchedule: Boolean!,\n  $withBaggageUpsell: Boolean!,\n  $bletFiltersInput: BletFiltersInput,\n  $withFares: Boolean!\n  $withTicketHeader: Boolean!,\n  $withBletInformers: Boolean!,\n){\nsearch(\n  searchId: $searchId,\n  locale: $locale,\n  filters: $filters,\n) {\n  ticket(signature: $signature, directFlightGroupKey: $directFlightGroupKey, bletFiltersInput: $bletFiltersInput) {\n    fareChangeUpsellOptions {\n      downsell {\n        deltaPrice {\n          currencyCode\n          value\n        }\n        available\n        isFromConfig\n        penalty {\n          currencyCode\n          value\n        }\n      }\n      upsell {\n        deltaPrice {\n          currencyCode\n          value\n        }\n        available\n        isFromConfig\n        penalty {\n          currencyCode\n          value\n        }\n      }\n    }\n    fareReturnUpsellOptions {\n      downsell {\n        deltaPrice {\n          currencyCode\n          value\n        }\n        available\n        isFromConfig\n        penalty {\n          currencyCode\n          value\n        }\n      }\n      upsell {\n        deltaPrice {\n          currencyCode\n          value\n        }\n        available\n        isFromConfig\n        penalty {\n          currencyCode\n          value\n        }\n      }\n    }\n    fareHandbagsUpsellOptions {\n      downsell {\n        deltaPrice {\n          currencyCode\n          value\n        }\n        count\n        height\n        length\n        sumDimension\n        totalWeight\n        weight\n        width\n        isLargeHandbags\n      }\n      upsell {\n        deltaPrice {\n          currencyCode\n          value\n        }\n        count\n        height\n        length\n        sumDimension\n        totalWeight\n        weight\n        width\n        isLargeHandbags\n      }\n    }\n    fareBaggageUpsellOptions {\n      downsell {\n        deltaPrice {\n          currencyCode\n          value\n        }\n        count\n        height\n        length\n        sumDimension\n        totalWeight\n        weight\n        width\n        isLargeHandbags\n      }\n      upsell {\n        deltaPrice {\n          currencyCode\n          value\n        }\n        count\n        height\n        length\n        sumDimension\n        totalWeight\n        weight\n        width\n        isLargeHandbags\n      }\n    }\n    currentFare @include (if: $withFares) {\n      title\n      changeFareButtonText\n      options {\n        mainText\n        secondaryText\n        isDimensionsIconVisible\n        tooltipText\n        tooltipInformerType\n        state\n      }\n      baggageUpsell {\n        deltaPrice {\n          currency: currencyCode\n          value\n        }\n        isBaggageEnabled\n        text\n        toggleFareKey\n      }\n    }\n    fares @include (if: $withFares) {\n      fareKey\n      title\n      price {\n        currency: currencyCode\n        value\n      }\n      fareOptions: options {\n        mainText\n        secondaryText\n        isDimensionsIconVisible\n        tooltipText\n        tooltipInformerType\n        state\n      }\n      proposal {\n        minimumFare {\n          baggage {\n            count\n            height\n            length\n            sumDimension\n            totalWeight\n            weight\n            width\n          }\n          handbags {\n            count\n            height\n            length\n            sumDimension\n            totalWeight\n            weight\n            width\n          }\n          changeBeforeFlight {\n            available\n            isFromConfig\n            penalty {\n              currencyCode\n              value\n            }\n          }\n          returnBeforeFlight {\n            available\n            isFromConfig\n            penalty {\n              currencyCode\n              value\n            }\n          }\n        }\n      }\n      deltaPrice {\n        currencyCode\n        value\n      }\n      isCurrent\n      hasBaggage\n      hasChange\n      hasReturn\n      hasLargeHandbags\n    }\n    baggageProposalUpsell @include(if: $withBaggageUpsell) {\n      deltaPrice {\n        currencyCode,\n        value\n      }\n      isToggleVisible\n      isToggleEnabled\n      baggageIcon\n      baggageStatusText\n      baggageUpsellText\n      baggageTooltipText\n    }\n    directFlightsSchedule @include(if: $withDirectSchedule) {\n      departures {\n        datetime\n        priceDiff {\n          currencyCode\n          value\n        }\n        signature\n        isAvailable\n        isCurrent\n        fareKey\n        minimumFareKey\n      }\n      returns {\n        datetime\n        priceDiff {\n          currencyCode\n          value\n        }\n        signature\n        isAvailable\n        isCurrent\n        fareKey\n        minimumFareKey\n      }\n    }\n    signature\n    searchParams {\n      passengers {\n        adults\n        children\n        infants\n      }\n    }\n    firstOperatingCarrier {\n      carrier\n    }\n    proposals {\n      id\n      acceptedCards {\n        region\n        system\n      }\n      agent {\n        id\n        title\n        isAirline\n        isAssisted\n        iconInfo {\n          darkURL\n          lightURL\n        }\n      }\n      typeTitle\n      isPrimaryButton\n      price {\n        currencyCode\n        value\n      }\n      cashback {\n        value\n      }\n      informers {\n        text\n        backgroundColor {\n          light\n          dark\n        }\n        textColor {\n          light\n          dark\n        }\n        endIcon {\n          darkURL\n          lightURL\n        }\n      }\n    }\n    drawerProposals {\n      id\n      acceptedCards {\n        region\n        system\n      }\n      agent {\n        id\n        title\n        isAirline\n        isAssisted\n        iconInfo {\n          darkURL\n          lightURL\n        }\n      }\n      typeTitle\n      isPrimaryButton\n      price {\n        currencyCode\n        value\n      }\n      cashback {\n        value\n      }\n      informers {\n        text\n        backgroundColor {\n          light\n          dark\n        }\n        textColor {\n          light\n          dark\n        }\n        endIcon {\n          darkURL\n          lightURL\n        }\n        ... on Text {\n          isStickyDrawerVisible\n        }\n      }\n    }\n    stickyDrawerProposalsShowAmount\n    headerInfo @include(if: $withTicketHeader) {\n      titleText\n      subTitleText\n      image\n    }\n    ticketInformers @include(if: $withBletInformers) {\n      text\n      iconType\n      informerModalId\n    }\n    drawerProposalsButtonText\n    drawerWidgetHeader {\n      title\n      subTitle\n    }\n  }\n}\n}",variables:ee},request:{url:H},response:{contract:(0,i.v)(F.Lc)},abort:S})});(0,n.sample)({and:[{clock:C,filter:Q,target:te.start}],or:{sid:"nv4513"}});const re=(0,n.combine)({and:[{bletApiPending:te.$pending,searchStatus:h.N.outputs.$searchStatus},({bletApiPending:e,searchStatus:t})=>{const r=[s.S.Finished,s.S.Expired].includes(t);return e||!r}],or:{sid:"-mdce82"}}),ne=(0,n.combine)({and:[{requiredTicketFromDirectScheduleLoading:U,bletApiPending:te.$pending,ticketChangeHandlerSource:J},({requiredTicketFromDirectScheduleLoading:e,bletApiPending:t,ticketChangeHandlerSource:r})=>({areBlocked:null!==r&&(t||e),source:r})],or:{sid:"6toxng"}}),ae=ne.map((e=>e.areBlocked));(0,n.sample)({and:[{clock:g.E.outputs.chunksLoaded,filter:(0,n.withFactory)({sid:"w8zqk5",fn:()=>(0,l.f)(U)}),target:C}],or:{sid:"qmmwfg"}}),(0,n.sample)({and:[{clock:te.finished.finally,target:Z}],or:{sid:"qrl1rp"}}),(0,n.sample)({and:[{clock:te.start,fn:()=>!1,target:G}],or:{sid:"r5vp73"}}),(0,n.sample)({and:[{clock:te.finished.success,fn:({result:e})=>e,target:(0,n.withFactory)({sid:"-e6crw4",fn:()=>(0,o.s)({if:m.rC,then:I,else:N})})}],or:{sid:"rmdizx"}}),(0,n.sample)({and:[{clock:N,fn:m.vY,target:R}],or:{sid:"-wzquax"}}),(0,n.sample)({and:[{clock:te.finished.failure,filter:c.eE,fn:({error:e})=>({type:F.PB.UserOffline,message:`${e?.explanation||""}`,error:e}),target:R}],or:{sid:"-wwg2qr"}}),(0,n.sample)({and:[{clock:te.finished.failure,filter:c.QO,fn:({error:e})=>({type:F.PB.ParseError,message:`${e?.explanation||""}`,error:e}),target:R}],or:{sid:"-w27e3w"}}),(0,n.sample)({and:[{clock:te.finished.failure,filter:e=>!(0,n.withFactory)({sid:"4q97hm",fn:()=>(0,c.eE)(e)})&&!(0,n.withFactory)({sid:"4q9946",fn:()=>(0,c.QO)(e)}),fn:({error:e})=>{const t=e?.response?.errors?.[0],r=t?.message||"",n=t?.extensions.errorType||F.PB.SystemError,a=t?.path,s=e?.status;return{type:n,message:r,path:a,status:s,error:e}},target:R}],or:{sid:"-vjidxm"}});const se={inputs:{ticketSearchSignatureUpdated:E,ticketSearchHasBaggageUpdated:B,ticketSearchDataReset:j,currentFareKeyUpdated:T,currentFareKeyReset:w,fetchBletApi:C,abortBletApi:S,currentGroupKeyUpdated:A,requiredTicketFromDirectScheduleFetchUpdated:v,ticketChangeHandlerSourceUpdated:X},outputs:{chunksLoaded:I,fetchBletApi:C,$isLoading:re,$ticketSignature:L,$requestId:$,$hasTicketBaggage:P,searchFailed:R,$currentFareKey:D,fetchBletQuery:te,$requiredTicketFromDirectScheduleLoading:U,$ticketChangeHandlers:ne,$areTicketChangeHandlersBlocked:ae,$url:H,$variables:ee,$isBletError:G},internals:{fetchBletQuery:te,ticketChangeHandlerSourceReset:Z,$ticketChangeHandlerSource:J}}},55902:function(e,t,r){"use strict";r.d(t,{DY:function(){return L},Lc:function(){return D},PB:function(){return O},YY:function(){return y},_z:function(){return $},bO:function(){return P}});var n=r(35529),a=r(70174);const s=(0,n.Record)({carrier:n.String}),i=(0,n.Record)({passengers:(0,n.Record)({adults:n.Number,children:n.Number,infants:n.Number})}),l=(0,n.Record)({darkURL:n.String,lightURL:n.String}),o=(0,n.Record)({currencyCode:n.String,value:n.Number}),c=(0,n.Record)({region:(0,n.Union)((0,n.Literal)("ru"),(0,n.Literal)("ww")),system:(0,n.Union)((0,n.Literal)("mir"),(0,n.Literal)("card"))}),d=(0,n.Record)({text:n.String,backgroundColor:a.n,textColor:a.n,endIcon:l.nullable()}),u=(0,n.Record)({id:n.String,agent:(0,n.Record)({id:n.Number,title:n.String,isAirline:n.Boolean,isAssisted:n.Boolean,iconInfo:l}),typeTitle:n.String.nullable(),cashback:(0,n.Record)({value:n.Number}).nullable(),isPrimaryButton:n.Boolean.nullable(),price:o,acceptedCards:(0,n.Array)(c).nullable(),informers:(0,n.Array)(d).nullable()}),p=(0,n.Record)({text:n.String,backgroundColor:a.n,textColor:a.n,endIcon:l.nullable(),isStickyDrawerVisible:n.Boolean}),g=(0,n.Record)({id:n.String,agent:(0,n.Record)({id:n.Number,title:n.String,isAirline:n.Boolean,isAssisted:n.Boolean,iconInfo:l}),typeTitle:n.String.nullable(),cashback:(0,n.Record)({value:n.Number}).nullable(),isPrimaryButton:n.Boolean.nullable(),price:o,acceptedCards:(0,n.Array)(c).nullable(),informers:(0,n.Array)(p).nullable()}),h=(0,n.Record)({datetime:n.String,priceDiff:o,signature:n.String,isAvailable:n.Boolean,isCurrent:n.Boolean,fareKey:n.String.nullable(),minimumFareKey:n.String.nullable()}),f=(0,n.Record)({departures:(0,n.Array)(h).nullable(),returns:(0,n.Array)(h).nullable()}),m=(0,n.Union)((0,n.Literal)("DISABLED"),(0,n.Literal)("ENABLED")),b=(0,n.Record)({baggageIcon:m,deltaPrice:o.nullable(),isToggleVisible:n.Boolean,isToggleEnabled:n.Boolean.nullable(),baggageStatusText:n.String,baggageUpsellText:n.String.nullable(),baggageTooltipText:n.String.nullable()}),_=(0,n.Union)((0,n.Literal)("PAID_RETURN"),(0,n.Literal)("PAID_CHANGE"),(0,n.Literal)("RETURN_WITHOUT_AIRLINE_FEES"),(0,n.Literal)("CHANGE_WITHOUT_AIRLINE_FEES")),x=(0,n.Union)((0,n.Literal)("AVAILABLE"),(0,n.Literal)("NOT_AVAILABLE")),y=(0,n.Record)({mainText:n.String,secondaryText:n.String.nullable(),isDimensionsIconVisible:n.Boolean,tooltipText:n.String.nullable(),tooltipInformerType:_.nullable(),state:x}),k=(0,n.Record)({deltaPrice:(0,n.Record)({currency:n.String,value:n.Number}).nullable(),isBaggageEnabled:n.Boolean.nullable(),text:n.String.nullable(),toggleFareKey:n.String.nullable()}),F=(0,n.Record)({title:n.String,changeFareButtonText:n.String.nullable(),options:(0,n.Array)(y),baggageUpsell:k.nullable()}),v=(0,n.Record)({count:n.Number,height:n.Number.nullable(),length:n.Number.nullable(),sumDimension:n.Number.nullable(),totalWeight:n.Number.nullable(),weight:n.Number.nullable(),width:n.Number.nullable()}),C=(0,n.Record)({available:n.Boolean,isFromConfig:n.Boolean,penalty:o.nullable()}),S=(0,n.Record)({minimumFare:(0,n.Record)({baggage:v.nullable(),handbags:v.nullable(),changeBeforeFlight:C.nullable(),returnBeforeFlight:C.nullable()})}),T=(0,n.Record)({deltaPrice:o,available:n.Boolean,isFromConfig:n.Boolean,penalty:o.nullable()}),w=(0,n.Record)({downsell:T.nullable(),upsell:T.nullable()}),E=(0,n.Record)({deltaPrice:o,count:n.Number,height:n.Number.nullable(),length:n.Number.nullable(),sumDimension:n.Number.nullable(),totalWeight:n.Number.nullable(),weight:n.Number.nullable(),width:n.Number.nullable(),isLargeHandbags:n.Boolean.nullable()}),B=(0,n.Record)({downsell:E.nullable(),upsell:E.nullable()}),j=(0,n.Record)({fareKey:n.String,title:n.String,price:(0,n.Record)({currency:n.String,value:n.Number}),deltaPrice:o.nullable(),fareOptions:(0,n.Array)(y),isCurrent:n.Boolean,hasBaggage:n.Boolean,hasChange:n.Boolean,hasReturn:n.Boolean,hasLargeHandbags:n.Boolean,proposal:S}),N=(0,n.Record)({titleText:n.String,subTitleText:n.String,image:n.String}),I=(0,n.Record)({title:n.String,subTitle:n.String}),R=(0,n.Union)((0,n.Literal)("WARNING"),(0,n.Literal)("RESTRICTED"),(0,n.Literal)("HISTORY")),A=(0,n.Record)({text:n.String,iconType:R,informerModalId:n.String}),U=(0,n.Record)({search:(0,n.Record)({ticket:(0,n.Record)({signature:(0,n.Optional)(n.String),searchParams:(0,n.Optional)(i),firstOperatingCarrier:(0,n.Optional)(s),proposals:(0,n.Optional)((0,n.Array)(u)),drawerProposals:(0,n.Optional)((0,n.Array)(g)),stickyDrawerProposalsShowAmount:n.Number,directFlightsSchedule:(0,n.Optional)(f.nullable()),baggageProposalUpsell:(0,n.Optional)(b),currentFare:(0,n.Optional)(F),fares:(0,n.Optional)((0,n.Array)(j)),drawerProposalsButtonText:(0,n.Optional)(n.String.nullable()),fareChangeUpsellOptions:w,fareReturnUpsellOptions:w,fareHandbagsUpsellOptions:B,fareBaggageUpsellOptions:B,headerInfo:(0,n.Optional)(N),drawerWidgetHeader:I,ticketInformers:(0,n.Optional)((0,n.Array)(A).nullable())})}).nullable()}),L=(0,n.Optional)((0,n.Array)((0,n.Record)({message:n.String,path:(0,n.Array)(n.String),extensions:(0,n.Record)({errorType:n.String.nullable().optional()}).nullable().optional()}))),D=(0,n.Record)({data:U,errors:L});let O,P,$;!function(e){e.SystemError="SystemError",e.UserOffline="UserOffline",e.Unknown="Unknown",e.ParseError="ParseError",e.ChunkNotModified="ChunkNotModified",e.NoSearchFound="NoSearchFound",e.NoTicketFound="NoTicketFound",e.NoFareFound="NoFareFound",e.NoBrandTicketFound="NoBrandTicketFound",e.ResultsTimeout="ResultsTimeout",e.ResultsError="ResultsError",e.BoundaryNotFound="BoundaryNotFound",e.BoundaryNotSupported="BoundaryNotSupported",e.NoFlightLegFound="NoFlightLegFound",e.DirectV2FilterError="DirectV2FilterError",e.DirectTicketsFilterError="DirectTicketsFilterError",e.BaggageFilterError="BaggageFilterError",e.AcceptedCardsError="AcceptedCardsError",e.EmptyProposals="EmptyProposals",e.EmptyDrawerProposals="EmptyDrawerProposals",e.NoCurrentProposalFound="NoCurrentProposalFound",e.NoProposalFound="NoProposalFound"}(O||(O={})),function(e){e.KG="KG",e.LBS="LBS"}(P||(P={})),function(e){e.CM="CM",e.INCH="INCH"}($||($={}))},4449:function(e,t,r){"use strict";r.d(t,{X:function(){return h}}),r(21703);var n=r(30091),a=r(98116),s=r(78260),i=r(68557),l=r(55902);const o=(0,s.cr)("serp-ticket",{name:"api-blet"}),c=(0,s.cr)("serp-ticket",{name:"api-blet NoFareFound",samplingRate:.7}),d=(0,s.cr)("serp-ticket",{name:"api-blet UserOffline",samplingRate:.5}),u=(0,s.cr)("serp-ticket",{name:"api-blet NoSearchFound",samplingRate:.7}),p=(0,a.sample)({and:[{clock:i.d.outputs.searchFailed,source:{requestId:i.d.outputs.$requestId,variables:i.d.outputs.$variables},fn:({requestId:e,variables:t},{type:r,message:n,path:a,error:s})=>{const i=r===l.PB.SystemError?s?.errorType:r;return{msg:`Blet-Api-Error: ${i}`,label:`Blet-Api-Error: ${i}`,error:new Error(JSON.stringify({message:n,path:a})),extra:{error:s,requestId:e,searchId:t.searchId}}}}],or:{sid:"dxiws8"}});(0,a.split)({and:[{source:p,match:{noFareFound:({msg:e})=>"Blet-Api-Error: NoFareFound"===e,userOffline:({msg:e})=>"Blet-Api-Error: UserOffline"===e,noSearchFound:({msg:e})=>"Blet-Api-Error: NoSearchFound"===e},cases:{noFareFound:c.sendErrorLog,userOffline:d.sendErrorLog,noSearchFound:u.sendErrorLog,__:o.sendErrorLog}}],or:{sid:"ga5om"}});var g=r(23588);(0,a.sample)({and:[{clock:i.d.outputs.$ticketChangeHandlers,target:g.z.inputs.ticketChangeHandlersUpdatedFx}],or:{sid:"753jyv"}}),(0,a.sample)({and:[{clock:i.d.internals.fetchBletQuery.finished.finally,target:g.z.inputs.bletChunkLoaded}],or:{sid:"5jyd9f"}});const h=(0,n.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp_ticket/services/ticket/api/index.ts",api:{inputs:i.d.inputs,outputs:i.d.outputs,internals:i.d.internals},attachTestApi:()=>{throw new Error("Test API is not available in production")}})},54801:function(e,t,r){"use strict";r.d(t,{FP:function(){return a},rC:function(){return s},vY:function(){return i}}),r(26699);var n=r(55902);const a=e=>Object.values(n.PB).includes(e),s=e=>!e.errors,i=e=>{const t=e.errors?.[0],r=t?.extensions?.errorType||"";return{type:a(r)?r:n.PB.Unknown,message:t?.message||"",path:t?.path||[],status:200}}},70174:function(e,t,r){"use strict";r.d(t,{n:function(){return a}});var n=r(35529);const a=(0,n.Record)({light:n.String,dark:n.String})},39060:function(e,t,r){e.exports=r(37453)},16375:function(e,t,r){"use strict";r.d(t,{m:function(){return i}});var n=r(85893),a=r(67294);const s=({className:e,...t},r)=>(0,n.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:r,style:{display:"inline-block"},...t,children:[(0,n.jsxs)("g",{clipPath:"url(#EmojiEyes__a)",children:[(0,n.jsx)("path",{d:"M0 11.764c0 3.616 1.395 8.861 5.6 8.861s5.6-5.245 5.6-8.86C11.2.578 0 .578 0 11.764Z",fill:"url(#EmojiEyes__b)"}),(0,n.jsx)("path",{d:"M.672 12.068c0 5.032 5.226 5.032 5.226 0 0-4.825-5.226-4.825-5.226 0Z",fill:"#302C3B"}),(0,n.jsx)("path",{d:"M3.659 10.074c0 1.12 1.493 1.12 1.493 0a.749.749 0 0 0-1.494 0Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M12.8 11.764c0 3.616 1.395 8.861 5.6 8.861s5.6-5.245 5.6-8.86c0-11.187-11.2-11.187-11.2 0Z",fill:"url(#EmojiEyes__c)"}),(0,n.jsx)("path",{d:"M13.472 12.068c0 5.032 5.226 5.032 5.226 0 0-4.825-5.226-4.825-5.226 0Z",fill:"#302C3B"}),(0,n.jsx)("path",{d:"M16.459 10.074c0 1.12 1.493 1.12 1.493 0a.749.749 0 0 0-1.493 0Z",fill:"#fff"})]}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("radialGradient",{id:"EmojiEyes__b",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(5.22675 0 0 8.5804 5.04 11.794)",children:[(0,n.jsx)("stop",{stopColor:"#fff"}),(0,n.jsx)("stop",{offset:.794,stopColor:"#fff"}),(0,n.jsx)("stop",{offset:.859,stopColor:"#F7F9FA"}),(0,n.jsx)("stop",{offset:.959,stopColor:"#E2E8ED"}),(0,n.jsx)("stop",{offset:1,stopColor:"#D7E0E6"})]}),(0,n.jsxs)("radialGradient",{id:"EmojiEyes__c",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(5.22675 0 0 8.5804 17.84 11.794)",children:[(0,n.jsx)("stop",{stopColor:"#fff"}),(0,n.jsx)("stop",{offset:.794,stopColor:"#fff"}),(0,n.jsx)("stop",{offset:.859,stopColor:"#F7F9FA"}),(0,n.jsx)("stop",{offset:.959,stopColor:"#E2E8ED"}),(0,n.jsx)("stop",{offset:1,stopColor:"#D7E0E6"})]}),(0,n.jsx)("clipPath",{id:"EmojiEyes__a",children:(0,n.jsx)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})]})]}),i=(0,a.memo)((0,a.forwardRef)(s));i.displayName="EmojiEyes"},94063:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var n=r(85893),a=r(67294);const s=({className:e,...t},r)=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":!0,className:e,"data-test-id":"icon",ref:r,style:{display:"inline-block"},...t,children:[(0,n.jsx)("path",{d:"M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z",fill:"#35C768"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.03 6.53-4.5 4.5H6.47l-2.5-2.5 1.06-1.06L7 9.44l3.97-3.97 1.06 1.06Z",fill:"#fff"})]}),i=(0,a.memo)((0,a.forwardRef)(s));i.displayName="Icon16ColorAllowed"}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/shared-dc5e2e6eb2b117826662ce9ce6c6b9712185cbfc.8c693e8fc905951c8ba6.min.js.map