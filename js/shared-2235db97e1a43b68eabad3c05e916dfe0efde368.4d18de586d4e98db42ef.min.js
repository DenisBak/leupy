(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[63877],{47777:function(e,t,r){"use strict";r.d(t,{$:function(){return m}});var a,i=r(98116),n=r(41783),s=r(30091);!function(e){e.DesktopWeb="desktop_web",e.MobileWeb="mobile_web",e.WebView="webview"}(a||(a={}));var o=r(49670),l=r(38387);const{$isCurrentPlatformWebView:c}=o.U.outputs,{$isMobile:d}=l.l.outputs,u={$platform:(0,i.combine)({and:[d,c,(e,t)=>{let r=a.DesktopWeb;return t?r=a.WebView:e&&(r=a.MobileWeb),r}],or:{sid:"-56m1mo"}})},p=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/assisted_px/services/platform/index.ts",api:{outputs:u}}),{$platform:g}=p.outputs,m=(0,i.combine)({and:[n.qS,g,(e,t)=>({...e,platform:t})],or:{sid:"-n8rya9"}})},60871:function(e,t,r){"use strict";r.d(t,{Gr:function(){return mt},$G:function(){return St},mc:function(){return yt},PD:function(){return ct},Zq:function(){return Ot},b4:function(){return wt},St:function(){return Lt},so:function(){return It},Mn:function(){return xt},is:function(){return vt},BB:function(){return _t},UV:function(){return ft},l5:function(){return gt},Mt:function(){return dt},nn:function(){return $t},QZ:function(){return Ut},se:function(){return Ct},QF:function(){return Dt},jD:function(){return Et},OJ:function(){return At},an:function(){return Bt},Ld:function(){return Pt},pZ:function(){return pt},lw:function(){return bt},pb:function(){return ut}});var a=r(35529);(0,a.Union)((0,a.Literal)("adult"),(0,a.Literal)("child"),(0,a.Literal)("infant"));const i=(0,a.Union)((0,a.Literal)("russian_national_passport"),(0,a.Literal)("russian_international_passport"),(0,a.Literal)("birth_certificate"),(0,a.Literal)("passport"),(0,a.Literal)("unknown")),n=(0,a.Union)((0,a.Literal)("insurance"),(0,a.Literal)("package"),(0,a.Literal)("baggage"),(0,a.Literal)("seat"),(0,a.Literal)("pet"),(0,a.Literal)("meal"),(0,a.Literal)("aeroexpress"),(0,a.Literal)("additional_service"),(0,a.Literal)("additional_equipment"),(0,a.Literal)("hand_baggage")),s=(0,a.Record)({currency_code:a.String,value:a.Number}),o=((0,a.Union)((0,a.Literal)("green"),(0,a.Literal)("blue"),(0,a.Literal)("brand_blue"),(0,a.Literal)("red"),(0,a.Literal)("yellow"),(0,a.Literal)("purple"),(0,a.Literal)("pink"),(0,a.Literal)("lemon"),(0,a.Literal)("cosmic"),(0,a.Literal)("custom"),(0,a.Literal)("fog")),(0,a.Union)((0,a.Literal)("available"),(0,a.Literal)("not_available"))),l=(0,a.Union)((0,a.Literal)("unknown"),(0,a.Literal)("child"),(0,a.Literal)("halal"),(0,a.Literal)("sandwich"),(0,a.Literal)("seafood"),(0,a.Literal)("vegetarian"),(0,a.Literal)("hot_meat"),(0,a.Literal)("hindu"),(0,a.Literal)("burger"),(0,a.Literal)("kosher"),(0,a.Literal)("breakfast"),(0,a.Literal)("asian"),(0,a.Literal)("meat"),(0,a.Literal)("no_gluten"),(0,a.Literal)("milk_and_eggs"),(0,a.Literal)("healthy"),(0,a.Literal)("low_lactose")),c=(0,a.Record)({code:l,price:a.Number}),d=(0,a.Record)({segment_index:(0,a.Optional)(a.Number),flight_index:(0,a.Optional)(a.Number),passenger_index:(0,a.Optional)(a.Number),code:n}),u=d.extend({weight:a.String,price:(0,a.Array)(a.Number).nullable()}),p=d.extend({types:(0,a.Array)(c).nullable()}),g=(0,a.Record)({title:a.String,value:a.String,values:(0,a.Array)(a.String).nullable().optional(),subvalues:(0,a.Array)(a.String).nullable().optional()}),m=d.extend({id:a.String,badge:(0,a.Optional)((0,a.Literal)("featured")),type:(0,a.Union)((0,a.Literal)("accident"),(0,a.Literal)("cancellation"),(0,a.Literal)("baggage_insurance"),(0,a.Literal)("accident_fallback")),info_link:(0,a.Optional)(a.String),details:(0,a.Array)(g).nullable(),parameters:(0,a.Dictionary)(a.String,a.String).nullable().optional(),start_at:(0,a.Optional)(a.String),end_at:(0,a.Optional)(a.String),price:s,incompatible:(0,a.Array)(a.String).nullable()}),_=(0,a.Record)({origin:a.String,destination:a.String,schedule:(0,a.Array)((0,a.Record)({departure_time:a.String,arrival_time:a.String})).nullable().optional()}),f=d.extend({id:a.String,tariff:(0,a.Union)((0,a.Literal)("unknown"),(0,a.Literal)("standard")),date:a.String,price:s,route:_}),b=d.extend({price:a.Number,type:(0,a.Union)((0,a.Literal)("dog"),(0,a.Literal)("cat"),(0,a.Literal)("parrot"),(0,a.Literal)("canary"))}),y=(0,a.Record)({id:a.String,row:a.Number,column:a.String,available:a.Boolean,wing:a.Boolean,emergency:a.Boolean,extra_leg:a.Boolean,child:a.Boolean,infant:a.Boolean,pet:a.Boolean,aisle:a.Boolean,middle:a.Boolean,window:a.Boolean,prices:(0,a.Array)(a.Number).nullable(),number:a.String}),h=(0,a.Record)({layout:(0,a.Array)(a.Number).nullable(),seats:(0,a.Array)(y).nullable()}),v=(0,a.Record)({code:n,segment_index:a.Number,flight_index:a.Number,rows:(0,a.Array)(h).nullable()}),k=d.extend({id:a.String,type:(0,a.Union)((0,a.Literal)("unknown"),(0,a.Literal)("warranty_return_ticket"),(0,a.Literal)("warranty_quick_return_money"),(0,a.Literal)("notice_sms_flight_cancel"),(0,a.Literal)("notice_sms_about_route"),(0,a.Literal)("notice_sms_about_ticket"),(0,a.Literal)("online_check_in"),(0,a.Literal)("mego_sms_notification"),(0,a.Literal)("mego_illness_refund"),(0,a.Literal)("mego_flexible_booking"),(0,a.Literal)("mego_refund_money")),title:a.String,info_link:(0,a.Optional)(a.String),details:(0,a.Array)(a.String).nullable().optional(),parameters:(0,a.Dictionary)(a.String,a.String).nullable().optional(),price:s}),S=d.extend({equipment_code:(0,a.Union)((0,a.Literal)("unknown"),(0,a.Literal)("bike"),(0,a.Literal)("fish"),(0,a.Literal)("sport_weapon"),(0,a.Literal)("sport")),weight:a.String,dimension:a.String,price:(0,a.Array)(a.Number).nullable()}),L=(0,a.Record)({id:a.String,icon_type:a.String,category:(0,a.Union)((0,a.Literal)("default"),(0,a.Literal)("popular"),(0,a.Literal)("relevant"),(0,a.Literal)("refund_ticket_price"),(0,a.Literal)("recommended"),(0,a.Literal)("basic"),(0,a.Literal)("get_payouts"),(0,a.Literal)("ota_package"),(0,a.Literal)("smart_choice")),is_not_insurance:(0,a.Optional)(a.Boolean)}),w=(0,a.Record)({insurances:(0,a.Array)(L).nullable()}),I=(0,a.Record)({value:a.String.nullable().optional(),values:(0,a.Array)(a.String),title:a.String.nullable().optional(),description:a.String.optional(),subvalues:(0,a.Array)(a.String).nullable().optional()}),x=(0,a.Record)({code:(0,a.Literal)("package"),id:a.String,details:(0,a.Array)(I).nullable().optional(),price:s,incompatible:(0,a.Array)(a.String).nullable()}),O=(0,a.Record)({currency:a.String,baggage:(0,a.Array)(u).nullable().optional(),hand_baggage:(0,a.Array)(u).nullable().optional(),meals:(0,a.Array)(p).nullable().optional(),insurances:(0,a.Array)(m).nullable().optional(),aeroexpress:(0,a.Array)(f).nullable().optional(),pets:(0,a.Array)(b).nullable().optional(),seat_maps:(0,a.Array)(v).nullable().optional(),additional_services:(0,a.Array)(k).nullable().optional(),additional_equipment:(0,a.Array)(S).nullable().optional(),config:(0,a.Optional)(w),packages:(0,a.Array)(x).nullable().optional()}),R=(0,a.Record)({baggages_on_init:(0,a.Optional)(a.Boolean),reprice_allowed:(0,a.Optional)(a.Boolean),apple_pay_available:(0,a.Optional)(a.Boolean),forter_required:(0,a.Optional)(a.Boolean),biletix_3ds_v2:(0,a.Optional)(a.Boolean),my_orders_available:(0,a.Optional)(a.Boolean),is_ota:(0,a.Optional)(a.Boolean)}),A=(0,a.Record)({contacts_info:a.String,ticket_info_url:a.String,offer_url:a.String}),E=(0,a.Record)({id:a.Number,label:a.String,primary_color:a.String,secondary_color:a.String,legal_url:a.String,international_number:a.String,contact_number:a.String,contact_email:a.String,contact_link:a.String,tariff_link:a.String,features:R,hide_fallback:a.Boolean,tkp:(0,a.Optional)(A)}),B=(0,a.Record)({type:i,country_of_issue:a.String,number:a.String,original_number:a.String,expires:a.String}),P=(0,a.Record)({gender:(0,a.Union)((0,a.Literal)("male"),(0,a.Literal)("female"),(0,a.Literal)("unknown")),first_name:a.String,original_first_name:(0,a.Optional)(a.String),second_name:(0,a.Optional)(a.String),original_second_name:(0,a.Optional)(a.String),no_second_name:(0,a.Optional)(a.Boolean),last_name:a.String,original_last_name:(0,a.Optional)(a.String),birth_date:a.String,nationality:a.String,document:B,loyalty_card:(0,a.Record)({type:a.String,number:a.String.nullable()})}),D=(0,a.Record)({selected_tariff_id:a.String,passengers:(0,a.Array)(P).nullable(),contact:(0,a.Record)({email:a.String,phone:a.String})}),N=(0,a.Dictionary)(a.String,a.String).nullable().optional(),C=(0,a.Record)({name:(0,a.Dictionary)((0,a.Dictionary)(a.String,a.String).nullable(),a.String).nullable(),country:a.String,timezone:a.String,airports:(0,a.Array)(a.String).nullable()}),q=(0,a.Dictionary)(C,a.String).nullable(),U=(0,a.Record)({code:a.String,name:(0,a.Dictionary)((0,a.Dictionary)(a.String,a.String).nullable(),a.String).nullable()}),$=(0,a.Dictionary)(U,a.String).nullable(),F=(0,a.Record)({code:a.String,airports:(0,a.Array)(a.String).nullable(),timezone:a.String}),j=(0,a.Dictionary)(F,a.String).nullable(),T=(0,a.Record)({name:(0,a.Dictionary)((0,a.Dictionary)(a.String,a.String).nullable(),a.String).nullable(),code:a.String,city_code:a.String,coordinates:(0,a.Record)({lat:a.Number,lng:a.Number})}),M=(0,a.Dictionary)(T,a.String).nullable(),H=(0,a.Record)({airports:M,cities:q,countries:$,metro_areas:j}),W=(0,a.Array)((0,a.Array)((0,a.Union)(a.String,a.Boolean)).nullable()).nullable(),Z=(0,a.Array)((0,a.Array)((0,a.Union)(a.String,a.Boolean)).nullable()).nullable(),z=(0,a.Array)((0,a.Array)(a.Number).nullable()).nullable(),V=(0,a.Array)((0,a.Array)(a.Number).nullable()).nullable(),G=(0,a.Record)({available:a.Boolean,penalty:(0,a.Optional)((0,a.Record)({currency_code:(0,a.Optional)(a.String),value:(0,a.Optional)(a.Number)}))}),K=(0,a.Record)({return_before_flight:(0,a.Optional)(G),return_after_flight:(0,a.Optional)(G),change_before_flight:(0,a.Optional)(G),change_after_flight:(0,a.Optional)(G)}),X=(0,a.Record)({flights_baggage:W,flights_handbags:Z,baggage_source:z,handbags_source:V,flight_additional_tariff_infos:(0,a.Array)(K).nullable(),currency:a.String,price:a.Number,unified_price:a.Number,url:a.Number}),Y=(0,a.Record)({aircraft:(0,a.Optional)(a.String),arrival:a.String,arrival_date:a.String,arrival_time:a.String,arrival_timestamp:a.Number,delay:a.Number,departure:a.String,departure_date:a.String,departure_time:a.String,departure_timestamp:a.Number,duration:a.Number,equipment:(0,a.Optional)(a.String),local_arrival_timestamp:a.Number,local_departure_timestamp:a.Number,marketing_carrier:a.String,number:a.String,operating_carrier:a.String,operated_by:a.String,rating:a.Number,technical_stops:(0,a.Array)((0,a.Union)((0,a.Record)({airport_code:(0,a.Optional)(a.String)}),a.Null)).nullable(),trip_class:a.String,seats:(0,a.Optional)(a.Number),is_train:(0,a.Optional)(a.Boolean),is_bus:(0,a.Optional)(a.Boolean),is_boat:(0,a.Optional)(a.Boolean)}),J=(0,a.Record)({at:(0,a.Optional)(a.String),to:(0,a.Optional)(a.String),airports:(0,a.Array)(a.String).nullable().optional(),airlines:(0,a.Array)(a.String).nullable().optional(),country_code:(0,a.Optional)(a.String),city_code:(0,a.Optional)(a.String),visa_rules:(0,a.Optional)((0,a.Record)({required:a.Boolean})),recheck_baggage:(0,a.Optional)(a.Boolean),tags:(0,a.Array)(a.String).nullable(),night_transfer:a.Boolean,duration_seconds:a.Number,duration:(0,a.Optional)((0,a.Record)({seconds:(0,a.Optional)(a.Number)}))}),Q=(0,a.Record)({flight:(0,a.Array)(Y).nullable(),rating:(0,a.Optional)((0,a.Record)({total:(0,a.Optional)(a.Number),detailed:(0,a.Dictionary)(a.Number).nullable().optional()})),transfers:(0,a.Array)(J).nullable().optional()}),ee=(0,a.Record)({name:(0,a.Optional)(a.String),stars:(0,a.Optional)(a.String),room_type:(0,a.Optional)(a.String),meals:(0,a.Optional)(a.String)}),te=(0,a.Record)({terms:(0,a.Dictionary)(X,a.String),xterms:(0,a.Dictionary)((0,a.Dictionary)(X,a.String),a.String),segment:(0,a.Array)(Q).nullable(),total_duration:a.Number,stops_airports:(0,a.Array)(a.String).nullable(),max_stops:a.Number,carriers:(0,a.Array)(a.String).nullable(),segment_durations:(0,a.Array)(a.Number).nullable(),segments_time:(0,a.Array)((0,a.Array)(a.Number).nullable()).nullable(),segments_airports:(0,a.Array)((0,a.Array)(a.String).nullable()).nullable(),sign:a.String,is_charter:a.Boolean,is_direct:a.Boolean,flight_weight:a.Number,popularity:a.Number,max_stop_duration:a.Number,min_stop_duration:(0,a.Optional)(a.Number),hotel:(0,a.Optional)(ee),is_mixed:(0,a.Array)(a.String).nullable().optional(),segments_rating:(0,a.Optional)(a.Number),tags:(0,a.Array)(a.String).nullable().optional()}),re=(0,a.Record)({nationality:a.String,domestic_countries:(0,a.Array)(a.String)}),ae=(0,a.Record)({url:a.String,method:a.String,params:(0,a.Dictionary)(a.String,a.String).nullable()}),ie=(0,a.Record)({code:(0,a.Record)({type:(0,a.Literal)("more")}),deeplink:ae,status:(0,a.Union)((0,a.Literal)("booked"),(0,a.Literal)("paid")),value:a.Number,additional_param:(0,a.Optional)(a.String)}),ne=(0,a.Record)({search_id:a.String,proposal_id:(0,a.Optional)(a.String)});var se=r(85923);const oe=(0,a.Union)((0,a.Literal)("changing"),(0,a.Literal)("upgrade"),(0,a.Literal)("upgrade_bonus"),(0,a.Literal)("can_choose_seats"),(0,a.Literal)("refund"),(0,a.Literal)("miles"),(0,a.Literal)("bonuses"),(0,a.Literal)("discount_for_children_with_parents"),(0,a.Literal)("priority_boarding"),(0,a.Literal)("additional_baggage"),(0,a.Literal)("wifi"),(0,a.Literal)("priority_baggage"),(0,a.Literal)("priority_checkin"),(0,a.Literal)("business_lounge_access"),(0,a.Literal)("non_alcoholic_drinks"),(0,a.Literal)("premium_seat"),(0,a.Literal)("meal"),(0,a.Literal)("snack"),(0,a.Literal)("beverage"),(0,a.Literal)("correction")),le=(0,a.Union)((0,a.Literal)("unknown"),(0,a.Literal)("allowed"),(0,a.Literal)("not_allowed"),(0,a.Literal)("free"),(0,a.Literal)("paid"),(0,a.Literal)("restrict"),(0,a.Literal)("value")),ce=(0,a.Record)({key:oe,status:le,value:(0,a.Optional)(a.String),value_code:(0,a.Optional)(a.String)}),de=(0,a.Record)({baggage:a.String,handbags:a.String,main:(0,a.Array)(ce).nullable(),other:(0,a.Array)(a.String).nullable()}),ue=(0,a.Record)({id:a.String,name:a.String,tariff_code:a.String,link:(0,a.Optional)(a.String),features:(0,a.Optional)(de),rule:(0,a.Optional)(a.String)}),pe=(0,a.Record)({total_amount:a.Number,taxes_amount:a.Number,base_amount:a.Number}),ge=(0,a.Record)({adults:(0,a.Optional)(pe),children:(0,a.Optional)(pe),infants:(0,a.Optional)(pe)}),me=pe.extend({details:(0,a.Optional)(ge)}),_e=(0,a.Record)({id:a.String,price_info:me}),fe=(0,a.Record)({tariffs:(0,a.Array)(_e).nullable(),currency:(0,a.Optional)(a.String)}),be=(0,a.Record)({tariffs:(0,a.Array)(_e).nullable(),currency:a.String}),ye=(0,a.Record)({adults:a.Number,children:a.Number,infants:a.Number}),he=(0,a.Record)({international_flight:a.Boolean,adult:a.Boolean,suitable_documents:(0,a.Array)((0,a.Union)((0,a.Literal)("unknown"),(0,a.Literal)("birth_certificate"),(0,a.Literal)("russian_international_passport"),(0,a.Literal)("russian_national_passport"),(0,a.Literal)("passport"))),default_document:(0,a.Union)((0,a.Literal)("unknown"),(0,a.Literal)("birth_certificate"),(0,a.Literal)("russian_international_passport"),(0,a.Literal)("russian_national_passport"),(0,a.Literal)("passport")),is_middle_name_required:a.Boolean}),ve=(0,a.Record)({label:a.String,action:(0,a.Union)((0,a.Literal)("add"),(0,a.Literal)("close")),priority:(0,a.Union)((0,a.Literal)("primary"),(0,a.Literal)("secondary"))}),ke=(0,a.Record)({type:(0,a.Literal)("link"),url:a.String}),Se=(0,a.Record)({type:(0,a.Literal)("popup"),html_content:a.String,popup_buttons:(0,a.Array)(ve)}),Le=(0,a.Record)({action:(0,a.Union)(ke,Se),label:(0,a.Optional)(a.String),title:(0,a.Optional)(a.String)}),we=(0,a.Record)({title:a.String,description:(0,a.Optional)(a.String),details:(0,a.Optional)((0,a.Array)(a.String))}),Ie=(0,a.Record)({id:a.String,ssr_code:n,price:s,icon_url:a.String,feature_details:(0,a.Array)(we),price_label:(0,a.Optional)(a.String),detailed_description:(0,a.Optional)(Le),terms_of_offer:(0,a.Optional)(Le),insurance_rules:(0,a.Optional)(Le)}),xe=(0,a.Record)({type:(0,a.Literal)("new"),badge_text:(0,a.Optional)(a.String),color:(0,a.Optional)(se.MV),with_border:(0,a.Optional)(a.Boolean),features:(0,a.Array)(Ie)}),Oe=(0,a.Record)({text:a.String,type:o}),Re=(0,a.Record)({id:a.String,ssr_code:n,title:a.String,icon_url:a.String,button_label:a.String,selected_button_label:a.String,price:s,features:(0,a.Array)(Oe),price_label:(0,a.Optional)(a.String),badge_text:(0,a.Optional)(a.String),color:(0,a.Optional)(se.MV),with_border:(0,a.Optional)(a.Boolean)}),Ae=(0,a.Record)({type:(0,a.Literal)("service_as_brand"),packages:(0,a.Array)(Re),minimum_id:a.String,title:a.String,subtitle:(0,a.Optional)(a.String)}),Ee=(0,a.Record)({color:se.MV,label:a.String}),Be=(0,a.Record)({id:a.String,ssr_code:n,title:a.String,price:s,badge:(0,a.Optional)(Ee)}),Pe=(0,a.Record)({id:a.String,is_available:a.Boolean,label:(0,a.Optional)(a.String)}),De=(0,a.Record)({title:a.String,availability:(0,a.Array)(Pe)}),Ne=(0,a.Record)({type:(0,a.Literal)("service_as_brand_table"),packages:(0,a.Array)(Be),features:(0,a.Array)(De),minimum_id:a.String,price_label:(0,a.Optional)(a.String),button_label:a.String,selected_button_label:a.String}),Ce=(0,a.Union)((0,a.Literal)("add"),(0,a.Literal)("remove")),qe=(0,a.Union)((0,a.Literal)("add"),(0,a.Literal)("remove"),(0,a.Literal)("close")),Ue=(0,a.Record)({label:a.String,priority:(0,a.Union)((0,a.Literal)("primary"),(0,a.Literal)("secondary"))}),$e=Ue.extend({action:Ce}),Fe=Ue.extend({action:qe}),je=(0,a.Record)({title:a.String,html_content:a.String,buttons:(0,a.Array)(Fe)}),Te=(0,a.Record)({icon:a.String,title:a.String,description:a.String,button:$e,popup:je}),Me=(0,a.Record)({type:(0,a.Literal)("upsale_compact"),id:a.String,ssr_code:n,price:s,idle:Te,added:Te}),He=(0,a.Record)({type:(0,a.Literal)("upsale_card"),id:a.String,ssr_code:n,price:s,title:a.String,description:a.String,icon:a.String,color:(0,a.Literal)("blue")}),We=(0,a.Union)((0,a.Literal)("booking"),(0,a.Literal)("ssr_page_one"),(0,a.Literal)("ssr_page_two"),(0,a.Literal)("page_two"),(0,a.Literal)("page_one"),(0,a.Literal)("payment")),Ze=((0,a.Union)((0,a.Literal)("contacts_form"),(0,a.Literal)("passenger_document"),(0,a.Literal)("main"),(0,a.Literal)("above_payment_button")),(0,a.Record)({type:(0,a.Literal)("old"),ssr_code:n})),ze=(0,a.Record)({type:(0,a.Literal)("heading"),title:a.String,subtitle:(0,a.Optional)(a.String)}),Ve=(0,a.Union)(Ze,xe,ze,Ae,Ne,Me,He),Ge=(0,a.Record)({contacts_form:(0,a.Optional)((0,a.Array)(Ve)),passenger_document:(0,a.Optional)((0,a.Array)(Ve)),main:(0,a.Optional)((0,a.Array)(Ve)),above_payment_button:(0,a.Optional)((0,a.Array)(Ve))}),Ke=(0,a.Dictionary)((0,a.Optional)(Ge),We),Xe=(0,a.Dictionary)(a.String,a.String),Ye=(0,a.Literal)("bank_card"),Je=(0,a.Literal)("sbp"),Qe=(0,a.Literal)(""),et=(0,a.Array)((0,a.Union)(Ye,Je)),tt=(0,a.Record)({payment_methods:(0,a.Optional)(et),default_payment_method:(0,a.Optional)((0,a.Union)(Ye,Je,Qe))}),rt=(0,a.Record)({agent_info:(0,a.Optional)(E),airlines:se.j1,airports:se.sW,places:H,currency_rates:(0,a.Dictionary)(a.Number,a.String).nullable().optional(),order_id:a.String,str_click_id:a.String,passengers_count:(0,a.Optional)(ye),selected_tariff_id:a.String,tariffs:(0,a.Array)(ue).nullable(),tariffs_price_info:fe,ticket:te,additional_features:(0,a.Optional)(O),fallback_params:ne,meta:N,type_flight_documents:(0,a.Array)(he).nullable().optional(),document_types:(0,a.Array)(re).nullable().optional(),supported_loyalty_cards:(0,a.Array)(a.String).nullable().optional(),ssr_view:(0,a.Optional)(Ke),breadcrumbs_view:Xe,incompatible_features:(0,a.Dictionary)((0,a.Array)(a.String),a.String),supported_payment_methods:tt.optional()}),at=(0,a.Record)({acs_url:(0,a.Optional)(a.String),acs_method:(0,a.Optional)(a.String),acs_params:(0,a.Optional)((0,a.Dictionary)(a.String,a.String)),forter_acs_params:(0,a.Dictionary)(a.Unknown,a.String).nullable().optional()}).nullable(),it=(0,a.Record)({id:a.String,pnr:a.String,md:a.String,url:(0,a.Optional)(a.String),method:(0,a.Optional)(a.String),data:(0,a.Optional)(a.String),params:(0,a.Dictionary)(a.Unknown,a.String).nullable().optional()}).nullable(),nt=(0,a.Record)({passenger:a.Number.optional().nullable(),flight_index:a.Number.nullable(),segment_index:a.Number.nullable(),value:a.String,code:n}),st=(0,a.Record)({id:a.String,deeplink:a.String,name:a.String,icon_url:a.String}),ot=(0,a.Record)({url:a.String,banks:(0,a.Array)(st)}),lt=(0,a.Optional)((0,a.Record)({title:a.String.optional(),description:a.String.optional()})),ct=(0,a.Record)({status:a.String}),dt=(0,a.Record)({status:(0,a.Literal)("qr_code"),qr_code_info:ot}),ut=(0,a.Record)({status:(0,a.Literal)("validation_error"),validation_error:(0,a.Optional)((0,a.Record)({field:(0,a.Optional)(a.String),fields:(0,a.Optional)((0,a.Array)(a.String)),message:(0,a.Optional)(a.String)}))}),pt=(0,a.Record)({status:(0,a.Literal)("unavailable"),error:lt}),gt=(0,a.Record)({status:(0,a.Literal)("price_change"),new_price:(0,a.Optional)(s),price_change:(0,a.Optional)((0,a.Record)({details:(0,a.Optional)(ge),pricing_info:(0,a.Optional)(fe)}))}),mt=(0,a.Record)({status:(0,a.Literal)("add_ssr_error"),add_ssr_error:(0,a.Optional)((0,a.Record)({ssr_map:(0,a.Optional)((0,a.Record)({additional_equipment:(0,a.Optional)(a.String),additional_service:(0,a.Optional)(a.String),aeroexpress:(0,a.Optional)(a.String),baggage:(0,a.Optional)(a.String),hand_baggage:(0,a.Optional)(a.String),insurance:(0,a.Optional)(a.String),packages:(0,a.Optional)(a.String),meal:(0,a.Optional)(a.String),pet:(0,a.Optional)(a.String),seat:(0,a.Optional)(a.String)}))}))}),_t=(0,a.Record)({status:(0,a.Literal)("payment_error"),error:lt}),ft=(0,a.Record)({status:(0,a.Literal)("payment_unknown"),payment_unknown:(0,a.Optional)((0,a.Record)({id:(0,a.Optional)(a.String)}))}),bt=(0,a.Record)({status:(0,a.Literal)("unknown"),error:lt}),yt=(0,a.Record)({status:(0,a.Literal)("error"),error:(0,a.Optional)((0,a.Record)({message:a.String.optional()}))}),ht=(0,a.Union)((0,a.Literal)("init"),(0,a.Literal)("created"),(0,a.Literal)("booked"),(0,a.Literal)("paid"),(0,a.Literal)("payment_unknown"),(0,a.Literal)("3ds"),(0,a.Literal)("unavailable"),(0,a.Literal)("payment_processing"),(0,a.Literal)("3ds2"),(0,a.Literal)("qr_code")),vt=(0,a.Record)({status:ht,return_url:a.String,book_params:D,init_result:rt,booked_ssr:(0,a.Record)({ssr:(0,a.Array)(nt).nullable()}),booked_external_ssr:(0,a.Array)(ie).nullable(),three_ds_info:at,three_ds_2_info:it,qr_code_info:ot.nullable(),pay_result:(0,a.Record)({id:a.String,pnr:a.String,booking_url:(0,a.Optional)(a.String),paid_at:a.String})}),kt=(0,a.Dictionary)(a.String).And((0,a.Record)({assisted_init_host:a.String})),St=(0,a.Record)({gate_id:a.Number,click_id:a.Number,str_click_id:a.String,url:a.String,method:a.String,params:kt}),Lt=(0,a.Record)({status:(0,a.Literal)("success"),success:rt}),wt=(0,a.Record)({status:(0,a.Literal)("error"),error:(0,a.Optional)((0,a.Record)({message:a.String,id:(0,a.Optional)(a.String),pnr:(0,a.Optional)(a.String)}))}),It=(0,a.Record)({status:(0,a.Literal)("unavailable")}),xt=(0,a.Record)({status:(0,a.Union)((0,a.Literal)("validation_error"),(0,a.Literal)("price_change"),(0,a.Literal)("payment_error"),(0,a.Literal)("3ds"),(0,a.Literal)("add_ssr_error"),(0,a.Literal)("go_to_agent_site"),(0,a.Literal)("payment_unknown"),(0,a.Literal)("method_not_supported"),(0,a.Literal)("payment_method_unavailable"),(0,a.Literal)("apple_pay_token_required"),(0,a.Literal)("payment_processing"),(0,a.Literal)("3ds2"))}),Ot=(0,a.Union)(Lt,wt,It,xt),Rt=(0,a.Record)({selected_tariff_id:a.String,tariffs:(0,a.Array)(ue).nullable(),tariffs_price_info:be,additional_features:(0,a.Optional)(O),ssr_view:(0,a.Optional)(Ke),breadcrumbs_view:Xe,incompatible_features:(0,a.Dictionary)((0,a.Array)(a.String),a.String),supported_loyalty_cards:(0,a.Array)(a.String).nullable().optional(),meta:N,supported_payment_methods:tt.optional()}),At=(0,a.Record)({status:(0,a.Literal)("success"),success:Rt}),Et=(0,a.Record)({status:(0,a.Literal)("error"),error:(0,a.Optional)((0,a.Record)({message:a.String,id:(0,a.Optional)(a.String),pnr:(0,a.Optional)(a.String)}))}),Bt=(0,a.Record)({status:(0,a.Literal)("unavailable")}),Pt=(0,a.Record)({status:(0,a.Union)((0,a.Literal)("validation_error"),(0,a.Literal)("price_change"),(0,a.Literal)("payment_error"),(0,a.Literal)("3ds"),(0,a.Literal)("add_ssr_error"),(0,a.Literal)("go_to_agent_site"),(0,a.Literal)("payment_unknown"),(0,a.Literal)("method_not_supported"),(0,a.Literal)("payment_method_unavailable"),(0,a.Literal)("apple_pay_token_required"),(0,a.Literal)("payment_processing"),(0,a.Literal)("3ds2"))}),Dt=(0,a.Union)(At,Et,Bt,Pt),Nt=(0,a.Record)({order_id:a.String,str_click_id:a.String,ticket:te,airports:se.sW,airlines:se.j1,places:H,agent_info:E,passengers_count:ye,currency_rates:(0,a.Dictionary)(a.Number,a.String).nullable().optional(),fallback_params:ne,created_at:a.String}),Ct=(0,a.Record)({status:(0,a.Literal)("success"),success:Nt}),qt=(0,a.Union)((0,a.Literal)("general_error"),(0,a.Literal)("not_available")),Ut=(0,a.Record)({status:qt,error:(0,a.Optional)((0,a.Record)({message:a.String,id:(0,a.Optional)(a.String),pnr:(0,a.Optional)(a.String)}))}),$t=(0,a.Union)(Ct,Ut)},30768:function(e,t,r){"use strict";r.d(t,{Bj:function(){return v}});var a=r(4763);const i=e=>({segmentIndex:e.segment_index??null,flightIndex:e.flight_index??null,passengerIndex:e.passenger_index??null,code:e.code}),n=e=>({...i(e),weight:e.weight,price:e.price||[]}),s=e=>({...i(e),types:e.types||[]}),o=e=>({title:e.title,value:e.value,values:e.values||[],subvalues:e.subvalues||[]}),l=e=>({...i(e),id:e.id,badge:e.badge||null,type:e.type,infoLink:e.info_link||null,details:e.details?e.details.map(o):[],parameters:e.parameters||null,startAt:e.start_at||null,endAt:e.end_at||null,price:(0,a.W)(e.price),incompatible:e.incompatible||[]}),c=e=>({origin:e.origin,destination:e.destination,schedule:e.schedule?e.schedule.map((e=>({departureTime:e.departure_time,arrivalTime:e.arrival_time}))):[]}),d=e=>({...i(e),id:e.id,tariff:e.tariff,date:e.date,price:(0,a.W)(e.price),route:c(e.route)}),u=e=>({...i(e),price:e.price,type:e.type}),p=e=>({id:e.id,row:e.row,column:e.column,available:e.available,wing:e.wing,emergency:e.emergency,extraLeg:e.extra_leg,child:e.child,infant:e.infant,pet:e.pet,aisle:e.aisle,middle:e.middle,window:e.window,prices:e.prices||[],number:e.number}),g=e=>({code:e.code,segmentIndex:e.segment_index,flightIndex:e.flight_index,rows:e.rows?e.rows.map((e=>({layout:e.layout||[],seats:e.seats?e.seats.map(p):[]}))):[]}),m=e=>({...i(e),id:e.id,type:e.type,title:e.title,infoLink:e.info_link||null,details:e.details||[],parameters:e.parameters||null,price:(0,a.W)(e.price)}),_=e=>({...i(e),equipmentCode:e.equipment_code,weight:e.weight,dimension:e.dimension,price:e.price||[]}),f=e=>({id:e.id,iconType:e.icon_type,category:e.category,isNotInsurance:e.is_not_insurance??null}),b=e=>({insurances:e.insurances?e.insurances.map(f):[]}),y=e=>({value:e.value||null,values:e.values||[],title:e.title||null,description:e.description||null,subvalues:e.subvalues||[]}),h=e=>({code:e.code,id:e.id,details:e.details?e.details.map(y):[],price:(0,a.W)(e.price),incompatible:e.incompatible||[]}),v=e=>e?{currency:e.currency,baggage:e.baggage?e.baggage.map(n):[],handBaggage:e.hand_baggage?e.hand_baggage.map(n):[],meals:e.meals?e.meals.map(s):[],insurances:e.insurances?e.insurances.map(l):[],aeroexpress:e.aeroexpress?e.aeroexpress.map(d):[],pets:e.pets?e.pets.map(u):[],seatMaps:e.seat_maps?e.seat_maps.map(g):[],additionalServices:e.additional_services?e.additional_services.map(m):[],additionalEquipment:e.additional_equipment?e.additional_equipment.map(_):[],config:e.config?b(e.config):null,packages:e.packages?e.packages.map(h):[]}:null},3818:function(e,t,r){"use strict";r.d(t,{c:function(){return a}});const a=e=>({ssr_page_one:e.ssr_page_one||null,ssr_page_two:e.ssr_page_two||null})},4763:function(e,t,r){"use strict";r.d(t,{W:function(){return a},q:function(){return i}});const a=e=>({value:e.value,currencyCode:e.currency_code}),i=e=>e.toUpperCase()},42204:function(e,t,r){"use strict";r.d(t,{RY:function(){return j},eL:function(){return K},Lu:function(){return W},jC:function(){return Y},wA:function(){return X},uK:function(){return J},h8:function(){return Q},mX:function(){return G},mr:function(){return T},HI:function(){return M},mU:function(){return F},yQ:function(){return U},nB:function(){return re},_s:function(){return te},W$:function(){return A},dQ:function(){return $},B_:function(){return H},Lk:function(){return q}});var a=r(14293),i=r.n(a);const n=e=>({repriceAllowed:i()(e.reprice_allowed)?null:e.reprice_allowed,applePayAvailable:i()(e.apple_pay_available)?null:e.apple_pay_available,forterRequired:i()(e.forter_required)?null:e.forter_required,biletix3dsV2:i()(e.biletix_3ds_v2)?null:e.biletix_3ds_v2,myOrdersAvailable:i()(e.my_orders_available)?null:e.my_orders_available,baggagesOnInit:i()(e.baggages_on_init)?null:e.baggages_on_init,isOta:i()(e.is_ota)?null:e.is_ota}),s=e=>({contactsInfo:e.contacts_info,ticketInfoUrl:e.ticket_info_url,offerUrl:e.offer_url}),o=e=>e?{id:e.id,label:e.label,primaryColor:e.primary_color,secondaryColor:e.secondary_color,legalUrl:e.legal_url,internationalNumber:e.international_number,contactNumber:e.contact_number,contactEmail:e.contact_email,contactLink:e.contact_link,tariffLink:e.tariff_link,features:n(e.features),hideFallback:i()(e.hide_fallback)?null:e.hide_fallback,tkp:i()(e.tkp)?null:s(e.tkp)}:null,l=e=>({type:e.type,countryOfIssue:e.country_of_issue,number:e.number,originalNumber:e.original_number,expires:e.expires}),c=e=>({gender:e.gender,firstName:e.first_name,originalFirstName:e.original_first_name||null,secondName:e.second_name||null,originalSecondName:e.original_second_name||null,noSecondName:i()(e.no_second_name)?null:e.no_second_name,lastName:e.last_name,originalLastName:e.original_last_name||null,birthDate:e.birth_date,nationality:e.nationality,document:l(e.document),loyaltyCard:{type:e.loyalty_card.type,number:e.loyalty_card.number}});var d=r(32603);const u=e=>e?{adults:e.adults,children:e.children,infants:e.infants}:null;var p=r(92135),g=r(30768);const m=e=>({searchId:e.search_id,proposalId:e.proposal_id||null}),_=e=>e?{internationalFlight:e.international_flight,adult:e.adult,suitableDocuments:e.suitable_documents,defaultDocument:e.default_document,isMiddleNameRequired:e.is_middle_name_required}:null,f=e=>({nationality:e.nationality,domesticCountries:e.domestic_countries});var b=r(76509),y=r(3818),h=r(9603),v=r(84998);const k=e=>{const{airlines:t,airports:r,places:a,ticket:n}=e;return{agentInfo:o(e.agent_info),airlines:t,airports:r,places:a,currencyRates:e.currency_rates||null,orderId:e.order_id,strClickId:e.str_click_id,passengersCount:u(e.passengers_count),selectedTariffId:e.selected_tariff_id,tariffs:i()(e.tariffs)?[]:e.tariffs.map(p.BK),tariffsPriceInfo:(0,p.h2)(e.tariffs_price_info),ticket:n,additionalFeatures:(0,g.Bj)(e.additional_features),ssrView:(0,d.p)(e.ssr_view,h.S),fallbackParams:m(e.fallback_params),meta:(0,b.$)(e.meta),typeFlightDocuments:i()(e.type_flight_documents)?[]:e.type_flight_documents.map(_),documentTypes:i()(e.document_types)?[]:e.document_types.map(f),supportedLoyaltyCards:e.supported_loyalty_cards||[],breadcrumbsView:(0,y.c)(e.breadcrumbs_view),incompatibleFeatures:e.incompatible_features,supportedPaymentMethods:(0,v.e)(e.supported_payment_methods)}};r(52262),r(24506);const S=e=>{if(!e)return null;const t=e.penalty&&e.penalty.currency_code?e.penalty.currency_code:null;return{available:e.available,penalty:{currencyCode:t,value:e.penalty?.value??null}}},L=e=>e?(e=>{if(!e)return null;const{return_after_flight:t,return_before_flight:r,change_after_flight:a,change_before_flight:i}=e;return{returnBeforeFlight:S(r),returnAfterFlight:S(t),changeBeforeFlight:S(i),changeAfterFlight:S(a)}})(e):[],w=e=>e?{flightAdditionalTariffInfos:e.flight_additional_tariff_infos?e.flight_additional_tariff_infos.map(L):[],flightsBaggage:e.flights_baggage?e.flights_baggage.map((e=>e||[])):[],flightsHandbags:e.flights_handbags?e.flights_handbags.map((e=>e||[])):[],baggageSource:e.baggage_source?e.baggage_source.map((e=>e||[])):[],handbagsSource:e.handbags_source?e.handbags_source.map((e=>e||[])):[],currency:e.currency,price:e.price,unifiedPrice:e.unified_price,url:e.url}:null,I=e=>e?e.map((e=>e?{airportCode:e.airport_code||null}:null)):[],x=e=>({aircraft:e.aircraft||null,arrival:e.arrival,arrivalDate:e.arrival_date,arrivalTime:e.arrival_time,arrivalTimestamp:e.arrival_timestamp,delay:e.delay,departure:e.departure,departureDate:e.departure_date,departureTime:e.departure_time,departureTimestamp:e.departure_timestamp,duration:e.duration,equipment:e.equipment||null,localArrivalTimestamp:e.local_arrival_timestamp,localDepartureTimestamp:e.local_departure_timestamp,marketingCarrier:e.marketing_carrier,number:e.number,operatingCarrier:e.operating_carrier,operatedBy:e.operated_by,rating:e.rating,technicalStops:I(e.technical_stops),tripClass:e.trip_class,seats:e.seats||null,isTrain:e.is_train||!1,isBus:e.is_bus||!1,isBoat:e.is_boat||!1}),O=e=>e?{at:e.at||null,to:e.to||null,airports:e.airports||[],airlines:e.airlines||[],countryCode:e.country_code||null,cityCode:e.city_code||null,visaRules:e.visa_rules||null,recheckBaggage:e.recheck_baggage||!1,tags:e.tags||[],nightTransfer:e.night_transfer,durationSeconds:e.duration_seconds,duration:e.duration||null}:null,R=e=>{const t=e.flight?e.flight.map(x):[],r=(e.transfers||[]).map(O),{rating:a}=e;return{flight:t,transfers:r,rating:{total:a&&a.total?a.total:null,detailed:a&&a.detailed?a.detailed:null}}},A=e=>{if(!e)return null;const t=(0,d.p)(e.terms,w),r=(0,d.p)(e.xterms,(e=>(0,d.p)(e,w))),a=e.segment?e.segment.map(R):[],i=(e=>e?{name:e.name||null,stars:e.stars||null,roomType:e.room_type||null,meals:e.meals||null}:null)(e.hotel),n=e.is_mixed||[],s=e.segments_rating||null,o=e.tags||[],l=e.min_stop_duration||null,c=e.stops_airports||[],u=e.carriers||[],p=e.segment_durations||[],g=e.segments_time?e.segments_time.map((e=>e||[])):[],m=e.segments_airports?e.segments_airports.map((e=>e||[])):[];return{terms:t,xterms:r,segment:a,hotel:i,isMixed:n,segmentsRating:s,tags:o,minStopDuration:l,maxStopDuration:e.max_stop_duration,totalDuration:e.total_duration,stopsAirports:c,maxStops:e.max_stops,carriers:u,segmentDurations:p,segmentsTime:g,segmentsAirports:m,sign:e.sign,isCharter:e.is_charter,isDirect:e.is_direct,flightWeight:e.flight_weight,popularity:e.popularity}};r(71532);var E=r(59051),B=r.n(E);const P=e=>({id:e.id,name:e.name,logoUrl:e.icon_url,deeplink:e.deeplink}),D=e=>({url:e.url,banks:e.banks.map(P)});var N=r(4763);const C=e=>B()(e)?{}:(0,d.E)(e),q=e=>B()(e.validation_error)?{status:e.status}:{status:e.status,validationError:(0,d.E)(e.validation_error)},U=e=>({status:e.status,...D(e.qr_code_info)}),$=e=>B()(e.error)?{status:e.status}:{status:e.status,error:(0,d.E)(e.error)},F=e=>{const t=e.new_price?(0,N.W)(e.new_price):null,r=e?.price_change?.details??null,a=e?.price_change?.pricing_info??null,i={details:r?(0,p.$n)(r):null,pricingInfo:a?(0,p.h2)(a):null};return{status:e.status,newPrice:t,priceChange:i}},j=e=>{const t=e?.add_ssr_error?.ssr_map??null,r={ssrMap:(0,d.E)({meal:t?.meal,baggage:t?.baggage,additionalEquipment:t?.additional_equipment,additionalService:t?.additional_service,aeroexpress:t?.aeroexpress,handBaggage:t?.hand_baggage,insurance:t?.insurance,packages:t?.packages,pet:t?.pet,seat:t?.seat})};return{status:e.status,addSsrError:r}},T=e=>({status:e.status,error:C(e.error)}),M=e=>({status:e.status,paymentUnknown:{id:e.payment_unknown?.id}}),H=e=>({status:e.status,error:C(e.error)}),W=e=>({status:e.status,error:{message:e.error?.message}}),Z=e=>({url:e.url,method:e.method,params:e.params}),z=e=>({code:{type:e.code.type},status:e.status,value:e.value,additionalParam:e.additional_param??null,deeplink:Z(e.deeplink)}),V=e=>({passenger:e.passenger,flightIndex:e.flight_index,segmentIndex:e.segment_index,value:e.value,code:e.code}),G=e=>{const{status:t}=e,r=e.return_url,a=(e=>({selectedTariffId:e.selected_tariff_id,passengers:e.passengers?e.passengers.map(c):[],contact:{email:e.contact.email,phone:e.contact.phone}}))(e.book_params),i=k(e.init_result),n={ssr:e.booked_ssr.ssr?e.booked_ssr.ssr.map(V):[]},s=e.booked_external_ssr?e.booked_external_ssr.map(z):[],o=(e=>e?{acsUrl:e.acs_url||null,acsMethod:e.acs_method||null,acsParams:e.acs_params||null,forterAcsParams:e.forter_acs_params||null}:null)(e.three_ds_info),l=(e=>e?{id:e.id,pnr:e.pnr,md:e.md,url:e.url||null,method:e.method||null,data:e.data||null,params:e.params||null}:null)(e.three_ds_2_info);return{status:t,returnUrl:r,bookParams:a,initResult:i,bookedSsr:n,bookedExternalSsr:s,threeDsInfo:o,threeDs2Info:l,qrCodeInfo:e.qr_code_info?D(e.qr_code_info):null,payResult:{id:e.pay_result.id,pnr:e.pay_result.pnr,bookingUrl:e.pay_result.booking_url||null,paidAt:e.pay_result.paid_at}}},K=e=>({status:"success",clickId:e.click_id,strClickId:e.str_click_id,gateId:e.gate_id,url:e.url,method:e.method,params:e.params,assistedInitHost:e.params.assisted_init_host}),X=e=>({status:e.status,success:k(e.success)}),Y=e=>({status:e.status,error:{message:e.error?.message??null,id:e.error?.id??null,pnr:e.error?.pnr??null}}),J=e=>({status:e.status}),Q=e=>({status:e.status,error:{message:`Init unexpected error with status: ${e.status}`}});r(36467);const ee=e=>({orderId:e.order_id,strClickId:e.str_click_id,ticket:e.ticket,airports:e.airports,airlines:e.airlines,places:e.places,agentInfo:o(e.agent_info),passengersCount:u(e.passengers_count),currencyRates:e.currency_rates||null,fallbackParams:m(e.fallback_params),createdAt:e.created_at}),te=e=>({status:e.status,success:ee(e.success)}),re=e=>({status:e.status,error:{message:e.error?.message??null,id:e.error?.id??null,pnr:e.error?.pnr??null}})},76509:function(e,t,r){"use strict";r.d(t,{$:function(){return a}});const a=e=>e?{trackingPixel:e.tracking_pixel||null,cryptoData:e.crypto_data||null}:null},84998:function(e,t,r){"use strict";r.d(t,{e:function(){return c}});var a=r(77606),i=r.n(a),n=r(59051),s=r.n(n);r(26699);const o="bank_card",l=[o],c=e=>{if(s()(e))return{availablePaymentMethods:l,defaultPaymentMethod:o};const t=e?.payment_methods??l,r=i()(t)?l:t,a=e?.default_payment_method||null,n=null!==a&&!r.includes(a),c=null===a&&1===r.length;return n||c?{availablePaymentMethods:r,defaultPaymentMethod:r[0]}:{availablePaymentMethods:r,defaultPaymentMethod:a}}},9603:function(e,t,r){"use strict";r.d(t,{S:function(){return h}});var a=r(32603),i=r(71532),n=r(4763);const s=e=>({text:e.text,type:e.type}),o=e=>({id:e.id,title:e.title,ssrCode:e.ssr_code,iconUrl:e.icon_url,buttonLabel:e.button_label,selectedButtonLabel:e.selected_button_label,price:(0,n.W)(e.price),features:e.features.map(s),priceLabel:e.price_label||null,badgeText:e.badge_text||null,color:e.color||null,withBorder:e.with_border||!1}),l=e=>e?{color:e.color,label:e.label}:null,c=e=>({id:e.id,ssrCode:e.ssr_code,title:e.title,price:(0,n.W)(e.price),badge:l(e.badge)}),d=e=>({id:e.id,isAvailable:e.is_available,label:e.label||null}),u=e=>({title:e.title,availability:e.availability.map(d)});var p=r(39535);const g=e=>{switch(e){case"primary":default:return p.Ji.Primary;case"secondary":return p.Ji.Secondary;case"tertiary":return p.Ji.Tertiary}},m=(e,t)=>({label:e.label,priority:g(e.priority),action:t}),_=e=>({title:e.title,htmlContent:e.html_content,buttons:e.buttons.map((e=>m(e,e.action)))}),f=e=>({icon:e.icon,title:e.title,description:e.description,button:m(e.button,e.button.action),popup:_(e.popup)}),b=e=>"old"===e.type?{type:e.type,ssrCode:e.ssr_code}:"new"===e.type?(0,i.z)(e):"heading"===e.type?{type:e.type,title:e.title,subtitle:e.subtitle||null}:"service_as_brand_table"===e.type?(e=>({type:e.type,packages:e.packages.map(c),features:e.features.map(u),minimumId:e.minimum_id,priceLabel:e.price_label||null,buttonLabel:e.button_label,selectedButtonLabel:e.selected_button_label}))(e):"upsale_compact"===e.type?(e=>({type:e.type,id:e.id,ssrCode:e.ssr_code,price:(0,n.W)(e.price),idle:f(e.idle),added:f(e.added)}))(e):"upsale_card"===e.type?(e=>({type:e.type,id:e.id,ssrCode:e.ssr_code,price:{value:e.price.value,currencyCode:(0,n.q)(e.price.currency_code)},title:e.title,description:e.description,icon:e.icon,color:e.color}))(e):{type:e.type,packages:e.packages.map(o),minimumId:e.minimum_id,title:e.title,subtitle:e.subtitle||null},y=e=>e.map(b),h=e=>(0,a.p)(e,y)},92135:function(e,t,r){"use strict";r.d(t,{$n:function(){return d},BK:function(){return l},h2:function(){return g}});var a=r(59051),i=r.n(a),n=r(32603);const s=e=>({key:e.key,status:e.status,value:e.value||null,valueCode:e.value_code||null}),o=e=>({main:e.main?e.main.map(s):[],other:e.other||[],baggage:e.baggage,handbags:e.handbags}),l=e=>({id:e.id,name:e.name,tariffCode:e.tariff_code,features:e.features?o(e.features):null,link:e.link||null,rule:e.rule||null}),c=e=>i()(e)?null:{totalAmount:e.total_amount,taxesAmount:e.taxes_amount,baseAmount:e.base_amount},d=e=>i()(e)?{}:(0,n.E)({adults:c(e.adults),children:c(e.children),infants:c(e.infants)}),u=e=>({...c(e),details:d(e.details)}),p=e=>({id:e.id,priceInfo:u(e.price_info)}),g=e=>({tariffs:e.tariffs?e.tariffs.map(p):[],currency:e.currency?e.currency:null})},36467:function(e,t,r){"use strict";r.d(t,{g:function(){return p}});var a=r(14293),i=r.n(a),n=r(32603),s=r(92135),o=r(30768),l=r(76509),c=r(3818),d=r(9603),u=r(84998);const p=e=>({additionalFeatures:(0,o.Bj)(e.additional_features),breadcrumbsView:(0,c.c)(e.breadcrumbs_view),incompatibleFeatures:e.incompatible_features,meta:(0,l.$)(e.meta),selectedTariffId:e.selected_tariff_id,ssrView:(0,n.p)(e.ssr_view,d.S),supportedLoyaltyCards:e.supported_loyalty_cards||[],supportedPaymentMethods:(0,u.e)(e.supported_payment_methods),tariffs:i()(e.tariffs)?[]:e.tariffs.map(s.BK),tariffsPriceInfo:(0,s.h2)(e.tariffs_price_info)})},71532:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(14293),i=r.n(a),n=r(4763);const s=e=>({title:e.title,description:e.description||null,details:i()(e.details)?[]:e.details}),o=e=>"link"===e.type?e:{type:e.type,htmlContent:e.html_content,popupButtons:e.popup_buttons.map((({label:e,action:t,priority:r})=>({label:e,action:t,priority:r})))},l=e=>e?{action:o(e.action),label:e.label||null,title:e.title||null}:null,c=e=>({id:e.id,ssrCode:e.ssr_code,price:(0,n.W)(e.price),iconUrl:e.icon_url,featureDetails:e.feature_details.map(s),priceLabel:e.price_label||null,detailedDescription:l(e.detailed_description),termsOfOffer:l(e.terms_of_offer),insuranceRules:l(e.insurance_rules)}),d=e=>({type:e.type,badgeText:e.badge_text||null,color:e.color||null,withBorder:e.with_border||!1,features:e.features.map(c)})},70827:function(e,t,r){"use strict";r.d(t,{U:function(){return m}});var a=r(98116),i=r(76588),n=r(80472),s=r(47047),o=r(91652),l=r(41783),c=r(42204),d=r(60871),u=r(47777),p=r(71172);const{$assistedHost:g}=o.H.outputs,m=(0,a.withFactory)({sid:"630tih",fn:()=>(0,s.s)((()=>(0,a.withFactory)({sid:"g8k226",fn:()=>(0,i.s5)({name:"get_order_query",params:(0,a.withFactory)({sid:"-vwkn0",fn:()=>(0,i.t6)()}),request:{credentials:"include",method:"GET",url:{source:g,fn:(e,t)=>(0,p.Yf)({endpoint:"order",version:1.5,host:t})},query:{source:u.$,fn:({orderId:e},t)=>({order_id:e,...t})},headers:{source:l.Ns,fn:(e,t)=>t}},response:{mapData:({result:e})=>(0,c.mX)(e),contract:(0,n.v)(d.is)}})})))})},78873:function(e,t,r){"use strict";r.d(t,{c:function(){return we}});var a=r(30091),i=r(98116),n=r(59051),s=r.n(n),o=r(29893),l=r.n(o),c=r(38032),d=r(29178),u=r(30040),p=r(15863),g=r(82672),m=r(10924),_=r(74613),f=r.n(_),b=r(4588),y=r.n(b),h=r(67803);const v={searchId:null,gateId:null,clickId:null},k=()=>Date.now(),S=e=>{const{createdAt:t}=e,r=k();return(0,h.Z)(r,t)>=30},L=(e,t)=>{const r=t[e];return s()(r)?null:r},w=(e,{data:t,payload:r={},fromContext:a})=>{if(s()(e)||s()(a))return{data:t,payload:r};const i=((e,t)=>y()(e,t))(a,e);return{data:t,payload:{...r,...i}}};var I=r(83781);const x=(0,I.V6)((0,I.ZE)("service/helios/assisted/send_analytics"));var O=r(63246),R=r(94547),A=r(35529);const E=A.String,B=(0,A.Record)({gateId:A.Number.nullable(),searchId:A.String.nullable(),clickId:A.String.nullable()}),P=(0,A.Record)({createdAt:A.Number,params:B}),D=(0,A.Dictionary)(P,E),N=(0,R.Yu)("assisted_session_context",{adapter:R.j$.json({contract:D})}),C=(0,i.createEffect)((()=>N.read()),{sid:"l3qdqy"}),q=(0,i.createEffect)((e=>N.write(e)),{sid:"ivk26v"}),U=(0,i.createStore)({},{sid:"-b57y0n"}),$=(0,i.createStore)(!1,{sid:"57xvy8"}),F=(0,i.createEvent)({sid:"xopuac"}),j=(0,i.createEvent)({sid:"-pj7iyp"}),T=(0,i.createEvent)({sid:"-28r79a"}),M=(0,i.createEvent)({sid:"lg48p0"}),H=(0,i.sample)({and:[{clock:C.doneData,filter:Boolean}],or:{sid:"vc1rhc"}});(0,i.sample)({and:[{clock:[F,q.done],filter:O.y.outputs.$isClient,target:C}],or:{sid:"2l2t6o"}}),(0,i.sample)({and:[{clock:C.doneData,filter:s(),fn:()=>({}),target:q}],or:{sid:"324fkv"}}),(0,i.sample)({and:[{clock:H,target:U}],or:{sid:"3j61z2"}}),(0,i.sample)({and:[{clock:H,filter:(0,i.withFactory)({sid:"-2w4ek8",fn:()=>(0,c.f)($)}),fn:()=>!0,target:$}],or:{sid:"-b2kog7"}}),(0,i.sample)({and:[{clock:H,filter:e=>Object.values(e).some(S),fn:e=>Object.entries(e).filter((([e,t])=>!S(t))).reduce(((e,[t,r])=>({...e,[t]:r})),{}),target:[q,U]}],or:{sid:"-akz9gn"}}),(0,i.sample)({and:[{clock:j,source:U,filter:(e,t)=>s()(L(t,e)),fn:(e,t)=>((e,t)=>{const r=L(e,t);return s()(r)?{...t,[e]:{createdAt:k(),params:v}}:t})(t,e),target:[q,U]}],or:{sid:"-a5l0uj"}}),(0,i.sample)({and:[{clock:T,source:U,fn:(e,{orderId:t,params:r})=>((e,t,r)=>{const a=L(e,t);if(s()(a))return t;const i=((e,t)=>f()(e,t))(a.params,r);return{...t,[e]:{...a,params:i}}})(t,e,r),target:[q,U]}],or:{sid:"-9nzluz"}}),(0,i.sample)({and:[{clock:M,source:U,fn:(e,t)=>((e,t)=>{const r=L(e,t);if(s()(r))return t;const{[e]:a,...i}=t;return i})(t,e),target:[q,U]}],or:{sid:"-97hs25"}});const{matchPage:W,pages:Z}=g.$.outputs,z=W(Z.AssistedPage),V=(0,i.createStore)(null,{sid:"-uqi5vu"}),G=(0,i.createEvent)({sid:"-9jpv5c"}),K=(0,i.createEvent)({sid:"-6vzip3"}),X=(0,i.createEvent)({sid:"-v8ys6y"}),Y=(0,i.createEvent)({sid:"-hctj2k"}),J=(0,i.withFactory)({sid:"-oblwi1",fn:()=>(0,p.CJ)({clock:Y,until:(0,i.withFactory)({sid:"8x1n5i",fn:()=>(0,c.f)((0,i.withFactory)({sid:"-pp3jc1",fn:()=>(0,d.c)(V)}))})})}),Q=(0,i.withFactory)({sid:"-hxykx6",fn:()=>(0,p.CJ)({clock:X,until:$})}),ee=(0,i.combine)({and:[U,V,(e,t)=>{if(s()(t))return null;const r=L(t,e);return s()(r)?null:r.params}],or:{sid:"-as4sr1"}});(0,i.sample)({and:[{clock:G,target:F}],or:{sid:"ogi3fk"}}),(0,i.sample)({and:[{clock:Q,target:V}],or:{sid:"oj92ed"}}),(0,i.sample)({and:[{clock:Q,filter:Boolean,target:j}],or:{sid:"oz73lu"}}),(0,i.sample)({and:[{clock:J,source:V,filter:Boolean,fn:(e,t)=>({orderId:e,params:t}),target:T}],or:{sid:"eenulu"}});const te=(0,i.sample)({and:[{clock:x,source:ee,filter:z.$isOpen,fn:(e,t)=>w(e,(e=>{const{userEvent:t,...r}=e.payload||{};return{data:{category:e.category,action:e.action,label:e.label,platform:e.platform,userEvent:e.userEvent},payload:{source:e.source,pageName:e.pageName,...r},fromContext:e.fromContext}})(t))}],or:{sid:"-kw1ju2"}}),re=(0,i.sample)({and:[{clock:K,source:ee,filter:z.$isOpen,fn:w}],or:{sid:"-17iwf9"}}),ae=(0,i.sample)({and:[{clock:[te,re]}],or:{sid:"46bt3"}});m.I.inputs.createReporter({payload:{orderId:V,gateId:ee.map((e=>e?.gateId??null)),clickId:ee.map((e=>e?.clickId??null)),searchId:ee.map((e=>e?.searchId??null))}})({clock:ae,data:(e,t)=>({...t.data,...e.data,service:u.t6.Assisted}),payload:(e,{payload:t})=>({...t,...l()(s(),e.payload)})});const ie={inputs:{send:K,fillOrderId:X,updateContextParams:Y,launch:G}};var ne=r(99763),se=r(59399),oe=r(72675),le=r(65740),ce=r(59812);const{matchPage:de,pages:ue}=g.$.outputs,pe=de(ue.AssistedPage),{$pageName:ge}=ce.m.outputs,{$isClient:me}=O.y.outputs,_e=(0,i.withFactory)({sid:"6nexw9",fn:()=>(0,ne.I)((0,i.sample)({and:[{clock:ge.updates,filter:Boolean}],or:{sid:"rn1b86"}}))}),fe=(0,i.createStore)(!1,{sid:"-xthtns"}),be=(0,i.createEvent)({sid:"gzo7gr"}),ye=(0,i.createEvent)({sid:"-htfjvl"}),he=(0,i.createEvent)({sid:"-x3ejus"}),ve=(0,i.createEvent)({sid:"x3r87o"}),ke=(0,i.createEvent)({sid:"n3rcuu"}),Se=(0,i.withFactory)({sid:"-hhuhg0",fn:()=>(0,se.g)(ke,2e3)}),Le=(0,i.createEffect)((()=>{const e=(0,i.scopeBind)(be),t=(0,i.scopeBind)(ye);window.addEventListener("visibilitychange",(()=>{e(document.visibilityState)})),window.addEventListener("beforeunload",(()=>{t()}))}),{sid:"78mqnx"});(0,i.sample)({and:[{clock:G,filter:(0,i.withFactory)({sid:"vgtqge",fn:()=>(0,oe.x)(me,pe.$isOpen)}),target:Le}],or:{sid:"8mommr"}}),(0,i.sample)({and:[{clock:_e,filter:me,fn:e=>({data:{category:"assisted",label:"tab",action:"active",userEvent:!0},payload:{page_name:e}}),target:K}],or:{sid:"8pze6x"}}),(0,i.withFactory)({sid:"9mf978",fn:()=>(0,le.s)({source:be,if:e=>"visible"===e,then:he,else:ve})}),(0,i.sample)({and:[{clock:he,source:ge,fn:e=>({data:{category:"assisted",label:"tab",action:"active",userEvent:!0},payload:{page_name:e}}),target:K}],or:{sid:"a1thtc"}}),(0,i.sample)({and:[{clock:ve,source:ge,target:ke}],or:{sid:"-ibd85d"}}),(0,i.sample)({and:[{clock:ye,fn:()=>!0,target:fe}],or:{sid:"-hwis4m"}}),(0,i.sample)({and:[{clock:Se,filter:(0,i.withFactory)({sid:"-48zt0k",fn:()=>(0,c.f)(fe)}),fn:e=>({data:{category:"assisted",label:"tab",action:"inactive",userEvent:!0},payload:{page_name:e}}),target:K}],or:{sid:"-ht80kg"}}),(0,i.sample)({and:[{clock:ye,source:ge,fn:e=>({data:{category:"assisted",label:"tab",action:"closed",userEvent:!0},payload:{page_name:e}}),target:K}],or:{sid:"-gvokdf"}});const we=(0,a.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/assisted/services/analytics/index.ts",lifecycle:{start:ie.inputs.launch},api:ie})},91652:function(e,t,r){"use strict";r.d(t,{H:function(){return f}}),r(21703);var a=r(30091),i=r(98116),n=r(75381),s=r(57640),o=r(82525),l=r(83781);const c=(0,l.Sy)((0,l.ZE)("service/helios/assisted/assisted_host_updated")),{urlWithApiHost:d}=o.B.outputs,{ASSISTED_HOST:u}=s.H,p=(0,i.createEvent)({sid:"-8wdmu5"}),g=(0,i.createStore)("",{sid:"qxgvup"});(0,i.sample)({and:[{clock:p,source:d(n.Nv`${u}`),fn:(e,t)=>t??e,target:[g,c]}],or:{sid:"jpdwvz"}});const m={updateAssistedHost:p},_={$assistedHost:g},f=(0,a.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/assisted/services/assisted_host/index.ts",api:{inputs:m,outputs:_},attachTestApi(){throw new Error("Test API is not available in production")}})},29023:function(e,t,r){"use strict";r.d(t,{c:function(){return b}}),r(21703);var a=r(30091),i=r(98116),n=r(43643),s=r(71172),o=r(76588),l=r(47047),c=r(70827);const d=(0,i.withFactory)({sid:"zcklj0",fn:()=>(0,l.d)(c.U)});(0,i.withFactory)({sid:"-bbr7a8",fn:()=>(0,o.XD)(d,{times:3,delay:100,supressIntermediateErrors:!0})});const u=(0,i.createEvent)({sid:"vyg4of"});(0,i.sample)({and:[{clock:u,target:d.start}],or:{sid:"-7iaxt"}});const{success:p,finished:g,...m}=(0,s.rX)(d);(0,i.sample)({and:[{clock:m.contractValidationError,fn:({error:e})=>({name:"OrderDto validation error",errorMessage:e.details,explanation:e.explanation,data:e.response}),target:n.b.inputs.captureContractError}],or:{sid:"a341r"}});const _={start:u},f={...m,success:p,finally:d.finished.finally},b=(0,a.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/assisted/services/get_order_api/index.ts",api:{inputs:_,outputs:f},attachTestApi(){throw new Error("Test API is not available in production")}})},83927:function(e,t,r){"use strict";r.d(t,{Q:function(){return Et}});var a={};r.r(a),r.d(a,{$gateInfo:function(){return Rt},$isOta:function(){return At},gateInfoReceived:function(){return Ot}}),r(21703);var i=r(30091),n=r(60795),s=r(98116),o=r(78873),l=r(63246);const{$isClient:c}=l.y.outputs,d=(0,s.createEffect)((e=>{if(window&&window.clarity){const t=Object.entries(e);for(const[e,r]of t)window.clarity("set",e,r)}}),{sid:"-g3n7b9"}),u=(0,s.createEvent)({sid:"-a9vhtz"});(0,s.sample)({and:[{clock:u,filter:c,target:d}],or:{sid:"-hvqk4w"}});const p={identified:u},g=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/assisted/services/session_record/index.ts",api:{inputs:p}});var m=r(2503),_=r(26844),f=r(9069),b=r(42204),y=r(29023);const{send:h}=o.c.inputs,v=(0,s.createEvent)({sid:"hfnrg6"}),k=(0,s.createStore)(!0,{sid:"-n08c6m"});(0,s.sample)({and:[{clock:v,filter:k,fn:({action:e,payload:t})=>({data:{category:"assisted",label:"client_init",action:e,userEvent:!1},payload:t}),target:h}],or:{sid:"7wo7m"}});var S=r(98366),L=r(27338);const{$initialParams:w}=n.g.outputs,I=y.c.inputs,x=y.c.outputs,O=(0,s.createEvent)({sid:"6k56m9"}),R=y.c.outputs.success.map((e=>e.result.initResult)),A=y.c.outputs.success.map((({result:e})=>(0,b.W$)(e.initResult.ticket)));(0,s.sample)({and:[{clock:O,fn:e=>({...e,context:"on_launch"}),target:[I.start,S.wZ.baseInfoProcessing]}],or:{sid:"-48omxl"}}),(0,s.sample)({and:[{clock:x.success,fn:({result:e})=>e,target:[L.eF,S.wZ.ready]}],or:{sid:"-3pzmrb"}}),(0,s.sample)({and:[{clock:x.failure,target:L.eF}],or:{sid:"-3b56qk"}}),(0,s.sample)({and:[{clock:x.success,source:w,fn:(e,t)=>{const{agentInfo:r,fallbackParams:a,orderId:i,strClickId:n}=t.result.initResult,{orderId:s,searchId:o,gateId:l}=e;return{action:f.m0.Success,payload:{orderId:i||s,gateId:l||r?.id,searchId:o||a.searchId,clickId:n}}},target:v}],or:{sid:"-2uncxq"}}),(0,s.sample)({and:[{clock:x.failure,source:w,fn:({orderId:e,gateId:t,searchId:r})=>({action:f.m0.Fail,payload:{orderId:e,gateId:t,searchId:r,clickId:null}}),target:v}],or:{sid:"-1fihr5"}});const E=(0,s.sample)({and:[{clock:x.success,fn:({result:e})=>e}],or:{sid:"-8w4lad"}}),B={inputs:{start:O},outputs:{$existingOrder:(0,s.restore)(E,null,{sid:"-shxmqy"}),ticketReceived:A,existingOrderReceived:y.c.outputs.success,initResultReceived:R}};var P=r(59051),D=r.n(P),N=r(38032),C=r(53788),q=r(79403),U=r(99186),$=r(20611),F=r(94547),j=r(32603),T=r(43643),M=r(71172),H=r(76588),W=r(80472),Z=r(24002),z=r(41783),V=r(60871);const G=e=>{const t=e.resultsUrl||e.currentHost,r=t?.includes("://");return`${r?"":"https://"}${t}/searches/${e.searchId}/clicks/${e.proposalId}`};var K=r(29893),X=r.n(K);const Y=e=>{const t={unique:D()(e.uniq)?null:e.uniq.toString(),_ga:D()(e.ga)?null:e.ga,auid:e.auid?e.auid:null,marker:e.marker,host:e.currentHost,uuid:e.searchId,market:e.market,locale:e.locale,brand:e.brand};return X()(D(),t)},J=(0,s.withFactory)({sid:"-as3tia",fn:()=>(0,H.s5)({name:"get_deeplink_query",params:(0,s.withFactory)({sid:"qdviva",fn:()=>(0,H.t6)()}),request:{credentials:"include",method:"GET",url:G,query:Y,headers:{source:z.Ns,fn:(e,t)=>({...t,"User-Agent":Z.t.outputs.ua})}},response:{mapData:({result:e})=>(0,b.eL)(e),contract:(0,W.v)(V.$G)}})}),Q=(0,s.createEvent)({sid:"-qavxaw"});(0,s.sample)({and:[{clock:Q,filter:(0,s.withFactory)({sid:"-idmi12",fn:()=>(0,N.f)(J.$pending)}),target:J.start}],or:{sid:"-be616m"}});const ee=(0,M.rX)(J);(0,s.sample)({and:[{clock:ee.contractValidationError,fn:({error:e})=>({name:"DeeplinkDto validation error",errorMessage:e.details,explanation:e.explanation,data:e.response}),target:T.b.inputs.captureContractError}],or:{sid:"-awkm72"}});const te={start:Q},re={...ee},ae=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/assisted/services/get_deeplink_api/index.ts",api:{inputs:te,outputs:re},attachTestApi:()=>{throw new Error("Testable API is not available in this environment")}});var ie=r(85585),ne=r(91652),se=r(29422);const oe=e=>{const t=(e=>`ucc${e.gateId}${e.searchId}`)(e);return(0,F.kl)(t)};var le=r(89159);const{$assistedHost:ce}=ne.H.outputs,{start:de}=le.h.inputs,{success:ue,failure:pe,error:ge,unavailableError:me,unexpectedError:_e}=le.h.outputs,{start:fe}=_.A.inputs,{failure:be,orderStartResult:ye}=_.A.outputs,he=(0,s.createEvent)({sid:"kz0j4j"}),ve=(0,s.merge)([ge,me,_e],{sid:"wdfbx2"});(0,s.sample)({and:[{clock:he,fn:({clickId:e,url:t,params:r,termUrl:a})=>({clickId:e,url:t,params:r,termUrl:a}),target:fe}],or:{sid:"-ww6e0d"}}),(0,s.sample)({and:[{clock:[ye.success,ye.error],target:L.W1}],or:{sid:"-w1dws5"}}),(0,s.sample)({and:[{clock:be,target:L.W1}],or:{sid:"-vymxtc"}}),(0,s.sample)({and:[{clock:ye.success,source:ce,fn:(e,t)=>({orderId:t.success.orderId,host:e}),target:[de,S.wZ.advancedInfoProcessing]}],or:{sid:"-vi540i"}}),(0,s.sample)({and:[{clock:[ue,ve],target:L.ag}],or:{sid:"-v13hmb"}}),(0,s.sample)({and:[{clock:pe,target:L.ag}],or:{sid:"-umsu6x"}}),(0,s.sample)({and:[{clock:ue,target:S.wZ.ready}],or:{sid:"-uiehg1"}});const{updateAssistedHost:ke}=ne.H.inputs,{$initialParams:Se}=n.g.outputs,Le=(0,s.createStore)(null,{sid:"bfo5wg"}),we=(0,s.combine)({and:[{auid:m.Y.outputs.$auid,market:C.D.outputs.$market,brand:q.U.outputs.$brand,locale:U.l.outputs.$language,currentHost:$.D.outputs.$hostname}],or:{sid:"-skn4gf"}}),Ie=(0,s.combine)({and:[we,Le,(e,t)=>D()(t)?null:{...e,...t}],or:{sid:"-aal6rg"}}),xe=(0,s.createEffect)((e=>{const t=(0,F.kl)("_ga"),r=(0,F.kl)("marker"),a=(e=>{const t=oe(e).read();return D()(t)?1:0})(e);return{ga:t.read(),marker:r.read(),uniq:a}}),{sid:"gswy25"}),Oe=(0,s.createEffect)((e=>{(e=>{const t=oe(e),r=(0,se.Z)(new Date,{seconds:86400});t.write("1",{expires:r})})(e)}),{sid:"-76b5r6"}),Re=(0,s.createEvent)({sid:"-m245ag"}),Ae=ae.outputs.success.map((({result:e})=>e)),Ee=ae.outputs.failure,Be=ie.e.outputs.success,Pe=(0,s.merge)([ie.e.outputs.error,ie.e.outputs.unexpectedError,ie.e.outputs.unavailableError],{sid:"-co4s0d"});(0,s.sample)({and:[{clock:Re,target:[xe,Le]}],or:{sid:"-ojzs2f"}}),(0,s.sample)({and:[{clock:xe.doneData,source:Ie,filter:Boolean,fn:(e,t)=>(0,j.E)({...t,...e}),target:[ae.inputs.start,S.wZ.baseInfoProcessing]}],or:{sid:"-o2y5o8"}}),(0,s.sample)({and:[{clock:[Ae,Ee],target:L.in}],or:{sid:"-n7239a"}}),(0,s.sample)({and:[{clock:Ae,source:Le,filter:Boolean,target:Oe}],or:{sid:"-mqk9gg"}}),(0,s.sample)({and:[{clock:Ae,fn:({assistedInitHost:e})=>e,target:ke}],or:{sid:"-m9in29"}});const De=(0,s.sample)({and:[{clock:Ae,source:Le,filter:Boolean,fn:(e,t)=>({context:"init",searchId:e.searchId,termUrl:e.proposalId,clickId:t.strClickId,params:t.params,url:t.url,host:t.assistedInitHost})}],or:{sid:"-mwjlee"}}),Ne=(0,s.sample)({and:[{clock:Ae,source:Le,filter:Boolean,fn:(e,t)=>({url:t.url,termUrl:e.proposalId,clickId:t.strClickId,params:t.params})}],or:{sid:"-ja8y7o"}});(0,s.sample)({and:[{clock:De,filter:(0,s.withFactory)({sid:"-mjxvki",fn:()=>(0,N.f)(S.B9)}),target:ie.e.inputs.start}],or:{sid:"-k8xsql"}}),(0,s.sample)({and:[{clock:Ne,filter:S.B9,target:he}],or:{sid:"-9w5afr"}}),(0,s.sample)({and:[{clock:Ae,source:Le,filter:Boolean,fn:(e,t)=>({searchId:e.searchId,proposalId:e.proposalId,clickId:t.strClickId,gateId:t.gateId}),target:L.hw}],or:{sid:"-9fngmx"}}),(0,s.sample)({and:[{clock:[Be,Pe],fn:({result:e})=>e,target:L.cC}],or:{sid:"-8int19"}}),(0,s.sample)({and:[{clock:ie.e.outputs.failure,target:L.cC}],or:{sid:"-8fd1h3"}}),(0,s.sample)({and:[{clock:[Ee,Pe,ie.e.outputs.failure],source:Se,fn:({orderId:e,gateId:t,searchId:r})=>({action:f.m0.Fail,payload:{orderId:e,gateId:t,searchId:r,clickId:null}}),target:v}],or:{sid:"-7yv7o9"}}),(0,s.sample)({and:[{clock:Be,source:Se,fn:(e,t)=>{const{agentInfo:r,fallbackParams:a,orderId:i,strClickId:n}=t.result.success,{orderId:s,searchId:o,gateId:l}=e;return{action:f.m0.Success,payload:{orderId:i||s,gateId:l||r?.id,searchId:o||a.searchId,clickId:n}}},target:v}],or:{sid:"-6zodp5"}});const Ce={inputs:{start:Re},outputs:{newOrderReceived:Be,ticketReceived:ie.e.outputs.ticketReceived,orderIdReceived:ie.e.outputs.orderIdReceived}},{orderStartResult:qe}=_.A.outputs,{initialParamsReceived:Ue}=n.g.outputs,{initResultReceived:$e}=B.outputs,{newOrderReceived:Fe}=Ce.outputs,{identified:je}=g.inputs,{$auid:Te}=m.Y.outputs,Me=(0,s.merge)([qe.success.map((e=>e.success.agentInfo?.id)),$e.map((e=>e.agentInfo?.id)),Fe.map((e=>e.result.success.agentInfo?.id)),Ue.map((e=>e.gateId))],{sid:"-tpn9dy"}),He=(0,s.merge)([qe.success.map((e=>e.success.orderId)),$e.map((e=>e.orderId)),Fe.map((e=>e.result.success.orderId)),Ue.map((e=>e.orderId))],{sid:"-2ufpfv"}),We=(0,s.merge)([qe.success.map((e=>e.success.fallbackParams.searchId)),$e.map((e=>e.fallbackParams.searchId)),Fe.map((e=>e.result.success.fallbackParams.searchId)),Ue.map((e=>e.searchId))],{sid:"-6rqhim"}),Ze=(0,s.merge)([qe.success.map((e=>e.success.strClickId)),$e.map((e=>e.strClickId)),Fe.map((e=>e.result.success.strClickId))],{sid:"kx6xy0"}),ze=(0,s.sample)({and:[{clock:Me,filter:Boolean}],or:{sid:"yo7t5a"}}),Ve=(0,s.sample)({and:[{clock:He,filter:Boolean}],or:{sid:"-ulev56"}}),Ge=(0,s.sample)({and:[{clock:We,filter:Boolean}],or:{sid:"u2h3vu"}}),Ke=(0,s.sample)({and:[{clock:Ze,filter:Boolean}],or:{sid:"-4iedyn"}}),Xe=(0,s.restore)(ze,null,{sid:"d3v3m7"}),Ye=(0,s.restore)(Ve,null,{sid:"qwx45k"}),Je=(0,s.restore)(Ge,null,{sid:"66j4x4"}),Qe=(0,s.restore)(Ke,null,{sid:"2y8nd7"});(0,s.sample)({and:[{clock:Ve,target:o.c.inputs.fillOrderId}],or:{sid:"-ti86xy"}}),(0,s.sample)({and:[{source:{gateId:Xe,searchId:Je,clickId:Qe},target:o.c.inputs.updateContextParams}],or:{sid:"-tfh7z5"}}),(0,s.sample)({and:[{source:{gate_id:Xe,click_id:Qe,order_id:Ye,auid:Te},target:je}],or:{sid:"-t16kjr"}});const et={$gateId:Xe,$orderId:Ye,$searchId:Je,$clickId:Qe};var tt=r(78194),rt=r(38779),at=r(4375);const{send:it}=o.c.inputs,{getInitialParams:nt}=n.g.inputs,{$initialParams:st,initialParamsReceived:ot,newOrderShouldBeInit:lt,existingOrderShouldBeReceived:ct,queryParamsNotFound:dt}=n.g.outputs,ut=(0,s.createEvent)({sid:"-ivj78p"}),pt=(0,s.createEffect)((({initialTitle:e,ticket:t})=>{if(t){const r=(e=>{if(0===e.length)return null;const t=e.map((e=>{const{departure:t}=e.flight[0],{arrival:r}=e.flight[e.flight.length-1];return{departure:t,arrival:r}})),r=t[0].departure,a=t[0].arrival,i=t[1]?.departure??"",n=t[1]?.arrival??"";return 1===t.length?`${r}${a}`:2===t.length&&r===n&&i===a?`${r}${a}`:t.map((e=>`${e.departure}-${e.arrival}`)).join(", ")})(t.segment),a=(e=>{if(0===e.length)return null;const t=new Date(1e3*e[0].flight[0].departureTimestamp),r=e[e.length-1],a=new Date(1e3*r.flight[r.flight.length-1].arrivalTimestamp);return`${(0,rt.Z)(t,"dd.MM")}-${(0,rt.Z)(a,"dd.MM")}`})(t.segment);document.title=r&&a?`${e} ${r}, ${a}`:e}else document.title=e}),{sid:"-64qif6"});(0,s.sample)({and:[{clock:L.TS,source:st,filter:e=>0===Object.keys(e).length,target:ut}],or:{sid:"-xg4pnb"}}),(0,s.sample)({and:[{clock:ut,filter:l.y.outputs.$isClient,target:nt}],or:{sid:"-wyjanr"}}),(0,s.sample)({and:[{clock:ot,source:st,filter:Boolean,target:L.p4}],or:{sid:"-wi1gux"}}),(0,s.sample)({and:[{clock:lt,filter:Boolean,target:Ce.inputs.start}],or:{sid:"-w0zugq"}}),(0,s.sample)({and:[{clock:ct,filter:Boolean,fn:e=>({orderId:e.orderId,type:"init"}),target:B.inputs.start}],or:{sid:"nin3db"}}),(0,s.sample)({and:[{clock:[B.outputs.ticketReceived,Ce.outputs.ticketReceived],source:tt.J.outputs.translated("service_assisted_init:documentTitle"),filter:l.y.outputs.$isClient,fn:(e,t)=>({initialTitle:e,ticket:t}),target:pt}],or:{sid:"nzopri"}}),(0,s.sample)({and:[{clock:dt,source:st,fn:({orderId:e,searchId:t,gateId:r})=>({action:f.m0.Fail,payload:{orderId:e,searchId:t,gateId:r,clickId:null}}),target:[v,L.cL]}],or:{sid:"oixij5"}}),(0,s.sample)({and:[{clock:lt,source:st,filter:(e,t)=>D()(t),fn:e=>({message:"Init new order was failed because of missing params",payload:e}),target:T.b.inputs.warning}],or:{sid:"ph0rbj"}}),(0,s.sample)({and:[{clock:ut,filter:S.B9,fn:()=>({data:{category:f.Nv.Assisted,label:f.jP.LightningFast,action:f.m0.Progress,userEvent:!1},payload:{state:at.H.Initial}}),target:it}],or:{sid:"qbt8jr"}});const gt={internals:{updateTitleFx:pt},inputs:{serviceStarted:ut}};r(26699);var mt=r(49670);const{changeWebViewParam:_t}=mt.U.inputs,{$initialParams:ft,initialParamsReceived:bt}=n.g.outputs,yt=ft.map((({hashData:e})=>e??null)).map((e=>e?.availableFeatures??[])).map((e=>e.includes("my_orders")));(0,s.sample)({and:[{clock:bt,fn:e=>e.hashData?.isWebView??!1,target:_t}],or:{sid:"-9qrsxj"}});const{initResultReceived:ht}=B.outputs,{newOrderReceived:vt}=Ce.outputs,kt=ht.map((({agentInfo:e})=>e)),St=vt.map((({result:e})=>e.success.agentInfo)),{orderStartResult:Lt}=_.A.outputs,wt=Lt.success.map((e=>e.success.agentInfo)),It=(0,s.sample)({and:[{clock:kt,filter:Boolean}],or:{sid:"75d9aj"}}),xt=(0,s.sample)({and:[{clock:St,filter:Boolean}],or:{sid:"-hy8my2"}}),Ot=(0,s.merge)([It,xt,wt],{sid:"-wpvpdh"}),Rt=(0,s.restore)(Ot,null,{sid:"-mi4la4"}),At=Rt.map((e=>e?.features?.isOta??!1)),Et=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/assisted/services/init/index.ts",api:{inputs:{serviceStarted:gt.inputs.serviceStarted},outputs:{...et,...n.g.outputs,...Ce.outputs,...B.outputs,...a,$isMyOrdersAvailableInNativeClient:yt}},attachTestApi:()=>{throw new Error("Test API is not available in production")}})},98366:function(e,t,r){"use strict";r.d(t,{B9:function(){return f},lt:function(){return b},wZ:function(){return y}});var a=r(98116),i=r(47047),n=r(35529),s=r(78364),o=r(9069),l=r(78873),c=r(26844),d=r(4375),u=r(27338),p=r(60795);const{send:g}=l.c.inputs,{$orderStartSuccessResult:m}=c.A.outputs,{$initialParams:_}=p.g.outputs,f=(0,a.withFactory)({sid:"-iiabcg",fn:()=>(0,i.d)((()=>s.f.inputs.createFlag({name:"asb-feat-lightning",contract:n.Boolean,defaultValue:!1})))}).$value,b=(0,a.createStore)(d.H.Initial,{sid:"45df07"}),y=(0,a.createApi)({and:[b,{initial:()=>d.H.Initial,baseInfoProcessing:()=>d.H.BaseInfoProcessing,advancedInfoProcessing:()=>d.H.AdvancedInfoProcessing,ready:()=>d.H.Ready}],or:{sid:"ys12r9"}});(0,a.sample)({and:[{clock:b,target:u.a9}],or:{sid:"fccw4w"}}),(0,a.sample)({and:[{clock:b,source:{startResult:m,initialParams:_},filter:f,fn:({startResult:e,initialParams:t},r)=>({data:{category:o.Nv.Assisted,label:o.jP.LightningFast,action:o.m0.Progress,userEvent:!1},payload:{state:r,orderId:t.orderId||e?.orderId,gateId:t.gateId||e?.agentInfo?.id,searchId:t.searchId||e?.fallbackParams.searchId,clickId:e?.strClickId}}),target:g}],or:{sid:"fsaxcd"}})},60795:function(e,t,r){"use strict";r.d(t,{g:function(){return C}});var a=r(98116),i=r(65740),n=r(17563),s=r(59051),o=r.n(s),l=r(91652),c=r(20611);r(26699);const d=["RU"],u=["AM","BY","KZ","KG"],p=e=>(t,r)=>t.map((t=>e(r[t]))).every(Boolean),{$onlyClientHash:g}=(p((e=>{return!o()(e)&&!o()(e.countryCode)&&(t=e.countryCode,d.includes(t.toUpperCase()));var t})),p((e=>!o()(e)&&!o()(e.countryCode)&&(e=>{const t=e.toUpperCase();return u.includes(t)||d.includes(t)})(e.countryCode))),c.D.outputs),m=(0,a.createEffect)((e=>{const t=e.replaceAll("#","");if(0===t.length)return null;const r=decodeURIComponent(t),a=JSON.parse(r),{clickData:i,isWebView:n,available_features:s}=a;return[i,n,s].every(o())?null:{clickData:i||null,isWebView:Boolean(n),availableFeatures:s||[]}}),{sid:"eewhqb"}),_=(0,a.attach)({and:{source:g,effect:m},or:{sid:"-h884fr"}}),f=(0,a.createEvent)({sid:"-s9tb1g"}),b=(0,a.createStore)(null,{sid:"-v17vh5"}),y=(0,a.merge)([_.doneData,(0,a.sample)({and:[{clock:_.fail,fn:()=>null}],or:{sid:"1krmm7"}})],{sid:"-n3etud"});(0,a.sample)({and:[{clock:f,target:_}],or:{sid:"eb16u2"}}),(0,a.sample)({and:[{clock:_.doneData,target:b}],or:{sid:"eds5sv"}});const h={inputs:{getHashData:f},outputs:{$hashData:b,hashDataPossiblyReceived:y},internals:{parseHashFx:m}},{$search:v}=c.D.outputs,{getHashData:k}=h.inputs,{hashDataPossiblyReceived:S}=h.outputs,{updateAssistedHost:L}=l.H.inputs,w=(0,a.createStore)({},{sid:"fhsqck"}),I=(0,a.createEvent)({sid:"s6eahm"}),x=(0,a.createEffect)((e=>(e=>{const t=Object.entries(e),r={};for(const[e,a]of t){let t=null;Array.isArray(a)?t=a.find((e=>!o()(e)))||null:o()(a)||(t=a),o()(t)||(r[e]=t)}return r})(e)),{sid:"-o9n305"}),O=(0,a.attach)({and:{source:v,effect:x,mapParams:(e,t)=>(0,n.parse)(t)},or:{sid:"6b1uyo"}}),R=(0,a.sample)({and:[{clock:O.doneData,fn:e=>{const{is_airline:t,search_id:r,proposal_id:a,gate_id:i,gate_label:n,order_id:s,results_url:o,fallback:l,currency:c,market:d,brand:u,device_click_id:p,assisted_host:g,adults:m,children:_,infants:f,price_value:b,price_currency:y,departure_city:h,departure_date:v,arrival_city:k,return_date:S}=e,L=b&&y;return{isAirline:"true"===t,searchId:r||null,proposalId:a||null,gateId:parseInt(i,10)||null,gateLabel:n||null,orderId:s||null,resultsUrl:o||null,fallback:l||null,currency:c||null,market:d||null,brand:u||null,deviceClickId:p||null,assistedHost:g||null,adults:parseInt(m,10)||null,children:parseInt(_,10)||null,infants:parseInt(f,10)||null,price:L?{value:parseInt(b,10),currency:y.toUpperCase()}:null,departureCity:h||null,arrivalCity:k||null,departureDate:Number(v)||null,returnDate:Number(S)||null}}}],or:{sid:"-nr9gip"}}),A=(0,a.createEvent)({sid:"oaysw"}),E=(0,a.createEvent)({sid:"ntdjze"}),B=(0,a.createEvent)({sid:"d82kcj"});(0,a.sample)({and:[{clock:I,target:O}],or:{sid:"-wg8kku"}}),(0,a.sample)({and:[{clock:R,source:w,fn:(e,t)=>({...e,...t}),target:[w,k]}],or:{sid:"-wbu7ty"}}),(0,a.sample)({and:[{clock:S,source:w,fn:(e,t)=>null===t?e:{...e,hashData:t},target:[w,A]}],or:{sid:"-vuslfr"}}),(0,a.sample)({and:[{clock:R,fn:({assistedHost:e})=>e,target:L}],or:{sid:"-swyrq8"}}),(0,a.withFactory)({sid:"-sfdcqo",fn:()=>(0,i.s)({source:A,if:e=>o()(e.orderId),then:B,else:E})});const P=(0,a.sample)({and:[{clock:B,source:w,fn:e=>o()(e.searchId)||o()(e.proposalId)||o()(e.gateId)?null:{searchId:e.searchId,proposalId:e.proposalId,gateId:e.gateId,resultsUrl:e.resultsUrl||null}}],or:{sid:"-d5zqd"}}),D=(0,a.sample)({and:[{clock:E,source:w.map((e=>e.orderId??null)),filter:Boolean,fn:e=>({orderId:e})}],or:{sid:"-p7waos"}}),N=(0,a.sample)({and:[{clock:P,filter:e=>null===e}],or:{sid:"-2wuoxi"}}),C={inputs:{getInitialParams:I},outputs:{$initialParams:w,initialParamsReceived:A,newOrderShouldBeInit:P,existingOrderShouldBeReceived:D,queryParamsNotFound:N},internals:{searchParamsReceived:R}}},27338:function(e,t,r){"use strict";r.d(t,{TS:function(){return i},W1:function(){return p},a9:function(){return u},ag:function(){return g},cC:function(){return c},cL:function(){return d},eF:function(){return o},hw:function(){return s},in:function(){return l},p4:function(){return n}});var a=r(83781);const i=(0,a.V6)((0,a.ZE)("service/helios/assisted/init_start")),n=(0,a.Sy)((0,a.ZE)("service/helios/assisted/init_params_received")),s=(0,a.Sy)((0,a.ZE)("service/helios/assisted/search_params_received")),o=(0,a.Sy)((0,a.ZE)("service/helios/assisted/order_received")),l=(0,a.Sy)((0,a.ZE)("service/helios/assisted/deeplink_received")),c=(0,a.Sy)((0,a.ZE)("service/helios/assisted/new_order_received")),d=(0,a.Sy)((0,a.ZE)("service/helios/assisted/query_params_not_found")),u=(0,a.Sy)((0,a.ZE)("service/helios/assisted/assisted_status_received")),p=(0,a.Sy)((0,a.ZE)("service/helios/assisted/order_start_received")),g=(0,a.Sy)((0,a.ZE)("service/helios/assisted/order_tariffs_received"))},4375:function(e,t,r){"use strict";var a;r.d(t,{H:function(){return a}}),function(e){e.Initial="INITIAL",e.BaseInfoProcessing="BASE_INFO_PROCESSING",e.AdvancedInfoProcessing="ADVANCED_INFO_PROCESSING",e.Ready="READY"}(a||(a={}))},85585:function(e,t,r){"use strict";r.d(t,{e:function(){return A}}),r(21703);var a=r(30091),i=r(98116),n=r(29260),s=r(43643),o=r(71172),l=r(42204),c=r(60871),d=r(76588),u=r(80472),p=r(41783),g=r(47777);const m=(0,i.withFactory)({sid:"ulzj6g",fn:()=>(0,d.tW)({params:(0,i.withFactory)({sid:"dvlntn",fn:()=>(0,d.t6)()}),request:{credentials:"include",url:({host:e})=>(0,o.Yf)({endpoint:"init",version:1.5,host:e}),method:"POST",body:({clickId:e,url:t,params:r})=>({click_id:e,url:t,params:r}),query:{source:g.$,fn:({searchId:e,termUrl:t},r)=>({search_id:e,term_url:t,...r})},headers:{source:p.Ns,fn:(e,t)=>t}},response:{contract:(0,u.v)(c.Zq)}})}),_=(0,i.createEvent)({sid:"9dxbau"});(0,i.sample)({and:[{clock:_,target:m.start}],or:{sid:"wv5yi9"}});const{success:f,...b}=(0,o.rX)(m),y=(0,i.split)({and:[f.map((({result:e})=>e)),{success:c.St.guard,error:c.b4.guard,unexpectedError:c.Mn.guard,unavailableError:c.so.guard}],or:{sid:"-l24io5"}}),h=e=>(0,i.withFactory)({sid:"y8ng4i",fn:()=>(0,n.m)({params:f.map((({params:e})=>e)),result:e})}),{success:v,error:k,unexpectedError:S,unavailableError:L}={success:h(y.success.map(l.wA)),error:h(y.error.map(l.jC)),unexpectedError:h(y.unexpectedError.map(l.h8)),unavailableError:h(y.unavailableError.map(l.uK))},w=v.map((({result:e})=>(0,l.W$)(e.success.ticket))),I=v.map((({result:e})=>e.success.orderId));(0,i.sample)({and:[{clock:b.contractValidationError,fn:e=>({name:"InitDto validation error",errorMessage:e.error.details,explanation:e.error.explanation,data:e.error.response}),target:s.b.inputs.captureContractError}],or:{sid:"-zg2pul"}});const{failure:x}=b,O={start:_},R={ticketReceived:w,orderIdReceived:I,failure:x,success:v,unexpectedError:S,unavailableError:L,error:k},A=(0,a.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/assisted/services/init_order_api/index.ts",api:{inputs:O,outputs:R},attachTestApi:()=>{throw new Error("Test API is not available in production")}})},43643:function(e,t,r){"use strict";r.d(t,{b:function(){return f}});var a=r(30091),i=r(98116),n=r(47047),s=r(78650),o=r(83781);const l=(0,o.V6)((0,o.ZE)("service/helios/assisted/logger")),{createLogger:c}=s.M.inputs,{critical:d,error:u,warning:p,info:g,debug:m,captureContractError:_}=(0,i.withFactory)({sid:"k56pkb",fn:()=>(0,n.d)(c,{team:"assisted"})});(0,i.split)({and:[{source:l,match:{info:({level:e})=>"info"===e,warning:({level:e})=>"warning"===e,error:({level:e})=>"error"===e,critical:({level:e})=>"critical"===e,debug:({level:e})=>"debug"===e},cases:{info:g,warning:p,error:u,critical:d,debug:m}}],or:{sid:"jpmrll"}});const f=(0,a.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/assisted/services/logger/index.ts",api:{inputs:{critical:d,debug:m,error:u,info:g,warning:p,captureContractError:_}}})},26844:function(e,t,r){"use strict";r.d(t,{A:function(){return I}}),r(21703);var a=r(30091),i=r(98116),n=r(71172),s=r(60871),o=r(42204),l=r(43643),c=r(80472),d=r(76588),u=r(41783),p=r(47777);const g=e=>({click_id:e.clickId,url:e.url,params:{agent_id:e.params.agent_id,assisted_init_host:e.params.assisted_init_host,assisted_name:e.params.assisted_name,deeplink_id:e.params.deeplink_id,proposal_id:e.params.proposal_id,search_id:e.params.search_id}}),m=(0,i.withFactory)({sid:"3mhf73",fn:()=>(0,d.tW)({params:(0,i.withFactory)({sid:"-3zr8mt",fn:()=>(0,d.t6)()}),request:{credentials:"include",url:({params:e})=>(0,n.Yf)({endpoint:"start",version:2,host:e.assisted_init_host}),method:"POST",body:g,query:{source:p.$,fn:({params:e,termUrl:t},r)=>({search_id:e.search_id,term_url:t,...r})},headers:{source:u.Ns,fn:(e,t)=>t}},response:{contract:(0,c.v)(s.nn)}})});(0,i.withFactory)({sid:"qh752u",fn:()=>(0,d.XD)(m,{times:3,delay:100,filter:d.eE,supressIntermediateErrors:!0})});const{captureContractError:_}=l.b.inputs,f=(0,i.createStore)(null,{sid:"du7hzb"}),b=(0,i.createEvent)({sid:"l48irg"});(0,i.sample)({and:[{clock:b,target:m.start}],or:{sid:"sj34mn"}});const{success:y,failure:h,contractValidationError:v}=(0,n.rX)(m),k=(0,i.split)({and:[y.map((({result:e})=>e)),{success:s.se.guard,error:s.QZ.guard}],or:{sid:"-p8go82"}}),S={success:k.success.map(o._s),error:k.error.map(o.nB)};(0,i.sample)({and:[{clock:S.success,fn:e=>e.success,target:f}],or:{sid:"thq60e"}}),(0,i.sample)({and:[{clock:v,fn:e=>({name:"StartDto validation error",errorMessage:e.error.details,explanation:e.error.explanation,data:e.error.response}),target:_}],or:{sid:"twkm15"}});const L={start:b},w={orderStartResult:S,success:y,failure:h,$orderStartSuccessResult:f},I=(0,a.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/assisted/services/order_start_api/index.ts",api:{inputs:L,outputs:w},attachTestApi(){throw new Error("Test API is not available in production")}})},89159:function(e,t,r){"use strict";r.d(t,{h:function(){return I}}),r(21703);var a=r(30091),i=r(98116),n=r(71172),s=r(60871),o=r(36467),l=r(43643),c=r(76588),d=r(80472),u=r(41783),p=r(47777);const g=(0,i.withFactory)({sid:"-8qtov1",fn:()=>(0,c.tW)({params:(0,i.withFactory)({sid:"8oyqry",fn:()=>(0,c.t6)()}),request:{credentials:"include",url:({host:e})=>(0,n.Yf)({endpoint:"tariffs",version:2,host:e}),method:"POST",query:{source:p.$,fn:({orderId:e},t)=>({order_id:e,...t})},headers:{source:u.Ns,fn:(e,t)=>t}},response:{contract:(0,d.v)(s.QF)}})});(0,i.withFactory)({sid:"6x8gsy",fn:()=>(0,c.XD)(g,{times:3,delay:100,filter:c.eE,supressIntermediateErrors:!0})});const m=(0,i.createEvent)({sid:"i6w47s"});(0,i.sample)({and:[{clock:m,target:g.start}],or:{sid:"w83akz"}});const{success:_,failure:f,...b}=(0,n.rX)(g),y=(0,i.split)({and:[_.map((({result:e})=>e)),{success:s.OJ.guard,error:s.jD.guard,unexpectedError:s.Ld.guard,unavailableError:s.an.guard}],or:{sid:"jop9ps"}}),h=y.success.map((e=>({status:e.status,success:(0,o.g)(e.success)}))),v=y.error.map((e=>({status:e.status,error:{message:e.error?.message??null,id:e.error?.id??null,pnr:e.error?.pnr??null}}))),k=y.unavailableError.map((e=>({status:e.status}))),S=y.unexpectedError.map((e=>({status:e.status,error:{message:`Tariffs unexpected error with status: ${e.status}`}})));(0,i.sample)({and:[{clock:b.contractValidationError,fn:e=>({name:"TariffsDto validation error",errorMessage:e.error.details,explanation:e.error.explanation,data:e.error.response}),target:l.b.inputs.captureContractError}],or:{sid:"xobqya"}});const L={start:m},w={error:v,failure:f,success:h,unavailableError:k,unexpectedError:S},I=(0,a.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/assisted/services/tariffs_api/index.ts",api:{inputs:L,outputs:w},attachTestApi:()=>{throw new Error("Test API is not available in production")}})},9069:function(e,t,r){"use strict";var a,i,n,s;r.d(t,{m0:function(){return i},Nv:function(){return n},jP:function(){return s},n_:function(){return a}}),function(e){e.RussianInternal="R",e.RussianExternal="Z",e.BirthCertificate="B",e.NationalPassport="PT",e.UnknownDocument="UNK"}(a||(a={})),function(e){e.Success="success",e.Fail="fail",e.Close="close",e.Click="click",e.Progress="progress"}(i||(i={})),function(e){e.Baggage="baggage",e.HandBaggage="hand_baggage",e.AdditionalEquipment="additional_equipment",e.Insurance="insurance",e.Package="package",e.AdditionalService="additional_service",e.Aeroexpress="aeroexpress",e.Meal="meal",e.Pet="pet",e.Animals="animals",e.Seat="seat",e.Seats="seats",e.Tariff="tariff",e.Booking="booking",e.PassengerData="passenger_data",e.Error="error",e.Payment="payment",e.ContactsData="contacts_data",e.Equipment="equipment",e.Search="search",e.ExitQuiz="exit-quiz",e.Assisted="assisted",e.PriceChange="price_change",e.Feedback="feedback",e.ApplePay="apple_pay",e.Profile="profile",e.PaymentData="payment_data",e.PostPay="post_pay"}(n||(n={})),function(e){e.LightningFast="lightning_fast",e.TariffNotFound="tariff_not_found",e.Change="change",e.Exit="exit",e.ThreeDS="3ds",e.ThreeDsMore="3ds_more",e.AssistedSuccess="assisted_success",e.Reason="reason",e.Error="error",e.Options="options",e.PreAuth="pre_auth",e.StatusPage="status_page",e.Page="page",e.AssistedProblems="assisted_problems",e.Login="login",e.SeatMap="seatmap",e.Seat="seat",e.PassengerForm="passenger_form",e.ContactsForm="contacts_form",e.PaymentData="payment_data",e.PaymentError="payment_error",e.SaveDocuments="save_documents",e.Service="service",e.ServiceOptions="service_options",e.ServiceDetailsPopup="service_details_popup"}(s||(s={}))},59812:function(e,t,r){"use strict";r.d(t,{m:function(){return f}});var a=r(30091),i=r(98116),n=r(47047),s=r(15863),o=r(83781);const l=(0,o.V6)((0,o.ZE)("service/helios/assisted/page_name_received")),c=(0,o.V6)((0,o.ZE)("service/helios/assisted/pay_by_card_inited")),d=(0,o.V6)((0,o.ZE)("service/helios/assisted/pay_by_card_finished")),u=(0,i.restore)(l,null,{sid:"7o7q92"}),{$enabled:p,turnOff:g,turnOn:m}=(0,i.withFactory)({sid:"-i3xcwk",fn:()=>(0,n.d)(s.qs,!1)});(0,i.sample)({and:[{clock:c,target:m}],or:{sid:"-1pyw8u"}}),(0,i.sample)({and:[{clock:d,target:g}],or:{sid:"-1bo8tg"}});const _={$pageName:u,$isPayInProgress:p,payByCardFinished:d,payByCardInited:c,pageNameReceived:l},f=(0,a.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/assisted_px/services/helios_interop/index.ts",api:{outputs:_}})},49670:function(e,t,r){"use strict";r.d(t,{U:function(){return c}}),r(21703);var a=r(30091),i=r(98116);const n=(0,i.createStore)(!1,{sid:"-jsi7bd"}),s=(0,i.createEvent)({sid:"w8ex54"});(0,i.sample)({and:[{clock:s,target:n}],or:{sid:"-cgtulh"}});const o={changeWebViewParam:s},l={$isCurrentPlatformWebView:n},c=(0,a.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/assisted_px/services/web_view/index.ts",api:{inputs:o,outputs:l},attachTestApi(){throw new Error("Test API is not available in production")}})},52262:function(e,t,r){"use strict";var a=r(82109),i=r(47908),n=r(26244),s=r(19303),o=r(51223);a({target:"Array",proto:!0},{at:function(e){var t=i(this),r=n(t),a=s(e),o=a>=0?a:r+a;return o<0||o>=r?void 0:t[o]}}),o("at")},24506:function(e,t,r){"use strict";var a=r(82109),i=r(1702),n=r(84488),s=r(19303),o=r(41340),l=r(47293),c=i("".charAt);a({target:"String",proto:!0,forced:l((function(){return"\ud842"!=="".at(-2)}))},{at:function(e){var t=o(n(this)),r=t.length,a=s(e),i=a>=0?a:r+a;return i<0||i>=r?void 0:c(t,i)}})},86556:function(e,t,r){var a=r(89465),i=r(77813);e.exports=function(e,t,r){(void 0!==r&&!i(e[t],r)||void 0===r&&!(t in e))&&a(e,t,r)}},42980:function(e,t,r){var a=r(46384),i=r(86556),n=r(28483),s=r(59783),o=r(13218),l=r(81704),c=r(36390);e.exports=function e(t,r,d,u,p){t!==r&&n(r,(function(n,l){if(p||(p=new a),o(n))s(t,r,l,d,e,u,p);else{var g=u?u(c(t,l),n,l+"",t,r,p):void 0;void 0===g&&(g=n),i(t,l,g)}}),l)}},59783:function(e,t,r){var a=r(86556),i=r(64626),n=r(77133),s=r(278),o=r(38517),l=r(35694),c=r(1469),d=r(29246),u=r(44144),p=r(23560),g=r(13218),m=r(68630),_=r(36719),f=r(36390),b=r(59881);e.exports=function(e,t,r,y,h,v,k){var S=f(e,r),L=f(t,r),w=k.get(L);if(w)a(e,r,w);else{var I=v?v(S,L,r+"",e,t,k):void 0,x=void 0===I;if(x){var O=c(L),R=!O&&u(L),A=!O&&!R&&_(L);I=L,O||R||A?c(S)?I=S:d(S)?I=s(S):R?(x=!1,I=i(L,!0)):A?(x=!1,I=n(L,!0)):I=[]:m(L)||l(L)?(I=S,l(S)?I=b(S):g(S)&&!p(S)||(I=o(L))):x=!1}x&&(k.set(L,I),h(I,L,y,v,k),k.delete(L)),a(e,r,I)}}},25970:function(e,t,r){var a=r(63012),i=r(79095);e.exports=function(e,t){return a(e,t,(function(t,r){return i(e,r)}))}},21463:function(e,t,r){var a=r(5976),i=r(16612);e.exports=function(e){return a((function(t,r){var a=-1,n=r.length,s=n>1?r[n-1]:void 0,o=n>2?r[2]:void 0;for(s=e.length>3&&"function"==typeof s?(n--,s):void 0,o&&i(r[0],r[1],o)&&(s=n<3?void 0:s,n=1),t=Object(t);++a<n;){var l=r[a];l&&e(t,l,a,s)}return t}))}},36390:function(e){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},74613:function(e,t,r){var a=r(92822)("merge",r(82492));a.placeholder=r(69306),e.exports=a},4588:function(e,t,r){var a=r(92822)("pick",r(78718));a.placeholder=r(69306),e.exports=a},82492:function(e,t,r){var a=r(42980),i=r(21463)((function(e,t,r){a(e,t,r)}));e.exports=i},78718:function(e,t,r){var a=r(25970),i=r(99021)((function(e,t){return null==e?{}:a(e,t)}));e.exports=i},59881:function(e,t,r){var a=r(98363),i=r(81704);e.exports=function(e){return a(e,i(e))}},99763:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(98116);function i(e){var t,r;a.is.unit(e)?t=e:({source:t,reset:r}=e);var i=(0,a.createStore)(!0,{name:"$canTrigger",sid:"ys2jl0"}),n=(0,a.sample)({and:[{source:t,filter:i}],or:{name:"trigger",sid:"e3xto3"}});return i.on(n,(()=>!1)),r&&i.reset(r),n}}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/shared-2235db97e1a43b68eabad3c05e916dfe0efde368.4d18de586d4e98db42ef.min.js.map