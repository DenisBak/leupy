(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[12417],{13009:function(e,t,i){"use strict";i.d(t,{O:function(){return Kt}});var s=i(98116),a=i(72675),r=i(38032),l=i(28258),c=i(27497),n=i(52112),d=i(18756),o=i(41832),u=i(38352),h=(i(26699),i(74423)),p=i.n(h),g=i(46898),m=i.n(g),b=i(69937),S=i.n(b),k=i(27183),_=i.n(k),y=i(44236),f=i.n(y),v=i(88846),x=i.n(v),T=i(23902),E=i.n(T);const F=({time:e,tickets_signatures:t})=>({time:e,ticketSigns:t}),C=e=>e.map(F);i(21703);var D=i(59399),j=i(15863),N=i(6436),P=i(58418),$=i(4517);const{SEARCH_RESULTS_MAX_RETRIES:R,SEARCH_RESULTS_RETRY_INTERVAL:U,SEARCH_RESULTS_REQUEST_DELAY:V,SEARCH_RESULTS_V3_PATH:w,SEARCH_RESULTS_V3_1_PATH:M}=l.E.constants,{withClientType:I}=l.E.utils,{withRetryConfig:B,createRequestEffect:A}=N.R.inputs,{$requestContext:W,$searchSession:L,searchFailed:q}=l.E.outputs,O=(0,s.createEvent)({sid:"-ld3ruy"}),z=(0,s.createEvent)({sid:"-6dlm4k"}),G=(0,s.createEvent)({sid:"mmbwg8"}),K=(0,s.createEvent)({sid:"-batvv0"}),H=(0,s.createEvent)({sid:"-2nqdpr"}),J=(0,s.createEvent)({sid:"34wne1"}),Y=(0,s.createEvent)({sid:"ergnyg"}),Q=A({method:"post",url:({data:e})=>`${e.session.resultsHostUrl.includes("://")?"":"https://"}${e.session.resultsHostUrl}${e.resultsPath}`,name:"directScheduleFetchResultsFx",retry:!0,mapParams:({data:e,...t})=>({...t,data:{search_id:e.session.searchId,rnd:(0,P.zO)(),last_update_timestamp:e.session.lastUpdateTimestamp,...e.params}}),modificators:[I,B({retry:R,retryDelay:U,noResponseRetries:R,httpMethodsToRetry:["POST"],backoffType:"static"})],abort:{signal:K}});(0,s.sample)({and:[{clock:O,source:W,target:J}],or:{sid:"-d6kjii"}}),(0,s.sample)({and:[{clock:J,source:{searchSession:L,dynamicFiltersFlag:$.r.outputs.$dynamicFiltersFlag},fn:({searchSession:e,dynamicFiltersFlag:t},i)=>({session:e,params:i,resultsPath:t.enabled?M:w}),target:Y}],or:{sid:"-d2pzcz"}}),(0,s.sample)({and:[{clock:Y,source:L,filter:(e,t)=>{if(!e)return!1;const{searchId:i}=e;return i===t.session.searchId},fn:(e,t)=>({data:{session:e,params:t.params,resultsPath:t.resultsPath}}),target:Q}],or:{sid:"-c56j5y"}}),(0,s.sample)({and:[{clock:Q.doneData,fn:({data:e})=>e,target:G}],or:{sid:"-assmy6"}}),(0,s.withFactory)({sid:"-aoy2sn",fn:()=>(0,D.g)({source:(0,s.sample)({and:[{clock:Q.fail,filter:({error:e})=>304===p()(["response","status"],e),fn:({params:e})=>e.data}],or:{sid:"-uzog0k"}}),timeout:V,target:Y})}),(0,s.sample)({and:[{clock:Q.fail,filter:({error:e})=>(0,s.withFactory)({sid:"bh2m51",fn:()=>(0,j.Ub)(e)})&&304!==p()(["response","status"],e),fn:({error:e,params:t})=>({type:(0,P.NL)(e),error:new Error(e.message),transactionId:t.data.session.transactionId}),target:[q,H]}],or:{sid:"-a7cnt3"}}),(0,s.sample)({and:[{clock:z,source:W,fn:(e,t)=>({...e,required_tickets:t.ticketsSigns}),target:J}],or:{sid:"-9d3z68"}});const Z={inputs:{directScheduleContinueSearch:z,directScheduleGetSearchResults:O,directScheduleAbortSearch:K},outputs:{directScheduleChunksLoaded:G,directScheduleChunksFailed:H},internals:{directScheduleMaybeFetchResults:Y,directScheduleFetchResultsFx:Q}};var X=i(21247),ee=i(85349),te=i(24036),ie=i(43175),se=i(37762),ae=i(91585);const re=(0,s.createEvent)({sid:"j8bu5g"}),le=(0,s.createEvent)({sid:"kdiboj"}),ce=(0,s.createEvent)({sid:"b49e5r"}),ne=(0,s.createEvent)({sid:"1r729y"}),de=(0,s.createEvent)({sid:"5jnsri"}),oe=(0,s.createEvent)({sid:"3hue7a"}),ue=(0,s.createEvent)({sid:"-r24sn2"}),he=(0,s.createEvent)({sid:"ngff8m"}),pe=(0,s.createEvent)({sid:"3343e"}),ge=(0,s.createEvent)({sid:"7czrnp"}),me=(0,s.createEvent)({sid:"lsvrzx"}),be=(0,s.createEvent)({sid:"uwqck4"}),Se=(0,s.createEvent)({sid:"-4xyolq"}),ke=(0,s.createEvent)({sid:"-e24bam"}),_e=(0,s.createEvent)({sid:"-tlidsx"}),ye=(0,s.createEvent)({sid:"-nn4wd9"}),fe=(0,s.createStore)([],{sid:"usowi4"}),ve=(0,s.createStore)([],{sid:"g1ox9g"}),xe=(0,s.createStore)(null,{sid:"-fw6lun"}),Te=(0,s.createStore)(null,{sid:"2teaqv"}),Ee=(0,s.createStore)(null,{sid:"-euakq6"}),Fe=(0,s.createStore)(null,{sid:"4hhhie"}),Ce=$.r.outputs.$directTicketsScheduleInAutosearchModalFlag.map((({enabled:e})=>e)),De=$.r.outputs.$directTicketsScheduleV3Flag.map((({enabled:e})=>e)),je=(0,s.combine)({and:[{tikcetInExpiredSearchEnabled:$.r.outputs.$tikcetInExpiredSearchFlag,isSearchExpired:c.N.outputs.$isSearchExpired},({tikcetInExpiredSearchEnabled:e,isSearchExpired:t})=>e&&t],or:{sid:"6p35yk"}}),Ne=(0,s.combine)({and:[ie.J.outputs.$isSerpInModal,Ce,(e,t)=>!e||t],or:{sid:"mc3vn6"}}),Pe=ae.t.outputs.$usePricePerPassenger.map((e=>e)),$e=o.y.outputs.$currency.map((e=>e)),{$isMultiway:Re,$isOneWay:Ue}=u.s.outputs,Ve=u.s.outputs.$segments.map((e=>e)),we=se.x.outputs.$airlines.map((e=>e)),Me=(0,s.combine)({and:[{isDirectFlightsEnabled:Ne,isMultiway:Re,directFlights:fe},({isDirectFlightsEnabled:e,isMultiway:t,directFlights:i})=>!!e&&!t&&i.length>0],or:{sid:"-sg41gq"}}),Ie=(0,s.combine)({and:[{isDirectFlightsEnabled:Ne,isMultiway:Re,directFlights:ve},({isDirectFlightsEnabled:e,isMultiway:t,directFlights:i})=>!!e&&!t&&i.length>0],or:{sid:"-k32xjb"}}),Be=(0,s.combine)({and:[{isDirectScheduleVisible:Ie,isDirectScheduleV1Visible:Me,isDirectFlightsV3Enabled:De},({isDirectScheduleVisible:e,isDirectScheduleV1Visible:t,isDirectFlightsV3Enabled:i})=>i?e:t],or:{sid:"-gq7woq"}}),Ae=(0,s.combine)({and:[{isDirectFlightsV3Enabled:De,isOneWay:Ue},({isDirectFlightsV3Enabled:e,isOneWay:t})=>Boolean(e&&t)],or:{sid:"-jtgc2t"}}),We=u.s.outputs.$tripDirection.map((e=>e===te.D.OneWay?5:4));(0,s.sample)({and:[{clock:de,target:ve}],or:{sid:"ab7760"}}),(0,s.sample)({and:[{clock:ne,target:fe}],or:{sid:"ady64t"}}),(0,s.sample)({and:[{clock:ce,target:Fe}],or:{sid:"as8tk7"}}),(0,s.sample)({and:[{clock:oe,source:Ae,filter:(e,t)=>Boolean(e&&t.hasException),fn:(e,t)=>t.cheapestTicketSign,target:ue}],or:{sid:"auzsj0"}}),(0,s.sample)({and:[{clock:oe,source:{condition:Ae,isExpiredWithFlagEnabled:je},filter:({condition:e,isExpiredWithFlagEnabled:t},i)=>Boolean(!e||!i.hasException)&&!t,fn:(e,t)=>t,target:he}],or:{sid:"bbhmbu"}}),(0,s.sample)({and:[{source:he,fn:e=>({directFlight:e,ticketSign:e.cheapestTicketSign}),target:(0,s.withFactory)({sid:"8qp5t4",fn:()=>(0,X.h)({directFlight:Te,ticketSign:pe})})}],or:{sid:"bu6mi4"}}),(0,s.sample)({and:[{clock:pe,filter:Boolean,target:Ee}],or:{sid:"mltktp"}}),(0,s.sample)({and:[{clock:ge,target:xe}],or:{sid:"mp4cdv"}}),(0,s.sample)({and:[{clock:ke,source:xe,fn:e=>({selectedTicketSign:e,unavailableTicketShouldBeMapped:e??"",unavailable:null}),target:(0,s.withFactory)({sid:"-kmg5gw",fn:()=>(0,X.h)({selectedTicketSign:pe,unavailableTicketShouldBeMapped:_e,unavailable:ge})})}],or:{sid:"n3ezt9"}}),(0,s.withFactory)({sid:"nn7l69",fn:()=>(0,ee.m)({clock:Se,target:[ve,fe]})}),(0,s.withFactory)({sid:"o1i8ln",fn:()=>(0,ee.m)({clock:ye,target:xe})}),(0,s.withFactory)({sid:"o497kg",fn:()=>(0,ee.m)({clock:me,target:[Te,Fe]})}),(0,s.withFactory)({sid:"oijuzu",fn:()=>(0,ee.m)({clock:be,target:Ee})});const Le={directFlightClicked:oe,directFlightsV1Updated:ne,directFlightsUpdated:de,selectedTicketSignUpdated:pe,selectedDirectFlightReset:me,selectedTicketSignReset:be,selectedUnavailableTicketSignUpdated:ge,unavailableTicketSignSubmitted:ke,unavailableTicketSignCanceled:ye,directFlightsReset:Se,directScheduleChunkUpdated:ce,visibleUpdated:re,significantUpdated:le,shouldOpenTicketModal:he,shouldScrollToTicketPreview:ue},qe={$isDirectFlightsV3Enabled:De,$isDirectFlightsEnabled:Ne,$directFlightsV1:fe,$directFlights:ve,$selectedDirectFlight:Te,$selectedTicketSign:Ee,$selectedUnavailableTicketSign:xe,$isPricePerPassengerEnabled:Pe,$currency:$e,$isOneWay:Ue,$segments:Ve,$airlines:we,$isDirectScheduleV1Visible:Me,$isDirectScheduleVisible:Ie,$isDirectScheduleShouldBeShown:Be,$directScheduleChunkDto:Fe,unavailableTicketShouldBeMapped:_e,$isExpiredWithFlagEnabled:je,$visibleFlightsCount:We};(0,s.sample)({and:[{source:l.E.outputs.resultChunksLoaded,fn:([e])=>(e=>e.direct_flights.map((({carriers:e,carrier:t,schedule:i,cheapest_ticket:s})=>{const a=i.map(C),r=(l=i,m()([E(),x()("tickets_signatures"),E(),f()])(l));var l;return{version:1,carrier:t,carriers:e,schedule:a,cheapestTicketSign:s.signature,cheapestTicketPrice:m()([p()(["proposals"]),S(),_()(null,["price","value"])])(s),cheapestTicketPricePerPerson:m()([p()(["proposals"]),S(),_()(null,["price_per_person","value"])])(s),ticketsSigns:r,hasException:!1}})))(e),target:Le.directFlightsV1Updated}],or:{sid:"-ep7ltx"}}),(0,s.sample)({and:[{source:l.E.outputs.resultChunksLoaded,fn:([e])=>(e=>e.direct_flights_v2.map((({airlines:e,schedule:t,cheapest_ticket:i,group_key:s,exception_message:a})=>{const r=i.signature,l=m()([p()(["proposals"]),S(),_()(null,["price","value"])])(i),c=m()([p()(["proposals"]),S(),_()(null,["price_per_person","value"])])(i),n=`${r}|${t?.departure?.length}|${t?.returns&&t?.returns?.length}|${s}`,d={schedule:{departure:t?.departure,returns:t?.returns}},o=(u=i.tags)?u.includes("all_way_by_train")?"train":u.includes("all_way_by_bus")?"bus":"plane":"plane";var u;return{version:2,signature:n,groupKey:s,carrier:e[0],carriers:e,cheapestTicketSign:r,cheapestTicketPrice:l,cheapestTicketPricePerPerson:c,exceptionMessage:a,transportType:o,hasException:Boolean(a),ticketsSigns:[],...d}})))(e),target:Le.directFlightsUpdated}],or:{sid:"-elwu9r"}}),(0,s.sample)({and:[{source:l.E.inputs.startSearch,target:Le.directFlightsReset}],or:{sid:"-e72e90"}}),(0,s.sample)({and:[{clock:Le.shouldOpenTicketModal,filter:(0,s.withFactory)({sid:"kf58dn",fn:()=>(0,a.x)((0,s.withFactory)({sid:"8lqqp9",fn:()=>(0,r.f)(c.N.outputs.$isSearchExpired)}),(0,s.withFactory)({sid:"8majam",fn:()=>(0,r.f)(qe.$isDirectFlightsV3Enabled)}))}),fn:e=>({ticketsSigns:e.ticketsSigns}),target:Z.inputs.directScheduleContinueSearch}],or:{sid:"-dsrqtm"}}),(0,s.sample)({and:[{clock:Z.outputs.directScheduleChunksLoaded,fn:e=>{const[t]=e.filter((({chunk_id:e})=>"results"===e));return t},target:Le.directScheduleChunkUpdated}],or:{sid:"-d6rz36"}}),(0,s.sample)({and:[{clock:Le.shouldScrollToTicketPreview,target:n.o.inputs.scrollToTicketPreview}],or:{sid:"-cd331o"}}),(0,s.sample)({and:[{clock:qe.unavailableTicketShouldBeMapped,source:{commonDeeplinkParams:n.o.outputs.$commonDeeplinkParams,localTicketCollection:n.o.outputs.$ticketCollection,localProposalCollection:n.o.outputs.$proposalCollection,localTicketProposalCollection:n.o.outputs.$ticketProposalCollection,localTicketSignatures:n.o.outputs.$ticketSignatures,currency:o.y.outputs.$currency,chunkDto:qe.$directScheduleChunkDto,isDirectFlightsV3Enabled:qe.$isDirectFlightsV3Enabled,passengers:u.s.outputs.$passengers},filter:({chunkDto:e,isDirectFlightsV3Enabled:t})=>Boolean(e)&&!t,fn:({commonDeeplinkParams:e,currency:t,localTicketCollection:i,localProposalCollection:s,localTicketProposalCollection:a,chunkDto:r,localTicketSignatures:l,passengers:c},n)=>(0,d.g)({commonDeeplinkParams:e,chunkDto:r,localTicketCollection:i,localProposalCollection:s,localTicketProposalCollection:a,localTicketSignatures:l,currency:t,directScheduleTicketSign:n,passengers:c}),target:n.o.inputs.ticketsDataUpdatedFromDirectSchedule}],or:{sid:"-bvho24"}});var Oe=i(23588),ze=i(72264);(0,s.sample)({and:[{source:qe.$selectedDirectFlight,filter:Boolean,target:Oe.z.inputs.directScheduleUpdatedFx}],or:{sid:"1n5wdp"}}),(0,s.sample)({and:[{source:qe.$isDirectScheduleV1Visible,target:Oe.z.inputs.directScheduleVisibilityChangedFx}],or:{sid:"220ceg"}}),(0,s.sample)({and:[{source:qe.$isDirectScheduleVisible,target:Oe.z.inputs.directScheduleVisibilityChangedFx}],or:{sid:"24rbd9"}}),(0,s.sample)({and:[{clock:Oe.z.outputs.ticketPopupClosed,source:qe.$selectedDirectFlight,filter:Boolean,fn:e=>e.ticketsSigns,target:[ze.L.inputs.requiredTicketsRemoved,Z.inputs.directScheduleAbortSearch]}],or:{sid:"2j1ysn"}}),(0,s.sample)({and:[{clock:Oe.z.outputs.ticketPopupClosed,source:qe.$selectedDirectFlight,filter:Boolean,target:[Le.selectedDirectFlightReset,Le.selectedTicketSignReset]}],or:{sid:"30nds7"}}),(0,s.sample)({and:[{source:Oe.z.outputs.ticketPopupClosed,target:[Oe.z.inputs.directScheduleResetFx,Oe.z.inputs.directScheduleTicketResetFx]}],or:{sid:"3g1meb"}}),(0,s.sample)({and:[{source:Oe.z.outputs.directScheduleTicketClicked,filter:(0,s.withFactory)({sid:"hu7tt",fn:()=>(0,r.f)(qe.$isDirectFlightsV3Enabled)}),target:Le.selectedTicketSignUpdated}],or:{sid:"3kfz57"}}),(0,s.sample)({and:[{clock:Oe.z.outputs.directScheduleTicketClicked,source:{commonDeeplinkParams:n.o.outputs.$commonDeeplinkParams,localTicketCollection:n.o.outputs.$ticketCollection,localProposalCollection:n.o.outputs.$proposalCollection,localTicketProposalCollection:n.o.outputs.$ticketProposalCollection,localTicketSignatures:n.o.outputs.$ticketSignatures,currency:o.y.outputs.$currency,chunkDto:qe.$directScheduleChunkDto,isDirectFlightsV3Enabled:qe.$isDirectFlightsV3Enabled,passengers:u.s.outputs.$passengers},filter:({chunkDto:e,isDirectFlightsV3Enabled:t})=>Boolean(e)&&!t,fn:({commonDeeplinkParams:e,currency:t,localTicketCollection:i,localProposalCollection:s,localTicketProposalCollection:a,chunkDto:r,localTicketSignatures:l,passengers:c},n)=>(0,d.g)({commonDeeplinkParams:e,chunkDto:r,localTicketCollection:i,localProposalCollection:s,localTicketProposalCollection:a,localTicketSignatures:l,currency:t,directScheduleTicketSign:n,passengers:c}),target:n.o.inputs.ticketsDataUpdatedFromDirectSchedule}],or:{sid:"4e4v6p"}}),(0,s.sample)({and:[{source:Oe.z.outputs.directScheduleTicketUnavailableClicked,filter:(0,s.withFactory)({sid:"-qapuk6",fn:()=>(0,r.f)(qe.$isDirectFlightsV3Enabled)}),target:Le.selectedUnavailableTicketSignUpdated}],or:{sid:"-m9gg26"}}),(0,s.sample)({and:[{clock:qe.$selectedTicketSign,source:qe.$isDirectFlightsV3Enabled,filter:(e,t)=>Boolean(t&&!e),fn:(e,t)=>t,target:Oe.z.inputs.directScheduleTicketUpdatedFx}],or:{sid:"-lum01f"}}),(0,s.sample)({and:[{clock:Z.inputs.directScheduleContinueSearch,target:Oe.z.inputs.directScheduleFlightRequestStartedFx}],or:{sid:"-le468l"}}),(0,s.sample)({and:[{clock:Z.outputs.directScheduleChunksLoaded,target:Oe.z.inputs.directScheduleSearchChunksLoadedFx}],or:{sid:"-lbd79s"}});var Ge=i(4190),Ke=i(85089),He=i(67294),Je=i(47166),Ye=i.n(Je),Qe=i(28225),Ze=i(65068),Xe=i.n(Ze),et=i(49963),tt=i(44619),it=i(39535),st=i(1156),at=i(97650),rt=i(66656),lt=i(38694),ct=i(80871),nt=i(34611),dt=i(1945),ot=i(85893);const ut=Ye().bind({"carriers-logo":"s__FpQ8gelVLhHfy1vOT2mQ","overlayed-logos":"s__ZROkOwoU1RFeLkxFy9eQ","carrier-logo":"s__H_lVKTm1LNvr40aQgYvJ","carriers-amount":"s__KOhmVJ5f1jQBoq92NTD3","carriers-text":"s__N6JVZk2cLJ2mJ3D0Y6zk",icon:"s__sdrI_TTgjSTuqiRsIvin"}),ht=(0,He.memo)((({carriers:e,getAirlineName:t,isOneWay:i,exceptionMessage:s,iconSlot:a})=>{const r=e.length>2;return(0,ot.jsxs)(ot.Fragment,{children:[(0,ot.jsxs)("div",{className:ut("carriers-logo",{"overlayed-logos":!i&&!s||e.length>1}),children:[r&&(0,ot.jsxs)(ot.Fragment,{children:[(0,ot.jsx)(nt.p,{className:ut("carrier-logo"),marketingCarrierIata:e[0],marketingCarrierName:e[0],size:dt.R.Xsmall}),(0,ot.jsxs)(et.x,{className:ut("carrier-logo","carriers-amount"),type:tt.y.FootnoteRegular,truncateMode:tt.k.SingleLine,children:["+",e.length-1]})]}),!r&&e.map((e=>(0,ot.jsx)(nt.p,{className:ut("carrier-logo"),marketingCarrierIata:e,marketingCarrierName:e,size:dt.R.Xsmall},e)))]}),(0,ot.jsx)(et.x,{className:ut("carriers-text"),type:tt.y.Body3Semi,truncateMode:tt.k.SingleLine,children:e.map((e=>t(e))).join(", ")}),(0,ot.jsx)("div",{className:ut("icon"),children:a})]})}));ht.displayName="DirectScheduleCarriers";var pt=i(62221),gt=i(86523),mt=i(41609),bt=i.n(mt);const St=Ye().bind({"schedule-cell":"s__srFqcMUkueCoGCfut5yJ"}),kt=(0,He.memo)((({datetime:e})=>{const t=(0,gt.d)("ts_time");return(0,ot.jsx)("td",{className:St("schedule-cell"),children:(0,ot.jsx)(et.x,{type:tt.y.Body3Regular,children:t(new Date(e))})})}));kt.displayName="DirectScheduleCell";const _t=Ye().bind({schedule:"s__kUvsdLAtt5cWNLd1ZBbw","left-gradient":"s__w5Ta3eWG7eCad5ql4U2R","right-gradient":"s__SntjRyR3agTZ7ASKNrWF","schedule-inner":"s__P2tsnRu95_aViTz46xxp","is-touch-device":"s__lfuVNHGgkuGG_9CMxxPo","schedule-table":"s__Wt2N2bc5d0UKE3bpsGL9"}),yt=(0,He.memo)((({scheduleRef:e,tableRef:t,gradients:i,isScrollable:s,schedule:a,handleScroll:r})=>{const l=(0,rt.Wm)();return a?(0,ot.jsx)("div",{className:_t("schedule",{"left-gradient":i.left,"right-gradient":i.right}),children:(0,ot.jsx)("div",{className:_t("schedule-inner",{"is-touch-device":l}),ref:e,onScroll:l&&s?r:void 0,children:(0,ot.jsx)("table",{className:_t("schedule-table"),ref:t,children:(0,ot.jsxs)("tbody",{children:[a.departure&&!bt()(a.departure)&&(0,ot.jsx)("tr",{children:a.departure.map((({datetime:e})=>(0,ot.jsx)(kt,{datetime:e},e)))}),a.returns&&!bt()(a.returns)&&(0,ot.jsx)("tr",{children:a.returns.map((({datetime:e})=>(0,ot.jsx)(kt,{datetime:e},e)))})]})})})}):null}));yt.displayName="DirectScheduleTable";const ft=Ye().bind({content:"s__aCMPmeOffGI4jDsn6OcF","round-trip":"s__Lur4xQPs561cpafseldg",exception:"s__sIkkd82e9_eZyfeDN4_m","multiple-carriers":"s__jferztK3UIOcubRHUl01",dates:"s__tIdGxQCHD4ZLsaeEjDqM"}),vt=(0,He.memo)((({segmentsDates:e,isOneWay:t,scheduleRef:i,tableRef:s,gradients:a,isScrollable:r,carriers:l,schedule:c,exceptionMessage:n,handleScroll:d})=>{const o=(0,gt.d)("ts_day_month_short"),u=ft("content",{"round-trip":!t,"multiple-carriers":l.length>1});return n?(0,ot.jsx)("div",{className:ft("content","exception",{"multiple-carriers":l.length>1}),children:(0,ot.jsx)(et.x,{type:tt.y.Body3Regular,children:n})}):(0,ot.jsxs)("div",{className:u,children:[!t&&(0,ot.jsx)("div",{className:ft("dates"),children:e.map(((e,t)=>(0,ot.jsx)(et.x,{className:ft("date"),type:tt.y.Body3Regular,children:o(new Date(e))},`${e}-${t}`)))}),(0,ot.jsx)(yt,{scheduleRef:i,tableRef:s,gradients:a,isScrollable:r,schedule:c,handleScroll:d})]})}));vt.displayName="DirectScheduleContent";var xt=i(83936),Tt=i(2450),Et={};const Ft=(0,He.memo)((({type:e})=>{const{t:t}=(0,Qe.useTranslation)("service_serp_direct_flights"),i="bus"===(s=e)?Tt.c.Fog:"train"===s?Tt.c.Red:null;var s;return i?(0,ot.jsx)("div",{className:Et.root,children:(0,ot.jsx)(xt.Z,{colorType:i,className:Et.label,children:(0,ot.jsx)(et.x,{type:tt.y.CaptionSemi,children:t(`transportType.${e}`)})})}):null}));Ft.displayName="DirectScheduleCarrierLabel";const Ct=Ye().bind({root:"s__tZD30olWaXhpjPxHv4Sy",header:"s__PqNeatB6a0ylYF0ajdnd",price:"s__e8oBaCLk4a6LbYLVZpL1",chevron:"s__F3xY9AbjQ1Wwaw5nHv4t",content:"s__HQodGKrgnnuAujyqBb8f","round-trip":"s__DbW63fuoypp_k7dg2bvD",dates:"s__i64UOsJnTohS0HVUn6kQ","mousemove-area":"s__o84q6ztRlsAiqIFmJIDc","is-touch-device":"s___mdv7iJrFp_RFLlbXQMq"}),Dt=(0,He.memo)((({flight:e,getAirlineName:t,currency:i,isOneWay:s,segmentsDates:a,position:r,onFlightClick:l,directScheduleWidgetItemInView:c,directScheduleWidgetItemSignificantUpdate:n,isPricePerPassengerEnabled:d})=>{const o=(0,rt.Wm)(),{carriers:u,cheapestTicketPrice:h,cheapestTicketPricePerPerson:p,schedule:g,exceptionMessage:m,signature:b,transportType:S}=e,k=d?p:h,{scheduleRef:_,tableRef:y,gradients:f,isScrollable:v,handleMouseMove:x,handleMouseLeave:T,handleScroll:E}=(()=>{const[e,t]=(0,He.useState)(!1),[i,s]=(0,He.useState)({left:!1,right:!1}),{ref:a,width:r}=(0,pt.y)(),{ref:l,width:c}=(0,pt.y)(),n=(0,He.useCallback)((e=>{e.left===i.left&&e.right===i.right||s(e)}),[i.left,i.right]);(0,He.useEffect)((()=>{const e=r<c;t(e),e&&n({...i,right:!0})}),[i,r,n,c]);const d=(0,He.useCallback)((t=>{if(!e||!l.current)return;const i=t.currentTarget,s=i.offsetWidth,a=t.clientX-i.getBoundingClientRect().left;if(a<0)return;const d=Math.abs(c-r),o=d/(s-r/100*10),u=Math.min(a*o,d+20);l.current.style.transform=`translateX(-${u}px)`,n({left:!0,right:u<=d})}),[e,l,c,r,n]),o=(0,He.useCallback)((()=>{l.current&&(l.current.style.transform="translateX(0)",n({left:!1,right:e}))}),[e,n,l]),u=(0,He.useCallback)((e=>{const t=e.currentTarget,i=Math.abs(c-r),s={left:t.scrollLeft>0,right:t.scrollLeft<i};n(s)}),[n,c,r]);return{scheduleRef:a,tableRef:l,gradients:i,isScrollable:e,handleMouseMove:d,handleMouseLeave:o,handleScroll:u}})(),F=(0,He.useCallback)((t=>{t.preventDefault(),l?.(e)}),[e,l]),{handleEnter:C,handleExit:D}=((e,t,i,s)=>{const a=(0,He.useRef)(!1),[r,l]=(0,He.useState)(null),c=(0,He.useCallback)((()=>{l(!0)}),[]),n=(0,He.useCallback)((()=>{l(!1)}),[]);return(0,He.useEffect)((()=>{null!==r&&r!==a.current&&(a.current=r,t&&t({flight:e,visible:r,hash:i,position:s}))}),[r,e,i,s]),{handleEnter:c,handleExit:n}})(e,c,b,r);((e,t,i,s)=>{const a=(0,He.useRef)();(0,He.useEffect)((()=>{i!==a.current&&(a.current=i,t&&t({flight:e,hash:i,position:s}))}),[e,i,s])})(e,n,b,r);const[j]=(0,at.YD)({threshold:1,onChange:e=>e?C():D()});return(0,ot.jsxs)("div",{ref:j,className:Ct("root"),onClick:F,children:[(0,ot.jsxs)("div",{className:Ct("header"),children:[(0,ot.jsx)(ht,{exceptionMessage:m,carriers:u,getAirlineName:t,isOneWay:s,iconSlot:(0,ot.jsx)(Ft,{type:S})}),k&&(0,ot.jsxs)(et.x,{type:tt.y.Body3Semi,className:Ct("price"),children:[(0,ot.jsx)(lt.t,{value:k,currency:i,roundingMode:"ceil"}),(0,ot.jsx)(ct.i,{className:Ct("chevron")})]})]}),(0,ot.jsx)(vt,{exceptionMessage:m,isOneWay:s,segmentsDates:a,scheduleRef:_,tableRef:y,gradients:f,isScrollable:v,schedule:g,handleScroll:E,carriers:u}),!o&&v&&(0,ot.jsx)("div",{className:Ct("mousemove-area",{"round-trip":!s,"is-touch-device":o}),onMouseMove:x,onMouseLeave:T})]})}));Dt.displayName="DirectScheduleGroup";const jt=Ye().bind({root:"s__M3jGOy0rHZt6U7wdqxhA",title:"s__WUGiMr6rGjTRrPBaSUoR",button:"s__dchIa6_A2KiNxbptEpB8"}),Nt=(0,He.memo)((({flights:e,getAirlineName:t,currency:i,isOneWay:s,segmentsDates:a,onFlightClick:r,directScheduleWidgetItemInView:l,directScheduleWidgetItemSignificantUpdate:c,isPricePerPassengerEnabled:n,initiallyVisibleGroups:d})=>{const{t:o}=(0,Qe.useTranslation)("service_direct_flights"),[u,h]=(0,He.useState)(!1),p=(0,He.useCallback)((()=>{h(!u)}),[u]),g=u?e.length:d,m=Xe()(g,e);return(0,ot.jsxs)("div",{className:jt("root"),"data-test-id":"direct-tickets-schedule-container",children:[(0,ot.jsx)(et.x,{className:jt("title"),type:tt.y.Body1Bold,children:o("title")}),(0,ot.jsx)("div",{children:m.map(((e,d)=>(0,ot.jsx)(Dt,{flight:e,onFlightClick:r,getAirlineName:t,currency:i,isOneWay:s,segmentsDates:a,position:d+1,directScheduleWidgetItemInView:l,directScheduleWidgetItemSignificantUpdate:c,isPricePerPassengerEnabled:n},e.signature)))}),e.length>d&&(0,ot.jsx)(st.z,{priority:it.Ji.Tertiary,mod:it.Ly.Custom,className:jt("button"),size:it.qE.M,onClick:p,children:(0,ot.jsx)(et.x,{type:tt.y.Body2Semi,children:o(u?"button.rollUp":"button.showAll")})})]})}));Nt.displayName="DirectSchedule";const Pt=({initiallyVisibleGroups:e})=>{const{directFlights:t,isPricePerPassengerEnabled:i,currency:s,isOneWay:a,segments:r,airlines:l,isDirectScheduleVisible:c}=(0,Ge.useUnit)({directFlights:qe.$directFlights,selectedUnavailableTicketSign:qe.$selectedUnavailableTicketSign,isPricePerPassengerEnabled:qe.$isPricePerPassengerEnabled,currency:qe.$currency,isOneWay:qe.$isOneWay,segments:qe.$segments,airlines:qe.$airlines,isDirectScheduleVisible:qe.$isDirectScheduleVisible}),{handleDirectFlightClick:n,handleVisibleChange:d,handleSignificantChange:o}=(0,Ge.useUnit)({handleDirectFlightClick:Le.directFlightClicked,handleSubmittedUnavailableTime:Le.unavailableTicketSignSubmitted,handleCanceledUnavailableTime:Le.unavailableTicketSignCanceled,handleVisibleChange:Le.visibleUpdated,handleSignificantChange:Le.significantUpdated}),u=x()("date",r);return c?(0,ot.jsxs)(ot.Fragment,{children:[(0,ot.jsx)(Nt,{flights:t,getAirlineName:e=>l[e]?.name||e,currency:s,isOneWay:a,segmentsDates:u,onFlightClick:n,directScheduleWidgetItemInView:d,directScheduleWidgetItemSignificantUpdate:o,isPricePerPassengerEnabled:i,initiallyVisibleGroups:e}),(0,ot.jsx)(Ke.Q,{})]}):null},$t=Ye().bind({"schedule-cell":"s__y_eyBSwSAPd6ONNx76Z3"}),Rt=(0,He.memo)((({date:e})=>{const t=(e=>{const t=new Date(`1970-01-01T${e}:00`);return(0,gt.d)("ts_time")(t)})(e.time);return(0,ot.jsx)("td",{className:$t("schedule-cell"),children:(0,ot.jsx)(et.x,{type:tt.y.Body3Regular,children:t})})}));Rt.displayName="DirectScheduleCell";const Ut=Ye().bind({schedule:"s__lKB4ac3LCPQrQ2P18ztt","left-gradient":"s__LNiSjRaHkFFNJv7TZgGO","right-gradient":"s__LlGi9QgDeH8i59EI1qqg","schedule-inner":"s__r9mmU3WNiYJP7I7UNsS2","is-touch-device":"s__OpQNNO4F1wIB16jBFGKR","schedule-table":"s__N5GH8i6TK3iyd3bAN7Ti"}),Vt=(0,He.memo)((({scheduleRef:e,tableRef:t,gradients:i,isScrollable:s,schedule:a,handleScroll:r})=>{const l=(0,rt.Wm)();return(0,ot.jsx)("div",{className:Ut("schedule",{"left-gradient":i.left,"right-gradient":i.right}),children:(0,ot.jsx)("div",{className:Ut("schedule-inner",{"is-touch-device":l}),ref:e,onScroll:l&&s?r:void 0,children:(0,ot.jsx)("table",{className:Ut("schedule-table"),ref:t,children:(0,ot.jsx)("tbody",{children:a.map(((e,t)=>(0,ot.jsx)("tr",{children:e.map((e=>(0,ot.jsx)(Rt,{date:e},e.time)))},t)))})})})})}));Vt.displayName="DirectScheduleTable";const wt=Ye().bind({"carriers-logo":"s__rDIiVEtZ9tP9asVaJVn8","round-trip":"s__bIlAVjp7UtSPGUr19siU","carrier-logo":"s__ukKl7t9nK4L12SQJVS3p","carriers-text":"s__bv9SLJMgrhfHSZh5XYxL"}),Mt=(0,He.memo)((({carriers:e,getAirlineName:t,isOneWay:i})=>(0,ot.jsxs)(ot.Fragment,{children:[(0,ot.jsx)("div",{className:wt("carriers-logo",{"round-trip":!i}),children:e.map((e=>(0,ot.jsx)(nt.p,{className:wt("carrier-logo"),marketingCarrierIata:e,marketingCarrierName:e,size:dt.R.Xsmall},e)))}),(0,ot.jsx)(et.x,{className:wt("carriers-text"),type:tt.y.Body3Semi,truncateMode:tt.k.SingleLine,children:e.map((e=>t(e))).join(", ")})]})));Mt.displayName="DirectScheduleCarriers";const It=Ye().bind({root:"s__O7PNfptbZlxMTETI4e0m",header:"s__oif4F8qyqmYpSY1lFnyV",price:"s__MNylS4ztWhnZt2vMbBLq",chevron:"s__IUPdmp2_kVoRscJnywNJ",content:"s__tcxfDPjQjujmBqSibZKx","round-trip":"s__V0XWlfhQ3kJ3ymaX70Bg",dates:"s__oQidgPShbVhotTZBevgI","mousemove-area":"s__qAS_eJkgGWfLtvNtrmO4","is-touch-device":"s__Xfc4SLjo4uQ2T7g9IMNg"}),Bt=(0,He.memo)((({flight:e,getAirlineName:t,currency:i,isOneWay:s,segmentsDates:a,position:r,onFlightClick:l,directScheduleWidgetItemInView:c,directScheduleWidgetItemSignificantUpdate:n,isPricePerPassengerEnabled:d})=>{const o=(0,rt.Wm)(),u=(0,gt.d)("ts_day_month_short"),{carriers:h,cheapestTicketPrice:p,cheapestTicketPricePerPerson:g,schedule:m,cheapestTicketSign:b}=e,S=d?g:p,k=`${b}|${m[0].length}|${m[1]&&m[1].length}`,{scheduleRef:_,tableRef:y,gradients:f,isScrollable:v,handleMouseMove:x,handleMouseLeave:T,handleScroll:E}=(()=>{const[e,t]=(0,He.useState)(!1),[i,s]=(0,He.useState)({left:!1,right:!1}),{ref:a,width:r}=(0,pt.y)(),{ref:l,width:c}=(0,pt.y)(),n=(0,He.useCallback)((e=>{e.left===i.left&&e.right===i.right||s(e)}),[i.left,i.right]);(0,He.useEffect)((()=>{const e=r<c;t(e),e&&n({...i,right:!0})}),[i,r,n,c]);const d=(0,He.useCallback)((t=>{if(!e||!l.current)return;const i=t.currentTarget,s=i.offsetWidth,a=t.clientX-i.getBoundingClientRect().left;if(a<0)return;const d=Math.abs(c-r),o=d/(s-r/100*10),u=Math.min(a*o,d+20);l.current.style.transform=`translateX(-${u}px)`,n({left:!0,right:u<=d})}),[e,l,c,r,n]),o=(0,He.useCallback)((()=>{l.current&&(l.current.style.transform="translateX(0)",n({left:!1,right:e}))}),[e,n,l]),u=(0,He.useCallback)((e=>{const t=e.currentTarget,i=Math.abs(c-r),s={left:t.scrollLeft>0,right:t.scrollLeft<i};n(s)}),[n,c,r]);return{scheduleRef:a,tableRef:l,gradients:i,isScrollable:e,handleMouseMove:d,handleMouseLeave:o,handleScroll:u}})(),F=(0,He.useCallback)((t=>{t.preventDefault(),l?.(e)}),[e,l]),{handleEnter:C,handleExit:D}=((e,t,i,s)=>{const a=(0,He.useRef)(!1),[r,l]=(0,He.useState)(null),c=(0,He.useCallback)((()=>{l(!0)}),[]),n=(0,He.useCallback)((()=>{l(!1)}),[]);return(0,He.useEffect)((()=>{null!==r&&r!==a.current&&(a.current=r,t&&t({flight:e,visible:r,hash:i,position:s}))}),[r,e,i,s]),{handleEnter:c,handleExit:n}})(e,c,k,r);((e,t,i,s)=>{const a=(0,He.useRef)();(0,He.useEffect)((()=>{i!==a.current&&(a.current=i,t&&t({flight:e,hash:i,position:s}))}),[e,i,s])})(e,n,k,r);const[j]=(0,at.YD)({threshold:1,onChange:e=>e?C():D()});return(0,ot.jsxs)("div",{ref:j,className:It("root"),onClick:F,children:[(0,ot.jsxs)("div",{className:It("header"),children:[(0,ot.jsx)(Mt,{carriers:h,getAirlineName:t,isOneWay:s}),S&&(0,ot.jsxs)(et.x,{type:tt.y.Body3Semi,className:It("price"),children:[(0,ot.jsx)(lt.t,{value:S,currency:i}),(0,ot.jsx)(ct.i,{className:It("chevron")})]})]}),(0,ot.jsxs)("div",{className:It("content",{"round-trip":!s}),children:[!s&&(0,ot.jsx)("div",{className:It("dates"),children:a.map((e=>(0,ot.jsx)(et.x,{className:It("date"),type:tt.y.Body3Regular,children:u(new Date(e))},e)))}),(0,ot.jsx)(Vt,{scheduleRef:_,tableRef:y,gradients:f,isScrollable:v,schedule:m,handleScroll:E})]}),!o&&v&&(0,ot.jsx)("div",{className:It("mousemove-area",{"round-trip":!s,"is-touch-device":o}),onMouseMove:x,onMouseLeave:T})]})}));Bt.displayName="DirectScheduleGroup";const At=Ye().bind({root:"s__ssmvVWKSybMb_tSZbSAV",title:"s__sR3DsbNCooeBd7cSmjOw",button:"s__KxyGowWvYGo9nN5J6P0d"}),Wt=(0,He.memo)((({flights:e,getAirlineName:t,currency:i,isOneWay:s,segmentsDates:a,onFlightClick:r,directScheduleWidgetItemInView:l,directScheduleWidgetItemSignificantUpdate:c,isPricePerPassengerEnabled:n,initiallyVisibleGroups:d})=>{const{t:o}=(0,Qe.useTranslation)("service_direct_flights"),[u,h]=(0,He.useState)(!1),p=(0,He.useCallback)((()=>{h(!u)}),[u]),g=u?e.length:d,m=Xe()(g,e);return(0,ot.jsxs)("div",{className:At("root"),"data-test-id":"direct-tickets-schedule-container",children:[(0,ot.jsx)(et.x,{className:At("title"),type:tt.y.Body1Bold,children:o("title")}),(0,ot.jsx)("div",{children:m.map(((e,d)=>(0,ot.jsx)(Bt,{flight:e,onFlightClick:r,getAirlineName:t,currency:i,isOneWay:s,segmentsDates:a,position:d+1,directScheduleWidgetItemInView:l,directScheduleWidgetItemSignificantUpdate:c,isPricePerPassengerEnabled:n},e.carrier)))}),e.length>d&&(0,ot.jsx)(st.z,{priority:it.Ji.Tertiary,mod:it.Ly.Custom,className:At("button"),size:it.qE.M,onClick:p,children:(0,ot.jsx)(et.x,{type:tt.y.Body2Semi,children:o(u?"button.rollUp":"button.showAll")})})]})}));Wt.displayName="DirectSchedule";var Lt=i(33622);const qt=Ye().bind({root:"s__LNPp01uURuhj5_vGW487","text-wrapper":"s__VrisodCXrRbMKPSf_A8I",description:"s__HbJuaJbNJ1F9TWS0qU4d","action-wrapper":"s__BwkFlvUga_fvkW3hIwY7","submit-button":"s__sbVcdhjaYbqBht2frkBp"}),Ot=(0,He.memo)((({visible:e,onSubmit:t,onCancel:i})=>{const{t:s}=(0,Qe.useTranslation)("service_serp_direct_flights");return(0,ot.jsx)(Lt.V,{visible:e,noAutoFocus:!0,children:(0,ot.jsxs)("div",{className:qt("root"),children:[(0,ot.jsxs)("div",{className:qt("text-wrapper"),children:[(0,ot.jsx)(et.x,{type:tt.y.Body1Bold,children:s("unavailableDialog.title")}),(0,ot.jsx)(et.x,{type:tt.y.Body2Regular,className:qt("description"),children:s("unavailableDialog.description")})]}),(0,ot.jsxs)("div",{className:qt("action-wrapper"),children:[(0,ot.jsx)(st.z,{onClick:i,priority:it.Ji.Secondary,children:s("unavailableDialog.cancelButton")}),(0,ot.jsx)(st.z,{onClick:t,className:qt("submit-button"),children:s("unavailableDialog.submitButton")})]})]})})}));Ot.displayName="UnavailableTimeDialog";const zt=({initiallyVisibleGroups:e})=>{const{directFlights:t,selectedUnavailableTicketSign:i,isPricePerPassengerEnabled:s,currency:a,isOneWay:r,segments:l,airlines:c,isDirectScheduleVisible:n}=(0,Ge.useUnit)({directFlights:qe.$directFlightsV1,selectedUnavailableTicketSign:qe.$selectedUnavailableTicketSign,isPricePerPassengerEnabled:qe.$isPricePerPassengerEnabled,currency:qe.$currency,isOneWay:qe.$isOneWay,segments:qe.$segments,airlines:qe.$airlines,isDirectScheduleVisible:qe.$isDirectScheduleV1Visible}),{handleDirectFlightClick:d,handleSubmittedUnavailableTime:o,handleCanceledUnavailableTime:u,handleVisibleChange:h,handleSignificantChange:p}=(0,Ge.useUnit)({handleDirectFlightClick:Le.directFlightClicked,handleSubmittedUnavailableTime:Le.unavailableTicketSignSubmitted,handleCanceledUnavailableTime:Le.unavailableTicketSignCanceled,handleVisibleChange:Le.visibleUpdated,handleSignificantChange:Le.significantUpdated}),g=Boolean(i),m=x()("date",l);return n?(0,ot.jsxs)(ot.Fragment,{children:[(0,ot.jsx)(Wt,{flights:t,getAirlineName:e=>c[e]?.name||e,currency:a,isOneWay:r,segmentsDates:m,onFlightClick:d,directScheduleWidgetItemInView:h,directScheduleWidgetItemSignificantUpdate:p,isPricePerPassengerEnabled:s,initiallyVisibleGroups:e}),(0,ot.jsx)(Ot,{visible:g,onSubmit:o,onCancel:u})]}):null};zt.displayName="DirectScheduleContainerV1";const Gt={DirectScheduleResolver:()=>{const{isDirectFlightsV3Enabled:e,visibleFlightsCount:t}=(0,Ge.useUnit)({isOneWay:qe.$isOneWay,isDirectFlightsV3Enabled:qe.$isDirectFlightsV3Enabled,visibleFlightsCount:qe.$visibleFlightsCount});return e?(0,ot.jsx)(Pt,{initiallyVisibleGroups:t}):(0,ot.jsx)(zt,{initiallyVisibleGroups:t})}},Kt={inputs:{...Le,...Z.inputs},outputs:{...qe,...Z.outputs},internals:Z.internals,containers:Gt}},72264:function(e,t,i){"use strict";i.d(t,{L:function(){return x}});var s=i(98116),a=i(31438),r=i(28258),l=i(27497),c=i(44236),n=i.n(c),d=i(11255),o=i.n(d),u=i(46898),h=i.n(u),p=i(73700),g=i.n(p);const m=(0,s.createDomain)("required_tickets",{sid:"wu6msz"}),b=m.createEvent({sid:"-xgo1pq"}),S=m.createEvent({sid:"mkjfy6"}),k=m.createEvent({sid:"-80r79d"}),_=m.createStore([],{sid:"-jc0nve"}).reset(k);(0,s.sample)({and:[{clock:b,source:_,fn:(e,t)=>h()(o()(e),n())(t.tickets),target:_}],or:{sid:"i4xz1o"}}),(0,s.sample)({and:[{clock:S,source:_,fn:(e,t)=>g()(t,e),target:_}],or:{sid:"ikw095"}});const y={requiredTicketsAdded:b,requiredTicketsRemoved:S,requiredTicketsReset:k},f={requiredTicketsAdded:b,$requiredTickets:_};(0,s.sample)({and:[{source:f.$requiredTickets,target:r.E.inputs.updateRequiredTickets}],or:{sid:"-tbu673"}}),(0,s.sample)({and:[{clock:f.requiredTicketsAdded,source:l.N.outputs.$searchStatus,filter:(e,{forceUpdate:t})=>e===a.S.Shown||Boolean(t),target:r.E.inputs.continueSearch}],or:{sid:"ajq259"}});var v=i(23588);(0,s.sample)({and:[{source:v.z.outputs.addRequiredTickets,target:y.requiredTicketsAdded}],or:{sid:"-lxzygf"}}),(0,s.sample)({and:[{source:v.z.outputs.removeRequiredTickets,fn:({tickets:e})=>e,target:y.requiredTicketsRemoved}],or:{sid:"rae7s9"}});const x={inputs:y,outputs:f}},85089:function(e,t,i){"use strict";i.d(t,{Q:function(){return _}});var s=i(4190),a=i(67294),r=i(47166),l=i.n(r),c=i(28225),n=i(1156),d=i(39535),o=i(33622),u=i(49963),h=i(44619);let p;!function(e){e.TIME="TIME",e.FARE_KEY="FARE_KEY",e.TIME_AND_FARE_KEY="TIME_AND_FARE_KEY"}(p||(p={}));var g=i(85893);const m=l().bind({root:"s___3aygIXmqyLUT8EtaItu","text-wrapper":"s__lKf8Fmz9GtZwGXjwLpLg",description:"s__OMrBAHEcvbffixQy3Zl7","action-wrapper":"s__YnYIING1CpaOv7bmtx43","submit-button":"s__LRqV5Ml_pUFfHJmRfEjz"}),b={[p.TIME]:"time",[p.FARE_KEY]:"fareKey",[p.TIME_AND_FARE_KEY]:"timeAndFareKey"},S=(0,a.memo)((({visible:e,onSubmit:t,onCancel:i,unavailableType:s})=>{const{t:a}=(0,c.useTranslation)("service_serp_direct_flights"),r=b[s];return(0,g.jsx)(o.V,{visible:e,noAutoFocus:!0,children:(0,g.jsxs)("div",{className:m("root"),children:[(0,g.jsxs)("div",{className:m("text-wrapper"),children:[(0,g.jsx)(u.x,{type:h.y.Body1Bold,children:a(`unavailableDialogByType.${r}.title`)}),(0,g.jsx)(u.x,{type:h.y.Body2Regular,className:m("description"),children:a(`unavailableDialogByType.${r}.description`)})]}),(0,g.jsxs)("div",{className:m("action-wrapper"),children:[(0,g.jsx)(n.z,{onClick:i,priority:d.Ji.Secondary,children:a(`unavailableDialogByType.${r}.cancelButton`)}),(0,g.jsx)(n.z,{onClick:t,className:m("submit-button"),children:a(`unavailableDialogByType.${r}.submitButton`)})]})]})})}));S.displayName="UnavailableTimeDialog";var k=i(94825);const _=()=>{const{onSubmit:e,onCancel:t,visible:i,directSchedule:r,selectedUnavailableTicketSign:l}=(0,s.useUnit)({onSubmit:k.F.unavailableTicketSignSubmitted,onCancel:k.F.unavailableTicketSignCanceled,visible:k._.$isUnavailableTimeDialogVisible,directSchedule:k._.$directSchedule,selectedUnavailableTicketSign:k._.$selectedUnavailableTicketSign}),c=(0,a.useMemo)((()=>{const e=[...r?.departures||[],...r?.returns||[]].find((e=>e.signature===l));if(!e)return p.TIME;const t=!e.isAvailable,i=Boolean(e.fareKey);return t&&i?p.TIME_AND_FARE_KEY:i?p.FARE_KEY:p.TIME}),[l,r]);return(0,g.jsx)(S,{visible:i,onSubmit:e,onCancel:t,unavailableType:c})}},94825:function(e,t,i){"use strict";i.d(t,{F:function(){return v},_:function(){return x}});var s=i(98116),a=i(21247),r=i(4517),l=i(23588),c=i(27497);const n=(0,s.createEvent)({sid:"2rni9d"}),d=(0,s.createEvent)({sid:"-a12ykq"}),o=(0,s.createEvent)({sid:"-g43xy2"}),u=(0,s.createEvent)({sid:"iog1fx"}),h=(0,s.createEvent)({sid:"2a8b59"}),p=(0,s.createEvent)({sid:"-plcf8i"}),g=(0,s.createEvent)({sid:"fafu75"}),m=(0,s.createEvent)({sid:"xhixp0"}),b=r.r.outputs.$directTicketsScheduleV3Flag.map((({enabled:e})=>e)),S=(0,s.createStore)(null,{sid:"csd9mr"}).on(n,((e,t)=>t)).reset(o),k=(0,s.createStore)(!1,{sid:"-sq96zi"}).on(d,((e,t)=>t)).reset([o,l.z.outputs.ticketPopupOpen,c.N.outputs.searchExpired]),_=(0,s.createStore)(null,{sid:"-qukb29"}).on(u,((e,t)=>t)).reset(o),y=(0,s.createStore)(null,{sid:"zalv5"}).on(h,((e,t)=>t)).reset([m,o]),f=(0,s.combine)({and:[b,y,(e,t)=>e&&Boolean(t)],or:{sid:"-p0tzgt"}});(0,s.sample)({and:[{clock:p,source:y,filter:Boolean,fn:e=>({selectedTicketSign:e,unavailable:null,unavailableTicketAccepted:!0}),target:(0,s.withFactory)({sid:"tvvixx",fn:()=>(0,a.h)({selectedTicketSign:u,unavailable:h,unavailableTicketAccepted:g})})}],or:{sid:"-n1xw04"}});const v={directScheduleUpdated:n,directScheduleDataReset:o,selectedTicketSignUpdated:u,selectedUnavailableTicketSignUpdated:h,unavailableTicketSignSubmitted:p,unavailableTicketSignCanceled:m,requiredTicketFetchUpdated:d,unavailableTicketAccepted:g},x={$directSchedule:S,$isDirectTicketsScheduleV3Enabled:b,$selectedTicketSign:_,$isUnavailableTimeDialogVisible:f,$requiredTicketLoading:k,$selectedUnavailableTicketSign:y}},57043:function(e,t,i){var s=i(62488),a=i(21078),r=i(278),l=i(1469);e.exports=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),i=arguments[0],c=e;c--;)t[c-1]=arguments[c];return s(l(i)?r(i):[i],a(t,1))}},11255:function(e,t,i){var s=i(92822)("concat",i(57043));s.placeholder=i(69306),e.exports=s},23902:function(e,t,i){var s=i(92822)("flatten",i(85564),i(69087));s.placeholder=i(69306),e.exports=s},65068:function(e,t,i){var s=i(92822)("take",i(69572));s.placeholder=i(69306),e.exports=s},69572:function(e,t,i){var s=i(14259),a=i(40554);e.exports=function(e,t,i){return e&&e.length?(t=i||void 0===t?1:a(t),s(e,0,t<0?0:t)):[]}},83936:function(e,t,i){"use strict";i.d(t,{Z:function(){return c}});var s=i(85893),a=i(67294),r=i(94184),l={root:"s__D7JMEsGDqVx7xMuwn07b",text:"s__KCMo8yif5bNggKfOrmBR",color_type_red:"s__dcRNcC1YVFDs7oUBnRaz",color_type_lemon:"s__bVXIWO7DrLGTjoWnccVz",color_type_yellow:"s__yopXZTuBnjFpThG9MmUy",color_type_purple:"s__kDnPLOje71MZYGY9QZZp",color_type_cosmic:"s__Shg9O9UGbi6l1PoHf2Pi",color_type_fog:"s__Ir7T1ifPna0tHa8H86s3",color_type_pink:"s__CqPnI9jIouIy7EMJ4fqV",color_type_blue:"s__UW_dt4h_SOTnQ6hAea9k",color_type_green:"s__Pi7btzGJlFmRAMmkrtXH"};const c=(0,a.memo)((({colorType:e,children:t,className:i,onClick:c})=>{const n=r(i,l.root),d=r(t.props.className,l.text,l[`color_type_${e}`]);return(0,s.jsx)("div",{className:n,onClick:c,children:a.cloneElement(t,{className:d})})}));c.displayName="ItineraryLabel"}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/shared-8fc9c973c00ffd4cc343d50be59967f4c111a452.b296c4af699ee1cb2123.min.js.map