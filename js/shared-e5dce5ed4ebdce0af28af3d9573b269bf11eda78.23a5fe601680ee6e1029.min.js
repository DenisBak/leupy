(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[79629],{74590:function(e,t,s){"use strict";s.d(t,{G:function(){return ne}});var r=s(30091),i=s(98116),n=s(30040),a=s(31438),o=s(96864),l=s(2845),c=s(27497),u=s(37025),d=(s(26699),s(25387)),m=s.n(d),p=s(99186),f=s(84082),g=s(41832),h=s(38352);const{$informerCloseTimestamp:C,$informerCloseSearchCount:k}=u.m.outputs,_=(0,i.createEvent)({sid:"s9thhy"}),y=(0,i.createEvent)({sid:"vt3w4j"}),v=(0,i.createEvent)({sid:"az05bf"}),b=o.W.outputs.flags.foreignCardsSettingFlag.$value.map((e=>e)),x=o.W.outputs.flags.foreignCardsSettingFlag.$value.map((({enabled:e})=>e)),S=b.map((({directions:e})=>e)),j=b.map((({placements:e})=>e)),$=(0,i.combine)({and:[p.l.outputs.$language,b,(e,t)=>{const s=t.informerText;return"ru"===e?s.ru:s.en}],or:{sid:"-uhnqlg"}}),w=(0,i.combine)({and:[{informerCloseTimestamp:C,foreignCardsFlag:b},({informerCloseTimestamp:e,foreignCardsFlag:t})=>{const{informerSuspensionTime:s}=t;if(null===e)return!0;const r=Date.now()-e;return Boolean(r>=1e3*s)}],or:{sid:"uo14ua"}}),T=(0,i.combine)({and:[{informerCloseSearchCount:k,foreignCardsFlag:b},({informerCloseSearchCount:e,foreignCardsFlag:t})=>{const{informerSuspensionSearchCount:s}=t;return null===e||s<e}],or:{sid:"iwnaqa"}}),F=h.s.outputs.$searchParams.map((e=>e?.segments?e.segments.map((({origin_country:e,destination_country:t})=>[e,t])):null)),I=(0,i.combine)({and:[F,S,(e,t)=>!!e&&((e,t)=>t.every((t=>((e,t)=>e.some((e=>((e,t)=>e.every(((e,s)=>{const r=t[s];return"INT"===e?!("RU"===r||"KX"===r):e===r})))(e,t))))(e,t))))(t,e)],or:{sid:"-pppv23"}}),P=(0,i.combine)({and:[F,g.y.outputs.$currency,f.B.outputs.$geoIpCountry,(e,t,s)=>"rub"!==t||"ru"!==s&&null!==s&&null!==e&&e.flat().includes(s.toLocaleUpperCase())],or:{sid:"gsxzb5"}}),E={inputs:{informerClicked:y,informerClosed:_,informerInitialized:v},outputs:{$informerText:$,$isVisible:(0,i.combine)({and:[w,T,I,o.W.outputs.$userPaymentOptions,P,x,(e,t,s,r,i,n)=>{if(!n)return!1;if(!s)return!1;if(!i)return!1;const a=r?.includes("ww_card");return!a&&(m()(r,["ru_card"])?e:t||e)}],or:{sid:"-jev469"}}),$isMatchingFlagDirections:I,$isForeignCardsExperimentEnabled:x,$foreignCardsPlacements:j}},{$informerCloseTimestamp:N,$informerCloseSearchCount:D}=u.m.outputs,{resetForeignCardsInformerStorageDataFx:R,updateInformerSearchCountFx:V}=u.m.inputs,{inputs:M,outputs:O}=E;(0,i.sample)({and:[{clock:M.informerClicked,fn:()=>n.t6.Serp,target:l.a.inputs.popupOpened}],or:{sid:"-4ehclb"}}),(0,i.sample)({and:[{clock:M.informerClosed,target:R}],or:{sid:"-4b6l15"}}),(0,i.sample)({and:[{clock:M.informerInitialized,source:{paymentOptions:o.W.outputs.$userPaymentOptions,informerCloseTimestamp:N,informerCloseSearchCount:D},filter:({paymentOptions:e,informerCloseTimestamp:t,informerCloseSearchCount:s})=>Boolean(e&&e.length>0)&&Boolean(null===t||null===s),target:R}],or:{sid:"-3wvxlr"}}),(0,i.sample)({and:[{clock:c.N.outputs.$searchStatus,source:{isMatchingFlagDirections:O.$isMatchingFlagDirections,informerCloseTimestamp:N,informerCloseSearchCount:D},filter:({isMatchingFlagDirections:e,informerCloseTimestamp:t,informerCloseSearchCount:s},r)=>{const i=null===s;return Boolean(e&&!(null===t)&&r===a.S.Finished&&!i)},target:V}],or:{sid:"-2vhx97"}});var B=s(4190),L=s(47166),A=s.n(L),z=s(89421),q=s(67294),U=s(49963),H=s(44619),K=s(5393),Z=s(16097),G={root:"s__ed9PgmUdvzCPKjef7xll",text:"s__sxtLlVk88CnRbyLQOm2a","close-button":"s__oKSi2dsZruDsVGerSCNz",chevron:"s__pxCvAKUVHXMi5lOIdn8q",container:"s__kowd2q4BbgkeNLGQEvLD","container_preview-v3":"s__s1b4TdynL2TgXyAjqCte"},X=s.p+"86b357325c7ba8ec33e5.svg",W=s.p+"5061cfff8a19b865c66f.svg",Y=s(85893);const J=A().bind(G),Q=({isNightMode:e})=>{const t=e?X:W;return(0,Y.jsx)("img",{src:t,alt:"cards"})},ee=({text:e,onClose:t,onClick:s,isNightMode:r=!1,className:i,hasChevron:n})=>{const a=(0,q.useCallback)((e=>{e.stopPropagation(),t()}),[t]);return(0,Y.jsxs)("div",{className:J("root",i),onClick:s,children:[(0,Y.jsx)(Q,{isNightMode:r}),(0,Y.jsx)(U.x,{type:H.y.Body2Regular,className:J("text"),children:e}),!n&&(0,Y.jsx)(K.P,{size:"small",onClick:a,className:J("close-button"),touchZone:{height:36,paddingLeft:8,paddingRight:8}}),n&&(0,Y.jsx)(Z.V,{className:J("chevron")})]})},te=A().bind(G),{outputs:se,inputs:re}=E,ie={ForeignCardsInformerContainer:({placement:e,className:t})=>{const{informerText:s,isVisible:r,isNightMode:i,foreignCardsPlacements:n}=(0,B.useUnit)({informerText:se.$informerText,isVisible:se.$isVisible,isNightMode:z.H.outputs.$isNight,foreignCardsPlacements:se.$foreignCardsPlacements}),{handleCLick:a,handleClose:o}=(0,B.useUnit)({handleCLick:re.informerClicked,handleClose:re.informerClosed});if(!r||!n.includes(e))return null;const l="ticket"===e;return(0,Y.jsx)(ee,{text:s,onClick:a,onClose:o,className:te(t,{container:!l,"container_preview-v3":!l}),isNightMode:i,hasChevron:l})}},ne=(0,r.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp/services/foreign_cards_informer/index.ts",api:{inputs:E.inputs,outputs:E.outputs,containers:ie}})},69067:function(e,t,s){"use strict";s.d(t,{H:function(){return $}});var r=s(47166),i=s.n(r),n=s(15126),a=s(98116),o=s(51717),l=s(85349),c=s(28258),u=s(38352);const d=(0,a.createEvent)({sid:"845nqt"}),{$returnDate:m}=u.s.outputs,p=(0,a.createStore)({},{sid:"mi44qo"}),{$tripClass:f,$passengers:g}=(0,a.withFactory)({sid:"-8xbo78",fn:()=>(0,o.X)({source:u.s.outputs.$searchParams,shape:{$tripClass:e=>e?.tripClass??null,$passengers:e=>e?.passengers??null}})}),{$origin:h,$destination:C,$departDate:k}=(0,a.withFactory)({sid:"-54yoa4",fn:()=>(0,o.X)({source:u.s.outputs.$firstSegmentDirection,shape:{$origin:e=>e?.origin??null,$destination:e=>e?.destination??null,$departDate:e=>e?.departDate??null}})}),_=(0,a.combine)({and:[{tripDirection:u.s.outputs.$tripDirection,tripClass:f,passengers:g,origin:h,destination:C,departDate:k,returnDate:m},e=>e],or:{sid:"-9le4ke"}}),y=n.H.inputs.createAdverisementModel(_);(0,a.sample)({and:[{clock:c.E.inputs.startSearch,target:y.inputs.slotsReset}],or:{sid:"-1xqiiq"}}),(0,a.withFactory)({sid:"-1jfv3c",fn:()=>(0,l.m)({clock:c.E.inputs.startSearch,target:p})}),(0,a.sample)({and:[{clock:y.outputs.adLoaded,source:{bannerParamsByPlacement:p},fn:({bannerParamsByPlacement:e},{placement:t,bannerId:s,campaignId:r,placeId:i})=>({...e,[t]:{bannerId:s,campaignId:r,placeId:i}}),target:p}],or:{sid:"-1gow4j"}});const v={...y.inputs,adClosed:d},b={...y.outputs,adClosed:d,$bannerParamsByPlacement:p};var x=s(85893);const S=n.H.inputs.createAdverisementContainer({model:y}),j=i().bind({root_placement_bottom:"s__pFNh1bGdFozxH1HzAPwG"}),$={inputs:v,outputs:b,containers:{AdvertisementContainer:({placementId:e})=>{const t=j(`root_placement_${e}`);return(0,x.jsx)(S,{className:t,placementId:e})}}}},30871:function(e,t,s){"use strict";s.d(t,{p:function(){return N}});var r=s(98116),i=s(30040),n=s(74423),a=s.n(n),o=s(94547),l=s(10924),c=s(68621),u=s(42177),d=s(4517);const m=(0,r.createDomain)("cashback_informer",{sid:"-vyeptd"}),{forwardToAnalytics:p}=l.I.inputs,f=(0,o.Yu)("informerSuspensionTime",{adapter:o.j$.number()}),g=m.createEffect((()=>{const e=Date.now();return f.write(e),e}),{sid:"qb761m"}),h=m.createEvent({sid:"p84923"}),C=m.createEvent({sid:"u35tf7"}),k=m.createEvent({sid:"8os9vq"}),_=c.b.outputs.$isAnyPremiumActive.map(Boolean),y=m.createStore(f.read(),{sid:"jgcakv"}),v=(0,r.combine)({and:[{informerCloseTimestamp:y,aviaCashbackFlag:d.r.outputs.$aviaCashbackFlag},({informerCloseTimestamp:e,aviaCashbackFlag:t})=>{const{informerSuspensionTime:s}=t;return null===e||Date.now()-e>=1e3*s}],or:{sid:"-ruf0an"}}),b=(0,r.combine)({and:[{isSuspensionTimeEnded:v,aviaCashbackFlag:d.r.outputs.$aviaCashbackFlag,hasPremiumSubscription:_},({isSuspensionTimeEnded:e,aviaCashbackFlag:t,hasPremiumSubscription:s})=>{const{informerPlacements:r,enabled:i}=t;return i&&e&&!s?r:[]}],or:{sid:"1qobw8"}});(0,r.sample)({and:[{clock:k,filter:e=>Boolean(a()(["informer",e],u.X.config.premiumCashbackPayloadLookup)),fn:e=>a()(["informer",e],u.X.config.premiumCashbackPayloadLookup),target:u.X.inputs.entryPointInteracted}],or:{sid:"uq32iw"}}),(0,r.sample)({and:[{clock:h,target:g}],or:{sid:"-h9h9vi"}}),(0,r.sample)({and:[{clock:g.doneData,target:y}],or:{sid:"-h6qawp"}}),p({from:C.map((e=>({source:e}))),data:{category:"search",label:"cashback_prop",action:"showed",service:i.t6.Serp},payload:{pageName:"serp",userEvent:!1,source:null}});const x={analyticsSent:C,premiumLandingShown:k,informerClosed:h},S={$visiblePlacements:b},j={inputs:x,outputs:S};s(26699);var $=s(67294),w=s(4190),T=s(97650),F=s(79403),I=s(4275),P=s(31401),E=s(85893);const N={containers:{CashbackInformerContainer:({placement:e,cashback:t,className:s})=>{const[r,i]=(0,$.useState)(!1),{brand:n,visiblePlacements:a,analyticsSentEvent:o,premiumLandingShownEvent:l,informerClosedEvent:c}=(0,w.useUnit)({brand:F.U.outputs.$brand,visiblePlacements:j.outputs.$visiblePlacements,analyticsSentEvent:j.inputs.analyticsSent,premiumLandingShownEvent:j.inputs.premiumLandingShown,informerClosedEvent:j.inputs.informerClosed}),[u,d]=(0,T.YD)({delay:1e3,threshold:1,triggerOnce:!0}),m=a.includes(e)&&!r;(0,$.useEffect)((()=>{d&&o(e)}),[d,o,e]);const p=(0,$.useCallback)((()=>{l(e)}),[e,l]),f=(0,$.useCallback)((()=>{c(),i(!0)}),[c]),g=(0,$.useMemo)((()=>({[P.g_.Ticket]:(0,E.jsx)(I.i2,{handleCloseClick:f,handleActionClick:p,cashback:t,variant:n}),[P.g_.Proposals]:(0,E.jsx)(I.EE,{handleActionClick:p,variant:n}),[P.g_.Results]:(0,E.jsx)(I.GT,{handleCloseClick:f,handleActionClick:p,variant:n}),[P.g_.Autosearch]:(0,E.jsx)(I.F4,{handleCloseClick:f,handleActionClick:p,variant:n}),[P.g_.BottomDrawer]:(0,E.jsx)(I.Gt,{handleActionClick:p,variant:n})}[e])),[e,t,f,p,n]);return m?(0,E.jsx)("div",{ref:u,className:s,children:g}):null}},inputs:x,outputs:S}},94307:function(e,t,s){"use strict";s.d(t,{P:function(){return C}});var r=s(98116),i=s(23588),n=s(85349),a=s(63059);const o=(0,r.createStore)(1,{sid:"qr70vm"}),l=(0,r.createStore)(10,{sid:"j760tm"}),c=(0,r.createEvent)({sid:"-v0nhau"}),u=(0,r.createEvent)({sid:"4d3clz"}),d=(0,r.combine)({and:[{page:o,pageSize:l,meta:a.m.outputs.$meta},({page:e,pageSize:t,meta:s})=>{if(!s)return 0;const r=e*t;return Math.max(0,s.filteredTicketsCount-r)}],or:{sid:"-1es8mk"}});(0,r.sample)({and:[{clock:c,target:o}],or:{sid:"-2wij79"}}),(0,r.withFactory)({sid:"-2i7vrv",fn:()=>(0,n.m)({clock:u,target:o})});const m={pageChanged:c,pageReset:u},p={pageChanged:c,$page:o,$pageSize:l,$hiddenTicketsCount:d};(0,r.sample)({and:[{source:i.z.outputs.changeSearchResultsPage,fn:({page:e})=>e,target:m.pageChanged}],or:{sid:"-xaw8bz"}}),(0,r.sample)({and:[{source:i.z.outputs.resetSearchResultsPage,target:m.pageReset}],or:{sid:"ucps2y"}});var f=s(28258),g=s(31401),h=s(27497);(0,r.sample)({and:[{clock:p.pageChanged,source:{page:p.$page,pageSize:p.$pageSize},fn:({page:e,pageSize:t})=>e*t,target:f.E.inputs.updateLimit}],or:{sid:"ucdlwh"}}),(0,r.sample)({and:[{clock:p.pageChanged,target:f.E.inputs.continueSearch}],or:{sid:"do8ste"}}),(0,r.sample)({and:[{clock:p.pageChanged,fn:()=>({status:g.lm.Pending,source:"page"}),target:h.N.inputs.searchContinueStatusChanged}],or:{sid:"e2jg8s"}});const C={inputs:m,outputs:p}},63059:function(e,t,s){"use strict";s.d(t,{m:function(){return u}});var r=s(98116),i=s(28258);const n=(0,r.createDomain)("results_meta",{sid:"g0stm2"}),a=n.createEvent({sid:"-c6d7lx"}),o=n.createStore(null,{sid:"-12j248"});(0,r.sample)({and:[{clock:a,target:o}],or:{sid:"-kqp46r"}});const l={metaUpdated:a},c={$meta:o};(0,r.sample)({and:[{clock:i.E.outputs.resultChunksLoaded,fn:([e])=>{return{filteredTicketsCount:(t=e).meta.filtered_tickets_count,totalTicketsCount:t.meta.total_tickets_count,directTicketsCount:t.meta.direct_tickets_count};var t},target:l.metaUpdated}],or:{sid:"-1fptz4"}});const u={inputs:l,outputs:c}},17458:function(e,t,s){"use strict";s.d(t,{a:function(){return Je}});var r=s(98116),i=s(23588),n=(s(26699),s(31401)),a=s(69067),o=s(38387),l=s(5016),c=s(52112),u=s(94307),d=s(13009),m=s(30871),p=s(74590),f=s(36115),g=s.n(f),h=s(46898),C=s.n(h),k=s(55606),_=s.n(k),y=s(65068),v=s.n(y),b=s(15126),x=s(49546),S=s.n(x);const j=({ticketSignatures:e,softTicketSignatures:t,ticketProposalCollection:s,proposalCollection:r})=>[...e,...t].find((e=>{const t=s[e];if(!t||0===t.length)return!1;const[i]=t,n=r[i]?.cashback;return S()(n)&&n>0}))||null;let $;!function(e){e.Ticket="ticket",e.Advertisement="advertisement",e.CashbackInformer="cashbackInformer",e.SoftTicketsInformer="softTicketsInformer",e.Sorting="sorting",e.DirectFlights="directFlights",e.ForeignCardsInformer="ForeignCardsInformer"}($||($={}));const w=e=>t=>e.isSortingVisible?0===e.softTicketSignatures.length+e.ticketSignatures.length?t:[...t,{type:$.Sorting,key:"sorting"}]:t,T=(e,t)=>s=>{const r=e.ticketSignatures.length,i=e.adSlotByPlacement[t]?.type;if(0===r||!i)return s;if(t===b.L.Third&&r<3)return s;if(t===b.L.Bottom&&0===e.hiddenTicketsCount)return s;const n={key:e.isMobile?`ad_${t}_mobile`:`ad_${t}`,type:$.Advertisement,data:{placement:t}};return[...s,n]},F=e=>t=>e.isDirectFlightsVisible?0===e.ticketSignatures.length?t:[...t,{type:$.DirectFlights,key:"direct_flights",data:{variant:"normal"}}]:t,I=(e,t,s)=>r=>{const i=void 0===s?e.ticketSignatures.length:s;return[...r,...C()([g()(t),v()(i-t+1)])(e.ticketSignatures).map((t=>({type:$.Ticket,key:`ticket_${t}`,data:{signature:t,hasBadge:_()(e.ticketCollection?.[t]?.badges)>0}})))]},P=e=>t=>{if(0===e.softTicketSignatures.length)return t;const s={type:$.SoftTicketsInformer,key:"soft_tickets_informer"},r=e.softTicketSignatures.map((t=>({type:$.Ticket,key:`ticket_${t}`,data:{signature:t,hasBadge:_()(e.ticketCollection?.[t]?.badges)>0}})));return[...t,s,...r]},E=e=>t=>{if(!e.isCashbackInformerVisible)return t;const s=j(e);return s?t.flatMap((e=>e.type!==$.Ticket||e.data.signature!==s?e:[e,{type:$.CashbackInformer,key:"cashback_informer"}])):t},N=e=>t=>{if(!e.isForeignCardsContainerVisible)return t;const s={type:$.ForeignCardsInformer,key:"foreign_cards_informer"};return[...t,s]},D=e=>t=>{const{ticketSignatures:s,softTicketSignatures:r,isDirectFlightsVisible:i,isCashbackInformerVisible:n}=e;if(!i)return t;if(0===s.length+r.length)return t;const a=null!==j(e),o=n&&a?"short":"normal";return[...t,{type:$.DirectFlights,key:"direct_flights",data:{variant:o}}]},R=e=>t=>{const{ticketSignatures:s,ticketCollection:r,isDirectFlightsVisible:i}=e;if(i)return t;const n=v()(3,s).map((e=>({type:$.Ticket,key:`ticket_${e}`,data:{signature:e,hasBadge:_()(r?.[e]?.badges)>0}})));return[...t,...n]},V=e=>t=>{const{ticketSignatures:s,softTicketSignatures:r,ticketCollection:i,isDirectFlightsVisible:n}=e;if(0===r.length)return t;if(n)return t;const a=Math.max(0,3-s.length);if(0===a)return t;const o=v()(a,r),l={type:$.SoftTicketsInformer,key:"soft_tickets_informer"},c=o.map((e=>({type:$.Ticket,key:`ticket_${e}`,data:{signature:e,hasBadge:_()(i?.[e]?.badges)>0}})));return[...t,l,...c]},M=e=>t=>{if(!e.isCashbackInformerVisible)return t;const s=j(e);return s?t.flatMap((e=>e.type===$.Ticket&&e.data.signature===s||e.type===$.DirectFlights?[e,{type:$.CashbackInformer,key:"cashback_informer"}]:e)):t},O=e=>t=>{if(!e.isForeignCardsContainerVisible)return t;const s={type:$.ForeignCardsInformer,key:"foreign_cards_informer"};return[...t,s]},{$ticketSignatures:B,$softTicketSignatures:L,$ticketCollection:A,$ticketProposalCollection:z,$proposalCollection:q}=c.o.outputs,{$isScoringSortEnabled:U}=l.j.outputs,{$isDirectScheduleShouldBeShown:H}=d.O.outputs,{$visiblePlacements:K}=m.p.outputs,{$isMobile:Z}=o.l.outputs,{$slotByPlacement:G}=a.H.outputs,{$hiddenTicketsCount:X}=u.P.outputs,{$foreignCardsPlacements:W}=p.G.outputs,Y=K.map((e=>e.includes(n.g_.Results))),J=K.map((e=>e.includes(n.g_.Autosearch))),Q=p.G.outputs.$isVisible,ee=(0,r.combine)({and:[{isForeignCardsInformerVisible:Q,foreignCardsPlacements:W},({isForeignCardsInformerVisible:e,foreignCardsPlacements:t})=>e&&t.includes("results")],or:{sid:"hd0e6r"}}),te=(0,r.combine)({and:[{isForeignCardsInformerVisible:Q,foreignCardsPlacements:W},({isForeignCardsInformerVisible:e,foreignCardsPlacements:t})=>e&&t.includes("autosearch")],or:{sid:"1xib49"}}),se=(0,r.combine)({and:[{ticketSignatures:B,softTicketSignatures:L,hiddenTicketsCount:X,ticketCollection:A,proposalCollection:q,ticketProposalCollection:z,adSlotByPlacement:G,isSortingVisible:U,isCashbackInformerVisible:Y,isDirectFlightsVisible:H,isMobile:Z,isForeignCardsContainerVisible:ee},e=>C()([N(e),T(e,b.L.Top),F(e),w(e),I(e,0,1),T(e,b.L.Third),I(e,2),P(e),E(e),T(e,b.L.Bottom)])([])],or:{sid:"-87t426"}}),re=(0,r.combine)({and:[{ticketSignatures:B,softTicketSignatures:L,ticketCollection:A,hiddenTicketsCount:X,proposalCollection:q,ticketProposalCollection:z,adSlotByPlacement:G,isSortingVisible:U,isCashbackInformerVisible:J,isDirectFlightsVisible:H,isMobile:Z,isForeignCardsContainerVisible:te},e=>C()([O(e),D(e),R(e),V(e),M(e)])([])],or:{sid:"-2992xs"}}),ie={ticketClicked:(0,r.createEvent)({sid:"-83jbt1"}),autosearchTicketClicked:(0,r.createEvent)({sid:"-9oni03"})},ne={$results:se,$autosearchResults:re},ae={inputs:ie,outputs:ne};(0,r.sample)({and:[{clock:ie.ticketClicked,fn:e=>({ticketSign:e,source:"listing"}),target:i.z.inputs.ticketPreviewClickedFx}],or:{sid:"m0kvgx"}}),(0,r.sample)({and:[{clock:ie.autosearchTicketClicked,fn:e=>({ticketSign:e,source:"autosearch"}),target:i.z.inputs.ticketPreviewClickedFx}],or:{sid:"-uh651u"}});var oe=s(67294),le=s(4190),ce=s(47166),ue=s.n(ce),de=s(37721),me=s(78803),pe=s(43175),fe=s(27497);const{$results:ge}=ae.outputs,he=(0,r.createEvent)({sid:"9srzwt"}),Ce=(0,r.createEvent)({sid:"-5fkvnz"}),ke=(0,r.createStore)(null,{sid:"fm9o0k"}).on(he,((e,t)=>t)).reset(Ce),_e=(0,r.createEffect)((e=>e?.current?.scrollIntoView(!0)),{sid:"-q8rs8c"});(0,r.sample)({and:[{clock:[l.j.inputs.filtersChangedByUser,l.j.inputs.filtersChangedAndSortingRelaxedByUser],source:ke,filter:pe.J.outputs.$autosearchEnabled,target:_e}],or:{sid:"439n7b"}});const ye=fe.N.outputs.$searchContinueStatus.map((({status:e,source:t})=>e===n.lm.Pending&&"page"!==t)),ve=ge.map((e=>e.length>0)),be={$results:ge,$isResultsVisible:ve,$isOverlayVisible:ye},xe={saveResultsRef:he,removeResultsRef:Ce};var Se=s(85893);const{AdvertisementContainer:je}=a.H.containers,{SoftTicketsInformerContainer:$e,TicketPreviewResolverContainer:we}=c.o.containers,{CashbackInformerContainer:Te}=m.p.containers,{SortingInResultsContainer:Fe}=l.j.containers,{DirectScheduleResolver:Ie}=d.O.containers,{ForeignCardsInformerContainer:Pe}=p.G.containers,Ee=ue().bind({overlay:"s__AYStH1OaOPpPDltef84K","result-item-row":"s__K_z9WFumQO2KSxooJM0c","result-item-row_layout_normal":"s__W9yDNL_eJ6KrZBxYoreS","result-item-row_layout_small":"s__I7uEsfIl6OK3MhFYvKc9","result-item-row_with-badge":"s__bti2LNoqGvVztixHcnni","result-item-row_extra-offset":"s__tAkyV80OHp11nbHs_EZ_"}),Ne=({children:e,layout:t,hasBadge:s=!1,withExtraOffset:r=!1})=>(0,Se.jsx)("div",{className:Ee("result-item-row",`result-item-row_layout_${t}`,{"result-item-row_with-badge":s,"result-item-row_extra-offset":r}),children:e}),De=({resultItem:e,position:t})=>{const s=(0,me.pc)(),r=(0,le.useUnit)(o.l.outputs.$isDesktop);if(e.type===$.ForeignCardsInformer)return(0,Se.jsx)(Ne,{layout:s,children:(0,Se.jsx)(Pe,{placement:"results"})});if(e.type===$.Sorting)return(0,Se.jsx)(Ne,{layout:s,children:(0,Se.jsx)(Fe,{})});if(e.type===$.Ticket){const{signature:i,hasBadge:n}=e.data,a=n&&r&&0===t;return(0,Se.jsx)(Ne,{hasBadge:n,withExtraOffset:a,layout:s,children:(0,Se.jsx)(we,{ticketSign:i})})}if(e.type===$.DirectFlights)return(0,Se.jsx)(Ne,{layout:s,children:(0,Se.jsx)(Ie,{})});if(e.type===$.Advertisement){const{placement:t}=e.data;return(0,Se.jsx)(Ne,{layout:s,children:(0,Se.jsx)(je,{placementId:t})})}return e.type===$.CashbackInformer?(0,Se.jsx)(Ne,{layout:s,children:(0,Se.jsx)(Te,{placement:n.g_.Results})}):e.type===$.SoftTicketsInformer?(0,Se.jsx)(Ne,{layout:s,children:(0,Se.jsx)($e,{})}):null},Re={$isOverlayVisible:fe.N.outputs.$isContinuePending.map((e=>e))},{SoftTicketsInformerContainer:Ve,TicketPreviewResolverContainer:Me}=c.o.containers,{CashbackInformerContainer:Oe}=m.p.containers,{DirectScheduleResolver:Be}=d.O.containers,{ForeignCardsInformerContainer:Le}=p.G.containers,Ae=ue().bind({overlay:"s__JmdwLRS0yaALC6JvPbYa","result-item-row":"s__ScB1BwrLlOSbNvlXl4TJ","result-item-row_layout_normal":"s__dsIs93mOr11hChCntZ9K","result-item-row_layout_small":"s__Mda6p_EnLK9nOfYsEDEM","result-item-row_extra-offset":"s__mWDxCdLaqV5v_FsP0X3X"}),ze=({children:e,layout:t,withExtraOffset:s=!1})=>(0,Se.jsx)("div",{className:Ae("result-item-row",`result-item-row_layout_${t}`,{"result-item-row_extra-offset":s}),children:e}),qe=({resultItem:e})=>{const t=(0,me.pc)();if(e.type===$.ForeignCardsInformer)return(0,Se.jsx)(ze,{layout:t,children:(0,Se.jsx)(Le,{placement:"autosearch"})});if(e.type===$.Ticket){const{signature:s,hasBadge:r}=e.data;return(0,Se.jsx)(ze,{withExtraOffset:r,layout:t,children:(0,Se.jsx)(Me,{ticketSign:s})})}return e.type===$.DirectFlights?(0,Se.jsx)(ze,{layout:t,children:(0,Se.jsx)(Be,{})}):e.type===$.CashbackInformer?(0,Se.jsx)(ze,{layout:t,children:(0,Se.jsx)(Oe,{placement:n.g_.Results})}):e.type===$.SoftTicketsInformer?(0,Se.jsx)(ze,{layout:t,children:(0,Se.jsx)(Ve,{})}):null};var Ue=s(28225),He=s(52326),Ke=s(44619),Ze=s(83636),Ge=s(49963);const Xe=ue().bind({root:"s__C8SyO7lhORyoCe_tYM3A",title:"s__WfC4HqsyIpzoQdvbG09y",content:"s__JE0LtSooNP5K9MC2WeaH",root_layout_normal:"s__GEKpl4yRpNyi0Wf5tbjr",root_layout_small:"s__PXqCfarJlZ5yEq6lfhzP"}),We=({layout:e=He.q.Normal,title:t,children:s,testId:r})=>{const i=Xe("root",`root_layout_${e}`),n=e===He.q.Small?Ke.y.Title4Bold:Ke.y.Title2Bold,a=e===He.q.Small?Ke.y.Body2Paragraph:Ke.y.Body1Paragraph;return(0,Se.jsxs)("div",{className:i,"data-test-id":r,children:[(0,Se.jsx)(Ze.K,{width:36,height:36}),(0,Se.jsx)(Ge.x,{className:Xe("title"),type:n,children:t}),(0,Se.jsx)(Ge.x,{className:Xe("content"),type:a,children:s})]})},Ye={ResultsContainer:({className:e})=>{const{results:t,isResultsVisible:s,isOverlayVisible:r,ticketClickedEvent:i,saveResultsRef:a,removeResultsRef:o}=(0,le.useUnit)({results:be.$results,isResultsVisible:be.$isResultsVisible,isOverlayVisible:be.$isOverlayVisible,ticketClickedEvent:ae.inputs.ticketClicked,saveResultsRef:xe.saveResultsRef,removeResultsRef:xe.removeResultsRef}),l=(0,oe.useRef)(null);(0,oe.useEffect)((()=>(a(l),()=>o())),[l,o,a]);const c=(0,oe.useMemo)((()=>({placement:n.ok.Results,onTicketClick:i})),[i]);return s?(0,Se.jsx)(de.d.Provider,{value:c,children:(0,Se.jsx)("div",{className:Ee({overlay:r},e),ref:l,"data-test-id":"search-results-items-list",children:t.map(((e,t)=>(0,Se.jsx)(De,{resultItem:e,position:t},e.key)))})}):null},AutosearchResultsContainer:({className:e})=>{const{autosearchResults:t,isOverlayVisible:s,autosearchTicketClickedEvent:r}=(0,le.useUnit)({autosearchResults:ae.outputs.$autosearchResults,isOverlayVisible:Re.$isOverlayVisible,autosearchTicketClickedEvent:ae.inputs.autosearchTicketClicked}),i=(0,oe.useMemo)((()=>({placement:n.ok.Autosearch,onTicketClick:r})),[r]);return(0,Se.jsx)(de.d.Provider,{value:i,children:(0,Se.jsx)("div",{className:Ae({overlay:s},e),"data-test-id":"autosearch-results-items-list",children:t.map((e=>(0,Se.jsx)(qe,{resultItem:e},e.key)))})})},OfflineInformerContainer:()=>{const e=(0,me.pc)(),{t:t}=(0,Ue.useTranslation)("service_search_results"),s=t("errorInformers.offline.title"),r=t("errorInformers.offline.text");return(0,Se.jsx)(We,{layout:e,title:s,testId:"results-offline-informer",children:r})},NoTicketsInformerContainer:()=>{const e=(0,me.pc)(),{t:t}=(0,Ue.useTranslation)("service_search_results"),s=t("errorInformers.noTickets.title"),r=t("errorInformers.noTickets.text");return(0,Se.jsx)(We,{layout:e,title:s,testId:"results-no-tickets-informer",children:r})}},Je={inputs:ie,outputs:ne,containers:Ye}},30731:function(e,t,s){var r=s(14259),i=s(40554);e.exports=function(e,t,s){var n=null==e?0:e.length;return n?(t=s||void 0===t?1:i(t),r(e,t<0?0:t,n)):[]}},36115:function(e,t,s){var r=s(92822)("drop",s(30731));r.placeholder=s(69306),e.exports=r},42583:function(e,t,s){var r=s(92822)("toLower",s(7334),s(69087));r.placeholder=s(69306),e.exports=r},7334:function(e,t,s){var r=s(79833);e.exports=function(e){return r(e).toLowerCase()}},83636:function(e,t,s){"use strict";s.d(t,{K:function(){return a}});var r=s(85893),i=s(67294);const n=({className:e,...t},s)=>(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:s,style:{display:"inline-block"},...t,children:[(0,r.jsxs)("g",{clipPath:"url(#EmojiFaceSad__a)",children:[(0,r.jsx)("path",{d:"M12 .75C5.786.75.75 5.786.75 12S5.786 23.25 12 23.25 23.25 18.214 23.25 12 18.214.75 12 .75Z",fill:"url(#EmojiFaceSad__b)"}),(0,r.jsx)("path",{d:"M10.226 13.106c-1.114.822-3.12.878-4.324 0-.277-.202-.738-.063-.637.173 1.05 2.407 4.549 2.403 5.599 0 .101-.233-.364-.375-.638-.173ZM13.777 13.106c1.114.822 3.12.878 4.324 0 .278-.202.739-.063.638.173-1.05 2.407-4.549 2.403-5.599 0-.105-.233.36-.375.637-.173ZM9.334 19.875c1.372-.964 3.847-1.027 5.329 0 .345.236.91.071.783-.206-1.297-2.828-5.606-2.82-6.9 0-.124.277.446.442.788.206Z",fill:"#1A1626"}),(0,r.jsx)("path",{d:"M5.644 8.415c-3.672 2.171-1.332 2.64 1.995 1.185 1.875-.821.42-2.617-1.995-1.185ZM18.356 8.419c-2.415-1.429-3.87.364-1.995 1.185 3.326 1.455 5.666.986 1.995-1.185Z",fill:"#D69600"})]}),(0,r.jsxs)("defs",{children:[(0,r.jsxs)("linearGradient",{id:"EmojiFaceSad__b",x1:12,y1:23.25,x2:12,y2:.75,gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#FF9500"}),(0,r.jsx)("stop",{offset:.192,stopColor:"#FFAD00"}),(0,r.jsx)("stop",{offset:.545,stopColor:"#FFD500"}),(0,r.jsx)("stop",{offset:.827,stopColor:"#FFED00"}),(0,r.jsx)("stop",{offset:1,stopColor:"#FFF600"})]}),(0,r.jsx)("clipPath",{id:"EmojiFaceSad__a",children:(0,r.jsx)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})]})]}),a=(0,i.memo)((0,i.forwardRef)(n));a.displayName="EmojiFaceSad"},72207:function(e,t,s){"use strict";s.d(t,{I:function(){return g}});var r=s(85893),i=s(67294),n=s(47166),a=s(77620),o=s(24561);const l={light:{background:"#eff1f4",foreground:"#ffffff"},dark:{background:"#3d3f43",foreground:"#2e3035"}},c=(0,i.memo)((({segmentsCount:e})=>{const t=(0,i.useMemo)((()=>a(0,e)),[e]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"80",height:"32"}),t.map((e=>(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("rect",{x:"0",y:56+50*e,width:"24",height:"16"}),(0,r.jsx)("rect",{x:"36",y:56+50*e,width:"88",height:"16"}),(0,r.jsx)("rect",{x:"148",y:56+50*e,width:"80",height:"16"}),(0,r.jsx)("rect",{x:"36",y:74+50*e,width:"72",height:"16"}),(0,r.jsx)("rect",{x:"148",y:74+50*e,width:"100",height:"16"})]},e)))]})}));c.displayName="TicketPreviewSkeletonContentSmall";const u=(0,i.memo)((({segmentsCount:e})=>{const t=(0,i.useMemo)((()=>a(0,e)),[e]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"240",height:"36"}),t.map((e=>(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("rect",{x:"0",y:66+62*e,width:"120",height:"18"}),(0,r.jsx)("rect",{x:"164",y:66+62*e,width:"240",height:"18"}),(0,r.jsx)("rect",{x:"460",y:66+62*e,width:"104",height:"18"}),(0,r.jsx)("rect",{x:"164",y:86+62*e,width:"120",height:"18"}),(0,r.jsx)("rect",{x:"460",y:86+62*e,width:"188",height:"18"})]},e)))]})}));u.displayName="TicketPreviewSkeletonContentNormal";var d={root:"s__Ukt6MBjCDoTLSxFRmq6Z",root_layout_small:"s__OcAMs1ZVpDpm8NINwrMX",root_layout_normal:"s__ZoVbCiNEX8KIXWIIH317",root_variant_light:"s__LF_dYQogIDP9A1kT711k",root_variant_dark:"s__Mbik1Ma18NAWmuf_1Suu",list_item:"s__Zsia6Ej_Ojo6utu_a7eT"};const m=n.bind(d),p=(0,i.memo)((({variant:e="light",layout:t="normal",segmentsCount:s=1,className:i})=>{if(0===s)return null;const n=m(i,"root",`root_layout_${t}`,`root_variant_${e}`),a=l[e],d="small"===t?256:648,p="small"===t?40+50*s:42+62*s,f="small"===t?c:u;return(0,r.jsx)("div",{className:n,children:(0,r.jsx)(o.ZP,{speed:2,width:d,height:p,viewBox:`0 0 ${d} ${p}`,backgroundColor:a.background,foregroundColor:a.foreground,children:(0,r.jsx)(f,{segmentsCount:s})})})}));p.displayName="TicketPreviewSkeleton";const f=n.bind(d),g=(0,i.memo)((({variant:e="light",layout:t="normal",segmentsCount:s=1,skeletonsCount:n=0,className:o,skeletonClassName:l})=>{const c=f(l,"list_item"),u=(0,i.useMemo)((()=>a(0,n)),[n]);return 0===n?null:(0,r.jsx)("div",{className:o,children:u.map((i=>(0,r.jsx)(p,{className:c,segmentsCount:s,layout:t,variant:e},i)))})}));g.displayName="TicketPreviewSkeletonList"},18812:function(e,t,s){"use strict";function r(e){var t,s,i;if(Array.isArray(e)){for(s=Array(t=e.length);t--;)s[t]=(i=e[t])&&"object"==typeof i?r(i):i;return s}if("[object Object]"===Object.prototype.toString.call(e)){for(t in s={},e)"__proto__"===t?Object.defineProperty(s,t,{value:r(e[t]),configurable:!0,enumerable:!0,writable:!0}):s[t]=(i=e[t])&&"object"==typeof i?r(i):i;return s}return e}s.d(t,{Y:function(){return r}})}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/shared-e5dce5ed4ebdce0af28af3d9573b269bf11eda78.23a5fe601680ee6e1029.min.js.map