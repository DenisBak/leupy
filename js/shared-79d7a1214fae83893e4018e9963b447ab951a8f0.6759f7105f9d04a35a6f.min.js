"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[94310],{76588:function(e,t,r){r.d(t,{$J:function(){return _e},Bh:function(){return M},D3:function(){return R},Fs:function(){return Ie},Np:function(){return Fe},P3:function(){return xe},QO:function(){return z},Vs:function(){return we},XD:function(){return $e},ZR:function(){return Ee},_7:function(){return Pe},ac:function(){return n},cL:function(){return le},eE:function(){return B},q4:function(){return L},rP:function(){return G},s5:function(){return se},t6:function(){return Oe},tW:function(){return ue},zN:function(){return w}});var a=r(98116);const n={isData:e=>!0,getErrorMessages:()=>[]};function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},s.apply(this,arguments)}function o(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}function i(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function c(){const e={resolve:()=>{},reject:()=>{},promise:null};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e.promise.catch((()=>{})),e}function l(e,t){try{if(e===t)return!0;if(Number.isNaN(e)&&Number.isNaN(t))return!0;const r=u(e);if(r!==u(t))return!1;if("pure-object"===r){if(e===t)return!0;const r=Object.keys(e),a=Object.keys(t).length;if(r.length!==a)return!1;for(let a=0,n=r.length;a<n;a++){const n=r[a];if(!Object.prototype.hasOwnProperty.call(t,r[a]))return!1;const s=e[n],o=t[n];if(s===e||o===t||s===t||o===e)return s===o;if(!l(s,o))return!1}return!0}if("array"===r){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const a=e[r],n=t[r];if(a===e||n===t||a===t||n===e)return a===n;if(!l(a,n))return!1}return!0}if("object"===r&&e.valueOf&&t.valueOf)return e.valueOf()===t.valueOf()}catch(e){}return!1}function u(e){const t=typeof e;return"object"===t?null===e?"null":function(e){if(Array.isArray(e))return!0;const t=e.length;return"number"==typeof t&&t>-1&&(!t||0 in e&&t-1 in e)}(e)?"array":e.constructor===Object||null===Object.getPrototypeOf(e)?"pure-object":"object":t}function f(e){return t=>t[e]}const d="INVALID_DATA",p="TIMEOUT",m="ABORT",v="HTTP",h="NETWORK";function g(e){return s({},e,{errorType:d,explanation:"Response was considered as invalid against a given contract"})}function y(){return{errorType:m,explanation:"Request was cancelled due to concurrency policy"}}function b(e){return s({},e,{errorType:v,explanation:"Request was finished with unsuccessful HTTP code"})}let $=0;function k({field:e}){let t;if(void 0===e)t=(0,a.createStore)((e=>null),{serialize:"ignore",name:"ff.$target/undefined",sid:"ff.$target/undefined"});else if(a.is.store(e)){const r=e;t=(0,a.combine)(r,(e=>t=>null!=e?e:null))}else if((null==e?void 0:e.source)&&(null==e?void 0:e.fn)){const r=e;t=(0,a.combine)(r.source,(e=>t=>{var a;return null!==(a=r.fn(t,e))&&void 0!==a?a:null}))}else if("function"==typeof e){const r=e;t=(0,a.createStore)((e=>{var t;return null!==(t=r(e))&&void 0!==t?t:null}),{serialize:"ignore",name:"ff.$target/callbackField",sid:"ff.$target/$callbackField"})}else{const r=e;t=(0,a.createStore)((e=>null!=r?r:null),{serialize:"ignore",name:"ff.$target/valueField",sid:"ff.$target/$valueField"})}return t}function E(e){let t;if(void 0===e)t=(0,a.createEffect)((async e=>null));else if(a.is.store(e)){const r=e;t=(0,a.attach)({source:r,effect:async(e,t)=>e})}else if(e.source&&e.fn){const r=e;t=(0,a.attach)({source:r.source,effect:async(e,t)=>r.fn(t,e)})}else if("function"==typeof e){const r=e;t=(0,a.createEffect)((async e=>r(e)))}else{const r=e;t=(0,a.createEffect)((async e=>r))}return t}function _(e){return e?a.is.store(e)?e:(0,a.createStore)(e,{serialize:"ignore",name:"ff.$target/valueField",sid:"ff.$target/$valueField"}):(0,a.createStore)(null,{serialize:"ignore",name:"ff.$target/undefined",sid:"ff.$target/$undefined"})}function A(e){return a.is.store(e)?e:(null==e?void 0:e.source)?e.source:null}function w(e,t){const r={},n={};for(const[t,s]of Object.entries(e))a.is.store(s)?r[t]=s:(null==s?void 0:s.source)&&(null==s?void 0:s.fn)?(r[t]=s.source,n[t]=s.fn):"function"==typeof s?n[t]=s:r[t]=s;return{source:(0,a.combine)(r),fn:(r,a)=>{const s={};for(const t of Object.keys(e))t in a&&(s[t]=a[t]),t in n&&(s[t]=n[t](r,a[t]));return t?t(s):s}}}function P({clock:e,timeout:t,target:r=(0,a.createEvent)()}){const n=(0,a.createEffect)((({payload:e,milliseconds:t})=>new Promise((r=>{setTimeout(r,t,e)}))));return(0,a.sample)({source:_(t),clock:e,fn:(e,t)=>({payload:t,milliseconds:e}),target:n}),(0,a.sample)({clock:n.doneData,target:r}),r}function x(e,t){let r,n=[],s=()=>!1;Array.isArray(e)?(n=e,s=t):Array.isArray(e.stores)&&(n=e.stores,s=e.predicate),r="function"==typeof s?s:a.is.store(s)?s.map((e=>t=>e===t)):e=>e===s;const o=(0,a.combine)(n),i=r;return(0,a.combine)(i,o,((e,t)=>t.every(e)))}function S(e){return e.map((e=>!e))}function T(...e){return x({predicate:!0,stores:e})}function D(e){if("ignore"===e)return"ignore"}const q=(0,a.createEffect)((()=>Date.now()));function j(e){return e.map((e=>e),{skipVoid:!1})}function I(e){const t=(0,a.createEvent)(),r=(0,a.createStore)(null,{serialize:"ignore",name:"ff.$timeoutId",sid:"ff.$timeoutId"}).on(t,((e,t)=>t)),n=(0,a.createEvent)(),s=(0,a.createStore)(null,{serialize:"ignore",name:"ff.$rejecter",sid:"ff.$rejecter"}).on(n,((e,t)=>t)),o=(0,a.createEvent)(),i=(0,a.attach)({source:{timeoutId:r,rejectPromise:s},effect:({timeoutId:e,rejectPromise:r})=>(e&&clearTimeout(e),r&&r(),new Promise(((e,r)=>{n(r),t(setTimeout(e,0))})))});s.reset(i.done),r.reset(i.done);const c=(0,a.createStore)([],{serialize:"ignore",name:"ff.$payload",sid:"ff.$payload"}).on(e,((e,t)=>[t])),l=(0,a.createStore)(!0,{serialize:"ignore",sid:"ff.$canTick",name:"ff.$canTick"}),u=(0,a.createEvent)();return l.on(u,(()=>!1)).on([o,i],(()=>!0)),(0,a.sample)({clock:e,filter:l,target:u}),(0,a.sample)({clock:u,target:i}),(0,a.sample)({source:c,clock:i.done,fn:([e])=>e,target:o}),o}function O(e){return!0===e?[]:!1===e?["Invalid data"]:Array.isArray(e)?0===e.length?[]:e:[e]}const F=()=>!0;function z(e){var t;return(null===(t=e.error)||void 0===t?void 0:t.errorType)===d}function L(e){var t;return(null===(t=e.error)||void 0===t?void 0:t.errorType)===p}function R(e){var t;return(null===(t=e.error)||void 0===t?void 0:t.errorType)===v}function M(e){return function(t){return!!R(t)&&(Array.isArray(e)?e:[e]).includes(t.error.status)}}function B(e){var t;return(null===(t=e.error)||void 0===t?void 0:t.errorType)===h}function C(e){let t=e?"pending":"finished";function r(){t="finished",a.status=t}e&&e.promise.then(r,r);const a={id:""+N++,status:t,abort:(r=y())=>{"finished"!==t&&e&&e.reject(r)},promise:null==e?void 0:e.promise};return a}let N=0;function H({name:e,meta:t,kind:r,serialize:n,enabled:o,contract:i,validate:l,mapData:u,sourced:d,paramsAreMeaningless:p}){const v=(0,a.createEvent)(),h=(0,a.createEvent)(),y=(0,a.createEvent)(),b=(0,a.createEvent)(),$=function(e){return(0,a.createEffect)({handler:({result:t})=>{if(!e.isData(t))throw g({validationErrors:e.getErrorMessages(t),response:t});return t},sid:"ff.applyContractFx"})}(i),E=null!=e?e:"unnamed",A=(0,a.createEffect)({handler:()=>{throw new Error("Not implemented")},sid:`ff.${E}.executeFx`,name:`${E}.executeFx`}),w=function(e){const t=(0,a.createEvent)(e.shortName+".internalCall"),r=a.step.compute({fn:e=>{const r=(a=e.handler,n=t,function(...e){const t=a(...e);if(t instanceof Promise){const e=c(),r=C(e);return n(r),t.then(e.resolve,e.reject),e.promise}{const e=C();return n(e),t}});var a,n;return e.handler=r,e}}),n=function(e){return e.graphite.scope.runner}(e);return n.seq.splice(1,0,r),t}(A),P=[{name:"remote_source",get:(0,a.createEffect)((async({params:e})=>({result:await A(e),stale:!1})))}],{retrieveDataFx:x,notifyAboutNewValidDataFx:T,notifyAboutDataInvalidationFx:D}=function(e){return{retrieveDataFx:(0,a.createEffect)({handler:async({params:t,skipStale:r})=>{for(const a of e)try{const e=await a.get({params:t});if(r&&(null==e?void 0:e.stale))continue;if(e)return e}catch(e){throw{stopErrorPropagation:!1,error:e}}throw{stopErrorPropagation:!1,error:new Error("No data source returned data")}}}),notifyAboutNewValidDataFx:(0,a.createEffect)({handler:async({params:t,result:r})=>{await Promise.all(e.map(f("set")).filter(Boolean).map((e=>e({params:t,result:r}))))}}),notifyAboutDataInvalidationFx:(0,a.createEffect)({handler:async({params:t})=>{await Promise.all(e.map(f("unset")).filter(Boolean).map((e=>e({params:t}))))}})}}(P),q=(0,a.createEvent)(),I=(0,a.createEvent)();(0,a.sample)({clock:q,fn:e=>({params:e,meta:{stopErrorPropagation:!1,stale:!0}}),target:b});const z={success:(0,a.createEvent)(),failure:(0,a.createEvent)(),skip:(0,a.createEvent)(),finally:(0,a.createEvent)()},L=(0,a.createEvent)(),R=(0,a.createEvent)();(0,a.split)({source:L,match:{aborted:({error:e})=>{return(null===(t={error:e}.error)||void 0===t?void 0:t.errorType)===m;var t}},cases:{aborted:R,__:z.failure}});const M=(0,a.createStore)("initial",{sid:`ff.${E}.$status`,name:`ff.${E}.$status`,serialize:n}),B=(0,a.createEvent)();(0,a.sample)({clock:B,target:M.reinit});const N=(0,a.createStore)([],{serialize:"ignore",name:`ff.${E}.$statusHistory`,sid:`ff.${E}.$statusHistory`});(0,a.sample)({clock:M.updates,source:N,fn:(e,t)=>[...e,t],target:N});const H=_(null==o||o).map(Boolean),U=(0,a.createStore)(void 0,{serialize:"ignore",name:`ff.${E}.$latestParams`,sid:`ff.${E}.$latestParams`,skipVoid:!1}),V=M.map((e=>"initial"===e)),K=M.map((e=>"pending"===e)),Q=M.map((e=>"fail"===e)),J=M.map((e=>"done"===e)),W=M.map((e=>["fail","done"].includes(e)));(0,a.sample)({clock:[x.map((()=>"pending")),z.success.map((()=>"done")),z.failure.map((()=>"fail")),(0,a.sample)({clock:R,source:{history:N,retrieveDataPengind:x.pending},fn:({history:e,retrieveDataPengind:t})=>{var r;return t?"pending":null!==(r=e[e.length-2])&&void 0!==r?r:"initial"}})],target:M}),(0,a.sample)({clock:b,filter:H,fn:({params:e})=>e,target:U}),(0,a.sample)({clock:q,filter:S(H),fn:e=>({params:e,meta:{stopErrorPropagation:!1,stale:!1}}),target:z.skip}),(0,a.sample)({clock:v,fn:({params:e})=>({params:e,meta:{stopErrorPropagation:!1,stale:!0}}),target:D}),(0,a.sample)({clock:D.finally,source:v,filter:({refresh:e})=>e,fn:({params:e})=>({params:e,meta:{stopErrorPropagation:!1,stale:!0}}),target:b}),(0,a.sample)({clock:b,filter:H,target:x}),(0,a.sample)({clock:x,target:I}),(0,a.sample)({clock:x.done,fn:({params:e,result:t})=>({params:e.params,result:t.result,meta:{stopErrorPropagation:!1,stale:t.stale}}),filter:H,target:$}),(0,a.sample)({clock:x.fail,source:H,filter:(e,{error:t})=>e&&!t.stopErrorPropagation,fn:(e,{error:t,params:r})=>({error:t.error,params:r.params,meta:{stopErrorPropagation:t.stopErrorPropagation,stale:!1}}),target:L});const{validDataRecieved:G,__:X}=(0,a.split)((0,a.sample)({clock:$.done,source:{partialValidator:k({field:null!=l?l:F})},fn:({partialValidator:e},{params:{params:t,meta:r},result:a})=>({result:a,params:t,validation:e({result:a,params:t}),meta:r})}),{validDataRecieved:({validation:e})=>{return!0===(t=e)||!(!Array.isArray(t)||0!==t.length)||"string"==typeof t&&0===t.length;var t}});return(0,a.sample)({clock:G,source:{partialMapper:k({field:u})},fn:({partialMapper:e},{params:t,result:r,meta:a})=>({result:e({params:t,result:r}),params:t,meta:a}),target:z.success}),(0,a.sample)({clock:z.success,filter:({meta:e})=>e.stale,fn:({params:e,meta:t})=>({params:e,meta:t,skipStale:!0}),target:x}),(0,a.sample)({clock:G,filter:({meta:e})=>!e.stale,target:T}),(0,a.sample)({clock:$.fail,filter:({params:e})=>!e.meta.stopErrorPropagation,fn:({error:e,params:t})=>({error:e,params:t.params,meta:t.meta}),target:L}),(0,a.sample)({clock:X,filter:({meta:e})=>!e.stopErrorPropagation,fn:({params:e,validation:t,meta:r,result:a})=>({params:e,error:g({validationErrors:O(t),response:a}),meta:r}),target:L}),(0,a.sample)({clock:H.updates,source:q,filter:S(H),fn:e=>({params:e,meta:{stopErrorPropagation:!1,stale:!0}}),target:z.skip}),(0,a.sample)({clock:z.success,fn:({params:e,result:t,meta:r})=>({status:"done",params:e,result:t,meta:r}),target:z.finally}),(0,a.sample)({clock:z.failure,fn:({params:e,error:t,meta:r})=>({status:"fail",params:e,error:t,meta:r}),target:z.finally}),(0,a.sample)({clock:z.skip,fn:({params:e,meta:t})=>({status:"skip",params:e,meta:t}),target:z.finally}),{start:q,finished:z,started:I,aborted:R,$status:M,$idle:V,$pending:K,$failed:Q,$succeeded:J,$finished:W,$enabled:H,__:{executeFx:A,meta:s({},t,{name:E}),kind:r,$latestParams:j(U),lowLevelAPI:{dataSources:P,dataSourceRetrieverFx:x,sourced:null!=d?d:[],paramsAreMeaningless:null!=p&&p,revalidate:v,pushError:y,pushData:h,startWithMeta:b,callObjectCreated:w,resetStatus:B}}}}const U=Symbol("Query"),V=["params"];function K(e){const{initialData:t,contract:r,mapData:n,enabled:i,validate:c,name:u,serialize:f,sourced:d,paramsAreMeaningless:p}=e,m=null!=t?t:null,v=H({name:u,kind:U,serialize:D(f),enabled:i,meta:{serialize:f,initialData:m,sid:Q((0,a.createStore)(null,{sid:"dummy"}))},contract:r,validate:c,mapData:n,sourced:d,paramsAreMeaningless:p}),h=(0,a.createEvent)(),g=(0,a.createEvent)(),y=(0,a.createStore)(m,{sid:`ff.${v.__.meta.name}.$data`,name:`${v.__.meta.name}.$data`,serialize:f,skipVoid:!1}),b=(0,a.createStore)(null,{sid:`ff.${v.__.meta.name}.$error`,name:`${v.__.meta.name}.$error`,serialize:D(f),skipVoid:!1}),$=(0,a.createStore)(!0,{sid:`ff.${v.__.meta.name}.$stale`,name:`${v.__.meta.name}.$stale`,serialize:D(f),skipVoid:!1});(0,a.sample)({clock:v.finished.success,fn:()=>null,target:b}),(0,a.sample)({clock:v.finished.success,fn:({result:e})=>e,target:y}),y.reset(v.finished.failure),(0,a.sample)({clock:v.finished.failure,fn:({error:e})=>e,target:b}),(0,a.sample)({clock:v.finished.finally,fn:({meta:e})=>e.stale,target:$}),(0,a.sample)({clock:v.__.lowLevelAPI.pushData,target:[y,b.reinit]}),(0,a.sample)({clock:v.__.lowLevelAPI.pushError,target:[b,y.reinit]});const k=function({clock:e,until:t}){const r=(0,a.createEvent)(),n=(0,a.createStore)(!1,{serialize:"ignore",name:"ff.$fired",sid:"ff.$fired"}).on(r,(()=>!0)).on(e,(()=>!1));return(0,a.sample)({clock:[e,t],source:e,filter:T(t,S(n)),target:r}),r}({clock:h,until:v.$enabled}),E=(0,a.createEvent)(),{haveToStart:_,__:A}=(0,a.split)((0,a.sample)({clock:k,source:{stale:$,latestParams:v.__.$latestParams},fn:({stale:e,latestParams:t},r)=>({haveToStart:e||!l(r,t),params:r})}),{haveToStart:({haveToStart:e})=>e});(0,a.sample)({clock:A,fn:()=>null,target:E}),(0,a.sample)({clock:_,fn:({params:e})=>e,target:v.start}),(0,a.sample)({clock:g,target:[y.reinit,b.reinit,$.reinit,v.__.lowLevelAPI.resetStatus]});const w={data:y,error:b,stale:$,pending:v.$pending,start:v.start};return{reset:g,refresh:h,start:v.start,started:j(v.started),$data:j(y),$error:j(b),$status:j(v.$status),$idle:j(v.$idle),$pending:j(v.$pending),$succeeded:j(v.$succeeded),$failed:j(v.$failed),$finished:j(v.$finished),$enabled:j(v.$enabled),$stale:$,aborted:j(v.aborted),finished:{success:j(v.finished.success),failure:j(v.finished.failure),finally:j(v.finished.finally),skip:j(v.finished.skip)},__:s({},v.__,{lowLevelAPI:s({},v.__.lowLevelAPI,{refreshSkipDueToFreshness:E}),experimentalAPI:{attach:({source:t,mapParams:r})=>{const n=K(e);return n.__.lowLevelAPI.dataSourceRetrieverFx.use((0,a.attach)({source:t,mapParams:(e,t)=>{let{params:a}=e,n=o(e,V);return s({params:r?r(a,t):a},n)},effect:v.__.lowLevelAPI.dataSourceRetrieverFx})),n}}}),"@@unitShape":()=>w}}function Q(e){const t=e.sid;return(null==t?void 0:t.includes("|"))?t:null}function J(e){const t=e;if(a.is.effect(t.effect))return t.effect;if("function"==typeof t.handler)return(0,a.createEffect)(t.handler);throw new W("handler or effect must be passed to the config")}class W extends Error{constructor(e){super(e)}}function G(e){var t,r,a;const s=K({initialData:null!==(t=e.initialData)&&void 0!==t?t:null,contract:null!==(r=e.contract)&&void 0!==r?r:n,mapData:null!==(a=e.mapData)&&void 0!==a?a:({result:e})=>e,enabled:e.enabled,validate:e.validate,name:e.name,serialize:e.serialize});return s.__.executeFx.use(J(e)),s}function X(...e){const t={};for(const r of e)if("object"==typeof r)for(const[e,a]of Object.entries(r||{})){const r=ee(a);null!==r&&(t[e]?t[e]=[t[e],r].flat():t[e]=r)}return t}function Y(e){const t=new Headers;for(const[r,a]of Object.entries(e)){const e=ee(a);if(Array.isArray(e))for(const a of e)t.append(r,a);else null!==e&&t.append(r,e)}return t}function Z(e){const t=new URLSearchParams;for(const[r,a]of Object.entries(e)){const e=ee(a);if(Array.isArray(e))for(const a of e)t.append(r,a);else null!==e&&t.append(r,e)}return t}function ee(e){return"number"==typeof e||"boolean"==typeof e?e.toString():null!=e?e:null}const te=(0,a.createEffect)({sid:"ff.fetchFx",handler:globalThis.fetch}),re=(0,a.createEffect)({handler:async e=>{var t;const r=await te(e).catch((e=>{var t;throw s({},{reason:null!==(t=null==e?void 0:e.message)&&void 0!==t?t:null,cause:e},{errorType:h,explanation:"Request was failed due to network problems"})}));if(!r.ok)throw b({status:r.status,statusText:r.statusText,response:null!==(t=await r.text().catch((()=>null)))&&void 0!==t?t:null});return r},sid:"ff.requestFx"});function ae(e){var t,r;const n=(0,a.createEffect)(e.response.extract),o=(0,a.createStore)(!1,{serialize:"ignore",name:"ff.$haveToBeAborted",sid:"ff.$haveToBeAborted"}),i=(0,a.createEffect)((async({url:t,method:r,query:a,headers:o,credentials:i,body:c,onAbort:l,haveToBeAborted:u})=>{const f=new AbortController;if(l((()=>{f.abort()})),u)throw y();const d=c?e.request.mapBody(c):null,p=new Request(function(e,t){let r,a;a="string"==typeof t?t:Z(t).toString(),r=a?`${e}?${a}`:e;try{return new URL(r)}catch(e){throw s({},{reason:"Invalid URL",validationErrors:[`"${r}" is not valid URL`]},{errorType:"CONFIGURATION",explanation:"Operation is misconfigured"})}}(t,a),{method:r,headers:Y(o),credentials:i,body:d,signal:f.signal}),m=await re(p).catch((t=>{if(e.response.transformError)throw e.response.transformError(t);throw t})),v=m.clone(),h=await n(m).catch((async e=>{var t;throw function(e){return s({},e,{errorType:"PREPARATION",explanation:"Extraction of data from the response was failed"})}({response:await v.text(),reason:null!==(t=null==e?void 0:e.message)&&void 0!==t?t:null})}));if(e.response.status){const t=Array.isArray(e.response.status.expected)?e.response.status.expected:[e.response.status.expected];if(!t.includes(m.status))throw g({validationErrors:[`Expected response status has to be one of [${t.join(", ")}], got ${m.status}`],response:h})}return h})),l=(0,a.attach)({source:{url:_(e.request.url),method:_(e.request.method),query:_(e.request.query),headers:_(e.request.headers),credentials:_(e.request.credentials),body:_(e.request.body),haveToBeAborted:o},mapParams(e,t){var r,a,n;const s=null!==(r=t.url)&&void 0!==r?r:e.url,o=null!==(a=t.credentials)&&void 0!==a?a:e.credentials,i=null!==(n=t.body)&&void 0!==n?n:e.body,c=function(...e){const t=[];for(const r of e){if(!r)continue;let e;e="string"!=typeof r?Z(r).toString():r,t.push(e)}return t.join("&")}(t.query,e.query),l=X(t.headers,e.headers),{method:u,haveToBeAborted:f}=t,{onAbort:d}=e;return{url:s,method:u,query:c,headers:l,credentials:o,body:i,onAbort:d,haveToBeAborted:f}},effect:i}),u=(0,a.createEvent)(),f=function(e){var t,r;const{abort:n,effect:s}=e,o=(0,a.createEffect)((async e=>await e.promise)),i=(0,a.createStore)([],{serialize:"ignore",name:"ff.$calls",sid:"ff.$calls"}),l=(0,a.createApi)(i,{add:(e,t)=>[...e,t],remove:(e,t)=>e.filter((e=>e!==t))});if(null==n?void 0:n.signal){const e=(0,a.createEffect)((e=>{e.forEach((e=>{var t,r;null===(r=null===(t=e.context)||void 0===t?void 0:t.runAborters)||void 0===r||r.call(t),e.reject(y())}))}));(0,a.sample)({clock:n.signal,source:i,target:e})}const u=(0,a.createEffect)({name:null!==(t=e.name)&&void 0!==t?t:"runnerFx",sid:(null!==(r=e.name)&&void 0!==r?r:"runnerFx")+($+=1,$),handler:async e=>{const{runAborters:t,onAbort:r}=(()=>{let e=[];return{runAborters:()=>{e.forEach((e=>e())),e=[]},onAbort:t=>(e.push(t),()=>{const r=e.findIndex((e=>e===t));r>-1&&e.splice(r,1)})}})(),n=(e=>{const t=c();return t.context=e,t})({runAborters:t});let i;l.add(n);try{i=(0,a.scopeBind)(l.remove)}catch(e){i=l.remove}return(async(...e)=>s(...e))(e,{onAbort:r}).then(n.resolve).catch(n.reject).finally((()=>i(n))),await o(n)}});return u}({abort:{signal:u},effect:(e,t)=>l(s({},e,t))});switch((null===(t=e.abort)||void 0===t?void 0:t.clock)&&(0,a.sample)({clock:e.abort.clock,target:u}),null===(r=e.concurrency)||void 0===r?void 0:r.strategy){case"TAKE_LATEST":(0,a.sample)({clock:f,target:u});break;case"TAKE_FIRST":(0,a.sample)({clock:i,fn:()=>!0,target:o}),(0,a.sample)({clock:f.finally,fn:()=>!1,target:o})}return f}function ne(e){var t;const r=(0,a.combine)({method:_(e.request.method),headers:_(e.request.headers)},(({method:e,headers:t})=>X({Accept:"application/json","Content-Type":["GET","HEAD"].includes(e)?void 0:"application/json"},t)));return ae(s({},e,{request:s({},e.request,{headers:r,mapBody:e=>JSON.stringify(e)}),response:{extract:async e=>{const t=await async function(e){if(!e.body)return!0;if("0"===e.headers.get("Content-Length"))return!0;const t=e.clone();return 0===(await t.text()).length}(e);return t?null:e.json()},transformError:e=>{if(!R({error:e}))return e;const t=e;if("string"!=typeof t.response)return t;try{const e=JSON.parse(t.response);return b({status:t.status,statusText:t.statusText,response:e})}catch(e){return t}},status:null===(t=e.response)||void 0===t?void 0:t.status}}))}function se(e){var t,r,o,i,c,l;const u=null!==(t=e.request.credentials)&&void 0!==t?t:"same-origin",f=ne({request:{method:e.request.method,credentials:u},concurrency:{strategy:null!==(o=null===(r=e.concurrency)||void 0===r?void 0:r.strategy)&&void 0!==o?o:"TAKE_LATEST"},abort:{clock:null===(i=e.concurrency)||void 0===i?void 0:i.abort}}),d=K({initialData:e.initialData,contract:null!==(c=e.response.contract)&&void 0!==c?c:n,mapData:null!==(l=e.response.mapData)&&void 0!==l?l:({result:e})=>e,validate:e.response.validate,enabled:e.enabled,name:e.name,serialize:e.serialize,sourced:[e.request.url,e.request.body,e.request.headers,e.request.query],paramsAreMeaningless:!0});return d.__.executeFx.use((0,a.attach)({source:{partialUrl:k({field:e.request.url}),partialBody:k({field:e.request.body}),partialHeaders:k({field:e.request.headers}),partialQuery:k({field:e.request.query})},mapParams:(e,{partialUrl:t,partialBody:r,partialHeaders:a,partialQuery:n})=>({url:t(e),body:r(e),headers:a(e),query:n(e)}),effect:f})),s({},d,{__:s({},d.__,{executeFx:f})})}const oe=Symbol("Mutation"),ie=["params"];function ce(e){const{name:t,enabled:r,contract:n,validate:i,mapData:c}=e,l=H({name:t,serialize:"ignore",enabled:r,kind:oe,meta:null,contract:n,validate:i,mapData:c}),u={pending:l.$pending,start:l.start};return{start:l.start,started:j(l.started),aborted:j(l.aborted),$status:j(l.$status),$idle:j(l.$idle),$pending:j(l.$pending),$succeeded:j(l.$succeeded),$failed:j(l.$failed),$finished:j(l.$finished),$enabled:j(l.$enabled),finished:{success:j(l.finished.success),failure:j(l.finished.failure),finally:j(l.finished.finally),skip:j(l.finished.skip)},__:s({},l.__,{experimentalAPI:{attach:({source:t,mapParams:r})=>{const n=ce(e);return n.__.lowLevelAPI.dataSourceRetrieverFx.use((0,a.attach)({source:t,mapParams:(e,t)=>{let{params:a}=e,n=o(e,ie);return s({params:r?r(a,t):a},n)},effect:l.__.lowLevelAPI.dataSourceRetrieverFx})),n}}}),"@@unitShape":()=>u}}function le(e){var t;const r=ce({name:e.name,enabled:e.enabled,contract:null!==(t=e.contract)&&void 0!==t?t:n,mapData:({result:e})=>e});return r.__.executeFx.use(J(e)),r}function ue(e){var t,r,o,i;const c=null!==(t=e.request.credentials)&&void 0!==t?t:"same-origin",l=ne({request:{method:e.request.method,credentials:c},concurrency:{strategy:"TAKE_EVERY"},response:{status:e.response.status},abort:{clock:null===(r=e.concurrency)||void 0===r?void 0:r.abort}}),u=ce({contract:null!==(o=e.response.contract)&&void 0!==o?o:n,mapData:null!==(i=e.response.mapData)&&void 0!==i?i:({result:e})=>e,validate:e.response.validate,enabled:e.enabled,name:e.name});return u.__.executeFx.use((0,a.attach)({source:{partialUrl:k({field:e.request.url}),partialBody:k({field:e.request.body}),partialHeaders:k({field:e.request.headers}),partialQuery:k({field:e.request.query})},mapParams:(e,{partialUrl:t,partialBody:r,partialHeaders:a,partialQuery:n})=>({url:t(e),body:r(e),headers:a(e),query:n(e)}),effect:l})),s({},u,{__:s({},u.__,{executeFx:l})})}const fe=["ms","milli","millisecond","milliseconds"],de=["s","sec","secs","second","seconds"],pe=["m","min","mins","minute","minutes"],me=["h","hr","hrs","hour","hours"];function ve(e){if("number"==typeof e)return e;let t=0;for(const r of e.split(" "))switch(!0){case he(r,fe):t+=ge(r);break;case he(r,de):t+=1e3*ge(r);break;case he(r,pe):t+=6e4*ge(r);break;case he(r,me):t+=36e5*ge(r)}return t}function he(e,t){return t.includes(function(e){return e.replace(/[0-9.]/g,"")}(e))}function ge(e){return e.includes(".")?parseFloat(e):parseInt(e)}const ye=["times","delay","filter","mapParams"],be=["supressError"];function $e(e,t){let{times:r,delay:n,filter:i,mapParams:c}=t,l=o(t,ye);var u;const f=null===(u=l.supressIntermediateErrors)||void 0===u||u,d=_(r),p=(0,a.createStore)(1,{serialize:"ignore",name:"ff.$attempt",sid:"ff.$attempt"}),m=(0,a.combine)({attempt:p}),v=(0,a.combine)(p,d,((e,t)=>f&&e<=t)),h=(0,a.createEvent)(),g=(0,a.createEvent)(),{planNextAttempt:y,__:b}=(0,a.split)((0,a.sample)({clock:h,source:{maxAttempts:d,attempt:p,partialFilter:k({field:null==i||i})},filter:({partialFilter:e},t)=>e(t),fn:({attempt:e,maxAttempts:t},{params:r,error:a,meta:n})=>({params:r,error:a,meta:s({},n,{attempt:e,maxAttempts:t})})}),{planNextAttempt:({meta:e})=>e.attempt<=e.maxAttempts});if((0,a.sample)({clock:P({clock:(0,a.sample)({clock:y,source:{partialMapper:k({field:null!=c?c:({params:e})=>e})},fn:({partialMapper:e},t)=>e(t)}),timeout:(0,a.combine)({partialTimeout:k({field:n}),meta:m},(({partialTimeout:e,meta:t})=>ve(e(t))))}),fn:e=>({params:e,meta:{stopErrorPropagation:!1,stale:!0}}),target:[g,e.__.lowLevelAPI.startWithMeta]}),p.on(g,(e=>e+1)).reset([e.finished.success,e.start]),l.otherwise&&(0,a.sample)({clock:b,target:l.otherwise}),f){const t=e.__.lowLevelAPI.dataSourceRetrieverFx.use.getCurrent();e.__.lowLevelAPI.dataSourceRetrieverFx.use((0,a.attach)({source:v,mapParams:(e,t)=>s({},e,{supressError:t}),effect:(0,a.createEffect)((async e=>{let{supressError:r}=e,n=o(e,be);const s=(0,a.scopeBind)(h,{safe:!0});try{return await t(n)}catch(e){throw r?(s({params:n.params,error:e.error,meta:n.meta}),{error:e.error,stopErrorPropagation:!0}):e}}))}))}(0,a.sample)({clock:e.finished.failure,target:h})}const ke={randomize:{spread:0}};function Ee(e,t=ke){return function({attempt:r}){return e*r+Ae(t)}}function _e(e,t=ke){return function({attempt:r}){return e**r+Ae(t)}}function Ae({randomize:e}){const{spread:t}=e;return function({min:e,max:t}){return Math.random()*(t-e)+e}({min:-t,max:t})}function we(e,t){const r=(0,a.attach)({source:_(t.after).map(ve),effect:(e,t)=>new Promise((r=>{var a;const n=setTimeout((()=>{t.abort(function(e){return s({},e,{errorType:p,explanation:"Request was cancelled due to timeout"})}({timeout:e})),r()}),e),o=()=>{clearTimeout(n),r()};null===(a=t.promise)||void 0===a||a.then(o,o)}))});(0,a.sample)({clock:e.__.lowLevelAPI.callObjectCreated,target:r})}function Pe(e,t){var r;const{source:n,mapParams:s}=null!=t?t:{};return null===(r=e.__.experimentalAPI)||void 0===r?void 0:r.attach({source:null!=n?n:(0,a.createStore)(null,{serialize:"ignore"}),mapParams:null!=s?s:e=>e})}function xe(e){const{maxEntries:t,maxAge:r,observability:n}=null!=e?e:{};let c={};const l=(0,a.createEvent)(),u=(0,a.createEvent)(),f=(0,a.createEvent)(),d=(0,a.createEvent)(),p=(0,a.createEvent)();p.watch((()=>{c={}}));const m=function({clock:e}){const t=(0,a.createStore)(Date.now(),{name:"ff.$time",sid:"ff.$time"});return(0,a.sample)({clock:e,fn:()=>{},target:q}),(0,a.sample)({clock:q.doneData,target:t}),t}({clock:l}),v=(0,a.sample)({clock:l,source:{now:m},fn:({now:e},{key:r,value:a})=>function(e,{key:t,entry:r},a){if(void 0===a)return{next:s({},e,{[t]:r}),evicted:null};const n=Object.keys(e);if(n.length<a)return{next:s({},e,{[t]:r}),evicted:null};const[c]=n;return{next:s({},o(e,[c].map(i)),{[t]:r}),evicted:c}}(c,{key:r,entry:{value:a,cachedAt:e}},t)});if(v.watch((({next:e})=>{c=e})),(0,a.sample)({clock:v,filter:({evicted:e})=>!!e,fn:({evicted:e})=>({key:e}),target:d}),u.watch((({key:e})=>{const t=o(c,[e].map(i));c=t})),r){const e=ve(r);l.watch((t=>{const r=(0,a.scopeBind)(f,{safe:!0});setTimeout((()=>r(t)),e)})),(0,a.sample)({clock:f,fn:({key:e})=>({key:e}),target:u})}const h={get:(0,a.createEffect)((({key:e})=>{var t;const a=null!==(t=c[e])&&void 0!==t?t:null;if(!a)return null;if(r){const t=(null==a?void 0:a.cachedAt)+ve(r);if(Date.now()>=t)return u({key:e}),null}return a})),set:(0,a.createEffect)(l),unset:(0,a.createEffect)(u),purge:p};return function({adapter:e,options:t,events:r}){(null==t?void 0:t.hit)&&(0,a.sample)({clock:e.get.done,filter:({result:e})=>null!==e,fn:({params:e})=>({key:e.key}),target:t.hit}),(null==t?void 0:t.miss)&&(0,a.sample)({clock:e.get.done,filter:({result:e})=>null===e,fn:({params:e})=>({key:e.key}),target:t.miss}),(null==t?void 0:t.expired)&&(null==r?void 0:r.itemExpired)&&(0,a.sample)({clock:r.itemExpired,fn:({key:e})=>({key:e}),target:t.expired}),(null==t?void 0:t.evicted)&&(null==r?void 0:r.itemEvicted)&&(0,a.sample)({clock:r.itemEvicted,target:t.evicted})}({adapter:h,options:n,events:{itemExpired:f,itemEvicted:d}}),function(e){return s({},e,{__:{$instance:(0,a.createStore)(e,{serialize:"ignore",name:"ff.$cacheInstance",sid:"ff.$cacheInstance"})}})}(h)}function Se(e,t,r,a){switch(e){case 0:return t&r^~t&a;case 1:case 3:return t^r^a;case 2:return t&r^t&a^r&a}}function Te(e,t){return e<<t|e>>>32-t}function De(e){let t,r="";for(let a=7;a>=0;a--)t=e>>>4*a&15,r+=t.toString(16);return r}function qe({sid:e,params:t=null,sources:r}){try{return function(e){let t=e.replace(/[\u0080-\u07ff]/g,(e=>{const t=e.charCodeAt(0);return String.fromCharCode(192|t>>6,128|63&t)})).replace(/[\u0800-\uffff]/g,(function(e){const t=e.charCodeAt(0);return String.fromCharCode(224|t>>12,128|t>>6&63,128|63&t)}));const r=[1518500249,1859775393,2400959708,3395469782];t+=String.fromCharCode(128);const a=t.length/4+2,n=Math.ceil(a/16),s=new Array(n);for(let e=0;e<n;e++){s[e]=new Array(16);for(let r=0;r<16;r++)s[e][r]=t.charCodeAt(64*e+4*r)<<24|t.charCodeAt(64*e+4*r+1)<<16|t.charCodeAt(64*e+4*r+2)<<8|t.charCodeAt(64*e+4*r+3)}s[n-1][14]=8*(t.length-1)/Math.pow(2,32),s[n-1][14]=Math.floor(s[n-1][14]),s[n-1][15]=8*(t.length-1)&4294967295;let o=1732584193,i=4023233417,c=2562383102,l=271733878,u=3285377520;const f=new Array(80);let d,p,m,v,h;for(let e=0;e<n;e++){for(let t=0;t<16;t++)f[t]=s[e][t];for(let e=16;e<80;e++)f[e]=Te(f[e-3]^f[e-8]^f[e-14]^f[e-16],1);d=o,p=i,m=c,v=l,h=u;for(let e=0;e<80;e++){const t=Math.floor(e/20),a=Te(d,5)+Se(t,p,m,v)+h+r[t]+f[e]&4294967295;h=v,v=m,m=Te(p,30),p=d,d=a}o=o+d&4294967295,i=i+p&4294967295,c=c+m&4294967295,l=l+v&4294967295,u=u+h&4294967295}return De(o)+De(i)+De(c)+De(l)+De(u)}(function(e){const t=new Set;return function e(r){if(void 0===r)return;if(null===r)return"null";if("number"==typeof r)return isFinite(r)?`${r}`:"null";if("function"==typeof r)throw new TypeError("Can't serialize function");if("object"!=typeof r)return JSON.stringify(r);if(t.has(r))throw new TypeError("Can't serialize cyclic structure");if(t.add(r),Array.isArray(r)){const a=r.map((t=>e(t)||"null")).join(",");return t.delete(r),`[${a}]`}const a=Object.keys(r).sort().map((t=>{const a=e(r[t]);return a?`${e(t)}:${a}`:""})).filter(Boolean).join(",");return t.delete(r),`{${a}}`}(e)}({params:t,sources:r,sid:e}))}catch(e){return null}}const je=new Set;function Ie(e,t){var r;const{adapter:n,staleAfter:o,purge:i}=s({adapter:null!==(r=null==t?void 0:t.adapter)&&void 0!==r?r:xe()},t),c=function(e){const t=function(e){var t;return null!==(t=e.__.meta.sid)&&void 0!==t?t:null}(e);if(t)return t;const r=function(e){const t=e.__.meta.name;return je.has(t)?null:(je.add(t),t)}(e);if(r)return r;throw new Error("Query does not have sid or uniq name, which is required for caching, read more https://farfetched.pages.dev/recipes/sids.html")}(e),l=e.__.lowLevelAPI.sourced.map(E),u=(0,a.createEffect)((async e=>Promise.all(l.map((t=>t(e)))))),f=(0,a.createEffect)((async({instance:t,params:r})=>{const a=await u(r),n=qe({sid:c,params:e.__.lowLevelAPI.paramsAreMeaningless?null:r,sources:a});n&&await t.unset({key:n})})),d=(0,a.createEffect)((async({instance:t,params:r,result:a})=>{const n=await u(r),s=qe({sid:c,params:e.__.lowLevelAPI.paramsAreMeaningless?null:r,sources:n});s&&await t.set({key:s,value:a})})),p=(0,a.createEffect)((async({params:t,instance:r})=>{const a=await u(t),n=qe({sid:c,params:e.__.lowLevelAPI.paramsAreMeaningless?null:t,sources:a});if(!n)return null;const s=await r.get({key:n});if(!s)return null;const i=!o||s.cachedAt+ve(o)<=Date.now();return{result:s.value,stale:i}})),m={name:"cache",get:(0,a.attach)({source:{instance:n.__.$instance},mapParams:({params:e},{instance:t})=>({params:e,instance:t}),effect:p}),set:(0,a.attach)({source:{instance:n.__.$instance},mapParams:({params:e,result:t},{instance:r})=>({params:e,result:t,instance:r}),effect:d}),unset:(0,a.attach)({source:{instance:n.__.$instance},mapParams:({params:e},{instance:t})=>({instance:t,params:e}),effect:f})};e.__.lowLevelAPI.dataSources.unshift(m),i&&(0,a.sample)({clock:i,source:{instance:n.__.$instance},target:(0,a.createEffect)((({instance:e})=>e.purge()))})}function Oe(){return(0,a.createEvent)()}function Fe(e,t){var r;const n=[],[s,o]=function(e,t){const r=[],a=[];for(const n of e)t(n)?r.push(n):a.push(n);return[r,a]}(null!==(r=t.triggers)&&void 0!==r?r:[],a.is.event);n.push(...s);const i=[e.$enabled];void 0!==t.enabled&&i.push(t.enabled);const c=x({predicate:Boolean,stores:i});if(o.length>0){const t=o.map((e=>e["@@trigger"]())),r=(0,a.createStore)(!1,{serialize:"ignore",name:"ff.$alreadySetup",sid:"ff.$alreadySetup"}),{setup:s,teardown:i}=(0,a.createApi)(r,{setup:()=>!0,teardown:()=>!1});(0,a.sample)({clock:[e.finished.success,(0,a.sample)({clock:c.updates,filter:c})],filter:S(r),target:[...t.map(f("setup")),s]}),(0,a.sample)({clock:c.updates,filter:T(r,S(c)),target:[...t.map(f("teardown")),i]}),n.push(...t.map(f("fired")))}if(t.automatically){const t=e.finished.finally.map(f("params")),r=(0,a.createStore)([],{serialize:"ignore",name:"ff.$previousSources",sid:"ff.$previousSources"}),s=(0,a.combine)(e.__.lowLevelAPI.sourced.map((e=>k({field:e}))));(0,a.sample)({clock:t,source:s,fn:(e,t)=>e.map((e=>e(t))),filter:c,target:r});const o=(0,a.createStore)(null,{serialize:"ignore",name:"ff.$nextSources",sid:"ff.$nextSources"});(0,a.sample)({clock:e.__.lowLevelAPI.sourced.map(A).filter(a.is.store),source:{latestParams:e.__.$latestParams,partialSources:s},filter:S(e.$idle),fn:({latestParams:e,partialSources:t})=>t.map((t=>t(e))),target:o}),n.push((0,a.sample)({clock:[o.updates,c.updates.filter({fn:Boolean})],source:[o,r],filter:([e,t])=>!l(e,t)}))}const u=(0,a.sample)({clock:n,filter:c});(0,a.sample)({clock:u,filter:S(e.$idle),fn:()=>!0,target:e.$stale}),(0,a.sample)({clock:I(u),source:e.__.$latestParams,filter:S(e.$idle),target:e.refresh})}},80472:function(e,t,r){function a(e){return{isData:e.guard,getErrorMessages(t){const r=e.validate(t);return r.success?[]:r.details?n(r.details):[r.message]}}}function n(e,t,r){const a=(o=r,(s=t)&&o?`${s}.${o}`:null!=s?s:o);var s,o;return"string"==typeof e?a?[`${a}: ${e}`]:[e]:Array.isArray(e)?e.flatMap(((e,t)=>n(e,a,t.toString()))):Object.entries(e).flatMap((([e,t])=>n(t,a,e)))}r.d(t,{v:function(){return a}})}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/shared-79d7a1214fae83893e4018e9963b447ab951a8f0.6759f7105f9d04a35a6f.min.js.map