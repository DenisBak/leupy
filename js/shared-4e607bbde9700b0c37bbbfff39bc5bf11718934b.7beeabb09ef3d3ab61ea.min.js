(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9544],{98054:function(e,t,s){"use strict";s.d(t,{S:function(){return b}});var n=s(67294),i=s(47166),r=s.n(i),l=s(28225),a=s(54446),o=s(63119),c=s(33622),u=s(49963),d=s(44619),p=s(1156),m=s(39535),f=s(5070),h=s(85893);const g=r().bind({root:"s__laqCZkVYMBy2LkupUE2y",root_size_24:"s__mitBRled_DEgjMnL9qtw",button:"s__UQ6bsDzqIFRoOdIftD4D",root_size_16:"s__AYs9tVfYA8pXpMCqrNWH",icon:"s__QO81nhajk8yst8bhxuJP",dialog:"s__fhjZV3LBB0il48wHqeAo","dialog-title":"s__dmkDPO8zRm9PSDWxCA4S","dialog-text":"s__NyNl5NJ3l2L5lEUPnW_A","dialog-cancel":"s__qYBxPuiO4K_Pq9tqrBA8"}),y=(0,n.forwardRef)((({iconSize:e=24},t)=>{const s={className:g("icon"),ref:t};return 16===e?(0,h.jsx)(a.E,{...s}):(0,h.jsx)(o.X,{...s})}));y.displayName="InfoControlIcon";const x=(0,n.memo)((({iconSize:e=24,title:t,description:s,buttonText:i})=>{const{t:r}=(0,l.useTranslation)("component_info_control"),[a,o]=(0,n.useState)(!1),f=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),o(!0)}),[]),x=(0,n.useCallback)((e=>{e.stopPropagation(),o(!1)}),[]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("button",{className:g("button"),type:"button",onClick:f,children:(0,h.jsx)(y,{iconSize:e})}),(0,h.jsxs)(c.V,{className:g("dialog"),visible:a,children:[t&&(0,h.jsx)(u.x,{className:g("dialog-title"),type:d.y.Body1Bold,children:t}),s&&(0,h.jsx)(u.x,{className:g("dialog-text"),type:d.y.Body2Regular,children:s}),(0,h.jsx)(p.z,{className:g("dialog-cancel"),onClick:x,type:m.Ji.Primary,size:m.qE.S,children:i||r("ok")})]})]})}));x.displayName="InfoControlDialog";const b=(0,n.memo)((({className:e,iconSize:t=24,title:s,description:n,buttonText:i,mode:r="tooltip",tooltipPlacement:l="top"})=>(0,h.jsxs)("div",{className:g("root",`root_size_${t}`,e),children:["dialog"===r&&(0,h.jsx)(x,{iconSize:t,title:s,description:n,buttonText:i}),"tooltip"===r&&(0,h.jsx)(f.u,{placement:l,content:(0,h.jsx)(u.x,{type:d.y.Body3Paragraph,children:n}),children:(0,h.jsx)(y,{iconSize:t})})]})));b.displayName="InfoControl"},53354:function(e,t,s){"use strict";s.d(t,{j:function(){return kt}});var n,i,r,l,a,o,c,u=s(30091),d=(s(26699),s(98116)),p=s(47047),m=s(31438),f=s(31401),h=s(41832),g=s(28258),y=s(27497),x=(s(21703),s(76262)),b=s.n(x),v=s(38032),_=s(21247),C=s(85349),k=s(59051),j=s.n(k),S=s(29893),w=s.n(S);!function(e){e.Bool="bool",e.SingleChoice="single_choice",e.Range="range",e.Set="set",e.Shortcut="shortcut"}(n||(n={})),function(e){e.Screen="screen",e.Shortcut="shortcut"}(i||(i={})),function(e){e.Swap="controls_swap",e.Filters="control_filters",e.FiltersActive="controls_filters_active"}(r||(r={})),function(e){e.Left="left",e.Right="right"}(l||(l={})),function(e){e.Switcher="switcher",e.Checkbox="checkbox"}(a||(a={})),function(e){e.BeginEnd="begin_end",e.End="end"}(o||(o={})),function(e){e.Duration="duration",e.Price="price",e.Time="time"}(c||(c={}));const B=e=>{const{id:t,params:s,type:i}=e;if(i===n.Bool)return{id:t,type:i,params:{title:s.title,default:s.default,controlPosition:s.control_position,controlType:s.control_type,enabled:s.enabled,info:s.info,label:s.label,subtitle:s.subtitle,addition:s.addition,iconUrl:s.icon_url}};if(i===n.Shortcut){const e=(r=s.shortcut).type===n.Range?{id:r.id,type:r.type,value:{min:r.value.min,max:r.value.max}}:r;return{id:t,type:i,params:{title:s.title,default:s.default,controlPosition:s.control_position,controlType:s.control_type,shortcut:e,info:s.info,label:s.label,subtitle:s.subtitle,addition:s.addition,iconUrl:s.icon_url}}}var r,l;return i===n.Range?{id:t,type:i,params:{boundaries:{min:s.boundaries.min,max:s.boundaries.max},default:{min:s.default.min,max:s.default.max},format:s.format,step:s.step,title:s.title,bordersType:s.borders_type,points:s.points}}:i===n.Set?{id:t,type:i,params:{default:s.default,items:(l=s.items,l.map((e=>({id:e.id,title:e.title,enabled:e.enabled,label:e.label,subtitle:e.subtitle,addition:e.addition,iconUrl:e.icon_url})))),controlType:s.control_type,controlPosition:s.control_position}}:{...e}},N=e=>{const{id:t,type:s,params:n}=e;if(s===i.Shortcut){const i=(e=>{const{type:t}=e.params;return{type:t,value:e.params.value}})(e);return{id:t,type:s,params:{...i,name:n.name,addition:n.addition,filterId:n.filter_id}}}const r={name:n.name,groups:n.groups,screenTitle:n.screen_title,iconType:n.icon_type};return{id:t,type:s,params:w()(j())(r)}},R=e=>{const t=Object.entries(e).map((([e,t])=>{var s;return[e,{type:(s=t).type,value:s.value}]}));return Object.fromEntries(t)},E=e=>{const{chips:t,groups:s,items:n,button:i}=e;return{chips:(a=t,a.map(N)),groups:(r=s,Object.entries(r).map((([e,t])=>{const s=(e=>{const{id:t,items:s,title:n,choose_all:i}=e,r=i?[...i]:null;return w()(j())({id:t,items:s,title:n,chooseAll:r})})(t);return[e,s]})).reduce(((e,[t,s])=>({...e,[t]:s})),{})),items:(l=n,Object.entries(l).map((([e,t])=>[e,B(t)])).reduce(((e,[t,s])=>({...e,[t]:s})),{})),button:{...i}};var r,l,a},I=e=>({state:R(e.state),boundaries:E(e)}),A=e=>{const t=Object.entries(e).map((([e,t])=>[e,t.value]));return Object.fromEntries(t)};var T=s(39507),M=s.n(T);const D=(e,t)=>{if(!t)return!1;const s=e[t.id];return!!s&&(s.type===n.Bool&&t.type===n.Bool?s.value:s.type===n.Set&&t.type===n.Set?0===M()(s.value,t.value).length:s.type===n.Range&&t.type===n.Range?t.value.max>=s.value.max&&t.value.min<=s.value.min:s.type===n.SingleChoice&&t.type===n.SingleChoice&&s.value===t.value)},F=e=>e.type===n.Bool?{[e.id]:{type:n.Bool,value:e.value}}:e.type===n.Range?{[e.id]:{type:n.Range,value:e.value}}:e.type===n.Set?{[e.id]:{type:n.Set,value:e.value}}:e.type===n.SingleChoice?{[e.id]:{type:n.SingleChoice,value:e.value}}:{},P=(0,d.withFactory)({sid:"-yhwo8p",fn:()=>(0,p.s)((({$currency:e,$isDisabled:t,$isLoading:s,onChangedByUser:n,onFiltersClicked:i})=>{const r=(0,d.createStore)({},{sid:"d9t3en"}),l=(0,d.createStore)({},{sid:"-ukgzkl"}),a=(0,d.createStore)({chips:[],groups:{},items:{},button:{enabled:!0,title:[]}},{sid:"6eh846"}),o=(0,d.createEvent)({sid:"uh9gub"}),c=(0,d.createEvent)({sid:"-inv0b4"}),u=(0,d.createEvent)({sid:"8bkjzh"}),p=(0,d.createEvent)({sid:"-bpdda"}),m=(0,d.createEvent)({sid:"mrj76t"}),f=(0,d.createEvent)({sid:"-fc66j3"}),h=l.map(A);return(0,d.sample)({and:[{clock:p,source:l,filter:(0,d.withFactory)({sid:"-hkmog9",fn:()=>(0,v.f)(t)}),fn:(e,t)=>({...e,...t}),target:l}],or:{sid:"-cj8ydr"}}),(0,d.sample)({and:[{clock:m,source:l,filter:(0,d.withFactory)({sid:"-2f6ru1",fn:()=>(0,v.f)(t)}),fn:(e,t)=>b()(t,e),target:l}],or:{sid:"-c1nje7"}}),(0,d.sample)({and:[{clock:o,fn:I,target:(0,d.withFactory)({sid:"-273hcx",fn:()=>(0,_.h)({state:r,boundaries:a})})}],or:{sid:"-bklx00"}}),(0,d.sample)({and:[{clock:o,source:r,target:l}],or:{sid:"-b44376"}}),(0,d.withFactory)({sid:"-b0tbn0",fn:()=>(0,C.m)({clock:u,target:[r,l,a]})}),(0,d.sample)({and:[{clock:c,source:r,target:l}],or:{sid:"-amio7m"}}),n&&(0,d.sample)({and:[{clock:[p,m],source:h,filter:(0,d.withFactory)({sid:"8rfg2r",fn:()=>(0,v.f)(t)}),fn:e=>e,target:n}],or:{sid:"-aio40d"}}),i&&(0,d.sample)({and:[{clock:f,target:i}],or:{sid:"-kwtnlx"}}),{inputs:{update:o,rollback:c,dataReset:u},outputs:{$filtersRequestDto:h,$filtersState:l,$filtersBoundaries:a},internals:{$isDisabled:t,$isLoading:s,$currency:e,filtersAreaClicked:f,filtersChanged:p,filtersResetByIds:m}}}))});var $,V=s(47166),L=s.n(V),U=s(67294),z=s(4190),O=s(86523);!function(e){e.Text="text",e.PriceRegular="price_regular",e.DayMonthWeekday="day_month_weekday",e.DateFull="date_full"}($||($={}));const Z=(0,U.createContext)({inputs:{update:(0,d.createEvent)({sid:"-w5vath"}),rollback:(0,d.createEvent)({sid:"eockkz"}),dataReset:(0,d.createEvent)({sid:"h23aj6"})},outputs:{$filtersRequestDto:(0,d.createStore)({},{sid:"kgz2e6"}),$filtersState:(0,d.createStore)({},{sid:"gx6bd6"}),$filtersBoundaries:(0,d.createStore)({chips:[],groups:{},items:{},button:{enabled:!0,title:[]}},{sid:"63x5zo"})},internals:{$isDisabled:(0,d.createStore)(!1,{sid:"-igldx"}),$isLoading:(0,d.createStore)(!1,{sid:"-e38dcx"}),$currency:(0,d.createStore)("RUB",{sid:"-p7q98a"}),filtersChanged:(0,d.createEvent)({sid:"-tp5ai9"}),filtersResetByIds:(0,d.createEvent)({sid:"gfwhhb"}),filtersAreaClicked:(0,d.createEvent)({sid:"5ocui7"})}}),q=()=>{const e=(0,U.useContext)(Z);return(0,z.useUnit)({filtersState:e.outputs.$filtersState,filtersBoundaries:e.outputs.$filtersBoundaries,filtersChanged:e.internals.filtersChanged,filtersResetByIds:e.internals.filtersResetByIds,filtersAreaClicked:e.internals.filtersAreaClicked,isDisabled:e.internals.$isDisabled,isLoading:e.internals.$isLoading})},H=e=>{const{currency:t}=(0,z.useUnit)({currency:h.y.outputs.$currencyUpperCase}),s=(0,O.d)("ts_day_month_weekday"),n=(0,O.d)("ts_date_full"),i=(0,O.d)("price_regular");return(0,U.useMemo)((()=>e?e.map((e=>e.type===$.PriceRegular?i({currency:t,value:e.value}):e.type===$.DayMonthWeekday?s(new Date(e.value)):e.type===$.DateFull?n(new Date(e.value)):e.value)).join(""):""),[e,t,i,s,n])};var J=s(28225),X=s(46531),G=s(9071),Q=s(1156),W=s(39535),K=s(63263),Y=s(3745),ee=s(4407),te=s(49963),se=s(44619),ne=s(98054),ie=s(85893);const re=L().bind({root:"s__s1ACuzd_Vpdbc18ALt8w","title-column":"s__dX9f4E_mkrglT29oZoXe",label:"s__Tlz64bgkNB4QHH_3jFuN",subtitle:"s__E9uxpAsoWRq0PpDgTXN0",column:"s__xbCOyqlG7XHjjfdnFNBB","addition-column":"s__iKZ6J2PkMjkUxWOJjKaj",icon:"s__XmXVq0aIkC_hXqV1QICB"}),le=({isChecked:e,controlType:t,controlPosition:s,title:n,label:i,subtitle:r,addition:o,info:c,iconUrl:u,className:d,onChange:p})=>{const m=(0,U.useCallback)((t=>{p(!e),t.stopPropagation()}),[e,p]),f=t===a.Checkbox?(0,ie.jsx)(K.X,{onChange:m,checked:e}):(0,ie.jsx)(Y.r,{onChange:m,checked:e}),h=re("root",d);return(0,ie.jsxs)("div",{className:h,children:[s===l.Left&&(0,ie.jsx)("div",{className:re("column"),children:f}),u&&(0,ie.jsx)(ee.E,{width:24,height:24,src:u,className:re("icon")}),(0,ie.jsxs)("div",{className:re("title-column"),onClick:m,children:[(0,ie.jsx)(te.x,{type:se.y.Body2Regular,tag:"span",children:n}),i&&(0,ie.jsxs)(te.x,{className:re("label"),type:se.y.Body2Regular,tag:"span",children:[" ",i]}),r&&(0,ie.jsx)(te.x,{className:re("subtitle"),type:se.y.Body3Regular,children:r})]}),o&&(0,ie.jsx)("div",{className:re("addition-column"),children:(0,ie.jsx)(te.x,{type:se.y.Body2Regular,children:o})}),c&&(0,ie.jsx)("div",{className:re("column"),children:(0,ie.jsx)(ne.S,{mode:"dialog",title:c.title,description:c.body,buttonText:c.button})}),s===l.Right&&(0,ie.jsx)("div",{className:re("column"),children:f})]})};var ae=s(60025);const oe=L().bind({root:"s__vI_igpWsscO6131NUTMk","title-column":"s__rxUmFF5s0HdpK8JEFHFQ",column:"s__cEO1H7MOHhJk6x21iiJ4"}),ce=({isChecked:e=!1,title:t,className:s,onChange:n})=>{const i=oe(s);return(0,ie.jsx)("div",{className:i,children:(0,ie.jsx)(ae.E,{label:t,checked:e,onChange:n})})};var ue=s(77788),de=s(75932),pe=s(55839),me=s(17999),fe=s(1552);const he=L().bind({"chip-with-icon":"s__a1mLGbGETG4sRUkQVpD0","chip-icon":"s__FDn4230CPE2L4yOH92U0"}),ge=({iconType:e})=>e===r.Swap?(0,ie.jsx)(ue.Y,{className:he("chip-icon")}):e===r.Filters?(0,ie.jsx)(de.y,{className:he("chip-icon")}):e===r.FiltersActive?(0,ie.jsx)(pe.E,{className:he("chip-icon")}):null,ye=({text:e,iconType:t,isSelected:s,isDisabled:n,onClick:i,onReset:r})=>{const l=Boolean(t),a=Boolean(e),o=a?me.i:fe.A,c=he({"chip-with-icon":l});return(0,ie.jsxs)(o,{contentClassName:c,isActive:!1,isDisabled:n,isSelected:s,onClick:i,onDeselect:r,children:[l&&(0,ie.jsx)(ge,{iconType:t}),a&&(0,ie.jsx)(te.x,{type:se.y.Body2Regular,children:e})]})},xe=L().bind({"addition-text":"s__qAcd0ThGGcArn7RSlDxg"}),be=({title:e,addition:t,isActive:s,isSelected:n,isDisabled:i,onClick:r})=>{const l=t&&(0,ie.jsx)(te.x,{className:xe("addition-text"),type:se.y.Body2Regular,children:t});return(0,ie.jsx)(fe.A,{isSelected:n,isActive:s,isDisabled:i,rightElement:l,onClick:r,children:e})};var ve=s(68738),_e=s.n(ve),Ce=s(4275);const ke=({filterId:e})=>{const{params:t,value:s,changeValue:i}=(e=>{const t=(0,U.useContext)(Z),s=(0,z.useStoreMap)({store:t.outputs.$filtersBoundaries,keys:[e],defaultValue:null,fn:(e,[t])=>{const s=e.items[t];return s?.type===n.Bool?s.params:null}}),i=(0,z.useStoreMap)({store:t.outputs.$filtersState,keys:[e],defaultValue:s?.default??!1,fn:(e,[t])=>{const i=e[t];return i?.type===n.Bool?i.value:s?.default??!1}}),{filtersChanged:r,filtersResetByIds:l}=(0,z.useUnit)({filtersChanged:t.internals.filtersChanged,filtersResetByIds:t.internals.filtersResetByIds}),a=(0,U.useCallback)((t=>{t===s?.default?l([e]):r({[e]:{type:n.Bool,value:t}})}),[s,e,r,l]);return{params:s,value:i,changeValue:a}})(e),r=H(t?.title),l=H(t?.label),a=H(t?.subtitle),o=H(t?.addition);return t?(0,ie.jsx)(le,{isChecked:s,controlPosition:t.controlPosition,controlType:t.controlType,title:r,label:l,subtitle:a,addition:o,info:t.info,onChange:i,iconUrl:t?.iconUrl}):null},je=L().bind({"filter-row":"s__s41lRJwObWsV8EEICwBe"}),Se=({value:e,params:t,controlPosition:s,controlType:n,onChange:i})=>{const r=H(t?.title),l=H(t?.label),a=H(t?.subtitle),o=H(t?.addition),c=(0,U.useCallback)((e=>{i(t.id,e)}),[i,t.id]);return(0,ie.jsx)(le,{className:je("filter-row"),isChecked:e,title:r,label:l,subtitle:a,addition:o,controlType:n,controlPosition:s,onChange:c,iconUrl:t.iconUrl})},we=({filterId:e})=>{const{params:t,value:s,changeValue:i}=(e=>{const t=(0,U.useContext)(Z),s=(0,z.useStoreMap)({store:t.outputs.$filtersBoundaries,keys:[e],defaultValue:null,fn:(e,[t])=>{if(!t)return null;const s=e.items[t];return s?.type===n.Set?s.params:null}}),i=(0,z.useStoreMap)({store:t.outputs.$filtersState,keys:[e],defaultValue:s?.default??[],fn:(e,[t])=>{if(!t)return[];const i=e[t];return i?.type===n.Set?i.value:s?.default??[]}}),r=(0,U.useMemo)((()=>s?.items.map((e=>e.id))??[]),[s]),l=r.length===i.length,{filtersChanged:a,filtersResetByIds:o}=(0,z.useUnit)({filtersChanged:t.internals.filtersChanged,filtersResetByIds:t.internals.filtersResetByIds}),c=(0,U.useCallback)(((t,s)=>{if(!e)return;const r=s?[...i,t]:i.filter((e=>e!==t));r.length>0?a({[e]:{type:n.Set,value:r}}):o([e])}),[e,i,a,o]),u=(0,U.useCallback)((()=>{e&&a({[e]:{type:n.Set,value:r}})}),[e,r,a]),d=(0,U.useCallback)((t=>{e&&a({[e]:{type:n.Set,value:t}})}),[e,a]),p=(0,U.useCallback)((t=>{if(!e)return;const s=i.filter((e=>!t.includes(e)));s.length>0?a({[e]:{type:n.Set,value:s}}):o([e])}),[e,i,a,o]),m=(0,U.useCallback)((()=>{e&&o([e])}),[e,o]);return{params:s,value:i,changeValue:c,isAllSelected:l,selectItemIds:d,unselectItemIds:p,selectAll:u,reset:m}})(e);if(!t)return null;const{controlType:r,controlPosition:l,items:a}=t;return(0,ie.jsx)("div",{children:a.map((e=>(0,ie.jsx)(Se,{value:s.includes(e.id),params:e,controlType:r,controlPosition:l,onChange:i},e.id)))})},Be=L().bind({"filter-row":"s__utrntEWdjQFdsjs5ehOe"}),Ne=({value:e,params:t,onChange:s})=>{const{id:n,title:i}=t,r=(0,U.useCallback)((()=>{s(n)}),[s,n]);return(0,ie.jsx)(ce,{className:Be("filter-row"),isChecked:e,title:i,onChange:r})},Re=({filterId:e})=>{const{params:t,value:s,changeValue:i}=(e=>{const t=(0,U.useContext)(Z),s=(0,z.useStoreMap)({store:t.outputs.$filtersBoundaries,keys:[e],defaultValue:null,fn:(e,[t])=>{const s=e.items[t];return s?.type===n.SingleChoice?s.params:null}}),i=(0,z.useStoreMap)({store:t.outputs.$filtersState,keys:[e],defaultValue:s?.default??null,fn:(e,[t])=>{const i=e[t];return i?.type===n.SingleChoice?i.value:s?.default??null}}),{filtersChanged:r,filtersResetByIds:l}=(0,z.useUnit)({filtersChanged:t.internals.filtersChanged,filtersResetByIds:t.internals.filtersResetByIds}),a=(0,U.useCallback)((t=>{t===s?.default?l([e]):r({[e]:{type:n.SingleChoice,value:t}})}),[e,s,r,l]);return{params:s,value:i,changeValue:a}})(e);return t?(0,ie.jsx)("div",{children:t.items.map((e=>(0,ie.jsx)(Ne,{value:e.id===s,params:e,onChange:i},e.id)))}):null};var Ee=s(83946),Ie=s(51820),Ae=s(13882);function Te(e,t){(0,Ae.Z)(2,arguments);var s=(0,Ee.Z)(t);return(0,Ie.Z)(e,6e4*s)}var Me=s(69119);function De(){return(0,Me.Z)(Date.now())}var Fe=s(32301),Pe=s(2437);const $e=L().bind({range:"s__zz6qEJSnhiE0pCApJ0RF"}),Ve=({title:e,format:t,value:s,currency:n,min:i,max:r,onReset:l})=>{const{t:a}=(0,J.useTranslation)("service_dynamic_filters"),o=(0,O.d)("price_regular"),u=(0,O.d)("duration_round"),d=(0,O.d)("interval_time"),[p,m]=s,f=(0,U.useMemo)((()=>{if(t===c.Price){if(p===i&&m===r)return a("range.price.tagAny");const e=o({value:p,currency:n}),t=o({value:m,currency:n});return p!==i&&m===r?a("range.price.tagFrom",{from:e}):p===i&&m!==r?a("range.price.tagTo",{to:t}):a("range.price.tag",{from:e,to:t})}if(t===c.Duration){const e=u(Pe.nL.fromMinutes(p)),t=u(Pe.nL.fromMinutes(m));return p===i?a("range.duration.tagTo",{to:t}):m===r?a("range.duration.tagFrom",{from:e}):a("range.duration.tag",{from:e,to:t})}return t===c.Time?d(new Pe.Xp({start:Te(De(),p),end:Te(De(),m)})):a("range.number.tag",{from:p,to:m})}),[t,i,r,p,m,o,u,d,n,a]),h=p!==i||m!==r;return(0,ie.jsx)(Ce.kO,{tagContent:f,isTagSelected:h,onTagClose:l,children:e})},Le=({value:e,currency:t,params:s,onChange:n})=>{const[i,r]=(0,U.useState)([e.min,e.max]),{bordersType:l,title:a,format:c,boundaries:u,step:d,points:p}=s;(0,U.useEffect)((()=>{r([e.min,e.max])}),[e.min,e.max]);const m=(0,U.useCallback)((e=>{r(e)}),[]),f=(0,U.useCallback)((t=>{r([e.min,t])}),[e.min]),h=(0,U.useCallback)((()=>{const[e,t]=i;n({min:e,max:t})}),[i,n]),g=(0,U.useCallback)((()=>{n({min:u.min,max:u.max})}),[u.min,u.max,n]),y=(0,U.useMemo)((()=>{if(l===o.BeginEnd)return(0,ie.jsx)(Fe.e,{min:u.min,max:u.max,step:d,value:i,marks:p,pushable:d,allowCross:!1,onChange:m,onAfterChange:h});const[,e]=i;return(0,ie.jsx)(Fe.i,{min:u.min,max:u.max,step:d,value:e,marks:p,onChange:f,onAfterChange:h})}),[l,u.max,u.min,h,m,f,i,p,d]);return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Ve,{title:a,format:c,value:i,currency:t,min:u.min,max:u.max,onReset:g}),(0,ie.jsx)("div",{className:$e("range"),children:y})]})},Ue=({filterId:e})=>{const{params:t,value:s,currency:i,changeValue:r}=(e=>{const t=(0,U.useContext)(Z),s=(0,z.useStoreMap)({store:t.outputs.$filtersBoundaries,keys:[e],defaultValue:null,fn:(e,[t])=>{const s=e.items[t];return s?.type===n.Range?s.params:null}}),i=(0,z.useStoreMap)({store:t.outputs.$filtersState,keys:[e],defaultValue:s?.default??null,fn:(e,[t])=>{if(!s)return null;const i=e[t];return i?.type===n.Range?i.value:s.default}}),{currency:r,filtersChanged:l,filtersResetByIds:a}=(0,z.useUnit)({currency:t.internals.$currency,filtersChanged:t.internals.filtersChanged,filtersResetByIds:t.internals.filtersResetByIds}),o=(0,U.useCallback)((t=>{s&&(t.min===s.default.min&&t.max===s.default.max?a([e]):l({[e]:{type:n.Range,value:t}}))}),[e,s,l,a]);return{params:s,value:i,currency:r,changeValue:o}})(e);return null===t||null===s?null:(0,ie.jsx)(Le,{params:t,value:s,currency:i,onChange:r})},ze=({filterId:e})=>{const{params:t,isSelected:s,toggleValue:i}=(e=>{const t=(0,U.useContext)(Z),s=(0,z.useStoreMap)({store:t.outputs.$filtersBoundaries,keys:[e],defaultValue:null,fn:(e,[t])=>{const s=e.items[t];return s?.type===n.Shortcut?s.params:null}}),{filtersState:i,filtersChanged:r,filtersResetByIds:l}=q(),a=(0,U.useMemo)((()=>!!s&&D(i,s?.shortcut)),[i,s]),o=(0,U.useCallback)((()=>{if(!s)return null;if(a)return l([s.shortcut.id]);const e=F(s.shortcut);return r(e)}),[a,s,l,r]);return{params:s,isSelected:a,toggleValue:o}})(e),r=H(t?.title),l=H(t?.label),a=H(t?.subtitle),o=H(t?.addition);return t?(0,ie.jsx)(le,{isChecked:s,controlPosition:t.controlPosition,controlType:t.controlType,title:r,label:l,subtitle:a,addition:o,info:t.info,onChange:i}):null},Oe=({filterId:e})=>{const t=(e=>{const t=(0,U.useContext)(Z);return(0,z.useStoreMap)({store:t.outputs.$filtersBoundaries,keys:[e],defaultValue:null,fn:(e,[t])=>e.items[t]?.type??null})})(e);return t===n.Bool?(0,ie.jsx)(ke,{filterId:e}):t===n.SingleChoice?(0,ie.jsx)(Re,{filterId:e}):t===n.Range?(0,ie.jsx)(Ue,{filterId:e}):t===n.Set?(0,ie.jsx)(we,{filterId:e}):t===n.Shortcut?(0,ie.jsx)(ze,{filterId:e}):null};var Ze=s(77606),qe=s.n(Ze);const He=L().bind({content:"s__ANTS5aJ5TAXZbdnvqcnW",item:"s__qM1qPAw9hOYQj2UG5T1A"}),Je=({groupId:e})=>{const t=(e=>{const{filtersBoundaries:t,filtersState:s,filtersChanged:i,filtersResetByIds:r}=q(),l=t.groups[e],{title:a,items:o,chooseAll:c}=l,u=((e,t)=>!!t&&t.every((t=>!e[t])))(s,c),d=Boolean(c)&&!u,p=(0,U.useCallback)((()=>{if(!u||!c)return null;const e=c.reduce(((e,s)=>{const i=((e,t)=>{const s=e.items[t];if(s.type===n.Set){const e=s.params.items.filter((e=>e.enabled)).map((e=>e.id));return{[t]:{type:n.Set,value:e}}}return s.type===n.Bool?{[t]:{type:n.Bool,value:!0}}:{}})(t,s);return{...e,...i}}),{});return qe()(e)?null:i(e)}),[c,u,t,i]),m=(0,U.useCallback)((()=>d&&c?r(c):null),[d,c,r]);return{title:a,items:o,isResetEnabled:d,isSelectAllEnabled:u,selectAll:p,reset:m}})(e);if(null===t)return null;const{title:s,items:i,isResetEnabled:r,isSelectAllEnabled:l,reset:a,selectAll:o}=t,c=_e()(s);return(0,ie.jsx)(Ce.e_,{title:s,isInitiallyOpen:!0,isDividerVisible:c,isSelectAllVisible:l,isResetVisible:r,onResetAllClick:a,onSelectAllClick:o,children:(0,ie.jsx)("div",{className:He("content"),children:i.map((e=>(0,ie.jsx)("div",{className:He("item"),children:(0,ie.jsx)(Oe,{filterId:e})},e)))})})};var Xe=s(15886),Ge=s.n(Xe);const Qe=L().bind({"button-section":"s___ZJhQK9311bMWgyUd_Xm",button:"s__oOmH30pYqRLU2OcSPBUQ"}),We=({name:e,screenTitle:t,iconType:s,groupIds:n})=>{const{t:i}=(0,J.useTranslation)("service_dynamic_filters"),[r,l]=(0,U.useState)(!1),{isDisabled:a,isLoading:o}=q(),{isSelected:c,reset:u,button:d}=(e=>{const{filtersBoundaries:t,filtersResetByIds:s,filtersState:n}=q(),i=e.flatMap((e=>t.groups[e]?.items)),r=Object.keys(n),l=Ge()(i,r);return{isSelected:l.length>0,reset:(0,U.useCallback)((()=>{s(l)}),[s,l]),button:t.button}})(n),p=t??e,m=H(d.title),f=H(d.subtitle),h=!d.enabled||o;(0,U.useEffect)((()=>{a&&l(!1)}),[a]);const g=(0,U.useCallback)((()=>{l(!0)}),[]),y=(0,U.useCallback)((()=>{l(!1)}),[]),x=i("popup.reset"),b=i("popup.done");return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(ye,{text:e,iconType:s,isSelected:c,isDisabled:a,onClick:g,onReset:u}),(0,ie.jsxs)(X.G,{width:480,visible:r,onClose:y,children:[(0,ie.jsxs)(X.G.Navigation,{children:[(0,ie.jsx)(G.w.Title,{title:p}),(0,ie.jsx)(G.w.LeftAccessory,{children:c&&(0,ie.jsx)(G.w.Action,{label:x,onClick:u})}),(0,ie.jsx)(G.w.RightAccessory,{children:(0,ie.jsx)(G.w.Action,{label:b,onClick:y})})]}),(0,ie.jsx)("div",{children:n.map((e=>(0,ie.jsx)(Je,{groupId:e},e)))}),(0,ie.jsx)("div",{className:Qe("button-section"),children:(0,ie.jsxs)(Q.z,{className:Qe("button"),type:"button",size:W.qE.M,disabled:h,progress:o,onClick:y,children:[(0,ie.jsx)(Q.z.Label,{children:m}),d.subtitle&&(0,ie.jsx)(Q.z.Label,{children:f})]})})]})]})},Ke=({filterId:e,name:t,addition:s,shortcutValue:n})=>{const{isDisabled:i}=q(),{isSelected:r,toggleValue:l}=((e,t)=>{const{filtersState:s,filtersChanged:n,filtersResetByIds:i}=q(),r=(0,U.useMemo)((()=>D(s,{id:e,...t})),[s,e,t]),l=(0,U.useCallback)((()=>{if(r)return i([e]);const s=F({id:e,...t});return n(s)}),[r,e,t,i,n]);return{isSelected:r,toggleValue:l}})(e,n);return(0,ie.jsx)(be,{isSelected:r,isActive:!0,isDisabled:i,title:t,addition:s,onClick:l})},Ye=({data:e})=>{const{params:t,type:s}=e;if(s===i.Screen){const{name:e,groups:s,screenTitle:n,iconType:i}=t;return(0,ie.jsx)(We,{groupIds:s,name:e,screenTitle:n,iconType:i})}const{filterId:n,name:r,addition:l}=t;return(0,ie.jsx)(Ke,{filterId:n,name:r,addition:l,shortcutValue:t})},et=L().bind({root:"s__XEiBOCeFt9xJwcvbG4H9",root_wrap:"s__uAiFuUyGc7mxTTrYyLSE",overlay:"s__g0FWmHBVtd02g3ITJ74M"}),tt=({wrap:e=!0})=>{const{filtersBoundaries:t,filtersAreaClicked:s,isDisabled:n}=q();return(0,ie.jsxs)("div",{className:et("root",{root_wrap:e}),children:[t.chips.map((e=>(0,ie.jsx)(Ye,{data:e},e.id))),n&&(0,ie.jsx)("div",{className:et("overlay"),onClick:s})]})},st={createFiltersModel:P,createFiltersContainer:e=>({wrap:t})=>(0,ie.jsx)(Z.Provider,{value:e,children:(0,ie.jsx)(tt,{wrap:t})})},nt=(0,u.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp/services/dynamic_filters/index.ts",api:{factories:st,inputs:{}},attachTestApi(){throw new Error("Test API is not available in production")}});let it;!function(e){e.None="none",e.Chips="chips",e.Skeleton="skeleton"}(it||(it={}));const{$currencyUpperCase:rt}=h.y.outputs,{createFiltersModel:lt}=nt.factories,at=(0,d.createEvent)({sid:"-2md73s"}),ot=(0,d.createEvent)({sid:"-uun078"}),ct=(0,d.createEvent)({sid:"-3k3t97"}),ut=(0,d.withFactory)({sid:"4bgzms",fn:()=>(0,p.d)(lt,{$isDisabled:y.N.outputs.$isSearchExpired,$isLoading:y.N.outputs.$isContinuePending,$currency:rt,onChangedByUser:at,onFiltersClicked:ot})}),dt=y.N.outputs.$searchStatus.map((e=>e===m.S.Started?it.Skeleton:[m.S.Inited,m.S.Failed].includes(e)?it.None:it.Chips));(0,d.sample)({and:[{clock:(0,d.sample)({and:[{clock:g.E.outputs.resultChunksLoaded,fn:([e])=>e.filters}],or:{sid:"2jkyo2"}}),filter:Boolean,target:ut.inputs.update}],or:{sid:"ta9rvg"}}),(0,d.sample)({and:[{clock:g.E.outputs.searchFailed,target:ut.inputs.rollback}],or:{sid:"tsezgd"}}),(0,d.sample)({and:[{clock:g.E.inputs.startSearch,target:ut.inputs.dataReset}],or:{sid:"u8d0nu"}}),(0,d.sample)({and:[{clock:at,target:[g.E.inputs.updateDynamicFilters,g.E.inputs.continueSearch]}],or:{sid:"uob1vb"}}),(0,d.sample)({and:[{clock:at,fn:()=>({status:f.lm.Pending,source:"filters"}),target:y.N.inputs.searchContinueStatusChanged}],or:{sid:"v4932s"}}),(0,d.sample)({and:[{clock:ot,filter:y.N.outputs.$isSearchExpired,target:ct}],or:{sid:"vmeanp"}});const pt={expiredFiltersClicked:ct},mt={$displayState:dt};var ft=s(89421),ht=s(38387),gt=s(24561),yt=s(88293);const xt={light:{background:"#e1e5ec",foreground:"#ffffff"},dark:{background:"#3d3f43",foreground:"#8a8f94"}},bt=(0,U.memo)((({theme:e=yt.B.Light})=>{const{background:t,foreground:s}=xt[e];return(0,ie.jsxs)(gt.ZP,{speed:2,width:626,height:36,viewBox:"0 0 626 36",backgroundColor:t,foregroundColor:s,uniqueKey:"filters_skeleton",children:[(0,ie.jsx)("rect",{x:0,y:0,width:48,height:36,rx:18,ry:18}),(0,ie.jsx)("rect",{x:54,y:0,width:160,height:36,rx:18,ry:18}),(0,ie.jsx)("rect",{x:220,y:0,width:240,height:36,rx:18,ry:18}),(0,ie.jsx)("rect",{x:466,y:0,width:160,height:36,rx:18,ry:18})]})}));bt.displayName="FiltersSkeleton";const vt=L().bind({root:"s__yXTXMEGfMbNe_6qI7vCu","root_with-offset":"s__FZOxN9pJ8Rds2RUFCq6L"}),{createFiltersContainer:_t}=nt.factories,Ct=_t(ut),kt=(0,u.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp_results/services/filters_v2/index.ts",api:{...ut,inputs:{...ut.inputs,...pt},containers:{DynamicFiltersLayoutContainer:()=>{const{displayState:e,theme:t,isMobile:s}=(0,z.useUnit)({displayState:mt.$displayState,theme:ft.H.outputs.$theme,isMobile:ht.l.outputs.$isMobile}),n=vt("root",{"root_with-offset":s});return e===it.None?null:e===it.Skeleton?(0,ie.jsx)("div",{className:n,children:(0,ie.jsx)(bt,{theme:t})}):(0,ie.jsx)("div",{className:n,children:(0,ie.jsx)(Ct,{wrap:!s})})}}}})},36128:function(e,t,s){var n=s(20731),i=s(21078),r=s(45652);e.exports=function(e,t,s){var l=e.length;if(l<2)return l?r(e[0]):[];for(var a=-1,o=Array(l);++a<l;)for(var c=e[a],u=-1;++u<l;)u!=a&&(o[a]=n(o[a]||c,e[u],t,s));return r(i(o,1),t,s)}},39507:function(e,t,s){var n=s(92822)("xor",s(76566));n.placeholder=s(69306),e.exports=n},76566:function(e,t,s){var n=s(34963),i=s(5976),r=s(36128),l=s(29246),a=i((function(e){return r(n(e,l))}));e.exports=a},75932:function(e,t,s){"use strict";s.d(t,{y:function(){return l}});var n=s(85893),i=s(67294);const r=({className:e,...t},s)=>(0,n.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:s,style:{display:"inline-block"},...t,children:(0,n.jsx)("path",{d:"M7.759 6.953C7.913 6.67 8 6.345 8 6a2 2 0 1 0-.241.953ZM10 6c0 .345-.044.68-.126 1H20V5H9.874c.082.32.126.655.126 1ZM7.732 19a2 2 0 1 1-3.463-1.998A2 2 0 0 1 7.732 19ZM10 18c0 .345-.044.68-.126 1H20v-2H9.874c.082.32.126.655.126 1ZM16.268 13A2 2 0 0 0 20 12a2 2 0 1 0-4 0c0 .364.097.706.268 1ZM14 12c0 .345.044.68.126 1H4v-2h10.126A4.01 4.01 0 0 0 14 12Z"})}),l=(0,i.memo)((0,i.forwardRef)(r));l.displayName="Icon24ControlsFilters"},55839:function(e,t,s){"use strict";s.d(t,{E:function(){return l}});var n=s(85893),i=s(67294);const r=({className:e,...t},s)=>(0,n.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:s,style:{display:"inline-block"},...t,children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 5a4 4 0 1 0 8 0 4 4 0 0 0-8 0Zm6.53-.47-2.5 2.5h-1.06l-1.5-1.5 1.06-1.06.97.97 1.97-1.97 1.06 1.06Z"}),(0,n.jsx)("path",{d:"M12.341 7A5.99 5.99 0 0 1 12 5H4v2h8.341ZM4.268 13a2 2 0 1 0 3.463-1.998A2 2 0 0 0 4.268 13ZM19.759 18.953A1.99 1.99 0 0 0 20 18a2 2 0 1 0-4 0 2 2 0 0 0 3.759.953ZM4 17h10.126a4.01 4.01 0 0 0 0 2H4v-2ZM10 12c0 .345-.044.68-.126 1H20v-2H9.874c.082.32.126.655.126 1Z"})]}),l=(0,i.memo)((0,i.forwardRef)(r));l.displayName="Icon24ControlsFiltersActive"},49960:function(e,t,s){"use strict";s.d(t,{i:function(){return l}});var n=s(85893),i=s(67294);const r=({className:e,...t},s)=>(0,n.jsxs)("svg",{width:36,height:36,viewBox:"0 0 36 36",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:s,style:{display:"inline-block"},...t,children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m32.06 6.06-27 27-2.12-2.12 3.33-3.332A4 4 0 0 1 4 24V12a4 4 0 0 1 4-4h17.879l4.06-4.06 2.122 2.12ZM8.88 25l3.56-3.56L11 20h-1l-3 3v1a1 1 0 0 0 1 1h.879Zm1.621-8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"}),(0,n.jsx)("path",{d:"M28 28H14.364l3-3H28a1 1 0 0 0 1-1v-3l-3.818-3.818 6.57-6.57c.16.432.248.9.248 1.388v12a4 4 0 0 1-4 4Z"})]}),l=(0,i.memo)((0,i.forwardRef)(r));l.displayName="Icon36CommonPictureFailed"},4407:function(e,t,s){"use strict";s.d(t,{E:function(){return d}});var n=s(85893),i=s(67294),r=s(94184),l=s(49960);const a=({className:e})=>(0,n.jsx)("div",{className:r("s__zhPlglKFfILcQDdDbXpc",e),children:(0,n.jsx)(l.i,{})});a.displayName="ErrorPlaceholder";const o=(0,i.memo)(a),c=(e,t)=>{const{width:s,height:n,extension:i="",theme:r=""}=t;return e.replace("{width}",s.toString(10)).replace("{height}",n.toString(10)).replace("{extension}",i).replace("{theme}",r)};const u=(0,i.forwardRef)((({lazy:e=!0,fadeIn:t=!0,shimmer:s=!0,contrastOverlay:l=!1,src:a,srcSet:u,srcTemplate:d,width:p,height:m,extension:f,theme:h,alt:g,customLoadingPlaceholder:y,customErrorPlaceholder:x,className:b,imgClassName:v,errorPlaceholderClassName:_,onLoad:C,onError:k,...j},S)=>{const[w,B]=(0,i.useState)(!1),[N,R]=(0,i.useState)(!1),{src:E,srcSet:I}=(0,i.useMemo)((()=>void 0!==d?((e,{width:t,height:s,...n})=>{const i=c(e,{...n,width:t,height:s});return{src:i,srcSet:`${i} 1x, ${c(e,{...n,width:2*t,height:2*s})} 2x, ${c(e,{...n,width:3*t,height:3*s})} 3x`}})(d,{width:p,height:m,extension:f,theme:h}):{src:"string"==typeof a?a:a?.src,srcSet:void 0}),[d,a,p,m,h,f]),A=(0,i.useRef)(null),T=(0,i.useCallback)((e=>{try{C&&C(e),B(!1)}catch(e){R(!0),B(!1)}}),[C]),M=(0,i.useCallback)((e=>{k&&k(e),R(!0),B(!1)}),[k]);return(0,i.useEffect)((()=>{A.current?.complete||!s&&!y||B(!0)}),[]),(0,n.jsxs)("div",{ref:S,className:r("s__nTb4VGFJp3ixAI4eEe9g",{s__rnbDhIV3it6rSU6OnypQ:!0,s__s6lhICQfIvPJajPTRq8l:w&&!y,s__c6LE8aEH0xXFxK7wK7Pl:l&&!w},b),style:{"--image_width":p??a?.width,"--image_height":m??a?.height},children:[N&&(x||(0,n.jsx)(o,{className:_})),w&&y,(0,n.jsx)("img",{src:E,srcSet:u??I,ref:A,className:r({s__u970sMSen6mw5vizRoPD:!0,s__IfTcK9HkqMS6SVk5wCFs:t,s___upxsVkNisXgoGZIqsEJ:!w&&!N},v),loading:e?"lazy":"eager",alt:g||"",onLoad:T,onError:M,...j})]})}));u.displayName="Image";const d=(0,i.memo)(u)}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/shared-4e607bbde9700b0c37bbbfff39bc5bf11718934b.7beeabb09ef3d3ab61ea.min.js.map