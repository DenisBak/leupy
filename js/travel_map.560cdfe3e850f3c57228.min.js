(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[14434],{54870:function(e,t,s){"use strict";s.d(t,{C:function(){return $}});var i=s(30091),o=(s(21703),s(98116)),n=s(76588),a=s(5500),r=s(47047),l=s(72675),c=s(8681),d=s(47420),u=s(63762),p=s(99186),m=s(79403),h=s(63246),g=s(87722),_=s(78260),f=s(35529),x=s(45711);const y=(0,f.Literal)("NATIONAL_PARK"),v=(0,f.Record)({ark_id:x.Jm,type:y,name:(0,f.Dictionary)(x.Cu,f.String),slug:f.String,iata:f.String.nullable()}),b=(0,f.Record)({entity:v}),j=(0,f.Record)({locations_main_page_v1:(0,f.Array)(b)}),k=(e,t)=>{const[s]=e.locations_main_page_v1,{entity:i}=s;return{id:i.ark_id,type:i.type,name:i.name[t],slug:i.slug,iata:i.iata}},{createAriadneQuery:w}=c.a.inputs,{$language:C}=p.l.outputs,{$brand:S}=m.U.outputs,{$destination:N}=d.i.outputs,{changeDestination:P}=d.i.inputs,{nationalParkScreen:T}=u.n.outputs,{$isClient:I}=h.y.outputs,A=(0,o.createEvent)({sid:"-sxv8g"}),M=(0,o.withFactory)({sid:"4ytivr",fn:()=>(0,r.d)((()=>w({params:(0,o.withFactory)({sid:"phdyqi",fn:()=>(0,n.t6)()}),enabled:(0,o.withFactory)({sid:"-iyqh1f",fn:()=>(0,l.x)(T.$active,I)}),graphQL:{query:"\n  query GetNationalPark($arkIds: [String!]!, $locales: [String!]!, $brand: Brand!) {\n    locations_main_page_v1(\n      brand: $brand,\n      input: { \n        ark_ids: $arkIds,\n      }\n    ) {\n      entity {\n        ark_id\n        type\n        name(filters: { locales: $locales })\n        slug\n        iata\n      }\n    }\n  }\n",operationName:"national_parks",variables:{source:(0,o.combine)({and:[{brand:S,locales:(0,o.combine)({and:[C,e=>[e]],or:{sid:"-61trjx"}})}],or:{sid:"vni5d2"}}),fn:(e,t)=>({...t,arkIds:e?[e]:null})}},contract:j,mapData:{source:C,fn:k}})))});(0,o.sample)({and:[{clock:T.opened,source:N,filter:e=>(0,g.J_)(e)&&((0,g.Ao)(e)||(0,g.Tu)(e)),fn:e=>(0,g.Mo)(e),target:M.start}],or:{sid:"sl7qf6"}}),(0,o.sample)({and:[{clock:M.finished.success,fn:({result:e})=>({name:e.name.su,iata:e.id,type:a.A.NationalPark,slug:e.slug,isVirtual:!1}),target:P}],or:{sid:"t29ctd"}});const E=(0,_.cr)("explore",{name:"national_parks"});(0,o.sample)({and:[{clock:M.finished.failure,fn:({error:e,params:t})=>{const{errorType:s,...i}=e;return{msg:"Failed to load national park",error:new Error(s),extra:{arkId:t,...i}}},target:E.sendErrorLog}],or:{sid:"typ7to"}}),(0,o.withFactory)({sid:"ttia52",fn:()=>(0,n.Fs)(M,{adapter:(0,o.withFactory)({sid:"-i6tplq",fn:()=>(0,n.P3)({maxEntries:100})}),staleAfter:"10m"})});const $=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/national_park/index.ts",lifecycle:{start:A},api:{outputs:{$park:M.$data},internals:{nationalParkQuery:M}}})},51389:function(e,t,s){"use strict";s.d(t,{IN:function(){return u},cF:function(){return r},nS:function(){return c}});var i=s(67294),o=s(50308),n=s.n(o);const a=e=>{const t=document.querySelector(".mobile-app-banner-full");t&&t.contains(e.target)&&e.stopImmediatePropagation()},r=e=>{(0,i.useEffect)((()=>window?(e&&window.addEventListener("mouseup",a,!0),()=>window.removeEventListener("mouseup",a,!0)):n()),[e])};var l=s(97650);const c=(e,t)=>{const{threshold:s=.5,triggerOnce:o=!0,...n}=t??{},[a,r]=(0,l.YD)({threshold:s,triggerOnce:o,...n});return(0,i.useEffect)((()=>{r&&e()}),[e,r]),a};function d(e){const{scrollTop:t,scrollHeight:s,clientHeight:i}=e;return Math.abs(t+i-s)<1}const u=()=>{const[e,t]=(0,i.useState)(!1),[s,o]=(0,i.useState)(null),n=(0,i.useCallback)((()=>{s&&t(d(s))}),[s]);return(0,i.useEffect)((()=>{const e=()=>{s&&t(d(s))};return s?.addEventListener("scroll",e),()=>{s?.removeEventListener("scroll",e)}}),[s]),{isScrolledToBottom:e,setScrollElement:o,update:n}}},50191:function(e,t,s){"use strict";function i(e){return{lat:e.latitude,lon:e.longitude}}function o(e){return{latitude:e.lat,longitude:e.lng}}s.d(t,{Tc:function(){return o},kI:function(){return i}})},27946:function(e,t,s){"use strict";s.d(t,{S3:function(){return i},hH:function(){return o},vK:function(){return n}});const i=e=>{const{clientWidth:t,clientHeight:s}=e.getContainer();return{width:t,height:s}},o=(e,t,s=0)=>e.x<t.x+t.width+s&&s+e.x+e.width>t.x&&e.y<t.y+t.height+s&&e.height+e.y+s>t.y,n=(e,t,s)=>{const i=[],o=Array(e.length).fill(!1),n=(i,o,a,r)=>{o[i]=!0;for(let i=0;i<e.length;i+=1){const l=e[i];!o[i]&&t(a,l)&&(s?.(),n(i,o,e[i],r),r.push(e[i]))}};for(let t=0;t<e.length;t+=1){const s=e[t],a=[s];o[t]||(n(t,o,s,a),i.push(a))}return i}},32671:function(e,t,s){"use strict";s.d(t,{I:function(){return f}});var i=s(30091),o=s(98116),n=s(30040),a=s(95219),r=s(10924),l=s(47420),c=s(95628);const{createReporter:d}=r.I.inputs,u={service:n.t6.Guides,category:"trap"},p=l.i.outputs.exact.$departDate.map((e=>e?(0,a.cM)(e):null)),m=l.i.outputs.exact.$returnDate.map((e=>e?(0,a.cM)(e):null)),h=c.R.outputs.$guideId,g=(0,o.combine)({and:[{direction:c.R.outputs.$guideId,isIata:c.R.outputs.$isIata},({direction:e,isIata:t})=>!t&&e?e:null],or:{sid:"-af3jfp"}}),_={outputs:{$departDateISO:p,$returnDateISO:m,$locationId:h,$destination:g},inputs:{forwardToAnalyticsWithDefaults:d({data:u,payload:{pageName:"main",source:null,location_id:h,origin:l.i.outputs.$origin.map((e=>e?.cityIata??null)),destination:g,depart_date:p,return_date:m,guide_ark_id:h}})}},f=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/analytics/index.ts",api:_})},86117:function(e,t,s){"use strict";s.r(t),s.d(t,{directionScreenFeedService:function(){return Ki}});var i=s(30091),o=s(67294),n=s(4190),a=s(33864),r=s(98116),l=s(65752),c=s(32419),d=s(47420),u=s(88998),p=s(85893);const m=({className:e,...t},s)=>(0,p.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:s,style:{display:"inline-block"},...t,children:[(0,p.jsxs)("g",{clipPath:"url(#EmojiAirplane__a)",children:[(0,p.jsx)("path",{d:"m7.039 16.155-4.8-2.606c-.559-.281.615-1.223 1.005-1.2 1.71.101 6.806.806 6.806.806l-3.011 3ZM7.808 16.924l2.606 4.8c.277.562 1.222-.615 1.196-1.005-.101-1.71-.803-6.807-.803-6.807l-3 3.012Z",fill:"#33B8FF"}),(0,p.jsx)("path",{d:"m8.64 7.418-.611 1.016c-.064.109.015.187.123.123l1.017-.61-.529-.53ZM10.703 8.31l-.612 1.016c-.063.109.015.188.124.124l1.016-.607-.528-.533ZM6.566 6.54l-.611 1.016c-.064.109.015.188.124.124l1.016-.611-.529-.529ZM16.541 15.319l-1.016.611c-.109.064-.188-.015-.124-.124l.611-1.016.53.529ZM15.649 13.26l-1.016.611c-.11.064-.188-.015-.124-.123l.607-1.017.533.529ZM17.422 17.392l-1.016.612c-.108.063-.187-.015-.123-.124l.61-1.016.53.528Z",fill:"#99A8AE"}),(0,p.jsx)("path",{d:"m14.033 3.6-.923-.919s-2.329 1.613-2.055 2.967c1.361.273 2.978-2.048 2.978-2.048Z",fill:"url(#EmojiAirplane__b)"}),(0,p.jsx)("path",{d:"m14.115 3.518-.922-.92-.083.083.923.919.082-.083Z",fill:"#99A8AE"}),(0,p.jsx)("path",{d:"m11.258 5.145.307.304s1.583-1.343 1.718-2.018c-.68.135-2.025 1.714-2.025 1.714Z",fill:"url(#EmojiAirplane__c)"}),(0,p.jsx)("path",{d:"m9.84 3.191-.923-.919S6.592 3.885 6.862 5.24C8.22 5.509 9.84 3.19 9.84 3.19Z",fill:"url(#EmojiAirplane__d)"}),(0,p.jsx)("path",{d:"M9.922 3.109 9 2.19l-.086.083.926.918.082-.082Z",fill:"#99A8AE"}),(0,p.jsx)("path",{d:"m7.061 4.732.308.308s1.586-1.343 1.717-2.018c-.679.132-2.025 1.71-2.025 1.71Z",fill:"url(#EmojiAirplane__e)"}),(0,p.jsx)("path",{d:"M2.505 2.824c-.776-.072-1.035.39-1.5.858-.757.758.266 1.073 1.905 1.778l9.84 4.23 4.826-4.811S7.91 3.319 2.505 2.824Z",fill:"#33B8FF"}),(0,p.jsx)("path",{d:"m3.367 4.976 1.478-1.481c4.807.439 11.029 1.53 12.345 1.766l.045-.045S10.189 3.934 4.785 3.44L3.236 4.984l10.009 4.293.06-.063-9.938-4.238Z",fill:"#20A0FF"}),(0,p.jsx)("path",{d:"m20.471 10.016.923.919s-1.616 2.317-2.978 2.047c-.274-1.357 2.055-2.966 2.055-2.966Z",fill:"url(#EmojiAirplane__f)"}),(0,p.jsx)("path",{d:"m20.554 9.934.922.918-.082.083-.923-.919.083-.082Z",fill:"#99A8AE"}),(0,p.jsx)("path",{d:"m18.922 12.784-.307-.308s1.346-1.579 2.025-1.71c-.135.671-1.718 2.018-1.718 2.018Z",fill:"url(#EmojiAirplane__g)"}),(0,p.jsx)("path",{d:"m20.884 14.197.922.92s-1.616 2.317-2.977 2.047c-.274-1.354 2.055-2.967 2.055-2.967Z",fill:"url(#EmojiAirplane__h)"}),(0,p.jsx)("path",{d:"m20.966 14.115.923.919-.083.082-.922-.918.082-.083Z",fill:"#99A8AE"}),(0,p.jsx)("path",{d:"m19.335 16.965-.308-.308s1.347-1.578 2.025-1.71c-.134.676-1.717 2.018-1.717 2.018Z",fill:"url(#EmojiAirplane__i)"}),(0,p.jsx)("path",{d:"M21.247 21.499c.072.772-.4 1.035-.862 1.496-.754.754-1.073-.266-1.781-1.898l-4.241-9.802 4.826-4.811c-.004 0 1.564 9.63 2.058 15.015Z",fill:"#33B8FF"}),(0,p.jsx)("path",{d:"m19.087 20.644 1.486-1.474c-.443-4.793-1.534-10.991-1.77-12.304l.044-.045s1.287 7.02 1.785 12.409l-1.545 1.545-4.312-9.975.06-.06 4.252 9.904Z",fill:"#20A0FF"}),(0,p.jsx)("path",{d:"M23.122.877C22.8.56 20.33.687 18.038 2.967c-4.043 4.027-7.722 7.68-9.192 9.146-1.23 1.226-3.195 5.478-2.854 5.816.338.337 4.606-1.616 5.84-2.839 1.518-1.515 5.125-5.093 9.194-9.146 2.284-2.28 2.412-4.748 2.096-5.067Z",fill:"url(#EmojiAirplane__j)"}),(0,p.jsx)("path",{d:"M10.463 13.481c-.225-.225-2.3 1.755-3.42 2.873C5.92 17.47 5.08 18.55 5.23 18.698c.15.146 1.227-.687 2.352-1.808 1.117-1.121 3.104-3.184 2.88-3.409Z",fill:"url(#EmojiAirplane__k)"}),(0,p.jsx)("path",{d:"M21.739 3.6a1.752 1.752 0 0 0-.146-.428l.532-.337c.079.232.09.454.067.641l-.453.124ZM22.099 2.752l-.548.346a1.42 1.42 0 0 0-.266-.36l.476-.477c.165.158.27.326.338.491ZM22.181 3.57a1.35 1.35 0 0 1-.09.304c-.034.078-.322.112-.319.03 0-.064-.003-.139-.018-.222l.427-.112ZM20.363 2.22c.134.026.28.075.427.146l.338-.532a1.456 1.456 0 0 0-.642-.068l-.123.454ZM21.206 1.86l-.345.548c.128.067.252.153.36.266l.477-.477a1.377 1.377 0 0 0-.492-.337ZM20.392 1.778a1.348 1.348 0 0 0-.303.09c-.079.033-.113.322-.03.318.063 0 .139.004.221.019l.112-.427Z",fill:"#302C3B"})]}),(0,p.jsxs)("defs",{children:[(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__b",x1:11.777,y1:3.858,x2:12.851,y2:4.933,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{offset:.394,stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.535,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.702,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.88,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__c",x1:12.166,y1:4.185,x2:12.523,y2:4.543,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.233,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.508,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.802,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__d",x1:7.582,y1:3.448,x2:8.657,y2:4.523,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{offset:.394,stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.535,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.702,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.88,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__e",x1:7.971,y1:3.775,x2:8.328,y2:4.132,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.233,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.508,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.802,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__f",x1:20.211,y1:12.267,x2:19.136,y2:11.192,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{offset:.394,stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.535,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.702,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.88,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__g",x1:19.882,y1:11.877,x2:19.524,y2:11.519,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.233,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.508,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.802,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__h",x1:20.624,y1:16.449,x2:19.549,y2:15.374,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{offset:.394,stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.535,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.702,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.88,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__i",x1:20.295,y1:16.059,x2:19.937,y2:15.701,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.233,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.508,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.802,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__j",x1:13.055,y1:7.902,x2:16.058,y2:10.905,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{offset:.297,stopColor:"#E6EBEF"}),(0,p.jsx)("stop",{offset:.588,stopColor:"#E1E7EB"}),(0,p.jsx)("stop",{offset:.932,stopColor:"#D3DBE0"}),(0,p.jsx)("stop",{offset:1,stopColor:"#CFD8DD"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__k",x1:7.574,y1:15.818,x2:8.112,y2:16.355,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{stopColor:"#E6EBEF"}),(0,p.jsx)("stop",{offset:.208,stopColor:"#E1E7EB"}),(0,p.jsx)("stop",{offset:.453,stopColor:"#D3DADF"}),(0,p.jsx)("stop",{offset:.716,stopColor:"#BBC6CB"}),(0,p.jsx)("stop",{offset:.992,stopColor:"#9AA9AF"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsx)("clipPath",{id:"EmojiAirplane__a",children:(0,p.jsx)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})]})]}),h=(0,o.memo)((0,o.forwardRef)(m));h.displayName="EmojiAirplane";var g=s(28225);function _({onClick:e}){const{t:t}=(0,g.useTranslation)("widget_guides_feed");return(0,p.jsx)(a.A,{children:(0,p.jsx)(a.A.Block,{className:"s__s26xarJjWXrrNlZUD1N4",children:(0,p.jsxs)(u.A,{noTitle:!0,children:[(0,p.jsx)(u.A.Icon,{children:(0,p.jsx)(h,{})}),(0,p.jsx)(u.A.Content,{children:t("iAmInCity.emptyState.description")}),(0,p.jsx)(u.A.Actions,{children:(0,p.jsx)(u.A.Action,{onClick:e,children:t("iAmInCity.emptyState.action")})})]})})})}const{iAmInCityScreen:f}=c.D.outputs,{forceDestinationChoice:x}=d.i.inputs,y=(0,r.withFactory)({sid:"5lmk2q",fn:()=>(0,l.bU)({if:f.$active,then:(0,r.withFactory)({sid:"-88622o",fn:()=>(0,l.SC)({view:_,bind:{onClick:x}})}),else:()=>null})});var v=s(72675),b=s(54448),j=s(76101),k=s(14210),w=s(33350),C=s(63762),S=s(24943);const N=(0,r.createDomain)({sid:"-5jb9hy"}),{directionScreen:P}=j.A.outputs,{iAmInCityScreen:T}=c.D.outputs,{countryScreen:I}=w.$.outputs,{nationalParkScreen:A}=C.n.outputs,{exactPricesResultsScreen:M}=S.q.outputs,E=N.createEvent({sid:"-q7nxyz"}),$={outputs:{$isVisible:(0,r.withFactory)({sid:"-4rqros",fn:()=>(0,v.x)(k.qF.outputs.$isFeedEnabled,(0,r.withFactory)({sid:"xdfckq",fn:()=>(0,b.or)(P.$active,M.$active,T.$active,I.$active,A.$active)}))}),initialized:E}};s(21703);var D=s(46898),B=s.n(D),L=s(76588),O=s(80472),z=s(27636),F=s(78260),U=s(63246),R=s(8661),H=s(95628),q=s(41832),Z=s(38387),W=s(2885),G=s(87007),Q=s(76551);let Y;!function(e){e.header="header",e.trap_preview="trap_preview",e.bullets="bullets",e.layer_carousel="layer_carousel",e.layer_grid="layer_grid",e.layers_list="layers_list",e.providers="providers",e.pins_group_2="pins_group_2",e.carousel_expanded="carousel_expanded",e.carousel_compact="carousel_compact",e.bullet="bullet",e.text="text",e.header_with_images="header_with_images",e.hotels="hotels",e.locations_list="locations_list",e.carousel_v2="carousel_v2"}(Y||(Y={}));const X=e=>t=>t.type===e,V=X(Y.header),J=X(Y.trap_preview),K=X(Y.bullets),ee=X(Y.layer_carousel),te=X(Y.layer_grid),se=X(Y.layers_list),ie=X(Y.providers),oe=X(Y.pins_group_2),ne=X(Y.bullet),ae=X(Y.text),re=X(Y.carousel_expanded),le=X(Y.carousel_compact),ce=X(Y.header_with_images),de=X(Y.hotels),ue=X(Y.locations_list),pe=X(Y.carousel_v2),me=({width:e,height:t,theme:s,url:i})=>{const o=window?Math.max(Math.floor(window.devicePixelRatio),1):1,n=i.replace("{width}",(e*o).toString(10)).replace("{height}",(t*o).toString(10));return s?n.replace("{theme}",s):n},he=e=>Boolean(e.premium?.overlay),ge=e=>e.premium?.badge,_e=e=>!!e.data&&e.data.places.length<=2,fe=e=>{const t=[];for(const s of e)if(se(s)&&s.data)for(const e of s.data.layers)e.places&&e.button&&t.push({data:e,type:Y.layer_carousel,analytics:s.analytics});else t.push(s);return t},xe=e=>{const t=[];let s=0;for(const i of e){const e=te(i)&&_e(i);ee(i)||e||s%2!=1||(t.pop(),s=0),(ee(i)||e)&&(s+=1),t.push(i)}return s%2==1&&t.pop(),t},ye=e=>({title:e.title,subtitle:e.subtitle,iconUrl:e.emoji.svg,iconImageUrl:e.icon_image_url,buttonText:e.button?.text}),ve=(0,F.cr)("guides",{name:"guides_feed",samplingRate:.2}),be=(0,r.createEvent)({sid:"-pjx24r"}),je=(0,r.restore)(be,null,{sid:"-mzi64s"}),ke=(0,r.combine)({and:[{currency:q.y.outputs.$currency,hotelParams:G.$o.outputs.$searchHotelParams,defaultQuery:R.D.outputs.$defaultQuery,isReduceTrapTitle:k.qF.outputs.$isReduceTrapTitle,sourcePlace:je,trapNewDesignEnabled:Q.R.outputs.$trapNewDesignEnabled,mainScreenToDirectionScreenNewNavigationEnabled:Q.R.outputs.$mainScreenToDirectionScreenNewNavigationEnabled},({currency:e,hotelParams:t,defaultQuery:s,isReduceTrapTitle:i,sourcePlace:o,mainScreenToDirectionScreenNewNavigationEnabled:n,trapNewDesignEnabled:a})=>{const r={options:"exclude-walks",currency:e,...s,...t};return n&&o&&(r.source_place=o,r["features.main_screen_to_direction_screen_new_navigation"]=!0),i&&(r["features.reduce_trap_title"]=i),a&&(r["features.trap_new_design"]=!0),r}],or:{sid:"-novuye"}}),we=(0,r.createEvent)({sid:"b1hoy1"}),Ce=(0,r.restore)(we,!1,{sid:"-1pbbwx"}),{$data:Se,$status:Ne,reset:Pe,start:Te,$error:Ie,$pending:Ae,$failed:Me,__:Ee,finished:{failure:$e}}=(0,r.withFactory)({sid:"vldffq",fn:()=>(0,L.s5)({enabled:U.y.outputs.$isClient,name:"guides_feed",request:{method:"GET",url:(0,r.combine)({and:[{apiPrefix:R.D.outputs.$apiPrefix,trapId:H.R.outputs.$direction},({apiPrefix:e,trapId:t})=>`${e}/v3/feed/${t}`],or:{sid:"yjtzr7"}}),query:ke,headers:R.D.outputs.$defaultHeaders},response:{contract:(0,O.v)(W.dd),mapData:{source:Z.l.outputs.$isMobile,fn:({result:e},t)=>{const s=e.blocks,i=B()(fe,xe);return{...e,blocks:t?s:i(s)}}}}})}),[De,Be]=(0,r.withFactory)({sid:"-n3l8b",fn:()=>(0,z.K)(Se)}),Le=De.map((e=>{const t=e?.blocks.find((e=>e.type===Y.locations_list));if(!t)return[];const s=t.data?.locations.map((e=>e.navigation.ark_id));return s})),Oe=(0,r.combine)({and:[{error:Ie,data:De},({error:e,data:t})=>(0,r.withFactory)({sid:"-8g1gm0",fn:()=>(0,L.Bh)(404)})({error:e})||0===t?.blocks.length],or:{sid:"7gwrjt"}});(0,r.sample)({and:[{source:$e,filter:L.QO,fn:()=>new Error("guides_feed contract validation failed"),target:ve.sendErrorLog}],or:{sid:"-j4ebe0"}});const ze={internal:{fetchFx:Ee.executeFx,$dataOverride:Be},inputs:{fetch:Te,reset:Pe,readyToFetchFeed:we,setSourcePlace:be},outputs:{$data:De,$status:Ne,$noData:Oe,$error:Ie,$pending:Ae,$failed:Me,$nearbyLocationsIds:Le,$shouldFetchFeed:Ce}},Fe=N.createEvent({sid:"-r3a7qz"}),Ue=N.createEvent({sid:"da2mpf"}),Re=N.createEvent({sid:"1f34od"}),He=N.createEvent({sid:"-b158r6"}),qe=N.createEvent({sid:"jbs3cq"}),Ze=N.createEvent({sid:"4rnfju"}),We=N.createEvent({sid:"-embvm2"}),Ge={inputs:{blockShowed:He,providerClick:N.createEvent({sid:"gp6ld"}),textExpandClick:Ze,showMoreHotelsClicked:Fe,hotelItemShowed:Ue},internals:{providerClickedAnalytics:qe,sendTextExpandAnalitics:We,sendHotelItemShowedAnalitics:Re}};var Qe=s(47047),Ye=s(5500),Xe=s(8681),Ve=s(99186),Je=s(79403),Ke=s(53788),et=s(82203),tt=s(35529),st=s(45711);const it=(0,tt.Record)({slug:tt.String}),ot=(0,tt.Record)({entity:it.extend({type:(0,tt.Literal)("NATIONAL_PARK")}).nullable(),content:(0,tt.Record)({ark_id:st.Jm})}),nt=(0,tt.Union)(ot,tt.Unknown),at=(0,tt.Record)({locations_main_page_v2:(0,tt.Array)(nt)}),rt=e=>e.locations_main_page_v2.reduce(((e,t)=>{if(ot.guard(t)){const{entity:s,content:i}=t;e[i.ark_id]={id:i.ark_id,slug:s?.slug}}return e}),{}),{$brand:lt}=Je.U.outputs,{$language:ct}=Ve.l.outputs,{createAriadneQuery:dt}=Xe.a.inputs,{$currency:ut}=q.y.outputs,{$market:pt}=Ke.D.outputs,{$tripClass:mt,$origin:ht}=d.i.outputs,{updateAnalyticsDirectionSource:gt}=d.i.inputs,_t=(0,r.withFactory)({sid:"-bdprsl",fn:()=>(0,Qe.d)((()=>dt({params:(0,r.withFactory)({sid:"-r74a7z",fn:()=>(0,L.t6)()}),graphQL:{query:"\n  query GetLocationsMainPageV2($brand: Brand!, $input: LocationsV2Input!) {\n    locations_main_page_v2(\n      brand: $brand,\n      input: $input,\n    ) {\n      entity {\n        type\n        slug\n      }\n      content {\n        __typename\n        ... on NationalParkContent {\n          ark_id\n        }\n      }\n    }\n  }\n",operationName:"locations_main_page_v2",variables:{source:(0,r.combine)({and:[{language:ct,brand:lt,origin:ht,market:pt,currency:ut,trip_class:mt}],or:{sid:"-mna74j"}}),fn:(e,{language:t,brand:s,origin:i,currency:o,market:n,trip_class:a})=>({brand:s,locales:[t],input:{ark_ids:e??[],iatas:[],origin:i?.cityIata??i?.iata??"",market:n,currency:o,trip_class:a}})}},contract:at,mapData:rt,validate:({result:e})=>{try{return rt(e.data),!0}catch{return!1}}})))}),{$data:ft,$pending:xt}=_t,yt=(0,r.createEvent)({sid:"-k0zad3"});(0,r.sample)({and:[{clock:yt,fn:()=>et.yh.NearbyLocations,target:gt}],or:{sid:"-p5mntb"}}),(0,r.sample)({and:[{source:yt,fn:({arkId:e,title:t})=>({destination:{iata:e,name:t,type:Ye.A.NationalPark}}),target:C.n.outputs.nationalParkScreen.open}],or:{sid:"-oqs7sk"}});const vt={inputs:{fetchLocations:_t.start,openPark:yt},outputs:{$data:ft,$pending:xt}};var bt=s(73806),jt=s(51456),kt=s(27946);const wt=(0,r.createEvent)({sid:"-ht63wb"}),Ct={inputs:{setMapboxInstance:wt},outputs:{$mapboxInstance:(0,r.restore)(wt,null,{sid:"4kpsqw"})}};var St=s(89101),Nt=s(89421);const{createMapStyle:Pt}=St.B.inputs,{$apiPrefix:Tt,$defaultQuery:It,$defaultHeaders:At}=R.D.outputs,{$data:Mt,refresh:Et}=(0,r.withFactory)({sid:"k3jktg",fn:()=>(0,L.s5)({name:"guides_travel_map_in_feed",params:(0,r.withFactory)({sid:"-1o4tkf",fn:()=>(0,L.t6)()}),request:{method:"GET",url:{source:Tt,fn:({direction:e},t)=>`${t}/v2/travel_maps/${e}`},query:(0,r.combine)({and:[{defaultQuery:It,currency:q.y.outputs.$currency},({defaultQuery:e,currency:t})=>({...e,currency:t})],or:{sid:"tdfnxt"}}),headers:At},response:{contract:(0,O.v)(W.g6),mapData:({result:e})=>(0,jt.TP)(e)}})}),$t=Mt.map((e=>e?.groups??null)).map((e=>e?.find((e=>"districts"===e.type))??null)).map(jt.Fq),Dt=(0,r.createEvent)({sid:"-cvfeo0"}),Bt=Mt.map((e=>e?.polygons_geo_json??null)),Lt=(0,n.createGate)({and:[],or:{sid:"cbura1"}}),{$data:Ot}=Pt({$directionMapShowed:(0,r.createStore)(!0,{sid:"1kz1c"}),readyToFetchMapStyle:Dt,$placeData:Mt});(0,r.sample)({and:[{clock:[Bt.updates,Nt.H.outputs.$theme.updates],target:Dt}],or:{sid:"svfcep"}}),(0,r.sample)({and:[{clock:Lt.open,source:{direction:H.R.outputs.$direction,isMobile:Z.l.outputs.$isMobile},filter:({isMobile:e,direction:t})=>!e&&Boolean(t),fn:({direction:e})=>({direction:e}),target:Et}],or:{sid:"t9pzu3"}});const zt={outputs:{$mapStyleData:Ot,$travelMapData:Mt,$initialDistrictPins:$t,TrapPreviewGate:Lt},internals:{fetchTravelMap:Et}},{createDistrictPins:Ft}=bt.qu.inputs,{$mapboxInstance:Ut}=Ct.outputs,{$initialDistrictPins:Rt}=zt.outputs,Ht=(0,r.combine)({and:[{map:Ut},({map:e})=>{if(!e)return null;const{width:t,height:s}=(0,kt.S3)(e);return{minX:0,minY:0,maxX:t,maxY:s-72}}],or:{sid:"ejt9l1"}}),{setDistrictPinSize:qt,recalculatePinsPosition:Zt,$pins:Wt,$mapDistrictPins:Gt}=Ft({$boundingBox:Ht,$mapboxInstance:Ut,$isCalculationEnabled:U.y.outputs.$isClient,$selectedPinId:(0,r.createStore)(null,{sid:"6wc6ol"}),$poisFromDistrict:(0,r.createStore)([],{sid:"g972sd"}),$initialDistrictPins:Rt});Gt.reset(jt.mH.inputs.fetch);const Qt={inputs:{setDistrictPinSize:qt,recalculatePinsPosition:Zt},outputs:{$mapDistrictPins:Gt,$pins:Wt}};var Yt=s(54236),Xt=s(54428);const Vt=(0,r.sample)({and:[{clock:[d.i.outputs.exact.$departDate.updates,d.i.outputs.exact.$returnDate.updates,d.i.outputs.$passengers.updates]}],or:{sid:"vemoam"}});(0,r.sample)({and:[{clock:[Xt.O.outputs.$jwt.updates,k.qF.outputs.$isFeedEnabled.updates,q.y.outputs.$currency.updates,Yt.z.outputs.$localeDeprecated.updates,H.R.outputs.$direction.updates,Vt],source:{locale:Yt.z.outputs.$localeDeprecated,direction:H.R.outputs.$direction,flag:k.qF.outputs.$isFeedEnabled},filter:({direction:e,flag:t,locale:s})=>Boolean(s&&e&&t),target:ze.inputs.fetch}],or:{sid:"d1thv9"}}),(0,r.sample)({and:[{source:H.R.outputs.$direction,filter:e=>!e,target:ze.inputs.reset}],or:{sid:"dn9h0c"}}),(0,r.sample)({and:[{source:ze.outputs.$nearbyLocationsIds,filter:e=>Boolean(e.length),target:vt.inputs.fetchLocations}],or:{sid:"e23x13"}}),(0,r.sample)({and:[{clock:ze.outputs.$data,filter:Boolean,fn:()=>null,target:ze.inputs.setSourcePlace}],or:{sid:"egyd1u"}});var Jt=s(54870),Kt=s(32671),es=s(39018);const{forwardToAnalyticsWithDefaults:ts}=Kt.I.inputs,{sendEvent:ss}=es.n.inputs;ts({clock:Ge.inputs.blockShowed,data:{action:"showed",label:"trap_content",category:"direction"},payload:(e,{payload:t})=>({...t,...e,userEvent:!1})}),(0,r.sample)({and:[{clock:Ge.inputs.providerClick,fn:({trap_id:e,role:t,contacts:s,order:i})=>({trap_id:e,occupation:t,click_url:s[0].url,item_position:i,content_source:"direction"}),target:Ge.internals.providerClickedAnalytics}],or:{sid:"g5orgp"}}),ts({clock:Ge.internals.providerClickedAnalytics,data:{action:"clicked",label:"content_providers",category:"direction"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})}),(0,r.sample)({and:[{clock:Ge.internals.providerClickedAnalytics,fn:()=>({type:"koroche_open_local_contact"}),target:ss}],or:{sid:"hk9u1x"}}),ts({clock:Ge.inputs.showMoreHotelsClicked,data:{action:"clicked",label:"hotels",category:"direction"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})}),(0,r.sample)({and:[{clock:Ge.inputs.textExpandClick,source:{location_id:H.R.outputs.$direction,location_name:Jt.C.outputs.$park.map((e=>e?.slug??null))},fn:({location_id:e,location_name:t},{trap_id:s})=>({trap_id:s,location_id:e??"",location_name:t??""}),target:Ge.internals.sendTextExpandAnalitics}],or:{sid:"iv0chm"}}),ts({clock:Ge.internals.sendTextExpandAnalitics,data:{action:"clicked",label:"trap_description",category:"direction"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})}),(0,r.sample)({and:[{clock:Ge.inputs.hotelItemShowed,source:q.y.outputs.$currency,fn:(e,t)=>({source:"explore",hotel_id:t.search_hotel_link_v2?(0,G.wB)(t.search_hotel_link_v2):void 0,rating:t.rating,stars:t.stars,price_per_night:t.price_from,currency:e}),target:Ge.internals.sendHotelItemShowedAnalitics}],or:{sid:"-eptihc"}}),ts({clock:Ge.internals.sendHotelItemShowedAnalitics,data:{action:"showed",label:"offer",category:"hotels"},payload:(e,{payload:t})=>({...t,...e,userEvent:!1})});const is={feed:ze,widget:$,analytics:Ge,nearbyParks:vt,districtPins:Qt,mapboxInstance:Ct,previewMap:zt};var os,ns=s(94184),as=s.n(ns),rs=s(47956),ls=s(44904),cs=s(31087),ds=s(43587),us=s(1156),ps=s(39535),ms=s(49963),hs=s(44619),gs=s(16097),_s="s__RekoOrh__Tnih48WfITv",fs=s(4407);function xs(){return xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},xs.apply(this,arguments)}var ys=function(e){return o.createElement("svg",xs({width:6,height:6,xmlns:"http://www.w3.org/2000/svg"},e),os||(os=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 0v6h6a6 6 0 01-6-6z"})))},vs={badge:"s__Uu0HBD_do1PC0Tv6xfP9",corner:"s__PZEgVk4tSGRmYYdxIBOJ",topCorner:"s__sU_wQHYEWmzGo65JhAiA",bottomCorner:"s__VuykG0ooMedk_DVNpLHg"};function bs({className:e,title:t,textColor:s,backgroundColor:i}){const o=(0,n.useUnit)(Nt.H.outputs.$isNight),a=o?s.dark_color:s.light_color,r=o?i.dark_color:i.light_color;return(0,p.jsxs)("div",{className:as()(e,vs.badge),style:{backgroundColor:r},children:[(0,p.jsx)(ms.x,{type:hs.y.Body3Semi,className:vs.title,truncateMode:hs.k.SingleLine,children:(0,p.jsx)("span",{style:{color:a},children:t})}),(0,p.jsx)(ys,{className:as()(vs.corner,vs.topCorner),style:{fill:r}}),(0,p.jsx)(ys,{className:as()(vs.corner,vs.bottomCorner),style:{fill:r}})]})}function js({imageUrl:e,title:t,subtitle:s,badge:i,imageSize:o,className:n,backgroundColor:a,onClick:r}){return(0,p.jsxs)("div",{className:as()("s__J7ZHoXiwzo0NlyQfNdl8",n),onClick:r,children:[(0,p.jsxs)("div",{className:"s__gDAoDmcTafqbS4XaQGhA",style:{backgroundColor:a},children:[(0,p.jsx)("div",{className:"s__tvMi0GyQpAEV0SNuDWER",children:(0,p.jsx)(fs.E,{className:"s__upXpP1tdGkRi3QFVqhBJ",srcTemplate:e,width:o,height:o,contrastOverlay:!0})}),i&&(0,p.jsx)(bs,{className:"s__wivxTYp25ApkKji4cYAx",title:i.text,textColor:i.style.text_color,backgroundColor:i.style.background_color})]}),(0,p.jsx)(ms.x,{className:"s__htwsw6zjDoxP9OamSur7",type:hs.y.Body2Semi,truncateMode:s?hs.k.SingleLine:hs.k.TwoLines,children:t}),s&&(0,p.jsx)(ds.AT,{className:"s__wR2wIYJIvP7F2sLlnK1X",type:hs.y.Body3Regular,truncateMode:hs.k.SingleLine,children:s})]})}function ks({block:e,className:t,onAllPlacesClick:s,onPlaceClick:i}){const{isMobile:a}=(0,n.useUnit)({isMobile:Z.l.outputs.$isMobile}),{places:r,button:l,title:c,subtitle:d}=e,u=(0,o.useMemo)((()=>1===r.length),[r.length]),m=(0,o.useMemo)((()=>2===r.length),[r.length]),h=(0,o.useMemo)((()=>r.length>2?179:131),[r.length]),{scrollForward:g,scrollBackward:_,isAtStart:f,isAtEnd:x,carouselRef:y}=function({gapWidth:e,itemWidth:t}){const s=(0,o.useRef)(null),[i,n]=(0,o.useState)(!0),[a,r]=(0,o.useState)(!1);(0,o.useEffect)((()=>{const e=s.current,t=()=>{if(!e)return;const{scrollLeft:t,scrollWidth:s,clientWidth:i}=e;n(t<=0),r(t+i>=s)};return e&&(e.addEventListener("scroll",t,{passive:!0}),t()),()=>{e&&e.removeEventListener("scroll",t)}}),[]);const l=(0,o.useCallback)((()=>{if(!s.current)return 0;const{clientWidth:o}=s.current;return i||a?2*t+.5*e-o/2:t+e}),[a,i,t,e]);return{scrollBackward:(0,o.useCallback)((()=>{if(!s.current)return;const e=l();s.current.scrollBy({left:-e,behavior:"smooth"})}),[l]),scrollForward:(0,o.useCallback)((()=>{if(!s.current)return;const e=l();s.current.scrollBy({left:e,behavior:"smooth"})}),[l]),isAtStart:i,isAtEnd:a,carouselRef:s}}({gapWidth:12,itemWidth:179}),v=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"s__ZaZ1VrXfLB8M7_wu1m0c",children:[(0,p.jsx)(ms.x,{className:"s__bmro3VPqhm1mqz8lcc3k",type:hs.y.Title2Bold,children:c}),(0,p.jsx)(ms.x,{className:"s__xtWUwvCpODvWN6KzMIu4",type:hs.y.Body1Regular,children:d})]}),l&&(0,p.jsx)("div",{className:"s__QoRk3CxSeHBXTzTUbZHg",children:(0,p.jsx)(us.z,{size:ps.qE.M,mod:ps.Ly.Default,priority:ps.Ji.Secondary,onClick:()=>{"group_id"===l.navigation.type?s({type:"group_id",groupId:l.navigation.group_id}):s({type:"deeplink",deeplink:l.navigation.deeplink})},children:l.text})})]});return(0,p.jsxs)("div",{className:as()("s__QzzU9ndQYi74HJkyRFMj",t),children:[a?v:(0,p.jsx)("div",{className:as()("s__mo6xtq1Ik6yHdZNqMKw2",!f&&"s__AM_75s0JLxwVeoMiKt3z"),children:v}),(0,p.jsxs)("div",{className:as()("s__ptrtW089nOQCy0LUJjea",u&&"s__NCfSfQ8W5wb9zaWXWgpL",m&&"s__j7m0suAEl0efg1aMeSIx"),children:[(0,p.jsxs)("nav",{className:"s__mJ1WdncPYj0iqcXKufVr",children:[!f&&(0,p.jsx)("div",{onClick:_,className:as()(_s,"s__R98iaMYTkU3w07GWc_fy"),children:(0,p.jsx)(gs.V,{})}),!x&&(0,p.jsx)("div",{onClick:g,className:as()(_s,"s__PYB28ZkMHYdIqr0QwQSQ"),children:(0,p.jsx)(gs.V,{})})]}),(0,p.jsx)("div",{ref:y,className:"s__MqN2qpZNcisvmwv7vkf1",children:r.map(((e,t)=>(0,p.jsx)(js,{title:e.name,subtitle:e.description,imageUrl:e.image_url,imageSize:h,className:"s__hGhEkst2vs5lbU1Geex7",badge:e.badge,backgroundColor:e.background_color,onClick:()=>{"group_id"===e.navigation.type?i({type:"group_id",groupId:e.navigation.group_id,placeId:e.id}):i({type:"deeplink",deeplink:e.navigation.deeplink})}},t)))})]})]})}const ws=(0,r.createEvent)({sid:"mshtq6"}),Cs=(0,r.createEvent)({sid:"-792wq3"}),Ss=(0,r.createEvent)({sid:"sibucg"}),Ns=(0,r.createEvent)({sid:"-2gn0sd"}),Ps=(0,r.createEvent)({sid:"-g3s300"}),Ts=(0,r.createEvent)({sid:"-okkx99"});(0,r.sample)({and:[{clock:ws,filter:e=>"group_id"===e.type,fn:e=>e,target:Ss}],or:{sid:"-u1t6hr"}}),(0,r.sample)({and:[{clock:ws,filter:e=>"deeplink"===e.type,fn:e=>e,target:Ns}],or:{sid:"-tmexvn"}}),(0,r.sample)({and:[{clock:Cs,filter:e=>"group_id"===e.type,fn:e=>e,target:Ps}],or:{sid:"-tikdq4"}}),(0,r.sample)({and:[{clock:Cs,filter:e=>"deeplink"===e.type,fn:e=>e,target:Ts}],or:{sid:"-t36540"}}),(0,r.sample)({and:[{clock:Ps,fn:({groupId:e})=>({mapOpenSource:cs.Oj.POI_CAROUSEL,openSource:cs.Ur.DIRECTION,layer:e}),target:rs.I.inputs.open}],or:{sid:"-snrwhw"}}),(0,r.sample)({and:[{clock:Ss,source:H.R.outputs.$direction,fn:(e,{groupId:t,placeId:s})=>({guideId:e,mapOpenSource:cs.Oj.POI_CAROUSEL,openSource:cs.Ur.DIRECTION,poiQueryOpenSource:cs.ik.DIRECTION,layer:t,poi:s}),target:ls.Y.inputs.open}],or:{sid:"-s5mowz"}}),(0,r.sample)({and:[{clock:Ps,source:H.R.outputs.$direction,fn:(e,{groupId:t})=>({guideId:e,mapOpenSource:cs.Oj.POI_CAROUSEL,openSource:cs.Ur.DIRECTION,layer:t}),target:rs.I.inputs.open}],or:{sid:"2t4nn4"}}),(0,r.sample)({and:[{clock:[Ns,Ts],fn:({deeplink:e})=>e,target:(0,r.createEffect)((e=>{window.open(e,"_blank")}),{sid:"qvdpt2"})}],or:{sid:"3cdger"}});const Is={inputs:{placeClick:ws,groupClick:Cs}},As=(0,r.withFactory)({sid:"nfw0sf",fn:()=>(0,l.SC)({view:ks,bind:{onAllPlacesClick:Is.inputs.groupClick,onPlaceClick:Is.inputs.placeClick}})}),Ms=(0,i.G6)({api:{containers:{CarouselBlockContainer:As}},importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/direction_screen_carousel_v2_plugin/index.ts"});var Es=s(77657),$s=s(10001);const Ds=({className:e,onClick:t})=>{const{t:s}=(0,g.useTranslation)("widget_guides_feed"),i=(0,n.useUnit)(Z.l.outputs.$isMobile);return(0,p.jsx)(a.A.Block,{className:as()("s__XVRobUCPxHXtnuPHim2R",e),children:(0,p.jsxs)(u.A,{size:i?Es.g.Mobile:Es.g.Desktop,children:[(0,p.jsx)(u.A.Icon,{mod:$s.i.Warning}),(0,p.jsx)(u.A.Title,{children:s("feedError.title")}),(0,p.jsx)(u.A.Content,{className:"s__Amr1EFFuZL9J6G932CoN",children:s("feedError.description")}),(0,p.jsx)(u.A.Actions,{children:(0,p.jsx)(u.A.Action,{onClick:t,children:s("feedError.button")})})]})})};const Bs=()=>(0,p.jsx)("div",{className:"s__E5bRl_do_3RFkFOo6qAl"});var Ls="s__ssaVwzkhdH9AA7LsqKnb";const Os=({className:e})=>(0,n.useUnit)(Z.l.outputs.$isMobile)?(0,p.jsx)("div",{className:Ls}):(0,p.jsx)(ds.qH,{className:as()(e,"s__OVYzT5vefsJXP1OI9VbJ"),children:(0,p.jsx)("div",{className:Ls,children:(0,p.jsx)("div",{className:"s__uK0BP9FyWjSkRkfChKdX"})})});const zs=()=>(0,p.jsxs)("div",{className:"s__jVTQX1mWxipTlsC8v8Ep",children:[(0,p.jsx)("div",{className:"s__ek7QU8qYWllho7FaYN4N"}),(0,p.jsx)("div",{className:"s__pEL0bDUiYPiu7MSloWXs"})]}),Fs=()=>{if((0,n.useUnit)(Z.l.outputs.$isMobile))return null;const e=new Array(4).fill(null).map(((e,t)=>(0,p.jsx)(zs,{},t)));return(0,p.jsxs)(ds.qH,{className:"s__kYocTABYF1NVLfqje3JS",children:[(0,p.jsx)("div",{className:"s__Z8ONhy56vcMdeKLy7djc"}),(0,p.jsx)("div",{className:"s__Q1Jm_i2cIvjwQO2F_mM5",children:e}),(0,p.jsx)("div",{className:"s__U3bPSCnCIhooxFvJ1JNw"})]})},Us=e=>(0,p.jsxs)("div",{className:as()("s__wCCkNnHKriMlx8fUtSHx",e.className),children:[(0,p.jsx)(Bs,{}),(0,p.jsx)(Os,{}),(0,p.jsx)(Fs,{})]});var Rs={feed:"s__CgGJxL7EiL38uQHQvyvh",feedCarouselV2:"s__DaApSJUKd58eU0bQeSUo",error:"s__mQrGgMigebYYgHohc1rQ",skeleton:"s__yLLHK6u6fYFUXgQ7Emcl",oneColumnBlock:"s__B7p0LmZpRmNDiVGQADpH",twoColumnsBlock:"s__EsDLCwfEswK6jTce3Fp4",carouselV2:"s__ItndWgbwEDWPePWiPLZX",header:"s__ngIenD8OjESCID1fupnw"};const Hs=({block:e,className:t})=>(0,p.jsx)("div",{className:as()("s__zvnyuBEEWpOC2Yf4h1iA",t),children:(0,p.jsxs)("div",{className:"s__VGRhQN7gvrPwIIwHv5xx",children:[(0,p.jsx)(ms.x,{className:"s__lB4Bv_jz95LwFy06oZN7",type:hs.y.Title2Bold,children:e.title}),e.subtitle&&(0,p.jsx)(ms.x,{className:"s__vfF4tB3sF9cv23HbczaF",type:hs.y.Body2Paragraph,mobileType:hs.y.Body1Paragraph,children:e.subtitle})]})});var qs=s(50112),Zs=s(97405),Ws={trapPreview:"s__MtFQQRTA1RXpcGCDAayP",header:"s__J85UgdBV_lgZmmgo16W6",title:"s__TI7i0ZWzCwqRQYGYxIIq",image:"s__dTjEihgoGDUdcxZkVb4G",map:"s__Zs8FGxe9vA8ozuTBJnml",imageWrapper:"s__w6KAF65k3oHY8NkVyefp",bubble:"s__GxiYWYx8ufJ5ZjzhUHZ8",bubbles:"s__Lft1c1BdrasxQN0cw8Gf",bubblesRow:"s__c5DN58P332JuUgxPFxBn"},Gs=s(62221);let Qs;!function(e){e[e.S=0]="S",e[e.M=1]="M",e[e.L=2]="L"}(Qs||(Qs={}));const Ys=e=>{switch(e){case Qs.L:return hs.y.Body2Semi;case Qs.M:return hs.y.Body3Semi;case Qs.S:return hs.y.CaptionSemi;default:return hs.y.Body2Semi}},Xs=({iconUrl:e,title:t,className:s,size:i=Qs.L})=>(0,p.jsxs)("div",{className:as()("s__IeNsOhmbbJRXbjGYNHy4",s),children:[e&&(0,p.jsx)(ds.Mf,{imageAlt:"",imageUrl:e,className:as()("s__nFArTuidbQMAreL3aGiF",i===Qs.M&&"s__n1Q2SQZef6xc3IvGXhgK",i===Qs.S&&"s__XNgLUUOsugNHo5YYsmNZ")}),(0,p.jsx)(ms.x,{type:Ys(i),children:t})]}),Vs=(e,t)=>(0,p.jsx)(Xs,{className:Ws.bubble,title:e.title,iconUrl:e.emoji.svg,size:t},e.id),Js=({block:e,onClick:t,cardWithTopIcon:s})=>{const i=(0,n.useUnit)(Nt.H.outputs.$theme),{bubblesRef:a,mapRef:r,currentSize:l,shouldRemoveLongestBubble:c}=(()=>{const{ref:e,width:t,isAlreadyRendered:s}=(0,Gs.y)(),{ref:i,width:n,isAlreadyRendered:a}=(0,Gs.y)(),[r,l]=(0,o.useState)(!1),[c,d]=(0,o.useState)(Qs.L),u=s||a,p=t-n,m=(0,Zs.D9)(u?p:0);return(0,o.useEffect)((()=>{if(u&&m&&m!==p&&p<=24)switch(c){case Qs.L:return void d(Qs.M);case Qs.M:d(Qs.S);break;case Qs.S:if(!0===r)return;l(!0),d(Qs.L)}}),[u,m,p,c,r]),{bubblesRef:i,mapRef:e,currentSize:c,shouldRemoveLongestBubble:r}})(),d=(0,o.useMemo)((()=>me({url:e.trap_preview.image_url,theme:i,width:311,height:128})),[e,i]),{isImageLoaded:u,onImageLoad:m}=(0,Zs.h3)(d),h=e.layers,g=(0,o.useMemo)((()=>h.length>4?h.slice(0,3):h.slice(0,4)),[h]),_=(0,o.useMemo)((()=>c?(e=>{const t=e.reduce(((e,t)=>t.title.length>e.title.length?t:e));return e.filter((e=>e.id!==t.id))})(g):g),[g,c]),f=h.length>(c?3:4),x=_.slice(0,2),y=_.slice(2);return(0,p.jsxs)(ds.qH,{cardWithTopIcon:s,title:e.trap_preview.title,iconUrl:e.emoji?.svg,className:Ws.trapPreview,classNames:{header:Ws.title},onClick:t,children:[(0,p.jsxs)("div",{ref:r,className:Ws.map,onClick:t,children:[(0,p.jsx)("div",{className:Ws.imageWrapper,children:(0,p.jsx)("img",{className:as()(Ws.image,Ws.transition,u&&Ws.visible),onLoad:m,src:d})}),(0,p.jsxs)("div",{ref:a,className:Ws.bubbles,children:[(0,p.jsx)("div",{className:Ws.bubblesRow,children:x.map((e=>Vs(e,l)))}),y.length>0&&(0,p.jsxs)("div",{className:Ws.bubblesRow,children:[y.map((e=>Vs(e,l))),f&&(0,p.jsx)(Xs,{className:Ws.bubble,size:l,title:"+"+(h.length-_.length)})]})]})]}),(0,p.jsx)(ds.of,{testId:"places-on-map-btn",children:e.button.text})]})};var Ks=s(25650);const ei=({children:e,className:t,onClick:s})=>(0,p.jsxs)(us.z,{className:as()("s__VysbEy0KNzDKYxayzq9b",t),priority:ps.Ji.Primary,size:ps.qE.Custom,onClick:s,testId:"places-on-map-btn",children:[(0,p.jsx)(us.z.Icon,{className:"s__YdcSPJacOxXpgC4K8BJv",children:(0,p.jsx)(Ks.a,{})}),e]});const ti="guides-feed-preview-map",{DistrictPin:si}=bt.qu.containers,ii=({pin:e})=>{const{setSize:t}=(0,n.useUnit)({setSize:is.districtPins.inputs.setDistrictPinSize}),{ref:s,height:i,width:a,isAlreadyRendered:l}=(0,Gs.y)(),c=e.displayType===bt.ZF.PIN?-i/2:0,d=bt.ai;return(0,o.useEffect)((()=>{l&&t({type:e.displayType,id:e.id,width:a+d,height:i+d})}),[a,i,l,e.id,e.displayType,t,d]),(0,p.jsx)(qs.Jx,{style:{zIndex:(0,r.withFactory)({sid:"-td3w7y",fn:()=>(0,bt.wY)(!1,e.displayType)}),pointerEvents:"none"},latitude:e.controlledCoordinates.latitude,longitude:e.controlledCoordinates.longitude,offset:[0,c],children:(0,p.jsx)("div",{ref:s,children:(0,p.jsx)(si,{pin:e,isHovered:!1,isSelected:!1})})})},oi=(0,o.memo)(ii),ni=({block:e,onClick:t,cardWithTopIcon:s})=>{const{mapStyles:i,placeData:a,districtPins:r,recalculatePinsPosition:l}=(0,n.useUnit)({mapStyles:is.previewMap.outputs.$mapStyleData,placeData:is.previewMap.outputs.$travelMapData,districtPins:is.districtPins.outputs.$pins,recalculatePinsPosition:is.districtPins.inputs.recalculatePinsPosition});return(()=>{const e=(0,qs.Sx)(),{setMapboxInstance:t,isClient:s}=(0,n.useUnit)({setMapboxInstance:is.mapboxInstance.inputs.setMapboxInstance,isClient:U.y.outputs.$isClient}),i=e[ti];(0,o.useEffect)((()=>(i&&s&&t(i.getMap()),()=>{t(null)})),[s,i,t])})(),(0,n.useGate)(is.previewMap.outputs.TrapPreviewGate),i&&a?(0,p.jsxs)(ds.qH,{cardWithTopIcon:s,className:"s__JMzMda7NAjZA0ibpfXZw",children:[e.header&&(0,p.jsx)(ms.x,{className:"s__HSfbsT433vHdrMgnrswK",type:hs.y.Title3Bold,children:e.header}),(0,p.jsx)("div",{className:"s__zrsQgHXs37VGAVQAY4Kx",onClick:t,children:(0,p.jsx)(ds.c3,{id:ti,mapStyle:i,zoom:a.start_zoom,startPoint:a.start_point,className:"s__URSQ9Mg00X6WZISFTRtw",onLoad:l,children:r?.map((e=>(0,p.jsx)(oi,{pin:e},e.id)))})}),(0,p.jsx)(ei,{className:"s__d8ejIJwAkS5Txq2Gu5GH",onClick:t,children:e.button.text})]}):(0,p.jsx)(Os,{className:"s__lczZn09j1PxvU_UzRA5J"})},ai=e=>(0,n.useUnit)(Z.l.outputs.$isMobile)?(0,p.jsx)(Js,{...e}):(0,p.jsx)(qs.Ib,{children:(0,p.jsx)(ni,{...e})});const ri=({block:e,onPinClick:t,onShowPlacesClick:s,cardWithTopIcon:i})=>(0,n.useUnit)(Z.l.outputs.$isMobile)?(0,p.jsx)(ds.HY,{cardWithTopIcon:i,...ye(e),onButtonClick:()=>s(e.id),children:e.places.map((s=>(0,p.jsx)(ds.d$,{title:s.name,subtitle:s.description,url:s.image_url,onClick:()=>t(e.id,s),icon:ge(s),iconSize:ds.Jh.LARGE,showOverlay:he(s)},s.id)))}):(0,p.jsx)(ds.Ri,{cardWithTopIcon:i,title:e.title,subtitle:e.subtitle,iconUrl:e.emoji.svg,iconImageUrl:e.icon_image_url,buttonText:e.button?.text,onButtonClick:()=>s(e.id),className:as()("s__DHMesDGIYSwTue9geQhS",i&&"s__FtJY0h3EuZE9Ao2qIn56"),children:(0,p.jsx)("div",{className:"s__iDoqv0dIyWu9XQ4YP4iE",children:e.places.slice(0,2).map((s=>(0,p.jsx)(ds.ek,{onClick:()=>t(e.id,s),image:({className:e})=>(0,p.jsx)("div",{className:e,children:(0,p.jsxs)(ds.G0,{imageUrl:s.image_url,size:170,caption:s.name,customOverlay:s.premium?.badge===cs.gZ.PAID,children:[(0,p.jsx)(ds.G0.Icon,{type:ge(s),size:ds.Jh.LARGE}),he(s)&&(0,p.jsx)(ds.G0.Overlay,{})]})}),content:()=>(0,p.jsx)(ms.x,{className:as()("s__p_f_JkqWWfCZswTPvwKi"),type:hs.y.Body2Regular,truncateMode:hs.k.TwoLines,children:s.name})},s.id)))})});function li(e,t){return e?151:t?374:181}const ci=({block:e,shouldShrink:t=!1,onPinClick:s,onShowPlacesClick:i,cardWithTopIcon:a})=>{const r=(0,n.useUnit)(Z.l.outputs.$isMobile),l=t=>e.places.slice(0,t),c=(0,o.useMemo)((()=>r?e.places.length%2==0?e.places:l(e.places.length-1):l(5)),[r]);return(0,p.jsx)(ds.Ri,{cardWithTopIcon:a,buttonText:e.button?.text,iconUrl:e.emoji?.svg,iconImageUrl:e.icon_image_url,title:e.title,subtitle:e.subtitle,onButtonClick:()=>i(e.id),children:(0,p.jsx)("div",{className:as()("s__V55baHNdteFQiPQCXGwK",t&&"s__MmivruYWZBCywkv5pSBq"),children:c.map(((t,i)=>{const o=0===i&&c.length>=5;return(0,p.jsx)(ds.ek,{className:o?"s__I9n3VYkWcmGONZun9nbf":void 0,onClick:()=>s(e.id,t),image:({className:e})=>(0,p.jsx)("div",{className:e,children:(0,p.jsxs)(ds.G0,{imageUrl:t.image_url,size:li(Boolean(r),o),customOverlay:t.premium?.badge===cs.gZ.PAID,children:[(0,p.jsx)(ds.G0.Icon,{className:o?"s__VjH235oHaBBicNwPfhhL":void 0,size:ds.Jh.LARGE,type:ge(t)}),he(t)&&(0,p.jsx)(ds.G0.Overlay,{})]})},t.id)},t.id+1)}))})})};var di=s(80871);const ui=({iconUrl:e,title:t,subtitle:s,icon:i,onClick:o})=>(0,p.jsx)(us.z,{className:"s__IjB25u3OIW88_go93cW8",onClick:o,priority:ps.Ji.Tertiary,mod:ps.Ly.Custom,children:(0,p.jsxs)(us.z.Label,{className:"s__iZjCmZM3uQQtdUTIbtU2",children:[(0,p.jsx)("img",{className:"s__PC4qWyaL917pT1XUmn1R",src:e}),(0,p.jsxs)("div",{className:"s__kgILwQSPifsWQGdIu3aR",children:[(0,p.jsxs)("div",{className:"s__d9kubra9d3ZW_xCuym4d",children:[(0,p.jsx)(ms.x,{className:"s__ZjxmQXvpIs7f502uToCw",type:hs.y.Body1Semi,children:t}),i&&(0,p.jsx)(ds.TC,{badge:i,isSmall:!0,className:"s__kM14qShDkVAb714h6aTo"})]}),(0,p.jsx)(ds.AT,{className:"s__R7Qf6fHVzjd0q5pKgRo6",type:hs.y.CaptionRegular,children:s})]}),(0,p.jsx)(di.i,{className:"s__BB10lBMM8gh4XWmyCTlc"})]})});const pi=({block:e,onLayerClick:t,cardWithTopIcon:s})=>(0,p.jsx)(ds.qH,{cardWithTopIcon:s,className:"s__EPnihRy1JPxMgniuiCqD",iconUrl:e.emoji?.svg,title:e.title,children:(0,p.jsx)("div",{children:e.layers.map((e=>(0,p.jsx)(ui,{title:e.title,subtitle:e.subtitle,iconUrl:e.emoji.svg,icon:e.premium?.badge,onClick:()=>t(e.id)},e.id)))})}),mi=({block:e,trap_id:t})=>{const s=(0,n.useUnit)(is.analytics.inputs.providerClick);return(0,p.jsx)(ds.Cl,{providers:e.providers,onProviderClick:e=>{s({...e,trap_id:t})}})};const hi=e=>(0,p.jsx)(ds.qH,{cardWithTopIcon:e.cardWithTopIcon,className:"s__d0ravPA2niHSVSHq3GJi",title:e.block.title,classNames:{header:"s__ccBo3asYNanA5yK9Iwvw"},children:(0,p.jsx)("div",{className:"s__uI2AEWJQNC3nMzcQlhEx",children:e.block.places.map((t=>(0,p.jsx)(ds.ek,{image:({className:e})=>(0,p.jsx)("div",{className:e,children:(0,p.jsxs)(ds.G0,{imageUrl:t.image_url,size:151,caption:t.name,customOverlay:t.premium?.badge===cs.gZ.PAID,children:[(0,p.jsx)(ds.G0.Icon,{type:ge(t),size:ds.Jh.LARGE}),he(t)&&(0,p.jsx)(ds.G0.Overlay,{})]})}),content:({className:e})=>(0,p.jsx)(ms.x,{className:as()("s__mcotWPISr27tVebdwGr2",e),type:hs.y.Body2Regular,truncateMode:hs.k.TwoLines,children:t.name}),onClick:()=>e.onPinClick(void 0,t)},t.id)))})});var gi=s(50308),_i=s.n(gi),fi=s(97650);const xi=(0,o.createContext)(null),yi=({children:e})=>{const t=(0,o.useRef)(new Set),s=(0,n.useUnit)(H.R.outputs.$direction);return(0,o.useEffect)((()=>{t.current.clear()}),[s]),(0,p.jsx)(xi.Provider,{value:t,children:e})},vi=({blockItem:e,children:t,className:s,threshold:i=.75})=>{const[a,r]=(0,fi.YD)({threshold:i}),{sendBlockShowedAnalytics:l}=(0,n.useUnit)({sendBlockShowedAnalytics:is.analytics.inputs.blockShowed}),c=(0,o.useContext)(xi),d=(0,o.useCallback)((()=>{e.analytics.block_order&&(c?.current.add(e.analytics.block_order),l(e.analytics))}),[e,l]);return(0,o.useEffect)((()=>{r&&e.analytics.block_order&&!c?.current.has(e.analytics.block_order)&&d()}),[r,e.analytics.block_order,d]),(0,p.jsx)("div",{className:s,ref:a,children:t})};const bi=({className:e})=>(0,p.jsxs)("div",{className:as()("s__JsgyY4HfJr9w4Tt87n77",e),children:[(0,p.jsx)("div",{className:"s__pEjZ3eQZBsR8r0qhMCW7"}),(0,p.jsx)("div",{className:"s__OrqvCiulpdQmIrJT5gJh",children:(0,p.jsx)("div",{className:"s__CsIQ2Lzb982nEuP7z1As"})})]}),ji=({cardWithTopIcon:e,blockItem:t,Component:s,componentProps:i={},className:a,SkeletonComponent:r=bi})=>{const{defaultHeaders:l}=(0,n.useUnit)({defaultHeaders:R.D.outputs.$defaultHeaders}),[c,d]=(0,o.useState)(t.data),[u,m]=(0,o.useState)(!1),[h,g]=(0,fi.YD)({threshold:0,triggerOnce:!0});return(0,o.useEffect)((()=>{!c&&g&&t.url&&(m(!0),async function(e,t){const s=await fetch(e,{headers:t});if(!s.ok)throw new Error(`Failed to load feed block ${e}`);return s.json()}(t.url,l).then(d).catch(_i()).finally((()=>{m(!1)})))}),[t,g,c]),c?(0,p.jsx)(vi,{className:a,blockItem:t,children:(0,p.jsx)(s,{...i,block:c,cardWithTopIcon:e})}):!g||u?(0,p.jsx)("div",{ref:h,className:a,children:(0,p.jsx)(r,{})}):null};const ki=({className:e})=>{const t=new Array(4).fill(null).map(((e,t)=>(0,p.jsx)(zs,{},t)));return(0,p.jsx)("div",{className:as()("s__CfIZUixCGJi31y99CF86",e),children:(0,p.jsxs)(ds.qH,{className:"s__F89Cx0t10qO0wshM3Cwy",children:[(0,p.jsx)("div",{className:"s__V6nar_mYkry_PM2sxKOf"}),(0,p.jsx)("div",{className:"s__il9f2adspwcVlvmm05oA",children:t}),(0,p.jsx)("div",{className:"s__nkVX_yz6BIzN6JpRvXGA"})]})})};const wi=({block:e,trap_id:t})=>{const s=(0,n.useUnit)(is.analytics.inputs.textExpandClick),[i,a]=(0,o.useState)((()=>Boolean(e.expanded?.button_text))),[r,l]=(0,o.useState)((()=>e.text)),c=(0,o.useCallback)((()=>{a((e=>!e)),l(e?.expanded?.text??e.text),s({trap_id:t})}),[e,t,s]);return(0,p.jsxs)("div",{className:"s__Zzeh5m_UOmeyC5wtHtjJ",children:[(0,p.jsx)(ds.Jv,{type:hs.y.Body1Paragraph,transformOnMobile:!0,children:r}),i&&(0,p.jsx)("div",{className:"s__eZlF061BSFfjwSzsNTdd",children:(0,p.jsx)("button",{className:"s__cTszDADsjK1IfsQx4CBY",type:"button",onClick:c,children:(0,p.jsx)(ms.x,{type:hs.y.Body1Paragraph,mobileType:hs.y.Body2Regular,children:e.expanded?.button_text})})})]})};var Ci=s(62423),Si="s__iuTF51mDayOrxDApMU5h",Ni=s(34701),Pi=s(87115);const Ti=({badges:e})=>e?(0,p.jsx)("div",{className:"s__O6uHZche2BGqOQdqjHOp",children:e.map(((e,t)=>(0,p.jsx)(Ni.C,{priority:Pi.Tt.Primary,className:"s__Mu5iCFdIe7ytqbiklXNl",size:Pi.OD.S,customHexColor:e.style.background_color,children:(0,p.jsxs)("div",{className:"s__o0xIhucRRU6U2QbY4Ink",children:[e.icon?.svg&&(0,p.jsx)("img",{className:"s__Jd9twqyZtGIIOm9D_v3Z",alt:"",src:e.icon.svg}),(0,p.jsx)(ms.x,{type:hs.y.Body3Semi,truncateMode:hs.k.SingleLine,style:{color:e.style.text_color},children:e.text})]})},t)))}):null,Ii=({block:e,onShowPlacesClick:t,onPinClick:s,cardWithTopIcon:i})=>(0,n.useUnit)(Z.l.outputs.$isMobile)?(0,p.jsx)(ds.HY,{cardWithTopIcon:i,...ye(e),buttons:(0,p.jsx)(ds.WB,{text:e.landing_button?.text,cashBackType:Ci.N9.CashbackHotelTrap}),onButtonClick:()=>t(e.id),children:e.places.map((t=>(0,p.jsx)(ds.d$,{title:t.name,subtitle:t.description,url:t.image_url,className:Si,icon:t.premium?.badge,iconSize:ds.Jh.LARGE,onClick:()=>s(e.id,t),children:(0,p.jsx)(Ti,{badges:t.badges})},t.id)))}):(0,p.jsx)(ds.Ri,{cardWithTopIcon:i,buttonText:e.button?.text,iconUrl:e.emoji.svg,iconImageUrl:e.icon_image_url,title:e.title,subtitle:e.subtitle,onButtonClick:()=>t(e.id),buttons:(0,p.jsx)(ds.WB,{text:e.landing_button?.text,cashBackType:Ci.N9.CashbackHotelTrap}),children:(0,p.jsx)("div",{className:"s__dqSzzcPOSGkDrldDpH4a",children:e.places.slice(0,4).map((t=>(0,p.jsx)(ds.ek,{className:Si,onClick:()=>s(e.id,t),image:({className:e})=>(0,p.jsxs)("div",{className:e,children:[(0,p.jsx)(ds.G0,{size:181,imageUrl:t.image_url,customOverlay:t.premium?.badge===cs.gZ.PAID,children:(0,p.jsx)(ds.G0.Icon,{type:t.premium?.badge,size:ds.Jh.LARGE})}),(0,p.jsx)(Ti,{badges:t.badges})]},t.id),content:()=>(0,p.jsxs)("div",{className:"s__ZAGCvzQJ8KuEJVhPPaIV",children:[(0,p.jsx)(ms.x,{type:hs.y.Body2Regular,truncateMode:hs.k.TwoLines,children:t.name}),(0,p.jsx)(ms.x,{type:hs.y.Body3Regular,className:"s__xWJbgLybuQqKyK84HxGB",truncateMode:hs.k.SingleLine,children:t.description})]})},t.id)))})});const Ai=e=>{const t=e.length>=8?8:4;return e.slice(0,t)},Mi=({block:e,onPinClick:t,onShowPlacesClick:s,cardWithTopIcon:i})=>(0,n.useUnit)(Z.l.outputs.$isMobile)?(0,p.jsx)(ds.HY,{cardWithTopIcon:i,...ye(e),onButtonClick:()=>s(e.id),children:e.places.map((s=>(0,p.jsx)(ds.d$,{title:s.name,subtitle:s.description,url:s.image_url,imageWidth:140,className:"s__CcLt91TSct5iSHVmdPPF",titleTextType:hs.y.Body2Regular,onClick:()=>t(e.id,s),icon:ge(s),iconSize:ds.Jh.MEDIUM,showOverlay:he(s)},s.id)))}):(0,p.jsx)(ds.Ri,{cardWithTopIcon:i,buttonText:e.button?.text,iconUrl:e.emoji.svg,iconImageUrl:e.icon_image_url,title:e.title,subtitle:e.subtitle,onButtonClick:()=>s(e.id),children:(0,p.jsx)("div",{className:"s__LMXR5kvoviMvxwW42Id0",children:Ai(e.places).map((s=>(0,p.jsx)(ds.ek,{onClick:()=>t(e.id,s),image:({className:e})=>(0,p.jsx)("div",{className:e,children:(0,p.jsxs)(ds.G0,{imageUrl:s.image_url,size:181,caption:s.name,customOverlay:s.premium?.badge===cs.gZ.PAID,children:[(0,p.jsx)(ds.G0.Icon,{type:ge(s),size:ds.Jh.LARGE}),he(s)&&(0,p.jsx)(ds.G0.Overlay,{})]})},s.id),content:()=>(0,p.jsx)(ms.x,{type:hs.y.Body2Regular,className:"s__nrG2fAJqtJBl5KvpKjYi",truncateMode:hs.k.TwoLines,children:s.name})},s.id)))})});const Ei=({block:e,className:t})=>{const{emoji:s,text:i}=e;return(0,p.jsxs)(ds.Qu,{className:as()("s__h__pZWIdhUrO1dn74oGB",t),children:[(0,p.jsx)(ds.Qu.Icon,{className:"s__a7Spp0TL5EfbKeCYdn3a",src:s.svg}),(0,p.jsx)(ds.Qu.Text,{text:i,type:hs.y.Body1Paragraph,mobileType:hs.y.Body3Paragraph})]})};const $i=({img:e,zIndex:t})=>{const s=(0,n.useUnit)(Z.l.outputs.$isMobile)?44:52,i=me({url:e.url,width:s,height:s}),{isImageLoaded:o,onImageLoad:a}=(0,Zs.h3)(i);return(0,p.jsx)("div",{className:"s__WSmUyDIH3H4Hv24eLPIC",style:{zIndex:t},children:(0,p.jsx)("img",{className:as()("s__kzKG4FQokrYwCzXoMLkg",o&&"s__HOSaDRIYl4oiUShQaKyp"),src:i,alt:e.description?.text??"",onLoad:a})})},Di=({block:e,isFirstBlock:t})=>(0,p.jsxs)("div",{className:as()("s__Ve6HTMOLIKF1Tunf46kQ",!t&&"s__Uq1ZsaDAkGetkerBbvZk"),children:[(0,p.jsxs)("div",{className:"s__DYcMFFR3cNg4ry3TMdM8",children:[(0,p.jsx)(ms.x,{className:"s__E1U07jlof2EVUWchAa32",type:hs.y.Title2Bold,transformOnMobile:!0,children:e.title}),(0,p.jsx)(ms.x,{className:"s__k2UIuDKC3ya0A1sUVXk6",type:hs.y.Body2Paragraph,children:e.subtitle})]}),(0,p.jsx)("div",{className:"s__WUHA2PYUeuxZIaIG8b1U",children:e.images.map(((e,t)=>(0,p.jsx)($i,{img:e,zIndex:t},t)))})]});var Bi=s(51389),Li=s(92617),Oi=s(94590);const zi=({hotel:e,className:t})=>{const{t:s}=(0,g.useTranslation)("widget_guides_feed");return(0,p.jsxs)("div",{className:as()("s__hHI2tdQkFmbfGl9jXvOO",t),children:[(0,p.jsxs)("div",{className:"s__k0U2d_NbgPqRc6O3Xv8N",children:[(0,p.jsx)(Ni.C,{className:"s__SkAEeJVj3mlc89fqCt80",size:Pi.OD.S,color:Pi.JV.Green,borderStyle:Pi.Pk.Brick,children:e.rating}),(0,p.jsx)(ds.ME,{value:e.stars})]}),(0,p.jsx)(ms.x,{type:hs.y.Body2Regular,truncateMode:hs.k.TwoLines,children:e.name}),(0,p.jsxs)("span",{className:"s__EJn_VurKzbI83JN3_i7n",children:[(0,p.jsxs)(ms.x,{className:"s__MVr7ds2BQCTKDosG5oP5",type:hs.y.Body1Semi,children:[`${s("hotels.priceFrom")}`," ",(0,p.jsx)(ds.fE,{price:e.price_from})]}),(0,p.jsx)(ms.x,{className:"s__J3u7zY1LVw4XqwjDYggt",type:hs.y.CaptionRegular,children:s("hotels.priceForPeriod")})]})]})};const Fi=({pin:e,onHotelClick:t,onViewItem:s})=>{const i=(0,Bi.nS)((()=>s(e))),o=e.badges.length?e.badges[0]:null,n=(0,Li.r)({link:e.search_hotel_link||null,link_v2:e.search_hotel_link_v2||null,openSource:G.h0.direction_screen});return(0,p.jsx)(ds.d$,{ref:i,href:n,title:e.name,url:e.main_photo_url,content:({className:t})=>(0,p.jsx)(zi,{className:t,hotel:e}),onClick:()=>t({search_hotel_link_v2:e?.search_hotel_link_v2||null,entrypoint:Oi.H_.ExploreDirectionHotels}),className:"s__q6rxgaIqjaxwMzSLoKJb",children:o&&(0,p.jsx)(Ni.C,{className:"s__CpLdVj3ceowDk6KSXtjk",size:Pi.OD.S,customHexColor:o.color,children:o.name})},e.id)},Ui=({block:e,onHotelClick:t,onMoreHotelsClick:s,onViewItem:i,cardWithTopIcon:o})=>(0,p.jsx)(ds.HY,{cardWithTopIcon:o,title:e.title,subtitle:e.subtitle,iconUrl:e.emoji.svg,buttonText:e.button.text,buttonLink:e.data.search_location_link,buttons:(0,p.jsx)(ds.WB,{text:e.landing_button?.text,cashBackType:Ci.N9.CashbackHotelSerp}),onButtonClick:()=>s(e.data.search_location_link),children:e.data.hotels.map((e=>(0,p.jsx)(Fi,{pin:e,onHotelClick:t,onViewItem:i},e.id)))});const Ri=({pin:e,onHotelClick:t,onViewItem:s})=>{const i=(0,Bi.nS)((()=>s(e))),o=e.badges.length?e.badges[0]:null,n=(0,Li.r)({link:e.search_hotel_link||null,link_v2:e.search_hotel_link_v2||null,openSource:G.h0.direction_screen});return(0,p.jsx)(ds.ek,{ref:i,href:n,onClick:()=>t({search_hotel_link_v2:e?.search_hotel_link_v2||null,entrypoint:Oi.H_.ExploreDirectionHotels}),image:({className:t})=>(0,p.jsx)("div",{className:t,children:(0,p.jsxs)("div",{className:"s__OVdfTtI388AaQ1uXuS_k",children:[(0,p.jsx)(ds.G0,{size:181,imageUrl:e.main_photo_url}),o&&(0,p.jsx)(Ni.C,{className:"s__pi9KYAm61Wo7ROUztJxf",size:Pi.OD.S,customHexColor:o.color,children:o.name})]})}),content:()=>(0,p.jsx)(zi,{hotel:e})})},Hi=({block:e,onHotelClick:t,onMoreHotelsClick:s,onViewItem:i,cardWithTopIcon:o})=>(0,p.jsx)(ds.Ri,{cardWithTopIcon:o,buttonText:e.button.text,iconUrl:e.emoji.svg,iconImageUrl:e.icon_image_url,title:e.title,subtitle:e.subtitle,buttonLink:e.data.search_location_link,buttons:(0,p.jsx)(ds.WB,{text:e.landing_button?.text,cashBackType:Ci.N9.CashbackHotelSerp}),onButtonClick:()=>s(e.data.search_location_link),children:(0,p.jsx)("div",{className:"s__Z9ZQbpYzvxkR47MO5c8_",children:e.data.hotels.slice(0,4).map((e=>(0,p.jsx)(Ri,{pin:e,onViewItem:i,onHotelClick:t},e.id)))})}),qi=({block:e,cardWithTopIcon:t})=>{const{isMobile:s,onHotelClick:i,sendShowMoreHotelsClickedAnalytics:o,sendHotelItemShowedAnalytics:a}=(0,n.useUnit)({isMobile:Z.l.outputs.$isMobile,onHotelClick:G.$o.inputs.hotelClicked,sendShowMoreHotelsClickedAnalytics:is.analytics.inputs.showMoreHotelsClicked,sendHotelItemShowedAnalytics:is.analytics.inputs.hotelItemShowed}),r=s?Ui:Hi;return(0,p.jsx)(r,{cardWithTopIcon:t,block:e,onHotelClick:i,onMoreHotelsClick:e=>{o({click_url:e})},onViewItem:a})};const Zi=({location:e,isLong:t,className:s,arkId:i})=>{const o=(0,n.useUnit)(is.nearbyParks.inputs.openPark),a=Boolean(e.subtitle);return(0,p.jsx)(us.z,{className:as()("s__ovRdzP8PzsgL2SWg52G5",s),priority:ps.Ji.Tertiary,mod:ps.Ly.Custom,onClick:()=>{o({title:e.title,arkId:i})},children:(0,p.jsxs)(us.z.Label,{className:"s__DLafGzsn03N6vKf794Qf",children:[(0,p.jsx)("div",{style:{borderRadius:8},className:"s__y9y9X7GhWYy2xIQb_OBL",children:(0,p.jsx)(fs.E,{srcTemplate:e.image_url,width:56,height:56,alt:"",className:"s__YkZzMzqb2BFPmyluSoXb",draggable:!0})}),(0,p.jsxs)("div",{className:"s__D7eET6YRFyaeXqqSfWhx",children:[(0,p.jsxs)("div",{className:as()("s__qoMSb4PHGQYWPaSt1wgT",t&&"s__mCDGul1GvHSa7gGPERlR"),children:[(0,p.jsx)(ms.x,{truncateMode:a?hs.k.SingleLine:hs.k.TwoLines,type:hs.y.Body2Semi,children:e.title}),a&&(0,p.jsx)(ms.x,{truncateMode:hs.k.SingleLine,className:"s__n9qP2B7dQ2MAfy04jj6X",type:hs.y.Body3Regular,children:e.subtitle})]}),(0,p.jsx)(di.i,{className:"s__g7s6Z6oYMl_ZcgfaReAc"})]})]})})};const Wi=({className:e})=>(0,p.jsx)("div",{className:as()("s__Jk95R_J5Ru0mObs35yhh",e)});var Gi="s__llkvj8bykBp2BetUqoyY",Qi="s__lIVQFtQc8BttPVzYIQQp",Yi="s__Kvxrdm5JGiE_CWNi9tqQ";const Xi=({block:e})=>{const{locations:t,locationsLoading:s}=(0,n.useUnit)({locations:is.nearbyParks.outputs.$data,locationsLoading:is.nearbyParks.outputs.$pending}),i=e.locations.filter((e=>"direction_screen"===e.navigation.type)),{length:o}=i;return 0===o?null:s?(0,p.jsx)("ul",{className:Gi,children:i.map(((e,t)=>(0,p.jsx)(Wi,{className:as()(Qi,1===o&&Yi)},t)))}):(0,p.jsx)("ul",{className:Gi,children:i.filter((e=>t?.[e.navigation.ark_id])).map((e=>(0,p.jsx)("li",{className:as()(Qi,1===o&&Yi),children:(0,p.jsx)(Zi,{location:e,isLong:1===o,arkId:e.navigation.ark_id})},e.navigation.ark_id)))})},{CarouselBlockContainer:Vi}=Ms.containers,Ji=()=>{const{data:e,direction:t,isError:s,isLoading:i,isMobile:a,openModal:r,openPoi:l,refetch:c,isArkId:d,isReduceTrapTitle:u,trapNewDesignEnabled:m}=(0,n.useUnit)({data:ze.outputs.$data,isLoading:ze.outputs.$pending,isError:ze.outputs.$failed,refetch:ze.inputs.fetch,openModal:rs.I.inputs.open,openPoi:ls.Y.inputs.open,isMobile:Z.l.outputs.$isMobile,direction:H.R.outputs.$direction,isArkId:H.R.outputs.$isArkId,isReduceTrapTitle:k.qF.outputs.$isReduceTrapTitle,trapNewDesignEnabled:Q.R.outputs.$trapNewDesignEnabled}),h=(0,o.useCallback)((e=>(s,i)=>{if(i)return a||r({layer:s??null,analytics:e.analytics,openSource:cs.Ur.DIRECTION,mapOpenSource:cs.Oj.DIRECTION,guideId:t}),void l({layer:s??null,poi:i.id,openType:i.open_type??cs.B8.MAP,guideId:t,openSource:cs.Ur.DIRECTION,poiOpenSource:cs.sL.feed,poiQueryOpenSource:cs.ik.DIRECTION,analytics:e.analytics,mapOpenSource:cs.Oj.DIRECTION});r({layer:s??null,analytics:e.analytics,openSource:cs.Ur.DIRECTION,mapOpenSource:cs.Oj.DIRECTION,guideId:t})}),[t,r,l,a]),g=(0,o.useMemo)((()=>e?.blocks.map(((e,t)=>{if(ce(e)&&e.data)return(0,p.jsx)(vi,{className:as()(Rs.twoColumnsBlock,Rs.header),blockItem:e,children:(0,p.jsx)(Di,{isFirstBlock:0===t,block:e.data})},t);if(V(e)&&e.data)return(0,p.jsx)(Hs,{className:as()(Rs.twoColumnsBlock,Rs.header),block:e.data},t);if(J(e)&&e.data)return(0,p.jsx)(vi,{className:as()(Rs.twoColumnsBlock,Rs.item),blockItem:e,children:(0,p.jsx)(ai,{cardWithTopIcon:!u,block:e.data,onClick:()=>h(e)()})},t);if(le(e)&&e.data)return(0,p.jsx)(vi,{className:as()(Rs.twoColumnsBlock,Rs.item),blockItem:e,children:(0,p.jsx)(Mi,{cardWithTopIcon:!u,block:e.data,onPinClick:h(e),onShowPlacesClick:h(e)})},t);if(K(e)&&e.data)return(0,p.jsx)(vi,{className:as()(!a&&Rs.oneColumnBlock,Rs.item),blockItem:e,children:(0,p.jsx)(ds.Z9,{cardWithTopIcon:!u,block:e.data})},t);if(ee(e)&&e.data)return(0,p.jsx)(vi,{blockItem:e,className:as()(!a&&Rs.oneColumnBlock,Rs.item),children:(0,p.jsx)(ri,{cardWithTopIcon:!u,block:e.data,onPinClick:h(e),onShowPlacesClick:h(e)})},t);if(te(e)&&e.data){const s=!a&&_e(e);return(0,p.jsx)(vi,{className:as()(s?Rs.oneColumnBlock:Rs.twoColumnsBlock,Rs.item),blockItem:e,children:(0,p.jsx)(ci,{cardWithTopIcon:!u,block:e.data,shouldShrink:s,onPinClick:h(e),onShowPlacesClick:h(e)})},t)}return se(e)&&e.data?(0,p.jsx)(vi,{className:as()(Rs.twoColumnsBlock,Rs.item),blockItem:e,children:(0,p.jsx)(pi,{cardWithTopIcon:!u,block:e.data,onLayerClick:h(e)})},t):ie(e)&&e.data?(0,p.jsx)(vi,{className:as()(Rs.twoColumnsBlock,Rs.item),blockItem:e,children:(0,p.jsx)(mi,{block:e.data,trap_id:e.analytics.trap_id})},t):re(e)?(0,p.jsx)(ji,{className:as()(Rs.twoColumnsBlock,Rs.item),blockItem:e,SkeletonComponent:ki,Component:Ii,componentProps:{onPinClick:h(e),onShowPlacesClick:h(e)},cardWithTopIcon:!u},t):de(e)?(0,p.jsx)(ji,{className:as()(Rs.twoColumnsBlock,Rs.item),blockItem:e,SkeletonComponent:ki,Component:qi,cardWithTopIcon:!u},t):oe(e)&&e.data&&a?(0,p.jsx)(vi,{className:Rs.item,blockItem:e,children:(0,p.jsx)(hi,{block:e.data,cardWithTopIcon:!u,onPinClick:h(e)})},t):ne(e)&&e.data?(0,p.jsx)(vi,{blockItem:e,className:as()(Rs.twoColumnsBlock,Rs.item),children:(0,p.jsx)(Ei,{block:e.data})},t):ae(e)&&e.data?(0,p.jsx)(vi,{className:as()(Rs.twoColumnsBlock,Rs.item),blockItem:e,children:(0,p.jsx)(wi,{block:e.data,trap_id:e.analytics.trap_id})},t):ue(e)&&e.data?(0,p.jsx)(vi,{className:as()(Rs.twoColumnsBlock,Rs.item),blockItem:e,children:(0,p.jsx)(Xi,{block:e.data})},t):pe(e)&&e.data?(0,p.jsx)(vi,{className:as()(Rs.twoColumnsBlock,Rs.item,Rs.carouselV2),blockItem:e,children:(0,p.jsx)(Vi,{block:e.data})},t):null}))),[e,a,h,u]);return(d||e)&&i?(0,p.jsx)(Us,{className:Rs.skeleton}):s?(0,p.jsx)(Ds,{className:Rs.error,onClick:c}):s||i||!e?null:(0,p.jsx)("div",{className:as()(Rs.feed,m&&Rs.feedCarouselV2),children:g})};const Ki=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/direction_screen_feed/index.ts",lifecycle:{start:is.widget.outputs.initialized},api:{outputs:{initialized:is.widget.outputs.initialized},containers:{GuidesFeed:()=>{const{isVisible:e,readyToFetch:t,noData:s}=(0,n.useUnit)({isVisible:is.widget.outputs.$isVisible,readyToFetch:is.feed.inputs.readyToFetchFeed,noData:is.feed.outputs.$noData});return(0,o.useEffect)((()=>(e&&t(!0),()=>{t(!1)})),[t,e]),e?s?(0,p.jsx)(y,{}):(0,p.jsx)(a.A,{className:"s__G2Q1DzjMEAeMOM73mngC",children:(0,p.jsx)(yi,{children:(0,p.jsx)(Ji,{})})}):null}},inputs:{setPlaceSource:is.feed.inputs.setSourcePlace}}})},73806:function(e,t,s){"use strict";s.d(t,{FE:function(){return I},ai:function(){return N},rr:function(){return _},ZF:function(){return h},SR:function(){return P},Y:function(){return T},wY:function(){return b},v6:function(){return v},A4:function(){return k},a8:function(){return j},qu:function(){return H}});var i={};s.r(i),s.d(i,{DistrictPin:function(){return E}});var o=s(30091),n=s(67294),a=s(49963),r=s(44619),l=s(4190),c=s(94184),d=s.n(c),u=s(38387),p=s(89421),m={root:"s__gNblTg0YCm1tYvI1ZJWK",anchor:"s__rbUgofmGn92lCSMYigYO",bottom:"s__K7u9P81Jv316ts8sL34h",none:"s__ZhyhUg5lnpNPohLiJktg",cluster:"s__Mal45KK0Vz0HrZFu8aXV",cluster_moving:"s__y_deWUHeHcSbGzLCBmmQ",pin:"s__P5t5vSZlx7J05HbS_OvM",arrow:"s__odqe7PxMsj1UMkvteCSD"};let h,g,_;!function(e){e.CLUSTER="cluster",e.PIN="pin"}(h||(h={})),function(e){e.BOTTOM="bottom",e.NONE="none"}(g||(g={})),function(e){e.TOP="top",e.BOTTOM="bottom",e.LEFT="left",e.RIGHT="right"}(_||(_={}));var f=s(31087),x=s(51456),y=s(50191);const v=(e,t,s,i)=>{const o=i?e?.dark_theme:e?.light_theme;return t||s?e?.hover:o};function b(e,t){return e?5:t&&(e=>e===h.CLUSTER||e===h.PIN)(t)?4:3}const j=e=>e.type===f.AS.PLACE,k=(e,t,s)=>{const{x:i,y:o}=t.project((0,y.kI)(e.coordinates)),n=i+e.originalSize.width/3,a=i-e.originalSize.width/3,r=o-e.originalSize.height/3,l=o-2*e.originalSize.height/3;return n>=s.minX&&a<=s.maxX&&r>=s.minY&&l<=s.maxY};var w;function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},C.apply(this,arguments)}var S=function(e){return n.createElement("svg",C({width:15,height:5,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),w||(w=n.createElement("path",{d:"M.5 0c1.488 0 2.915.758 3.968 2.106l1.71 2.192c.73.936 1.914.936 2.645 0l1.71-2.192C11.584.758 13.011 0 14.5 0H.5z"})))};const N=3,P=2,T=1,I=10;var A=s(85893);const M=({pin:e,isHovered:t,isSelected:s})=>{const{isMobile:i=!1,isNight:o}=(0,l.useUnit)({isMobile:u.l.outputs.$isMobile,isNight:p.H.outputs.$isNight}),{displayType:c,anchor:g}=e,_=v(e.pin_colors,t,s,o),f=i?P:N,{width:x,ref:y}=function(e){const{defaultWidth:t="auto",defaultHeight:s="auto",paddingHeight:i=0,paddingWidth:o=0}=e??{},[a,r]=(0,n.useState)(null);return{ref:r,width:(0,n.useMemo)((()=>{const e=a?.getBoundingClientRect().width;return e?e+o:t}),[a,t,o]),height:(0,n.useMemo)((()=>{const e=a?.getBoundingClientRect().height;return e?e+i:s}),[a,s,i])}}({paddingWidth:20+2*f});return(0,A.jsxs)("div",{"data-test-id":"district-pin",className:d()(m.root,m[c]),style:{border:`1px solid ${_}`,boxShadow:`0px ${f}px 0px ${_}`,width:c===h.CLUSTER?"100%":x,opacity:"auto"===x?0:1},children:[(0,A.jsx)(a.x,{ref:y,tag:"span",className:m.text,type:r.y.Body2Bold,mobileType:r.y.Body2Bold,children:e.name}),(0,A.jsx)(S,{className:d()(m.anchor,m[g]),style:{filter:`drop-shadow(0px ${i?3:4}px 0px ${_})`}})]})},E=(0,n.memo)(M);var $=s(98116),D=s(27946);const B=({pin:e,map:t,mapPinRectToRect:s,mapPinToCoordinates:i,mapPinToSize:o})=>{const{x:n,y:a}=((e,t,s)=>s.project((0,y.kI)(t(e))))(e,i,t),{width:r,height:l}=o(e);return s({width:r,height:l,x:n,y:a})},L=e=>({...e,x:e.x-e.width/2,y:e.y-e.height}),O=(e,t,s)=>{const i=B({pin:e,mapPinToSize:e=>e.originalSize,mapPinRectToRect:L,mapPinToCoordinates:e=>e.coordinates,map:s}),o=B({pin:t,mapPinToSize:e=>e.originalSize,mapPinRectToRect:L,mapPinToCoordinates:e=>e.coordinates,map:s});return(0,D.hH)(i,o)};function z(e,t,s,i){const o=e.map((e=>function(e,t){const{pins:s,x:i,y:o,...n}=e,a=t.unproject([i,o]);return{originalSize:n,clusterSize:n,arrowSize:n,controlledCoordinates:(0,y.Tc)(a),coordinates:(0,y.Tc)(a),pins:s}}(U(e,t,s),t)));return(0,D.vK)(o,((e,s)=>O(e,s,t)),i).map((e=>{const i=e.map((e=>e.pins)).flat(),{pins:o,...n}=U(i,t,s);return function(e,t,s,i){const o=e.length>1,n=i?28:34,a=t.x,r=t.y-t.height+n,l=a-t.width/2;return[...e].sort((e=>(t,s)=>{const{y:i}=e.project((0,y.kI)(t.coordinates)),{y:o}=e.project((0,y.kI)(s.coordinates));return i-o})(s)).map(((e,t)=>{let i={};if(o){const o=l+e.clusterSize.width/2,a=t%2?o+16:o,c=r+t*(n+4),d=s.unproject([a,c]);i=(0,y.Tc)(d)}else i=e.coordinates;return{...e,...F(o),controlledCoordinates:i}}))}(o,n,t,s)}))}const F=e=>({displayType:e?h.CLUSTER:h.PIN,anchor:e?g.NONE:g.BOTTOM});function U(e,t,s){const i=s?28:34,o=e.length>1,n=o?e.filter((e=>e.type===f.AS.PLACE)):e,a=n.map((e=>{const s=t.project((0,y.kI)(e.coordinates)),i=o?e.clusterSize:e.originalSize;return{id:e.id,...s,...i}})),r=a.reduce(((e,t)=>e.x<t.x?e:t)),l=a.reduce(((e,t)=>e.x>t.x?e:t)),c=a.reduce(((e,t)=>e.y>t.y?e:t)).y,d=(l.x-r.x)/2+r.x,{width:u}=a.reduce(((e,t)=>e.width>t.width?e:t));return{x:d,y:c,width:u,height:a.length*(i+4),pins:n}}const R={createDistrictPins:function({$mapboxInstance:e,$isCalculationEnabled:t,$selectedPinId:s,$poisFromDistrict:i,$boundingBox:o,$initialDistrictPins:n}){const a=(0,$.createStore)(null,{sid:"-lvh660"}),r=(0,$.createStore)([],{sid:"p1cnz9"}),l=(0,$.createEvent)({sid:"-8o3we"}),c=(0,$.createEvent)({sid:"-w5ew2j"}),d=(0,$.createEvent)({sid:"-apefy3"}),p=(0,$.createEvent)({sid:"4k283s"}),m=(0,$.createEvent)({sid:"z2moij"});return(0,$.sample)({and:[{clock:c,source:{pins:a},filter:({pins:e},{type:t,id:s})=>{const i=e?.find((e=>e.id===s))?.originalSize.width??0;return t===h.PIN&&0===i},fn:(e,t)=>t,target:l}],or:{sid:"-b584oz"}}),(0,$.sample)({and:[{clock:c,source:{pins:a},filter:({pins:e},{type:t,id:s})=>{const i=e?.find((e=>e.id===s))?.clusterSize.width??0;return t===h.CLUSTER&&0===i},fn:(e,t)=>t,target:d}],or:{sid:"-amj4ip"}}),(0,$.sample)({and:[{clock:l,source:{pins:a},filter:({pins:e})=>Boolean(e),fn:({pins:e},{id:t,width:s,height:i})=>e.map((e=>e.id===t?{...e,originalSize:{width:s,height:i}}:e)),target:a}],or:{sid:"-9su8h7"}}),(0,$.sample)({and:[{clock:d,source:{pins:a},filter:({pins:e})=>Boolean(e),fn:({pins:e},{id:t,...s})=>e.map((e=>e.id===t?{...e,clusterSize:s}:e)),target:a}],or:{sid:"-97e9c4"}}),(0,$.sample)({and:[{clock:[n.updates,e.updates],source:{districtPins:n,map:e},filter:({districtPins:e,map:t})=>Boolean(e&&t),fn:({districtPins:e})=>(e=>e.map((e=>{const t=(e=>(0,x.VO)(e)?{width:40,height:42}:{width:0,height:0})(e);return{...e,controlledCoordinates:e.coordinates,originalSize:t,clusterSize:t,arrowSize:t}})))(e),target:a}],or:{sid:"yfyj6h"}}),(0,$.sample)({and:[{clock:[p,a.updates,t.updates,i.updates],source:{pins:a,map:e,isCalculationEnabled:t,selectedDistrictPinId:s,poisFromDistrict:i,boundingBox:o},filter:({pins:e,map:t,isCalculationEnabled:s,boundingBox:i})=>Boolean(e&&t)&&s&&Boolean(i),fn:({pins:e,map:t,poisFromDistrict:s,selectedDistrictPinId:i,boundingBox:o})=>e.filter((e=>(e.id!==i||!s.length)&&k(e,t,o))),target:m}],or:{sid:"yxjy61"}}),(0,$.sample)({and:[{clock:m,source:{map:e,isMobile:u.l.outputs.$isMobile},filter:({map:e})=>Boolean(e),fn:({map:e,isMobile:t},s)=>(({districtPins:e,map:t,isMobile:s})=>{const i=function(e,t,s){let i=!1;const o=()=>{i=!0};let n=(0,D.vK)(e,((e,s)=>O(e,s,t)),o);if(!i)return function(e){return e.flat().map((e=>({...e,displayType:h.PIN,anchor:g.BOTTOM,controlledCoordinates:e.coordinates})))}(n);for(;i;)i=!1,n=z(n,t,s,o);return n.flat()}(e,t,s);return i})({districtPins:s,map:e,isMobile:t??!1}),target:r}],or:{sid:"-ya4l74"}}),{setDistrictPinSize:c,recalculatePinsPosition:p,$pins:r,$mapDistrictPins:a}}},H=(0,o.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/map_district_pins/index.ts",api:{inputs:R,containers:{...i}}})},69706:function(e,t,s){"use strict";s.d(t,{a:function(){return c}});var i=s(30091),o=s(98116),n=s(47956);const a=(0,o.createEvent)({sid:"-m7u1jk"}),r={setInitialBounds:a},l={$initialBounds:(0,o.restore)(a,null,{sid:"-gd9fm5"})};(0,o.sample)({and:[{source:n.I.inputs.open,fn:({bounds:e})=>e||null,target:a}],or:{sid:"-igwo6a"}});const c=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/map_initial_bounds/index.ts",api:{inputs:r,outputs:l}})},88484:function(e,t,s){"use strict";s.d(t,{V:function(){return a},X:function(){return d}});var i=s(30091),o=s(98116);const n={top:180,right:100,bottom:100,left:100};function a(e){return(e-1)**3+1}const r=(0,o.createEvent)({sid:"f4uadl"}),l=(0,o.restore)(r,null,{sid:"k1qob0"}),c={inputs:{setMapboxInstance:r,easeToFx:(0,o.attach)({and:{source:{map:l},effect:({map:e},{coordinates:t,zoom:s})=>e?.easeTo({center:{lng:t.longitude,lat:t.latitude},duration:500,easing:a,zoom:s||16})},or:{sid:"ozacvu"}}),fitBoundsFx:(0,o.attach)({and:{source:{map:l},effect:({map:e},{bounds:t})=>e?.fitBounds(t,{padding:n,duration:1800,easing:a})},or:{sid:"-x1o2bd"}})},outputs:{$mapboxInstance:l}},d=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/mapbox_instance/index.ts",api:c})},13680:function(e,t,s){"use strict";s.d(t,{q:function(){return oe}});var i=s(98116),o=s(51456),n=s(47047),a=s(65740),r=s(82214),l=s(15863),c=s(54428),d=s(78194),u=s(71457),p=s(76588),m=s(8661),h=s(79403);const{$apiPrefix:g,$defaultHeaders:_}=m.D.outputs,f=(0,i.withFactory)({sid:"-iy7amk",fn:()=>(0,p.tW)({name:"guides_save_to_favorite",request:{method:"POST",url:(0,i.combine)({and:[{poiId:r.l.outputs.$poi,apiPrefix:g}],or:{sid:"-3j0uu2"}}).map((({poiId:e,apiPrefix:t})=>`${t}/v3/favorite/${e}`)),query:{source:h.U.outputs.$brand,fn:(e,t)=>({brand:t})},headers:_},response:{contract:p.ac}})}),x=(0,i.withFactory)({sid:"2dk8y1",fn:()=>(0,p.tW)({name:"guides_remove_from_favorite",request:{method:"DELETE",url:(0,i.combine)({and:[{poiId:r.l.outputs.$poi,apiPrefix:g}],or:{sid:"-2lhen1"}}).map((({poiId:e,apiPrefix:t})=>`${t}/v3/favorite/${e}`)),query:{source:h.U.outputs.$brand,fn:(e,t)=>({brand:t})},headers:_},response:{contract:p.ac}})}),y={inputs:{save:f.start,remove:x.start}};var v=s(32671);const b=(0,i.createEvent)({sid:"293qyv"}),j=(0,i.createEvent)({sid:"-vw2f4f"}),k={category:"guide_poi",label:"favorites",action:"button_clicked"},w=(0,i.combine)({and:[{contentId:r.l.outputs.$poi,originalTabId:u.A_.outputs.$data.map((e=>e?.original_group_id??null)),tabId:u.A_.outputs.$data.map((e=>e?.group_id??null))}],or:{sid:"-qwhx14"}}),C=({originalTabId:e,...t})=>e!==t.tabId?{...t,originalTabId:e}:t;v.I.inputs.forwardToAnalyticsWithDefaults({clock:(0,i.sample)({and:[{clock:b,source:w,filter:({contentId:e,originalTabId:t,tabId:s})=>null!==s&&null!==t&&null!==e,fn:C}],or:{sid:"-ocupzd"}}),data:k,payload:({contentId:e,originalTabId:t,tabId:s},{payload:i})=>({...i,content_id:e,original_tab_id:t,tab_id:s,result:"added"})}),v.I.inputs.forwardToAnalyticsWithDefaults({clock:(0,i.sample)({and:[{clock:j,source:w,filter:({contentId:e,originalTabId:t,tabId:s})=>null!==s&&null!==t&&null!==e,fn:C}],or:{sid:"-nfv2dp"}}),data:k,payload:({contentId:e,originalTabId:t,tabId:s},{payload:i})=>({...i,content_id:e,original_tab_id:t,tab_id:s,result:"removed"})});const S={inputs:{addedToFavoriteAnalytics:b,removedFromFavoriteAnalytics:j}},{showLoginPopup:N}=(0,i.withFactory)({sid:"eft6ac",fn:()=>(0,n.d)(c.O.inputs.createLoginPopup,{loginSource:"login_popup"})}),P=u.A_.outputs.$favorite.map((e=>!!e&&e.is_favorite)),T=(0,i.createStore)(null,{sid:"-3b4kl5"}),{setUnauthorizedFavorites:I,resetUnauthorizedFavorites:A}=(0,i.createApi)({and:[T,{setUnauthorizedFavorites:(e,t)=>t,resetUnauthorizedFavorites:()=>null}],or:{sid:"-k7z5wu"}}),M=(0,i.createStore)(!1,{sid:"-eudqrv"}),{addToFavoritesAuthorized:E,removeFromFavorites:$,toggle:D}=(0,i.createApi)({and:[M,{addToFavoritesAuthorized:(e,t)=>!0,removeFromFavorites:()=>!1,toggle:(e,t)=>!e}],or:{sid:"-fykkc8"}}),B=(0,i.createEvent)({sid:"-rqg530"}),{$enabled:L,turnOn:O}=(0,i.withFactory)({sid:"bg5dae",fn:()=>(0,n.d)(l.qs,!1)});L.reset(r.l.outputs.$poi),(0,i.sample)({and:[{clock:[r.l.outputs.$poi,P],source:P,filter:(e,t)=>null!==t,target:M}],or:{sid:"rv7f6k"}}),(0,i.sample)({and:[{clock:[E,$],target:O}],or:{sid:"salnso"}});const{addedToFavorite:z,removedFromFavorite:F}=(0,i.split)({and:[M,{addedToFavorite:Boolean,removedFromFavorite:e=>!e}],or:{sid:"r4j04o"}}),U=u.A_.outputs.$favoriteButton.map(Boolean);(0,i.withFactory)({sid:"stanyy",fn:()=>(0,a.s)({source:(0,i.sample)({and:[{clock:B,source:r.l.outputs.$pin}],or:{sid:"-1sbks5"}}),if:c.O.outputs.$isAuthorized,then:E,else:I})}),(0,i.sample)({and:[{clock:c.O.outputs.loggedIn,source:T,filter:Boolean,target:E}],or:{sid:"taw2yi"}}),(0,i.sample)({and:[{clock:E,source:c.O.outputs.$isAuthorized,filter:Boolean,target:[y.inputs.save,A]}],or:{sid:"6vzsyh"}}),(0,i.sample)({and:[{clock:$,target:y.inputs.remove}],or:{sid:"7be1kl"}}),(0,i.sample)({and:[{clock:(0,i.withFactory)({sid:"su944g",fn:()=>(0,l.CJ)({clock:$,until:o.mH.outputs.$favoriteTab.map((e=>0===e?.places.length))})}),source:{favoriteGroup:o.mH.outputs.$favoriteTab,currentGroupType:r.l.outputs.$group.map((e=>e?.type??null))},filter:({favoriteGroup:e,currentGroupType:t})=>!(!e||t!==o.jQ)&&0===e.places.length,target:r.l.inputs.setDefaultLayer}],or:{sid:"7e50je"}});const R=(0,i.sample)({and:[{clock:B,source:{isAuthorized:c.O.outputs.$isAuthorized},filter:({isAuthorized:e})=>!e}],or:{sid:"8749sx"}});(0,i.sample)({and:[{clock:R,source:d.J.outputs.$t,fn:e=>({title:e("widget_travel_map_favorite_login_popup:title"),subtitle:e("widget_travel_map_favorite_login_popup:subtitle")}),target:N}],or:{sid:"8ttobc"}}),(0,i.sample)({and:[{clock:R,fn:()=>"guides_favorites",target:c.O.outputs.$loginSource}],or:{sid:"9avapj"}}),(0,i.sample)({and:[{clock:z,target:S.inputs.addedToFavoriteAnalytics}],or:{sid:"9ppqqa"}}),(0,i.sample)({and:[{clock:F,target:S.inputs.removedFromFavoriteAnalytics}],or:{sid:"9sgpp3"}});const H={outputs:{$isFavorite:M,$showButton:U,addedToFavorite:z,removedFromFavorite:F,$isUserChangedFavorite:L},inputs:{toggle:D,addToFavorites:B,addToFavoritesAuthorized:E,removeFromFavorites:$}};var q=s(31087);function Z({favoriteGroup:e,groups:t}){const s={...e},i=function({groups:e,places:t}){const s=t.flatMap((t=>function({groups:e,place:t}){return e.filter((e=>e.type!==o.jQ&&e.places.find((e=>e.id===t.id)))).map((e=>e.id))}({place:t,groups:e})));return[...new Set(s)].map((s=>e.find((e=>e.id===s)).places.filter((e=>t.find((t=>t.id===e.id))))))}({places:s.places,groups:t});if(1===i.length)return s.subgroups=[s.subgroups[0]],s;const n=i.map((e=>({type:q.xL.DEFAULT,id:(0,o.ln)(e[0].groupId),places:e.map((({id:e})=>e)),title:t.find((({id:t})=>t===e[0].groupId))?.title})));return s.subgroups=[{...s.subgroups[0],places:s.places.map((e=>e.id))},...n],s}const W=(0,i.createEvent)({sid:"-sslphh"});(0,i.sample)({and:[{clock:W,source:o.mH.outputs.$tabs,filter:Boolean,fn:(e,t)=>[t,...e.filter((({type:e})=>e!==o.jQ))],target:o.mH.inputs.setTabs}],or:{sid:"plnu31"}}),(0,i.sample)({and:[{clock:H.inputs.addToFavoritesAuthorized,source:{favoriteGroup:o.mH.outputs.$favoriteTab,groups:o.mH.outputs.$tabs},filter:({favoriteGroup:e})=>Boolean(e),fn:({favoriteGroup:e,groups:t},s)=>function({favoriteGroup:e,groups:t,newPlace:s}){return Z({favoriteGroup:{...e,places:[...e.places,s]},groups:t})}({newPlace:s,favoriteGroup:e,groups:t}),target:W}],or:{sid:"q4wmuo"}}),(0,i.sample)({and:[{clock:H.inputs.removeFromFavorites,source:{currentPlace:r.l.outputs.$pin,currentGroup:r.l.outputs.$group,favoriteGroup:o.mH.outputs.$favoriteTab,groups:o.mH.outputs.$tabs},filter:({currentPlace:e,favoriteGroup:t,groups:s})=>Boolean(s&&e&&t),fn:({groups:e,currentPlace:t,favoriteGroup:s})=>function({favoriteGroup:e,groups:t,placeId:s}){return Z({favoriteGroup:{...e,places:e.places.filter((({id:e})=>e!==s))},groups:t})}({favoriteGroup:s,groups:e,placeId:t.id}),target:W}],or:{sid:"r1chuz"}});var G=s(30091),Q=s(44904);const Y=(0,s(94547).Yu)("guides_favorite_onboarding"),X=(0,i.createEffect)((()=>Y.read()),{sid:"-n4us8b"}),V=(0,i.restore)(X.doneData,null,{sid:"watjfw"}),J=(0,i.createEffect)((()=>Y.write("true")),{sid:"-98k1ex"}),K=(0,i.createEvent)({sid:"maxzy6"}),ee=(0,i.createStore)(!1,{sid:"qskn1t"}),{open:te,close:se}=(0,i.createApi)({and:[ee,{open:()=>!0,close:(e,t)=>!1}],or:{sid:"-4xe4lq"}});(0,i.sample)({and:[{clock:K,target:Q.Y.inputs.close}],or:{sid:"-r99yeo"}}),(0,i.sample)({and:[{clock:K,source:o.mH.outputs.$favoriteTab,filter:Boolean,fn:e=>e.id,target:r.l.inputs.setLayer}],or:{sid:"-r6izfv"}}),(0,i.sample)({and:[{clock:(0,i.withFactory)({sid:"-x08qo4",fn:()=>(0,l.CJ)({clock:H.inputs.addToFavorites,until:c.O.outputs.$isAuthorized})}),source:{storageValue:V,isAuthorized:c.O.outputs.$isAuthorized},filter:({storageValue:e,isAuthorized:t})=>null===e&&t,target:te}],or:{sid:"-qqky8e"}}),(0,i.sample)({and:[{clock:[H.inputs.removeFromFavorites,r.l.outputs.$poi],fn:()=>"auto",target:se}],or:{sid:"-q7c5gr"}}),(0,i.sample)({and:[{clock:[K,r.l.outputs.$isFavoriteGroup],target:J}],or:{sid:"-pqubnx"}}),(0,i.sample)({and:[{clock:se,filter:e=>"manual"===e,target:J}],or:{sid:"-pawagg"}}),(0,i.sample)({and:[{clock:u.A_.outputs.$favoriteOnboarding,target:X}],or:{sid:"-ow1ufp"}});const ie={inputs:{...H.inputs,goToFavoriteGroupClicked:K,closeOnboarding:se},outputs:{...H.outputs,$isOnboardingVisible:ee}},oe=(0,G.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/travel_map_favorite/index.ts",api:ie})},92617:function(e,t,s){"use strict";s.d(t,{r:function(){return l}});var i=s(4190),o=s(67294),n=s(14210),a=s(79403),r=s(14573);const l=({link:e,link_v2:t,openSource:s})=>{const{isHotelsEnabled:l,brand:c}=(0,i.useUnit)({isHotelsEnabled:n.qF.outputs.$isHotelsEnabled,brand:a.U.outputs.$brand});return(0,o.useMemo)((()=>t&&(0,r.q2)(t)&&l||!e?null:((e,t)=>{const s=new URL(e),i={};s.searchParams.forEach(((e,t)=>{i[t]=e}));const o=new URLSearchParams({...i,utm_source:t.brand,utm_campaign:t.openSource}).toString();return s.search=o,s.toString()})(e,{brand:c,openSource:s})),[t,e,c,s,l])}},91243:function(e,t,s){"use strict";s.d(t,{D:function(){return p}});var i=s(30091),o=s(98116),n=s(31087),a=s(47956),r=s(82214);const{setMapOpenSource:l}=a.I.inputs,{setLayer:c}=r.l.inputs,d=(0,o.createEvent)({sid:"oh8e3m"});(0,o.sample)({and:[{clock:d,fn:()=>n.Oj.TAB,target:l}],or:{sid:"-bybggv"}}),(0,o.sample)({and:[{clock:d,target:c}],or:{sid:"-bv0owp"}});const u={tabChanged:d},p=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/travel_map_tabs_panel/index.ts",api:{inputs:u}})},58415:function(e,t,s){"use strict";s.d(t,{Lw:function(){return f}});var i=s(98116),o=s(31087),n=s(30091),a=s(47420),r=s(82214),l=s(47956),c=s(32671);const{forwardToAnalyticsWithDefaults:d}=c.I.inputs,u=(0,i.createDomain)({sid:"-h65r9e"}),p=u.createEvent({sid:"-g4qo4"}),m=u.createEvent({sid:"m7xkka"}),h=u.createStore(o.wO.MAP,{sid:"mi3lqz"});h.on(p,(e=>e===o.wO.MAP?o.wO.LIST:o.wO.MAP)),(0,i.sample)({and:[{clock:h,source:{tab:r.l.outputs.$layer,trapSource:l.I.outputs.$trapSource,origin:a.i.outputs.$origin,direction:c.I.outputs.$destination,departDate:c.I.outputs.$departDateISO,returnDate:c.I.outputs.$returnDateISO,source:l.I.outputs.$trapSource},fn:({tab:e,trapSource:t,origin:s,direction:i,departDate:o,returnDate:n,source:a},r)=>({tab:e,view_mode:r,origin:s?.cityIata,destination:i,depart_date:o,return_date:n,trap_source:t,source:a}),target:m}],or:{sid:"6ot68p"}}),d({clock:m,data:{label:"view_mode",action:"changed"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})});const g={toggle:p,changed:m},_={$value:h},f=(0,n.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/travel_map_view_mode/index.ts",api:{inputs:g,outputs:_}})},20662:function(e,t,s){"use strict";s.d(t,{$:function(){return u}});var i=s(98116),o=s(82407);const{$tab:n}=o.i.outputs,a=(0,i.createEvent)({sid:"72o4o8"}),r=(0,i.createEvent)({sid:"-gdnkaq"}),l=(0,i.createEvent)({sid:"6y6l4q"}),c=(0,i.createEvent)({sid:"-ko2per"}),d=(0,i.createEvent)({sid:"lxd0e9"}),u={outputs:{$premiumContent:(0,i.combine)({and:[n,e=>e?{...e.premium,id:e.id}:null],or:{sid:"yd4kwn"}})},inputs:{guideMapScreenOpened:a,trapScreenOpened:r,trapScreenClosed:l,walkPromoClicked:c,districtOnMapClicked:d}}},3e3:function(e,t,s){"use strict";s.d(t,{k:function(){return o}});const i=(0,s(98116).createDomain)({sid:"2o9r92"}),o={inputs:{screenOpened:i.createEvent({sid:"-8o2m83"}),screenLoaded:i.createEvent({sid:"epmu5e"}),screenClosed:i.createEvent({sid:"-24rfo"})}}},27028:function(e,t,s){"use strict";s.d(t,{n:function(){return x}});var i=s(98116),o=s(51456),n=s(83904),a=s(3202);const r=(0,i.createDomain)({sid:"3hxrbs"}),l=r.createEvent({sid:"num52p"}),c=r.createEvent({sid:"89z24x"}),d=r.createEvent({sid:"-ghzhhm"}),u=r.createEvent({sid:"zq8b3"}),p=r.createStore(!1,{sid:"-rivqvq"}),m=(0,i.restore)(l,n.s.SIZES[a.B.Large],{sid:"xpscln"}),h=(0,i.restore)(c,n.s.SIZES[a.B.Medium],{sid:"ti874j"}),g=(0,i.restore)(d,n.s.SIZES[a.B.Small],{sid:"65eiol"}),_=(0,i.restore)(u,0,{sid:"-cafhkw"}),{toggleCollisionRadius:f}=(0,i.createApi)({and:[p,{toggleCollisionRadius:e=>!e}],or:{sid:"1pv09v"}});(0,i.sample)({and:[{source:o.mH.outputs.$pinsConfig,filter:Boolean,fn:e=>e.min_l_pins_count||0,target:u}],or:{sid:"-mh4t29"}});const x={outputs:{$lSize:m,$sizes:(0,i.combine)({and:[{lSize:m,mSize:h,sSize:g},({sSize:e,mSize:t,lSize:s})=>({[a.B.Large]:s,[a.B.Medium]:t,[a.B.Small]:e})],or:{sid:"-hnf2av"}}),$maxLCount:_,$collisionRadiusEnabled:p},inputs:{setLSize:l,setMSize:c,setSSize:d,setMaxLCount:u,toggleCollisionRadius:f}}},90254:function(e,t,s){"use strict";s.r(t),s.d(t,{travelMapPublicApi:function(){return Qe}});var i=s(3e3),o=s(4190),n=s(98116),a=s(58415);const r=(0,n.createDomain)({sid:"-ifcvyi"}),l=(0,o.createGate)({and:[{domain:r}],or:{sid:"zaufu6"}});a.Lw.outputs.$value.reset(l.close);const c={inputs:{ModalGate:l}},d={outputs:{initialized:(0,n.createDomain)({sid:"iha2yz"}).createEvent({sid:"-gbr6"})}};var u=s(82407),p=s(38387);const m=(0,n.combine)({and:[p.l.outputs.$isMobile,p.l.outputs.$isDesktop,(e,t)=>e?240:112],or:{sid:"-i2gucd"}}),h=(0,n.combine)({and:[p.l.outputs.$isMobile,p.l.outputs.$isDesktop,(e,t)=>e?64:140],or:{sid:"-xj2c0w"}}),g={outputs:{$size:(0,n.combine)({and:[m,h],or:{sid:"gh6th4"}}).map((([e,t])=>({width:e,height:t})))}};var _=s(68621),f=s(51456),x=s(82214),y=s(14210),v=s(31087);const b=(0,n.combine)({and:[{isUserHasPremium:_.b.outputs.$isAnyPremiumActive,tabs:f.mH.outputs.$tabs,hiddenLayer:x.l.outputs.$hiddenLayer,isPaywallEnabled:y.qF.outputs.$isPaywallEnabled},({isUserHasPremium:e,tabs:t,hiddenLayer:s,isPaywallEnabled:i})=>t?t.filter((({premium:t,is_hidden:o,id:n,places:a})=>[t?.availability===v.oY.PAYWALLED&&!e&&!i,o&&s!==n,0===a.length].every((e=>!e)))):[]],or:{sid:"-y2jvog"}}),j=b.map((e=>1===e.length)),k={outputs:{$tabs:b,$isSingleTab:j}};var w=s(11825),C=s(45810),S=s(73806),N=s(27946),P=s(47956),T=s(88484),I=s(15454),A=s(13548);function M(e){return 1e-6*(e()-.5)}function E(e){return e.x+e.vx}function $(e){return e.y+e.vy}function D(e){var t,s,i,o=1,n=1;function a(){for(var e,a,l,c,d,u,p,m=t.length,h=0;h<n;++h)for(a=(0,I.Z)(t,E,$).visitAfter(r),e=0;e<m;++e)l=t[e],u=s[l.index],p=u*u,c=l.x+l.vx,d=l.y+l.vy,a.visit(g);function g(e,t,s,n,a){var r=e.data,m=e.r,h=u+m;if(!r)return t>c+h||n<c-h||s>d+h||a<d-h;if(r.index>l.index){var g=c-r.x-r.vx,_=d-r.y-r.vy,f=g*g+_*_;f<h*h&&(0===g&&(f+=(g=M(i))*g),0===_&&(f+=(_=M(i))*_),f=(h-(f=Math.sqrt(f)))/f*o,l.vx+=(g*=f)*(h=(m*=m)/(p+m)),l.vy+=(_*=f)*h,r.vx-=g*(h=1-h),r.vy-=_*h)}}}function r(e){if(e.data)return e.r=s[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function l(){if(t){var i,o,n=t.length;for(s=new Array(n),i=0;i<n;++i)o=t[i],s[o.index]=+e(o,i,t)}}return"function"!=typeof e&&(e=(0,A.Z)(null==e?1:+e)),a.initialize=function(e,s){t=e,i=s,l()},a.iterations=function(e){return arguments.length?(n=+e,a):n},a.strength=function(e){return arguments.length?(o=+e,a):o},a.radius=function(t){return arguments.length?(e="function"==typeof t?t:(0,A.Z)(+t),l(),a):e},a}var B=s(5282),L=s(50191);const O=({pin:e,map:t,mapPinRectToRect:s,mapPinToCoordinates:i,mapPinToSize:o})=>{const{x:n,y:a}=((e,t,s)=>s.project((0,L.kI)(t(e))))(e,i,t),{width:r,height:l}=o(e);return s({width:r,height:l,x:n,y:a})},z=e=>({...e,x:e.x,y:e.y-e.height/2}),F=(e,t,s)=>i=>{const o=((e,t,s,i)=>{const o=(0,N.S3)(t),n={fy:void 0,fx:void 0},a=e.arrowSize.height,r=e.arrowSize.width,{width:l,height:c}=o;return e.displayType===S.rr.TOP&&(n.fy=s?12+i.minY:14),e.displayType===S.rr.BOTTOM&&(n.fy=s?i.maxY-a-12:c-a-14),e.displayType===S.rr.LEFT&&(n.fx=s?12+r/2:14+r/2),e.displayType===S.rr.RIGHT&&(n.fx=s?l-r/2-12:l-r/2-14),n})(i,e,t,s),{x:n,y:a}=e.project((0,L.kI)(i.coordinates));return{id:i.id,originalPoint:{x:n,y:a-i.arrowSize.height/2},...O({pin:i,mapPinToSize:e=>e.arrowSize,mapPinRectToRect:z,mapPinToCoordinates:e=>e.controlledCoordinates,map:e}),...o}},U=(e,t)=>s=>{const i=e.find((e=>e.id===s.id)),o=t.unproject([i.x,i.y+i.height/2]);return{...s,controlledCoordinates:(0,L.Tc)(o)}},R=(e,t)=>e.originalPoint.x-t.originalPoint.x,H=(e,t)=>t.originalPoint.x-e.originalPoint.x,q=(e,t)=>e.originalPoint.y-t.originalPoint.y,Z=({pins:e,map:t,isMobile:s,boundingBox:i})=>{const o=[...e].map(F(t,s,i)).sort(R),n=[...o].sort(H),a=D((e=>e.width/Math.sqrt(2))).iterations(S.FE),r=(0,B.Z)(o).stop(),{width:l}=(0,N.S3)(t);let c=i.maxX,d=i.minX;return r.force("collide",a).force("boxingForce",(function(){for(const e of o)e.vx=0,e.x<=d+e.width/2&&(e.fx=d+e.width/2,d+=e.width-15);for(const e of n)e.vx=0,e.x>=c-e.width/2&&(e.fx=c-e.width/2,c-=e.width-15)})).force("recalculationBoundingBox",(function(){const e=o.reduce(((e,t)=>e+t.width),0);for(let t=0;t<o.length;t+=1){const s=o[t];if(s.vx=0,e>=l)if(0===t)s.fx=s.width/2;else{const n=o[t-1]?.fx??0,a=s.width*i.maxX/e+n;s.fx=Math.min(a,i.maxX-s.width/2)}}})).force("x",(function(){for(const e of o)e.vx=0,e.fx||e.originalPoint.x<=d+e.width/2&&(e.fx=d+e.width/2,d+=e.width-15);for(const e of n)e.vx=0,e.fx||e.originalPoint.x>=c-e.width/2&&(e.x=c-e.width/2,c-=e.width-15)})).tick(S.Y),e.map(U(o,t))},W=({pins:e,isMobile:t,map:s,boundingBox:i})=>{const o=[...e].map(F(s,t,i)).sort(q),n=D((e=>e.height/Math.sqrt(2))).iterations(S.FE),a=(0,B.Z)(o).stop(),r=i.minY,l=i.maxY,{length:c}=o;return a.force("collide",n).force("boxing",(function(){for(let e=0;e<o.length;e+=1){const t=o[e];t.vy=0;const s=r+e*t.height,i=l-(c-1-e)*t.height-t.height;t.originalPoint.y<=s?t.fy=s:t.originalPoint.y>=i?t.fy=i:t.fy=t.originalPoint.y}})).tick(S.Y),e.map(U(o,s))},G=({type:e,isMobile:t,bb:s})=>{const i={minX:0,maxX:0,minY:0,maxY:0};if(t)return function(e,t){const s={...t};return"top"===e&&(s.minY=t.minY),"bottom"===e&&(s.maxY=t.maxY),"left"!==e&&"right"!==e||(s.minY=t.minY+38,s.maxY=t.maxY-38),s}(e,s);const o=s.maxY/2;return"top"===e&&(i.maxX=s.maxX-60),"bottom"===e&&(i.maxX=s.maxX-107),"left"===e&&(i.minY=60,i.maxY=s.maxY-60),"rightTop"===e&&(i.minY=60,i.maxY=o-48),"rightBottom"===e&&(i.minY=o+48,i.maxY=s.maxY-60),i},{createDistrictPins:Q}=S.qu.inputs,Y=(0,n.combine)({and:[{isMobile:p.l.outputs.$isMobile,map:T.X.outputs.$mapboxInstance},({isMobile:e,map:t})=>{if(!t)return null;const{width:s,height:i}=(0,N.S3)(t),o={minX:0,minY:0,maxX:s,maxY:i};return e?(o.minY=126,o):o}],or:{sid:"-874ofb"}}),{setDistrictPinSize:X,recalculatePinsPosition:V,$pins:J,$mapDistrictPins:K}=Q({$mapboxInstance:T.X.outputs.$mapboxInstance,$boundingBox:Y,$isCalculationEnabled:u.i.outputs.$isDistrictsTab,$selectedPinId:u.i.outputs.$selectedDistrictPinId,$poisFromDistrict:u.i.outputs.$poisFromDistrict,$initialDistrictPins:f.mH.outputs.$districtPins}),{setDistrictArrowSize:ee,$arrows:te}=function({$mapboxInstance:e,$isCalculationEnabled:t,$boundingBox:s,$mapDistrictPins:i,recalculatePinsPosition:o}){const a=(0,n.createStore)([],{sid:"lt8vo"}),r=(0,n.createEvent)({sid:"-plv1zk"}),l=(0,n.createEvent)({sid:"22b078"});return(0,n.sample)({and:[{clock:r,source:{pins:i},filter:({pins:e},{id:t})=>0===(e?.find((e=>e.id===t))?.arrowSize.width??0),fn:({pins:e},{id:t,...s})=>e.map((e=>e.id===t?{...e,arrowSize:s}:e)),target:i}],or:{sid:"-j2ioi0"}}),(0,n.sample)({and:[{clock:[o,i.updates,t.updates],source:{pins:i,map:e,isCalculationEnabled:t,boundingBox:s},filter:({pins:e,map:t,isCalculationEnabled:s,boundingBox:i})=>Boolean(e&&t)&&s&&Boolean(i),fn:({pins:e,map:t,boundingBox:s})=>e.filter((e=>!(0,n.withFactory)({sid:"m3k2kk",fn:()=>(0,S.A4)(e,t,s)}))).filter(S.a8),target:l}],or:{sid:"-ihmhya"}}),(0,n.sample)({and:[{clock:l,source:{map:e,isMobile:p.l.outputs.$isMobile,boundingBox:s},filter:({map:e})=>Boolean(e),fn:({map:e,isMobile:t,boundingBox:s},i)=>(({districtPins:e,map:t,isMobile:s,boundingBox:i})=>{const o={map:t,isMobile:s},n={isMobile:s,bb:i},{topArrows:a,bottomArrows:r,leftArrows:l,rightArrows:c,rightTopArrows:d,rightBottomArrows:u}=function(e,t,s,i){const o=[],n=[],a=[],r=[],l=[],c=[],d=s.project(s.getCenter()).y;return e.forEach((e=>{if(u=e.coordinates,p=i,u.latitude>p.nw.lat)o.push({...e,displayType:S.rr.TOP});else if(((e,t)=>e.latitude<t.se.lat)(e.coordinates,i))n.push({...e,displayType:S.rr.BOTTOM});else if(((e,t)=>e.longitude<t.nw.lng)(e.coordinates,i))a.push({...e,displayType:S.rr.LEFT});else if(((e,t)=>e.longitude>t.se.lng)(e.coordinates,i)){const i={...e,displayType:S.rr.RIGHT},o=s.project((0,L.kI)(e.coordinates)).y;t?r.push(i):o<d?l.push(i):c.push(i)}var u,p})),{topArrows:o,bottomArrows:n,leftArrows:a,rightArrows:r,rightTopArrows:l,rightBottomArrows:c}}(e,s,t,((e,t)=>({nw:t.unproject([e.minX,e.minY+14]),se:t.unproject([e.maxX,e.maxY])}))(i,t));return[...Z({...o,pins:a,boundingBox:G({...n,type:"top"})}),...Z({...o,pins:r,boundingBox:G({...n,type:"bottom"})}),...W({...o,pins:l,boundingBox:G({...n,type:"left"})}),...W({...o,pins:d,boundingBox:G({...n,type:"rightTop"})}),...W({...o,pins:u,boundingBox:G({...n,type:"rightBottom"})}),...W({...o,pins:c,boundingBox:G({...n,type:"right"})})]})({districtPins:i,map:e,isMobile:t??!1,boundingBox:s}),target:a}],or:{sid:"-hizgkj"}}),{$arrows:a,setDistrictArrowSize:r}}({$mapboxInstance:T.X.outputs.$mapboxInstance,$boundingBox:Y,$isCalculationEnabled:u.i.outputs.$isDistrictsTab,$mapDistrictPins:K,recalculatePinsPosition:V});K.reset(P.I.inputs.close);const se={inputs:{setDistrictPinSize:X,setDistrictArrowSize:ee,recalculatePinsPosition:V},outputs:{$mapDistrictPins:K,$arrows:te,$pins:J}};var ie=s(5157),oe=s(20662),ne=s(13872),ae=s(27028),re=s(37823),le=s(76588),ce=s(80472),de=s(72675);var ue=s(47047),pe=s(35529),me=s(20611),he=s(8661),ge=s(95628),_e=s(80094),fe=s(78364),xe=s(96864);const ye=(0,pe.Record)({id:pe.String,progress:pe.Number,status:pe.String,uri:pe.String,error:pe.String.optional()}),{$apiPrefix:ve,$defaultQuery:be,$defaultHeaders:je}=he.D.outputs,ke=(0,n.withFactory)({sid:"-cso1bs",fn:()=>(0,ue.d)((()=>fe.f.inputs.createFlag({name:"guides-feat-aiCompilations",contract:(0,pe.Record)({enabled:pe.Boolean}),defaultValue:{enabled:!1}})))}),we=(0,n.withFactory)({sid:"-2wkkwf",fn:()=>(0,de.x)(ke.$value.map((e=>e.enabled)),xe.W.outputs.$userLoggedIn,xe.W.outputs.$isPrivateAccessAllowed)}),Ce=(0,n.withFactory)({sid:"-30ok8r",fn:()=>(0,le.tW)({params:(0,n.withFactory)({sid:"b4b4sg",fn:()=>(0,le.t6)()}),request:{url:{source:(0,n.combine)({and:[{apiPrefix:ve,direction:ge.R.outputs.$guideId}],or:{sid:"-b0wejg"}}),fn:(e,{direction:t,apiPrefix:s})=>`${s}/v2/guides/${t}/personal/collect`},query:be,body:({prompt:e})=>({prompt:e}),headers:je,method:"POST"},response:{contract:(0,ce.v)(ye)}})}),Se=(0,n.createStore)(null,{sid:"-l5f88y"});Se.on(Ce.finished.success,((e,{result:{uri:t}})=>t));const Ne=(0,n.withFactory)({sid:"-gpu9cz",fn:()=>(0,le.s5)({request:{url:{source:(0,n.combine)({and:[{taskUri:Se}],or:{sid:"v43yjv"}}),fn:(e,{taskUri:t})=>t},query:be,headers:je,method:"GET"},response:{contract:(0,ce.v)(ye)}})}),Pe=(0,n.createStore)(null,{sid:"-utto6a"}),Te=(0,n.createEvent)({sid:"c7b520"}),Ie=(0,n.createEvent)({sid:"-4wh0u1"}),Ae=(0,n.createEvent)({sid:"-pqmk4n"}),Me=(0,n.sample)({and:[{clock:Ce.finished.success,filter:({result:{error:e}})=>!e}],or:{sid:"3mrny7"}}),Ee=(0,n.createStore)(!1,{sid:"-y4tkz5"}).on(Ae,(()=>!0)).on(Me,(()=>!0)).on(Te,(()=>!1)),$e=(0,n.createStore)(0,{sid:"-y9g7w"});(0,n.sample)({and:[{clock:[Ne.finished.failure,Ce.finished.failure],fn:({error:e})=>e.explanation,target:Pe}],or:{sid:"-koj08e"}}),(0,n.sample)({and:[{clock:[Ne.finished.success,Ce.finished.success],filter:({result:{error:e}})=>Boolean(e),fn:({result:{error:e}})=>e,target:Pe}],or:{sid:"-k816fk"}}),(0,n.sample)({and:[{clock:Me,fn:()=>null,target:Pe}],or:{sid:"-jqzk1d"}}),(0,n.sample)({and:[{clock:Ne.finished.success,filter:({result:{progress:e,error:t}})=>1===e||Boolean(t),target:Te}],or:{sid:"-jnosh7"}}),(0,n.sample)({and:[{clock:Ne.finished.success,filter:({result:{progress:e,error:t}})=>1===e&&!t,target:Ie}],or:{sid:"-j8ucgg"}}),(0,n.sample)({and:[{clock:[Ne.finished.failure,Ce.finished.failure],target:Te}],or:{sid:"-itzwfp"}}),(0,n.sample)({and:[{clock:Ne.finished.success,fn:({result:{progress:e}})=>100*e,target:$e}],or:{sid:"-ipljot"}}),(0,n.sample)({and:[{clock:Ce.finished.success,fn:({result:{progress:e}})=>100*e,target:$e}],or:{sid:"-iar3o2"}}),(0,n.sample)({and:[{clock:Te,fn:()=>0,target:$e}],or:{sid:"-hvwnnb"}});const{tick:De}=(0,n.withFactory)({sid:"6r9085",fn:()=>function(e){var{timeout:t,start:s,stop:i,leading:o=!1,trailing:a=!1}=e,r=(0,n.createEvent)({name:"setup",sid:"-ajee8b"});s&&(0,n.sample)({and:[{clock:s,target:r}],or:{sid:"-wq30tc"}});var l=(0,n.createEvent)({name:"teardown",sid:"-on6wf8"});i&&(0,n.sample)({and:[{clock:i,target:l}],or:{sid:"-wloo2g"}});var c=(0,n.createEvent)({name:"tick",sid:"37avek"}),d=(0,n.createStore)(!1,{name:"$isRunning",sid:"amqfro"}),u=function(e){if(n.is.store(e,{sid:"90rxd3"}))return e;if("number"==typeof e)return(0,n.createStore)(e,{and:{name:"$timeout"},sid:"-3ibdj9"});throw new TypeError('timeout parameter in interval method should be number or Store. "'.concat(typeof e,'" was passed'))}(t),p=d.map((e=>!e),{skipVoid:!1}),m=(0,n.createEvent)({name:"saveTimeout",sid:"-goth3o"}),h=(0,n.createStore)(null,{name:"$timeoutId",sid:"xi134t"}).on(m,((e,t)=>{var{timeoutId:s}=t;return s})),g=(0,n.createStore)((()=>{}),{name:"$rejecter",sid:"-2am6sk"}).on(m,((e,t)=>{var{reject:s}=t;return s})),_=(0,n.attach)({and:{source:{timeout:u,running:d},effect:e=>{var{timeout:t,running:s}=e;return s?new Promise(((e,s)=>{var i=setTimeout(e,t);m({timeoutId:i,reject:s})})):Promise.reject()}},or:{name:"timeoutFx",sid:"-hiem3q"}}),f=(0,n.attach)({and:{source:{timeoutId:h,rejecter:g},effect:e=>{var{timeoutId:t,rejecter:s}=e;s(),t&&clearTimeout(t)}},or:{name:"cleanupFx",sid:"d148gq"}});if((0,n.sample)({and:[{clock:r,source:u,filter:p,target:_}],or:{sid:"-u9k5bx"}}),o){var x=(0,n.sample)({and:[{clock:r,filter:p}],or:{name:"onReady",sid:"5o8c6v"}});(0,n.sample)({and:[{clock:x,target:c}],or:{sid:"6njtce"}})}return(0,n.sample)({and:[{clock:r,fn:()=>!0,target:d}],or:{sid:"6p772r"}}),(0,n.sample)({and:[{clock:_.done,source:u,filter:d,target:_}],or:{sid:"741n3i"}}),(0,n.sample)({and:[{clock:_.done,filter:d,target:c.prepend((()=>{}))}],or:{sid:"7jfvpm"}}),a&&(0,n.sample)({and:[{clock:l,target:c}],or:{sid:"7zxpk6"}}),d.on(l,(()=>!1)),(0,n.sample)({and:[{clock:l,target:f}],or:{sid:"84c29c"}}),{tick:c,isRunning:d,"@@trigger":()=>({setup:r,teardown:l,fired:c})}}({timeout:1e3,start:Me,stop:Te})});(0,n.sample)({and:[{clock:De,target:Ne.start}],or:{sid:"-hdrg2e"}});const Be=(0,n.createStore)("",{sid:"zbhn1i"}),{setText:Le}=(0,n.createApi)({and:[Be,{setText:(e,t)=>t}],or:{sid:"w8jcl8"}});(0,n.sample)({and:[{clock:Ae,source:Be,fn:e=>({prompt:e}),target:Ce.start}],or:{sid:"-gwpto7"}}),(0,n.sample)({and:[{clock:Ie,target:me.D.inputs.reloadPage}],or:{sid:"-gsv9io"}}),_e.B.inputs.notify({clock:(0,n.sample)({and:[{clock:Pe,filter:Boolean}],or:{sid:"-ov305o"}}),message:Pe,autoClose:!0});const Oe={inputs:{setText:Le,buttonClicked:Ae},outputs:{$inputText:Be,$isPending:Ee,$progress:$e,$error:Pe,$aiGroupEnabled:we}};var ze=s(29260),Fe=s(10604),Ue=s(15863),Re=s(54428);const He=(0,n.withFactory)({sid:"48hsay",fn:()=>(0,Ue.CJ)({clock:Fe.L.inputs.showAuthDialog,until:Re.O.outputs.$jwt.map(Boolean)})}),qe=(0,n.withFactory)({sid:"dcxcyh",fn:()=>(0,ze.m)({events:[f.mH.outputs.trapDataSuccessfulyUpdated,He],reset:x.l.inputs.setLayer})});(0,n.sample)({and:[{clock:Fe.L.inputs.hideProductPurchase,source:{direction:ge.R.outputs.$guideId},filter:({direction:e})=>Boolean(e),fn:({direction:e})=>({direction:e}),target:f.mH.inputs.fetch}],or:{sid:"1r3hey"}}),(0,n.sample)({and:[{clock:Fe.L.outputs.successPaymentClicked,target:Fe.L.inputs.hideProductPurchase}],or:{sid:"271imf"}}),(0,n.sample)({and:[{clock:Re.O.outputs.$jwt.updates,source:Fe.L.outputs.$screen,filter:e=>e===v.Hc.Checkout,target:Fe.L.inputs.goToLoading}],or:{sid:"2lc61t"}}),(0,n.sample)({and:[{clock:Re.O.outputs.$jwt.updates,source:{isProductPurchaseVisible:Fe.L.outputs.$isProductPurchaseVisible,promocode:Fe.L.outputs.$promocode},filter:({isProductPurchaseVisible:e})=>e,fn:({promocode:e})=>e,target:Fe.L.inputs.fetchCheckoutData}],or:{sid:"2p6q7c"}}),(0,n.split)({and:[{clock:qe,source:u.i.outputs.$tab.map((e=>e?.premium.availability===v.oY.AVAILABLE)),match:{layerPaid:e=>e,layerNotPaid:e=>!e},cases:{layerPaid:Fe.L.inputs.hideProductPurchase,layerNotPaid:Fe.L.inputs.goToPaymentProvider}}],or:{sid:"37bxs9"}});var Ze=s(44904),We=s(77802),Ge=s(63246);(0,n.sample)({and:[{clock:[We.aj.outputs.$layerQuery.updates,Ge.y.outputs.$appInited.updates],source:{layerQuery:We.aj.outputs.$layerQuery,poiQuery:We.aj.outputs.$poiQuery,isModalOpened:P.I.outputs.$isGuidesModalOpened},filter:({layerQuery:e,isModalOpened:t,poiQuery:s})=>Boolean(e)&&!t&&!s,fn:({layerQuery:e,poiQuery:t})=>({layer:e,openSource:v.Ur.DEEPLINK,mapOpenSource:t?null:v.Oj.DEEPLINK}),target:P.I.inputs.open}],or:{sid:"-1yq6al"}}),(0,n.sample)({and:[{clock:[We.aj.outputs.$poiQuery.updates,Ge.y.outputs.$appInited.updates],source:{layer:We.aj.outputs.$layerQuery,poiQuery:We.aj.outputs.$poiQuery,selectedPoi:x.l.outputs.$poi,guideId:ge.R.outputs.$guideId,isPoiModalOpen:Ze.Y.outputs.$isOpened},filter:({poiQuery:e,isPoiModalOpen:t})=>Boolean(e)&&!t,fn:({layer:e,poiQuery:t,guideId:s})=>({layer:e,poi:t,guideId:s,openSource:v.Ur.DEEPLINK,poiQueryOpenSource:v.ik.LINK}),target:Ze.Y.inputs.open}],or:{sid:"-nznuw"}}),s(33330),s(72045);const Qe={content:i.k,modal:c,widget:d,selectedPlace:u.i,pinSize:g,visibleTabs:k,pinsPositioning:w.J0,zoom:C.s,mapDistrictPins:se,poiOpenSource:ie.V,analyticsModel:oe.$,subgroups:ne.o,debugControls:ae.n,userLocation:re.k,aiGroup:Oe}},33330:function(e,t,s){"use strict";var i=s(98116),o=s(47956),n=s(71457),a=s(13680),r=s(58415),l=s(82407),c=s(3e3),d=s(5157),u=s(31087);const p=e=>e?.premium?.type||u.cy.FREE,m=(0,i.createEvent)({sid:"-20sdl0"}),h=(0,i.createEvent)({sid:"-o9xs9u"}),g=(0,i.createEvent)({sid:"-5l8q87"});(0,i.sample)({and:[{source:l.i.outputs.$pin,filter:Boolean,target:m}],or:{sid:"uokkw4"}}),(0,i.sample)({and:[{source:l.i.outputs.$placeAlertPin,filter:Boolean,target:m}],or:{sid:"v3f0wv"}}),(0,i.sample)({and:[{clock:l.i.outputs.$prevPin,filter:Boolean,target:h}],or:{sid:"v6psh1"}}),(0,i.sample)({and:[{clock:l.i.outputs.$prevAlertPin,filter:Boolean,target:h}],or:{sid:"vlk8hs"}}),(0,i.sample)({and:[{source:n.A_.outputs.$data,filter:Boolean,target:g}],or:{sid:"w0eoij"}}),(0,i.sample)({and:[{clock:m,source:{tab:l.i.outputs.$tab,viewModeValue:r.Lw.outputs.$value,openSource:o.I.outputs.$trapOpenSource,pin:l.i.outputs.$pin,alertPin:l.i.outputs.$placeAlertPin,trapSource:d.V.outputs.$poiOpenSource,source:o.I.outputs.$trapSource,isFavorite:a.q.outputs.$isFavorite},fn:({tab:e,viewModeValue:t,openSource:s,pin:i,alertPin:o,trapSource:n,source:a,isFavorite:r})=>{const l=o?.id||i?.id||"";return{tab:e?.type??"",tab_id:e?.id,premium_type:p(e),view_mode:t,open_source:s,content_id:l,trap_source:n,source:a,is_favorite:r}},target:c.k.inputs.screenOpened}],or:{sid:"w3pg2p"}}),(0,i.sample)({and:[{clock:h,source:{tab:l.i.outputs.$tab,prevTab:l.i.outputs.$prevTab,pin:l.i.outputs.$prevPin,alertPin:l.i.outputs.$prevAlertPin,type:l.i.outputs.$layerType,source:o.I.outputs.$trapSource},fn:({tab:e,prevTab:t,pin:s,alertPin:i,source:o})=>{const n=i?.id||s?.id||"",a=e??t,r=i?.name||s?.name||"";return{tab:a?.type??"",premium_type:p(e),content_id:n,content_name:r,source:o}},target:c.k.inputs.screenClosed}],or:{sid:"xzc524"}}),(0,i.sample)({and:[{clock:g,source:{viewModeValue:r.Lw.outputs.$value,openSource:o.I.outputs.$trapOpenSource,source:o.I.outputs.$trapSource,place:n.A_.outputs.$data,trapSource:d.V.outputs.$poiOpenSource},filter:({place:e})=>Boolean(e),fn:({viewModeValue:e,openSource:t,place:s,trapSource:i,source:o})=>({view_mode:e,open_source:t,trap_source:i,source:o,is_favorite:s.favorite?.is_favorite,...s.analytics}),target:c.k.inputs.screenLoaded}],or:{sid:"p1l7bs"}}),s(72045);var _=s(59051),f=s.n(_),x=s(29260),y=s(69594),v=s(99763),b=s(39018),j=s(32671),k=s(82214),w=s(95628),C=s(90309),S=s(45810),N=s(20662);const{forwardToAnalyticsWithDefaults:P}=j.I.inputs,{sendEvent:T}=b.n.inputs,I=(0,i.withFactory)({sid:"z26p5c",fn:()=>(0,x.m)({events:{modalOpen:o.I.inputs.open,layerInited:k.l.outputs.layerInited},reset:o.I.inputs.close})}),A=(0,i.sample)({and:[{clock:k.l.outputs.$layer.updates,source:{prevTab:(0,i.withFactory)({sid:"8xoxr",fn:()=>(0,y.X)(k.l.outputs.$layerType)}),curTab:k.l.outputs.$layerType,tab:l.i.outputs.$tab,source:o.I.outputs.$trapSource},filter:({curTab:e,prevTab:t,tab:s})=>null!==s&&null!==e&&null!==t,fn:({tab:e,prevTab:t,curTab:s,source:i})=>({prev_tab:t,cur_tab:s,cur_tab_id:e?.id,premium_type:p(e),source:i})}],or:{sid:"-5kjgdj"}});P({clock:A,data:{label:"tab",action:"changed"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})}),(0,i.sample)({and:[{clock:I,source:{tab:l.i.outputs.$tab,openSource:o.I.outputs.$trapOpenSource,source:o.I.outputs.$trapSource},fn:({tab:e,openSource:t,source:s},{modalOpen:i})=>({tab:e?.type,open_source:t,premium_type:p(e),source:s,...i.analytics}),target:N.$.inputs.trapScreenOpened}],or:{sid:"y737af"}}),(0,i.sample)({and:[{clock:o.I.outputs.guidesContentClosed,source:{tab:l.i.outputs.$tab,prevTab:(0,i.withFactory)({sid:"2lt22s",fn:()=>(0,y.X)(l.i.outputs.$tab)}),openSource:o.I.outputs.$trapOpenSource,source:o.I.outputs.$trapSource},fn:({tab:e,prevTab:t,source:s})=>({tab:(e??t)?.type,premium_type:p(e),source:s}),target:N.$.inputs.trapScreenClosed}],or:{sid:"yrzdu5"}}),P({clock:N.$.inputs.trapScreenOpened,data:{label:"screen",action:"opened"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})}),P({clock:N.$.inputs.trapScreenClosed,data:{label:"screen",action:"closed"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})}),P({clock:c.k.inputs.screenOpened,data:{label:"content_screen",action:"opened"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})}),P({clock:c.k.inputs.screenLoaded,data:{label:"content_screen",action:"loaded"},payload:(e,{payload:t})=>({...t,...e,userEvent:!1})}),P({clock:c.k.inputs.screenClosed,data:{label:"content_screen",action:"closed"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})}),P({clock:C.x.inputs.paywallOpenedAnalytics,data:{label:"paywall",action:"opened"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})}),P({clock:(0,i.sample)({and:[{clock:S.s.outputs.zoomEnded,source:{curZoom:S.s.outputs.$zoomEnd,prevZoom:S.s.outputs.$prevZoomEnd,tab:k.l.outputs.$layerType},fn:({curZoom:e,prevZoom:t,tab:s})=>({cur_zoom_level:e,prev_zoom_level:t,tab:s})}],or:{sid:"-4qooka"}}),data:{label:"map_scale",action:"changed"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})});const M=(0,i.sample)({and:[{clock:N.$.outputs.$premiumContent.updates,source:{premiumContent:N.$.outputs.$premiumContent,prevPremiumContent:(0,i.withFactory)({sid:"siwbfu",fn:()=>(0,y.X)(N.$.outputs.$premiumContent)})},filter:({premiumContent:e,prevPremiumContent:t})=>!f()(e)&&!f()(t)&&e.id===t.id&&e.availability!==t.availability}],or:{sid:"msln0f"}});(0,i.sample)({and:[{clock:[I,o.I.inputs.open,A,M],source:{tab:l.i.outputs.$tab,mapOpenSource:o.I.outputs.$mapOpenSource},filter:({tab:e,mapOpenSource:t})=>Boolean(e)&&Boolean(t),fn:({tab:e,mapOpenSource:t})=>({source:t,tab_type:e?.type,tab_id:e?.id,prem_availability:e?.premium.availability,prem_type:e?.premium.type}),target:N.$.inputs.guideMapScreenOpened}],or:{sid:"7il9rb"}}),P({clock:N.$.inputs.guideMapScreenOpened,data:{category:"guide_map",label:"screen",action:"opened"},payload:(e,{payload:t})=>({...t,...e,userEvent:!1})}),(0,i.sample)({and:[{source:A,fn:({cur_tab:e})=>({type:"koroche_open_layer",koroche_layer:e}),target:T}],or:{sid:"924hos"}});const E=(0,i.withFactory)({sid:"3ebbfd",fn:()=>(0,v.I)({source:(0,i.sample)({and:[{clock:[N.$.inputs.trapScreenOpened,c.k.inputs.screenOpened],source:o.I.outputs.$trapSource,filter:e=>e!==u.Ur.DEEPLINK&&e!==u.Ur.GUIDES_MAIN,fn:(e,t)=>({tab:t.tab,source:e})}],or:{sid:"xn270t"}}),reset:o.I.outputs.guidesContentClosed})});(0,i.sample)({and:[{source:E,fn:({tab:e,source:t})=>({type:`koroche_open_${e}`,source:t}),target:T}],or:{sid:"agpka0"}}),(0,i.sample)({and:[{clock:N.$.inputs.trapScreenOpened,source:{guideId:w.R.outputs.$guideId,source:o.I.outputs.$trapSource},filter:({source:e})=>e===u.Ur.GUIDES_MAIN,fn:({guideId:e})=>({type:"koroche_open_city",koroche_city:e}),target:T}],or:{sid:"l8cill"}}),(0,i.sample)({and:[{clock:N.$.inputs.walkPromoClicked,source:w.R.outputs.$guideId,fn:e=>({type:"koroche_open_progulka",koroche_city:e}),target:T}],or:{sid:"lt8p5b"}}),(0,i.sample)({and:[{source:c.k.inputs.screenOpened,filter:({trap_source:e})=>Boolean(e),fn:()=>({type:"koroche_open_place"}),target:T}],or:{sid:"mnhds6"}}),(0,i.sample)({and:[{source:N.$.inputs.districtOnMapClicked,fn:e=>({type:"koroche_open_district",koroche_district:e}),target:T}],or:{sid:"n5mld3"}});var $=s(51456),D=s(69706),B=s(77802),L=s(44904),O=s(10604),z=s(26074);const F=(0,i.sample)({and:[{source:l.i.outputs.$polygon,filter:Boolean}],or:{sid:"-ab9ski"}}),U=(0,i.sample)({and:[{clock:k.l.inputs.setPoi,source:[k.l.outputs.$poi,B.aj.outputs.$poiQuery],filter:([e,t])=>Boolean(!e&&t)}],or:{sid:"dbwy0x"}}),R=(0,i.withFactory)({sid:"-j805tt",fn:()=>(0,x.m)({polygonChanged:F,byDirectLink:U})});(0,i.sample)({and:[{source:R,fn:({polygonChanged:e})=>{const[t,s,i,o]=(0,z.A5)(e);return[[t,s],[i,o]]},target:D.a.inputs.setInitialBounds}],or:{sid:"-d68uaa"}}),(0,i.sample)({and:[{source:{poi:k.l.outputs.$poi,tab:l.i.outputs.$tab,isDistrictsTab:l.i.outputs.$isDistrictsTab},filter:({poi:e,tab:t,isDistrictsTab:s})=>s&&Boolean(t?.places.some((t=>t.id===e))),fn:({poi:e})=>e,target:l.i.outputs.$selectedDistrictPinId}],or:{sid:"-cnju40"}}),(0,i.sample)({and:[{source:{data:n.A_.outputs.$data,isDistrictData:n.A_.outputs.$isDistrictData,pins:$.mH.outputs.$flatPinsWithImage},filter:({isDistrictData:e})=>e,fn:({data:e,pins:t})=>e?e.blocks.reduce(((e,s)=>{if("places_list"===s.type){const i=s.block.items.reduce(((e,s)=>{const i=t.find((e=>e.id===s.id));return i&&e.push(i),e}),[]);e.push(...i)}if("places_carousel"===s.type){const i=s.block.items.reduce(((e,s)=>{if("place"!==s.type)return e;const i=t.find((e=>e.id===s.id));return i&&e.push(i),e}),[]);e.push(...i)}return e}),[]):[],target:l.i.outputs.$poisFromDistrict}],or:{sid:"-c3r8r0"}}),(0,i.sample)({and:[{clock:L.Y.inputs.close,fn:()=>null,target:l.i.outputs.$selectedDistrictPinId}],or:{sid:"-pjqcl3"}}),(0,i.sample)({and:[{clock:L.Y.inputs.close,fn:()=>[],target:l.i.outputs.$poisFromDistrict}],or:{sid:"-p4vwkc"}}),(0,i.sample)({and:[{clock:l.i.outputs.$tab,filter:e=>Boolean(e?.product_id),fn:e=>e.product_id,target:O.L.inputs.setProductId}],or:{sid:"-oq1gjl"}}),(0,i.sample)({and:[{clock:L.Y.inputs.open,filter:({trapSource:e})=>e===u.lX.POI,fn:()=>[],target:l.i.outputs.$poisFromDistrict}],or:{sid:"-om6we2"}});var H=s(6158),q=s.n(H),Z=s(15863),W=s(91243),G=s(91285),Q=s(88484),Y=s(11825),X=s(50191),V=s(27946),J=s(13872);const{$mapboxInstance:K}=Q.X.outputs,{fitBoundsFx:ee,easeToFx:te}=Q.X.inputs,{open:se}=o.I.inputs,{$layerMapPins:ie}=Y.J0.outputs,{tabChanged:oe}=W.D.inputs,{$mapOpenSource:ne}=o.I.outputs,{subgroupWithZoomingChanged:ae,$subgroupPinsCoordinates:re}=J.o.outputs,le=(0,i.combine)({and:[{pinsCoordinates:re,map:K,pins:ie},({pinsCoordinates:e,map:t,pins:s})=>{if(0===e.length||!t||!s)return!1;const i=(0,G.$2)(e);return!((e,t)=>t.some((t=>e.contains((0,X.kI)(t)))))(t.getBounds(),e)||function(e,t){const{width:s,height:i}=(0,V.S3)(t),[[o,n],[a,r]]=e,{x:l,y:c}=t.project([a,n]),{x:d,y:u}=t.project([o,r]);return(d-l)*(u-c)/(s*i)<.01}(i,t)}],or:{sid:"-ipcy87"}}),ce=(0,i.withFactory)({sid:"2hce9b",fn:()=>(0,Z.CJ)({clock:se,until:K.map(Boolean)})});(0,i.sample)({and:[{clock:(0,i.withFactory)({sid:"-m5jx1e",fn:()=>(0,Z.CJ)({clock:se,until:K.map(Boolean)})}),filter:({center:e})=>Boolean(e),fn:({center:e})=>({coordinates:e}),target:te}],or:{sid:"93juf7"}}),(0,i.sample)({and:[{clock:[ce,oe,ae],source:{coordinates:re,shouldMoveCamera:le,mapOpenSource:ne},filter:({shouldMoveCamera:e,mapOpenSource:t})=>e&&t!==u.Oj.DISTRICT_CTA&&t!==u.Oj.POI_CTA,fn:({coordinates:e})=>{const t=(0,G.$2)(e);return{bounds:new(q().LngLatBounds)(t)}},target:ee}],or:{sid:"9zzpfi"}})},83904:function(e,t,s){"use strict";s.d(t,{s:function(){return o}});var i=s(3202);const o={SIMULATION_ITERATIONS_COUNT:3,COLLISION_FORCE_ITERATIONS_COUNT:3,X_FORCE_STRENGTH:.15,Y_FORCE_STRENGTH:.15,COLLISION_FORCE_STRENGTH:.5,SIZES:{[i.B.Large]:128,[i.B.Medium]:64,[i.B.Small]:24},ZOOM_TO_HIDE_POIS_FROM_DISTRICT:10.9,ZOOM_S_TO_M:15.5}},11825:function(e,t,s){"use strict";s.d(t,{J0:function(){return Q},QI:function(){return U}});var i=s(98116),o=s(38387),n=s(82214),a=s(51456),r=s(2885),l=s(88484),c=s(83904),d=s(45810),u=s(13872),p=s(27028),m=s(3202),h=s(50191);const g=({map:e,size:t,offsetX:s=0,offsetY:i=0,originalCoordinates:o,controlledCoordinates:n,displayType:a,pinId:r,originalDisplayType:l})=>{const{x:c,y:d}=e.project((0,h.kI)(o)),{x:u,y:p}=e.project((0,h.kI)(n));return{pinId:r,displayType:a,originalDisplayType:l,offset:{x:s,y:i},originalPoint:{x:c+s,y:d+i},collisionCircle:{cx:u+s,cy:p+i,r:t.width/2},x:u+s,y:p+i,...t}};function _(e,t){switch(!0){case e.displayType===m.B.Large:return(e=>t=>{const s=t.isSimulationOnly?-20:-t.controlledSize.height/2,i=g({map:e,size:t.controlledSize,offsetY:s,originalCoordinates:t.coordinates,controlledCoordinates:t.controlledCoordinates,displayType:t.displayType,originalDisplayType:t.originalDisplayType,pinId:t.id}),{x:o,y:n}=e.project((0,h.kI)(t.coordinates));return{...i,fx:o,fy:n+s,isSimulationOnly:t.isSimulationOnly}})(t)(e);case e.displayType===m.B.Medium:default:return(e=>t=>g({map:e,size:t.controlledSize,offsetY:-t.controlledSize.height/2,controlledCoordinates:t.controlledCoordinates,originalCoordinates:t.coordinates,displayType:t.displayType,originalDisplayType:t.originalDisplayType,pinId:t.id}))(t)(e)}}function f(e,t){return e.map((e=>_(e,t)))}function x(e,t){const s=e.cx-t.cx,i=e.cy-t.cy;return Math.sqrt(s*s+i*i)<=e.r+t.r}function y(e){return{cx:e.x,cy:e.y,r:e.width/2}}const v=({pinSizeType:e,pinSizes:t})=>{const s=t[e];return{width:s,height:s}};function b({pin:e,pins:t,map:s,pinSizes:i,maxSize:o,userLocation:n}){return j({map:s,maxSize:e.originalDisplayType===m.B.Large?m.B.Large:o,pin:e,pinSizes:i,pins:t,userLocation:n})?e.originalDisplayType===m.B.Large?m.B.Large:o:o!==m.B.Large&&e.originalDisplayType!==m.B.Large||!j({map:s,maxSize:m.B.Medium,pin:e,pinSizes:i,pins:t,userLocation:n})?m.B.Small:m.B.Medium}function j({map:e,maxSize:t,pin:s,pinSizes:i,pins:o,userLocation:n}){const a=function({pins:e,map:t,pinSizes:s,newSize:i}){return e.map((e=>e.originalDisplayType===m.B.Large?_(e,t):_({...e,displayType:i,controlledSize:v({pinSizes:s,pinSizeType:i})},t)))}({pins:o,map:e,pinSizes:i,newSize:t}),r={...s,displayType:t,controlledSize:v({pinSizes:i,pinSizeType:t})},l=function({node:e,nodes:t,userLocation:s}){if(e.originalDisplayType===m.B.Large)return!!s&&!!x(e.collisionCircle,y(s));if(s&&x(e.collisionCircle,y(s)))return!0;for(const s of t)if(s.pinId!==e.pinId&&x(e.collisionCircle,s.collisionCircle))return!0;return!1}({node:g({map:e,size:{width:r.controlledSize.width,height:r.controlledSize.height},offsetY:-r.controlledSize.height/2,controlledCoordinates:s.coordinates,originalCoordinates:s.coordinates,displayType:r.displayType,originalDisplayType:r.originalDisplayType,pinId:r.id}),nodes:a,userLocation:n});return!l}var k=s(13548),w=s(5282),C=s(15454);function S(e){return function(){return e}}function N(e){return 1e-6*(e()-.5)}function P(e){return e.x+e.vx}function T(e){return e.y+e.vy}function I(e){const t=function(e){var t,s,i,o=1,n=1;function a(){for(var e,a,l,c,d,u,p,m=t.length,h=0;h<n;++h)for(a=(0,C.Z)(t,P,T).visitAfter(r),e=0;e<m;++e)l=t[e],u=s[l.index],p=u*u,c=l.x+l.vx,d=l.y+l.vy,a.visit(g);function g(e,t,s,n,a){var r=e.data,m=e.r,h=u+m;if(!r)return t>c+h||n<c-h||s>d+h||a<d-h;if(r.index>l.index){var g=r.x+r.vx,_=r.y+r.vy,f=c-g,x=d-_,y=f*f+x*x;y<h*h&&(0===f&&(y+=(f=N(i))*f),0===x&&(y+=(x=N(i))*x),y=(h-(y=Math.sqrt(y)))/y*o,l.vx+=(f*=y)*(h=(m*=m)/(p+m)),l.vy+=(x*=y)*h,r.vx-=f*(h=1-h),r.vy-=x*h,r.fx&&(r.vx=0,r.vy=0),l.fx&&(l.vx=0,l.vy=0))}}}function r(e){if(e.data)return e.r=s[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function l(){if(t){var i,o,n=t.length;for(s=new Array(n),i=0;i<n;++i)o=t[i],s[o.index]=+e(o,i,t)}}return"function"!=typeof e&&(e=S(null==e?1:+e)),a.initialize=function(e,s){t=e,i=s,l()},a.iterations=function(e){return arguments.length?(n=+e,a):n},a.strength=function(e){return arguments.length?(o=+e,a):o},a.radius=function(t){return arguments.length?(e="function"==typeof t?t:S(+t),l(),a):e},a}((e=>e.collisionCircle.r)).iterations(c.s.COLLISION_FORCE_ITERATIONS_COUNT).strength(c.s.COLLISION_FORCE_STRENGTH),s=function(e){var t,s,i,o=(0,k.Z)(.1);function n(e){for(var o,n=0,a=t.length;n<a;++n)(o=t[n]).vx+=(i[n]-o.x)*s[n]*e}function a(){if(t){var n,a=t.length;for(s=new Array(a),i=new Array(a),n=0;n<a;++n)s[n]=isNaN(i[n]=+e(t[n],n,t))?0:+o(t[n],n,t)}}return"function"!=typeof e&&(e=(0,k.Z)(null==e?0:+e)),n.initialize=function(e){t=e,a()},n.strength=function(e){return arguments.length?(o="function"==typeof e?e:(0,k.Z)(+e),a(),n):o},n.x=function(t){return arguments.length?(e="function"==typeof t?t:(0,k.Z)(+t),a(),n):e},n}((e=>e.originalPoint.x)).strength(c.s.X_FORCE_STRENGTH),i=function(e){var t,s,i,o=(0,k.Z)(.1);function n(e){for(var o,n=0,a=t.length;n<a;++n)(o=t[n]).vy+=(i[n]-o.y)*s[n]*e}function a(){if(t){var n,a=t.length;for(s=new Array(a),i=new Array(a),n=0;n<a;++n)s[n]=isNaN(i[n]=+e(t[n],n,t))?0:+o(t[n],n,t)}}return"function"!=typeof e&&(e=(0,k.Z)(null==e?0:+e)),n.initialize=function(e){t=e,a()},n.strength=function(e){return arguments.length?(o="function"==typeof e?e:(0,k.Z)(+e),a(),n):o},n.y=function(t){return arguments.length?(e="function"==typeof t?t:(0,k.Z)(+t),a(),n):e},n}((e=>e.originalPoint.y)).strength(c.s.Y_FORCE_STRENGTH);(0,w.Z)(e).stop().force("x",s).force("y",i).force("collide",t).tick(c.s.SIMULATION_ITERATIONS_COUNT)}function A(e){return{...e,isSimulationOnly:!0}}s(26699);var M=6371008.8,E={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*M,kilometers:6371.0088,kilometres:6371.0088,meters:M,metres:M,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:M/1852,radians:1,yards:6967335.223679999};function $(e){return e%360*Math.PI/180}function D(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}var B=function(e,t,s){void 0===s&&(s={});var i=D(e),o=D(t),n=$(o[1]-i[1]),a=$(o[0]-i[0]),r=$(i[1]),l=$(o[1]),c=Math.pow(Math.sin(n/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(r)*Math.cos(l);return function(e,t){void 0===t&&(t="kilometers");var s=E[t];if(!s)throw new Error(t+" units is invalid");return e*s}(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),s.units)};function L({initialZoom:e}){return e<=7?90:e<=8?60:e<=10?40:function(e,t,s){let i=e;const[o,n]=t;e>t[1]&&(i=n),e<t[0]&&(i=o);return s[0]+(s[1]-s[0])/(t[1]-t[0])*(i-t[0])}(e,[7,12],[12,2])}var O=s(37823),z=s(82407),F=s(27946);function U({height:e,width:t,pin:s,pins:i,map:o,offsetX:n,offsetY:a}){return s.originalDisplayType===m.B.Large||!function({node:e,nodes:t}){for(const s of t)if(s.pinId!==e.pinId&&(0,F.hH)(e,s))return!0;return!1}({node:g({map:o,size:{width:t,height:e},offsetX:n,offsetY:a,controlledCoordinates:s.controlledCoordinates,originalCoordinates:s.coordinates,displayType:s.displayType,pinId:s.id,originalDisplayType:s.originalDisplayType}),nodes:i.map((e=>g({map:o,size:e.controlledSize,offsetX:-e.controlledSize.width/2,offsetY:-e.controlledSize.height,controlledCoordinates:e.controlledCoordinates,originalCoordinates:e.coordinates,displayType:e.displayType,pinId:e.id,originalDisplayType:e.originalDisplayType})))})}const R=(0,i.createStore)(null,{sid:"3iz8hb"}),H=(0,i.createStore)(!1,{sid:"-9e5zgo"}),q=(0,i.createEvent)({sid:"1zi42j"}),Z=(0,i.createEvent)({sid:"tkj5c0"}),W=(0,i.createEvent)({sid:"drnxlz"}),G=(0,i.createStore)([],{sid:"-dtre8r"});(0,i.sample)({and:[{clock:[u.o.outputs.$subgroupPins.updates,l.X.outputs.$mapboxInstance.updates,z.i.outputs.$poisFromDistrict.updates,H.updates,p.n.outputs.$maxLCount.updates],source:{filteredPins:u.o.outputs.$subgroupPins,isMobile:o.l.outputs.$isMobile,layerType:n.l.outputs.$layerType,map:l.X.outputs.$mapboxInstance,poisFromDistrict:z.i.outputs.$poisFromDistrict,shouldHidePoisFromDistrict:H,mapSettings:a.mH.outputs.$mapSettings,pinSizes:p.n.outputs.$sizes,maxLCount:p.n.outputs.$maxLCount},filter:({layerType:e,filteredPins:t})=>null!==t&&null!==e,fn:({filteredPins:e,isMobile:t,layerType:s,poisFromDistrict:i,shouldHidePoisFromDistrict:o,mapSettings:n,maxLCount:a,pinSizes:l})=>{if("districts"===s&&(!i.length||t||o))return[];const c=e.length>0?(({pins:e,initialZoom:t,maxMainPinsCount:s})=>{const i=e.sort(((e,t)=>e.order-t.order)),o=[i[0]];if(o.length>=s)return o.map((e=>e.id));const n=e=>{for(const s of o)if(B([e.coordinates.longitude,e.coordinates.latitude],[s.coordinates.longitude,s.coordinates.latitude])<L({initialZoom:t}))return!1;return!0};for(const e of i){if(o.length>=s)return o.map((e=>e.id));n(e)&&o.push(e)}return o.map((e=>e.id))})({pins:e,initialZoom:n.initialViewState.zoom||0,maxMainPinsCount:a}):[],d=e.find((e=>e.type===r.AS.WALK));d&&c.push(d.id);const u=function({pins:e,largePinsIds:t,pinSizes:s}){return[...e.filter((e=>t.includes(e.id))).flatMap((e=>{const t=m.B.Large,i=v({pinSizes:s,pinSizeType:t}),o=m.B.Small,n=v({pinSizes:s,pinSizeType:o}),a={...e,originalSize:i,controlledSize:n,controlledCoordinates:e.coordinates,originalDisplayType:t,displayType:o,isSimulationOnly:!1};return[a,A(a)]})),...e.filter((e=>!t.includes(e.id))).map((e=>{const t=m.B.Small,i=v({pinSizes:s,pinSizeType:t});return{...e,originalSize:i,controlledSize:i,controlledCoordinates:e.coordinates,originalDisplayType:t,displayType:t,isSimulationOnly:!1}}))]}({pins:"districts"===s?i:e,layerType:s,largePinsIds:c,pinSizes:l});return u},target:[R,W]}],or:{sid:"glgy7b"}}),(0,i.sample)({and:[{clock:d.s.outputs.zoomChanged,target:Z}],or:{sid:"jhxuxx"}}),(0,i.sample)({and:[{clock:d.s.outputs.zoomChanged,target:q}],or:{sid:"-chmn12"}}),(0,i.sample)({and:[{clock:[q,W,p.n.outputs.$sizes.updates,O.k.outputs.$userPositionProjection.updates],source:{map:l.X.outputs.$mapboxInstance,pins:R,isMobile:o.l.outputs.$isMobile,mapSettings:a.mH.outputs.$mapSettings,pinSizes:p.n.outputs.$sizes,pinsConfig:a.mH.outputs.$pinsConfig,location:O.k.outputs.$userPositionProjection},filter:({map:e,pins:t,pinsConfig:s})=>Boolean(e&&t&&s),fn:({map:e,pins:t,isMobile:s,mapSettings:i,pinSizes:o,pinsConfig:n,location:a})=>function(e){const t=e.map.getZoom(),s=function({pins:e,map:t,pinSizes:s,isEveryPinSmall:i,maxSize:o,currentZoom:n,userLocation:a}){if(i)return e.map((e=>{let t=m.B.Small;return e.type===r.AS.WALK&&(t=m.B.Large),{...e,displayType:t,controlledSize:v({pinSizeType:t,pinSizes:s})}}));const l=[...e];for(const i of l){const r=b({map:t,pin:i,pins:e,pinSizes:s,maxSize:o,userLocation:a});i.displayType=r,i.controlledSize=v({pinSizeType:i.displayType,pinSizes:s}),n>c.s.ZOOM_S_TO_M&&r===m.B.Small&&(i.displayType=m.B.Medium,i.controlledSize=v({pinSizeType:i.displayType,pinSizes:s}))}return l}({pins:e.pins,map:e.map,pinSizes:e.pinSizes,maxSize:t<e.lPinZoom?m.B.Medium:m.B.Large,isEveryPinSmall:t<e.minZoomToRepel,currentZoom:t,userLocation:e.userLocation});if(e.map.getZoom()<e.minZoomToRepel)return s;const i=f(s,e.map),o=[],n=[];i.forEach((e=>{e.displayType===m.B.Large&&n.push(e),e.displayType===m.B.Small&&o.push(e)}));for(const e of o)I([e,...n]);if(t>c.s.ZOOM_S_TO_M){const e=[];i.forEach((t=>{t.displayType===m.B.Medium&&e.push(t)})),I([...e,...n])}return function({nodes:e,pins:t,map:s}){return t.map((t=>{const i=e.find((e=>e.pinId===t.id));if(!i)return t;const{lat:o,lng:n}=s.unproject([i.x-i.offset.x,i.y-i.offset.y]);return{...t,controlledCoordinates:{latitude:o,longitude:n}}}))}({nodes:i,map:e.map,pins:e.pins})}({map:e,isMobile:Boolean(s),pins:t,minZoomToRepel:n?.max_zoom_s_pins,startZoom:i.initialViewState.zoom||0,pinSizes:o,lPinZoom:n?.max_zoom_l_pins,userLocation:a||null}),target:R}],or:{sid:"-cevo29"}}),(0,i.sample)({and:[{clock:Z,source:{map:l.X.outputs.$mapboxInstance,layerType:n.l.outputs.$layerType,poisFromDistrict:z.i.outputs.$poisFromDistrict},filter:({layerType:e,poisFromDistrict:t})=>"districts"===e&&t.length>0,fn:({map:e})=>!!e&&e.getZoom()<=c.s.ZOOM_TO_HIDE_POIS_FROM_DISTRICT,target:H}],or:{sid:"-ahllar"}}),(0,i.sample)({and:[{clock:[R.updates,p.n.outputs.$collisionRadiusEnabled],source:{map:l.X.outputs.$mapboxInstance,pins:R,isMobile:o.l.outputs.$isMobile,isDebugRadiusesEnabled:p.n.outputs.$collisionRadiusEnabled},filter:({map:e,pins:t,isDebugRadiusesEnabled:s})=>Boolean(s&&e&&t?.length),fn:({map:e,pins:t})=>f(t,e).map((t=>{const{lat:s,lng:i}=e.unproject([t.collisionCircle.cx,t.collisionCircle.cy]);return{...t,lat:s,lon:i}})),target:G}],or:{sid:"-9iyjx0"}}),(0,i.sample)({and:[{source:p.n.outputs.$collisionRadiusEnabled,filter:e=>!e,fn:()=>[],target:G}],or:{sid:"-83toqf"}});const Q={outputs:{$layerMapPins:R,$debugPins:G},inputs:{recalculatePinsPosition:q}}},5157:function(e,t,s){"use strict";s.d(t,{V:function(){return r}});var i=s(98116),o=s(44904);const n=(0,i.createDomain)({sid:"-96hwc1"}).createEvent({sid:"tty5zw"}),a=(0,i.restore)(n,null,{sid:"-6ylotu"});(0,i.sample)({and:[{clock:o.Y.inputs.close,fn:()=>null,target:n}],or:{sid:"yg1n2q"}}),(0,i.sample)({and:[{clock:o.Y.inputs.open,fn:({trapSource:e})=>e??null,target:n}],or:{sid:"yjcemw"}});const r={inputs:{setPoiOpenSource:n},outputs:{$poiOpenSource:a}}},82407:function(e,t,s){"use strict";s.d(t,{i:function(){return O}}),s(26699);var i=s(98116),o=s(69594),n=s(82214),a=s(99935),r=s(51456),l=s(31087),c=s(15863),d=s(26074);const{$group:u,$pin:p,$isDistrictsGroup:m,$isHotelsGroup:h,$isRoutesGroup:g}=n.l.outputs,_=u.map((e=>e?.type===r.OR?l.Jg.district:l.Jg.poi)),f=u.map(r.Fq),x=f.map((e=>e&&(0,r.Qu)(e))),y=f.map((e=>e?.map((e=>e.coordinates))||[])),v=(0,i.withFactory)({sid:"j9c1b8",fn:()=>(0,o.X)(u)}),b=(0,i.withFactory)({sid:"-78w8bi",fn:()=>(0,o.X)(p)}),j=(0,i.combine)({and:[p,a.s.outputs.$data,_,(e,t,s)=>s!==l.Jg.district||null===e||null===t?null:(0,d.cu)(t.polygonsSource,e.id)],or:{sid:"gtx5o8"}}),k=(0,i.combine)({and:[a.s.outputs.$data,r.mH.outputs.$data,n.l.outputs.$layerType,(e,t,s)=>e&&t&&s===r.OR?e.layers.filter((e=>e.source===t.polygons_source_id)).map((e=>e.id)):[]],or:{sid:"c4xm2x"}}),w=(0,i.combine)({and:[n.l.outputs.$placeAlert,u,(e,t)=>null===t||null===e?null:t.places.find((t=>t.id===e))||null],or:{sid:"-xekneb"}}),C=(0,i.withFactory)({sid:"rs7534",fn:()=>(0,o.X)(w)}),S=(0,i.createEvent)({sid:"fr18l4"}),N=(0,i.restore)(S,null,{sid:"espj3p"}),P=(0,i.createEvent)({sid:"-4tep2q"}),T=(0,i.restore)(P,null,{sid:"s6rksx"}),I=(0,i.combine)({and:[{hoveredDistrictPinId:N,hoveredPolygonDistrictPinId:T},({hoveredDistrictPinId:e,hoveredPolygonDistrictPinId:t})=>e??t],or:{sid:"-7jsozd"}}),A=w.map((e=>e?.id??null)),M=(0,i.createStore)(null,{sid:"-x0dh8x"}),E=(0,i.combine)({and:[I,_,k,(e,t,s)=>t===l.Jg.district&&e?s.find((t=>t.includes(e)))??null:null],or:{sid:"voxhjr"}}),$=(0,i.combine)({and:[M,_,k,(e,t,s)=>t===l.Jg.district&&e?s.find((t=>t.includes(e)))??null:null],or:{sid:"-lsnfvd"}}),D=(0,i.combine)({and:[A,_,k,(e,t,s)=>t===l.Jg.district&&e?s.find((t=>t.includes(e)))??null:null],or:{sid:"-8pl1rr"}}),B=u.map((e=>e?.info?.type===l.Eg.BUY)),L=(0,i.createStore)([],{and:{updateFilter:c.Ih},sid:"-6i0gag"}),O={outputs:{$layerType:_,$tab:u,$prevTab:v,$pin:p,$layerPins:f,$pinsCoordinates:y,$prevPin:b,$polygon:j,$isHotelsTab:h,$isDistrictsTab:m,$isRoutesTab:g,$interactiveLayerIds:k,$placeAlertPin:w,$prevAlertPin:C,$placesWithImage:x,$hoveredLayerId:E,$hoveredDistrictPinId:I,$selectedDistrictPinId:M,$selectedLayerId:$,$selectedAlertLayerId:D,$selectedAlertId:A,$isPaidLayer:B,$poisFromDistrict:L},inputs:{setHoveredPolygonDistrictPinId:P,setHoveredDistrictPinId:S}}},13872:function(e,t,s){"use strict";s.d(t,{o:function(){return y}});var i=s(98116),o=s(30040),n=s(51717),a=s(10924),r=s(51456),l=s(31087),c=s(82407);const d=(0,i.createDomain)({sid:"-5kz2hr"}),u=d.createStore(null,{sid:"-3js7aq"}),p=d.createEvent({sid:"-ubxblh"}),m=d.createEvent({sid:"-7zd5cz"}),h=d.createStore(null,{sid:"w1x1fq"}),g=d.createStore(null,{sid:"-1atsqa"}),_=(0,i.combine)({and:[g,e=>e?.map((e=>e.coordinates))||[]],or:{sid:"j7bqr6"}}),f=c.i.outputs.$isRoutesTab,x=c.i.outputs.$tab.map((e=>e?1===e.subgroups?.length&&e.subgroups[0].type===l.xL.ALL?null:e.subgroups||null:null));(0,i.sample)({and:[{clock:x,source:u,filter:(e,t)=>!!t&&t.filter((({type:e})=>e!==l.xL.ALL)).length>0,fn:(e,t)=>{const s=t[0].id;return t.find((t=>t.id===e))?e:s},target:u}],or:{sid:"2tycf2"}}),(0,i.sample)({and:[{source:{pins:c.i.outputs.$placesWithImage,subgroup:h},filter:({pins:e})=>Boolean(e),fn:({pins:e,subgroup:t})=>t?.places?(0,r._y)(e,t?.places):e,target:g}],or:{sid:"46w187"}}),(0,i.sample)({and:[{clock:p,target:u}],or:{sid:"4q4tzu"}}),(0,i.sample)({and:[{clock:p,source:f,filter:e=>e,target:m}],or:{sid:"54fhf8"}}),(0,i.sample)({and:[{source:{subgroups:x,subgroupId:u},filter:({subgroups:e,subgroupId:t})=>Boolean(e&&t),fn:({subgroups:e,subgroupId:t})=>e.find((e=>e.id===t))||null,target:h}],or:{sid:"-uyl4at"}}),(0,i.sample)({and:[{clock:x,filter:e=>!e,fn:()=>null,target:u}],or:{sid:"-ugzpb9"}}),(0,i.sample)({and:[{source:u,filter:e=>null===e,fn:()=>null,target:h}],or:{sid:"-u1lgp5"}});const y={outputs:{$selectedSubgroupId:u,$selectedSubgroup:h,$subgroupPins:g,$subgroups:x,$subgroupPinsCoordinates:_,subgroupWithZoomingChanged:m},inputs:{setSubgroup:p}},v=y.outputs.$selectedSubgroup.map((e=>e?.title||null)),{$tab:b}=c.i.outputs,{$premAvailability:j,$premType:k,$tabId:w,$tabType:C}=(0,i.withFactory)({sid:"k7jxar",fn:()=>(0,n.X)({source:b,shape:{$tabId:e=>e?.id??null,$tabType:e=>e?.type||null,$premType:e=>e?.premium.type||null,$premAvailability:e=>e?.premium.availability||null}})});a.I.inputs.createReporter({data:{category:"guide_map",label:"filter",action:"clicked",service:o.t6.Guides},payload:{filter:v,tab_id:w,tab_type:C,prem_type:k,premAvailability:j,guide_ark_id:r.mH.outputs.$guideArkId,userEvent:!0}})({clock:(0,i.sample)({and:[{clock:y.inputs.setSubgroup,source:y.outputs.$selectedSubgroup,filter:Boolean}],or:{sid:"lfr0xw"}}),payload:({filter_tab_id:e},{payload:t})=>e?{...t,filter_tab_id:e}:t})},37823:function(e,t,s){"use strict";s.d(t,{a:function(){return r},k:function(){return b}});var i=s(98116),o=s(99763),n=s(88484),a=s(45810);const r=24;let l=null;const c=(0,i.createStore)(null,{sid:"-in1wmm"}),d=(0,i.createStore)(null,{sid:"-6pt7a5"});(0,i.sample)({and:[{clock:[a.s.outputs.zoomChanged,n.X.outputs.$mapboxInstance.updates,c.updates],source:{mapbox:n.X.outputs.$mapboxInstance,userPosition:c},filter:({mapbox:e,userPosition:t})=>Boolean(e&&t),fn:({mapbox:e,userPosition:t})=>{const{x:s,y:i}=e.project([t.coords.longitude,t.coords.latitude]);return{x:s,y:i-r/2,width:r,height:r}},target:d}],or:{sid:"v0thlv"}});const u=(0,i.createStore)(null,{sid:"4fd82p"}),p=(0,i.createEvent)({sid:"wr7zou"}),m=(0,i.createStore)(!0,{sid:"-gbtscm"}),{setIsFirstRequest:h}=(0,i.createApi)({and:[m,{setIsFirstRequest:(e,t)=>t}],or:{sid:"c93iuj"}}),g=(0,i.createEvent)({sid:"-6i5sjg"}),_=(0,i.createEvent)({sid:"-1qd2wl"}),f=(0,i.createEffect)((()=>{var e;null!==l&&navigator.geolocation.clearWatch(l),e=g,window.removeEventListener("deviceorientationabsolute",e),window.removeEventListener("deviceorientation",e)}),{sid:"-9tz12j"}),x=(0,i.createEffect)((()=>{!function(e){const t=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",e):window.addEventListener("deviceorientation",e)};void 0!==window.DeviceMotionEvent&&"requestPermission"in window.DeviceMotionEvent&&"function"==typeof window.DeviceMotionEvent.requestPermission&&"requestPermission"in DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{"granted"===e&&t()})):t()}((0,i.scopeBind)(g))}),{sid:"j3bu0j"}),y=(0,i.createEffect)((()=>(null!==l&&navigator.geolocation.clearWatch(l),new Promise(((e,t)=>{l=navigator.geolocation.watchPosition(e,t,{timeout:6e3,enableHighAccuracy:!0})})))),{sid:"lu94kg"}),v=(0,i.createEffect)((e=>new Promise(((t,s)=>{navigator.geolocation.getCurrentPosition(t,s,{timeout:e,enableHighAccuracy:!0})}))),{sid:"lokxt1"});(0,i.sample)({and:[{clock:g,source:{mapbox:n.X.outputs.$mapboxInstance},filter:({mapbox:e})=>Boolean(e),fn:({mapbox:e},t)=>function(e,t){const{alpha:s}=e;if(null===s)return null;let i=s;return"webkitCompassHeading"in e&&(i=e.webkitCompassHeading),!0===e.absolute&&(i=-1*s),i-t}(t,e.getBearing()),target:u}],or:{sid:"77nn13"}}),(0,i.sample)({and:[{clock:(0,i.withFactory)({sid:"-wci0n2",fn:()=>(0,o.I)(p)}),target:[x,y]}],or:{sid:"7psum0"}}),(0,i.sample)({and:[{clock:p,source:m,fn:e=>e?2e4:6e3,target:v}],or:{sid:"843i1e"}}),(0,i.sample)({and:[{clock:(0,i.withFactory)({sid:"-vhpjeu",fn:()=>(0,o.I)(p)}),fn:()=>!1,target:h}],or:{sid:"8klbu8"}}),(0,i.sample)({and:[{clock:v.doneData,target:c}],or:{sid:"8nw3ee"}}),(0,i.sample)({and:[{clock:y.doneData,target:c}],or:{sid:"926qts"}}),(0,i.sample)({and:[{clock:v.doneData,source:{mapbox:n.X.outputs.$mapboxInstance},filter:({mapbox:e})=>Boolean(e),fn:({mapbox:e},t)=>({coordinates:{latitude:t.coords.latitude,longitude:t.coords.longitude},zoom:e.getZoom()}),target:n.X.inputs.easeToFx}],or:{sid:"94xpsl"}}),(0,i.sample)({and:[{clock:_,target:f}],or:{sid:"a30ykz"}});const b={inputs:{requestGeolocation:p,clearWatchers:_},outputs:{$userPosition:c,$headingDegrees:u,$userPositionProjection:d}}},72045:function(e,t,s){"use strict";var i=s(98116),o=s(59399),n=s(47047),a=s(82214),r=s(47956),l=s(79403),c=s(15863),d=s(95628),u=s(86042),p=s(31087),m=s(71457);const{$enabled:h,turnOn:g,turnOff:_}=(0,i.withFactory)({sid:"p049j1",fn:()=>(0,n.d)(c.qs,!0)});(0,i.sample)({and:[{clock:a.l.outputs.$layer.updates,target:g}],or:{sid:"wymm88"}});const f=(0,i.combine)({and:[{isEventEnabled:h,direction:d.R.outputs.$guideId,isAviasalesBrand:l.U.outputs.$isAviasalesBrand,trapSource:r.I.outputs.$trapSource,data:m.A_.outputs.$data},({isEventEnabled:e,direction:t,isAviasalesBrand:s,data:i})=>e&&Boolean(t)&&s&&Boolean(i)],or:{sid:"ivnbdr"}});(0,i.sample)({and:[{clock:(0,i.withFactory)({sid:"d3wh90",fn:()=>(0,o.g)({source:m.A_.outputs.$data.updates,timeout:1500})}),source:{shouldSendEvent:f,direction:d.R.outputs.$guideId,trapSource:r.I.outputs.$trapSource},filter:({shouldSendEvent:e,trapSource:t})=>e&&t===p.Ur.DEEPLINK,fn:({direction:e})=>({title:p.qb.TrapUse,props:{direction:e}}),target:[u.A.inputs.sendUxFeedback,_]}],or:{sid:"xjisry"}}),(0,i.sample)({and:[{clock:m.A_.outputs.$data.updates,source:{shouldSendEvent:f,direction:d.R.outputs.$guideId,trapSource:r.I.outputs.$trapSource},filter:({shouldSendEvent:e,trapSource:t})=>e&&t!==p.Ur.DEEPLINK,fn:({direction:e})=>({title:p.qb.TrapUse,props:{direction:e}}),target:[u.A.inputs.sendUxFeedback,_]}],or:{sid:"yh28yz"}})},45810:function(e,t,s){"use strict";s.d(t,{s:function(){return u}});var i=s(98116),o=s(69594),n=s(88484);const a=(0,i.createEvent)({sid:"-e0wsqn"}),r=(0,i.createStore)(null,{sid:"-y040or"}),l=(0,i.createEvent)({sid:"92asq8"}),c=(0,i.createStore)(null,{sid:"-6zdo4t"}),d=(0,i.withFactory)({sid:"f3hwjz",fn:()=>(0,o.X)(c)});r.on(a,((e,t)=>t)),c.on(l,((e,t)=>t)),(0,i.sample)({and:[{source:n.X.outputs.$mapboxInstance,filter:Boolean,fn:e=>e.getZoom(),target:[r,c]}],or:{sid:"-xjo6nh"}});const u={outputs:{zoomChanged:a,zoomEnded:l,$zoom:r,$zoomEnd:c,$prevZoomEnd:d}}},90522:function(e,t,s){"use strict";s.r(t),s.d(t,{TravelMapWidget:function(){return jr}});var i=s(67294),o=s(4190),n=s(50112),a=s(51456),r=s(47956),l=s(10604),c=s(14210),d=s(38387),u=s(30091),p=s(94184),m=s.n(p),h=s(42811),g=s(99441),_=s(85893);const f=({className:e,...t},s)=>(0,_.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:s,style:{display:"inline-block"},...t,children:(0,_.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.572 4.372c.448.303.859.684 1.212 1.142l.216.281.217-.281a5.117 5.117 0 0 1 7.759-.442A5.398 5.398 0 0 1 21.5 8.916V9c0 1.018-.396 2.147-.986 3.274-.595 1.136-1.412 2.316-2.309 3.448-1.793 2.266-3.94 4.388-5.374 5.653l-.141.125h-1.38l-.14-.125c-1.434-1.265-3.581-3.387-5.375-5.653-.896-1.133-1.713-2.313-2.308-3.448C2.897 11.147 2.5 10.018 2.5 9l.001-.084a5.398 5.398 0 0 1 1.523-3.844 5.117 5.117 0 0 1 6.548-.7ZM12 19.432c-1.338-1.228-3.127-3.044-4.636-4.95-.852-1.077-1.589-2.15-2.106-3.136C4.728 10.332 4.5 9.544 4.5 9v-.036l.001-.037v-.038a3.398 3.398 0 0 1 .956-2.422 3.138 3.138 0 0 1 2.42-.963c.04-.003.08-.004.123-.004 2 0 3 2 3.5 3h1l.001-.002c.5-1 1.5-2.998 3.499-2.998.043 0 .084.001.124.004a3.139 3.139 0 0 1 2.42.963c.642.66.968 1.537.956 2.422V9c0 .544-.227 1.332-.758 2.346-.517.986-1.253 2.059-2.105 3.135-1.51 1.907-3.298 3.723-4.637 4.95Z"})}),x=(0,i.memo)((0,i.forwardRef)(f));x.displayName="Icon24ControlsHeartOutline";var y=s(5393),v="s__hvDY_AbMDRupHKz8WM1J",b="s__RoLQ49BsJMIET2VNgmAC";const j=({className:e,children:t,onMouseEnter:s,onMouseLeave:i})=>(0,_.jsx)("div",{className:m()(e,"s__JGUGmFSFHbTABoP53Tmz"),onMouseEnter:s,onMouseLeave:i,children:(0,_.jsx)("div",{className:"s__Mk8KMaoTxKx3kEWXF1Re",children:t})});j.FavoriteButton=({onClick:e,isFavorite:t,enableAnimation:s,showButton:i})=>i?(0,_.jsx)("button",{className:m()(b,v,"s__K63xmSf6ejyS8DTIScc4",!t&&"s__OmSHAvD1CoooRg39ODwk",t&&"s__JYKWImUXl6gTsc1yQUOt",s&&"s__J3OEeEA5HrznWYo6KuNr"),onClick:e,children:t?(0,_.jsx)(g.w,{}):(0,_.jsx)(x,{})}):null,j.ShareButton=({onClick:e})=>(0,_.jsx)("button",{"data-test-id":"place-details-copy-btn",className:m()(b,v),onClick:e,children:(0,_.jsx)(h.E,{})}),j.CloseButton=e=>(0,_.jsx)(y.P,{...e,className:"s__ixr_hBDXJT7biMUnfohw"}),j.RightSide=({className:e,children:t})=>(0,_.jsx)("div",{className:m()(e,"s__iUunIsbq9h9RkouV6XC8"),children:t}),j.LeftSide=({className:e,children:t})=>(0,_.jsx)("div",{className:m()(e,"s__WN9yiy0HNf69hsHbAr_6"),children:t});var k=s(98116),w=s(65752),C=s(71457),S=s(43587),N=s(49963),P=s(44619),T=s(35144),I=s(86273),A=s(90924),M=s(4407),E=s(80871),$={item:"s__rjTfeVWYQ7vi1bvKFl71",itemText:"s__qOb2PwnRN723sih6P8L9",image:"s__XEOTDdJJkaW9RD6VZcfu",icon:"s__kbLQA0EvNQwqTNsWNCGd",browser:"s__f_sgcxj0y1F31EuCqEtg",map:"s__vuEA0s_UuaVLGQUN7mhU",primaryColoredIcon:"s__p_q0K3JoSSeNc0lwoZeH",disclosureIcon:"s__alH2vwdEiPrJMCM8PXc0"};const D=e=>"poi_carousel"===e.type,B=e=>`${e.type}-block`.replace("_","-"),L=e=>{const{longitude:t,latitude:s}=e;return`https://www.google.com/maps/search/?api=1&query=${s}%2C${t}`},O={[C.U5.INSTAGRAM]:T.W,[C.U5.BROWSER]:I.Z,[C.U5.MAP]:A._,[C.U5.BROWSER_EXTERNAL]:null},z=({button:e,onClick:t})=>{const s=(e=>{if(e.url)return e.url;if(e.links){const t=e.links.find((e=>"google"===e.type))?.link;if(t)return t}return e.coordinates?L(e.coordinates):null})(e),o=(0,i.useCallback)((()=>{s&&t(s)}),[s,t]),n=O[e.type];return(0,_.jsx)("div",{className:$.container,children:(0,_.jsxs)("a",{className:$.item,href:s??void 0,target:"_blank",rel:"noreferrer",onClick:o,children:[e.icon&&(0,_.jsx)(M.E,{className:$.image,src:e.icon?.svg,width:24,height:24}),!e.icon&&n&&(0,_.jsx)(n,{className:m()($.icon,$[e.type])}),(0,_.jsx)(N.x,{tag:"span",type:P.y.Body1Regular,className:$.itemText,truncateMode:P.k.SingleLine,children:e.title}),(0,_.jsx)(E.i,{className:$.disclosureIcon})]})})};var F=s(32671),U=s(82214),R=s(13680);const{forwardToAnalyticsWithDefaults:H}=F.I.inputs,q=(0,k.createEvent)({sid:"nxqcb7"}),Z=(0,k.createEvent)({sid:"-hb3cru"});(0,k.sample)({and:[{clock:q,source:{tab:U.l.outputs.$layerType,pin:U.l.outputs.$pin,source:r.I.outputs.$trapSource,isFavorite:R.q.outputs.$isFavorite,analytics:C.A_.outputs.$poiAnalytics},fn:({tab:e,pin:t,source:s,isFavorite:i,analytics:o},n)=>{const a={click_url:n,tab:e,content_name:t?.name,source:s,is_favorite:i};return o?.original_tab_id?{...a,original_tab_id:o.original_tab_id}:a},target:Z}],or:{sid:"gbx1l5"}}),H({clock:Z,data:{label:"content_screen_link",action:"clicked"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})});const W={inputs:{clicked:q}};const G=({block:e})=>{const{buttons:t}=e.block,s=(0,o.useUnit)(W.inputs.clicked);return(0,_.jsx)("div",{className:"s__DPGdtbcX9cDyLo2Es8Lp",children:t.map((e=>(0,_.jsx)(z,{button:e,onClick:s},e.type)))})};var Q=s(28225),Y=s(41003);const{forwardToAnalyticsWithDefaults:X}=F.I.inputs,V=(0,k.createEvent)({sid:"lnkgdx"}),J=(0,k.createEvent)({sid:"-q1n9d9"});(0,k.sample)({and:[{clock:V,source:{tab:U.l.outputs.$layerType,source:r.I.outputs.$trapSource},fn:({tab:e,source:t},{role:s,contacts:i})=>({click_url:i[0].url,tab:e??"",occupation:s,content_source:"direction-guides-content_screen",item_position:null,source:t}),target:J}],or:{sid:"-iuwazc"}}),X({clock:J,data:{category:"content",label:"people",action:"clicked"},payload:(e,{payload:t})=>({...t,...e,pageName:"main",userEvent:!0})});const K={inputs:{clicked:V}},ee=({block:e})=>{const{t:t}=(0,Q.useTranslation)("guides_place_details_service"),s=(0,o.useUnit)(K.inputs.clicked),{title:n,text:a,provider:r}=e,l=r.contacts[0],c=(0,i.useCallback)((()=>s(r)),[s,r]);return(0,_.jsxs)("div",{className:"s__ybamnuKbHzdJ9kBXWTIj",children:[(0,_.jsx)(N.x,{type:P.y.Body1Bold,className:"s__en_q7RjgyEXJv00pxC0f",children:n}),(0,_.jsxs)("div",{className:"s__L9zeuBSol9ujzqFZgPRn",children:[(0,_.jsx)(M.E,{srcTemplate:r.avatar_url,width:40,height:40,alt:t("pinImageAlt",{place:r.first_name}),className:"s__WNJofOjT1JaaypdFv0iK",draggable:!0}),(0,_.jsxs)("div",{className:"s__WlJtb2lhijvCNGaWnPrN",children:[(0,_.jsx)(N.x,{tag:"p",className:"s__gqgXIAB3vpJeAtE47mVh",type:P.y.Body1Regular,truncateMode:P.k.SingleLine,children:r.first_name}),r.role&&(0,_.jsx)(N.x,{tag:"p",className:"s__mYcc3hVV5mZMcOPkq4_w",type:P.y.Body3Regular,truncateMode:P.k.TwoLines,children:r.role})]})]}),(0,_.jsxs)("div",{className:"s__pfWEDwxLHqIPnJbCsYtK",children:[(0,_.jsx)(S.Jv,{tag:"p",type:P.y.Body2Paragraph,className:"s__HRTfaQoGXVhNE1W2FN4X",children:a}),l&&(0,_.jsxs)(Y.r,{className:"s__iXaWmVNz6sXrB_9QurRA",href:l.url,target:"_blank",rel:"noreferrer",changeColorOnHover:!0,onClick:c,children:[(0,_.jsx)(S.rz,{className:l.icon?"s__JzRXssx0pJ66dT21KToz":"s__Bt0n7JG327rgCKXI6mgj",type:l.type,src:l.icon?.svg}),(0,_.jsx)(N.x,{type:P.y.Body2Semi,tag:"span",children:l.contact_title})]})]})]})};const te=({text:e,className:t})=>(0,_.jsx)(S.Jv,{className:m()("s__fLhsnmFUAe1WYUifJuQA",t),type:P.y.Body1Paragraph,children:e});const se=({restriction:e})=>(0,_.jsx)("div",{className:"s__FAKZQ_ouCXwdFtRC6dYw",children:(0,_.jsxs)(S.Qu,{className:"s__vvIMLkg_EJPasgr9TAeF",children:[(0,_.jsx)(S.Qu.Icon,{className:"s__s7xQtBAUWCiZaMqXTULf",src:e.emoji.svg}),(0,_.jsx)(S.Qu.Text,{text:e.text})]},e.text)});var ie=s(87115),oe=s(34701),ne="s__FXyM0qj7XILOL_EJLaFM";const ae=({block:e})=>{const{tags:t,badges:s}=e;return s&&s.length>0?(0,_.jsx)("div",{className:ne,children:s.map((({text:e,style:t})=>(0,_.jsx)(S.cG,{size:ie.OD.S,borderStyle:ie.Pk.Brick,backgroundColor:t.background_color,textColor:t.text_color,className:"s__qHW49LUiKmFbw4XTcT5c",children:e},e)))}):(0,_.jsx)("div",{className:ne,"data-test-id":"place-details-tags-container",children:t.map((e=>(0,_.jsx)(oe.C,{className:"s__7yUvluAoSEHvmqFTdPhP",size:ie.OD.S,color:ie.JV.Custom,borderStyle:ie.Pk.Brick,testId:"place-details-tag",children:e},e)))})};const re=({title:e,isHotel:t=!1})=>(0,_.jsx)(N.x,{className:m()("s__M0cS2U_8ND3xPSbnMIRp",t&&"s__U8ToePJKRnwTszdKUZ3l"),type:P.y.Title3Bold,children:e});var le=s(88998),ce=s(77657),de=s(10001);const ue=()=>(0,_.jsxs)("div",{className:m()("s__U5VtbS9MZAHzuBDQPhB1","s__eotQaUFctTCdxCdN2LPU"),children:[(0,_.jsx)("div",{className:"s__KuwMMm7HPoxY7WmjudgM"}),(0,_.jsxs)("div",{className:"s__thyvqAN1bgX80mpIWWw3",children:[(0,_.jsx)("div",{className:"s__OxmubbIPKIzBZpJbX8Mb"}),(0,_.jsx)("div",{className:"s__WkX9Rn45wOAevQlAE3X3"}),(0,_.jsx)("div",{className:"s__cKeLsLXmC22Unn6wQKHn"})]})]});var pe={container:"s__VtlmpQu7wXjmqQecxvMP",errorContainer:"s__DnY3gGGeqnHk4kRQMIUY",errorWrapper:"s__zdhrXsERWFFXQOHDYO7x",contentWrapper:"s__qhzTfQch0wmCWvrAAIC4"};const me=({children:e,className:t})=>(0,_.jsx)("div",{className:m()(t,pe.container),children:e}),he=({children:e,className:t,isError:s,isLoading:i,isMobile:o,showDetailsInfo:n,handleRefetchClick:a})=>{const{t:r}=(0,Q.useTranslation)("guides_place_details_service");return i?(0,_.jsx)(me,{className:t,children:(0,_.jsx)(ue,{})}):s?(0,_.jsx)(me,{className:m()(t,pe.errorContainer),children:(0,_.jsx)("div",{className:pe.errorWrapper,children:(0,_.jsxs)(le.A,{size:o?ce.g.Mobile:ce.g.Desktop,className:pe.errorBlock,children:[(0,_.jsx)(le.A.Icon,{mod:de.i.Warning}),(0,_.jsx)(le.A.Title,{children:r("errorState.title")}),(0,_.jsx)(le.A.Content,{children:r("errorState.description")}),(0,_.jsx)(le.A.Actions,{children:(0,_.jsx)(le.A.Action,{onClick:a,children:r("errorState.reload")})})]})})}):(0,_.jsx)(me,{className:t,children:n&&e})};const ge=({image:e})=>{const{imageUrl:t,imageAlt:s}=e;return(0,_.jsx)(S.G0,{rootClassName:"s__VUz8GZNWe7YP6XdNY5zq",className:"s__rvzsO_C6g8ilrDjkf41v",imageUrl:t,size:480,alt:s,lazy:!1})};const _e=U.l.outputs.$pin.map((e=>e?.name??"")),fe=(0,k.createStore)(!1,{sid:"hfujza"}),{openModal:xe,closeModal:ye}=(0,k.createApi)({and:[fe,{openModal:()=>!0,closeModal:()=>!1}],or:{sid:"yevqk9"}}),ve=(0,k.createEvent)({sid:"-49u6hj"}),be=(0,k.restore)(ve,0,{sid:"-58exqs"}),je=(0,k.createEvent)({sid:"-d5crpu"}),ke=(0,k.restore)(je,!1,{sid:"-bod9zj"});be.reset(U.l.outputs.$poi);const we={outputs:{$title:_e,$isModalOpened:fe,$galleryActivePage:be,$showTooltip:ke},inputs:{openModal:xe,closeModal:ye,setGalleryActivePage:ve,setShowTooltip:je}};var Ce=s(78620),Se=s(45338),Ne="s__TyqhtV501EfBdLL7worv",Pe="s__Sie3_oLA0PbpluxmRo2i";const Te=({images:e,ImageComponent:t,className:s,changeActivePage:o,activePage:n})=>{const a=(0,i.useRef)(null),r=(0,i.useRef)(0);i.useEffect((()=>{const e=a.current;if(!e)return;const t=e.clientWidth*n;r.current=t,e.style.transform=`translateX(-${t}px)`}),[n]);const l=i.useCallback((()=>{a.current&&n<e.length-1&&o(n+1)}),[n,e,o]),c=i.useCallback((()=>{a.current&&n>0&&o(n-1)}),[n,o]),{ref:d}=(0,Se.QS)({onSwiped:e=>{"Left"===e.dir?l():"Right"===e.dir&&c()}});return(0,_.jsxs)("div",{className:m()("s__y1f592vJ4n8O8lCSEob9",s),children:[(0,_.jsx)("div",{ref:e=>{d(e),a.current=e},className:"s__hUxQfej1sD8CigB84UAg","body-scroll-lock-ignore":"",children:e.map((e=>(0,_.jsx)("div",{className:"s__hzWEN7zdwn6SY95m9rMv",children:(0,_.jsx)(t,{image:e})},e.imageUrl)))}),n>0&&(0,_.jsx)("button",{className:m()(Ne,"s__ZEV5_8CRnzlOB_3hTwCo"),onClick:c,children:(0,_.jsx)(Ce.I,{className:Pe})}),n<e.length-1&&(0,_.jsx)("button",{className:m()(Ne,"s__CuMXWgRTcPpNIFxxbZO8"),onClick:l,children:(0,_.jsx)(Ce.I,{className:Pe})}),e.length>1&&(0,_.jsx)("div",{className:"s__EjZdMhmWH0DPamUtwAwq",children:e.map(((e,t)=>(0,_.jsx)("div",{className:m()("s__IfIBwnO8p2d0QdU9yN95",t===n&&"s__PClfKUemuIYIqvdx_Fb7")},t)))})]})};var Ie=s(24530),Ae=s.n(Ie),Me=s(97608),Ee=s(9071),$e=s(45374),De=s(88846),Be=s.n(De),Le=s(46066),Oe="s__R3qXBphmTzjh80SzsKkn";const ze=({className:e,images:t=[],initialIndex:s=0,onImageClick:o,onAfterChange:n})=>{const[a,r]=(0,i.useState)(s),l=t.length,c=(0,i.useRef)(null),d=(0,i.useCallback)((()=>{o?.(a)}),[a,o]),u=(0,i.useCallback)((e=>{r(e),n?.(e)}),[n]);return(0,i.useEffect)((()=>{r(s)}),[s]),0===l?null:(0,_.jsx)("div",{className:m()("s__gdcWgYmOmM5y7itEzAlQ",e),"body-scroll-lock-ignore":"",children:(0,_.jsx)(Le.Z,{className:"s__Q6v5lr5uR4gApaFdbeLg",ref:c,afterChange:u,initialSlide:s,arrows:!1,children:Be()((e=>(0,_.jsx)(M.E,{className:Oe,imgClassName:Oe,srcTemplate:e.imageUrl,alt:e.imageAlt,width:768,height:768,draggable:!1,fadeIn:!0,lazy:!1,onClick:d},e.imageUrl)),t)})})},Fe=({className:e,...t},s)=>(0,_.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:s,style:{display:"inline-block"},...t,children:[(0,_.jsx)("path",{d:"M.799 7.999H0V8.4h.799v-.401ZM24 7.999h-.799V8.4H24v-.401Z",fill:"#CFD8DD"}),(0,_.jsx)("path",{d:"M4.534 5.651H1.733s.16-.517.363-.6c.48-.195 1.598-.195 2.078 0 .217.09.394.713.36.6Z",fill:"url(#EmojiCameraWithFlash__a)"}),(0,_.jsx)("path",{d:"M3.544 4.849h-.821v.798h.82V4.85Z",fill:"#CFD8DD"}),(0,_.jsx)("path",{d:"M23.602 7.999H.402v10.399h23.2v-10.4Z",fill:"url(#EmojiCameraWithFlash__b)"}),(0,_.jsx)("path",{d:"M22.811 19.2H1.19C.4 19.2.4 18.401.4 18.401h23.201c-.003 0-.003.799-.79.799Z",fill:"url(#EmojiCameraWithFlash__c)"}),(0,_.jsx)("path",{d:"m23.599 5.179-.593-.379H11.57c-2.033 0-2.292.844-4.242.844H.8c-.402 0-.402.341-.402.341v2.014H23.6v-2.82Z",fill:"url(#EmojiCameraWithFlash__d)"}),(0,_.jsx)("path",{d:"M11.869 17.126a1.076 1.076 0 0 1-2.153 0c0-.592.48-1.072 1.077-1.072a1.07 1.07 0 0 1 1.076 1.072Z",fill:"#99A8AE"}),(0,_.jsx)("path",{d:"M11.584 17.126a.791.791 0 0 1-1.583 0c0-.435.353-.787.792-.787a.783.783 0 0 1 .79.787Z",fill:"#302C3B"}),(0,_.jsx)("path",{d:"M15.6 18.784a6.199 6.199 0 1 0 0-12.398 6.199 6.199 0 0 0 0 12.398Z",fill:"url(#EmojiCameraWithFlash__e)"}),(0,_.jsx)("path",{d:"M20.75 14.371a5.449 5.449 0 1 0-10.295-3.575A5.449 5.449 0 0 0 20.75 14.37Z",fill:"#1A1626"}),(0,_.jsx)("path",{d:"M20.483 12.585a4.883 4.883 0 0 1-4.883 4.883 4.886 4.886 0 0 1-4.886-4.883A4.887 4.887 0 0 1 15.6 7.699c2.7 0 4.883 2.186 4.883 4.886Z",fill:"#25222E"}),(0,_.jsx)("path",{d:"M15.6 16.905a4.32 4.32 0 1 0 0-8.64 4.32 4.32 0 0 0 0 8.64Z",fill:"url(#EmojiCameraWithFlash__f)"}),(0,_.jsx)("path",{opacity:.2,d:"M18.296 12.585a2.697 2.697 0 1 1-5.393 0 2.697 2.697 0 0 1 5.393 0Z",fill:"#302C3B"}),(0,_.jsx)("path",{d:"M18.416 12.585a2.818 2.818 0 0 1-5.636 0 2.816 2.816 0 0 1 2.82-2.816 2.813 2.813 0 0 1 2.816 2.816Z",fill:"#35313D"}),(0,_.jsx)("path",{d:"M17.854 12.585a2.253 2.253 0 1 1-2.254-2.254 2.251 2.251 0 0 1 2.254 2.254Z",fill:"#272430"}),(0,_.jsx)("path",{d:"M17.291 12.585a1.692 1.692 0 1 1-3.383 0 1.692 1.692 0 0 1 3.383 0Z",fill:"#2D2A36"}),(0,_.jsx)("path",{d:"M16.729 12.585a1.13 1.13 0 0 1-2.258 0 1.13 1.13 0 0 1 2.258 0Z",fill:"#35313D"}),(0,_.jsx)("path",{d:"M15.975 12.585a.376.376 0 0 1-.375.375.376.376 0 0 1-.375-.375c0-.206.169-.375.375-.375a.371.371 0 0 1 .375.375Z",fill:"#1A1626"}),(0,_.jsx)("path",{d:"M16.924 14.471c-1.515 1.166-3.582 1.024-4.617-.322-1.034-1.346-.648-3.383.867-4.549 1.515-1.17 3.585-1.024 4.62.322 1.038 1.347.648 3.383-.87 4.55Z",fill:"url(#EmojiCameraWithFlash__g)"}),(0,_.jsx)("path",{d:"M7.331 7.999H.401v10.399h6.93v-10.4Z",fill:"url(#EmojiCameraWithFlash__h)"}),(0,_.jsx)("path",{d:"m9.098 7.207 3.926-2.178-4.406.191 1.308-2.704-2.385 1.699.293-3.728L6.098 3.56 3.484 0l1.121 4.436L.686 3.131 3.81 5.99 0 6.728l3.652.832-2.047 3.656 3.352-2.025.14 3.833 1.372-3.499 1.849 2.768-.105-3.327 3.183 1.215-2.299-2.973Z",fill:"url(#EmojiCameraWithFlash__i)"}),(0,_.jsx)("path",{d:"m7.957 6.878 2.3-1.07-2.55-.074.682-1.515-1.35.772.049-2.062L6.18 4.65 4.815 2.891l.596 2.213-2.276-.574 1.86 1.605-2.31.54 2.115.487L3.308 9.45l2.287-1.549.064 2.014.821-1.837.926 1.372-.015-1.665 1.673.731-1.107-1.638Z",fill:"url(#EmojiCameraWithFlash__j)"}),(0,_.jsx)("path",{d:"m7.099 6.604.975-.45-1.08-.034.288-.641-.57.326.02-.874-.383.728-.578-.743.251.938-.963-.244.787.679-.979.232.897.206-.63.968.967-.656.026.851.345-.78.394.585-.004-.705.705.311-.468-.697Z",fill:"url(#EmojiCameraWithFlash__k)"}),(0,_.jsxs)("defs",{children:[(0,_.jsxs)("linearGradient",{id:"EmojiCameraWithFlash__a",x1:1.733,y1:5.285,x2:4.538,y2:5.285,gradientUnits:"userSpaceOnUse",children:[(0,_.jsx)("stop",{stopColor:"#D6E5ED"}),(0,_.jsx)("stop",{offset:.048,stopColor:"#D1E0E7"}),(0,_.jsx)("stop",{offset:.481,stopColor:"#A8B2B8"}),(0,_.jsx)("stop",{offset:.812,stopColor:"#8F969A"}),(0,_.jsx)("stop",{offset:1,stopColor:"#858C8F"})]}),(0,_.jsxs)("linearGradient",{id:"EmojiCameraWithFlash__b",x1:.4,y1:13.2,x2:23.6,y2:13.2,gradientUnits:"userSpaceOnUse",children:[(0,_.jsx)("stop",{offset:.9,stopColor:"#323844"}),(0,_.jsx)("stop",{offset:1,stopColor:"#1A1626"})]}),(0,_.jsxs)("linearGradient",{id:"EmojiCameraWithFlash__c",x1:.4,y1:18.8,x2:23.6,y2:18.8,gradientUnits:"userSpaceOnUse",children:[(0,_.jsx)("stop",{stopColor:"#7B8589"}),(0,_.jsx)("stop",{offset:.012,stopColor:"#8D979B"}),(0,_.jsx)("stop",{offset:.034,stopColor:"#AAB3B8"}),(0,_.jsx)("stop",{offset:.057,stopColor:"#BEC8CC"}),(0,_.jsx)("stop",{offset:.079,stopColor:"#CBD4D9"}),(0,_.jsx)("stop",{offset:.1,stopColor:"#CFD8DD"}),(0,_.jsx)("stop",{offset:.9,stopColor:"#CFD8DD"}),(0,_.jsx)("stop",{offset:.921,stopColor:"#CBD4D9"}),(0,_.jsx)("stop",{offset:.943,stopColor:"#BEC8CC"}),(0,_.jsx)("stop",{offset:.966,stopColor:"#AAB3B8"}),(0,_.jsx)("stop",{offset:.988,stopColor:"#8D979B"}),(0,_.jsx)("stop",{offset:1,stopColor:"#7B8589"})]}),(0,_.jsxs)("linearGradient",{id:"EmojiCameraWithFlash__d",x1:.4,y1:6.4,x2:23.6,y2:6.4,gradientUnits:"userSpaceOnUse",children:[(0,_.jsx)("stop",{stopColor:"#7B8589"}),(0,_.jsx)("stop",{offset:.012,stopColor:"#8D979B"}),(0,_.jsx)("stop",{offset:.034,stopColor:"#AAB3B8"}),(0,_.jsx)("stop",{offset:.057,stopColor:"#BEC8CC"}),(0,_.jsx)("stop",{offset:.079,stopColor:"#CBD4D9"}),(0,_.jsx)("stop",{offset:.1,stopColor:"#CFD8DD"}),(0,_.jsx)("stop",{offset:.9,stopColor:"#CFD8DD"}),(0,_.jsx)("stop",{offset:.921,stopColor:"#CBD4D9"}),(0,_.jsx)("stop",{offset:.943,stopColor:"#BEC8CC"}),(0,_.jsx)("stop",{offset:.966,stopColor:"#AAB3B8"}),(0,_.jsx)("stop",{offset:.988,stopColor:"#8D979B"}),(0,_.jsx)("stop",{offset:1,stopColor:"#7B8589"})]}),(0,_.jsxs)("radialGradient",{id:"EmojiCameraWithFlash__e",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(4.38401 -4.38401 26.30409 26.30409 15.6 12.583)",children:[(0,_.jsx)("stop",{offset:.23,stopColor:"#EFFAFF"}),(0,_.jsx)("stop",{offset:.369,stopColor:"#E7F2F7"}),(0,_.jsx)("stop",{offset:.587,stopColor:"#D1DCE1"}),(0,_.jsx)("stop",{offset:.854,stopColor:"#ADB9BD"}),(0,_.jsx)("stop",{offset:1,stopColor:"#96A2A6"})]}),(0,_.jsxs)("linearGradient",{id:"EmojiCameraWithFlash__f",x1:12.544,y1:9.528,x2:18.655,y2:15.639,gradientUnits:"userSpaceOnUse",children:[(0,_.jsx)("stop",{stopColor:"#302C3B"}),(0,_.jsx)("stop",{offset:.475,stopColor:"#312E3D"}),(0,_.jsx)("stop",{offset:.749,stopColor:"#363742"}),(0,_.jsx)("stop",{offset:.972,stopColor:"#3F454B"}),(0,_.jsx)("stop",{offset:1,stopColor:"#40474D"})]}),(0,_.jsxs)("radialGradient",{id:"EmojiCameraWithFlash__g",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(52.408 -2.91 17.815) scale(5.94821 6.69991)",children:[(0,_.jsx)("stop",{stopColor:"#fff",stopOpacity:.2}),(0,_.jsx)("stop",{offset:1,stopColor:"#fff",stopOpacity:0})]}),(0,_.jsxs)("linearGradient",{id:"EmojiCameraWithFlash__h",x1:.4,y1:13.2,x2:7.33,y2:13.2,gradientUnits:"userSpaceOnUse",children:[(0,_.jsx)("stop",{stopColor:"#302C3B"}),(0,_.jsx)("stop",{offset:.015,stopColor:"#33313F"}),(0,_.jsx)("stop",{offset:.099,stopColor:"#3F4551"}),(0,_.jsx)("stop",{offset:.194,stopColor:"#47535D"}),(0,_.jsx)("stop",{offset:.309,stopColor:"#4C5B65"}),(0,_.jsx)("stop",{offset:.5,stopColor:"#4E5E67"}),(0,_.jsx)("stop",{offset:.631,stopColor:"#4A5862"}),(0,_.jsx)("stop",{offset:.803,stopColor:"#414853"}),(0,_.jsx)("stop",{offset:.997,stopColor:"#302C3B"}),(0,_.jsx)("stop",{offset:1,stopColor:"#302C3B"})]}),(0,_.jsxs)("linearGradient",{id:"EmojiCameraWithFlash__i",x1:6.512,y1:13.025,x2:6.512,y2:0,gradientUnits:"userSpaceOnUse",children:[(0,_.jsx)("stop",{stopColor:"#FF4D00"}),(0,_.jsx)("stop",{offset:.299,stopColor:"#FF7400"}),(0,_.jsx)("stop",{offset:.582,stopColor:"#FF9200"}),(0,_.jsx)("stop",{offset:.825,stopColor:"#FFA400"}),(0,_.jsx)("stop",{offset:1,stopColor:"#FA0"})]}),(0,_.jsxs)("linearGradient",{id:"EmojiCameraWithFlash__j",x1:6.47,y1:9.916,x2:6.47,y2:2.891,gradientUnits:"userSpaceOnUse",children:[(0,_.jsx)("stop",{stopColor:"#FFB500"}),(0,_.jsx)("stop",{offset:.087,stopColor:"#FFBA00"}),(0,_.jsx)("stop",{offset:.674,stopColor:"#FFDA00"}),(0,_.jsx)("stop",{offset:1,stopColor:"#FFE600"})]}),(0,_.jsxs)("linearGradient",{id:"EmojiCameraWithFlash__k",x1:6.47,y1:7.891,x2:6.47,y2:4.916,gradientUnits:"userSpaceOnUse",children:[(0,_.jsx)("stop",{stopColor:"#FFF1A3"}),(0,_.jsx)("stop",{offset:.16,stopColor:"#FFF4B6"}),(0,_.jsx)("stop",{offset:.527,stopColor:"#FFFADE"}),(0,_.jsx)("stop",{offset:.82,stopColor:"#FFFEF6"}),(0,_.jsx)("stop",{offset:1,stopColor:"#fff"})]})]})]}),Ue=(0,i.memo)((0,i.forwardRef)(Fe));Ue.displayName="EmojiCameraWithFlash";const Re=({description:e,className:t})=>(0,_.jsxs)("div",{className:m()("s__LDxBVE_4xDDJNVmi9tX3",t),children:[(0,_.jsx)(Ue,{className:"s__mXp6Xa9zayenUMhDrL_t"}),(0,_.jsx)(S.Jv,{className:"s__WF34Q5pjUfNN6EUHXSQC",type:P.y.Body3Regular,children:e.expanded||e.text})]}),He=({isVisible:e=!1,initialIndex:t=0,onClose:s=Ae(),onAfterChange:o=Ae(),images:n=[]})=>{const{t:a}=(0,Q.useTranslation)("guides_place_details_service"),[r,l]=(0,i.useState)(t),c=n[r],d=(0,i.useCallback)((()=>{s(r)}),[s,r]),u=(0,i.useCallback)((e=>{l(e),o(e)}),[o]);return(0,i.useEffect)((()=>{l(t)}),[t]),(0,_.jsxs)(Me.u,{className:"s__WXMChgDuJI9YMJ8BX3V1",visible:e,onClose:s,children:[(0,_.jsxs)(Me.u.Navigation,{children:[(0,_.jsx)(Ee.w.Title,{children:(0,_.jsx)(N.x,{className:"s__tzxfbOduyQuPAYCxmhtQ",type:P.y.Body1Semi,children:a("imagesGalleryTitle",{currentIndex:r+1,imagesCount:n.length})})}),(0,_.jsx)(Ee.w.LeftAccessory,{children:(0,_.jsx)("button",{className:"s__DjJ4gOPLfaRop1FRYXsN",onClick:d,children:(0,_.jsx)(Ce.I,{className:"s__7HoaKx4Vfn_KaWP4y4pt"})})})]}),(0,_.jsx)($e.Z,{className:"s__J7Alzm2C0WwemNGuCXwm",onSwipedDown:d,children:(0,_.jsx)(ze,{className:"s__et4Ff2iVL1tQWIZP9QSn",images:n,initialIndex:t,onAfterChange:u})}),c.description&&(0,_.jsx)(Re,{className:"s__UOKC57MF1Z4LKW0ZUmlT",description:c.description})]})};var qe=s(63119),Ze=s(5070),We={root:"s__F6N2Q_Y1bsjLLT2arVhY",wrapper:"s___KqMIqedCkWzlFbcPzFq",infoButton:"s__G0a_Ax4b0geF8xEkPhhl",customButton:"s__j7LWPgPHi8GJFWCLz5no",infoTooltipContainer:"s__PE1MN3Kg9_kMVXev8DPY",infoTooltip:"s__UZIsYQ81hqfyvusl56u3",tooltipContentIcon:"s__fv8UBr2YpmnqQNFY7I4A",imageHtmlText:"s__Thr8zX6MNOHND16idcby"};const Ge=({description:e,showTooltip:t,setShowTooltip:s,className:o})=>{const n=(0,i.useMemo)((()=>(0,_.jsx)("div",{className:We.infoTooltipContainer,children:(0,_.jsxs)("div",{className:We.infoTooltip,children:[(0,_.jsx)("span",{className:We.tooltipContentIcon,children:""}),(0,_.jsx)(S.Jv,{className:We.imageHtmlText,type:P.y.Body3Semi,children:e})]})})),[e]),a=(0,i.useCallback)((()=>{s(!t)}),[s,t]),r=(0,i.useCallback)((()=>{s(!1)}),[s]);return(0,_.jsx)("div",{className:m()(o,We.root),children:(0,_.jsx)("div",{className:We.wrapper,children:(0,_.jsx)(Ze.u,{placement:"bottom-start",width:"auto",visible:t,content:n,onClickOutside:r,touch:!0,interactive:!0,children:(0,_.jsx)("button",{className:m()(We.infoButton,We.customButton,We.imageInfoButton),onClick:a,children:(0,_.jsx)(qe.X,{})})})})})},Qe=({images:e,fullScreenPreview:t})=>{const{closeModal:s,galleryActivePage:n,isModalOpened:a,openModal:r,pinTitle:l,setGalleryActivePage:c,setShowTooltip:d,showTooltip:u}=(0,o.useUnit)({closeModal:we.inputs.closeModal,galleryActivePage:we.outputs.$galleryActivePage,isModalOpened:we.outputs.$isModalOpened,openModal:we.inputs.openModal,pinTitle:we.outputs.$title,setGalleryActivePage:we.inputs.setGalleryActivePage,setShowTooltip:we.inputs.setShowTooltip,showTooltip:we.outputs.$showTooltip}),{t:p}=(0,Q.useTranslation)("guides_place_details_service"),m=i.useMemo((()=>e.map((({url:e,description:t})=>({imageUrl:e,imageAlt:p("pinImageAlt",{place:l}),description:t})))),[e,l,p]),{description:h}=m[n];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"s__dkaowrABX9C7OOJgv6r7",onClick:t?r:void 0,children:[!t&&h&&(0,_.jsx)(Ge,{className:"s__KUa4Hl7wTgvXmyLTSAlB",setShowTooltip:d,showTooltip:u,description:h.expanded||h.text}),(0,_.jsx)(Te,{className:"s__Lt4HlDJRe_LiQAuRWPH1",images:m,ImageComponent:ge,changeActivePage:c,activePage:n})]}),t&&(0,_.jsx)(He,{isVisible:a,onClose:s,onAfterChange:c,initialIndex:n,images:m})]})};const Ye=({block:e})=>{const{emoji:t,text:s,header:i}=e;return(0,_.jsxs)(S.kJ,{icon:t.svg,className:"s__uPC5zQr0lbqvBwko7isL",children:[(0,_.jsx)(S.kJ.Header,{header:i}),(0,_.jsx)(S.kJ.Text,{text:s})]})};var Xe=s(31087),Ve=s(44904);const Je=(0,k.createEvent)({sid:"-y5hv3c"}),Ke=(0,k.createEvent)({sid:"z3hzms"});(0,k.sample)({and:[{clock:Je,source:{source:r.I.outputs.$trapSource},fn:({source:e},{poi:t,groupId:s})=>({poi:t.id,layer:s??null,openSource:e,guideId:null,trapSource:Xe.lX.POI,poiQueryOpenSource:Xe.ik.PLACE_DETAILS,openType:t.open_type??Xe.B8.MAP}),target:Ve.Y.inputs.open}],or:{sid:"m4xcy0"}}),(0,k.sample)({and:[{clock:Ke,source:{source:r.I.outputs.$trapSource},fn:({source:e},t)=>({layer:t,openSource:e,mapOpenSource:Xe.Oj.POI_CAROUSEL}),target:[Ve.Y.inputs.close,r.I.inputs.open]}],or:{sid:"mptjhq"}});const et={inputs:{poiClicked:Je,buttonClicked:Ke}},tt=({block:e})=>{const{t:t}=(0,Q.useTranslation)("guides_place_details_service"),{groups:s,poiClicked:n,buttonClicked:r}=(0,o.useUnit)({groups:a.mH.outputs.$tabs,poiClicked:et.inputs.poiClicked,buttonClicked:et.inputs.buttonClicked}),l=(0,i.useMemo)((()=>s?.find((t=>t.id===e.group_id))?.id??null),[e.group_id,s]),c=(0,i.useCallback)((()=>{r(l??null)}),[r,l]),d=(0,i.useCallback)((e=>n({poi:e,groupId:l})),[l,n]);return(0,_.jsxs)("div",{className:"s__yRR7AIkNbb5IxczVpzJl",children:[(0,_.jsxs)("div",{className:"s__vY5SG3uyjHrpyU9oflcG",children:[(0,_.jsx)(N.x,{type:P.y.Title4Bold,truncateMode:P.k.SingleLine,children:e.header}),(0,_.jsxs)(N.x,{className:"s__zYtqjznAqkekFawP92Fg",type:P.y.Body3Semi,onClick:c,children:[(0,_.jsx)(Y.r,{children:t("seeAllPlaces")}),(0,_.jsx)(E.i,{})]})]}),(0,_.jsx)(S.lr,{classNames:{images:"s__eBcrAZWHksd9WAib9Myw"},children:e.places.map((e=>(0,_.jsx)(S.d$,{testId:`poi-id-${e.id}`,title:e.name,url:e.image_url,titleTextType:P.y.Body2Regular,imageWidth:144,className:"s__uEMxHPa7dTMC3NNR1ptl",onClick:()=>d(e),icon:e.premium.badge,iconSize:S.Jh.LARGE,favoriteIcon:e.favorite?.is_favorite?e.favorite.icon.svg:void 0},e.id)))})]})},st=i.memo(tt);const it=({description:e})=>(0,_.jsx)("div",{className:"s___NpFBp9kEhNytZkcVrcb",children:(0,_.jsx)(N.x,{className:"s__hMck6W6_DS4yDvt86E8y",type:P.y.Body2Paragraph,children:e})});var ot=s(95628),nt=s(10924);const at=(0,k.createEvent)({sid:"-kp0wx"});(0,k.sample)({and:[{clock:at,source:{guideId:ot.R.outputs.$guideId,openSource:r.I.outputs.$trapSource},filter:(e,{openType:t})=>t===Xe.B8.POI||t===Xe.B8.MAP,fn:({guideId:e,openSource:t},{id:s})=>({poi:s,guideId:e,openSource:t,poiQueryOpenSource:Xe.ik.PLACE_DETAILS}),target:Ve.Y.inputs.open}],or:{sid:"-5qtz7q"}}),nt.I.inputs.createReporter({data:{category:"guide_poi",label:"places_list",action:"clicked"},payload:{poiAnalytics:C.A_.outputs.$poiAnalytics,userEvent:!0}})({clock:at,payload:({browserUrl:e},{payload:t})=>({...t.poiAnalytics,is_favorite:R.q.outputs.$isFavorite,browser_url:e})});const rt={inputs:{clicked:at}},lt=({block:{header:e,items:t}})=>{const s=(0,o.useUnit)(rt.inputs.clicked);return(0,_.jsxs)("div",{className:"s__h5ojyVYIQYZrslSsMzTD",children:[(0,_.jsx)(N.x,{className:"s___I2pFrAMOIcLFyawHPAs",type:P.y.Title4Bold,children:e}),t.map((e=>(0,i.createElement)(S.Dj,{...e,favoriteIcon:e.favorite?.is_favorite?e.favorite.icon.svg:void 0,isPaid:e.premium.availability===Xe.oY.CHECKOUT,className:"s___M2CDzEWAzgZDd2KcU9Q",key:e.id,onClick:()=>s({id:e.id,browserUrl:e.browser_url,openType:e.open_type}),withArrow:!0})))]})};var ct={item:"s__LeIiTegkVRCkqy79AZkg",icon:"s__LBsAX3kCySX0dOfHg20I"};const dt=({item:e,onClick:t})=>{const s=e.map_place.links.find((e=>"google"===e.type))?.link,i=s??L(e.map_place.coordinates);return(0,_.jsxs)("a",{className:ct.item,href:i,target:"_blank",rel:"noreferrer",onClick:t,children:[(0,_.jsx)("img",{className:ct.icon,src:e.icon.svg,alt:""}),(0,_.jsx)(N.x,{className:ct.text,type:P.y.Body1Regular,children:e.title})]})};const{forwardToAnalyticsWithDefaults:ut}=F.I.inputs,pt=(0,k.createEvent)({sid:"a4ar7r"});ut({clock:(0,k.sample)({and:[{clock:pt,source:{content_id:U.l.outputs.$pin.map((e=>e?.id??null)),trap_id:a.mH.outputs.$trapId},fn:({content_id:e,trap_id:t},s)=>({content_id:e,trap_id:t,place_id:s.id,place_title:s.title})}],or:{sid:"-mf4bfl"}}),data:{label:"district_places",action:"clicked"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})});const mt={inputs:{clicked:pt}},ht=({block:{header:e,items:t}})=>{const{clicked:s}=(0,o.useUnit)({clicked:mt.inputs.clicked});return(0,_.jsxs)("div",{className:"s__MVmEVk8cO_gJcoNGgSSX",children:[(0,_.jsx)(N.x,{className:"s__YPAYY5Q7Oa8gQVlEPa0A",type:P.y.Title4Bold,truncateMode:P.k.TwoLines,children:e}),(0,_.jsx)("ul",{className:"s__Sivrsl_0dMOnqK3MskJz",children:t.map((e=>(0,_.jsx)("li",{className:"s__vO0prgelrbybFnVDOWGu",children:(0,_.jsx)(dt,{item:e,onClick:()=>s(e)})},e.id)))})]})};var gt=s(92617);const _t=({place:e,onClick:t,openSource:s,testId:i})=>{const{t:o}=(0,Q.useTranslation)("guides_place_details_service"),n="external"===e.type,a=(0,gt.r)({link:n?e.link:null,link_v2:n&&e.link_v2||null,openSource:s});return(0,_.jsx)(S.d$,{testId:i,title:e.title,subtitle:e.subtitle,url:e.image_url,href:a,imageWidth:144,className:"s__cMex0AQMEZCqc7WZNKHb",onClick:t,content:({className:t})=>(0,_.jsxs)("div",{className:m()(t,"s__GHUiQPFUnkg8immsfcLy"),children:[(0,_.jsx)(N.x,{className:"s__gnL28T_qVfDcBbe3WNcy",type:P.y.CaptionRegular,truncateMode:P.k.SingleLine,children:e.title}),e.subtitle&&(0,_.jsx)(N.x,{type:P.y.Body2Regular,className:"s__6LeD1_TzxvyiS4hVjEAd",truncateMode:P.k.TwoLines,children:e.subtitle}),e.price&&(0,_.jsxs)(N.x,{className:"s__jOwtfUiiZQtzzXVMQ94v",type:P.y.Body1Semi,truncateMode:P.k.SingleLine,children:[`${o("hotels.priceFrom")}`," ",(0,_.jsx)(S.fE,{price:e.price.amount})]})]}),children:e.badge&&(0,_.jsxs)("div",{className:"s__LDTzZwPbArCk4VcJoUPH",style:{color:e.badge.style.text_color,backgroundColor:e.badge.style.background_color},children:[e.badge.icon?.svg&&(0,_.jsx)("img",{className:"s__Ce9wOOlhnxNA95doRUNU",alt:"",src:e.badge.icon.svg}),(0,_.jsx)(N.x,{type:P.y.Body3Semi,truncateMode:P.k.SingleLine,children:e.badge.text})]})})};var ft=s(87007),xt=s(94590);const{forwardToAnalyticsWithDefaults:yt}=F.I.inputs,vt=(0,k.createEvent)({sid:"-wsvqyf"}),bt=(0,k.createEvent)({sid:"-6xlnw4"}),jt=(0,k.combine)({and:[{isDistrictsTab:U.l.outputs.$isDistrictsGroup},({isDistrictsTab:e})=>e?ft.h0.district:ft.h0.poi],or:{sid:"8jxbkr"}});(0,k.sample)({and:[{clock:vt,source:{guideId:ot.R.outputs.$guideId,openSource:r.I.outputs.$trapSource},filter:(e,t)=>"place"===t.type,fn:({guideId:e,openSource:t},s)=>({poi:s.id,guideId:e,openSource:t,trapSource:Xe.lX.DISTRICT,poiQueryOpenSource:Xe.ik.PLACE_DETAILS}),target:Ve.Y.inputs.open}],or:{sid:"5wve8i"}}),(0,k.sample)({and:[{clock:vt,filter:e=>"external"===e.type,fn:e=>({search_hotel_link_v2:"link_v2"in e?e.link_v2??null:null,entrypoint:xt.H_.Guides}),target:ft.$o.inputs.hotelClicked}],or:{sid:"6hrks8"}}),(0,k.sample)({and:[{clock:vt,fn:e=>({hotel_id:e.id}),target:bt}],or:{sid:"6yt76f"}}),yt({clock:(0,k.sample)({and:[{clock:bt,source:{content_id:U.l.outputs.$pin.map((e=>e?.id??null)),trap_id:a.mH.outputs.$trapId},fn:({content_id:e,trap_id:t},{hotel_id:s})=>({content_id:e,trap_id:t,hotel_id:s})}],or:{sid:"-aai0"}}),data:{label:"hotels",action:"clicked"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})});const kt={inputs:{clicked:vt},outputs:{$hotelOpenSource:jt}},wt=({block:e})=>{const{isMobile:t,clicked:s,hotelOpenSource:i}=(0,o.useUnit)({isMobile:d.l.outputs.$isMobile,clicked:kt.inputs.clicked,hotelOpenSource:kt.outputs.$hotelOpenSource});return(0,_.jsxs)("div",{className:"s__hRLhu04qw1TG1uYGFNBT",children:[(0,_.jsx)(N.x,{className:"s__FryW2kf_zk121OICowcP",type:P.y.Title4Bold,truncateMode:P.k.SingleLine,children:e.header}),(0,_.jsx)(S.lr,{classNames:{images:"s__rEatAfvieThYRFqQc6fj",root:"s__uf_W9pYSbF5vAeDsioge",navigation:"s__Rl9nqiFfAufut6iXExWK"},itemWidth:144,carousel:{rightGap:10},visibleItems:2,showNavBar:!t&&e.items.length>2,children:e.items.map((e=>(0,_.jsx)(_t,{testId:`poi-id-${e.id}`,place:e,openSource:i,onClick:()=>s(e)},e.id)))})]})};var Ct="s__D1LdMnYjjGJ_mz4MB8NP",St=s(1156),Nt=s(39535);const Pt=({title:e,is_primary:t,icon:s,href:i,target:o="_blank",onClick:n})=>(0,_.jsx)(St.z,{size:Nt.qE.M,priority:t?Nt.Ji.Primary:Nt.Ji.Secondary,onClick:n,target:o,referrerPolicy:"no-referrer",href:i,children:(0,_.jsxs)("div",{className:"s__FZGDo5wx4SiD1_U5cTkC",children:[s&&(0,_.jsx)("img",{className:"s__KuiZo5uP8b3QTDrqC4zX",src:s.svg,alt:""}),e]})});var Tt=s.p+"260d0d3a32552425c671.svg",It=s(5500),At=s(47420),Mt=s(63762),Et=s(76101),$t=s(33350),Dt=s(82203),Bt=s(87722),Lt=s(70422),Ot=s(86117);const{directionScreen:zt}=Et.A.outputs,{countryScreen:Ft}=$t.$.outputs,{updateAnalyticsDirectionSource:Ut}=At.i.inputs,Rt=[Xe.Ur.ZERO_STATE_POI_BIG_CARD,Xe.Ur.ZERO_STATE_POI_COMPILATION,Xe.Ur.ZERO_STATE_CITY_POI_COLLECTION],Ht=(0,k.createEvent)({sid:"mgaf9l"}),qt=(0,k.createStore)(!1,{sid:"-w3m2h2"}),Zt=(0,k.createStore)(!1,{sid:"-ozboee"}),Wt=(0,k.createStore)(null,{sid:"-hfm0j9"}),Gt=(0,k.combine)({and:[{actionButtons:C.A_.outputs.$actionButtons,isButtonVisible:Zt}],or:{sid:"-ig8snp"}}).map((({actionButtons:e,isButtonVisible:t})=>e&&t?e.find((e=>"discover"===e.type))?.payload:null));(0,k.sample)({and:[{clock:Ve.Y.inputs.open,fn:({openSource:e})=>Rt.some((t=>t===e)),target:qt}],or:{sid:"q40yk8"}}),(0,k.sample)({and:[{clock:Ve.Y.inputs.open,source:{origin:At.i.outputs.$origin,isSharingPage:Lt.N.outputs.$isSharingPage},fn:({origin:e,isSharingPage:t},{openSource:s,guideId:i})=>e?.iata!==i&&!!t&&[...Rt,Xe.Ur.DEEPLINK].some((e=>e===s)),target:Zt}],or:{sid:"qivekz"}});const Qt=(0,k.sample)({and:[{clock:Ht,source:{shouldFillAviaForm:qt,direction:Wt,isArkId:ot.R.outputs.$isArkId,placeId:U.l.outputs.$poi},filter:({shouldFillAviaForm:e,isArkId:t})=>e&&!t,fn:({direction:e,placeId:t},{cityMapTitle:s})=>({iata:e,name:s??"",placeId:t})}],or:{sid:"9z8vho"}}),{openDirectionScreen:Yt,openCountryScreen:Xt}=(0,k.split)({and:[Qt,{openDirectionScreen:({iata:e})=>(0,Bt.Mz)(e??""),openCountryScreen:({iata:e})=>(0,Bt.eG)(e??"")}],or:{sid:"hp8swm"}});(0,k.sample)({and:[{clock:Yt,filter:({placeId:e})=>null!==e,fn:({placeId:e})=>e,target:Ot.directionScreenFeedService.inputs.setPlaceSource}],or:{sid:"-wd4lnn"}}),(0,k.sample)({and:[{clock:Ht,fn:()=>!0,target:r.I.inputs.close}],or:{sid:"-vwmrut"}}),(0,k.sample)({and:[{clock:Ht,fn:()=>Dt.yh.TrapPoi,target:Ut}],or:{sid:"-vtc0an"}}),(0,k.sample)({and:[{clock:ot.R.outputs.$guideId,filter:Boolean,target:Wt}],or:{sid:"-vehk9w"}}),(0,k.sample)({and:[{clock:Yt,fn:({iata:e,name:t})=>({destination:{name:t??"",iata:e??"",cityIata:e??"",type:It.A.City}}),target:zt.open}],or:{sid:"-uzn495"}}),(0,k.sample)({and:[{clock:Xt,fn:({iata:e,name:t})=>({country:{name:t??"",iata:e??"",countryIata:e??"",type:It.A.Country}}),target:Ft.open}],or:{sid:"-ugy42v"}}),(0,k.sample)({and:[{clock:Ht,source:{isArkId:ot.R.outputs.$isArkId,arkId:ot.R.outputs.$guideId},filter:({isArkId:e,arkId:t})=>e&&Boolean(t),fn:({arkId:e},{cityMapTitle:t})=>({destination:{iata:e,name:t,type:It.A.NationalPark}}),target:Mt.n.outputs.nationalParkScreen.open}],or:{sid:"-ty93wl"}});const Vt={inputs:{discoverButtonClicked:Ht},outputs:{$isButtonVisible:Zt,$discoverButton:Gt},internals:{$isPoiOpenedFromMainScreen:qt}};var Jt=s(33724);const Kt=(0,k.createEvent)({sid:"65d9v9"}),es=C.A_.outputs.$actionButtons.map((e=>e?e.find((e=>"book_hotel"===e.type))?.payload:null));(0,k.sample)({and:[{clock:Kt,source:{bookHotelButton:es},filter:({bookHotelButton:e})=>Boolean(e),fn:({bookHotelButton:e})=>({params:{locationId:e.hotel_id,locationType:It.A.Hotel,gateId:e.gate_id,checkin:e.checkin,checkout:e.checkout,adults:e.adults,children:e.children,source:xt.H_.Guides},navigationType:"openTab"}),target:Jt.k.inputs.openHotelPage}],or:{sid:"-cz8px6"}});const ts={inputs:{openHotel:Kt},outputs:{$bookHotelButton:es}};var ss=s(20611),is=s(77802);const os=(0,k.createDomain)({sid:"as6zfj"}).createEvent({sid:"-b05pcy"});(0,k.sample)({and:[{clock:os,source:{origin:At.i.outputs.$origin},filter:({origin:e})=>Boolean(e),fn:({origin:e})=>`/?${is.HN}=${e.iata}#hotels`,target:ss.D.inputs.openNewTab}],or:{sid:"82fnyz"}});const ns={inputs:{clicked:os}};var as=s(15863),rs=s(88484),ls=s(58415);const{$pin:cs,$group:ds}=U.l.outputs,{open:us}=r.I.inputs,{$mapboxInstance:ps}=rs.X.outputs,{easeToFx:ms}=rs.X.inputs,{$value:hs}=ls.Lw.outputs,{toggle:gs}=ls.Lw.inputs,_s=(0,k.createEvent)({sid:"rlgnke"}),fs=cs.map((e=>e?.coordinates??null));(0,k.sample)({and:[{clock:_s,source:{isDistrictsTab:ds.map((e=>e?.type===a.OR))},filter:(e,t)=>Boolean(t),fn:({isDistrictsTab:e},t)=>({openSource:Xe.Ur.DEEPLINK,mapOpenSource:e?Xe.Oj.DISTRICT_CTA:Xe.Oj.POI_CTA,layer:t}),target:us}],or:{sid:"38iiwx"}});const xs=(0,k.withFactory)({sid:"-8dci0u",fn:()=>(0,as.CJ)({clock:_s,until:ps.map(Boolean)})});(0,k.sample)({and:[{clock:xs,source:{coordinates:fs},filter:({coordinates:e},t)=>Boolean(t&&e),fn:({coordinates:e})=>({coordinates:e}),target:ms}],or:{sid:"475kao"}}),(0,k.sample)({and:[{clock:_s,target:Ve.Y.inputs.close}],or:{sid:"4n3li5"}}),(0,k.sample)({and:[{clock:_s,source:{viewModeValue:hs},filter:({viewModeValue:e})=>e===Xe.wO.LIST,target:gs}],or:{sid:"51e8xj"}});const ys={inputs:{clicked:_s}},{createReporter:vs}=nt.I.inputs,{$poiAnalytics:bs}=C.A_.outputs,js=(0,k.createEvent)({sid:"bzxt80"});vs({data:{category:"guide_poi",label:"action_button",action:"clicked"},payload:{poiAnalytics:bs,userEvent:!0}})({clock:js,payload:(e,{payload:t})=>({...t.poiAnalytics,button_type:e})});const ks={inputs:{sendCTAButtonEvent:js}},ws=({actionButtons:e,isScrolledToBottom:t})=>{const{poiData:s,isNewCtaButtonsEnabled:n,discoverButton:a,bookHotelButton:r,cityMapTitle:l,onDiscoverButtonClick:d,onShowOnMapButtonClick:u,onShowAllHotelsButtonClick:p,openHotel:h,sendCTAButtonEvent:g}=(0,o.useUnit)({poiData:C.A_.outputs.$data,onDiscoverButtonClick:Vt.inputs.discoverButtonClicked,onShowOnMapButtonClick:ys.inputs.clicked,onShowAllHotelsButtonClick:ns.inputs.clicked,isNewCtaButtonsEnabled:c.qF.outputs.$isNewCtaButtonsEnabled,discoverButton:Vt.outputs.$discoverButton,bookHotelButton:ts.outputs.$bookHotelButton,openHotel:ts.inputs.openHotel,cityMapTitle:C.A_.outputs.$cityMapTitle,sendCTAButtonEvent:ks.inputs.sendCTAButtonEvent}),{t:f}=(0,Q.useTranslation)("guides_place_details_service");if(!n){if(a)return(0,_.jsx)("div",{className:Ct,children:(0,_.jsx)(Pt,{is_primary:!0,title:a.title,icon:{svg:Tt},onClick:()=>{g("discover"),d({cityMapTitle:l})}})});if(r)return(0,_.jsx)("div",{className:Ct,children:(0,_.jsx)(Pt,{...r,is_primary:!0,title:f("hotels.book"),onClick:()=>{g("book_hotel"),h()}})})}return(0,_.jsx)("div",{className:m()("s__JT7DUuTqkbQGpKYWFPhw",t&&"s__C3Mw1QB5uL2yLB2Z2P7D"),children:e.map((e=>{switch(e.type){case"discover":return(0,i.createElement)(Pt,{...e.payload,key:e.type,onClick:()=>{g(e.type),d({cityMapTitle:l})}});case"book_hotel":return(0,_.jsx)(Pt,{...e.payload,onClick:()=>{g(e.type),h()}},e.type);case"book_hotel_external":return(0,_.jsx)(Pt,{...e.payload,href:e.payload.url,onClick:()=>g(e.type)},e.type);case"main":return(0,_.jsx)(Pt,{...e.payload,target:"_self",href:"/guides?source=poi_details",onClick:()=>g(e.type)},e.type);case"show_in_map":return(0,_.jsx)(Pt,{...e.payload,onClick:()=>{g(e.type),u(s?.group_id??null)}},e.type);case"all_hotels":return(0,_.jsx)(Pt,{...e.payload,onClick:()=>{g(e.type),p()}},e.type);default:return null}}))})},Cs=(e,t,s)=>{switch(e.type){case"title":return(0,_.jsx)(re,{title:e.block.title,isHotel:t});case"description":return(0,_.jsx)(te,{text:e.block.description});case"restrictions":return(0,_.jsx)(se,{restriction:e.block.restriction});case"advice":return(0,_.jsx)(ee,{block:e.block});case"tags":return(0,_.jsx)(ae,{block:e.block});case"buttons":return(0,_.jsx)(G,{block:e});case"bullets":return(0,_.jsx)(S.Z9,{block:e.block,className:"s__TiNtSNenxmeuTxyXS7Nf"});case"poi_carousel":return(0,_.jsx)(st,{block:e.block});case"bullet_with_header":return(0,_.jsx)(Ye,{block:e.block.bullet});case"image_gallery":return(0,_.jsx)(Qe,{fullScreenPreview:s,images:e.block.images});case"landmark":return(0,_.jsx)(it,{description:e.block.landmark});case"places_list":return(0,_.jsx)(lt,{block:e.block});case"points_list":return(0,_.jsx)(ht,{block:e.block});case"places_carousel":return(0,_.jsx)(wt,{block:e.block});default:return null}},Ss=e=>{const{onRefetchClick:t,isMobile:s,data:o,isScrolledToBottom:n,isHotelsTab:r=!1,classNames:l,fullScreenPreview:c=!1,...d}=e,u=(0,i.useMemo)((()=>o?.blocks.filter((e=>"poi_carousel"!==e.type||s))),[o,s]),p=(0,i.useMemo)((()=>o?.action_buttons?.filter((e=>e.type!==a.jQ))??null),[o]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(he,{handleRefetchClick:t,showDetailsInfo:Boolean(o),isMobile:s,className:l?.container,...d,children:u&&(0,_.jsx)("div",{"data-test-id":"place-details-content",className:m()(l?.content,"s__P3JhjkzbMBRZzVTvrKHD"),children:u.map(((e,t)=>(0,_.jsx)("div",{"data-test-id":B(e),className:m()(D(e)&&"s__A1abI0bYHZdU85vUVkr7","image_gallery"===e.type&&(l?.imageGallery??"s__Y2cQbqPFxApE50he6QNv")),children:Cs(e,r,c)},t)))})}),p&&p.length>0&&(0,_.jsx)(ws,{actionButtons:p,isScrolledToBottom:n})]})},Ns=(0,k.withFactory)({sid:"cljjlu",fn:()=>(0,w.SC)({view:Ss,bind:{isError:C.A_.outputs.$error.map(Boolean),isLoading:C.A_.outputs.$isLoading,onRefetchClick:C.A_.inputs.fetch,isMobile:d.l.outputs.$isMobile,data:C.A_.outputs.$data}})});var Ps=s(47047),Ts=s(72675),Is=s(80094),As=s(78194),Ms=s(7425);const{$isMobile:Es}=d.l.outputs,{forwardToAnalyticsWithDefaults:$s}=F.I.inputs,{notify:Ds}=Is.B.inputs,{translated:Bs}=As.J.outputs,{$enabled:Ls,turnOn:Os,turnOff:zs}=(0,k.withFactory)({sid:"za8le3",fn:()=>(0,Ps.d)(as.qs,!1)}),Fs=(0,k.createEvent)({sid:"-u0obio"}),Us=(0,k.createStore)("bottom",{sid:"-1pfawe"}),Rs=(0,k.createEvent)({sid:"-t6eqpc"}),Hs=(0,k.createEvent)({sid:"-tlk82h"}),qs=(0,k.createEffect)((e=>navigator.clipboard.writeText(e)),{sid:"jo34z1"}),Zs=qs.done;(0,k.sample)({and:[{clock:Fs,target:qs}],or:{sid:"onj22t"}}),(0,k.sample)({and:[{clock:Rs,target:Os}],or:{sid:"p1tpi7"}}),(0,k.sample)({and:[{clock:Hs,target:zs}],or:{sid:"p4koh0"}}),(0,k.sample)({and:[{clock:Rs,fn:({placeId:e,poiQueryOpenSource:t,openSource:s})=>({poi:e,openSource:s,poiQueryOpenSource:t,withoutMap:!0}),target:Ms.C.inputs.open}],or:{sid:"pivbwe"}}),(0,k.sample)({and:[{clock:Hs,target:Ms.C.inputs.close}],or:{sid:"q0gqvy"}}),(0,k.sample)({and:[{clock:Ms.C.inputs.open,filter:Es,target:Os}],or:{sid:"q37pur"}}),(0,k.sample)({and:[{clock:Ms.C.inputs.close,filter:Es,target:zs}],or:{sid:"qi25vi"}}),(0,k.sample)({and:[{clock:Hs,filter:Lt.N.outputs.$isSharingPage,target:is.aj.inputs.removePoiParam}],or:{sid:"qwwlw9"}}),$s({clock:(0,k.sample)({and:[{clock:Zs,source:{source:r.I.outputs.$trapSource,poiAnalytics:C.A_.outputs.$poiAnalytics},fn:({poiAnalytics:e,source:t})=>({...e,sharing_type:"link",source:t})}],or:{sid:"snhtex"}}),data:{label:"content_sharing",action:"clicked"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})}),Is.B.inputs.notificationsViewContext({overrides:{position:Us},setupOn:Zs,dropOn:Ve.Y.inputs.close}),Ds({clock:Zs,id:"travel-map-copy-link",icon:"success",message:Bs("widget_travel_map:linkCopied"),autoClose:!0});const Ws=(0,k.withFactory)({sid:"-ov3l51",fn:()=>(0,as.CJ)({clock:Ve.Y.inputs.open,until:(0,k.withFactory)({sid:"5h9cvf",fn:()=>(0,Ts.x)(U.l.outputs.$poi,r.I.outputs.$poiQueryOpenSource)})})});(0,k.sample)({and:[{clock:Ws,fn:({minPrice:e})=>({minPrice:e??null}),target:C.A_.inputs.fetch}],or:{sid:"8mk6j5"}});var Gs=s(46531),Qs=s(51389);const Ys=e=>{const{isPopupVisible:t,onClose:s,shareLink:o,onCopyClick:n,showButton:a,isFavorite:r,isUserChangedFavorite:l,addToFavorites:c,removeFromFavorites:d,isError:u,isLoading:p,onRefetchClick:m,isMobile:h,data:g}=e,{setScrollElement:f,isScrolledToBottom:x}=(0,Qs.IN)();(0,Qs.cF)(!0);const y=i.useCallback((()=>{o&&n(o)}),[o,n]);return(0,_.jsx)(Gs.G,{className:"s__CXQ6zlgGdZ2A2Dl5gqAL",width:480,visible:t,noHeader:!0,theme:"gray",children:(0,_.jsxs)("div",{ref:f,className:"s__yTrRaRkhGh62jCY2iAue","body-scroll-lock-ignore":"",children:[(0,_.jsxs)(j,{children:[(0,_.jsxs)(j.LeftSide,{children:[(0,_.jsx)(j.ShareButton,{onClick:y}),(0,_.jsx)(j.FavoriteButton,{showButton:a,isFavorite:r,enableAnimation:l||!r,onClick:r?d:c})]}),(0,_.jsx)(j.RightSide,{children:(0,_.jsx)(j.CloseButton,{onClick:s})})]}),(0,_.jsx)(Ss,{classNames:{imageGallery:"s__xgdgF4zZ05M9EVNEky8K",content:"s__a_HneETY9K2ITdEdF_SR"},data:g,isError:u,isLoading:p,onRefetchClick:m,isMobile:h,isScrolledToBottom:x,fullScreenPreview:!0})]})})},Xs=(0,k.withFactory)({sid:"ksf5c0",fn:()=>(0,w.SC)({view:Ys,bind:{isError:C.A_.outputs.$error.map(Boolean),isLoading:C.A_.outputs.$isLoading,onRefetchClick:C.A_.inputs.fetch,isMobile:d.l.outputs.$isMobile,data:C.A_.outputs.$data,isPopupVisible:Ls,onClose:Hs,shareLink:C.A_.outputs.$shareLink,onCopyClick:Fs,addToFavorites:R.q.inputs.addToFavorites,removeFromFavorites:R.q.inputs.removeFromFavorites,showButton:R.q.outputs.$showButton,isFavorite:R.q.outputs.$isFavorite,isUserChangedFavorite:R.q.outputs.$isUserChangedFavorite}})}),Vs=(0,u.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/place_details/index.ts",api:{containers:{PlaceDetails:Ns,PlaceDetailsPopup:Xs,TopControls:j},inputs:{openPlaceDetailsPopup:Rs,closePlaceDetailsPopup:Hs,contentSharingClicked:Fs}}});var Js=s(61079);const{$enabled:Ks,turnOn:ei,turnOff:ti}=(0,k.withFactory)({sid:"am57k6",fn:()=>(0,Ps.d)(as.qs,!1)}),si=U.l.outputs.$poi.map((e=>Boolean(e))),ii=(0,k.combine)({and:[si,Ks,(e,t)=>!e&&!t],or:{sid:"-9k85h"}}),oi=(0,k.combine)({and:[Ks,si,(e,t)=>!t&&e],or:{sid:"f39yq8"}});(0,k.sample)({and:[{clock:r.I.inputs.close,target:ti}],or:{sid:"77pj14"}});const ni={showPlacesListView:ei,hidePlacesListView:ti},ai={$shouldShowPlacesListView:oi,$layerTabsOpened:ii,$placeDetailsOpened:si},ri=(0,u.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/travel_map_modal_panel_views/index.ts",api:{inputs:ni,outputs:ai}});var li=s(6328),ci=s(99491),di=s(97405),ui=s(69706),pi=s(99935),mi=s(59700),hi=s(90254),gi=s(26074);const _i="guides-map",fi=()=>{const e=(0,n.Sx)(),t=(0,o.useUnit)(rs.X.inputs.setMapboxInstance),s=e[_i];return(0,i.useEffect)((()=>(s&&t(s.getMap()),()=>{t(null)})),[s,t]),s};var xi=s(6158),yi=s.n(xi),vi={mapContainer:"s__lS8UXS8pkzcERcmDF5q0",mapContainerSkeleton:"s__D2B3iRhltxQpfm9acHOw",mapLoading:"s__SxjK9gxNNuDy2bkjiwFh",mapbox:"s__pf3RLLVAfiJtrSCBDAxo",paidContent:"s__MoRAuBFCpf5Xa0ye28Rv",districtsMapbox:"s__gwsT2Xf2OJg0ppSXbfr7",mapBoxLogo:"s__jMDJ1_MyJPUQ__YQj4Mf"};s(26699);const bi=(0,k.createEvent)({sid:"jkdpml"}),ji={setExternalPins:bi},ki={$externalPins:(0,k.restore)(bi,null,{sid:"-rxnkzo"})};(0,k.sample)({and:[{source:r.I.inputs.open,fn:({externalPins:e})=>e||null,target:bi}],or:{sid:"-5iq882"}});const wi=(0,u.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/map_external_pins/index.ts",api:{inputs:ji,outputs:ki}});var Ci=s(3202);const Si=e=>!!(e=>"premium"in e)(e)&&e.premium.availability===Xe.oY.CHECKOUT;let Ni;!function(e){e[e.Hovered=70]="Hovered",e[e.Selected=60]="Selected",e[e.Promo=55]="Promo",e[e.Large=50]="Large",e[e.Default=40]="Default",e[e.Small=30]="Small",e[e.Available=20]="Available",e[e.UserLocation=500]="UserLocation",e[e.Others=10]="Others"}(Ni||(Ni={}));const Pi=({isHovered:e,isSelected:t,type:s,isAvailable:i,isPromoPin:o})=>e?Ni.Hovered:t?Ni.Selected:o?Ni.Promo:s===Ci.B.Large?Ni.Large:s===Ci.B.Medium?Ni.Default:s===Ci.B.Small?Ni.Small:i?Ni.Available:Ni.Others,Ti=e=>e.type===Xe.AS.WALK,Ii=e=>e.type===Xe.AS.EXTERNAL_URL||e.type===Xe.AS.WALK,Ai=(e,t)=>t===a.NT;var Mi=s(62221),Ei=s(73806);const{DistrictPin:$i}=Ei.qu.containers,Di=({pin:e,isHovered:t,onPinClick:s,isSelected:a})=>{const{setSize:r,setHoveredDistrictPinId:l,isMobile:c,districtOnMapClicked:u}=(0,o.useUnit)({setSize:hi.travelMapPublicApi.mapDistrictPins.inputs.setDistrictPinSize,setHoveredDistrictPinId:hi.travelMapPublicApi.selectedPlace.inputs.setHoveredDistrictPinId,isMobile:d.l.outputs.$isMobile,districtOnMapClicked:hi.travelMapPublicApi.analyticsModel.inputs.districtOnMapClicked}),{ref:p,height:m,width:h,isAlreadyRendered:g}=(0,Mi.y)(),f=e.displayType===Ei.ZF.PIN?-m/2:0,x=c?Ei.SR:Ei.ai;return(0,i.useEffect)((()=>{g&&r({type:e.displayType,id:e.id,width:h+x,height:m+x})}),[h,m,g,e.id,e.displayType,r,x]),(0,_.jsx)(n.Jx,{style:{zIndex:(0,k.withFactory)({sid:"yfkq8r",fn:()=>(0,Ei.wY)(t,e.displayType)}),pointerEvents:"auto"},latitude:e.controlledCoordinates.latitude,longitude:e.controlledCoordinates.longitude,offset:[0,f],children:(0,_.jsx)("div",{ref:p,onClick:t=>{t.stopPropagation(),s(e),u(e.name)},onMouseEnter:()=>{l(e.id)},onMouseLeave:()=>{l(null)},"data-test-id":`pin-marker-id-${e.id}`,children:(0,_.jsx)($i,{pin:e,isHovered:t,isSelected:a})})})},Bi=(0,i.memo)(Di);var Li,Oi=s(89421),zi={root:"s__GTtXuiZEwtfwPjH86zY2",arrow:"s__VZ1thb7URl0cG3pAAke0",anchor:"s__FcWY5xOIRo097V_qBOdQ",bottom:"s__dquZMt9I1kD_WKOUUw5r",left:"s__nJQHnmtweB2opsa_zYF6",right:"s__j5EfQ6h1zn8MIGEw25nQ",top:"s__wu2nvG2KsEco0KkyzxDx",none:"s__K8P9j261M4JsTsdSW52e"};function Fi(){return Fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},Fi.apply(this,arguments)}var Ui,Ri=function(e){return i.createElement("svg",Fi({width:14,height:8,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Li||(Li=i.createElement("path",{d:"M7 8l6.293-6.293c.63-.63.184-1.707-.707-1.707H1.414C.524 0 .077 1.077.707 1.707L7 8z",fill:"#fff"})))};function Hi(){return Hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},Hi.apply(this,arguments)}var qi=function(e){return i.createElement("svg",Hi({width:10,height:6,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Ui||(Ui=i.createElement("path",{d:"M5 6L.707 1.707C.077 1.077.523 0 1.414 0h7.172c.89 0 1.337 1.077.707 1.707L5 6z",fill:"#fff"})))};const Zi=({pin:e,isHovered:t,isSelected:s})=>{const{isMobile:i=!1,isNight:n}=(0,o.useUnit)({isMobile:d.l.outputs.$isMobile,isNight:Oi.H.outputs.$isNight}),{displayType:a,pin_colors:r}=e,l=(0,k.withFactory)({sid:"-x9sa4i",fn:()=>(0,Ei.v6)(r,t,s,n)}),c=i?qi:Ri;return(0,_.jsxs)("div",{className:m()(zi.root,zi.arrow),style:{border:`1px solid ${l}`},children:[(0,_.jsx)(c,{className:m()(zi.anchor,zi[a]),style:{fill:l}}),(0,_.jsx)(N.x,{className:zi.text,type:P.y.CaptionSemi,mobileType:P.y.CaptionSemi,truncateMode:P.k.SingleLine,children:e.name})]})},Wi=(0,i.memo)(Zi),Gi=({pin:e,onPinClick:t,isHovered:s,isSelected:a})=>{const{setSize:r,setHoveredDistrictPinId:l}=(0,o.useUnit)({setSize:hi.travelMapPublicApi.mapDistrictPins.inputs.setDistrictArrowSize,setHoveredDistrictPinId:hi.travelMapPublicApi.selectedPlace.inputs.setHoveredDistrictPinId}),{ref:c,height:d,width:u,isAlreadyRendered:p}=(0,Mi.y)();return(0,i.useEffect)((()=>{p&&r({id:e.id,width:u+1,height:d+1})}),[u,d,p,e.id,e.type,r]),(0,_.jsx)(n.Jx,{style:{zIndex:(0,k.withFactory)({sid:"-k7htiw",fn:()=>(0,Ei.wY)(s)}),pointerEvents:"auto"},latitude:e.controlledCoordinates.latitude,longitude:e.controlledCoordinates.longitude,offset:[0,0],children:(0,_.jsx)("div",{ref:c,onClick:s=>{s.stopPropagation(),t(e)},onMouseEnter:()=>{l(e.id)},onMouseLeave:()=>{l(null)},"data-test-id":`pin-marker-id-${e.id}`,children:(0,_.jsx)(Wi,{pin:e,isHovered:s,isSelected:a})})})},Qi=(0,i.memo)(Gi);var Yi=s(2885);const Xi=e=>(0,_.jsx)(di.fw,{name:"fade",in:!0,appear:!0,children:(0,_.jsx)("div",{"data-test-id":e.dataTestId||"pin-marker",className:m()("s__Df3mg8nB9Cm9fbgGiF0k",e.className),onMouseEnter:()=>{e.onMouseEnter&&e.onMouseEnter(e.pin.id)},onMouseLeave:()=>{e.onMouseLeave&&e.onMouseLeave(e.pin.id)},onClick:()=>{e.onClick&&e.onClick(e.pin)},style:e.style,children:e.children})});var Vi;function Ji(){return Ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},Ji.apply(this,arguments)}var Ki=function(e){return i.createElement("svg",Ji({width:15,height:5,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Vi||(Vi=i.createElement("path",{d:"M.5 0c1.488 0 2.915.758 3.968 2.106l1.71 2.192c.73.936 1.914.936 2.645 0l1.71-2.192C11.584.758 13.011 0 14.5 0H.5z"})))};const eo=e=>{const t=(0,o.useUnit)(d.l.outputs.$isMobile);return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(Xi,{...e,className:m()("s__vAD1BZEc3mzlT3i0qTFM",!t&&e.selected&&"s__cqO0_hTOFgfctlslxfeS",e.className,e.borderColor&&"s__fTgDIMJOMczJ8f9UKn3w"),children:[(0,_.jsx)("img",{className:"s__hQFCAkHzvPNEXd_FjzwJ",src:e.pin.icon.svg,alt:e.pin.name}),e.borderColor&&(0,_.jsx)(Ki,{className:"s__P9uhQvk075FaTge0i2Le",style:{filter:`drop-shadow(0px ${t?3:4}px 0px ${e.borderColor})`}})]})})},to=i.memo(eo);const so=e=>{const{isMobile:t=!1,resetPlaceAlert:s}=(0,o.useUnit)({isMobile:d.l.outputs.$isMobile,resetPlaceAlert:U.l.inputs.resetPlaceAlert});return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(Xi,{...e,className:m()("s__gCplN7TNAq2JQDlbj5i4",!e.selected&&"s__UG33jv1gEX7RMLADeJ0B",e.className),children:[(0,_.jsxs)("div",{className:"s__hAXsQaAt92vefwBWUtiR",children:[(0,_.jsx)("img",{className:"s__GQqZ6ZZaFB3PDEr_QxbC",src:e.pin.icon.svg,alt:e.pin.name}),(0,_.jsx)(y.P,{className:"s__p2aK4fwknmK_xXHgp1cL",onClick:e=>{e.stopPropagation(),s()},size:"large"})]}),(0,_.jsxs)("article",{className:"s__Fjyfa29wtjskozzWMSXd",children:[(0,_.jsx)(N.x,{type:P.y.Body1Semi,className:"s__ftfMgbNzdFXjZNi5xJPK",children:e.pin.name}),(0,_.jsx)(S.Jv,{type:P.y.Body3Paragraph,children:e.pin.description})]}),e.borderColor&&(0,_.jsx)(Ki,{className:"s__QlfVrD2Tqj1oWF74nZQD",style:{filter:`drop-shadow(0px ${t?3:4}px 0px ${e.borderColor})`}})]})})},io=i.memo(so);const oo=({isVisible:e,pin:t})=>{const s=(0,o.useUnit)(U.l.inputs.resetPlaceAlert);return(0,_.jsxs)(Gs.G,{visible:e,onClose:s,stickToBottomOnMobile:!0,children:[(0,_.jsxs)(Gs.G.Navigation,{customHeight:56,children:[(0,_.jsx)(Ee.w.LeftAccessory,{children:(0,_.jsx)("img",{className:"s__uNsNqvtNugPchLiAiwEN",src:t.icon.svg,alt:t.name})}),(0,_.jsx)(Ee.w.RightAccessory,{children:(0,_.jsx)(y.P,{className:"s__zfXZenWPHcVyOsK3MODt",onClick:s})})]}),(0,_.jsxs)("article",{className:"s__QgZYgwSBWn3hVK31H2qH",children:[(0,_.jsx)(N.x,{type:P.y.Title4Bold,className:"s__qshp8i_6GHUV5FmHzZSA",children:t.name}),(0,_.jsx)(S.Jv,{type:P.y.Body1Paragraph,children:t.description})]})]})},no=({pin:e,isHovered:t,isSelected:s,onPinClick:i})=>{const{ref:a,height:r}=(0,Mi.y)(),{ref:l,height:c}=(0,Mi.y)(),u=-r/2,p=-c/2,{isMobile:m=!1,isNight:h}=(0,o.useUnit)({isMobile:d.l.outputs.$isMobile,isNight:Oi.H.outputs.$isNight}),g=(0,k.withFactory)({sid:"lwcvxz",fn:()=>(0,Ei.v6)(e.pin_colors,t,s,h)}),f={border:`1px solid ${g}`,boxShadow:`0px ${m?Ei.SR:Ei.ai}px 0px ${g}`};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(n.Jx,{style:{zIndex:Pi({isSelected:s,isHovered:t,isPromoPin:!1,isAvailable:e.premium.availability===Yi.oY.AVAILABLE}),pointerEvents:!m&&s?"none":"auto"},latitude:e.coordinates.latitude,longitude:e.coordinates.longitude,offset:[0,u],children:(0,_.jsx)("div",{ref:a,children:(0,_.jsx)(to,{pin:e,selected:s,onClick:i,borderColor:g,style:f})})}),m&&(0,_.jsx)(oo,{isVisible:s,pin:e}),!m&&(0,_.jsx)(n.Jx,{style:{zIndex:Pi({isSelected:s,isHovered:t,isPromoPin:!1,isAvailable:e.premium.availability===Yi.oY.AVAILABLE}),pointerEvents:s?"auto":"none"},latitude:e.coordinates.latitude,longitude:e.coordinates.longitude,offset:[0,p],children:(0,_.jsx)("div",{ref:l,children:(0,_.jsx)(io,{pin:e,selected:s,onClick:i,borderColor:g,style:f})})})]})};let ao;!function(e){e.S="S",e.M="M"}(ao||(ao={}));const ro={[ie.OD.S]:5,[ie.OD.XS]:4};function lo({badge:e,isVisible:t,isDefaultPin:s,isLargePin:o}){const n=o&&ie.OD.S||ie.OD.XS,a=(0,i.useMemo)((()=>{const t=e.icon?2:0;return e.text.length+t>ro[n]?ao.M:ao.S}),[e,n]);return(0,_.jsx)(S.cG,{className:m()("s__k_1tSMGkmwIyBci1FRwY",!t&&"s__hwU_mu52kBhjCnEnsOdm",s&&"s__XqnduDbL9LmkMpAuofzA",a===ao.S&&"s__CR16fBkavn102ecQElr3"),size:n,backgroundColor:e.style.background_color,textColor:e.style.text_color,icon:e.icon?.svg,children:e.text})}const co=({name:e,className:t,displayType:s,height:o,imageUrl:n,dataTestId:a,showArrow:r=!0,showName:l=!0,children:c,truncateTextMode:d,isHovered:u,isSelected:p,badge:h,badgeVisible:g,isPaid:f=!1,isPremium:x=!1,favoriteIcon:y,classNames:v,onMouseEnter:b,onMouseLeave:j,onClick:k},w)=>{const{t:C}=(0,Q.useTranslation)("widget_travel_map"),T=s===Ci.B.Large,I=s===Ci.B.Medium,A=s===Ci.B.Small,E=T?S.jH.XS:S.jH.XXS,$=(0,i.useMemo)((()=>{switch(s){case Ci.B.Small:return S.Jh.SMALL;case Ci.B.Medium:return S.Jh.MEDIUM;case Ci.B.Large:return S.Jh.LARGE;default:return S.Jh.SMALL}}),[s]),D=(0,i.useCallback)((e=>{e.stopPropagation(),k?.()}),[k]);return(0,_.jsxs)("div",{"data-test-id":p?"pin-marker-selected":"pin-marker",className:m()("s__VWtA4bJrX80c8i99E7oE",!r&&"s__l2VWdi4OYQuAWOVdsGCI",p&&"s__dyKl0NkOmOTr0rEZ_Jrh",u&&"s__XFtXrud5xS3RCYKdQKCQ",A&&"s__CvpxTk5GjM1HaCwHF57v",I&&"s__aqw0k2dXdwxbj1b7i8HE",T&&"s__UbGRyZNonWMaM3OKJNsk",t),style:{width:o,height:o},onClick:D,ref:w,children:[(0,_.jsxs)("div",{"data-test-id":a,className:m()("s__Uyfgybmi2dTkN9HaieBt",r&&"s__AAZJwIozMH0_5QEkUPjq"),onMouseEnter:b,onMouseLeave:j,children:[(0,_.jsxs)("div",{className:"s__LDEQOXH__aeKFKZrUtG4",children:[(0,_.jsx)(M.E,{width:128,height:128,className:m()("s__CZfs4L79Ee3yBzfYlNT6"),srcTemplate:n,"aria-hidden":!0,alt:C("pinImageAlt",{place:e}),draggable:!0}),f&&(0,_.jsx)(S.G0.Icon,{className:$===S.Jh.SMALL?"s__TFsB3N_tssNd9g_8vqDY":void 0,size:$,type:Xe.gZ.PAID})]}),!A&&h&&(0,_.jsx)(lo,{badge:h,isDefaultPin:I,isLargePin:T,isVisible:Boolean(g)}),y&&(0,_.jsx)(S.XK,{src:y,className:"s__qGv5NwxavMyOrmZLkN2q"}),x&&(0,_.jsx)(S.QI,{size:E}),c]}),(0,_.jsx)(N.x,{className:m()("s__aGyFNHF4OuIlQCR2gyZj",!l&&"s__P3iTwF3E3KdLQZkGID4R",v?.text),type:P.y.Body3Semi,truncateMode:d,pretty:!1,children:e})]})},uo=(0,i.forwardRef)(co),po=(e,t)=>{const s=e.displayType===Ci.B.Small,{walkPromoClicked:i}=(0,o.useUnit)({walkPromoClicked:hi.travelMapPublicApi.analyticsModel.inputs.walkPromoClicked});return(0,_.jsx)(uo,{...e,onClick:()=>{window.open(e.link,"_blank"),e.isWalkPin&&i()},ref:t,badge:s?void 0:e.badge})},mo=(0,i.forwardRef)(po);const ho=({price:e,showPrice:t,...s},i)=>{const o=s.displayType===Ci.B.Large?ie.OD.M:void 0;return(0,_.jsx)(uo,{...s,ref:i,children:e&&(0,_.jsx)(S.w9,{withPrefix:!1,className:m()("s__FWz7FcETlmueLKqrq5Hb",!t&&!s.isSelected&&!s.isHovered&&"s__sh3FwW1sACLZU164igA5"),price:e.amount,size:o})})},go=(0,i.forwardRef)(ho);var _o=s(11825);const fo=({pin:e,pins:t,map:s})=>!(!Ti(e)&&!(e=>e.type===Xe.AS.EXTERNAL_URL)(e)&&[Yi.oY.PAYWALLED,Yi.oY.CHECKOUT].includes(e.premium.availability))&&(e.displayType===Ci.B.Large||(0,_o.QI)({height:20,width:e.controlledSize.width,offsetX:-e.controlledSize.width/2,offsetY:0,map:s,pin:e,pins:t})),xo=({pin:e,isHovered:t,isSelected:s,layerType:o,pins:a,map:r,favoriteIcon:l,onClick:c,onMouseEnter:d,onMouseLeave:u})=>{const p=e.displayType===Ci.B.Large,m=e.displayType===Ci.B.Medium,h=p,g=p?void 0:P.k.TwoLines,f=i.useMemo((()=>({name:e.name,displayType:e.displayType,width:e.controlledSize.width,height:e.controlledSize.height,imageUrl:e.image_url,showName:fo({pin:e,pins:a,map:r}),showArrow:h,truncateTextMode:g,isHovered:t,isSelected:s,dataTestId:`poi-id-${e.id}`,favoriteIcon:l,onMouseEnter:d,onMouseLeave:u})),[e,a,r,h,g,s,t,l,d,u]),x=i.useMemo((()=>{if(Ii(e))return(0,_.jsx)(mo,{...f,link:Ti(e)?e.link:e.url,badgeVisible:!0,badge:e.badges?.[0],isSelected:!1,isWalkPin:Ti(e)});if(Ai(0,o))return(0,_.jsx)(go,{...f,showPrice:m||p,price:e.price,onClick:c});const t=Si(e);return(0,_.jsx)(uo,{...f,showArrow:!t&&h,isPaid:t,isPremium:Boolean(e.premium?.overlay),badgeVisible:!0,badge:e.badges?.[0],onClick:c})}),[e,o,p,m,f,h,c]);return(0,_.jsx)(n.Jx,{style:{zIndex:Pi({isSelected:s,isHovered:t,type:e.displayType,isPromoPin:Ii(e),isAvailable:!!Ii(e)||e.premium.availability===Yi.oY.AVAILABLE}),top:-f.height/2,transition:"top 0.3s ease"},latitude:e.controlledCoordinates.latitude,longitude:e.controlledCoordinates.longitude,offset:[0,0],children:x})},yo=()=>{const[e,t]=(0,i.useState)(null),{guideId:s,externalPins:c,isDistrictLayer:d,map:u,openSource:p,selectedLayer:m,selectedLayerType:h,selectedPin:g,pins:f,districtArrows:x,mapDistrictPins:y,hoveredDistrictPinId:v,selectedDistrictPinId:b,selectedAlertId:j,debugPins:k,favoritePlacesIds:w,openProductPurchase:C,openPlaceAlert:S,openPoi:N,setProductId:P,openingParams:T}=(0,o.useUnit)({debugPins:hi.travelMapPublicApi.pinsPositioning.outputs.$debugPins,map:rs.X.outputs.$mapboxInstance,isDistrictLayer:hi.travelMapPublicApi.selectedPlace.outputs.$isDistrictsTab,openSource:r.I.outputs.$trapSource,externalPins:wi.outputs.$externalPins,selectedPin:hi.travelMapPublicApi.selectedPlace.outputs.$pin,selectedLayer:U.l.outputs.$layer,guideId:ot.R.outputs.$guideId,selectedLayerType:U.l.outputs.$layerType,openPlaceAlert:U.l.inputs.setPlaceAlert,openPoi:Ve.Y.inputs.open,openingParams:Ve.Y.outputs.$openingParams,openProductPurchase:l.L.inputs.showProductPurchase,pins:hi.travelMapPublicApi.pinsPositioning.outputs.$layerMapPins,mapDistrictPins:hi.travelMapPublicApi.mapDistrictPins.outputs.$pins,districtArrows:hi.travelMapPublicApi.mapDistrictPins.outputs.$arrows,hoveredDistrictPinId:hi.travelMapPublicApi.selectedPlace.outputs.$hoveredDistrictPinId,selectedDistrictPinId:hi.travelMapPublicApi.selectedPlace.outputs.$selectedDistrictPinId,selectedAlertId:hi.travelMapPublicApi.selectedPlace.outputs.$selectedAlertId,startZoom:a.mH.outputs.$startZoom,setProductId:l.L.inputs.setProductId,favoritePlacesIds:a.mH.outputs.$favoritePlacesIds}),I=Boolean(d)&&y.length>0,A=Boolean(d)&&x.length>0,M=i.useCallback((e=>()=>{t(e.id)}),[t]),E=i.useCallback((()=>{t(null)}),[t]),$=i.useCallback((e=>()=>{T?.poi!==e.id&&(e.productId&&P(e.productId),(0,a.VO)(e)?S(e.id):Si(e)?C():N({poi:e.id,layer:m,guideId:s,openSource:p,trapSource:Xe.lX.TAB,poiQueryOpenSource:Xe.ik.MAP}))}),[N,m,s,p,S,C,P,T]);return null!==h&&u?(0,_.jsxs)(_.Fragment,{children:[c,k?.map((e=>(0,_.jsx)(n.Jx,{latitude:e.lat,longitude:e.lon,style:{zIndex:100},offset:[0,0],children:(0,_.jsx)("div",{style:{backgroundColor:"rgba(255, 0, 0, 0.2)",borderRadius:"50%",outline:"1px solid black",width:2*e.collisionCircle.r,height:2*e.collisionCircle.r}})},`${e.pinId}${e.isSimulationOnly&&"simulation"}`))),I&&y?.map((e=>{const t=v===e.id,s=b===e.id;return(0,a.VO)(e)?(0,_.jsx)(no,{pin:e,onPinClick:$(e),isHovered:t,isSelected:j===e.id},e.id):(0,_.jsx)(Bi,{pin:e,onPinClick:$(e),isHovered:t,isSelected:s},e.id)})),A&&x?.map((e=>{const t=v===e.id,s=b===e.id;return(0,_.jsx)(Qi,{pin:e,onPinClick:$(e),isHovered:t,isSelected:s},e.id)})),f?.filter((e=>!e.isSimulationOnly)).map((t=>{const s=t.id===g?.id&&t.name===g?.name,i=e===t.id,o=w.includes(t.id)&&"favorite"in t?t.favorite?.icon.svg:void 0;return(e=>!Ii(e)&&e.pin_type===Xe.Er.DISTRICTS)(t)?null:(0,_.jsx)(xo,{isHovered:i,isSelected:s,pin:t,pins:f,map:u,favoriteIcon:o,layerType:h,onMouseEnter:M(t),onMouseLeave:E,onClick:$(t)},t.id)}))]}):null},vo=(0,i.memo)(yo),bo=()=>(0,_.jsx)(n.Pv,{showCompass:!1}),jo=()=>{const{styles:e,polygonsSourceId:t,isDistrictLayer:s,hoveredLayerId:i,selectedLayerId:r,selectedAlertLayerId:l}=(0,o.useUnit)({styles:pi.s.outputs.$data,polygonsSourceId:a.mH.outputs.$data.map((e=>e?.polygons_source_id||null)),isDistrictLayer:hi.travelMapPublicApi.selectedPlace.outputs.$isDistrictsTab,hoveredLayerId:hi.travelMapPublicApi.selectedPlace.outputs.$hoveredLayerId,selectedLayerId:hi.travelMapPublicApi.selectedPlace.outputs.$selectedLayerId,selectedAlertLayerId:hi.travelMapPublicApi.selectedPlace.outputs.$selectedAlertLayerId});return(0,_.jsx)(_.Fragment,{children:e?.layers?.map((e=>{const o=t===e.source,a=i===e.id,c=r===e.id||l===e.id,d=((e,t,s)=>e?t||s?1:.6:.2)(s,a,c),u=o?{...e.paint,"fill-opacity":d}:e.paint;return(0,_.jsx)(n.mh,{...e,source:e.source?e.source.toString():"",paint:u||{},ref:void 0},e.id)}))})},ko=({className:e,...t},s)=>(0,_.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":!0,className:e,"data-test-id":"icon",ref:s,style:{display:"inline-block"},...t,children:(0,_.jsx)("path",{d:"M12.5 2.5 2 7.5v1l4.5 1 1 4.5h1l5-10.5-1-1Z"})}),wo=(0,i.memo)((0,i.forwardRef)(ko));wo.displayName="Icon16CommonLocation";function Co(){const{requestUserLocation:e}=(0,o.useUnit)({requestUserLocation:hi.travelMapPublicApi.userLocation.inputs.requestGeolocation});return(0,_.jsx)("div",{className:"s__aHApCxMvNr8d5MXNPiUj",onClick:e,children:(0,_.jsx)(wo,{})})}var So=s(37823);function No({latitude:e,longitude:t,markerClassName:s}){const{headingDegrees:i}=(0,o.useUnit)({headingDegrees:hi.travelMapPublicApi.userLocation.outputs.$headingDegrees});return(0,_.jsxs)(n.Jx,{latitude:e,longitude:t,offset:[0,-So.a/2],style:{zIndex:Ni.UserLocation},children:[i&&(0,_.jsx)("div",{style:{transform:`rotate(${i}deg)`},className:"s__wab1tZDjUyLtfs1V7P0E"}),(0,_.jsx)("div",{className:m()("s__axf6KtQHGa8UCqMQyWec",s)})]})}var Po=s(92593),To=s(24352);const Io=({className:e,...t},s)=>(0,_.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:s,style:{display:"inline-block"},...t,children:(0,_.jsx)("path",{d:"m17.017 3.87-.455 1.692-1.692.455v.966l1.692.455.455 1.692h.966l.455-1.692 1.692-.455v-.966l-1.692-.455-.455-1.692h-.966ZM9.017 4.87 7.713 9.713 2.87 11.017v.966l4.843 1.304 1.304 4.843h.966l1.304-4.843 4.843-1.304v-.966l-4.843-1.304L9.983 4.87h-.966ZM15.017 15.87l-.455 1.692-1.692.455v.966l1.692.455.455 1.692h.966l.455-1.692 1.692-.455v-.966l-1.692-.455-.455-1.692h-.966Z"})}),Ao=(0,i.memo)((0,i.forwardRef)(Io));Ao.displayName="Icon24CommonSparkless";var Mo=s(25777),Eo=s(54844);const{aiGroup:$o}=hi.travelMapPublicApi;function Do(){const{isPending:e,text:t,progress:s,buttonClicked:i,setText:n}=(0,o.useUnit)({setText:$o.inputs.setText,text:$o.outputs.$inputText,isPending:$o.outputs.$isPending,buttonClicked:$o.inputs.buttonClicked,progress:$o.outputs.$progress});return(0,_.jsxs)("div",{className:"s__YLjaxt1nyCgpImnZUm8R",children:[(0,_.jsxs)("div",{className:"s__vYOU6gobFdzpDwmjMYtQ",children:[(0,_.jsx)("div",{className:"s__E8yKcXAwtITkMyNTrTcp",children:(0,_.jsx)(Po.I,{onChange:e=>n(e.currentTarget.value),size:To.f.S,id:"ai",disabled:e,value:t})}),(0,_.jsxs)(St.z,{disabled:e,className:"s__f0fMppVt0kFAUcp7Yx6c",onClick:i,children:[(0,_.jsx)(St.z.Icon,{children:(0,_.jsx)(Ao,{})}),(0,_.jsx)(St.z.Label,{children:e?"...":" "})]})]}),e&&(0,_.jsxs)("div",{className:"s__OXDpEy6qNsQ1WJRBiyFX",children:[(0,_.jsx)(Mo.k,{className:"s__wqTpdoWwifIdAWfHmT6B",progress:s,definition:Eo.g.Determinate,showBackground:!0}),(0,_.jsx)("div",{className:"s__N7TFfr5OolnCkZ8HcGUr",children:""})]})]})}const Bo=({className:e,shouldResizeMap:t=!1})=>{const[s,l]=(0,i.useState)("grab"),c=fi(),u=(0,i.useRef)(null),{userPosition:p}=(0,o.useUnit)({userPosition:hi.travelMapPublicApi.userLocation.outputs.$userPosition}),{mapLoaded:h,styleData:g,selectedLayerType:f,isMobile:x=!1,isDistrictsTab:y,guideId:v,initialBounds:b,openSource:j,interactiveLayerIds:k,mapSettings:w,zoom:C,recentlyViewedMapState:S,isPaidLayer:N,aiGroupEnabled:P,setMapParams:T,openPoi:I,recalculateDistrictPinsPosition:A,setHoveredPolygonDistrictPinId:M,setPlaceAlert:E,zoomChanged:$,zoomEnded:D,districtOnMapClicked:B,setMapLoaded:L,clearGeolocationWatchers:O}=(0,o.useUnit)({styleData:pi.s.outputs.$data,mapLoaded:pi.s.outputs.$mapLoaded,setMapLoaded:pi.s.inputs.setMapLoaded,selectedLayerType:U.l.outputs.$layer,isMobile:d.l.outputs.$isMobile,isDistrictsTab:hi.travelMapPublicApi.selectedPlace.outputs.$isDistrictsTab,guideId:ot.R.outputs.$guideId,openPoi:Ve.Y.inputs.open,initialBounds:ui.a.outputs.$initialBounds,openSource:r.I.outputs.$trapSource,setMapParams:is.aj.inputs.setMapParams,interactiveLayerIds:hi.travelMapPublicApi.selectedPlace.outputs.$interactiveLayerIds,mapSettings:a.mH.outputs.$mapSettings,recalculateDistrictPinsPosition:hi.travelMapPublicApi.mapDistrictPins.inputs.recalculatePinsPosition,setHoveredPolygonDistrictPinId:hi.travelMapPublicApi.selectedPlace.inputs.setHoveredPolygonDistrictPinId,setPlaceAlert:U.l.inputs.setPlaceAlert,zoomChanged:hi.travelMapPublicApi.zoom.outputs.zoomChanged,zoomEnded:hi.travelMapPublicApi.zoom.outputs.zoomEnded,zoom:hi.travelMapPublicApi.zoom.outputs.$zoomEnd,districtOnMapClicked:hi.travelMapPublicApi.analyticsModel.inputs.districtOnMapClicked,recentlyViewedMapState:mi.O.outputs.$recentlyViewedMapState,clearGeolocationWatchers:hi.travelMapPublicApi.userLocation.inputs.clearWatchers,isPaidLayer:hi.travelMapPublicApi.selectedPlace.outputs.$isPaidLayer,aiGroupEnabled:hi.travelMapPublicApi.aiGroup.outputs.$aiGroupEnabled}),z=i.useCallback((()=>{L(!0)}),[L]),[F,R]=(0,i.useState)({latitude:w.initialViewState.latitude,longitude:w.initialViewState.longitude}),{debouncedCallback:H}=(0,di.y1)((()=>{if(!c)return;const{lat:e,lng:t}=c.getCenter();T({lat:e,lon:t,zoom:c.getZoom()})}),200);!function({bounds:e}){const t=fi();(0,i.useEffect)((()=>{t&&e&&t.fitBounds(e,{padding:100})}),[t,e])}({bounds:b}),function({mapContainer:e}){const{polygon:t}=(0,o.useUnit)({polygon:hi.travelMapPublicApi.selectedPlace.outputs.$polygon}),s=fi();(0,i.useEffect)((()=>{if(!e||!t||!s)return;const i=new(yi().LngLatBounds)((0,gi.A5)(t));s.fitBounds(i,{padding:100,duration:1200,easing:rs.V})}),[e,t])}({mapContainer:u.current}),function({mapContainer:e}){const t=fi(),{isMobile:s,pinSize:n,pin:a,layerType:r}=(0,o.useUnit)({isMobile:d.l.outputs.$isMobile,pinSize:hi.travelMapPublicApi.pinSize.outputs.$size,pin:hi.travelMapPublicApi.selectedPlace.outputs.$pin,layerType:hi.travelMapPublicApi.selectedPlace.outputs.$layerType});(0,i.useEffect)((()=>{if(!a?.coordinates||r!==Xe.Jg.poi||s||!e||!t)return;const i=e.clientWidth,o=e.clientHeight,l={lng:a.coordinates.longitude,lat:a.coordinates.latitude},c=t.project(l);!(0,gi.A4)({pinSize:n,pinPosition:c,viewportSize:{width:i,height:o}})&&(t.resize(),t.easeTo({center:l,duration:400,easing:rs.V}))}),[s,e,r,a,n,t])}({mapContainer:u.current});const q=i.useCallback((e=>{if(!y)return;const{features:t}=e;if(!t)return;const s=t[0]?.properties?.district_id;s&&(l("pointer"),M(s))}),[y,M]),Z=i.useCallback((()=>{l("grabbing")}),[]),W=i.useCallback((()=>{l("grab")}),[]),G=i.useCallback((()=>{M(null),l("grab")}),[M]);(0,i.useEffect)((()=>{t&&c?.resize()}),[t,c]);const Q=i.useCallback((e=>{const{features:t}=e;if(!t)return;const s=t[0]?.properties?.district_id,i=t[0]?.properties?.name,o=t[0]?.properties?.type;s&&o===Xe.AS.PLACE&&null!==f&&(I({poi:String(s),layer:f,guideId:v,openSource:j,poiQueryOpenSource:Xe.ik.MAP}),B(i)),s&&o===Xe.AS.ALERT&&null!==f&&E(String(s))}),[f,I,v,j,B,E]),Y=Boolean(h&&g);return(0,i.useEffect)((()=>O)),(0,_.jsxs)("div",{ref:u,"data-lat":F.latitude,"data-lon":F.longitude,"data-zoom":C,"data-test-id":"travel-map-map",className:m()(vi.mapContainer,vi.mapbox,x&&vi.mapBoxLogo,N&&vi.paidLayer,e),children:[!Y&&(0,_.jsx)("div",{className:m()(vi.mapContainerSkeleton,e),children:(0,_.jsx)(li.$,{size:ci.Ey.L})}),(0,_.jsxs)(n.ZP,{...w,initialViewState:S??w.initialViewState,id:_i,style:{opacity:Y?1:0},mapStyle:g?.style,attributionControl:!1,logoPosition:"bottom-right",onLoad:z,cursor:s,interactiveLayerIds:k,onMoveEnd:H,onZoomEnd:e=>{H(),D(e.viewState.zoom)},onPitchEnd:H,onMouseMove:q,onMouseLeave:G,onMouseDown:Z,onMouseUp:W,onClick:Q,onDragEnd:e=>R({latitude:e.viewState.latitude,longitude:e.viewState.longitude}),onZoom:e=>{$(e.viewState.zoom)},onMove:A,children:[Y&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(vo,{}),!x&&(0,_.jsx)(bo,{})]}),(0,_.jsx)(jo,{}),p&&(0,_.jsx)(No,{latitude:p.coords.latitude,longitude:p.coords.longitude}),(0,_.jsx)(Co,{}),P&&(0,_.jsx)(Do,{})]})]})};var Lo=s(91285),Oo="s__Obh76oNu67h9cnbH34eg";const zo=({pin:e,onClick:t})=>{const{t:s}=(0,Q.useTranslation)("widget_travel_map"),o=(0,i.useCallback)((()=>{t(e.id)}),[e.id,t]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("button",{onClick:o,className:"s__gTnOyE1vdUEHHOumYAMp",children:(0,_.jsx)("div",{className:"s__FLW1s7HtDR87GHKZFq5R",children:(0,_.jsx)(M.E,{className:"s__PYEy2em9wxqmXHOzgNMs",srcTemplate:e.image_url,width:335,height:190})})}),(0,_.jsxs)("div",{className:"s__wG7Z9O_XqNg_y42dBfDu",children:[(0,_.jsx)(N.x,{className:Oo,type:P.y.Body1Semi,onClick:o,children:e.name}),(0,_.jsx)(S.AT,{type:P.y.Body3Regular,children:e.description}),e.price?.amount&&(0,_.jsxs)("div",{className:"s__w80KUwoR2zExyK8akGQo",children:[(0,_.jsxs)(N.x,{className:Oo,type:P.y.Title4Semi,onClick:o,children:[`${s("hotels.priceFrom")} `,(0,_.jsx)(S.fE,{price:e.price?.amount})]}),(0,_.jsx)(S.AT,{type:P.y.CaptionRegular,children:s("hotels.priceForPeriod")})]})]})]})};var Fo="s__tVHyRsZERqcZQ6zDzEcF",Uo="s__B3gWbSh_tU2rY_XuN_s6",Ro="s__xHuB2Hp4nDCEkBxw5YeP",Ho="s__Fdw7_cp6Hp6m6i6DYDnp",qo="s__vxG9jF24OJg3htCUSm7E",Zo="s__RfxSVgWIkrjOUy74_1mW";const Wo=({pin:e,onClick:t})=>{const{isMobile:s,favoritePlacesIds:n}=(0,o.useUnit)({isMobile:d.l.outputs.$isMobile,favoritePlacesIds:a.mH.outputs.$favoritePlacesIds}),r=s?350:160,l=e.badges?.[0],c=n.includes(e.id),u=(0,i.useCallback)((()=>{t(e.id)}),[e,t]);return(0,Lo.Jq)(e)?(0,_.jsx)(S.ek,{className:m()(Fo,"s__mcvgkkhWiwqyMEyJK8B3"),href:e.url,onClick:Ae(),image:({className:t})=>(0,_.jsx)("div",{className:m()(t,Ro),children:(0,_.jsx)(S.G0,{imageUrl:e.image_url,size:r,caption:"",className:Uo,transition:!1,customOverlay:Si(e),children:l&&(0,_.jsx)(S.cG,{className:Zo,size:ie.OD.S,backgroundColor:l.style.background_color,textColor:l.style.text_color,icon:l.icon?.svg,children:l.text})})}),content:()=>(0,_.jsx)("div",{className:Ho,children:(0,_.jsx)(N.x,{className:qo,type:P.y.Body2Semi,truncateMode:P.k.TwoLines,children:e.name})})}):(0,_.jsx)(S.ek,{className:Fo,onClick:u,image:({className:t})=>(0,_.jsx)("div",{className:m()(t,Ro),children:(0,_.jsxs)(S.G0,{imageUrl:e.image_url,size:r,caption:"",className:Uo,transition:!1,customOverlay:Si(e),children:[(0,_.jsx)(S.G0.Icon,{type:e.premium.badge,size:S.Jh.MEDIUM}),c&&e.favorite&&(0,_.jsx)(S.XK,{src:e.favorite.icon.svg,className:"s__VujsyCRZ29LIAcaxIFMf"}),e.premium?.overlay&&(0,_.jsx)(S.G0.Overlay,{}),l&&(0,_.jsx)(S.cG,{className:Zo,size:ie.OD.S,backgroundColor:l.style.background_color,textColor:l.style.text_color,icon:l.icon?.svg,children:l.text})]})}),content:()=>(0,_.jsxs)("div",{className:Ho,children:[(0,_.jsx)(N.x,{className:qo,type:P.y.Body2Semi,truncateMode:e.description?P.k.SingleLine:P.k.TwoLines,children:e.name}),e.description&&(0,_.jsx)(S.AT,{className:"s__WdFTTlIqAZcpTBMQkEL4",type:P.y.Body3Regular,truncateMode:P.k.TwoLines,children:e.description})]})})};var Go=s(82407);const{$placeDetailsOpened:Qo}=ri.outputs,{$selectedDistrictPinId:Yo,$tab:Xo,$poisFromDistrict:Vo}=Go.i.outputs,{$poi:Jo}=U.l.outputs,{$title:Ko}=a.mH.outputs,{close:en,open:tn}=Ve.Y.inputs,{$guideId:sn}=ot.R.outputs,{removePoiParam:on}=is.aj.inputs,{hidePlacesListView:nn}=ri.inputs,{$trapSource:an}=r.I.outputs,rn=(0,k.createEvent)({sid:"-oilddp"}),ln=(0,k.createEvent)({sid:"-d1vosu"}),cn=(0,k.createEvent)({sid:"-9la44i"}),dn=(0,k.combine)({and:[{isPlaceDetailsOpened:Qo,selectedDistrict:Yo,selectedPoi:Jo,poisFromDistrict:Vo},({isPlaceDetailsOpened:e,selectedDistrict:t,selectedPoi:s,poisFromDistrict:i})=>e&&Boolean(t)&&Boolean(t!==s)&&i.length>0],or:{sid:"-xy4osn"}}),un=(0,k.combine)({and:[{tab:Xo,isPlaceDetailsOpened:Qo,placeTitle:Ko},({tab:e,isPlaceDetailsOpened:t,placeTitle:s})=>e&&t?e.title:s],or:{sid:"-ovejr9"}});(0,k.split)({and:[{source:(0,k.sample)({and:[{clock:rn,source:{isPoiOpenedFromDistrict:dn,isPlaceDetailsOpened:Qo}}],or:{sid:"uhyxi7"}}),match:{returnToDistrict:({isPoiOpenedFromDistrict:e})=>e,returnToMap:({isPlaceDetailsOpened:e})=>e,_:({isPoiOpenedFromDistrict:e,isPlaceDetailsOpened:t})=>!e&&!t},cases:{returnToDistrict:ln,returnToMap:cn,_:nn}}],or:{sid:"-wzjmq8"}}),(0,k.sample)({and:[{clock:ln,source:{selectedDistrict:Yo,direction:sn,openSource:an},fn:({selectedDistrict:e,direction:t,openSource:s})=>({poi:e,guideId:t,openSource:s,poiQueryOpenSource:Xe.ik.PLACE_DETAILS}),target:tn}],or:{sid:"-w0wlch"}}),(0,k.sample)({and:[{clock:cn,target:[en,on]}],or:{sid:"-vgk7e4"}});const pn={inputs:{clicked:rn},outputs:{$isPoiOpenedFromDistrict:dn,$title:un}},mn=({className:e})=>{const{t:t}=(0,Q.useTranslation)("widget_travel_map"),{isPoiOpenedFromDistrict:s,title:n,clicked:a}=(0,o.useUnit)({isPoiOpenedFromDistrict:pn.outputs.$isPoiOpenedFromDistrict,title:pn.outputs.$title,clicked:pn.inputs.clicked}),r=i.useMemo((()=>s?t("modal.backToDistrict"):n),[t,s,n]);return(0,_.jsxs)("button",{className:m()("s__KdaseI9ngeU7cUAhaBlb",e),onClick:a,children:[(0,_.jsx)(Ce.I,{className:"s__nlGanIz3jY64eu62nWyw"}),(0,_.jsx)(N.x,{tag:"span",type:P.y.Body2Semi,children:r})]})};var hn=s(65740),gn=s(42177),_n=s(62423);const{$tab:fn}=Go.i.outputs,{entryPointInteracted:xn}=gn.X.inputs,yn=(0,k.createEvent)({sid:"tl3bte"}),vn=fn.map((e=>e?.info??null)),bn=(0,k.combine)({and:[{info:vn},({info:e})=>Boolean(e)&&e?.type!==Yi.Eg.BUY],or:{sid:"cfcmgg"}}),jn=(0,k.combine)({and:[{info:vn},({info:e})=>e?.type===Yi.Eg.PAYWALL||e?.type===Yi.Eg.OLD_PAYWALL],or:{sid:"5ase8n"}}),{$enabled:kn,turnOn:wn,turnOff:Cn}=(0,k.withFactory)({sid:"txbc7n",fn:()=>(0,Ps.d)(as.qs,!0)});(0,k.sample)({and:[{clock:fn.updates,target:wn}],or:{sid:"2zk5op"}}),(0,k.withFactory)({sid:"32b4ni",fn:()=>(0,hn.s)({source:(0,k.sample)({and:[{clock:yn,source:{isPayWall:jn}}],or:{sid:"-3oeq5w"}}),if:({isPayWall:e})=>e,then:xn.prepend((()=>_n.N9.TrapTabPromo)),else:wn})});const Sn={outputs:{$info:vn,$isVisible:bn,$isPayWall:jn,$isOpen:kn},inputs:{closed:Cn,clicked:yn}};var Nn=s(37723);const Pn=({info:e,onClick:t,onClose:s,isPayWall:o,isOpen:n})=>{const a=(0,i.useRef)(null),r=e?.text||"";return(0,_.jsx)(Nn.Z,{in:n,timeout:{enter:300,exit:400},classNames:{enter:"s__hp_Xb2UshV0FutNN3tnw",exit:"s__HWNz3agr1CI6eeNI92zv"},nodeRef:a,children:(0,_.jsx)("div",{className:m()("s__q2x2nx_u3EHK18ScvnwF",n&&"s__m3EXCDO32U4g7YOGAeJs",!n&&"s__cP3H_9tytByAnAFSDgrn"),children:(0,_.jsxs)("div",{className:m()("s__Ec_28N4kFg2MZUbrlq4K",o&&"s__jE2i99EQOmpR4yytEQwS",n&&"s__pCDAngUD5DtknJNAOTl4",!n&&"s__KZtBfzWwESx_JplvGxpv"),onClick:t,ref:a,children:[(0,_.jsx)(M.E,{className:m()("s__bCyBXsy9ZBSAn29BAB75",o&&"s__YNLAhCicUOiFQe8vME0P"),src:e.emoji_image.svg,width:24,height:24}),(0,_.jsx)("div",{className:"s__Pq3RA42VXB85E6iDa1Nf",children:(0,_.jsx)(S.Jv,{className:"s__FLePgrkpBKFTJ88wYcwj",type:P.y.Body3Paragraph,children:r})}),o?(0,_.jsx)("span",{className:"s__n3w_6XsQj3EVHf1UQZUO"}):(0,_.jsx)(y.P,{className:"s__yC1jB7KBTqrXRF1K2XPJ",onClick:e=>{e.stopPropagation(),s()},size:"small"})]})})})};const Tn=({info:e,isPayWall:t,onClick:s})=>{const i=e.text||"";return(0,_.jsxs)("div",{className:m()("s__YIvSXfxs5pXnaQnvjWMK",t&&"s__OfH_dXpRGvnXmFsZCWUd"),onClick:s,children:[(0,_.jsx)("img",{className:"s__bwg_syAJi4x36o9yQCOT",src:e.emoji_image.svg,alt:""}),(0,_.jsxs)("div",{className:"s__qDQMpHIkD2di5krKO74x",children:[(0,_.jsx)(S.Jv,{type:P.y.Body3Paragraph,children:i}),e.caption&&(0,_.jsx)(N.x,{type:P.y.Body3Semi,className:"s__wEFX7olkOhsGVZRnZgg5",children:e.caption})]})]})},In=({type:e})=>{const{info:t,isVisible:s,isPayWall:i,isOpen:n,closed:a,clicked:r}=(0,o.useUnit)({info:Sn.outputs.$info,isVisible:Sn.outputs.$isVisible,isPayWall:Sn.outputs.$isPayWall,isOpen:Sn.outputs.$isOpen,...Sn.inputs});return s&&t?e===Xe.wO.MAP?(0,_.jsx)(Pn,{info:t,isPayWall:i,isOpen:n,onClose:a,onClick:r}):(0,_.jsx)(Tn,{info:t,isPayWall:i,onClick:r}):null},An=(0,k.createEvent)({sid:"c2gwus"});(0,k.sample)({and:[{clock:An,source:{selectedLayerType:U.l.outputs.$layer,guideId:ot.R.outputs.$guideId,openSource:r.I.outputs.$trapSource},fn:({selectedLayerType:e,guideId:t,openSource:s},i)=>({poi:i,layer:e,guideId:t,openSource:s,trapSource:Xe.lX.TAB,poiQueryOpenSource:Xe.ik.LIST}),target:Ve.Y.inputs.open}],or:{sid:"ulcxcc"}});const Mn={clicked:An},En=({className:e})=>{const{t:t}=(0,Q.useTranslation)("widget_travel_map"),{isMobile:s,currentTab:i,isDistrictsTab:n,isHotelsTab:r,filteredPlaces:l,viewMode:c,clicked:u}=(0,o.useUnit)({isMobile:d.l.outputs.$isMobile,filteredPlaces:hi.travelMapPublicApi.subgroups.outputs.$subgroupPins,currentTab:hi.travelMapPublicApi.selectedPlace.outputs.$tab,isDistrictsTab:hi.travelMapPublicApi.selectedPlace.outputs.$isDistrictsTab,isHotelsTab:hi.travelMapPublicApi.selectedPlace.outputs.$isHotelsTab,viewMode:ls.Lw.outputs.$value,...Mn}),p=!n&&!r;return(0,_.jsxs)("div",{"data-test-id":"modal-places-list",className:e,children:[!s&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(mn,{className:"s__gDKglgcaAtLC3MaSkYpw"}),(0,_.jsx)(N.x,{className:"s__Q0mBcTjCHEfHiNzJNbwA",type:P.y.Title4Semi,children:i?i.title:t("modal.allLayersFilterTitle")})]}),s&&!i?.is_hidden&&(0,_.jsx)(In,{type:c}),(0,_.jsx)("ul",{className:m()(p?"s__Bc3_fBNgtw00L4oZajJ5":"s__wPII8z3Xpaf_6Gu7PLOr"),children:i&&l&&(0,a.Q)(l)?.map((e=>Ai(0,i.type)?(0,_.jsx)("li",{className:"s__yUKA5zLJp6GEm0R9HeW3","data-test-id":`modal-places-list-item-${e.id}`,children:(0,_.jsx)(zo,{pin:e,onClick:u})},e.id):n&&!(0,Lo.Jq)(e)?(0,_.jsx)("li",{className:"s__h9jXOiAMffOxOp8CwOa_","data-test-id":`modal-places-list-item-${e.id}`,children:(0,_.jsx)(S.Dj,{title:e.name,subtitle:e.description,image_url:e.image_url,onClick:()=>u(e.id)})},e.id):(0,_.jsx)("li",{children:(0,_.jsx)(Wo,{pin:e,onClick:u})},e.id)))})]})};var $n=s(96026),Dn=s.n($n),Bn=s(2905),Ln=s(79403),On=s(91243);const zn=e=>`travel-map-layer-selector-${e}`;var Fn="s__RMfsM0SjoBxH8oSXIT8p",Un="s__dBlZ5CZWwcAB3BEC4QLi",Rn="s__m1w7FFLw_S5RPsO5p4v0",Hn="s__gwxdSMYj5fRoMDSdU56q";const qn=({tab:e,selected:t,withDivider:s})=>{const{icon:i,icon_image_url:n,title:a,subtitle:r,premium:l}=e,c=(0,o.useUnit)(d.l.outputs.$isMobile);return(0,_.jsxs)("div",{className:m()(Fn,t&&"s__qshnNJwom5yxdYgh2Pjq",s&&Rn),children:[(0,_.jsx)("div",{className:m()(Hn,n&&"s__YXOYON_zag5kU7fc8rc_"),children:n?(0,_.jsx)("div",{className:"s__ux0hywEpOVPgszfrV00W",children:(0,_.jsx)(M.E,{srcTemplate:n,alt:a,width:28,height:28,draggable:!0})}):(0,_.jsx)(S.Mf,{className:"s__Tw9YCowHT89k822Dd2K2",imageUrl:i.svg,imageAlt:a})}),(0,_.jsxs)("div",{className:Un,children:[(0,_.jsxs)(N.x,{tag:"h4",type:P.y.Body1Semi,className:"s__AoY7qK7Bb3o2SoKaCTd6",testId:"layer-title",children:[a,l?.badge&&(l.badge===Xe.gZ.MORE||l.badge===Xe.gZ.PLUS)&&(0,_.jsx)(S.TC,{badge:l.badge,selected:t,className:"s__lpoOtkdsOKG2CT1K87kZ"})]}),(0,_.jsx)(N.x,{tag:"span",type:c?P.y.CaptionRegular:P.y.Body3Regular,className:"s__vRICOQ6JfYOgwFBhaZrA",children:r})]})]})};var Zn="s__NMl0pb1xj8DjoUzWGlL7";const Wn=({tab:e,onClick:t,className:s,selected:n=!1,onShowPlacesClick:r,withDivider:l=!1})=>{const{t:c}=(0,Q.useTranslation)("service_guides"),u=(0,o.useUnit)(d.l.outputs.$isMobile),p=e.premium?.type===Xe.cy.PREMIUM,h=(0,i.useMemo)((()=>(0,a.Q)(e.places).length),[e]),g=(0,i.useCallback)((()=>{t(e.id)}),[e,t]),f=(0,i.useMemo)((()=>{const t=`layer-tab-id-${e.id}`;return p?`${t}-premium`:t}),[p,e.id]);return(0,_.jsx)("li",{className:m()(Zn,s),"data-test-id":f,children:(0,i.createElement)(n?"div":"button",{className:m()("s__BbuEoHGcaCJFDKIJvczh",n?"s__K8frUw50wUkL1Kkt7YAX":"s__RYj1QUd5DIwE2InHQyPK"),onClick:g,tabIndex:n?-1:0,"data-test-id":n?"layer-selected":""},(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(qn,{tab:e,selected:n,withDivider:l}),u&&(0,_.jsx)(E.i,{className:"s__T8QgbC0Vo2ez72KeQvsG"}),n&&r&&(0,_.jsx)("div",{className:"s__t1ejFG_j6BvjYk22afCA","data-test-id":"layer-selected-show-places-btn",children:(0,_.jsx)(St.z,{className:"s__n0ch1tKDMQ2e2am4ur0e",size:Nt.qE.S,priority:Nt.Ji.Secondary,onClick:r,children:(0,_.jsx)("span",{className:"s__fzjylELPQ9FEnV1xTTNM",children:c("placesListCount",{count:h})})})})]}))})},Gn=({withDivider:e})=>(0,_.jsxs)("div",{className:m()(Fn,e&&Rn),children:[(0,_.jsx)("div",{className:m()(Hn,"s__duKsHUM_g1KWxDvn1QBQ")}),(0,_.jsxs)("div",{className:Un,children:[(0,_.jsx)("div",{className:"s__Skg54VQ8xfUrTDxznG2q"}),(0,_.jsx)("div",{className:"s__WxlYIuuWv2h15wwLfhi9"})]})]}),Qn=({withDivider:e,isMobile:t,className:s})=>(0,_.jsx)("li",{className:m()(Zn,s),children:(0,_.jsxs)("div",{className:"s__BgawmWaCfxQ6hCgQrwUO",children:[(0,_.jsx)(Gn,{withDivider:e}),t&&(0,_.jsx)(E.i,{className:"s__Wb4CHPE30YcDEpZKWMcI"})]})}),Yn=({tab:e,checked:t,className:s})=>{const{showPlaces:n,tabChanged:a}=(0,o.useUnit)({tabChanged:On.D.inputs.tabChanged,showPlaces:ri.inputs.showPlacesListView}),r=zn(e.id),l=(0,i.useCallback)((()=>{a(e.id)}),[e,a]);return(0,_.jsx)("div",{className:s,id:r,children:(0,_.jsx)(Wn,{selected:t,tab:e,onClick:l,onShowPlacesClick:n})})};var Xn=s(37737),Vn=s(10150);function Jn(e){return e===Object(e)&&0!==Object.keys(e).length}var Kn,ea=function(e,t){var s=!e.ownerDocument.documentElement.contains(e);if(Jn(t)&&"function"==typeof t.behavior)return t.behavior(s?[]:(0,Vn.Z)(e,t));if(!s){var i=function(e){return!1===e?{block:"end",inline:"nearest"}:Jn(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var s="scrollBehavior"in document.body.style;e.forEach((function(e){var i=e.el,o=e.top,n=e.left;i.scroll&&s?i.scroll({top:o,left:n,behavior:t}):(i.scrollTop=o,i.scrollLeft=n)}))}((0,Vn.Z)(e,i),i.behavior)}},ta=function(){return Kn||(Kn="performance"in window?performance.now.bind(performance):Date.now),Kn()};function sa(e){var t=ta(),s=Math.min((t-e.startTime)/e.duration,1),i=e.ease(s),o=e.startX+(e.x-e.startX)*i,n=e.startY+(e.y-e.startY)*i;e.method(o,n),o!==e.x||n!==e.y?requestAnimationFrame((function(){return sa(e)})):e.cb()}function ia(e,t,s,i,o,n){var a,r,l,c;void 0===i&&(i=600),void 0===o&&(o=function(e){return 1+--e*e*e*e*e}),a=e,r=e.scrollLeft,l=e.scrollTop,c=function(t,s){e.scrollLeft=Math.ceil(t),e.scrollTop=Math.ceil(s)},sa({scrollable:a,method:c,startTime:ta(),startX:r,startY:l,x:t,y:s,duration:i,ease:o,cb:n})}const oa=e=>{(0,Xn.L)((()=>{if(!e||!document)return;const t=document.getElementById(zn(e));var s,i,o;t&&(s=t,function(e){return e&&!e.behavior||"smooth"===e.behavior}(o=(i={behavior:"smooth",scrollMode:"always",inline:"center",block:"nearest"})||{})?ea(s,{block:o.block,inline:o.inline,scrollMode:o.scrollMode,boundary:o.boundary,behavior:function(e){return Promise.all(e.reduce((function(e,t){var s=t.el,i=t.left,n=t.top,a=s.scrollLeft,r=s.scrollTop;return a===i&&r===n?e:[].concat(e,[new Promise((function(e){return ia(s,i,n,o.duration,o.ease,(function(){return e({el:s,left:[a,i],top:[r,n]})}))}))])}),[]))}}):Promise.resolve(ea(s,i)))}),[e])};var na={filtersContainer:"s__r6u74ZEoITMJe3Q2DISu",titleBlock:"s__p4RHXvb6R9W2FAg4HhFG",tabsList:"s__lRaWgEseyqBDz4zlSpIQ",item:"s__xTixDy3oCnRU4lYTdePa"};const aa=({className:e})=>{const{brand:t,isMobile:s,isLoading:i,selectedLayer:n,visibleTabs:r,title:l}=(0,o.useUnit)({brand:Ln.U.outputs.$brand,isMobile:d.l.outputs.$isMobile,isLoading:a.mH.outputs.$pending,selectedLayer:U.l.outputs.$layer,visibleTabs:hi.travelMapPublicApi.visibleTabs.outputs.$tabs,title:a.mH.outputs.$title});return oa(n),(0,_.jsxs)("div",{className:e,children:[(0,Bn.S4)(t)&&(0,_.jsx)("div",{className:na.titleBlock,children:(0,_.jsx)(N.x,{type:P.y.Title4Bold,children:l})}),(0,_.jsx)("div",{className:na.filtersContainer,children:(0,_.jsxs)("ul",{className:na.tabsList,children:[i&&(0,_.jsx)(_.Fragment,{children:Dn()(5).map((e=>(0,_.jsx)(Qn,{isMobile:s,className:na.filterItem},e)))}),!i&&r&&r.map((e=>(0,_.jsx)(Yn,{tab:e,checked:e.id===n},e.id)))]})})]})};const ra=({tab:e,onPlaceLayerClick:t,selectedLayerId:s})=>{const o=zn(e.id),n=e.id===s,a=(0,i.useCallback)((()=>{t(e.id)}),[e,t]);return(0,_.jsxs)("div",{className:m()("s__WwhK77jXNGQjzYlTT3eX",n&&"s__LWp5zmwkq1hXMhhjlZQa"),id:o,onClick:a,children:[e.icon_image_url?(0,_.jsx)("div",{className:"s__OywrvbcTCkBAjteSSgH2",children:(0,_.jsx)(M.E,{className:"s__R_RuBRoylOAPyqxDVk_c",srcTemplate:e.icon_image_url,alt:e.title,width:28,height:28,draggable:!0})}):(0,_.jsx)(S.Mf,{className:"s__fsOKNggdPg5ZJIwWVeyS",imageUrl:e.icon.svg,imageAlt:e.title}),(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:"s__OJxvcIMoBrYhRONLCiZ4",children:[(0,_.jsx)(N.x,{type:P.y.Body2Semi,children:e.title}),(e.premium?.badge===Xe.gZ.PLUS||e.premium?.badge===Xe.gZ.MORE)&&(0,_.jsx)(S.TC,{className:"s__HjZADz4A8Ko4gQU1g_uk",selected:n,badge:e.premium.badge,isSmall:!0})]}),(0,_.jsx)(N.x,{className:"s__JhCwq33cH9aRMFjT_jzj",type:P.y.CaptionRegular,children:e.subtitle})]})]},e.id)};const la=({className:e})=>{const{selectedLayer:t,visibleTabs:s,isSingleTab:n,tabChanged:a}=(0,o.useUnit)({selectedLayer:U.l.outputs.$layer,visibleTabs:hi.travelMapPublicApi.visibleTabs.outputs.$tabs,isSingleTab:hi.travelMapPublicApi.visibleTabs.outputs.$isSingleTab,tabChanged:On.D.inputs.tabChanged}),r=(0,i.useCallback)((e=>{a(e)}),[a]);return oa(t),n?null:(0,_.jsx)("div",{className:e,children:(0,_.jsx)("div",{className:"s__Qew6QvNsUM9bRZ3LpkeP","body-scroll-lock-ignore":"",children:s.map((e=>(0,_.jsx)(ra,{tab:e,selectedLayerId:t,onPlaceLayerClick:()=>r(e.id)},e.id)))})})};var ca="s__I8GR7W1loi753q83Cqow",da=s(51717),ua=s(39018);const{showProductPurchase:pa}=l.L.inputs,{$isPaidWebContentEnabled:ma}=c.qF.outputs,{$tab:ha}=Go.i.outputs,{sendEvent:ga}=ua.n.inputs,_a=(0,k.createEvent)({sid:"6nrh5c"}),fa=ma,{$icon:xa,$text:ya}=(0,k.withFactory)({sid:"-nr2gje",fn:()=>(0,da.X)({source:ha,shape:{$icon:e=>e?.info?.emoji_image.svg??null,$text:e=>e?.info?.text??null}})});(0,k.sample)({and:[{clock:_a,target:pa}],or:{sid:"wfpm0e"}}),(0,k.sample)({and:[{clock:_a,fn:()=>({type:"koroche_push_buy_layer"}),target:ga}],or:{sid:"wu09fs"}});const va={clicked:_a},ba={$showButton:fa,$icon:xa,$text:ya},ja=({className:e})=>{const{clicked:t,$showButton:s,$text:i,$icon:n}=(0,o.useUnit)({...va,...ba});return s?(0,_.jsxs)(St.z,{testId:"buy-layer-places-button",size:Nt.qE.M,shape:Nt.jL.Round,mod:Nt.Ly.Orange,className:m()(e),onClick:t,children:[n&&(0,_.jsx)(St.z.Icon,{children:(0,_.jsx)("img",{alt:"",src:n})}),i&&(0,_.jsx)(St.z.Label,{className:"s__yvSSMiSkSGE4mLXG2YU7",children:i})]}):null};var ka=s(57629);const wa={width:335,height:120},Ca=({className:e,banner:t})=>{const{imgUrl:s,imgUrl2x:i,imgUrl3x:n}=(0,ka.H)(t?.image_url||"",wa),{isImageLoaded:a,onImageLoad:r}=(0,di.h3)(s),{walkPromoClicked:l}=(0,o.useUnit)({walkPromoClicked:hi.travelMapPublicApi.analyticsModel.inputs.walkPromoClicked});if(!t)return null;const{color:c,gradient_from:d,gradient_to:u}=t.background??{},p=c?{backgroundColor:c}:void 0,h=d&&u?{background:`linear-gradient(\n    90deg,\n    ${d} 0px,\n    ${d} 108px,\n    ${u} 100%\n  )`}:void 0;return(0,_.jsxs)("a",{href:t.button.link,onClick:l,target:"_blank",rel:"noopener noreferrer",className:m()("s__ewtq2Su4V6dEMB6t6i9k",e),style:p,children:[(0,_.jsx)("div",{className:"s__pXnTTmDGcOufHd3it4Jg",style:h}),(0,_.jsx)("img",{alt:"",className:m()("s__F1Pc0WG4muO1O1NJh4Do",a&&"s__xQ6aJbXGZEW3UhwO8o_p"),src:s,srcSet:`${s} 1x, ${i} 2x, ${n} 3x`,onLoad:r}),(0,_.jsxs)("div",{className:"s__fEclFR4mfVvRPw8Gauhh",children:[(0,_.jsx)(N.x,{type:P.y.Title4Bold,className:"s__aorbo09pPP0k5vsc8z2Q",children:t.title}),(0,_.jsx)(oe.C,{size:ie.OD.XS,className:"s__ZYYjkwdyk4SSI05FonIq",customHexColor:t.badge.style.background_color,children:(0,_.jsxs)(N.x,{className:"s__HKCmJoKQARVOjD7NQGZ3",tag:"span",type:P.y.CaptionSemi,children:[t.badge.icon&&(0,_.jsx)("img",{src:t.badge.icon.svg,alt:""}),(0,_.jsx)("span",{style:{color:t.badge.style.text_color},children:t.badge.text})]})}),(0,_.jsx)(St.z,{inline:!0,className:"s__S3S0xJeP6x1swFeotp8I",size:Nt.qE.XS,shape:Nt.jL.Round,type:Nt.Ji.Primary,mod:Nt.Ly.Custom,children:(0,_.jsx)("span",{className:"s__iXvFk7HrONouEKe5hTSr",children:t.button.text})})]})]})};var Sa=s(1552);const Na=({subgroups:e,className:t})=>{const{selectedSubgroupId:s,setSubgroup:i}=(0,o.useUnit)({selectedSubgroupId:hi.travelMapPublicApi.subgroups.outputs.$selectedSubgroupId,setSubgroup:hi.travelMapPublicApi.subgroups.inputs.setSubgroup});return(0,_.jsx)("div",{className:m()("s__ZPGd51hDXW05ytBtZFKi",t),children:e.map((e=>{const t=e.id===s;return(0,_.jsx)(Sa.A,{isDisabled:!1,isActive:!1,isSelected:t,className:m()("s__LVK9ylFEMRPRAw7mWLML",t&&"s__RmAcZ0hN4ghyUDdXE7mF"),contentClassName:m()(t&&"s__W1JeQ4LdJoakK2kDwUXQ"),onClick:()=>i(e.id),children:e.title},e.id)}))})},Pa=()=>{const{viewMode:e,isLoading:t,currentLayer:s,isSingleTab:i,data:n,banner:r,isPaidLayer:l,subgroups:c}=(0,o.useUnit)({viewMode:ls.Lw.outputs.$value,isLoading:a.mH.outputs.$pending,isPaidLayer:hi.travelMapPublicApi.selectedPlace.outputs.$isPaidLayer,currentLayer:hi.travelMapPublicApi.selectedPlace.outputs.$tab,isSingleTab:hi.travelMapPublicApi.visibleTabs.outputs.$isSingleTab,data:a.mH.outputs.$data,banner:U.l.outputs.$banner,subgroups:hi.travelMapPublicApi.subgroups.outputs.$subgroups}),d=Boolean(e===Xe.wO.MAP&&n&&s);if(t)return(0,_.jsx)("div",{className:ca,children:(0,_.jsx)(li.$,{className:"s__b3kAjLD6e9jxWCOGl5UP"})});const u=Boolean(s?.subgroups);return(0,_.jsxs)("div",{className:m()(ca,l&&"s__xEv2eP8ebRacpfcx_utt"),children:[(0,_.jsx)(la,{className:m()("s__nvVJ8PvZHwvRObH9HIBS")}),c&&(0,_.jsx)("div",{className:"s__hfky_wNNZWv_OGWo9xIt",children:(0,_.jsx)(Na,{className:"s__OcDzZH5zYxPb6pSBQD3t",subgroups:c})}),d&&(0,_.jsx)(Bo,{}),e===Xe.wO.LIST&&(0,_.jsxs)("div",{className:m()("s__TVnXaW0Qe46dz6fm_92M",i&&"s__D5Tyqq8iOhFdLOpltfMJ",u&&"s__im68lggzKJOhGkQWT7cv"),children:[r&&(0,_.jsx)(Ca,{className:"s__wf5zf6nQa5y9LeAFkpTb",banner:r}),(0,_.jsx)(En,{})]}),(0,_.jsx)("div",{className:m()("s__O6ER4rQ2knmv8c7II7Ow"),children:e===Xe.wO.MAP&&(0,_.jsx)(In,{type:e})}),s?.info?.type===Yi.Eg.BUY&&(0,_.jsx)("div",{className:m()("s__eMQAsfmr9usIoMjLdWBK",e===Xe.wO.LIST&&"s__LI4ImN0BCrXamMJb5zhL"),children:(0,_.jsx)(ja,{className:"s___weZ7PEY2q5H9FfkHkkz"})})]})};var Ta={container:"s__gFHpZPf8PYmZRrMPkpvB",subgroups:"s__AEbFH5l8BJx_rHyFYbV6",errorContainer:"s__Lh59REF7c4KtNbco9EVg",columnsContainer:"s__nAN8Y9wHWFe1ve2H92Q3",fixedWidth:"s__oZlxiYqfGCDfBDhr_KRH",districtsLayerControl:"s__ClbkaWIIbVWMSnhU8THR",mapContainer:"s__MhZx_RR9HDH2rWQCNZV4",districtsControl:"s__gfmy8s64BlRFRShIb7Uz",hidden:"s__twFWl4HdRMZP4rBqA0gb",buyButtonWrap:"s__H_3C4JH_tpbPGdh4lez8",banner:"s__sThIcdOBZa6PwFuKMAwM"};const Ia=()=>{const{direction:e,refetchPlace:t}=(0,o.useUnit)({refetchPlace:a.mH.inputs.fetch,direction:ot.R.outputs.$guideId});return(0,_.jsxs)(le.A,{className:"s__j322wraaRspPgt9yfQZS",children:[(0,_.jsx)(le.A.Icon,{mod:de.i.Warning}),(0,_.jsx)(le.A.Actions,{children:(0,_.jsx)(le.A.Action,{onClick:()=>t({direction:e})})})]})};const Aa=(0,i.forwardRef)((({children:e,visible:t,className:s},i)=>(0,_.jsx)("div",{ref:i,"body-scroll-lock-ignore":"",className:m()("s__eSUQ6jYIlunPwOWAjju1",!t&&"s__hUQiO5Av5ralA9oGaGSr",s),children:e})));Aa.displayName="ModalContentPanel";const{PlaceDetails:Ma}=Vs.containers,Ea="--travel-map-place-details-top-controls-hovered",$a=()=>{const{setScrollElement:e,isScrolledToBottom:t}=(0,Qs.IN)(),{shouldShowPlaceDetails:s,isHotelsTab:n,shareLink:a,onCopyClick:r,showButton:l,isFavorite:c,isUserChangedFavorite:d,addToFavorites:u,removeFromFavorites:p,isLoading:h,error:g}=(0,o.useUnit)({shouldShowPlaceDetails:ri.outputs.$placeDetailsOpened,isHotelsTab:Go.i.outputs.$isHotelsTab,shareLink:C.A_.outputs.$shareLink,isLoading:C.A_.outputs.$isLoading,error:C.A_.outputs.$error,onCopyClick:Vs.inputs.contentSharingClicked,addToFavorites:R.q.inputs.addToFavorites,removeFromFavorites:R.q.inputs.removeFromFavorites,showButton:R.q.outputs.$showButton,isFavorite:R.q.outputs.$isFavorite,isUserChangedFavorite:R.q.outputs.$isUserChangedFavorite}),f=i.useCallback((()=>{a&&r(a)}),[a,r]),x=(0,i.useRef)(null),y=(0,i.useCallback)((()=>{x?.current&&x.current.classList.add(Ea)}),[]),v=(0,i.useCallback)((()=>{x?.current&&x.current.classList.remove(Ea)}),[]);return(0,_.jsxs)(Aa,{ref:e,visible:s,className:m()("s__jlgfoZ2KdwpUrSVSfdAL","s__NxXOlmeVwLlOGETwTkl5"),children:[(0,_.jsx)(mn,{className:"s__NWMuQVhptIUCdyV8GFl2"}),(0,_.jsxs)("div",{ref:x,className:"s__Kmu8Vfu4zIHKyMWK2oUx",children:[!h&&!g&&(0,_.jsx)(j,{onMouseEnter:y,onMouseLeave:v,children:(0,_.jsxs)(j.RightSide,{children:[(0,_.jsx)(j.ShareButton,{onClick:f}),(0,_.jsx)(j.FavoriteButton,{showButton:l,isFavorite:c,enableAnimation:d||!c,onClick:c?p:u})]})}),(0,_.jsx)(Ma,{isScrolledToBottom:t,isHotelsTab:n})]})]})};var Da={root:"s__aeZMBYNm5qyq_qsNYohv",controls:"s__nLEQ2WBkXu5GN9uAWhdA",label:"s__aUtZHzAqAnZFesUVqAJz",input:"s__GHBx31KzjQjdf3y_Tl4A",toggleButton:"s__eh96x9HgDajcWs_2GBhw",collisionRadiusCheckbox:"s__eLchR8KTfwdnnKZeLaKF",textValue:"s__DUNgvPB8LcFyGNDAaYgl"};const Ba=({value:e,label:t,min:s,max:i,step:o,onChange:n})=>(0,_.jsxs)("div",{className:Da.control,children:[(0,_.jsxs)("div",{className:Da.label,children:[(0,_.jsx)("span",{children:t}),(0,_.jsx)("span",{children:e})]}),(0,_.jsx)("input",{type:"range",className:Da.input,min:s,max:i,value:e,step:o,onChange:e=>{n(Number(e.target.value))}})]}),La=()=>{const{sizes:e,maxLCount:t,startZoom:s,mapbox:n,setLSize:r,setMSize:l,setSSize:c,setMaxLCount:d,toggleCollisionRadius:u}=(0,o.useUnit)({sizes:hi.travelMapPublicApi.debugControls.outputs.$sizes,setLSize:hi.travelMapPublicApi.debugControls.inputs.setLSize,setMSize:hi.travelMapPublicApi.debugControls.inputs.setMSize,setSSize:hi.travelMapPublicApi.debugControls.inputs.setSSize,maxLCount:hi.travelMapPublicApi.debugControls.outputs.$maxLCount,setMaxLCount:hi.travelMapPublicApi.debugControls.inputs.setMaxLCount,startZoom:a.mH.outputs.$startZoom,toggleCollisionRadius:hi.travelMapPublicApi.debugControls.inputs.toggleCollisionRadius,mapbox:rs.X.outputs.$mapboxInstance}),[p,m]=i.useState(!1),[h,g]=i.useState(s||0),f=e[Ci.B.Large],x=e[Ci.B.Medium],y=e[Ci.B.Small];return(0,i.useEffect)((()=>{n&&n.on("zoom",(e=>{g(Number.parseFloat(e.target.getZoom().toFixed(2)))}))}),[n]),s?(0,_.jsxs)("div",{className:Da.root,children:[p&&(0,_.jsxs)("div",{className:Da.controls,children:[(0,_.jsx)(Ba,{label:"L size",value:f,min:40,max:240,onChange:r}),(0,_.jsx)(Ba,{label:"M size",value:x,min:20,max:100,onChange:l}),(0,_.jsx)(Ba,{label:"S size",value:y,min:8,max:60,onChange:c}),(0,_.jsx)(Ba,{label:"Max L count",value:t,min:1,max:6,onChange:d}),(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{className:Da.label,children:"Zoom"}),(0,_.jsx)("div",{className:Da.textValue,children:h})]}),(0,_.jsxs)("div",{className:Da.collisionRadiusCheckbox,children:[(0,_.jsx)("input",{id:"debug-pins-radiuses",type:"checkbox",onChange:u}),(0,_.jsx)("label",{htmlFor:"debug-pins-radiuses",className:Da.label,children:"Enable collision radius"})]})]}),(0,_.jsxs)("button",{className:Da.toggleButton,onClick:()=>m((e=>!e)),children:[p?"Hide":"Show"," controls"]})]}):null},Oa=({data:e})=>{const{error:t,placesListOpened:s,shouldShowTabsList:n,isMobile:r,selectedLayerType:l,currentLayer:u,viewMode:p,isMapDebugEnabled:h,banner:g,subgroups:f}=(0,o.useUnit)({error:a.mH.outputs.$error,placesListOpened:ri.outputs.$shouldShowPlacesListView,shouldShowTabsList:ri.outputs.$layerTabsOpened,isMobile:d.l.outputs.$isMobile,selectedLayerType:U.l.outputs.$layer,currentLayer:hi.travelMapPublicApi.selectedPlace.outputs.$tab,viewMode:ls.Lw.outputs.$value,isMapDebugEnabled:c.qF.outputs.$isMapDebugEnabled,banner:U.l.outputs.$banner,subgroups:hi.travelMapPublicApi.subgroups.outputs.$subgroups}),x=i.useRef(null),y=x?.current?.clientWidth,v=(0,Js.D)(x.current?.clientWidth),b=i.useMemo((()=>y!==v),[y,v]);return(0,o.useGate)(hi.travelMapPublicApi.modal.inputs.ModalGate),t?(0,_.jsx)("div",{className:m()(Ta.errorContainer),children:(0,_.jsx)(Ia,{})}):r?(0,_.jsx)(Pa,{}):(0,_.jsxs)("div",{className:m()(Ta.container),children:[(0,_.jsx)($a,{}),(0,_.jsxs)(Aa,{visible:n,children:[g&&(0,_.jsx)(Ca,{className:Ta.banner,banner:g}),(0,_.jsx)(aa,{})]}),(0,_.jsx)(Aa,{visible:s,className:Ta.fixedWidth,children:(0,_.jsx)(En,{})}),e&&null!==l&&(0,_.jsxs)("div",{ref:x,className:Ta.mapContainer,children:[(0,_.jsx)(Bo,{shouldResizeMap:b,className:Ta.map}),(0,_.jsx)(In,{type:p}),u?.info?.type===Xe.Eg.BUY&&(0,_.jsx)("div",{className:Ta.buyButtonWrap,onClick:void 0,children:(0,_.jsx)(ja,{className:Ta.buyButton})}),f&&(0,_.jsx)(Na,{className:Ta.subgroups,subgroups:f})]}),h&&(0,_.jsx)(La,{})]})};var za="s__aoOt9X36ps_F7s0Hlqdy",Fa=s(22801);const Ua=()=>{const{viewMode:e,switchViewMode:t}=(0,o.useUnit)({viewMode:ls.Lw.outputs.$value,switchViewMode:ls.Lw.inputs.toggle});return(0,_.jsx)("button",{className:m()("s__TplU0JcSdbSnu_nUgxLq",e===Xe.wO.LIST&&"s__QgUf7z2Bpavtejri6GAJ"),onClick:t,children:(0,_.jsx)(Fa.o,{className:"s__lDLsqlNklfbV182sulmX"})})},Ra=({title:e,onClick:t})=>{const s=(0,i.useMemo)((()=>(e?.length??0)>=28?P.y.Body1Semi:P.y.Title4Semi),[e]);return(0,_.jsx)("div",{className:"s__dMMgR78KSQxG3aUMPGCT",children:(0,_.jsxs)("div",{className:"s__ZOAZY96LX5bQaGFuvAMw",children:[(0,_.jsx)("div",{children:(0,_.jsx)(N.x,{className:"s__jErEYhx9eZantQk97L4w",type:s,truncateMode:P.k.TwoLines,children:e})}),(0,_.jsxs)("div",{className:"s__OSJjvDoxieG1N6gxyKQ7",children:[(0,_.jsx)(Ua,{}),(0,_.jsx)(y.P,{className:m()("s__ZbtRhoJBovLsBSG4enau","s__wIAXMt4XME_QZQ51MoUH"),onClick:t})]})]})})},Ha=({isMobile:e,title:t,children:s,onClose:n})=>{const{t:a}=(0,Q.useTranslation)("widget_travel_map"),l=t||a("modal.layersTitle"),{isOpen:c,selectedLayerType:d,viewMode:u}=(0,o.useUnit)({isOpen:r.I.outputs.$isOpened,selectedLayerType:U.l.outputs.$layer,viewMode:ls.Lw.outputs.$value}),p=(0,i.useRef)(null);(0,Qs.cF)(c),(0,i.useEffect)((()=>{e&&p.current&&u===Xe.wO.LIST&&p.current.scrollTo({top:0})}),[d,e]);const h={visible:c,noAutoFocus:!0,onClose:n,dataTestId:"travel-map-modal"};return e?(0,_.jsxs)(Me.u,{className:m()(za),scrollAreaRef:p,noHeader:!0,...h,children:[(0,_.jsx)(Ra,{title:l,onClick:n}),s,(0,_.jsx)("div",{className:"s__Pi0fSN5wMz5SPnqMcDZW"})]}):(0,_.jsxs)(Me.u,{className:za,noHeader:!0,...h,onClose:n,children:[s,(0,_.jsx)(y.P,{className:"s__MTrQ2F0LFDBlld70vaDb",onClick:n})]})};var qa=s(77746);function Za(){const{isOnboardingVisible:e,onboarding:t,closeOnboarding:s,goToFavoriteGroupClicked:i}=(0,o.useUnit)({isOnboardingVisible:R.q.outputs.$isOnboardingVisible,onboarding:C.A_.outputs.$favoriteOnboarding,closeOnboarding:R.q.inputs.closeOnboarding,goToFavoriteGroupClicked:R.q.inputs.goToFavoriteGroupClicked});return t?(0,_.jsx)(qa.A,{message:t.title,icon:(0,_.jsx)("div",{className:"s__Y0tnM8Lxd1QiuALyNVW5",children:(0,_.jsx)("img",{src:t.icon.svg,alt:""})}),onActionButtonClick:i,actionButtonLabel:t.button_text,onClose:e=>{s(e?"manual":"auto")},visible:e}):null}const{PlaceDetailsPopup:Wa}=Vs.containers,Ga=()=>{const{placeData:e,isMobile:t,closed:s}=(0,o.useUnit)({placeData:a.mH.outputs.$data,isMobile:d.l.outputs.$isMobile,closed:r.I.inputs.close});return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(Ha,{title:e?.title,isMobile:t,onClose:()=>s(!0),children:(0,_.jsx)(Oa,{data:e})}),(0,_.jsx)(Za,{}),t&&(0,_.jsx)(Wa,{})]})};s(33330);var Qa=s(33622),Ya=s(2793),Xa=s(28257);const{hide:Va}=Xa.u.inputs,{$shown:Ja}=Xa.u.outputs,{removeMapParams:Ka}=is.aj.inputs,er=(0,k.createEvent)({sid:"bqytvb"});(0,k.sample)({and:[{clock:er,target:[Va,Ka]}],or:{sid:"g5j0i1"}});const tr={inputs:{clicked:er},outputs:{$isVisible:Ja}},sr=()=>{const{alertShown:e,clicked:t}=(0,o.useUnit)({...tr.inputs,alertShown:tr.outputs.$isVisible}),{t:s}=(0,Q.useTranslation)("widget_travel_map");return(0,_.jsx)(Qa.V,{padding:16,className:"s__FGONB0m9zIK3tRc5Fcux",visible:e,children:(0,_.jsxs)("div",{className:"s__aaLXjqUV9nWUo6ygTl8j",children:[(0,_.jsx)("div",{className:"s__QhGUOXUhr2o9KIkxUXB6",children:(0,_.jsx)(Ya.Icon24ColorWarning,{width:40,height:36})}),(0,_.jsx)(N.x,{type:P.y.Body1Bold,children:s("unavailableContentAlert")}),(0,_.jsx)(St.z,{className:"s__okZuDSbBKd2tR1DmjPtA",mod:Nt.Ly.Default,size:Nt.qE.M,onClick:t,children:s("wrongMapParamsAlertButton")})]})})};var ir=s(47166),or=s.n(ir),nr=s(68243),ar=s(33380),rr=s(11);const lr=or().bind({"paywall-modal":"s__erN5eqI0EvRg2bYPyq3n",background:"s__Q5VDomoCc6k8QDY7AbME",navbar:"s__ZPOSyWnj7mfXIa80GdeO","text-animation":"s__cBIUDDPM7Q394hrg3DK4","content-keyframes":"s__BSzFhq0kNrUnQLQ41uqk","actions-animation":"s__OZven0GUTmSme1g8WsBW","logo-animation":"s__EYpOfYJvEhsS5gxFVjd9"}),{forBrand:cr}=Ln.U.inputs,dr=({text:e,buttonText:t,buttonAction:s,isVisible:n,onClose:a})=>{const r=(0,o.useUnit)(Ln.U.outputs.$brand),l=cr(r,{[Bn.qb]:nr.T.Monogram,[Bn.R2]:nr.T.BurdGlasses}),c=(0,i.useMemo)((()=>({text:t,onClick:s})),[t,s]);return(0,_.jsxs)(Me.u,{visible:n,className:lr("paywall-modal"),onClose:a,noHeader:!0,dataTestId:"paywall-modal",children:[(0,_.jsx)("div",{className:lr("navbar"),children:(0,_.jsx)(Ee.w,{transparent:!0,shadow:!1,children:(0,_.jsx)(Ee.w.RightAccessory,{children:(0,_.jsx)(y.P,{background:"bright",onClick:a,"data-test-id":"paywall-modal-close-button"})})})}),(0,_.jsx)("div",{className:lr("background"),children:(0,_.jsx)(ar.E,{theme:"accent"})}),(0,_.jsx)(rr.z,{children:(0,_.jsx)(nr.n,{logo:l,title:e,logoClassname:lr("logo-animation"),textClassname:lr("text-animation"),children:(0,_.jsx)(nr.n.ActionButtons,{className:lr("actions-animation"),primaryButtonProps:c})})})]})};var ur=s(90309);const{$paywallEntrypoint:pr,$isPaywallOpened:mr}=ur.x.outputs,{closeGuidesPaywallModal:hr}=ur.x.inputs,{entryPointInteracted:gr}=gn.X.inputs,_r=(0,k.createEvent)({sid:"-lwmzhl"}),fr=(0,k.createEvent)({sid:"-5bt7m6"});(0,k.sample)({and:[{clock:_r,source:{paywallEntrypoint:pr},fn:({paywallEntrypoint:e})=>e,target:[hr,gr]}],or:{sid:"bdy0iy"}}),(0,k.sample)({and:[{clock:fr,target:hr}],or:{sid:"btc952"}});const xr={closed:fr,clicked:_r},yr={$isVisible:mr},vr=()=>{const{t:e}=(0,Q.useTranslation)("widget_travel_map"),{$isVisible:t,brand:s,clicked:i,closed:n}=(0,o.useUnit)({brand:Ln.U.outputs.$brand,...xr,...yr});return(0,_.jsx)(dr,{text:e(`paywallModal.${s}.title`),buttonText:e(`paywallModal.${s}.button`),isVisible:t,buttonAction:i,onClose:n})},{ProductPurchase:br}=l.L.containers,jr=()=>{const{readyToFetch:e,isPaidContentEnabled:t,isGuidesModalOpened:s}=(0,o.useUnit)({readyToFetch:a.mH.inputs.readyToFetchModal,isGuidesModalOpened:r.I.outputs.$isGuidesModalOpened,isPaidContentEnabled:c.qF.outputs.$isPaidWebContentEnabled});return(0,i.useEffect)((()=>(s&&e(!0),()=>{e(!1)})),[e,s]),(0,_.jsxs)(n.Ib,{children:[(0,_.jsx)(Ga,{}),(0,_.jsx)(sr,{}),(0,_.jsx)(vr,{}),t&&(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(br,{})})]})}},3202:function(e,t,s){"use strict";let i;s.d(t,{B:function(){return i}}),function(e){e.Large="large",e.Medium="medium",e.Small="small"}(i||(i={}))},26074:function(e,t,s){"use strict";s.d(t,{A4:function(){return n},A5:function(){return i},cu:function(){return o}});const i=e=>{let[t,s,i,o]=[1/0,1/0,-1/0,-1/0];return e.coordinates[0].forEach((([e,n])=>{t>e&&(t=e),s>n&&(s=n),i<e&&(i=e),o<n&&(o=n)})),[t,s,i,o]},o=(e,t)=>{if(!e)return null;const s=e.features.find((e=>String(e.properties?.district_id)===t));return s?s.geometry:null},n=({viewportSize:e,pinSize:t,pinPosition:s})=>{const i=s.y+t.height/2<e.height,o=s.y-t.height>t.height/2,n=s.x+t.width<e.width;return[i,o,s.x-t.width>t.width/2,n].every(Boolean)}},45374:function(e,t,s){"use strict";var i=s(45338),o=s(85893);t.Z=function(e){const{children:t,className:s,style:n,...a}=e,r=(0,i.QS)(a);return(0,o.jsx)("div",{...r,style:n,className:s,children:t})}},11:function(e,t,s){"use strict";s.d(t,{z:function(){return x}});var i=s(94184),o=s.n(i),n=s(67294),a=s(4190),r=s(86064),l=s(89421),c=s(38387),d=s(22026),u={root:"s__YardovsqapdzWUWwEqhP",icon:"s__X7FmkbGZQtcSrCy9W6rA",crown:"s__Xpw0P7LYEv2rUDsJlSRk",notes:"s__zZlaU5ZPADmXdcke3I8Q",shield:"s__eoLBznUR8f2HA6f0OpR3",play:"s__ys1N8CToyVXe3SL8m7Xq",bubble:"s__OTcjT53mtLc77Vt0TUXQ",pin:"s__PpmpbnpcsuCIWDhndIux",percent:"s__CzsyFECxxdFX24dAaFfn",heart:"s__V9V5PqOrsgbZ98AtRxtH"},p=s(85893);const m={[r.L.Desktop]:64,[r.L.Tablet]:48,[r.L.MobileLandscape]:40,[r.L.Mobile]:40},h=({name:e,className:t,alwaysGradient:s})=>{const i=(0,a.useUnit)(l.H.outputs.$isNight),n=(0,a.useUnit)(c.l.outputs.$currentBreakpoint),r=n?{width:m[n.name],height:m[n.name]}:{},h=i||s?"gradient":"flat";return(0,p.jsx)("div",{className:o()(u.root,t),children:(0,p.jsx)(d.T,{...r,className:o()(u.icon,u[e]),name:e,type:h})})},g=(0,n.memo)(h);var _=s(52979),f="s__jOqovbxZbjvz4ZYQ3xtQ";const x=({alwaysGradientIcons:e,children:t})=>(0,p.jsx)(_.A,{children:(0,p.jsxs)("div",{className:"s__WNFTfKkPyhayEev6QhSa",children:[(0,p.jsx)(g,{alwaysGradient:e,name:"heart",className:o()("s__uG4xePbcrHib8c6zChgF","s__M3YhDty2Z_3BlKVk9JkP")}),(0,p.jsx)(g,{alwaysGradient:e,name:"crown",className:o()("s__V32JbC6QqmElTUcMWQ0Q",f,f)}),(0,p.jsx)(g,{alwaysGradient:e,name:"notes",className:o()("s__kmMlA_2QQH0tXPTr0XMJ","s__eAVUm6AG7npdSz6DGGCu")}),(0,p.jsx)(g,{alwaysGradient:e,name:"shield",className:o()("s__DGvV68agwyKZiSDOUkeT","s__bVCvzCixDFd6PJPZWxjw")}),(0,p.jsx)(g,{alwaysGradient:e,name:"bubble",className:o()("s__Qj6aSKRMK8wkrlDWMobO","s__KGGiTh_me38p63A8hyRa")}),(0,p.jsx)(g,{alwaysGradient:e,name:"pin",className:o()("s__rL88EbsD5N7LJY_HVif8","s__uMUJ0OvUaIGFMD9kiwod")}),(0,p.jsx)(g,{alwaysGradient:e,name:"percent",className:o()("s__SAsUjQNlRZcIY5N3rN2w","s__rTUjtrH3q1q2av4zTsWs")}),(0,p.jsx)(g,{alwaysGradient:e,name:"play",className:o()("s__PXzBW_l0QDa2rDl7mFn9","s__TrNnAA8Wl9EfYNMic2OR")}),t]})})},52979:function(e,t,s){"use strict";s.d(t,{A:function(){return o}});var i=s(85893);const o=({children:e})=>(0,i.jsx)("main",{className:"s__SkuYFCNWQdvexcY26ce_",children:e})},74423:function(e,t,s){var i=s(92822)("get",s(27361));i.placeholder=s(69306),e.exports=i},45338:function(e,t,s){"use strict";s.d(t,{QS:function(){return c}});var i=s(67294);const o={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},n={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},a="mousemove",r="mouseup";function l(e,t){if(0===t)return e;const s=Math.PI/180*t;return[e[0]*Math.cos(s)+e[1]*Math.sin(s),e[1]*Math.cos(s)-e[0]*Math.sin(s)]}function c(e){const{trackMouse:t}=e,s=i.useRef(Object.assign({},n)),c=i.useRef(Object.assign({},o)),d=i.useRef(Object.assign({},c.current));let u;for(u in d.current=Object.assign({},c.current),c.current=Object.assign(Object.assign({},o),e),o)void 0===c.current[u]&&(c.current[u]=o[u]);const[p,m]=i.useMemo((()=>function(e,t){const s=t=>{const s="touches"in t;s&&t.touches.length>1||e(((e,o)=>{o.trackMouse&&!s&&(document.addEventListener(a,i),document.addEventListener(r,d));const{clientX:c,clientY:u}=s?t.touches[0]:t,p=l([c,u],o.rotationAngle);return o.onTouchStartOrOnMouseDown&&o.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},e),n),{initial:p.slice(),xy:p,start:t.timeStamp||0})}))},i=t=>{e(((e,s)=>{const i="touches"in t;if(i&&t.touches.length>1)return e;if(t.timeStamp-e.start>s.swipeDuration)return e.swiping?Object.assign(Object.assign({},e),{swiping:!1}):e;const{clientX:n,clientY:a}=i?t.touches[0]:t,[r,c]=l([n,a],s.rotationAngle),d=r-e.xy[0],u=c-e.xy[1],p=Math.abs(d),m=Math.abs(u),h=(t.timeStamp||0)-e.start,g=Math.sqrt(p*p+m*m)/(h||1),_=[d/(h||1),u/(h||1)],f=function(e,t,s,i){return e>t?s>0?"Right":"Left":i>0?"Down":"Up"}(p,m,d,u),x="number"==typeof s.delta?s.delta:s.delta[f.toLowerCase()]||o.delta;if(p<x&&m<x&&!e.swiping)return e;const y={absX:p,absY:m,deltaX:d,deltaY:u,dir:f,event:t,first:e.first,initial:e.initial,velocity:g,vxvy:_};y.first&&s.onSwipeStart&&s.onSwipeStart(y),s.onSwiping&&s.onSwiping(y);let v=!1;return(s.onSwiping||s.onSwiped||s[`onSwiped${f}`])&&(v=!0),v&&s.preventScrollOnSwipe&&s.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},e),{first:!1,eventData:y,swiping:!0})}))},c=t=>{e(((e,s)=>{let i;if(e.swiping&&e.eventData){if(t.timeStamp-e.start<s.swipeDuration){i=Object.assign(Object.assign({},e.eventData),{event:t}),s.onSwiped&&s.onSwiped(i);const o=s[`onSwiped${i.dir}`];o&&o(i)}}else s.onTap&&s.onTap({event:t});return s.onTouchEndOrOnMouseUp&&s.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},e),n),{eventData:i})}))},d=e=>{document.removeEventListener(a,i),document.removeEventListener(r,d),c(e)},u=(e,t)=>{let n=()=>{};if(e&&e.addEventListener){const a=Object.assign(Object.assign({},o.touchEventOptions),t.touchEventOptions),r=[["touchstart",s,a],["touchmove",i,Object.assign(Object.assign({},a),t.preventScrollOnSwipe?{passive:!1}:{})],["touchend",c,a]];r.forEach((([t,s,i])=>e.addEventListener(t,s,i))),n=()=>r.forEach((([t,s])=>e.removeEventListener(t,s)))}return n},p={ref:t=>{null!==t&&e(((e,s)=>{if(e.el===t)return e;const i={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),i.cleanUpTouch=void 0),s.trackTouch&&t&&(i.cleanUpTouch=u(t,s)),Object.assign(Object.assign(Object.assign({},e),{el:t}),i)}))}};return t.trackMouse&&(p.onMouseDown=s),[p,u]}((e=>s.current=e(s.current,c.current)),{trackMouse:t})),[t]);return s.current=function(e,t,s,i){return t.trackTouch&&e.el?e.cleanUpTouch?t.preventScrollOnSwipe!==s.preventScrollOnSwipe||t.touchEventOptions.passive!==s.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:i(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:i(e.el,t)}):(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0}))}(s.current,c.current,d.current,m),p}},1552:function(e,t,s){"use strict";s.d(t,{A:function(){return c}});var i=s(85893),o=s(67294),n=s(94184),a=s(49963),r=s(44619),l={variables:"s__I0q5WaJzL8mUxhW69vXP",chip:"s__hMuRiYBlilVLg0lQkuwV",inner:"s__S_sQwi4mKIdLnSl_nkTj",text:"s__a7q01rTisBNEONaSPiy7",leftElement:"s__iEi8bLHMFMxt1nfeXrrw",rightElement:"s__rrG24L0Db6YxCj0DAk2s",selected:"s__yCSNM5cfOzhqBd9seoU5",disabled:"s__QGuM7QGIzt5Jr5f20dkO",withLeftElement:"s__fdmxCoACUoRCPw6qR6jw",withRightElement:"s___ErzmVcG4RxYi3Mu_XdR"};const c=(0,o.forwardRef)((({isActive:e,isSelected:t,isDisabled:s,className:o,children:c,rightElement:d,leftElement:u,onClick:p,testId:m,contentClassName:h},g)=>{const _=p?"button":"div";return(0,i.jsx)(_,{ref:g,className:n(l.variables,l.chip,{[l.active]:e},{[l.selected]:t},{[l.disabled]:s},{[l.withRightElement]:!!d},{[l.withLeftElement]:!!u},o),disabled:!("button"!==_||!s)||void 0,onClick:p,"data-test-id":m??"chip",children:(0,i.jsxs)("div",{className:n(l.inner),children:[u&&(0,i.jsx)("div",{className:n(l.leftElement),children:u}),(0,i.jsx)(a.x,{className:n(l.text,h),type:r.y.Body2Regular,truncateMode:r.k.SingleLine,children:c}),d&&(0,i.jsx)("div",{className:n(l.rightElement),children:d})]})})}));c.displayName="Chip"},90924:function(e,t,s){"use strict";s.d(t,{_:function(){return a}});var i=s(85893),o=s(67294);const n=({className:e,...t},s)=>(0,i.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:s,style:{display:"inline-block"},...t,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.674 14.101a7.01 7.01 0 0 1-.138.184L12.5 21h-1l-5.036-6.715a7.1 7.1 0 0 1-.138-.184L6.25 14h.004a7 7 0 1 1 11.492 0h.004l-.076.101ZM12 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"})}),a=(0,o.memo)((0,o.forwardRef)(n));a.displayName="Icon24CommonMarker"},99441:function(e,t,s){"use strict";s.d(t,{w:function(){return a}});var i=s(85893),o=s(67294);const n=({className:e,...t},s)=>(0,i.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:s,style:{display:"inline-block"},...t,children:(0,i.jsx)("path",{d:"M4.383 5.42A4.899 4.899 0 0 0 3 8.92L3 8.999c0 3.6 5.667 9.5 8.5 12h1c2.834-2.5 8.5-8.4 8.5-12v-.08a4.899 4.899 0 0 0-1.382-3.498 4.617 4.617 0 0 0-7.005.398L12 6.614l-.613-.795a4.617 4.617 0 0 0-7.004-.398Z"})}),a=(0,o.memo)((0,o.forwardRef)(n));a.displayName="Icon24ControlsHeart"},22801:function(e,t,s){"use strict";s.d(t,{o:function(){return a}});var i=s(85893),o=s(67294);const n=({className:e,...t},s)=>(0,i.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:s,style:{display:"inline-block"},...t,children:(0,i.jsx)("path",{d:"M7 8h14V6H7v2ZM7 13h14v-2H7v2ZM21 18H7v-2h14v2ZM3 13h2v-2H3v2ZM5 8H3V6h2v2ZM3 18h2v-2H3v2Z"})}),a=(0,o.memo)((0,o.forwardRef)(n));a.displayName="Icon24ControlsList"},42811:function(e,t,s){"use strict";s.d(t,{E:function(){return a}});var i=s(85893),o=s(67294);const n=({className:e,...t},s)=>(0,i.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:s,style:{display:"inline-block"},...t,children:[(0,i.jsx)("path",{d:"M12.5 2h-1L7 6.5 8.5 8 11 5.5V16h2V5.5L15.5 8 17 6.5 12.5 2Z"}),(0,i.jsx)("path",{d:"M7 12a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1h-1v-2h1a3 3 0 0 1 3 3v5a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3v-5a3 3 0 0 1 3-3h1v2H7Z"})]}),a=(0,o.memo)((0,o.forwardRef)(n));a.displayName="Icon24ControlsShare"},25777:function(e,t,s){"use strict";s.d(t,{k:function(){return l}});var i=s(85893),o=s(67294),n=s(94184),a=s(54844),r={variables:"s__A_RowF_6k9EaC_ZWMPVA",progressBar:"s__MGj9xlgK7ZL0DnEsSidX",base:"s__xdSLhlQ8suVnO97y15lR",progress:"s__oJ6t5JdhUTbYWlhQHjtT",zeroHeight:"s__v2uWDNTVSjPKP7aI_VuQ",determinate:"s__QESKGAdk6wWiWSi4lzPF",indeterminate:"s__ZS2FgQDXN7KhYNDyAJZg",onLight:"s__EBrUorgjjv6cdzlqZpLr",onBright:"s__eO31yrgcn8wWgu2_mvWe",onDark:"s__pGfNDLCBGgc8PLXZEh0w"};const l=(0,o.forwardRef)(((e,t)=>{const{className:s,mod:o=a.Z.OnLight,definition:l,showBackground:c=!0,zeroHeight:d=!1}=e;let u=0;const p={};return e.definition===a.g.Determinate&&(u=e.progress??0,u=Math.min(u,100),u=Math.max(u,0),p.width=`${u}%`),(0,i.jsxs)("div",{ref:t,className:n(r.variables,r.progressBar,r[o],{[r.zeroHeight]:d},s),children:[c&&(0,i.jsx)("div",{className:r.base}),(0,i.jsx)("div",{className:n(r.progress,r[l]),style:p,"data-progress":u})]})}));l.displayName="ProgressBar"},54844:function(e,t,s){"use strict";var i,o;s.d(t,{Z:function(){return i},g:function(){return o}}),function(e){e.OnLight="onLight",e.OnDark="onDark",e.OnBright="onBright"}(i||(i={})),function(e){e.Determinate="determinate",e.Indeterminate="indeterminate"}(o||(o={}))},77746:function(e,t,s){"use strict";s.d(t,{A:function(){return b}});var i=s(85893),o=s(73935),n=s(67294),a=s(37723),r=s(94184),l=s(1156),c=s(39535),d=s(5393),u=s(49963),p=s(44619),m={animationDuration:"300ms",collapseDuration:"500ms",snackbar:"s__nau3qzn1a25Vlq6IJr12",closeButton:"s__Te5X0Nma66BRrrdmQ1t3",topBlock:"s__zx1XdhRv9bZLgWiAYtrq",messageBlock:"s__kgKQO_65C9tO3_3l7btg",icon:"s__KjLAR_iXxZmFNRjZFUin",onDark:"s__ehXjBnjZTZ__ik6C1vky",button:"s__y_qhZWvFFSG76DgbtwU3",appear:"s__MAKpciEIHzVhbXkCkQSh",enter:"s__rYD0VssPUUtsGwdmmWTY",appearActive:"s__SUF4Tr6k3Jct71wbbEeL",enterActive:"s__s7T2DKA3BgGqVrj4Eeff",exit:"s___ZBJmfnjzZJJQC1M7W4m",exitActive:"s__jYHQLzNE8kX_s4IiuxGQ"};const h=parseInt(m.animationDuration,10),g=parseInt(m.collapseDuration,10),_={appear:m.appear,appearActive:m.appearActive,enter:m.enter,enterActive:m.enterActive,exit:m.exit,exitActive:m.exitActive},f=({actionButtonLabel:e,className:t,disableAutoClose:s=!1,icon:o,message:f,onActionButtonClick:x,onClose:y,paused:v,visible:b})=>{const[j,k]=(0,n.useState)({}),w=(0,n.useRef)(null),{clearCollapseStyles:C,handleExit:S,handleExiting:N}=((e,t)=>({clearCollapseStyles:()=>{t({})},handleExit:()=>{const s=e.current?.clientHeight;t({maxHeight:`${s}px`})},handleExiting:()=>{t({maxHeight:"0px"})}}))(w,k);return(({disableAutoClose:e,onClose:t,paused:s,visible:i})=>{const o=(0,n.useRef)(null),a=()=>{o.current&&(clearTimeout(o.current),o.current=null)},r=(0,n.useCallback)((()=>{e||(a(),o.current=setTimeout((()=>{t()}),4e3))}),[e,t]);(0,n.useEffect)((()=>(i&&r(),a)),[i]),(0,n.useEffect)((()=>{if(!s)return r(),a;a()}),[s])})({disableAutoClose:s,onClose:y,paused:v,visible:b}),(0,i.jsx)(a.Z,{appear:!0,in:b,timeout:{appear:h,enter:h,exit:g},classNames:_,nodeRef:w,onEnter:C,onExit:S,onExiting:N,mountOnEnter:!0,unmountOnExit:!0,children:(0,i.jsxs)("div",{ref:w,className:r(m.snackbar,t),style:j,children:[(0,i.jsxs)("div",{className:m.topBlock,children:[(0,i.jsxs)("div",{className:m.messageBlock,children:[o&&(0,i.jsx)("div",{className:m.icon,children:o}),(0,i.jsx)("div",{className:m.message,children:(0,i.jsx)(u.x,{type:p.y.Body3Regular,children:f})})]}),(0,i.jsx)("div",{className:m.closeButton,children:(0,i.jsx)(d.P,{className:m.onDark,size:"medium",background:"bright",onClick:y})})]}),e&&x&&(0,i.jsx)(l.z,{className:m.button,mod:c.Ly.Custom,priority:c.Ji.Secondary,onClick:x,children:e})]})})},x=(0,n.memo)(f);var y=s(22467);const v=(0,y.I)({key:"snackbars",getNode:()=>{const e=document.createElement("div");return e.classList.add("s__DAaZUG7oLdXMvtEm3hI5"),e}}),b=e=>{const t=v(),{paused:s}=(e=>{const[t,s]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const t=()=>{s(!0)},i=()=>{s(!1)};return e?.addEventListener("mouseenter",t),e?.addEventListener("mouseleave",i),()=>{e?.removeEventListener("mouseenter",t),e?.removeEventListener("mouseleave",i)}}),[e]),{paused:t}})(t);return t?(0,o.createPortal)((0,i.jsx)(x,{...e,paused:s}),t):null}},61079:function(e,t,s){"use strict";s.d(t,{D:function(){return o}});var i=s(67294);const o=e=>{const t=(0,i.useRef)();return(0,i.useEffect)((()=>{t.current=e})),t.current}},13548:function(e,t,s){"use strict";function i(e){return function(){return e}}s.d(t,{Z:function(){return i}})},5282:function(e,t,s){"use strict";s.d(t,{Z:function(){return T}});var i={value:()=>{}};function o(){for(var e,t=0,s=arguments.length,i={};t<s;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new n(i)}function n(e){this._=e}function a(e,t){return e.trim().split(/^|\s+/).map((function(e){var s="",i=e.indexOf(".");if(i>=0&&(s=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:s}}))}function r(e,t){for(var s,i=0,o=e.length;i<o;++i)if((s=e[i]).name===t)return s.value}function l(e,t,s){for(var o=0,n=e.length;o<n;++o)if(e[o].name===t){e[o]=i,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=s&&e.push({name:t,value:s}),e}n.prototype=o.prototype={constructor:n,on:function(e,t){var s,i=this._,o=a(e+"",i),n=-1,c=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++n<c;)if(s=(e=o[n]).type)i[s]=l(i[s],e.name,t);else if(null==t)for(s in i)i[s]=l(i[s],e.name,null);return this}for(;++n<c;)if((s=(e=o[n]).type)&&(s=r(i[s],e.name)))return s},copy:function(){var e={},t=this._;for(var s in t)e[s]=t[s].slice();return new n(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var s,i,o=new Array(s),n=0;n<s;++n)o[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(n=0,s=(i=this._[e]).length;n<s;++n)i[n].value.apply(t,o)},apply:function(e,t,s){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,n=i.length;o<n;++o)i[o].value.apply(t,s)}};var c,d,u=o,p=0,m=0,h=0,g=0,_=0,f=0,x="object"==typeof performance&&performance.now?performance:Date,y="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function v(){return _||(y(b),_=x.now()+f)}function b(){_=0}function j(){this._call=this._time=this._next=null}function k(e,t,s){var i=new j;return i.restart(e,t,s),i}function w(){_=(g=x.now())+f,p=m=0;try{!function(){v(),++p;for(var e,t=c;t;)(e=_-t._time)>=0&&t._call.call(void 0,e),t=t._next;--p}()}finally{p=0,function(){for(var e,t,s=c,i=1/0;s;)s._call?(i>s._time&&(i=s._time),e=s,s=s._next):(t=s._next,s._next=null,s=e?e._next=t:c=t);d=e,S(i)}(),_=0}}function C(){var e=x.now(),t=e-g;t>1e3&&(f-=t,g=e)}function S(e){p||(m&&(m=clearTimeout(m)),e-_>24?(e<1/0&&(m=setTimeout(w,e-x.now()-f)),h&&(h=clearInterval(h))):(h||(g=x.now(),h=setInterval(C,1e3)),p=1,y(w)))}j.prototype=k.prototype={constructor:j,restart:function(e,t,s){if("function"!=typeof e)throw new TypeError("callback is not a function");s=(null==s?v():+s)+(null==t?0:+t),this._next||d===this||(d?d._next=this:c=this,d=this),this._call=e,this._time=s,S()},stop:function(){this._call&&(this._call=null,this._time=1/0,S())}};const N=4294967296;var P=Math.PI*(3-Math.sqrt(5));function T(e){var t,s=1,i=.001,o=1-Math.pow(i,1/300),n=0,a=.6,r=new Map,l=k(p),c=u("tick","end"),d=function(){let e=1;return()=>(e=(1664525*e+1013904223)%N)/N}();function p(){m(),c.call("tick",t),s<i&&(l.stop(),c.call("end",t))}function m(i){var l,c,d=e.length;void 0===i&&(i=1);for(var u=0;u<i;++u)for(s+=(n-s)*o,r.forEach((function(e){e(s)})),l=0;l<d;++l)null==(c=e[l]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return t}function h(){for(var t,s=0,i=e.length;s<i;++s){if((t=e[s]).index=s,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var o=10*Math.sqrt(.5+s),n=s*P;t.x=o*Math.cos(n),t.y=o*Math.sin(n)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function g(t){return t.initialize&&t.initialize(e,d),t}return null==e&&(e=[]),h(),t={tick:m,restart:function(){return l.restart(p),t},stop:function(){return l.stop(),t},nodes:function(s){return arguments.length?(e=s,h(),r.forEach(g),t):e},alpha:function(e){return arguments.length?(s=+e,t):s},alphaMin:function(e){return arguments.length?(i=+e,t):i},alphaDecay:function(e){return arguments.length?(o=+e,t):+o},alphaTarget:function(e){return arguments.length?(n=+e,t):n},velocityDecay:function(e){return arguments.length?(a=1-e,t):1-a},randomSource:function(e){return arguments.length?(d=e,r.forEach(g),t):d},force:function(e,s){return arguments.length>1?(null==s?r.delete(e):r.set(e,g(s)),t):r.get(e)},find:function(t,s,i){var o,n,a,r,l,c=0,d=e.length;for(null==i?i=1/0:i*=i,c=0;c<d;++c)(a=(o=t-(r=e[c]).x)*o+(n=s-r.y)*n)<i&&(l=r,i=a);return l},on:function(e,s){return arguments.length>1?(c.on(e,s),t):c.on(e)}}}},15454:function(e,t,s){"use strict";function i(e,t,s,i){if(isNaN(t)||isNaN(s))return e;var o,n,a,r,l,c,d,u,p,m=e._root,h={data:i},g=e._x0,_=e._y0,f=e._x1,x=e._y1;if(!m)return e._root=h,e;for(;m.length;)if((c=t>=(n=(g+f)/2))?g=n:f=n,(d=s>=(a=(_+x)/2))?_=a:x=a,o=m,!(m=m[u=d<<1|c]))return o[u]=h,e;if(r=+e._x.call(null,m.data),l=+e._y.call(null,m.data),t===r&&s===l)return h.next=m,o?o[u]=h:e._root=h,e;do{o=o?o[u]=new Array(4):e._root=new Array(4),(c=t>=(n=(g+f)/2))?g=n:f=n,(d=s>=(a=(_+x)/2))?_=a:x=a}while((u=d<<1|c)==(p=(l>=a)<<1|r>=n));return o[p]=m,o[u]=h,e}function o(e,t,s,i,o){this.node=e,this.x0=t,this.y0=s,this.x1=i,this.y1=o}function n(e){return e[0]}function a(e){return e[1]}function r(e,t,s){var i=new l(null==t?n:t,null==s?a:s,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function l(e,t,s,i,o,n){this._x=e,this._y=t,this._x0=s,this._y0=i,this._x1=o,this._y1=n,this._root=void 0}function c(e){for(var t={data:e.data},s=t;e=e.next;)s=s.next={data:e.data};return t}s.d(t,{Z:function(){return r}});var d=r.prototype=l.prototype;d.copy=function(){var e,t,s=new l(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return s;if(!i.length)return s._root=c(i),s;for(e=[{source:i,target:s._root=new Array(4)}];i=e.pop();)for(var o=0;o<4;++o)(t=i.source[o])&&(t.length?e.push({source:t,target:i.target[o]=new Array(4)}):i.target[o]=c(t));return s},d.add=function(e){const t=+this._x.call(null,e),s=+this._y.call(null,e);return i(this.cover(t,s),t,s,e)},d.addAll=function(e){var t,s,o,n,a=e.length,r=new Array(a),l=new Array(a),c=1/0,d=1/0,u=-1/0,p=-1/0;for(s=0;s<a;++s)isNaN(o=+this._x.call(null,t=e[s]))||isNaN(n=+this._y.call(null,t))||(r[s]=o,l[s]=n,o<c&&(c=o),o>u&&(u=o),n<d&&(d=n),n>p&&(p=n));if(c>u||d>p)return this;for(this.cover(c,d).cover(u,p),s=0;s<a;++s)i(this,r[s],l[s],e[s]);return this},d.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var s=this._x0,i=this._y0,o=this._x1,n=this._y1;if(isNaN(s))o=(s=Math.floor(e))+1,n=(i=Math.floor(t))+1;else{for(var a,r,l=o-s||1,c=this._root;s>e||e>=o||i>t||t>=n;)switch(r=(t<i)<<1|e<s,(a=new Array(4))[r]=c,c=a,l*=2,r){case 0:o=s+l,n=i+l;break;case 1:s=o-l,n=i+l;break;case 2:o=s+l,i=n-l;break;case 3:s=o-l,i=n-l}this._root&&this._root.length&&(this._root=c)}return this._x0=s,this._y0=i,this._x1=o,this._y1=n,this},d.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},d.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},d.find=function(e,t,s){var i,n,a,r,l,c,d,u=this._x0,p=this._y0,m=this._x1,h=this._y1,g=[],_=this._root;for(_&&g.push(new o(_,u,p,m,h)),null==s?s=1/0:(u=e-s,p=t-s,m=e+s,h=t+s,s*=s);c=g.pop();)if(!(!(_=c.node)||(n=c.x0)>m||(a=c.y0)>h||(r=c.x1)<u||(l=c.y1)<p))if(_.length){var f=(n+r)/2,x=(a+l)/2;g.push(new o(_[3],f,x,r,l),new o(_[2],n,x,f,l),new o(_[1],f,a,r,x),new o(_[0],n,a,f,x)),(d=(t>=x)<<1|e>=f)&&(c=g[g.length-1],g[g.length-1]=g[g.length-1-d],g[g.length-1-d]=c)}else{var y=e-+this._x.call(null,_.data),v=t-+this._y.call(null,_.data),b=y*y+v*v;if(b<s){var j=Math.sqrt(s=b);u=e-j,p=t-j,m=e+j,h=t+j,i=_.data}}return i},d.remove=function(e){if(isNaN(n=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,s,i,o,n,a,r,l,c,d,u,p,m=this._root,h=this._x0,g=this._y0,_=this._x1,f=this._y1;if(!m)return this;if(m.length)for(;;){if((c=n>=(r=(h+_)/2))?h=r:_=r,(d=a>=(l=(g+f)/2))?g=l:f=l,t=m,!(m=m[u=d<<1|c]))return this;if(!m.length)break;(t[u+1&3]||t[u+2&3]||t[u+3&3])&&(s=t,p=u)}for(;m.data!==e;)if(i=m,!(m=m.next))return this;return(o=m.next)&&delete m.next,i?(o?i.next=o:delete i.next,this):t?(o?t[u]=o:delete t[u],(m=t[0]||t[1]||t[2]||t[3])&&m===(t[3]||t[2]||t[1]||t[0])&&!m.length&&(s?s[p]=m:this._root=m),this):(this._root=o,this)},d.removeAll=function(e){for(var t=0,s=e.length;t<s;++t)this.remove(e[t]);return this},d.root=function(){return this._root},d.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},d.visit=function(e){var t,s,i,n,a,r,l=[],c=this._root;for(c&&l.push(new o(c,this._x0,this._y0,this._x1,this._y1));t=l.pop();)if(!e(c=t.node,i=t.x0,n=t.y0,a=t.x1,r=t.y1)&&c.length){var d=(i+a)/2,u=(n+r)/2;(s=c[3])&&l.push(new o(s,d,u,a,r)),(s=c[2])&&l.push(new o(s,i,u,d,r)),(s=c[1])&&l.push(new o(s,d,n,a,u)),(s=c[0])&&l.push(new o(s,i,n,d,u))}return this},d.visitAfter=function(e){var t,s=[],i=[];for(this._root&&s.push(new o(this._root,this._x0,this._y0,this._x1,this._y1));t=s.pop();){var n=t.node;if(n.length){var a,r=t.x0,l=t.y0,c=t.x1,d=t.y1,u=(r+c)/2,p=(l+d)/2;(a=n[0])&&s.push(new o(a,r,l,u,p)),(a=n[1])&&s.push(new o(a,u,l,c,p)),(a=n[2])&&s.push(new o(a,r,p,u,d)),(a=n[3])&&s.push(new o(a,u,p,c,d))}i.push(t)}for(;t=i.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},d.x=function(e){return arguments.length?(this._x=e,this):this._x},d.y=function(e){return arguments.length?(this._y=e,this):this._y}}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/travel_map.560cdfe3e850f3c57228.min.js.map