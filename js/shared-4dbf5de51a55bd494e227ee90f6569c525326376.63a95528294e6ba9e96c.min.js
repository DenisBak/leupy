// (self.__LOADABLE_LOADED_CHUNKS__ = self.__LOADABLE_LOADED_CHUNKS__ || []).push([[22679, 93175], { 77195: function (e, t, s) { "use strict"; s.d(t, { H: function () { return n }, p: function () { return i } }); var a = s(98116); const n = (0, a.createEffect)((() => { try { window.scrollTo({ top: 0 }) } catch (e) { } }), { sid: "-d0h5vd" }), i = (0, a.createEffect)((() => { try { window.scrollTo({ top: 0, left: 0, behavior: "smooth" }) } catch (e) { } }), { sid: "-12zwe7" }) }, 76815: function (e, t, s) { "use strict"; s.d(t, { E: function () { return f } }); var a = s(30091), n = s(98116), i = s(47047), o = s(78364); let r; !function (e) { e.SignUpModal = "b2b-exp-signupModal", e.TicketMainModalBanner = "serp-exp-ticketProductBanner", e.TabbarButton = "b2b-feat-tabbarButton" }(r || (r = {})); var l = s(35529); const c = (0, l.Record)({ enabled: l.Boolean }), d = (0, l.Record)({ enabled: l.Boolean, signUpUrl: l.String, signInUrl: l.String, businessToolsUrl: l.String, campaign: (0, l.Optional)(l.String), phone: (0, l.Optional)(l.String) }), u = (0, l.Record)({ enabled: l.Boolean, link: l.String.optional() }), { createFlag: m } = o.f.inputs, p = (0, n.createEvent)({ sid: "ph9h1" }), h = { $signUpModalFlag: (0, n.withFactory)({ sid: "22misp", fn: () => (0, i.d)((() => m({ name: r.SignUpModal, contract: c, mapValue: ({ enabled: e }) => e, defaultValue: !1 }))) }).$value, $b2bTicketModalBannerFlag: (0, n.withFactory)({ sid: "-97726c", fn: () => (0, i.d)((() => m({ name: r.TicketMainModalBanner, contract: d, defaultValue: { enabled: !1, signUpUrl: "", signInUrl: "", businessToolsUrl: "", campaign: "", phone: "" } }))) }).$value, $b2bTabbarButtonFlag: (0, n.withFactory)({ sid: "-xfap39", fn: () => (0, i.d)((() => m({ name: r.TabbarButton, contract: u, defaultValue: { enabled: !1 } }))) }).$value }, f = (0, a.G6)({ lifecycle: { start: p }, importMetaUrl: "file:///home/jenkins/agent/workspace/selene/client/src/product/b2b/services/flags/index.ts", api: { outputs: h } }) }, 31482: function (e, t, s) { "use strict"; s.d(t, { u: function () { return y }, m: function () { return b } }); var a = s(67294), n = s(94184), i = s.n(n), o = s(4190), r = s(49963), l = s(44619), c = s(1156), d = s(39535), u = s(38387), m = s(33864), p = s(97405), h = { container: "s__C7USyWle8fC170afVtrQ", icon: "s__prngFx82x0qU33OmayFc", title: "s__VtCrt42A8X_cJsOTuKjM", message: "s__svye5St7soZIecGFnkP7", button: "s__w8xM8UoV4GmCmFx_iZMF" }, f = s(85893); const g = i().bind(h); function y({ icon: e, title: t, text: s, onButtonClick: n, buttonText: i, dataTestId: y, layoutClassName: v, containerClassName: b, titleClassName: x, descriptionClassName: _ }) { const C = (0, o.useUnit)(u.l.outputs.$isMobile), w = (0, a.cloneElement)(e, { className: g(e.props.className, h.icon) }), k = (0, a.useCallback)((e => { n && (e.preventDefault(), e.stopPropagation(), n()) }), [n]); return (0, f.jsx)(m.A, { "data-test-id": y, className: v, children: (0, f.jsx)(p.fw, { in: !0, name: "fade", appear: !0, children: (0, f.jsxs)(m.A.Block, { className: g(h.container, b), children: [w, t && (0, f.jsx)(r.x, { tag: "h2", transformOnMobile: !0, type: l.y.Title2Bold, className: g(h.title, x), mobileType: l.y.Title4Bold, children: t }), Array.isArray(s) ? s.map(((e, t) => (0, f.jsx)(r.x, { tag: "p", transformOnMobile: !0, type: l.y.Body1Paragraph, className: h.message, mobileType: l.y.Body2Paragraph, children: e }, t))) : (0, f.jsx)(r.x, { tag: "p", transformOnMobile: !0, type: l.y.Body1Paragraph, className: g(h.message, _), mobileType: l.y.Body2Paragraph, children: s }), i && (0, f.jsx)(c.z, { type: d.Ji.Primary, size: C ? d.qE.S : d.qE.M, className: h.button, onClick: k, children: i })] }) }) }) } const v = i().bind(h); function b({ icon: e, title: t, text: s, onButtonClick: n, buttonText: i, dataTestId: m, containerClassName: p, titleClassName: g, descriptionClassName: y }) { const b = (0, o.useUnit)(u.l.outputs.$isMobile), x = (0, a.cloneElement)(e, { className: v(e.props.className, h.icon) }); return (0, f.jsxs)("div", { "data-test-id": m, className: v(h.container, p), children: [x, t && (0, f.jsx)(r.x, { tag: "h2", transformOnMobile: !0, type: l.y.Title2Bold, className: v(h.title, g), mobileType: l.y.Title4Bold, children: t }), Array.isArray(s) ? s.map(((e, t) => (0, f.jsx)(r.x, { tag: "p", transformOnMobile: !0, type: l.y.Body1Paragraph, className: h.message, mobileType: l.y.Body2Paragraph, children: e }, t))) : (0, f.jsx)(r.x, { tag: "p", transformOnMobile: !0, type: l.y.Body1Paragraph, className: v(h.message, y), mobileType: l.y.Body2Paragraph, children: s }), (0, f.jsx)(c.z, { type: d.Ji.Primary, size: b ? d.qE.S : d.qE.M, className: h.button, onClick: n, children: i })] }) } }, 78465: function (e, t, s) { "use strict"; s.d(t, { X: function () { return Ng } }); var a = s(30091), n = s(98116), i = s(4190), o = s(76830), r = s(54448), l = s(72675), c = s(38032), d = s(29260), u = s(83781), m = s(82672), p = s(11763), h = s(32419), f = s(38387), g = s(96864), y = s(63762), v = s(40038), b = s(76101), x = s(33350), _ = s(41520), C = s(66170), w = s(24943), k = s(659); const { matchPage: S, pages: D } = m.$.outputs, { $isHotelFormActive: F } = p.B.outputs, { iAmInCityScreen: j } = h.D.outputs, { $isMobile: N } = f.l.outputs, { fetchSearchesFx: I } = g.W.inputs, { guestiaInited: M } = g.W.outputs, { nationalParkScreen: T } = y.n.outputs, { countryScreen: A } = x.$.outputs, { weekendsScreen: E } = v.L.outputs, { flexiblePricesResultsScreen: P } = C.p.outputs, { exactPricesResultsScreen: $ } = w.q.outputs, { weekendsPricesResultsScreen: R } = k.v.outputs, { directionScreen: B } = b.A.outputs, { $exploreFlowEnabled: O } = _.l.outputs, H = (0, i.createGate)({ and: [], or: { sid: "-rjgmk4" } }), q = (0, n.createEvent)({ sid: "g7lavf" }), L = (0, n.createStore)(!1, { sid: "2kr527" }).on(q, (() => !0)); (0, n.withFactory)({ sid: "c7huih", fn: () => (0, o.D)({ source: H.open, timeout: 0, target: q, name: "debounce: explore form rendered" }) }); const Z = (0, u.Sy)((0, u.ZE)("service/helios/form/showSeleneForm")); (0, n.sample)({ and: [{ clock: H.open, target: Z }], or: { sid: "cp39i1" } }); const z = (0, n.withFactory)({ sid: "-7z3p42", fn: () => (0, r.or)(j.$active, T.$active, E.$active, A.$active, (0, n.withFactory)({ sid: "a7wpai", fn: () => (0, l.x)(O, P.$active) }), (0, n.withFactory)({ sid: "a8ghvv", fn: () => (0, l.x)(O, $.$active) }), (0, n.withFactory)({ sid: "a90ah8", fn: () => (0, l.x)(O, R.$active) }), (0, n.withFactory)({ sid: "a9k32l", fn: () => (0, l.x)(O, B.$active) }), (0, n.withFactory)({ sid: "am7cpw", fn: () => (0, l.x)(S(D.MapPage).$isOpen, (0, n.withFactory)({ sid: "-q18b3s", fn: () => (0, c.f)(F) })) }), S(D.SearchPage).$isOpen, S(D.HotelsPage).$isOpen, S(D.HotelsMapPage).$isOpen) }), G = (0, n.withFactory)({ sid: "60s11t", fn: () => (0, r.or)(N, (0, n.withFactory)({ sid: "-mpwy9u", fn: () => (0, c.f)(z) })) }), V = (0, n.createEvent)({ sid: "-vf5w43" }); (0, n.sample)({ and: [{ clock: (0, n.withFactory)({ sid: "-y204x0", fn: () => (0, d.m)([M, V]) }), target: I }], or: { sid: "ejmdaq" } }); var U = s(67294), W = s(47420), K = s(28148), J = s(43175), Y = s(87722), X = s(85658); const { searchStarted: Q } = J.J.outputs, { matchPage: ee, pages: te } = m.$.outputs, { $isMobile: se } = f.l.outputs, { $isSimpleSearch: ae, $isComplexSearch: ne, $directionSegments: ie, exact: { $segments: oe } } = W.i.outputs, { $isAviaFormActive: re, $isHotelFormActive: le } = p.B.outputs, { smoothScrollToTop: ce } = X.u.inputs, de = (0, n.combine)({ and: [{ directionSegments: ie, dateSegments: oe }, ({ directionSegments: e, dateSegments: t }) => e.reduce(((e, s, a) => ((0, Y.W6)(s.origin) && (0, Y.W6)(s.destination) && t[a] instanceof Date && e.push({ origin: s.origin, destination: s.destination, date: t[a] }), e)), [])], or: { sid: "o7byvf" } }), ue = (0, n.withFactory)({ sid: "-48d0ue", fn: () => (0, l.x)(re, ae, ee(te.SearchPage).$isOpen, se) }), me = (0, n.withFactory)({ sid: "bzhwjo", fn: () => (0, l.x)(re, ne, ee(te.SearchPage).$isOpen) }), pe = (0, n.createEvent)({ sid: "-ack0am" }), he = (0, n.createStore)(!1, { sid: "-fyyj5c" }), fe = (0, n.withFactory)({ sid: "-i0ck16", fn: () => (0, l.x)(he, (0, n.withFactory)({ sid: "-fjac00", fn: () => (0, c.f)(le) })) }); (0, n.sample)({ and: [{ clock: pe, fn: () => !1, target: he }], or: { sid: "-m9e634" } }), (0, n.sample)({ and: [{ clock: pe, target: ce }], or: { sid: "-m63eiy" } }), (0, n.sample)({ and: [{ clock: Q, filter: (0, n.withFactory)({ sid: "4au45t", fn: () => (0, r.or)(ue, me) }), fn: () => !0, target: he }], or: { sid: "-lrsr3k" } }); const ge = (0, n.createEffect)((e => { document.documentElement.classList.toggle("--collapsed-form", e) }), { sid: "t9jxd5" }); (0, n.sample)({ and: [{ clock: [fe.updates, H.open], source: fe, target: ge }], or: { sid: "-cdfdyb" } }); var ye = s(94184), ve = s.n(ye), be = s(72105), xe = s(65752), _e = s(47047), Ce = s(79403), we = s(84659), ke = s(64441), Se = s(15863), De = s(89154), Fe = (s(26699), s(30040)), je = s(10924), Ne = s(82203), Ie = s(76588), Me = s(80472), Te = s(82525), Ae = s(75381), Ee = s(53788), Pe = s(78260), $e = s(57640), Re = s(35529); const Be = Re.String.withConstraint((e => 2 === e.length)), Oe = Re.String.withConstraint((e => 3 === e.length)), He = (0, Re.Dictionary)(Re.Number, Oe), qe = (0, Re.Dictionary)((0, Re.Dictionary)(He, Oe), Be); var Le = s(6540); const { directionScreen: Ze } = b.A.outputs, { exactPricesResultsScreen: ze } = w.q.outputs, { flexiblePricesResultsScreen: Ge } = C.p.outputs, { weekendsPricesResultsScreen: Ve } = k.v.outputs, { $showPopularDestinationsInCalendar: Ue } = Le.r.outputs, We = (0, n.withFactory)({ sid: "-tiqt5e", fn: () => (0, l.x)(Ue, (0, n.withFactory)({ sid: "-lmcr7i", fn: () => (0, r.or)(Ze.$active, ze.$active, Ge.$active, Ve.$active) })) }), { urlWithApiHost: Ke } = Te.B.outputs, { $origin: Je } = W.i.outputs, { $market: Ye } = Ee.D.outputs, { PRICES_HOST: Xe } = $e.H, Qe = (0, n.combine)({ and: [{ originIata: (0, n.combine)({ and: [Je, Y.EO], or: { sid: "-li6f8v" } }), market: Ye }], or: { sid: "tde3ii" } }), et = We, tt = Ke(Ae.Nv`${Xe}`), st = (0, n.withFactory)({ sid: "-c4xfjl", fn: () => (0, Ie.s5)({ name: "popularDestinations", initialData: [], request: { method: "GET", url: (0, n.combine)({ and: [Qe, tt, ({ originIata: e, market: t }, s) => `${s}/routes/${t}/${e}`], or: { sid: "wu65d7" } }) }, enabled: et, response: { contract: (0, Me.v)(qe), mapData: { source: Qe, fn: ({ result: e }, { originIata: t, market: s }) => function (e, t, s) { if (!s) return []; const a = e[t.toUpperCase()]; if (!a) return []; const n = a[s.toUpperCase()]; return n ? Object.keys(n) : [] }(e, s, t) } } }) }), at = st.start; st.__.executeFx, (0, n.withFactory)({ sid: "-wpdtuk", fn: () => (0, Ie.Np)(st, { automatically: !0 }) }); const nt = st.$data, it = (0, n.createStore)(!1, { sid: "-kwib5b" }).reset(st.started); (0, n.sample)({ and: [{ clock: st.finished.failure, filter: e => !(0, n.withFactory)({ sid: "-z66lmy", fn: () => (0, Ie.Bh)(404) })(e), fn: () => !0, target: it }], or: { sid: "-w78m9n" } }), (0, n.withFactory)({ sid: "-vbwcg2", fn: () => (0, Ie.Fs)(st, { adapter: (0, n.withFactory)({ sid: "-8wnfd2", fn: () => (0, Ie.P3)({ maxEntries: 100 }) }), staleAfter: "10m" }) }); const ot = (0, Pe.cr)("explore", { name: "popular_destinations" }); (0, n.sample)({ and: [{ clock: st.finished.failure, filter: e => { const t = (0, n.withFactory)({ sid: "-npa5ca", fn: () => (0, Ie.eE)(e) }); return !(0, n.withFactory)({ sid: "2a2pda", fn: () => (0, Ie.Bh)(404) })(e) && !t }, fn: ({ error: e }) => ({ msg: "Failed to load popular destinations in calendar", extra: e }), target: ot.sendWarningLog }], or: { sid: "-oiyymn" } }); const { $destination: rt, segmentsInitialDataIsLoaded: lt } = W.i.outputs, ct = (0, n.createEvent)({ sid: "v4bzgn" }); (0, n.sample)({ and: [{ clock: (0, n.withFactory)({ sid: "-pexxxi", fn: () => (0, Se.CJ)({ clock: lt, until: We }) }), target: at }], or: { sid: "3vrt5g" } }); const dt = (0, n.combine)({ and: [{ isPopularDestinationsInCalendarEnabled: We, isRequestFailed: it, destinationCityIata: (0, n.combine)({ and: [rt, Y.EO], or: { sid: "-wlr775" } }), popularIatas: nt }, ({ isPopularDestinationsInCalendarEnabled: e, isRequestFailed: t, destinationCityIata: s, popularIatas: a }) => !e || !s || !!t || a.includes(s)], or: { sid: "-p675t" } }), ut = (0, a.G6)({ importMetaUrl: "file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/popular_destinations/index.ts", lifecycle: { start: ct }, api: { outputs: { $isCurrentDestinationPopular: dt, $isPopularDestinationsInCalendarEnabled: We } } }); var mt = s(21247), pt = s(65740), ht = s(24926), ft = s(82097), gt = s(21593), yt = s(77349), vt = s(11640), bt = s(77234), xt = s(64909), _t = s(63954), Ct = s(27636), wt = s(80094), kt = s(78194), St = s(41609), Dt = s.n(St), Ft = s(48695), jt = s(77195), Nt = s(59051), It = s.n(Nt), Mt = s(5500), Tt = s(40254), At = s(80705), Et = s(67907), Pt = s(48500), $t = s(97405); let Rt; !function (e) { e.CityOrAirportOrPark = "city_or_airport_or_park", e.Country = "country", e.SearchHistory = "search_history", e.Anywhere = "anywhere", e.Weekends = "weekends" }(Rt || (Rt = {})); function Bt(e) { return e ? e.name : "" } function Ot(e) { return !!e && e.type === Mt.A.History } var Ht = s(49963), qt = s(44619), Lt = s(47166), Zt = s.n(Lt), zt = { error: "s__mKolDTwVaUL0fYyF_xuI" }, Gt = s(85893); const Vt = Zt().bind(zt), Ut = ({ text: e, className: t }) => (0, Gt.jsx)(Ht.x, { type: qt.y.CaptionRegular, className: Vt(zt.error, t), children: e }); const Wt = (0, U.forwardRef)((({ className: e, innerClassname: t, error: s, placeholder: a, forwardedRef: n, addonAfter: i, id: o, value: r, dataTestId: l, errorClassName: c, ...d }, u) => (0, Gt.jsxs)("span", { className: ve()("s__wpFcxp_qAyVj00fYC_Mm", e), "data-test-id": "form-input", children: [s && (0, Gt.jsx)(Ut, { text: s, className: c }), (0, Gt.jsx)("input", { ...d, id: o, value: r, ref: n || u, placeholder: a, className: ve()("s__hC7iNZewgvf8fGTsGplA", t, { s__GVyEYllzmxLuvcHhRhT4: !!s }), "data-test-id": l }), i] }))); const Kt = (0, U.forwardRef)((({ innerClassname: e, item: t, dataTestId: s, ...a }, n) => { const i = t?.comment ? (0, Gt.jsx)(Ht.x, { className: "s__i17YpjnSSIPsHEfGGq3b", type: qt.y.CaptionAllCaps, testId: "iata", children: t.comment }) : null; return (0, Gt.jsx)(Wt, { ...a, ref: n, innerClassname: ve()("s__n9EimsKcoimG2V6o0kus", e), addonAfter: i, dataTestId: s }) })); var Jt = s(88236), Yt = { title: "s__slMvzP4HD7_8MRU4ONO3", item: "s__BhG0mmKBqjFJa_vbvtv1", indent: "s__hjhqAU3PtkRuFhiBxYsw", anywhere: "s__p_xk77fIDh4l4Kx7oIMp", highlighted: "s__lP996FhxolMu7H3jlRxP", "--night": "s__qslkTZ9kHT0IAMThZnqb", shadow: "s__k72qgqNlusZ8URNRpkKy", primaryText: "s__DoMPFi0pOpdxJqqqv6_1", text: "s__PFpXoB8Er78MFmktO032", line: "s__onHtzMuc5RQRrOV5GEQD", column: "s__f5fHjUjdp6YP6wWrD3cG", icon: "s__ovhKuBKQDHasBAIP0jTU", flag: "s__H3hMQIWWDmzMgjBa40Ky" }; const Xt = ve().bind(Yt), Qt = ({ items: e, highlightedIndex: t, itemProps: s, onClick: a }) => (0, Gt.jsx)(Gt.Fragment, { children: e.map((e => (0, Gt.jsx)("li", { className: Xt(Yt.item, Yt.anywhere, t === e.index && Yt.highlighted), "data-test-id": "suggested-anywhere", ...s({ item: e, index: e.index, type: "li", onClick: () => a?.(e) }), children: (0, Gt.jsxs)("span", { className: Yt.line, children: [(0, Gt.jsx)(Jt.M, { className: Yt.icon }), (0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.Body3Semi, className: Xt(Yt.primaryText, Yt.text), children: e.name })] }) }, e.name))) }); var es = s(28225), ts = s(49366); const ss = ({ className: e, ...t }, s) => (0, Gt.jsx)("svg", { width: 24, height: 24, viewBox: "0 0 24 24", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: (0, Gt.jsx)("path", { d: "m10.5 18 2-4h-1.35L15.5 4h1l4.35 10H19.5l2 4H17v2h-2v-2h-4.5ZM9 13.994l3.327-7.854a2.496 2.496 0 0 0-1.435-.066 4.002 4.002 0 1 0-7.59 2.453A3 3 0 0 0 5 14h2v6h2v-6.006Z" }) }), as = (0, U.memo)((0, U.forwardRef)(ss)); as.displayName = "Icon24CommonPark"; const ns = ve().bind(Yt), is = ({ items: e, highlightedIndex: t, itemProps: s, showTitle: a, onClick: n }) => { const { t: i } = (0, es.useTranslation)("lib_forms_avia_form"); return (0, Gt.jsxs)(Gt.Fragment, { children: [a && (0, Gt.jsx)(Ht.x, { type: qt.y.FootnoteAllCaps, className: Yt.title, tag: "p", children: i("autocomplete.citiesAndAirports") }), e.map((e => { let a; e.type === Mt.A.Airport && (a = e.inMetropolis ? "" : e.cityName), e.type === Mt.A.City && (a = e.countryName); const i = `${e.name}${a ? "," : ""}`; return (0, Gt.jsxs)("li", { className: ns(Yt.item, t === e.index && Yt.highlighted, e.inMetropolis && Yt.indent), "data-test-id": `suggested-${e.type}-${e.iata}`, ...s({ item: e, index: e.index, type: "li", onClick: () => n?.(e) }), children: [(0, Gt.jsxs)("span", { className: Yt.line, children: [e.type === Mt.A.Airport && (0, Gt.jsx)(ts.s, { className: Yt.icon }), e.type === Mt.A.NationalPark && (0, Gt.jsx)(as, { className: Yt.icon }), (0, Gt.jsxs)("span", { className: Yt.text, children: [(0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.Body3Semi, className: Yt.primaryText, children: i }), a && (0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.Body3Regular, className: Yt.shadow, children: a })] })] }), e.comment && (0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.Body3Regular, className: Yt.shadow, children: e.comment })] }, `${e.type}${e.iata}${e.index}`) }))] }) }; var os = s(45594); const rs = ve().bind(Yt), ls = ({ items: e, highlightedIndex: t, itemProps: s, onClick: a }) => { const { t: n } = (0, es.useTranslation)("lib_forms_avia_form"); return (0, Gt.jsxs)(Gt.Fragment, { children: [(0, Gt.jsx)(Ht.x, { type: qt.y.FootnoteAllCaps, className: Yt.title, tag: "p", children: n("autocomplete.countries") }), e.map((e => (0, Gt.jsxs)("li", { className: rs(Yt.item, t === e.index && Yt.highlighted), "data-test-id": `suggested-country-${e.iata}`, ...s({ item: e, index: e.index, onClick: () => a?.(e) }), children: [(0, Gt.jsxs)("span", { className: Yt.line, children: [e.iata && (0, Gt.jsx)(os.W, { className: Yt.flag, countryCode: e.iata }), (0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.Body3Semi, className: rs(Yt.primaryText, Yt.text), children: e.name })] }), (0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.Body3Regular, className: Yt.shadow, children: e.iata })] }, e.name)))] }) }; var cs = s(86523), ds = s(74702), us = s(41832), ms = s(22861), ps = s(2437); const hs = ve().bind(Yt), { $t: fs } = kt.J.outputs, { $currency: gs } = us.y.outputs; function ys({ items: e, highlightedIndex: t, currency: s, t: a, itemProps: n, onClick: i }) { const o = (0, cs.d)("ts_day_month_short"), r = (0, cs.d)("interval_date"); return (0, Gt.jsxs)(Gt.Fragment, { children: [(0, Gt.jsx)(Ht.x, { type: qt.y.FootnoteAllCaps, className: Yt.title, tag: "p", children: a("lib_forms_avia_form:autocomplete.searchHistory") }), e.map((e => { const l = function (e) { const { origin: t, destination: s, isOneWay: a } = e; return [t.cityIata || t.iata, a ? "→" : "↔︎", s.cityIata || s.iata].join(" ") }(e), c = function (e, t, s) { const a = function (e, t) { const { isOneWay: s, dates: a } = e; return null === a.departDate ? "" : s || null === a.returnDate ? t.formatDate(a.departDate) : t.formatDateInterval(new ps.Xp({ start: a.departDate, end: a.returnDate })) }(e, s), n = function (e) { const { adults: t, children: s, infants: a } = e; return t + s + a }(e.passengers); return `${a}, ${n}, ${t(`lib_forms_avia_form:tripClass.${e.tripClass}`)}` }(e, a, { formatDate: o, formatDateInterval: r }); return (0, Gt.jsxs)("li", { className: hs(Yt.item, t === e.index && Yt.highlighted), "data-test-id": `suggested-history-${e.name}`, ...n({ item: e, index: e.index, onClick: () => i?.(e) }), children: [(0, Gt.jsxs)("span", { className: Yt.line, children: [(0, Gt.jsx)(ds.I, { className: Yt.icon }), (0, Gt.jsxs)("span", { className: Yt.column, children: [(0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.Body3Semi, className: Yt.primaryText, children: l }), (0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.CaptionRegular, className: Yt.shadow, children: c })] })] }), (0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.CaptionRegular, className: Yt.shadow, children: (0, Gt.jsx)(ms.A, { value: e.price, currency: s, showCurrencySign: !0 }) })] }, `${e.name}${e.createdAt}`) }))] }) } const vs = (0, n.withFactory)({ sid: "-ltr5yk", fn: () => (0, xe.SC)({ view: ys, bind: { currency: gs, t: fs } }) }); var bs = s(36758); const xs = ve().bind(Yt), _s = ({ items: e, highlightedIndex: t, itemProps: s, onClick: a }) => (0, Gt.jsx)(Gt.Fragment, { children: e.map((e => (0, Gt.jsx)("li", { className: xs(Yt.item, Yt.weekends, t === e.index && Yt.highlighted), "data-test-id": "suggested-weekend", ...s({ item: e, type: "li", index: e.index, onClick: () => a?.(e) }), children: (0, Gt.jsxs)("span", { className: Yt.line, children: [(0, Gt.jsx)(bs.Y, { className: Yt.icon }), (0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.Body3Semi, className: xs(Yt.primaryText, Yt.text), children: e.sectionName ?? e.name })] }) }, e.name))) }); const Cs = ({ sections: e, highlightedIndex: t, itemProps: s, menuProps: a, onItemClick: n }) => (0, Gt.jsx)("section", { "data-test-id": "autocomplete-menu", children: (0, Gt.jsx)("ul", { className: "s__TM5oi_lpwWwz6dNLnjst", ...a(), children: e.map(((a, i) => { switch (a.type) { case Rt.CityOrAirportOrPark: return (0, Gt.jsx)(is, { items: a.items, highlightedIndex: t, itemProps: s, showTitle: e.length > 2, onClick: n }, `${a.type}${i}`); case Rt.Country: return (0, Gt.jsx)(ls, { items: a.items, highlightedIndex: t, itemProps: s, onClick: n }, `${a.type}${i}`); case Rt.SearchHistory: return (0, Gt.jsx)(vs, { items: a.items, highlightedIndex: t, itemProps: s, onClick: n }, `${a.type}${i}`); case Rt.Anywhere: return (0, Gt.jsx)(Qt, { items: a.items, highlightedIndex: t, itemProps: s, onClick: n }, `${a.type}${i}`); case Rt.Weekends: return (0, Gt.jsx)(_s, { items: a.items, highlightedIndex: t, itemProps: s, onClick: n }, `${a.type}${i}`); default: return null } })) }) }); var ws = { input: "s__UaXug5EzRLeYsUGa9bJ1", dropdown: "s__CgGri8gSYgi3mjquvELJ" }; const ks = ve().bind(ws), Ss = ({ id: e, onClick: t, onItemClick: s, onItemSelect: a, onInputValueChange: n, hasFocus: i, selectedItem: o, sections: r, autoSelect: l, placeholder: c, error: d, tabIndex: u, onInputBlur: m, onInputFocus: p, dataTestId: h, inputTestId: f, inputClassName: g, containerClassName: y, innerClassName: v, onRenderError: b }) => { const { downshiftInputValue: x, inputRef: _, handleInputBlur: C, handleInputFocus: w, handleStateChange: k } = ((e, t, s, a, n, i) => { const [o, r] = (0, U.useState)(null), l = (0, U.useRef)(null); (0, U.useEffect)((() => { let t = null; return e ? t = setTimeout((() => { l.current?.select() }), 50) : l.current?.blur(), () => { t && clearTimeout(t) } }), [e]); const c = (0, U.useCallback)((e => { r(e), s(e) }), [s]), d = (0, U.useCallback)(((e, t) => { i(e), n(t.inputValue) }), [n, i]), u = (0, U.useCallback)(((e, t) => { e.type !== At.ZP.stateChangeTypes.clickItem && e.type !== At.ZP.stateChangeTypes.keyDownEnter && e.type !== At.ZP.stateChangeTypes.touchEnd ? e.type === At.ZP.stateChangeTypes.changeInput && c(e.inputValue ?? "") : d(e.selectedItem ?? null, t) }), [c, d]), m = (0, U.useCallback)((t => () => { t.selectedItem || t.openMenu(), e || a() }), [e, a]), p = (0, U.useCallback)((s => () => { if (s.closeMenu(), e && n(s.inputValue), s.inputValue) { if (s.inputValue === s.selectedItem?.name) return; const e = t.filter((e => e.type !== Rt.SearchHistory && e.type !== Rt.Anywhere && e.type !== Rt.Weekends)).map((e => e.items)).flat(); let a = e.length ? e[0] : null; a || (a = s.selectedItem); const n = a?.name || s.inputValue; s.setState({ selectedItem: a, inputValue: n }), i(a) } else s.setState({ selectedItem: null }) }), [e, n, i, t]); return { downshiftInputValue: o, inputRef: l, handleInputFocus: m, handleInputBlur: p, handleStateChange: u } })(i, r, n, p, m, a); return ((e, t, s, a, n, i) => { const [o, r] = (0, U.useState)(e); (0, U.useEffect)((() => { if (!a) return () => null; const t = setTimeout((() => { r(e) }), 600); return () => { clearTimeout(t) } }), [e, a]), (0, U.useEffect)((() => { if (a && s && e) { const s = t.filter((e => e.type !== Rt.SearchHistory && e.type !== Rt.Anywhere && e.type !== Rt.Weekends)).map((e => e.items)).flat(); if (e !== o || s.length < 1) return; const a = ((e, t) => { if (!t.length) return !1; const s = e.toLowerCase(); return !(t.filter((e => e.name.toLowerCase().includes(s))).length > 1 || t[0].name.toLowerCase() !== s || (a = t[0], t.filter((e => Boolean(e))).some((e => e.countryName === a.name || e.cityName === a.name)))); var a })(e, s); a && (n(s[0]), i(e), r("")) } }), [e, t, s, a, o, n, i]) })(x, r, i, l, a, m), (0, Gt.jsx)($t.SV, { logError: b, children: (0, Gt.jsx)(At.ZP, { id: e, itemToString: Bt, selectedItem: o, onStateChange: k, children: e => (0, Gt.jsx)("div", { "data-test-id": h, className: y, children: (0, Gt.jsx)(Et.L, { visible: e.isOpen && r.length > 0, position: Pt.i.BottomRight, contentClassName: ks(ws.dropdown), hideArrow: !0, content: (0, Gt.jsx)(Cs, { sections: r, highlightedIndex: e.highlightedIndex, itemProps: e.getItemProps, menuProps: e.getMenuProps, onItemClick: s }), children: (0, Gt.jsx)(Kt, { ...e.getInputProps(), forwardedRef: _, placeholder: c, value: e.inputValue ?? "", item: e.selectedItem, onClick: t, onBlur: C(e), onFocus: w(e), error: d, tabIndex: u, innerClassname: ks(ws.input, v), className: g, dataTestId: f }) }) }) }) }) }, { $origin: Ds, $destination: Fs, $activeService: js, $anywhereService: Ns } = W.i.outputs, { weekendsScreen: Is } = v.L.outputs, { changeOrigin: Ms, changeDestination: Ts, exact: As, changeTripClass: Es, changePassengers: Ps, changeService: $s } = W.i.inputs, Rs = (0, n.createEvent)({ sid: "7acw22" }); (0, n.sample)({ and: [{ clock: Rs, fn: e => ({ origin: e.origin, destination: e.destination, dates: e.dates, tripClass: e.tripClass, passengers: e.passengers }), target: (0, n.withFactory)({ sid: "aynpkn", fn: () => (0, mt.h)({ origin: Ms, destination: Ts, dates: As.changeExactDates, tripClass: Es, passengers: Ps }) }) }], or: { sid: "-ppku49" } }); const Bs = (0, n.combine)({ and: [Ds, e => e ? { ...e, comment: e?.iata } : null], or: { sid: "bqwgwh" } }), Os = (0, n.createEvent)({ sid: "-l0ginu" }); (0, n.sample)({ and: [{ clock: Os, filter: e => e?.type !== Mt.A.History, fn: e => (0, Y.jX)(e), target: Ms }], or: { sid: "-nxspad" } }), (0, n.sample)({ and: [{ clock: Os, filter: e => e?.type === Mt.A.History, fn: e => e, target: Rs }], or: { sid: "-nty54u" } }); const Hs = (0, n.combine)({ and: [Fs, js, Ns, (e, t, s) => (0, Y.rP)(e) ? s : (0, Tt.cs)(t) ? { ...t } : e ? { ...e, comment: e.type !== Mt.A.NationalPark ? e.iata : void 0 } : null], or: { sid: "-z301nj" } }), qs = (0, n.createEvent)({ sid: "-nu585m" }); (0, n.sample)({ and: [{ clock: qs, filter: e => It()(e), fn: () => null, target: [Ts, $s] }], or: { sid: "mu01qu" } }), (0, n.sample)({ and: [{ clock: qs, filter: function (e) { return !Ot(e) && !!(0, Y.pu)(e) }, fn: e => (0, Y.jX)(e), target: Ts }], or: { sid: "n9eacy" } }), (0, n.sample)({ and: [{ clock: qs, filter: function (e) { return !Ot(e) && !!(0, Tt.cs)(e) }, fn: e => ({ service: (0, Tt.Yg)(e), analytics: { directionSource: Ne.yh.SearchForm } }), target: Is.open }], or: { sid: "nosiz2" } }), (0, n.sample)({ and: [{ clock: qs, filter: Ot, fn: e => e, target: Rs }], or: { sid: "o6xqjz" } }); const { $activeForm: Ls } = p.B.outputs, { forceOriginChoice: Zs, forceDestinationChoice: zs, changeOrigin: Gs, forceStartDateChoice: Vs, forceEndDateChoice: Us } = W.i.inputs, { $searchMode: Ws, $destination: Ks, $origin: Js, segmentsInitialDataIsLoaded: Ys, $isSegmentsInitialDataLoaded: Xs, $activeService: Qs, $emptyDates: ea } = W.i.outputs, ta = (0, n.withFactory)({ sid: "b4zigt", fn: () => (0, _e.s)((e => { const t = (0, n.createStore)(!1, { sid: "-7r7ebe" }), s = (0, n.createStore)(e, { sid: "eb72ux" }), a = (0, n.createEvent)({ sid: "-nm1pwc" }), i = (0, n.createEvent)({ sid: "2t4xth" }); return (0, n.sample)({ and: [{ clock: a, filter: H.status, fn: () => !0, target: t }], or: { sid: "eb8ekq" } }), (0, n.sample)({ and: [{ clock: i, filter: H.status, fn: () => !1, target: t }], or: { sid: "eqmn6u" } }), { $value: t, $tabIndex: s, focus: a, blur: i } })) }), { $value: sa, focus: aa, blur: na, $tabIndex: ia } = (0, n.withFactory)({ sid: "83ye2c", fn: () => (0, _e.d)(ta, 0) }), { $value: oa, focus: ra, blur: la, $tabIndex: ca } = (0, n.withFactory)({ sid: "8jcmog", fn: () => (0, _e.d)(ta, 0) }), { $value: da, focus: ua, blur: ma, $tabIndex: pa } = (0, n.withFactory)({ sid: "8n76tz", fn: () => (0, _e.d)(ta, 0) }), { $value: ha, focus: fa, blur: ga, $tabIndex: ya } = (0, n.withFactory)({ sid: "92lfg3", fn: () => (0, _e.d)(ta, 0) }), { $value: va, focus: ba, blur: xa } = (0, n.withFactory)({ sid: "jx9u0j", fn: () => (0, _e.d)(ta, 0) }), _a = (0, n.createEvent)({ sid: "-13r7w2" }), Ca = (0, n.createStore)(!1, { sid: "3fgjrc" }).on(_a, (() => !0)); (0, n.sample)({ and: [{ clock: (0, n.withFactory)({ sid: "-miip73", fn: () => (0, d.m)([q, Ys]) }), source: { origin: Js, destination: Ks, service: Qs }, filter: ({ origin: e, destination: t, service: s }) => !(0, Y.Tu)(e) && (0, Y.Tu)(t) && Dt()(s), target: _a }], or: { sid: "-rvt9eh" } }), (0, n.sample)({ and: [{ clock: _a, target: ra }], or: { sid: "-rdo1tk" } }); const wa = (0, n.withFactory)({ sid: "-yxt4ij", fn: () => (0, Ft.C)({ source: Js, clock: na }) }); (0, n.sample)({ and: [{ clock: Gs, source: { destination: Ks, service: Qs, prevOrigin: wa, isSegmentsInitialDataLoaded: Xs }, filter: ({ prevOrigin: e, destination: t, service: s, isSegmentsInitialDataLoaded: a }, n) => a && !(0, Y.Tu)(n) && n?.iata !== e?.iata && (0, Y.Tu)(t) && Dt()(s), target: ra }], or: { sid: "-qgoe7w" } }); const ka = (0, n.createEvent)({ sid: "qvvvuz" }), Sa = [na, la, ma, ga, ka]; (0, n.sample)({ and: [{ clock: Os, source: { autocompleteDestinationField: Hs, emptyDates: ea }, filter: ({ autocompleteDestinationField: e, emptyDates: t }, s) => null !== s && null !== e && !t, target: ba }], or: { sid: "-p1jj1b" } }), (0, n.sample)({ and: [{ clock: qs, source: { autocompleteOriginField: Bs, emptyDates: ea }, filter: ({ autocompleteOriginField: e, emptyDates: t }, s) => null !== s && null !== e && !t, target: ba }], or: { sid: "-ojy41r" } }), (0, n.sample)({ and: [{ clock: [Zs, zs, Vs, Us], target: jt.H }], or: { sid: "-o193vh" } }), (0, n.sample)({ and: [{ clock: Zs, target: aa }], or: { sid: "-dm9f77" } }), (0, n.sample)({ and: [{ clock: zs, target: ra }], or: { sid: "-d7yrrt" } }), (0, n.sample)({ and: [{ clock: [Ls.updates, Ws.updates], filter: da, target: ma }], or: { sid: "-d447ma" } }), (0, n.sample)({ and: [{ clock: [Ls.updates, Ws.updates], filter: ha, target: ga }], or: { sid: "-cp9rlj" } }), (0, n.sample)({ and: [{ clock: [Ls.updates, Ws.updates, aa, ra, ua, fa], filter: va, target: xa }], or: { sid: "-clz01d" } }); var Da = s(9005), Fa = s(42699); const ja = e => e?.from && e?.to ? (0, Da.Z)({ start: e.from, end: e.to }) : [(e?.from || e?.to) ?? void 0], Na = e => { const t = e?.[0]?.from ?? null, s = e?.[0]?.to ?? null, a = e?.[1]?.from ?? null, n = e?.[1]?.to ?? null; return { startRangeFrom: t, startRangeTo: s, endRangeFrom: a, endRangeTo: n, minRangeFrom: (t && a && (0, Fa.Z)(t, a) ? a : t) || t || a, maxRangeTo: (s && n && (0, Fa.Z)(s, n) ? s : n) || n || s } }; var Ia = s(19013), Ma = s(13882); function Ta(e) { return (0, Ma.Z)(1, arguments), 0 === (0, Ia.Z)(e).getDay() } var Aa = s(49317), Ea = s(3151), Pa = s(61487); var $a = s(37950), Ra = s(99890), Ba = s(67803); const Oa = e => { const { from: t, to: s } = e; return t && s && (0, Fa.Z)(t, s) ? { from: s, to: t } : e }, Ha = (e, t, s) => { let a, n = (0, Pa.C)(e, t?.from) && t?.from || e; return s ? (n = e, a = null) : a = (((0, Pa.C)(e, t?.from) ? e : t?.to) || t?.from) ?? null, Oa({ from: n, to: a }) }, qa = e => e?.from && e?.to ? (0, Da.Z)({ start: (0, $a.Z)([e.from, e.to]), end: (0, Ra.Z)([e.from, e.to]) }) : [], La = (e, t) => ({ boundedFrom: (t?.from && (0, Pa.S)(t.from, e?.from) && t.from || !e?.from && t?.from || e?.from) ?? void 0, boundedTo: (t?.to && (0, Pa.C)(t.to, e?.to) && t.to || !e?.to && t?.to || e?.to) ?? void 0 }); var Za = s(313); const za = (e, t) => { const s = e instanceof Date ? e : e?.[0]?.from || e?.[1]?.from || new Date; return t && (0, Za.Z)(s, t.from) ? new _t.m(t.from) : new _t.m(s) }, { flexible: Ga } = W.i.outputs, { $t: Va } = kt.J.outputs, { flexible: Ua } = W.i.inputs, Wa = (0, n.createEvent)({ sid: "-jy6m3f" }), Ka = (0, n.createEvent)({ sid: "-ingwrw" }), Ja = (0, n.createStore)(null, { and: { updateFilter: Se.Ih }, sid: "-oazo7" }).on(Wa, ((e, t) => t)).reset(Ka); (0, n.sample)({ and: [{ source: Ga.$flexibleDates, fn: e => [{ from: e?.departRange?.from ?? null, to: e?.departRange?.to ?? null }, { from: e?.returnRange?.from ?? null, to: e?.returnRange?.to ?? null }], target: Wa }], or: { sid: "-p2nr21" } }); const Ya = (0, n.createEvent)({ sid: "-qn745" }); (0, n.sample)({ and: [{ clock: Ya, fn: e => (e => Boolean(e && Array.isArray(e)))(e) ? { departRange: (e[0]?.from && e[0]?.to && e[0]) ?? { from: null, to: null }, returnRange: (e[1]?.from && e[1]?.to && e[1]) ?? { from: null, to: null } } : { departRange: { from: null, to: null }, returnRange: { from: null, to: null } }, target: Ua.changeFlexibleDates }], or: { sid: "-o4ki9n" } }); const Xa = (0, n.combine)({ and: [Va, e => e("lib_forms_trip_duration:avia.flexible.departure.title")], or: { sid: "-8wm14l" } }), Qa = (0, n.combine)({ and: [Va, e => e("lib_forms_trip_duration:avia.flexible.return.title")], or: { sid: "lcytsv" } }), { period: en } = W.i.outputs, { $t: tn } = kt.J.outputs, { period: sn } = W.i.inputs, an = (0, n.createEvent)({ sid: "-jd2bix" }), nn = (0, n.createEvent)({ sid: "bymtcm" }), on = (0, n.createStore)(null, { and: { updateFilter: Se.Ih }, sid: "-yuf445" }).on(an, ((e, t) => t)).reset(nn), rn = (0, n.combine)({ and: [on, e => e?.duration ?? null], or: { sid: "anwl1z" } }); (0, n.sample)({ and: [{ source: en.$periodDates, fn: e => ({ range: { from: e?.range?.from ?? null, to: e?.range?.to ?? null }, duration: e?.duration ?? null }), target: an }], or: { sid: "-6w2nde" } }); const ln = (0, n.createEvent)({ sid: "9z6qg5" }); (0, n.sample)({ and: [{ clock: ln, fn: e => (e => Boolean(e && "range" in e))(e) ? e : { range: { from: null, to: null }, duration: null }, target: sn.changePeriodDates }], or: { sid: "-606kyg" } }); const cn = (0, n.combine)({ and: [tn, e => e("lib_forms_trip_duration:avia.period.departure.title")], or: { sid: "-4gd67m" } }), dn = (0, n.combine)({ and: [tn, e => e("lib_forms_trip_duration:avia.period.return.title")], or: { sid: "d1ckum" } }); var un = s(85349); const { exact: mn } = W.i.outputs, { exact: pn } = W.i.inputs, { $t: hn } = kt.J.outputs, { $isDesktop: fn } = f.l.outputs, gn = (0, n.createStore)(null, { and: { updateFilter: Se.Ih }, sid: "-i9xk4x" }), yn = (0, n.createStore)(null, { and: { updateFilter: Se.Ih }, sid: "1gy0fx" }), vn = (0, n.combine)({ and: [{ from: gn, to: yn }], or: { sid: "-ydd1qq" } }), bn = (0, n.createEvent)({ sid: "me2u9g" }), xn = (0, n.createEvent)({ sid: "-e3rgkd" }); (0, n.sample)({ and: [{ clock: bn, target: (0, n.withFactory)({ sid: "-ydasw", fn: () => (0, mt.h)({ from: gn, to: yn }) }) }], or: { sid: "94sp48" } }), (0, n.withFactory)({ sid: "9kqqbp", fn: () => (0, un.m)({ clock: xn, target: [gn, yn] }) }), (0, n.sample)({ and: [{ source: mn.$exactDates, fn: e => ({ from: e?.departDate ?? null, to: e?.returnDate ?? null }), target: bn }], or: { sid: "9zl6cg" } }); const _n = (0, n.createEvent)({ sid: "-ojd3rz" }); (0, n.sample)({ and: [{ clock: _n, fn: e => (e => Boolean(e && !Array.isArray(e) && !("range" in e || "ranges" in e || "duration" in e)))(e) ? { departDate: e.from ?? null, returnDate: e.to ?? null } : { departDate: null, returnDate: null }, target: pn.changeExactDates }], or: { sid: "aitz43" } }); const Cn = (0, n.combine)({ and: [hn, fn, (e, t) => e(t ? "lib_forms_trip_duration:avia.exact.departure.title" : "lib_forms_trip_duration:deprecated.departureHeader")], or: { sid: "rdfgk5" } }), wn = (0, n.combine)({ and: [hn, fn, (e, t) => e(t ? "lib_forms_trip_duration:avia.exact.return.title" : "lib_forms_trip_duration:deprecated.returnHeader")], or: { sid: "-qcwtyx" } }), { $t: kn } = kt.J.outputs, { $availableDateCases: Sn, weekends: Dn } = W.i.outputs, { weekends: Fn } = W.i.inputs, jn = (0, n.createEvent)({ sid: "fzw5d" }), Nn = (0, n.createEvent)({ sid: "bonnqz" }), In = (0, n.createStore)({ ranges: null }, { and: { updateFilter: Se.Ih }, sid: "jpvikl" }).on(jn, ((e, t) => t)).reset(Nn); (0, n.sample)({ and: [{ clock: Dn.$weekendsDates, source: In, fn: (e, t) => ({ ranges: t?.ranges?.map((e => ({ from: e.from ?? null, to: e.to ?? null }))) ?? null }), target: jn }], or: { sid: "-pv15um" } }); const Mn = (0, n.createEvent)({ sid: "b04y03" }); (0, n.sample)({ and: [{ clock: Mn, fn: e => (e => Boolean(e && "ranges" in e))(e) ? { ranges: e.ranges?.map((e => ({ from: e?.from ?? null, to: e?.to ?? null }))) ?? null } : { ranges: null }, target: Fn.changeWeekendsDates }], or: { sid: "-oy1i8y" } }); const [Tn, An] = (0, n.withFactory)({ sid: "-usczpg", fn: () => (0, Ct.K)((0, n.combine)({ and: [Sn, e => e.includes(Ne.M4.Weekends) ? (() => { const e = function (e) { (0, Ma.Z)(1, arguments); for (var t = (0, Da.Z)(e), s = [], a = 0; a < t.length;) { var n = t[a++]; (0, Aa.Z)(n) && (s.push(n), Ta(n) && (a += 5)) } return s }({ start: new Date, end: (0, yt.Z)(new Date, 90) }), t = []; for (let s = Ta(e[0]) ? 3 : 2; s <= e.length; s += 2)t.push({ daysOff: [e[s - 2], e[s - 1]], extraDays: [(0, yt.Z)(e[s - 2], -1), (0, yt.Z)(e[s - 1], 1)] }); return t })() : []], or: { sid: "-pkzox6" } })) }), En = (0, n.combine)({ and: [Tn, e => e.flatMap((e => e.daysOff))], or: { sid: "8htrw7" } }), Pn = (0, n.combine)({ and: [Tn, e => e.flatMap((e => e.extraDays))], or: { sid: "-7wpwa8" } }), { $enabled: $n, turnOn: Rn, turnOff: Bn } = (0, n.withFactory)({ sid: "kht9k3", fn: () => (0, _e.d)(Se.qs, !1) }), On = (0, n.createEvent)({ sid: "-b9qlh8" }); (0, n.withFactory)({ sid: "jhbu9f", fn: () => (0, pt.s)({ source: On, if: $n, then: Bn, else: Rn }) }); const { $enabled: Hn, turnOn: qn, turnOff: Ln } = (0, n.withFactory)({ sid: "lh03j7", fn: () => (0, _e.d)(Se.qs, !1) }), Zn = (0, n.createEvent)({ sid: "zjflq" }); (0, n.withFactory)({ sid: "kgio8j", fn: () => (0, pt.s)({ source: Zn, if: Hn, then: Ln, else: qn }) }), (0, n.sample)({ and: [{ clock: Rn, source: Tn, fn: e => ({ ranges: e.map((e => ({ from: e?.daysOff[0], to: e?.daysOff.at(-1) ?? null }))) }), target: jn }], or: { sid: "kwgpg0" } }), (0, n.sample)({ and: [{ clock: Bn, target: [Nn, Ln] }], or: { sid: "lelx0x" } }), (0, n.sample)({ and: [{ clock: Ln, source: Tn, filter: $n, fn: e => ({ ranges: e.map((e => ({ from: e?.daysOff[0], to: e?.daysOff.at(-1) ?? null }))) }), target: jn }], or: { sid: "lhwol3" } }), (0, n.sample)({ and: [{ clock: qn, source: Tn, fn: e => ({ ranges: e.map((e => ({ from: e?.extraDays[0], to: e?.extraDays.at(-1) ?? null }))) }), target: jn }], or: { sid: "mcp5tb" } }); const zn = (0, n.createEvent)({ sid: "s1mcs" }); (0, n.sample)({ and: [{ clock: zn, source: $n, filter: (0, n.withFactory)({ sid: "gxg4qx", fn: () => (0, c.f)((0, n.withFactory)({ sid: "-843s97", fn: () => (0, ft.f)($n, Dn.$isAllDatesSelected) })) }), target: Fn.changeAllDatesSelection }], or: { sid: "mvxyky" } }), (0, n.sample)({ and: [{ clock: zn, source: Hn, filter: (0, n.withFactory)({ sid: "k8rhia", fn: () => (0, c.f)((0, n.withFactory)({ sid: "-rmvgp6", fn: () => (0, ft.f)(Hn, Dn.$isExtraDaysSelected) })) }), target: Fn.changeExtraDaysSelection }], or: { sid: "nbc772" } }), (0, n.sample)({ and: [{ clock: Fn.clean, target: [Bn, Ln] }], or: { sid: "xps39z" } }); const Gn = (0, n.combine)({ and: [kn, e => e("lib_forms_trip_duration:avia.weekends.departure.title")], or: { sid: "-u74g2h" } }), { $isDesktop: Vn } = f.l.outputs, { $currentDateCase: Un, $origin: Wn, $destination: Kn, $emptyDates: Jn } = W.i.outputs, { resetDateCases: Yn, forceStartDateChoice: Xn, forceEndDateChoice: Qn, changeCurrentDateCase: ei } = W.i.inputs, { notify: ti, notificationsViewContext: si } = wt.B.inputs, { $t: ai } = kt.J.outputs, { $isCurrentDestinationPopular: ni } = ut.outputs, ii = (0, n.createEvent)({ sid: "-6k8jrm" }), oi = (0, n.createStore)(Ne.M4.Exact, { sid: "-1y88qm" }).on(ii, ((e, t) => t)); (0, n.sample)({ and: [{ source: Un, target: oi }], or: { sid: "7k2r7v" } }), (0, n.split)({ and: [{ clock: ii, source: oi, match: e => e, cases: { [Ne.M4.Exact]: [Ka, nn, Bn], [Ne.M4.Flexible]: [xn, nn, Bn], [Ne.M4.Period]: [Ka, xn, Bn], [Ne.M4.Weekends]: [Ka, nn, xn] } }], or: { sid: "7ndis1" } }); const ri = (0, n.createEvent)({ sid: "-fjfgd6" }), li = (0, n.createEvent)({ sid: "mirbqp" }), ci = (0, n.createEvent)({ sid: "4zhbuf" }), di = (0, n.createEvent)({ sid: "a0fpma" }), ui = (0, n.createEvent)({ sid: "bch0so" }), mi = (0, n.createEvent)({ sid: "4ylflv" }), { $enabled: pi, turnOn: hi, turnOff: fi } = (0, n.withFactory)({ sid: "-k589vx", fn: () => (0, _e.d)(Se.qs, !1) }), gi = (0, n.createEvent)({ sid: "mf6t45" }); (0, n.sample)({ and: [{ clock: fi, filter: (0, n.withFactory)({ sid: "-juf3v3", fn: () => (0, c.f)(Vn) }), target: gi }], or: { sid: "az8o4r" } }), (0, n.sample)({ and: [{ clock: fi, target: [ci, mi] }], or: { sid: "be345i" } }), (0, n.sample)({ and: [{ clock: fi, source: { origin: Wn, destination: Kn, emptyDates: Jn }, filter: ({ origin: e, destination: t, emptyDates: s }) => null !== e && null !== t && !s, target: ba }], or: { sid: "bgu34b" } }); const yi = (0, n.createStore)(!1, { sid: "-nitavn" }), vi = (0, n.createStore)(!1, { sid: "-vrcwjd" }), bi = (0, n.createStore)(!1, { sid: "-wqpbpl" }), xi = (0, n.createStore)(!1, { sid: "-i6hdmp" }); (0, n.sample)({ and: [{ clock: ri, target: li }], or: { sid: "mcve6s" } }), (0, n.sample)({ and: [{ clock: li, filter: (0, n.withFactory)({ sid: "-jw6u0t", fn: () => (0, l.x)((0, n.withFactory)({ sid: "gtcxwv", fn: () => (0, c.f)(yi) }), (0, n.withFactory)({ sid: "gtd01i", fn: () => (0, c.f)(pi) })) }), target: hi }], or: { sid: "mr61m6" } }), (0, n.sample)({ and: [{ clock: li, filter: (0, n.withFactory)({ sid: "-73z1dk", fn: () => (0, c.f)(yi) }), target: [ua, ga] }], or: { sid: "n60hmx" } }), (0, n.sample)({ and: [{ clock: li, fn: () => !0, target: yi }], or: { sid: "n9b973" } }), (0, n.sample)({ and: [{ clock: ri, fn: () => ({ startClicked: !0, endClicked: !1 }), target: (0, n.withFactory)({ sid: "jizrey", fn: () => (0, mt.h)({ startClicked: bi, endClicked: xi }) }) }], or: { sid: "no5p7u" } }), (0, n.withFactory)({ sid: "o6awsr", fn: () => (0, pt.s)({ source: da, if: Boolean, then: li, else: ci }) }), (0, n.sample)({ and: [{ clock: ci, fn: () => !1, target: yi }], or: { sid: "omsqll" } }), (0, n.sample)({ and: [{ clock: ci, target: ma }], or: { sid: "oq3i5r" } }), (0, n.sample)({ and: [{ clock: di, fn: () => ({ startClicked: !1, endClicked: !0 }), target: (0, n.withFactory)({ sid: "4d73ys", fn: () => (0, mt.h)({ startClicked: bi, endClicked: xi }) }) }], or: { sid: "p5hqrv" } }), (0, n.sample)({ and: [{ clock: di, target: ui }], or: { sid: "pnmycs" } }), (0, n.sample)({ and: [{ clock: ui, filter: (0, n.withFactory)({ sid: "bcfh63", fn: () => (0, c.f)(vi) }), target: [fa, ma] }], or: { sid: "q1xls6" } }), (0, n.sample)({ and: [{ clock: ui, filter: (0, n.withFactory)({ sid: "o4n9tc", fn: () => (0, l.x)((0, n.withFactory)({ sid: "-a6x084", fn: () => (0, c.f)(vi) }), (0, n.withFactory)({ sid: "-a6wyna", fn: () => (0, c.f)(pi) })) }), target: hi }], or: { sid: "q58dcc" } }), (0, n.sample)({ and: [{ clock: ui, fn: () => !0, target: vi }], or: { sid: "qk2td3" } }), (0, n.withFactory)({ sid: "-y48qb7", fn: () => (0, pt.s)({ source: ha, if: Boolean, then: ui, else: mi }) }), (0, n.sample)({ and: [{ clock: mi, fn: () => !1, target: vi }], or: { sid: "-xnqwid" } }), (0, n.sample)({ and: [{ clock: mi, target: ga }], or: { sid: "-xkg4y7" } }), (0, n.sample)({ and: [{ clock: Xn, target: ri }], or: { sid: "-x51wc3" } }), (0, n.sample)({ and: [{ clock: Qn, target: di }], or: { sid: "-x2axda" } }); const [_i, Ci] = (0, n.withFactory)({ sid: "qhrlqs", fn: () => (0, Ct.K)((0, n.withFactory)({ sid: "l5aa1b", fn: () => (0, ht.w)(ni, [], [Ne.M4.Flexible, Ne.M4.Period, Ne.M4.Weekends]) })) }), wi = (0, n.createEvent)({ sid: "-c9dlh0" }); (0, n.sample)({ and: [{ clock: wi, source: _i, filter: (e, t) => !e.includes(t), fn: (e, t) => t, target: [ri, ii] }], or: { sid: "-vpx15i" } }); const ki = (0, n.createEvent)({ sid: "-j7k4mi" }), Si = (0, n.createEvent)({ sid: "-lghy6q" }); (0, n.sample)({ and: [{ clock: wi, source: _i, filter: (e, t) => e.includes(t), fn: (e, t) => t, target: ki }], or: { sid: "-v5kn75" } }), ti({ clock: { show: ki, hide: fi }, id: { mapData: e => `calendar_disabled_${e}_tab` }, autoClose: !0, icon: "warning", onClose: Si, message: { source: ai, fn: (e, t) => t(`lib_forms_trip_duration:avia.${e}.disabledError`) } }), si({ overrides: { position: (0, n.createStore)("bottom", { sid: "-mejsqa" }) }, setupOn: ki, dropOn: Si }); const Di = (0, n.combine)({ and: [oi, _i, (e, t) => t.includes(e)], or: { sid: "-e3dxum" } }), [Fi, ji] = (0, n.withFactory)({ sid: "qfn40f", fn: () => (0, Ct.K)((0, n.combine)({ and: [oi, vn, Ja, on, In, (e, t, s, a, n) => { let i = []; switch (e) { case Ne.M4.Flexible: i = s || []; break; case Ne.M4.Period: i = a && a.range ? [a.range] : []; break; case Ne.M4.Weekends: i = n && n.ranges ? n.ranges : []; break; case Ne.M4.Exact: default: i = t ? [t] : [] }return i.reduce(((e, t) => { if (t.from || t.to) { const s = (e => ({ from: e.from || e.to, to: e.to || e.from }))(t); s && e.push(s) } return e }), []) }], or: { sid: "yw542b" } })) }), Ni = (0, n.createEvent)({ sid: "-421bzj" }), Ii = (0, n.createEvent)({ sid: "-nu8y8c" }); (0, n.withFactory)({ sid: "-fnhgxm", fn: () => (0, pt.s)({ source: (0, n.sample)({ and: [{ clock: fi, source: { selectedDays: Fi, selectedDateCase: oi } }], or: { sid: "-5x3zsn" } }), if: ({ selectedDays: e, selectedDateCase: t }) => !e.length && t !== Ne.M4.Weekends, then: Ni, else: Ii }) }), (0, n.sample)({ and: [{ clock: Ii, source: oi, target: ei }], or: { sid: "-f21hsj" } }), (0, n.sample)({ and: [{ clock: Ni, fn: () => Ne.M4.Exact, target: [ei, ii] }], or: { sid: "-4p8zhp" } }); const Mi = (0, n.createEvent)({ sid: "wkairm" }); (0, n.sample)({ and: [{ clock: Mi, filter: (0, n.withFactory)({ sid: "7dp31j", fn: () => (0, ft.f)(oi, Ne.M4.Exact) }), fn: e => e, target: _n }], or: { sid: "-46jzbf" } }), (0, n.sample)({ and: [{ clock: Mi, filter: (0, n.withFactory)({ sid: "ap0fsw", fn: () => (0, ft.f)(oi, Ne.M4.Period) }), fn: e => e, target: ln }], or: { sid: "-3r5qpb" } }), (0, n.sample)({ and: [{ clock: Mi, filter: (0, n.withFactory)({ sid: "ny9uuc", fn: () => (0, ft.f)(oi, Ne.M4.Flexible) }), fn: e => e, target: Ya }], or: { sid: "-3bri37" } }), (0, n.sample)({ and: [{ clock: Mi, filter: (0, n.withFactory)({ sid: "-xtks3c", fn: () => (0, ft.f)(oi, Ne.M4.Weekends) }), fn: e => e, target: Mn }], or: { sid: "-37wxxo" } }); const Ti = (0, n.createEvent)({ sid: "jfydhi" }), Ai = (0, n.createEvent)({ sid: "-ap9myn" }); (0, n.sample)({ and: [{ clock: [Bn, oi.updates], target: Ai }], or: { sid: "-2e81w6" } }); const Ei = (0, n.createStore)({ from: new Date, to: (0, gt.Z)((0, yt.Z)(new Date, -1), 1) }, { sid: "oea0kf" }).on(Ti, ((e, t) => t)).reset(Ai); (0, n.sample)({ and: [{ clock: Rn, fn: () => ({ from: new Date, to: (0, vt.Z)(new Date, 1) }), target: Ti }], or: { sid: "-1tvnxt" } }); const Pi = (0, n.createEvent)({ sid: "-mm8rh0" }), $i = (0, n.createStore)(new _t.m(new Date), { sid: "-jmrr91" }).on(Pi, ((e, t) => t)).reset([Yn, Rn]), Ri = (0, n.withFactory)({ sid: "88qd9m", fn: () => (0, ht.w)(Vn, bt.U.min, bt.U.max) }), Bi = (0, n.withFactory)({ sid: "va9d53", fn: () => (0, ht.w)(Vn, xt.i.Horizontal, xt.i.Vertical) }); (0, n.sample)({ and: [{ clock: gi, source: { selectedDays: Fi, availableDays: Ei }, fn: ({ selectedDays: e, availableDays: t }) => za(e, t), target: Pi }], or: { sid: "a0soif" } }); const Oi = (0, n.combine)({ and: [$i, Ri, (e, t) => ((e, t) => { let s = new Array(t).fill(0); return s = s.map(((t, s) => new _t.m((0, vt.Z)(e.startDate, s)))), s })(e, t)], or: { sid: "g0q471" } }); (0, n.sample)({ and: [{ source: { selectedDays: Fi, availableDays: Ei }, filter: (0, n.withFactory)({ sid: "-i97q2l", fn: () => (0, c.f)(pi) }), fn: ({ selectedDays: e, availableDays: t }) => za(e, t), target: Pi }], or: { sid: "azfpw6" } }); const Hi = (0, n.combine)({ and: [oi, En, bi, xi, Ja, In, $n, (e, t, s, a, n, i, o) => e === Ne.M4.Flexible ? ((e, t, s) => { let a = new Date, n = (0, gt.Z)((0, yt.Z)(new Date, -1), 1); const { minRangeFrom: i, maxRangeTo: o } = Na(s); return e ? n = s?.[1]?.from && o || n : t && (a = s?.[0]?.from && i || a), { before: a, after: n } })(s, a, n) : e === Ne.M4.Weekends ? o ? () => !0 : ((e, t) => { if (t?.ranges?.length) { const s = t?.ranges; return t => function (e) { return (0, Ma.Z)(1, arguments), 5 === (0, Ia.Z)(e).getDay() }(t) ? !s?.find((({ from: e }) => e && (0, Ea.Z)(t, e) || e && (0, Ea.Z)((0, yt.Z)(t, 1), e))) : function (e) { return (0, Ma.Z)(1, arguments), 1 === (0, Ia.Z)(e).getDay() }(t) ? !s?.find((({ to: e }) => e && (0, Ea.Z)(t, e) || e && (0, Ea.Z)((0, yt.Z)(t, -1), e))) : !e.find((e => (0, Ea.Z)(e, t))) } return t => !e.find((e => (0, Ea.Z)(e, t))) })(t, i) : { before: new Date, after: (0, gt.Z)((0, yt.Z)(new Date, -1), 1) }], or: { sid: "-w819oi" } }), qi = (0, n.combine)({ and: [Vn, oi, Ja, on, $n, (e, t, s, a, n) => e && !(t === Ne.M4.Flexible && (s?.[0]?.from || s?.[1]?.from)) && !(t === Ne.M4.Period && a?.range?.from) && !(t === Ne.M4.Weekends && n)], or: { sid: "27uc7e" } }), Li = (0, n.withFactory)({ sid: "n4us89", fn: () => (0, ht.w)(bi, Cn, wn) }), Zi = (0, n.withFactory)({ sid: "e2fd6d", fn: () => (0, ht.w)(bi, Xa, Qa) }), zi = (0, n.withFactory)({ sid: "fdpjyr", fn: () => (0, ht.w)(bi, cn, dn) }), Gi = (0, n.combine)({ and: [oi, Li, Zi, zi, Gn, (e, t, s, a, n) => { switch (e) { case Ne.M4.Exact: return t; case Ne.M4.Flexible: return s; case Ne.M4.Period: return a; case Ne.M4.Weekends: return n; default: return "" } }], or: { sid: "-w6kayn" } }), { createReporter: Vi } = je.I.inputs, { $isAviaFormActive: Ui } = p.B.outputs, { $isCurrentDestinationPopular: Wi } = ut.outputs, { $availableDateCases: Ki } = W.i.outputs; Vi({ data: { category: "calendar", label: "screen", action: "opened", service: Fe.t6.Explore } })({ clock: (0, n.sample)({ and: [{ clock: [ii, hi], source: { dateCase: oi, availableDateCases: Ki, isCurrentDestinationPopular: Wi }, filter: Ui }], or: { sid: "6lk5w5" } }), payload: ({ dateCase: e, availableDateCases: t, isCurrentDestinationPopular: s }) => { let a = null, n = "hidden", i = "hidden", o = "hidden"; switch (t.includes(Ne.M4.Flexible) && (n = s ? "active" : "disabled"), t.includes(Ne.M4.Period) && (i = s ? "active" : "disabled"), t.includes(Ne.M4.Weekends) && (o = s ? "active" : "disabled"), e) { case Ne.M4.Exact: a = "exact"; break; case Ne.M4.Flexible: a = "flex"; break; case Ne.M4.Period: a = "trip"; break; case Ne.M4.Weekends: a = "weekends"; break; default: a = null }return { mode: a, flex: n, trip: i, weekends: o } } }); const { $isWayAwayBrand: Ji } = Ce.U.outputs, { matchPage: Yi, pages: Xi } = m.$.outputs, { $isExplorePage: Qi } = we.N.outputs, { weekendsScreen: eo } = v.L.outputs, { nationalParkInAutocompleteFlag: to, priceMapFlag: so } = ke.i.outputs, { $origin: ao, $destination: no } = W.i.outputs, { tryToStartSearch: io } = J.J.inputs, { $weekendsAvailableInAutocomplete: oo } = De.h.outputs, ro = (0, n.withFactory)({ sid: "-jg4u35", fn: () => (0, l.x)(so.$value, Qi) }), lo = (0, n.withFactory)({ sid: "-hye3r", fn: () => (0, l.x)(oo, Qi) }), co = Yi(Xi.MainPage).$isOpen, uo = (0, n.withFactory)({ sid: "-7f1osa", fn: () => (0, l.x)(to.$value, Qi) }), mo = (0, n.withFactory)({ sid: "5rpaab", fn: () => (0, c.f)(Yi(Xi.SearchPage).$isOpen) }), po = Ji, ho = (0, n.withFactory)({ sid: "-9dm5bc", fn: () => (0, l.x)((0, n.withFactory)({ sid: "retyhs", fn: () => (0, c.f)(Yi(Xi.MapPage).$isOpen) }), (0, n.withFactory)({ sid: "rfdr35", fn: () => (0, c.f)(eo.$active) }), (0, n.withFactory)({ sid: "rfxjoi", fn: () => (0, c.f)(Yi(Xi.HotelsPage).$isOpen) }), (0, n.withFactory)({ sid: "rs10qg", fn: () => (0, c.f)(Yi(Xi.HotelsMapPage).$isOpen) })) }), fo = Yi(Xi.SearchPage).$isOpen, go = (0, n.combine)({ and: [{ origin: ao, destination: no }, ({ origin: e, destination: t }) => (0, Y.bx)(e, t)], or: { sid: "65kq2d" } }), yo = (0, n.createEvent)({ sid: "-a94jx1" }), vo = (0, n.withFactory)({ sid: "-n295ff", fn: () => (0, _e.d)(Se.qs, !1) }), bo = vo.$enabled; (0, n.sample)({ and: [{ clock: (0, u.V6)((0, u.ZE)("service/helios/prediction/new_dates")), target: vo.turnOn }], or: { sid: "-sljoze" } }), (0, n.sample)({ and: [{ clock: io, target: vo.turnOff }], or: { sid: "-s6p8yn" } }), (0, n.sample)({ and: [{ clock: yo, target: vo.turnOff }], or: { sid: "-s51v6k" } }); var xo = s(51717); const { $destination: _o, $origin: Co, $currentDateCase: wo, exact: ko, period: So, flexible: Do } = W.i.outputs, { tryToStartSearch: Fo } = J.J.inputs, { translated: jo } = kt.J.outputs, { nationalParkScreen: No } = y.n.outputs, { countryScreen: Io } = x.$.outputs, Mo = (0, n.createEvent)({ sid: "fk7car" }), To = (0, n.createEvent)({ sid: "hzgqj0" }), Ao = (0, n.createEvent)({ sid: "-fbue4w" }), Eo = (0, n.createEvent)({ sid: "-z8rf7m" }), Po = (0, n.createStore)("", { sid: "y1o4px" }).reset(To), $o = (0, n.createStore)("", { sid: "-qdi003" }).reset(Ao), Ro = (0, n.createStore)("", { sid: "mbty9q" }).reset(Eo), Bo = (0, n.createStore)("", { sid: "-5r8o2n" }).reset(Eo), Oo = (0, n.combine)({ and: [{ startDate: Ro, endDate: Bo }], or: { sid: "y26cw" } }), Ho = (0, n.combine)({ and: [{ origin: Co, destination: _o }, ({ origin: e, destination: t }) => (0, Y.PM)(e, t)], or: { sid: "wkvlnj" } }), qo = Co.map((e => (0, Y.Tu)(e))), Lo = _o.map((e => (0, Y.Tu)(e))), { $isExactDateFieldEmpty: Zo, $isFlexibleDateFieldEmpty: zo, $isPeriodDateFieldEmpty: Go } = (0, n.withFactory)({ sid: "hryxdw", fn: () => (0, xo.X)({ source: (0, n.combine)({ and: [{ activeTab: wo, isExactDateEmpty: ko.$isEmpty, isFlexibleDateEmpty: Do.$isEmpty, isPeriodDateEmpty: So.$isEmpty }], or: { sid: "-jogovn" } }), shape: { $isExactDateFieldEmpty: ({ activeTab: e, isExactDateEmpty: t }) => e === Ne.M4.Exact && t, $isFlexibleDateFieldEmpty: ({ activeTab: e, isFlexibleDateEmpty: t }) => e === Ne.M4.Flexible && t, $isPeriodDateFieldEmpty: ({ activeTab: e, isPeriodDateEmpty: t }) => e === Ne.M4.Period && t } }) }); (0, n.sample)({ and: [{ clock: Mo, source: jo("lib_forms_avia_form:errors.emptyOrigin"), filter: qo, target: Po }], or: { sid: "-57vk30" } }), (0, n.sample)({ and: [{ clock: Mo, source: jo("lib_forms_avia_form:errors.emptyDestination"), filter: Lo, target: $o }], or: { sid: "-540zxh" } }), (0, n.sample)({ and: [{ clock: Mo, source: jo("lib_forms_avia_form:errors.emptyDestination"), filter: No.$active, target: $o }], or: { sid: "-4omrbd" } }), (0, n.sample)({ and: [{ clock: Mo, source: jo("lib_forms_avia_form:errors.emptyDestination"), filter: Io.$active, target: $o }], or: { sid: "-498ip9" } }), (0, n.sample)({ and: [{ clock: Mo, source: jo("lib_forms_avia_form:errors.sameCities"), filter: Ho, target: $o }], or: { sid: "-45dyjq" } }), (0, n.sample)({ and: [{ clock: Mo, source: jo("lib_forms_avia_form:errors.emptyDate"), filter: Zo, target: Ro }], or: { sid: "-3ow4qw" } }), (0, n.sample)({ and: [{ clock: Mo, source: jo("lib_forms_avia_form:errors.emptyRange"), filter: zo, target: Ro }], or: { sid: "-39hw4s" } }), (0, n.sample)({ and: [{ clock: Mo, source: jo("lib_forms_avia_form:errors.emptyPeriod"), filter: Go, target: Ro }], or: { sid: "-2u3nio" } }), (0, n.sample)({ and: [{ source: { error: Po, isFocused: sa, isOriginEmpty: qo }, filter: ({ isOriginEmpty: e, isFocused: t, error: s }) => !!s && (t || !e), target: To }], or: { sid: "-2dltpu" } }), (0, n.sample)({ and: [{ source: { error: $o, isFocused: oa, isPlacesSame: Ho, isDestinationEmpty: Lo, isNationalParkScreenActive: No.$active, isCountryScreenActive: Io.$active }, filter: ({ isDestinationEmpty: e, isFocused: t, error: s, isPlacesSame: a, isNationalParkScreenActive: n, isCountryScreenActive: i }) => !!s && !a && (t || !e) && !n && !i, target: Ao }], or: { sid: "-1w0eqa" } }), (0, n.sample)({ and: [{ source: { error: Ro, isFocused: da }, filter: ({ isFocused: e, error: t }) => !!t && e, target: Eo }], or: { sid: "-v66z3" } }); const Vo = (0, n.createEvent)({ sid: "1hrsum" }), Uo = (0, n.createEffect)((e => e.preventDefault()), { sid: "-fj86ha" }); (0, n.sample)({ and: [{ clock: Vo, target: [...Sa, Uo] }], or: { sid: "9z7qbb" } }), (0, n.sample)({ and: [{ clock: (0, n.withFactory)({ sid: "-v406vc", fn: () => (0, Se.CJ)({ clock: Uo.done, until: (0, n.withFactory)({ sid: "-mgw6kp", fn: () => (0, c.f)(pi) }) }) }), target: Mo }], or: { sid: "a1ypa4" } }), (0, n.sample)({ and: [{ clock: Mo, fn: () => ({ requestSource: Ne.MJ.SearchForm }), target: Fo }], or: { sid: "aigj2y" } }); var Wo = s(5070); const Ko = e => (0, Gt.jsx)("svg", { ...e, width: "13", height: "6", viewBox: "0 0 13 6", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", children: (0, Gt.jsx)("path", { d: "M3 4V6L0 3L3 0V2H13V4H3Z", fill: "currentColor" }) }), Jo = (0, U.memo)(Ko); var Yo = "s__OquZuvkKBlUHGiWiMAH6"; const Xo = ({ onClick: e, className: t }) => (0, Gt.jsxs)("button", { className: ve()("s__u2rMwqZOg1JBHXqoP_2S", t), onClick: e, type: "button", "data-test-id": "avia-swap-places", tabIndex: -1, children: [(0, Gt.jsx)(Jo, { className: ve()(Yo, "s__urEvHLuWAgjyK9lwxWRj") }), (0, Gt.jsx)(Jo, { className: ve()(Yo, "s__qQ_zzlEU2qk66djmFPpi") })] }), Qo = (0, U.memo)(Xo); function er({ className: e }) { return (0, Gt.jsx)("svg", { className: e, width: "17", height: "16", viewBox: "0 0 17 16", xmlns: "http://www.w3.org/2000/svg", fill: "currentColor", children: (0, Gt.jsx)("path", { d: "M13.698 11.131l-3.482-6.813a2.5 2.5 0 1 0-3.391.038L3.29 11.127A2.5 2.5 0 1 0 4.95 14h7.1a2.5 2.5 0 1 0 1.648-2.869zM8.5 4a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm-6 11a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm12 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm-1.647-3.38L9.45 4.812a2.493 2.493 0 0 1-1.77.05l-3.573 6.722c.424.356.729.851.843 1.415h7.1c.11-.546.4-1.027.803-1.38z", fillRule: "evenodd" }) }) } const tr = ({ onClick: e }) => { const { t: t } = (0, es.useTranslation)("lib_forms_avia_form"); return (0, Gt.jsxs)("button", { className: "s__ya3MCvejjABbdOSw8Ub_", onClick: e, "data-test-id": "switch-to-multiwayform", type: "button", children: [(0, Gt.jsx)(er, { className: "s__t3_ZR28TjIAhVJmQLb9w" }), (0, Gt.jsx)(Ht.x, { type: qt.y.Body2Regular, children: t("footer.complexRoute") })] }) }, sr = (0, U.memo)(tr); var ar = s(63263), nr = s(43548), ir = "s__R81Hd9qjhKmXLV5Q63RQ", or = s(29178), rr = s(49829), lr = s(68621); const { $hotelPartner: cr } = nr.K.outputs, { $premiumHotelPartnerMaxRateValues: dr } = rr.w.outputs, { $isAnyPremiumActive: ur } = lr.b.outputs, mr = (0, n.withFactory)({ sid: "bcg14e", fn: () => (0, ft.f)(cr, Ne.SL.Native) }), pr = (0, n.combine)({ and: [dr, cr, (e, t) => e?.[t] ?? null], or: { sid: "-sginoc" } }), hr = (0, n.withFactory)({ sid: "-mu4ehu", fn: () => (0, l.x)(ur, (0, n.withFactory)({ sid: "-gbta0k", fn: () => (0, c.f)((0, n.withFactory)({ sid: "-gbt9x4", fn: () => (0, or.c)(pr) })) })) }), { $hotelPartner: fr } = nr.K.outputs, gr = () => { const { t: e } = (0, es.useTranslation)("lib_forms_avia_form"), { hotelPartner: t, noSurronudings: s, premiumLabel: a, hotelPartnerMaxRateValue: n } = (0, i.useUnit)({ hotelPartner: fr, noSurronudings: mr, premiumLabel: hr, hotelPartnerMaxRateValue: pr }), o = e(`footer.hotelPartners.${a ? "pr" : "su"}.${t}`); return s ? (0, Gt.jsx)(Ht.x, { type: qt.y.Body2Regular, className: ir, testId: "no-cashback-label", tag: "span", children: o }) : a ? (0, Gt.jsx)(Ht.x, { type: qt.y.Body2Regular, className: ir, testId: "cashback-label", tag: "span", children: (0, Gt.jsx)(es.Trans, { t: e, i18nKey: "premiumOpenHotels", values: { hotelPartner: o, percent: n }, children: (0, Gt.jsx)(Ht.x, { className: "s__mSt1Bob80oUvMz2ngIhJ", type: qt.y.Body3Semi, tag: "span" }) }) }) : (0, Gt.jsx)(Ht.x, { type: qt.y.Body2Regular, className: ir, testId: "no-cashback-label", tag: "span", children: e("openHotels", { hotelPartner: o }) }) }, { $isWayAwayBrand: yr } = Ce.U.outputs, vr = ({ onChange: e }) => { const { shouldSearchHotels: t, toggledHotelsCheckbox: s, isWayAwayBrand: a } = (0, i.useUnit)({ shouldSearchHotels: nr.K.outputs.$shouldSearchHotels, toggledHotelsCheckbox: nr.K.inputs.toggledHotelsCheckbox, isWayAwayBrand: yr }), n = (0, U.useCallback)((t => { e?.({ checked: t.target.checked }), s() }), [e, s]); return (0, Gt.jsx)(ar.X, { className: ve()("s__xITh20Kiox8RYAfIvdfq"), checked: t, onChange: n, theme: a ? "default" : "onbright", label: (0, Gt.jsx)(gr, {}), "data-test-id": "booking-checkbox" }) }, { toComplexSearch: br } = W.i.inputs, xr = ({ showCheckbox: e, onCheckboxChange: t }) => { const { handleMultiwayClick: s } = (0, i.useUnit)({ handleMultiwayClick: br }); return (0, Gt.jsxs)("div", { className: "s__T4fHUqwmIqKNnTw3xLTZ", "data-test-id": "avia-footer", children: [(0, Gt.jsx)(sr, { onClick: s }), e && (0, Gt.jsx)(vr, { onChange: t })] }) }; var _r = s(1156), Cr = s(39535), wr = { submit: "s__VtKkhjd_g3s0MVyvRx1g" }; const kr = (0, U.forwardRef)((({ className: e, children: t, isInFullForm: s, hasFocus: a, ...n }, o) => { const r = (0, U.useRef)(null), l = (0, i.useUnit)(Ce.U.outputs.$isWayAwayBrand); return (0, U.useImperativeHandle)(o, (() => r.current)), (0, U.useEffect)((() => { a ? r.current?.focus() : r.current?.blur() }), [a]), (0, Gt.jsx)(_r.z, { className: ve()(e, wr.submit, { [wr.inFullForm]: Boolean(s) }), size: Cr.qE.M, mod: l ? Cr.Ly.Default : Cr.Ly.Orange, testId: "form-submit", type: "button", ref: r, ...n, children: (0, Gt.jsx)(_r.z.Label, { className: wr.label, type: qt.y.Title4Semi, children: t }) }) })); var Sr = { root: "s__2W1TIdRruf9CVqbw3qnh", field: "s__IwBVpRef_1GpuUeZuKUL", direction: "s__kuRvgtvIyGARw9Uy_oIZ", swap: "s__X0BPD4UNTiT6IuQkNqe6", origin: "s__AQ4OedS8Gooq9GAsep8w", destination: "s__dBAB6FOOSoqaYxSn1f9w", dates: "s__kGy7Tb3xVjEevcmv8PDu", payment: "s__Y2p2KDeafg8vpYsYxabA", passengers: "s__MBFP5gzzPEDRABiyJXw9", submit: "s__Yzjov8gtTIwlOo3oK8L3", footer: "s__zkDBW0A58etY7O4aa8fm", destinationInnerInput: "s__pbIJ79VEU4wqMNj75yFL", tooltipContent: "s__WqFIYt0F3nVxLTSgH_Xe", hidden: "s__LEzXl6mnDA_ZPb53eTR0", hideOnScroll: "s__RtCc6ErEruAHpHm61ct5", dropdown: "s__tIzlUD_fARhZ3kFkw6wY", form: "s__DWMnirAs3sL6CCSxUuS9", originInput: "s__I_UKw7tKKBKz9jStrghD", destinationInput: "s__y0KFm2r0XAZUAEo1nbj2", datesStartInput: "s__QOH8_RMDyCm4BxeyrqOt", datesEndInput: "s__qO2qUuaHHBMsAgKGqoWL", paymentInput: "s__t4OZi4U_kNdQ9ES7QoN3", passengersInput: "s__BygstPtmhyan3RfsYhcJ", withPaymentSelect: "s__no1wOFrFGuSKS5etUm41" }, Dr = s(77606), Fr = s.n(Dr), jr = s(68689), Nr = s(3945), Ir = s.n(Nr), Mr = s(66415), Tr = s.n(Mr), Ar = s(83049), Er = s.n(Ar), Pr = s(39104), $r = s.n(Pr), Rr = s(88846), Br = s.n(Rr), Or = s(40104), Hr = s.n(Or), qr = s(46898), Lr = s.n(qr), Zr = s(52151), zr = s.n(Zr), Gr = s(69937), Vr = s.n(Gr), Ur = s(36071), Wr = s(84063), Kr = s.n(Wr), Jr = s(63360), Yr = s.n(Jr); const Xr = e => { const t = (s = e.search_params, Kr()(["origin", s.originCityIata], s.segments)); var s; return { iata: t?.origin || e.search_params.originCityIata, name: e.search_params.originName || t?.origin_name || "", type: Mt.A.City, countryIata: t?.origin_country, cityIata: e.search_params.originCityIata, cases: e.search_params.originCases } }, Qr = e => { const t = (s = e.search_params, Kr()(["destination", s.destinationCityIata], s.segments)); var s; return { iata: t?.destination || e.search_params.destinationCityIata, name: e.search_params.destinationName || t?.destination_name || "", type: Mt.A.City, countryIata: t?.destination_country, cityIata: e.search_params.destinationCityIata, cases: e.search_params.destinationCases } }, el = e => { const t = (s = e.ticket, s.segment[0].flight[0]).departure_date ?? null; var s; const a = e.search_params.isOneWay ? null : (e => e.segment[e.segment.length - 1].flight[0])(e.ticket)?.departure_date ?? null; return { departDate: t ? new Date(t) : null, returnDate: a ? new Date(a) : null } }, tl = e => { const t = Yr()(e); return t.reduce(((e, t) => t.price < e.price ? t : e), t[0]).price }; function sl(e) { const { ticket: t, created_at: s, search_params: a } = e; return { origin: Xr(e), destination: Qr(e), dates: el(e), passengers: a.passengers, tripClass: a.tripClass, price: tl(t.terms), isOneWay: a.isOneWay, createdAt: s, type: Mt.A.History } } function al(e) { const t = (0, Ur.P_)(e.passengers), s = e.dates.departDate instanceof Date ? e.dates.departDate.getDate() + e.dates.departDate.getMonth() : null, a = e.dates.returnDate instanceof Date ? e.dates.returnDate.getDate() + e.dates.returnDate.getMonth() : null; return Ir()("", [t, a, s, e.origin.iata, e.destination.iata, e.tripClass]) } function nl(e) { return !function (e) { if (Fr()(e) || It()(e)) return !1; if (e.length > 2) return !0; if (2 === e.length) { const t = Vr()(e), s = zr()(e); return !!(t?.origin && t?.destination && s?.origin && s?.destination) && (t.origin !== s.destination || t.destination !== s.origin) } return !1 }(e.search_params.segments) } function il(e) { return !!(t = e.dates.departDate) && t >= new Date; var t } const ol = (0, n.createStore)(2, { sid: "-82dfwp" }), rl = (0, n.combine)({ and: [g.W.outputs.$searches, function (e) { return Fr()(e) ? [] : Lr()([Hr()(nl), Br()(sl), Hr()(il), Er()(al), Tr()("created_at")])(e) }], or: { sid: "-cv0kx2" } }), ll = (0, n.combine)({ and: [rl, ol, function (e, t) { return Fr()(e) ? [] : Lr()([Tr()("created_at"), $r()(0, t)])(e) }], or: { sid: "f90kl7" } }); s(21703); var cl = s(9669), dl = s.n(cl), ul = s(17563), ml = s(54236); function pl(e) { return e.map((t => { return function (e) { return "national_park" === e.type }(t) ? { iata: (s = t).id, name: s.name, type: Mt.A.NationalPark, slug: s.slug, isVirtual: !1 } : { iata: t.code ?? t.iata ?? "", name: t.name, cases: t.cases ?? void 0, type: t.type, cityIata: t.city_code ?? t.iata ?? void 0, cityName: t.city_name ?? void 0, coordinates: t.coordinates ?? void 0, countryIata: t.country_code ?? void 0, countryName: t.country_name ?? void 0, weight: t.weight ?? void 0, inMetropolis: t.type === Mt.A.Airport && hl(e, t), isVirtual: !1 }; var s })) } function hl(e, t) { return e.some((e => e.type === Mt.A.City && e.code === t.city_code)) } var fl = s(45711); const gl = (0, Re.Array)((0, Re.Record)({ id: Re.String, type: (0, Re.Union)((0, Re.Literal)("city"), (0, Re.Literal)("airport"), (0, Re.Literal)("country"), (0, Re.Literal)("national_park")), name: Re.String, code: Re.String.nullable().optional(), slug: Re.String.nullable().optional(), iata: Re.String.nullable().optional(), country_code: Re.String.nullable().optional(), country_name: Re.String.nullable().optional(), state_code: Re.String.nullable().optional(), coordinates: (0, Re.Record)({ lon: Re.Number, lat: Re.Number }).nullable().optional(), index_strings: (0, Re.Array)(Re.String).nullable().optional(), weight: Re.Number.nullable().optional(), cases: fl.Cu.nullable().optional(), country_cases: fl.Cu.nullable().optional(), city_cases: fl.Cu.nullable().optional(), city_code: Re.String.nullable().optional(), city_name: Re.String.nullable().optional(), main_airport_name: Re.String.nullable().optional() })), yl = (0, Pe.cr)("explore", { name: "form" }), { urlWithApiHost: vl, fillApiHost_IN_DANGEROUS_CLIENT_SIDE_ONLY_WAY: bl } = Te.B.outputs, { SUGGEST_HOST: xl } = $e.H, _l = (0, n.withFactory)({ sid: "-v0qupk", fn: () => (0, Ie.s5)({ name: "autocompleteSuggestionsQuery", params: (0, n.withFactory)({ sid: "-6ow9be", fn: () => (0, Ie.t6)() }), request: { method: "GET", url: vl(Ae.Nv`${xl}/v2/places.json`, { escape: !1 }), query: { source: (0, n.combine)({ and: [{ locale: ml.z.outputs.$localeDeprecated }], or: { sid: "ckx6dd" } }), fn: (e, t) => (0, ul.stringify)({ ...e, ...t }, { arrayFormat: "bracket" }) } }, response: { contract: (0, Me.v)(gl), mapData: ({ result: e }) => pl(e) }, concurrency: { strategy: "TAKE_LATEST" } }) }); (0, n.withFactory)({ sid: "-s0oy7v", fn: () => (0, Ie.Vs)(_l, { after: "10s" }) }), (0, n.sample)({ and: [{ clock: _l.finished.failure, filter(e) { const t = !(0, n.withFactory)({ sid: "sj76hx", fn: () => (0, Ie.eE)(e) }), s = !(0, n.withFactory)({ sid: "-la8yws", fn: () => (0, Ie.Bh)(400) })(e); return !(0, n.withFactory)({ sid: "-i2kfwt", fn: () => (0, Ie.q4)(e) }) && t && s }, fn({ error: e, params: t }) { const { errorType: s, ...a } = e; return { msg: "Autocomplete suggestions fetching failed", label: "autocomplete", error: new Error(s), extra: { params: t, ...a } } }, target: yl.sendErrorLog }], or: { sid: "-ryhruf" } }); const Cl = (0, Pe.cr)("platform", { name: "autocompleteTimeout", samplingRate: .1 }); (0, n.sample)({ and: [{ clock: _l.finished.failure, filter: Ie.q4, fn: ({ error: e, params: t }) => { const { errorType: s, ...a } = e; return { msg: "Autocomplete timeout", label: "autocomplete", error: new Error(s), extra: { params: t, ...a } } }, target: Cl.sendWarningLog }], or: { sid: "oop80a" } }); const wl = (0, n.withFactory)({ sid: "-8v03ar", fn: () => (0, Ie._7)(_l) }), kl = (0, n.withFactory)({ sid: "pl3lzm", fn: () => (0, Ie._7)(_l) }), Sl = e => e.reduce(((t, s) => { if (s.type === Mt.A.Airport && s.inMetropolis) return t; if (s.type === Mt.A.City) { const a = e.filter((e => e.inMetropolis && e.cityIata === s.iata)); return [...t, s, ...a] } return [...t, s] }), []); function Dl({ searchHistory: e, places: t, countries: s, anywhere: a, weekends: n }, i) { const o = i === jr.d.Origin ? "origin" : "destination", r = [], l = t?.length ?? 0, c = s?.length ?? 0, d = e?.length ?? 0, u = a ? 1 : 0; return t?.length && r.push({ type: Rt.CityOrAirportOrPark, items: t.map(((e, t) => ({ ...e, comment: e.type !== Mt.A.NationalPark ? e.iata : void 0, index: t }))) }), s?.length && r.push({ type: Rt.Country, items: s.map(((e, t) => ({ ...e, comment: e.iata, index: t + l }))) }), e?.length && r.push({ type: Rt.SearchHistory, items: e.map(((e, t) => ({ ...e, name: e[o].cityName ?? e[o].name, iata: e[o].iata, index: t + l + c }))) }), a && r.push({ type: Rt.Anywhere, items: [{ ...a, index: l + c + d }] }), n && r.push({ type: Rt.Weekends, items: [{ ...n, index: l + c + d + u }] }), r } const Fl = (e, t, s) => { const a = s === jr.d.Origin ? "destination" : "origin"; return e.filter((e => e[a].cityIata === t.iata || e[a].cityIata === t.cityIata)) }, jl = (e, t, s, a, n) => { let i = e; return s && (0, Y.pu)(s) && (i = Fl(i, s, n)), t && t.length && a && (i = ((e, t, s) => { const a = s === jr.d.Origin ? "origin" : "destination"; return e.filter((e => t.some((t => e[a].cityIata === t.cityIata || e[a].cityIata === t.iata)))) })(i, t, n)), i.slice(0, 2) }, Nl = (e, t, s) => { let a = e; return t && (0, Y.pu)(t) && (a = Fl(a, t, s)), a }, { $anywhereService: Il, $weekendsService: Ml } = W.i.outputs, Tl = ["city", "airport"], Al = (0, n.createEvent)({ sid: "7ew9a8" }); (0, n.sample)({ and: [{ clock: Al, target: na }], or: { sid: "-vwo07j" } }); const El = (0, n.createEvent)({ sid: "-kptu0i" }), Pl = (0, n.restore)(El, "", { sid: "-gbt3r2" }); (0, n.sample)({ and: [{ clock: El, source: Bs, filter: (e, t) => !Fr()(t.trim()) && e?.name !== t.trim(), fn: (e, t) => ({ max: 7, types: [...Tl], term: t.trim() }), target: wl.start }], or: { sid: "-veismm" } }); const $l = wl.finished.success, Rl = (0, n.combine)({ and: [wl.$data, e => { const t = e?.filter((e => e.type === Mt.A.City || e.type === Mt.A.Airport)) ?? []; return Sl(t) }], or: { sid: "cmee7l" } }), Bl = (0, n.combine)({ and: [rl, Rl, Hs, Pl, (e, t, s, a) => jl(e, t, s, a, jr.d.Origin)], or: { sid: "drux85" } }), Ol = (0, n.combine)({ and: [ll, Hs, (e, t) => Nl(e, t, jr.d.Origin)], or: { sid: "-45ilvs" } }), Hl = (0, n.createStore)([], { sid: "-5rcixp" }), ql = (0, n.createEvent)({ sid: "-l4qp6z" }), Ll = (0, n.createEvent)({ sid: "nkjcos" }); (0, n.sample)({ and: [{ clock: ql, source: { searchHistory: Ol, inputValue: Pl }, filter: ({ inputValue: e }) => Fr()(e), fn: ({ searchHistory: e }) => Dl({ searchHistory: e }, jr.d.Origin), target: Hl }], or: { sid: "gdjokn" } }), (0, n.sample)({ and: [{ clock: Ll, source: { places: Rl, searchHistory: Bl, inputValue: Pl, isOriginFieldFocused: sa }, filter: ({ inputValue: e, isOriginFieldFocused: t }) => !Fr()(e) && t, fn: ({ places: e, searchHistory: t }) => Dl({ searchHistory: t, places: e }, jr.d.Origin), target: Hl }], or: { sid: "h8vye8" } }), (0, n.sample)({ and: [{ clock: [aa, El], target: ql }], or: { sid: "hsojr8" } }), (0, n.sample)({ and: [{ clock: $l, target: Ll }], or: { sid: "i6z76m" } }), (0, n.sample)({ and: [{ clock: Al, filter: e => Fr()(e), fn: () => null, target: Os }], or: { sid: "imx8e3" } }); const Zl = (0, n.createEvent)({ sid: "-910v0u" }); (0, n.sample)({ and: [{ clock: Zl, target: la }], or: { sid: "j4indn" } }); const zl = (0, n.createEvent)({ sid: "-9b8wk" }), Gl = (0, n.restore)(zl, "", { sid: "-dh0oo6" }); (0, n.sample)({ and: [{ clock: zl, source: { showCountriesInAutocomplete: co, showNationalParksInAutocomplete: uo, destinationFieldValue: Hs }, filter: ({ destinationFieldValue: e }, t) => !Fr()(t.trim()) && e?.name !== t.trim(), fn: ({ showCountriesInAutocomplete: e, showNationalParksInAutocomplete: t }, s) => { const a = [...Tl]; return e && a.push("country"), t && a.push("national_park"), { max: 7, types: a, term: s.trim() } }, target: kl.start }], or: { sid: "tklx8n" } }); const Vl = kl.finished.success, { $destinationPlaceSuggestions: Ul, $destinationCountrySuggestions: Wl } = (0, n.withFactory)({ sid: "l5hsab", fn: () => (0, xo.X)({ source: kl.$data, shape: { $destinationPlaceSuggestions: e => { const t = e?.filter((e => e.type === Mt.A.City || e.type === Mt.A.Airport || e.type === Mt.A.NationalPark)) ?? []; return Sl(t) }, $destinationCountrySuggestions: e => e?.filter((e => e.type === Mt.A.Country)) ?? [] } }) }), Kl = (0, n.combine)({ and: [rl, Ul, Bs, Gl, (e, t, s, a) => jl(e, t, s, a, jr.d.Destination)], or: { sid: "-s3nvwd" } }), [Jl, Yl] = (0, n.withFactory)({ sid: "n14hbg", fn: () => (0, Ct.K)((0, n.combine)({ and: [ll, Bs, (e, t) => Nl(e, t, jr.d.Destination)], or: { sid: "jhf693" } })) }), Xl = (0, n.createStore)([], { sid: "m1trqa" }), Ql = (0, n.createEvent)({ sid: "-7jdttn" }), ec = (0, n.createEvent)({ sid: "4jgmpo" }), tc = (0, n.withFactory)({ sid: "9zo9l0", fn: () => (0, ht.w)(ro, Il, null) }), sc = (0, n.withFactory)({ sid: "-gmym33", fn: () => (0, ht.w)(lo, Ml, null) }); (0, n.sample)({ and: [{ clock: Ql, source: { searchHistory: Jl, anywhere: tc, weekends: sc }, fn: ({ searchHistory: e, anywhere: t, weekends: s }) => Dl({ searchHistory: e, anywhere: Fr()(e) ? void 0 : t, weekends: Fr()(e) ? void 0 : s }, jr.d.Destination), target: Xl }], or: { sid: "-qsnn3t" } }), (0, n.sample)({ and: [{ clock: ec, source: { places: Ul, countries: Wl, searchHistory: Kl, anywhere: tc, weekends: sc }, fn: ({ places: e, countries: t, searchHistory: s, anywhere: a, weekends: n }) => Dl({ searchHistory: s, places: e, countries: t, anywhere: a, weekends: n }, jr.d.Destination), target: Xl }], or: { sid: "-ptgt4p" } }), (0, n.sample)({ and: [{ clock: ra, source: { isDestinationFocusedOnRender: Ca, isRendered: L, inputValue: Gl }, filter: ({ isRendered: e, inputValue: t }) => Fr()(t) && e, target: Ql }], or: { sid: "-ox0y4e" } }), (0, n.sample)({ and: [{ clock: zl, source: Gl, filter: e => Fr()(e), target: Ql }], or: { sid: "-oebxy4" } }), (0, n.sample)({ and: [{ clock: Vl, source: Gl, filter: e => !Fr()(e), target: ec }], or: { sid: "-nyxpc0" } }), (0, n.sample)({ and: [{ clock: Zl, filter: e => Fr()(e), fn: () => null, target: qs }], or: { sid: "-nhw2xt" } }); const ac = (0, Pe.cr)("explore", { name: "autocomplete_avia_form" }), nc = (0, n.createEvent)({ sid: "8r1cro" }), ic = (0, n.createEvent)({ sid: "1u3t75" }); (0, n.sample)({ and: [{ clock: nc, fn: e => ({ msg: "Failed to render origin autocomplete in avia form", extra: { error: e } }), target: ac.sendWarningLog }], or: { sid: "-mxjozg" } }), (0, n.sample)({ and: [{ clock: ic, fn: e => ({ msg: "Failed to render destination autocomplete in avia form", extra: { error: e } }), target: ac.sendWarningLog }], or: { sid: "-mfy9zw" } }); const oc = (0, n.withFactory)({ sid: "tcvxgn", fn: () => (0, xe.SC)({ view: Ss, bind: { id: "avia_form_origin", selectedItem: Bs, onItemSelect: Os, sections: Hl, onInputValueChange: El, hasFocus: sa, onInputFocus: aa, onInputBlur: Al, tabIndex: ia, autoSelect: !0, error: Po, onRenderError: nc } }) }), rc = (0, n.withFactory)({ sid: "-4f31wq", fn: () => (0, xe.SC)({ view: Ss, bind: { id: "avia_form_destination", selectedItem: Hs, onItemSelect: qs, sections: Xl, onInputValueChange: zl, hasFocus: oa, onInputFocus: ra, onInputBlur: Zl, tabIndex: ca, autoSelect: !0, error: $o, onRenderError: ic } }) }); var lc = s(59744), cc = { icon: "s__sIkY0Bq_wcIHn8a1wYSw", disabled: "s__zAiWCJNpnJqvTvsxDsUT", exact: "s__ge0zqLwJIAM8LTkw0VoJ", flexible: "s__uzgJKlISEdkiHgdQI6J2", period: "s__Sv_g2U_nSsq_XKVQnKpx", weekends: "s__OffaWjk755gZiH_eMguV" }; const dc = ({ type: e, disabled: t }) => (0, Gt.jsxs)("svg", { xmlns: "http://www.w3.org/2000/svg", width: "28", height: "22", fill: "none", viewBox: "0 0 28 22", className: ve()(cc.icon, cc[e], { [cc.disabled]: t }), children: [(0, Gt.jsx)("rect", { width: "4", height: "4", y: "6", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", y: "12", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", y: "18", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", x: "6", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", x: "6", y: "6", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", x: "6", y: "12", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", x: "6", y: "18", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", x: "12", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", x: "12", y: "6", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", x: "12", y: "12", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", x: "12", y: "18", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", x: "18", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", x: "18", y: "6", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", x: "18", y: "12", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", x: "24", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", x: "24", y: "6", rx: "1.5" }), (0, Gt.jsx)("rect", { width: "4", height: "4", x: "24", y: "12", rx: "1.5" })] }), uc = (0, U.memo)(dc); var mc = { tabs: "s__REgQRnPpnAh5V4uNHzpt", tab: "s__P1RaUYTqPn2ECt9eXX4Y", text: "s__KD58te_ED60UpqN_pwCl", disabled: "s__liER3U9nuytQLG9hPov6", active: "s__neqk17N7zTqpvnqlGwA9" }; const { $isDesktop: pc } = f.l.outputs; function hc({ active: e, disabled: t = !0, type: s, onClick: a }) { const n = (0, i.useUnit)(pc), { t: o } = (0, es.useTranslation)("lib_forms_trip_duration"), r = (0, U.useMemo)((() => n ? qt.y.Body2Semi : qt.y.CaptionSemi), [n]), l = (0, U.useCallback)((() => { a && a(s) }), [a, s]); return (0, Gt.jsxs)("button", { className: ve()(mc.tab, { [mc.active]: e, [mc[s]]: !0, [mc.disabled]: t }), onClick: l, type: "button", "data-test-id": `tab-${s}`, children: [(0, Gt.jsx)(uc, { type: s, disabled: t }), (0, Gt.jsx)(Ht.x, { type: r, className: ve()(mc.text, { [mc.disabled]: t }), children: o(`tabs.${s}`) })] }) } const fc = (0, U.memo)(hc), gc = e => { const { active: t, tabs: s, onClick: a, disabledTabs: n } = e; return (0, Gt.jsx)("div", { className: mc.tabs, children: s.map((e => (0, Gt.jsx)(fc, { type: e, active: t === e, onClick: a, disabled: n.includes(e) }, e))) }) }, yc = (0, U.memo)(gc); var vc = s(37723), bc = s(73203); const xc = (0, n.withFactory)({ sid: "dl5heg", fn: () => (0, xe.SC)({ view: _c, bind: { title: Gi } }) }); function _c({ title: e, subtitleClassName: t }) { const s = (() => { const { t: e } = (0, es.useTranslation)("lib_forms_trip_duration"), { isEndFieldClicked: t, periodDateRange: s, selectedDateCase: a } = (0, i.useUnit)({ isEndFieldClicked: xi, periodDateRange: on, selectedDateCase: oi }), n = (0, cs.d)("ts_day_month"), o = (0, cs.d)("ts_month_short", (0, vt.Z)(new Date, 1)); let r = ""; if (a === Ne.M4.Flexible) r = e(`${Ne.dm.Avia}.flexible.prompt`, { month: o }); else if (a === Ne.M4.Period && (r = e(`${Ne.dm.Avia}.period.prompt`, { month: o }), t && s?.range?.from && s.range?.to)) { const { from: t, to: a } = s.range, i = t.getMonth() === a.getMonth(); r = e(`${Ne.dm.Avia}.period.return.range`, { from: i ? t.getDate() : n(t), to: n(a) }) } return r })(); return (0, Gt.jsxs)("div", { className: "s__fY6DrNwnATM4NfWBZykZ", children: [(0, Gt.jsx)(Ht.x, { type: qt.y.Title4Semi, testId: "calendar-title", className: "s__duuszxZbzM3oq9Dhi_56", children: e }), s && (0, Gt.jsx)(Ht.x, { type: qt.y.Body3Regular, className: ve()("s__j4vVcF_Z5UhjH9lOf_KP", t), children: s })] }) } var Cc = { buttons: "s__NMH0Mfsn3rtYFOkaATKe", button: "s__ZF9rrMqgqGu49hEqCLNp" }; const wc = ve().bind(Cc), { $isDesktop: kc } = f.l.outputs, Sc = ({ className: e, buttons: t }) => { const s = (0, i.useUnit)(kc) && Boolean(t.additionButtonSlot && t.actionButtonSlot); return (0, Gt.jsxs)("div", { className: wc(Cc.buttons, e), children: [t.additionButtonSlot && (0, Gt.jsx)(_r.z, { mod: Cr.Ly.Default, size: Cr.qE.M, priority: Cr.Ji.Secondary, className: Cc.button, inline: s, onClick: t.handleAdditionButton, children: t.additionButtonSlot }), t.actionButtonSlot && (0, Gt.jsx)(_r.z, { mod: t.actionButtonMode, priority: t.actionButtonPriority, disabled: t.actionButtonDisabled, size: Cr.qE.M, className: Cc.button, inline: s, onClick: t.handleActionButton, testId: "calendar-action-button", children: t.actionButtonSlot })] }) }; var Dc = s(31496), Fc = s(3745), jc = "s__eeGIUoHB6_kZ9jR498TW", Nc = "s__gzrylxwTMbe2EetETBnj", Ic = "s__h0UtXkTMSw9cFIK0jCzj"; const Mc = ({ isDesktop: e, isChooseAllToggleSelected: t, isAdditionalDaysToggleSelected: s, onAdditionalDaysToggleClick: a, onChooseAllToggleClick: n }) => { const { t: i } = (0, es.useTranslation)("lib_forms_trip_duration"); return (0, Gt.jsx)(Gt.Fragment, { children: e ? (0, Gt.jsxs)("div", { className: jc, children: [(0, Gt.jsx)(Dc.m, { isActive: !0, isSelected: t, isDisabled: !1, onChange: n, testId: "select-all-weekends", children: i("avia.weekends.chooseAllToggle") }), t && (0, Gt.jsx)(Dc.m, { isActive: !0, isSelected: s, isDisabled: !1, onChange: a, testId: "select-additional-days", children: i("avia.weekends.additionalDaysToggle") })] }) : (0, Gt.jsxs)("div", { className: jc, children: [(0, Gt.jsx)("div", { className: Nc, children: (0, Gt.jsx)(Fc.r, { size: "medium", onChange: n, checked: t, label: i("avia.weekends.chooseAllToggleMobile"), labelPosition: "left", className: Ic }) }), t && (0, Gt.jsx)("div", { className: Nc, children: (0, Gt.jsx)(Fc.r, { size: "medium", onChange: a, checked: s, label: i("avia.weekends.additionalDaysToggleMobile"), labelPosition: "left", className: Ic }) })] }) }) }, { $isDesktop: Tc } = f.l.outputs, Ac = (0, n.withFactory)({ sid: "lpel3c", fn: () => (0, xe.SC)({ view: Mc, bind: { isDesktop: Tc, isChooseAllToggleSelected: $n, onChooseAllToggleClick: On, isAdditionalDaysToggleSelected: Hn, onAdditionalDaysToggleClick: Zn } }) }); var Ec = { container: "s__weVwkRp7rTXQAUFDIsgm", header: "s__w7s5MLuNSddtVmyYrTKp", buttons: "s__f883FcusLpWo2JoH80Rh", info: "s__lYYO9EufvDyH2rp4eIQ3", calendar: "s__TraUpiZ0aZDvGLxZoow_" }; const { $isDesktop: Pc } = f.l.outputs, $c = e => { const { activeTab: t, selectedDays: s, availableDays: a, disabledDays: n, currentMonth: o, modifiers: r, numberOfMonths: l, orientation: c, buttons: d, hideCalendarHeader: u, canSelectMonthCaption: m, footnotes: p, onDaySelect: h, onDayMouseEnter: f, onDayMouseLeave: g, onCurrentMonthChange: y, onCalendarMouseLeave: v, renderDayContent: b, onPreviousMonthClick: x, onNextMonthClick: _, onDayTouchEnd: C, onDayTouchStart: w } = e, k = (0, i.useUnit)(Pc), S = (0, U.useRef)(null), D = (0, U.useMemo)((() => s.map((e => ({ from: e.from ?? void 0, to: e.to ?? void 0 })))), [s]); return (0, Gt.jsxs)("div", { className: Ec.container, "data-test-id": `${t}-calendar`, children: [!u && (0, Gt.jsxs)("header", { className: Ec.header, "data-test-id": `${t}-calendar-header`, children: [(0, Gt.jsxs)("div", { className: Ec.info, children: [(0, Gt.jsx)(xc, {}), t === Ne.M4.Weekends && (0, Gt.jsx)(Ac, {})] }), (0, Gt.jsx)(Sc, { className: Ec.buttons, buttons: d })] }), !k && t === Ne.M4.Weekends && (0, Gt.jsx)(Ac, {}), (0, Gt.jsx)(vc.Z, { unmountOnExit: !0, timeout: { appear: 1e3 }, classNames: { appear: Ec.appear, appearActive: Ec.appearActive }, nodeRef: S, in: !0, appear: k && !!S.current, children: (0, Gt.jsx)("div", { className: Ec.drop, ref: S, children: (0, Gt.jsx)(bc.f, { selectedDays: D, availableDays: a, disabledDays: n, currentMonth: o, modifiers: r, numberOfMonths: l, orientation: c, footnotes: p, canSelectMonthCaption: m, showNavbar: c === xt.i.Horizontal, onDayClick: h, onDayMouseEnter: f, onDayMouseLeave: g, onPreviousClick: x, onNextClick: _, onCurrentMonthChange: y, onCalendarMouseLeave: v, onDayTouchEnd: C, onDayTouchStart: w, renderDayContent: b, className: Ec.calendar }) }) }, t)] }) }; var Rc = s(32301); let Bc, Oc; !function (e) { e.OW = "oneWay", e.RT = "roundTrip" }(Bc || (Bc = {})), function (e) { e[e.Min = 1] = "Min", e[e.Max = 30] = "Max" }(Oc || (Oc = {})); const Hc = ({ duration: e, selectedDays: t, onDurationRangeSelect: s }) => { const { t: a } = (0, es.useTranslation)("lib_forms_trip_duration"), n = (0, U.useMemo)((() => { const e = t?.[0]?.to && t?.[0]?.from && (0, Ba.Z)(t[0].to, t[0].from) + 1; return e && e > 1 && e < Oc.Max ? e : Oc.Max }), [t]), i = (0, U.useMemo)((() => e ? [e?.min, e?.max] : [Oc.Min, n]), [e, n]), o = (0, U.useMemo)((() => i[0] !== i[1] ? a("duration", { min: i[0], max: i[1] }) : a("equalDuration", { duration: i[0] })), [i, a]), r = (0, U.useCallback)((e => { s && s([e]) }), [s]); return (0, Gt.jsxs)(Gt.Fragment, { children: [(0, Gt.jsx)(Ht.x, { type: qt.y.Body1Regular, className: "s__DAcYkqOGxBgCpQ5GqvN7", children: `${a("avia.period.return.title")}: ${o}` }), (0, Gt.jsx)("div", { className: "s__CqRKd6DcP_RC3PXPk0kB", children: (0, Gt.jsx)(Rc.e, { value: i, min: Oc.Min, max: n, step: 1, onChange: r, disabled: n === Oc.Min, allowCross: !1, className: "s__FDF9_68J3FAFvgtzFbFa" }) })] }) }; const { $isDesktop: qc } = f.l.outputs, Lc = ({ duration: e, selectedDays: t, buttons: s, onDurationRangeSelect: a }) => { const n = (0, i.useUnit)(qc), o = (0, U.useMemo)((() => t?.[0]?.from && t?.[0]?.to && !(0, Ea.Z)(t[0].from, t[0].to) || !1), [t]); return (0, Gt.jsxs)("div", { className: "s__ock_3H6Yh5Xx6qd2NWeA", "data-test-id": "trip-duration-slider-modal", children: [n && (0, Gt.jsxs)("div", { className: "s__cVvHxKfjY3bscoa7MPYt", children: [(0, Gt.jsx)(xc, { subtitleClassName: o ? "s__DPHzMLmuBl7bfGuReImz" : null }), (0, Gt.jsx)(Sc, { buttons: s })] }), (0, Gt.jsx)(Hc, { duration: e, selectedDays: t, onDurationRangeSelect: a })] }) }; var Zc = s(28891), zc = s(31482); const Gc = (0, n.createEvent)({ sid: "ujamvb" }); (0, n.sample)({ and: [{ clock: Gc, fn: () => Ne.M4.Exact, target: ii }], or: { sid: "s1g84x" } }); const { translated: Vc } = kt.J.outputs, Uc = (0, n.withFactory)({ sid: "7jnibo", fn: () => (0, xe.SC)({ view: zc.m, bind: { text: Vc("lib_forms_trip_duration:emptyState.unpopularDirection.text"), buttonText: Vc("lib_forms_trip_duration:emptyState.unpopularDirection.button"), dataTestId: "calendar_empty_state", onButtonClick: Gc, icon: (0, Gt.jsx)(Zc.M, {}), containerClassName: "s__X1hkDteyOwL9xuNgHIMo" } }) }); const { $isDesktop: Wc } = f.l.outputs, Kc = e => { const { activeTab: t, disabledTabs: s, tabs: a, onTabChange: n, isEmptyState: o, buttons: r, selectedDays: l, availableDays: c, disabledDays: d, currentMonth: u, modifiers: m, orientation: p, numberOfMonths: h, footnotes: f, hideCalendarHeader: g, canSelectMonthCaption: y, onDaySelect: v, onDayMouseEnter: b, onDayMouseLeave: x, onCurrentMonthChange: _, onCalendarMouseLeave: C, onDayTouchEnd: w, onDayTouchStart: k, renderDayContent: S, duration: D, isSlider: F, onDurationRangeSelect: j, onNextMonthClick: N, onPreviousMonthClick: I } = e, M = (0, i.useUnit)(Wc); return (0, Gt.jsxs)("div", { className: ve()("s__gRyRy4YyodTA5lgEQmq9", { s__ZZQGOhqg9lB4emhN5Itq: !F }), children: [(!F || F && !M) && a && a.length > 1 && (0, Gt.jsx)(yc, { active: t, disabledTabs: s, tabs: a, onClick: n }), (0, Gt.jsx)("div", { className: "s__gBQhehicgsFfvszmJySV", children: o ? (0, Gt.jsx)(Uc, {}) : (0, Gt.jsx)(Gt.Fragment, { children: F ? (0, Gt.jsx)(Lc, { duration: D, selectedDays: l, buttons: r, onDurationRangeSelect: j }) : (0, Gt.jsx)($c, { activeTab: t, selectedDays: l, availableDays: c, disabledDays: d, currentMonth: u, modifiers: m, orientation: p, numberOfMonths: h, buttons: r, footnotes: f, hideCalendarHeader: g, canSelectMonthCaption: y, onDaySelect: v, onDayMouseEnter: b, onDayMouseLeave: x, onCurrentMonthChange: _, onCalendarMouseLeave: C, renderDayContent: S, onNextMonthClick: N, onPreviousMonthClick: I, onDayTouchEnd: w, onDayTouchStart: k }) }) })] }) }; var Jc = s(61079), Yc = { containerWrapper: "s__mtImpdxqmb3FtpyrTsgk", dropdown: "s__co7atbyzEZ91SLWQ8JaH", dropdownContent: "s__O_1mYvhGqZGdX_9iqNQ1", sliderWrapper: "s__uAeXKpG9IDZnoDt0MBnu", fieldsContainer: "s__QH4N4LXn12T3MaGvIuls", tripDurationInput: "s__iUCZVK_7pftNPmX5zeoS", field: "s__OIqaFwbhkZg2cIA5d0zJ", focused: "s__yEM_StZVCY12Z9yCKcq4", error: "s__jv5aDW5mbhCTHb2YUegx", secondaryText: "s__x4KgSIG987qu2AxBtn9k", primaryText: "s__uqBf1OVkUL8GionzIr0R", modalFieldsContainer: "s__k0vcZCjU8Ab7uz1ZLvNk", weekends: "s__sF5xoP4RKi_Pr5Gslnkc", modalButtons: "s__QD8JfJ0Ay1ebSq0Cz_10", modalButtonsBg: "s__RszMCqfMLhRb6b4zfjvs", modalDefaultButtonsBg: "s__Ag9gW7hhSa7czxApfCjj", price: "s__WTHdMeymDuojmCiSsXfX", defaultPrice: "s__qW21125bLhIl5_MKSIrB", goodPrice: "s__mmbdaqYQq5rBIqGmiTXS", selectedPrice: "s__MEMprGxQeIJcoDcumgfk", emptyPrice: "s__zN9uTN1x61kvg2RiRzHG", holidayTitle: "s__Ff5e1HE6fL3SD93SnvE3", weekendCircle: "s__xoeeMpTCgZps59WsNuXj", adornmentButton: "s__JTpNIjwbPPimDlxFz6Br", withAdornmentOffset: "s__vgB2kcwoGt0gUpKMvp6k", adornmentIcon: "s__wVs_ZcysQbzQlnB5lqHO", calendarIcon: "s__aYIkQKG8t3OdyT50QbGZ", label: "s__aKqylq1xoDpv767yljgQ" }; const Xc = ({ isFocused: e, onClick: t, textSlot: s, endAdornmentSlot: a, error: n, className: i, tabIndex: o, onBlur: r, dataTestId: l }) => { const c = (0, U.useRef)(null), d = (0, Jc.D)(e); return (0, U.useEffect)((() => { d && !e ? (c.current?.blur(), r()) : !d && e && c.current?.focus() }), [e, d, r]), (0, Gt.jsxs)("button", { ref: c, className: ve()(i, Yc.field, { [Yc.focused]: e, [Yc.error]: n }), tabIndex: o, type: "button", onClick: t, "data-test-id": `${l}-field`, children: [n && (0, Gt.jsx)(Ut, { text: n }), s, a] }) }, Qc = ({ range: e, isRangeFull: t, focusStartField: s, setEstimatedDays: a }) => ({ onDayMouseEnter: (0, U.useCallback)((n => { s && s(), !e?.from && !e?.to || t || ((0, Pa.S)(n, e?.from) ? a({ from: n, to: e?.from }) : (0, Pa.C)(n, e?.from) ? a({ from: e?.from, to: n }) : a({ from: n, to: n })) }), [s, e?.from, e?.to, t, a]), onCalendarMouseLeave: (0, U.useCallback)((() => { a(void 0) }), [a]) }); function ed({ onTouch: e }) { const t = (0, U.useRef)(null), s = (0, U.useRef)(null); return { onTouchStart: (0, U.useCallback)((e => { t.current = e.targetTouches[0]?.clientY ?? null, s.current = e.targetTouches[0]?.clientX ?? null }), []), onTouchEnd: (0, U.useCallback)(((a, n) => { const i = a.changedTouches[0]?.clientY ?? null, o = a.changedTouches[0]?.clientX ?? null; if (null !== t.current && null !== i && null !== s.current && null !== o) { const r = Math.abs(i - t.current), l = Math.abs(o - s.current); r > 20 || l > 20 || (a.preventDefault(), a.stopPropagation(), e(n)) } t.current = null, s.current = null }), [e]) } } const { $isDesktop: td } = f.l.outputs, { $isDesktop: sd } = f.l.outputs, ad = (0, n.createEvent)({ sid: "-mf7mcu" }), nd = (0, n.createEvent)({ sid: "-6cla1w" }), id = (0, n.createStore)([], { sid: "f0nbdf" }).on(ad, ((e, t) => t)).reset(nd); var od = s(43703), rd = s(95219); const { $isMobile: ld } = f.l.outputs, cd = { [Bc.OW]: {}, [Bc.RT]: {} }, dd = (e, t) => { switch (t.type) { case "set": { const { daysPrices: s, flightType: a } = t.payload; return { ...e, [a]: { ...e[a], ...s } } } case "clearRT": return { ...e, [Bc.RT]: {} }; default: return cd } }; var ud = s(83557), md = s(13439), pd = s(95877); const { $isDesktop: hd } = f.l.outputs, { weekends: fd } = W.i.outputs, gd = ({ text: e, className: t, testId: s }) => (0, Gt.jsx)(Ht.x, { type: qt.y.Body2Regular, className: t, testId: s, children: e }), yd = ({ testId: e, onClick: t }) => (0, Gt.jsx)("div", { className: Yc.adornmentButton, onClick: t, "data-test-id": e, children: (0, Gt.jsx)(ud.Z, { className: Yc.adornmentIcon }) }), { $isDesktop: vd } = f.l.outputs; var bd = s(37254), xd = s(94539); const _d = (e, { selected: t, estimated: s, boundedFrom: a, boundedTo: n }) => Boolean((t || s) && (a || n)); var Cd = s(8609), wd = { dot: "s__bIKFpNsQRQjsjLucLHgI", plusCircle: "s__BXZs93pRaBIqbgbn4Kdf", plusIcon: "s__ADXQpaHGX6YdAj99Y57Q" }; const kd = Zt().bind(wd), Sd = ({ type: e }) => { const t = e === Ne.rl.ExtraDayOff, s = e === Ne.rl.Holiday; return (0, Gt.jsx)("div", { className: kd({ [wd.dot]: s, [wd.plusCircle]: t }), children: t && (0, Gt.jsx)(Cd.F, { className: wd.plusIcon }) }) }; var Dd = s(46255), Fd = s(49160), jd = s(37691), Nd = s(24002); const { isSafari: Id, isIOS: Md } = Nd.t.outputs, Td = Id && Md, Ad = Zt().bind(Yc), Ed = ({ activeTab: e = Ne.M4.Exact, disabledTabs: t = [], tabs: s = [Ne.M4.Exact], origin: a, destination: n, market: o, currency: r, isStartDateFocused: l, isEndDateFocused: c, startDateTabIndex: d, endDateTabIndex: u, errors: m, className: p, onTabChange: h, fetchDayPrices: f, showCurrencySignInCalendar: g, isDesktop: y, isDropdownVisible: v, close: b, isEndFieldClicked: x, isEmptyState: _, clickStartFieldHandler: C, clickEndFieldHandler: w, availableDays: k, disabledDays: S, selectedDays: D, canSelectMonthCaption: F, duration: j, currentMonth: N, visibleMonths: I, orientation: M, numberOfMonths: T, calendarTitle: A, onCurrentMonthChange: E, onPreviousMonthClick: P, onNextMonthClick: $, onOneWayButtonClick: R, onDepartDateClick: B, onReturnDateClick: O, startClassName: H, endClassName: q }) => { const L = (() => { const { isDesktop: e, isDropdownVisible: t, isStartFieldFocused: s, isEndFieldFocused: a, handleCloseDropdown: n, clickEndFieldHandler: o, clickStartFieldHandler: r, focusEndFieldHandler: l, focusStartFieldHandler: c, isEndFieldClicked: d, isStartFieldClicked: u, handleRangeChange: m, range: p, onChange: h } = (0, i.useUnit)({ isDesktop: td, isDropdownVisible: pi, isStartFieldFocused: da, isEndFieldFocused: ha, handleCloseDropdown: fi, clickStartFieldHandler: ri, focusStartFieldHandler: li, clickEndFieldHandler: di, focusEndFieldHandler: ui, isEndFieldClicked: xi, isStartFieldClicked: bi, handleRangeChange: bn, range: vn, onChange: Mi }), [f, g] = (0, U.useState)(), y = (0, U.useMemo)((() => { const e = qa(f), { boundedFrom: t, boundedTo: s } = La(p ?? void 0, f), a = ((e, t) => e && t ? (0, Ba.Z)(t, e) <= 1 ? [] : (0, Da.Z)({ start: (0, yt.Z)(e, 1), end: (0, yt.Z)(t, -1) }) : [])(t, s); return { estimated: e, boundedFrom: t ?? void 0, boundedTo: s ?? void 0, between: a } }), [p, f]), { onCalendarMouseLeave: v } = Qc({ range: p, setEstimatedDays: g }); (0, U.useEffect)((() => { f?.from && !t && g(void 0) }), [f, t]); const b = (0, U.useCallback)((e => { const t = p?.from ?? null, s = p?.to ?? null; if (d) { if (!t && !s) return l(), void g({ from: t, to: e }); if (!t && s && (0, Pa.C)(e, s)) return l(), void g({ from: t, to: e }); if (!t && s && (0, Za.Z)(e, s)) return c(), void g({ from: e, to: s }); if (t && (0, Za.Z)(e, t) && !s) return c(), void g({ from: e, to: t }); if (t && (0, Pa.C)(e, t) && !s) return l(), void g({ from: t, to: e }); if (t && (0, Za.Z)(e, t) && s) return c(), void g({ from: e, to: s }); if (t && (0, Pa.C)(e, t) && s) return l(), void g({ from: t, to: e }) } if (u) { if (!t && !s) return c(), void g({ from: e, to: s }); if (!t && s && (0, Za.Z)(e, s)) return c(), void g({ from: e, to: s }); if (!t && s && (0, Pa.C)(e, s)) return l(), void g({ from: t, to: e }); if (t && !s) return c(), void g({ from: e, to: s }); if (t && s && (0, Pa.S)(e, s)) return c(), void g({ from: e, to: s }); t && s && (0, Fa.Z)(e, s) && (l(), g({ from: t, to: e })) } }), [l, c, d, u, p?.from, p?.to]), x = (0, U.useCallback)((e => { const t = p?.from ?? null, i = p?.to ?? null, l = f?.from ?? null, c = f?.to ?? null; s && (l && !i && (m({ from: l, to: c }), o()), i && (m({ from: l ?? e, to: c }), n())), a && (!t && c && (m({ from: l, to: c }), r()), t && (m({ from: l, to: c ?? e }), n())) }), [s, a, p, f, m, n, o, r]), _ = (0, U.useCallback)((e => { const t = p?.from ?? null, i = p?.to ?? null; let l = { from: null, to: null }; const c = ((e, t, s, a) => { if (!e) return !1; const n = t?.from ?? null, i = t?.to ?? null, o = n && !i && a && (0, Za.Z)(e, n), r = n && i && (a && (0, Za.Z)(e, n) || s && (0, Za.Z)(i, e)); return Boolean(o || r) })(e, p, s, a); if (s) { l = { from: e, to: c ? null : i }, l.to && !c ? n() : o(); const t = Oa(l); m(t) } if (a) { t || (l = { from: t, to: e }, r()), t && !i && (0, Za.Z)(e, t) && (l = { from: e, to: null }, o()), t && !i && (0, Pa.C)(e, t) && (l = { from: t, to: e }, n()), t && i && (0, Za.Z)(e, t) && (l = { from: e, to: null }, o()), t && i && (0, Pa.C)(e, t) && (l = { from: t, to: e }, n()); const s = Oa(l); m(s) } }), [p, s, a, m, o, n, r]), C = (0, U.useCallback)((t => { e ? x(t) : _(t) }), [e, x, _]), { onTouchEnd: w, onTouchStart: k } = ed({ onTouch: _ }), S = (0, U.useCallback)(((e, t, s) => { k(s) }), [k]), D = (0, U.useCallback)(((e, t, s) => { w(s, e) }), [w]), F = (0, U.useCallback)((() => { s || a || h(p) }), [s, a, p, h]), j = (0, U.useCallback)((e => { e?.stopPropagation(), t ? m({ from: null, to: null }) : h(null) }), [m, t, h]), N = (0, U.useCallback)((e => { e?.stopPropagation(), t ? m({ from: p?.from ?? null, to: null }) : h({ from: p?.from ?? null, to: null }) }), [m, p?.from, h, t]); return { estimatedDays: f, modifiers: y, handlers: { onDaySelect: C, onDayMouseEnter: b, onCalendarMouseLeave: v, onTripDurationInputsBlur: F, clearStartField: j, clearEndField: N, onDayTouchEnd: D, onDayTouchStart: S } } })(), Z = (() => { const { isDesktop: e, isDropdownVisible: t, isStartFieldFocused: s, isEndFieldFocused: a, handleCloseDropdown: n, clickEndFieldHandler: o, clickStartFieldHandler: r, isStartFieldClicked: l, setRanges: c, ranges: d, onChange: u, resetDateCase: m } = (0, i.useUnit)({ isDesktop: sd, isDropdownVisible: pi, isStartFieldFocused: da, isEndFieldFocused: ha, handleCloseDropdown: fi, clickStartFieldHandler: ri, clickEndFieldHandler: di, isStartFieldClicked: bi, setRanges: Wa, ranges: Ja, onChange: Mi, resetDateCase: Ni }), p = (0, U.useCallback)((e => { if (Array.isArray(e)) { const t = e.map((e => e || { from: null, to: null })); c(t) } else c(e) }), [c]), [h, f] = (0, U.useState)(), g = l ? 0 : 1, y = d?.[g] || null, v = Boolean(y?.to && y?.from), b = (g ? d?.[0] : d?.[1]) || null, x = (0, U.useMemo)((() => { const e = ja(y ?? void 0), t = ja(b ?? void 0); let s, a, n, i, o = [], r = []; const { startRangeFrom: l, startRangeTo: c, endRangeFrom: u, endRangeTo: m, minRangeFrom: p, maxRangeTo: f } = Na(d), g = ((e, t, s, a, n) => { if (s && e?.from) return s >= e.from; if (s && a) return s >= a; if (t && !s && a && n) { if (e?.to) return e.to >= a; if (e?.from) return e.from >= a; if (t) return t >= a } return !(t || s || !e?.from || !a || !n) && e.from >= a })(h, l, c, u, m); if (g) { const e = ((e, t) => t && e?.from ? (0, Fa.Z)(e.from, t) ? t : e.from : t)(h, p), t = ((e, t) => t && e?.to && (0, Fa.Z)(e.to, t) ? e.to : t)(h, f); o = [e ?? void 0], s = b?.from ?? void 0, a = (h?.from || y?.from) ?? void 0, r = [t ?? void 0], n = b?.to ?? void 0, i = (h?.to || y?.to) ?? void 0 } else o = [(h?.from || y?.from) ?? void 0, b?.from ?? void 0], r = [(h?.to || y?.to) ?? void 0, b?.to ?? void 0]; return { estimated: qa(h), active: e, inactive: t, boundedFrom: o, inactiveBoundedFrom: s, activeBoundedFrom: a, boundedTo: r, inactiveBoundedTo: n, activeBoundedTo: i } }), [y, d, h, b]), { onDayMouseEnter: _, onCalendarMouseLeave: C } = Qc({ range: y, isRangeFull: v, setEstimatedDays: f }); (0, U.useEffect)((() => { h?.from && !t && f(void 0) }), [h, t]); const w = (0, U.useCallback)((t => { const { from: i, to: l } = Ha(t, y, v), c = [...d || []]; c[g] = { from: i, to: l }, p(c), i && l && (Boolean(b?.from || b?.to) ? e ? n() : o() : s ? o() : a && r(), f(void 0)) }), [y, v, d, g, p, b?.from, b?.to, s, a, e, n, o, r]), { onTouchEnd: k, onTouchStart: S } = ed({ onTouch: w }), D = (0, U.useCallback)(((e, t, s) => { S(s) }), [S]), F = (0, U.useCallback)(((e, t, s) => { k(s, e) }), [k]), j = (0, U.useCallback)((() => { if (s || a) return; const e = [...d || []].map((e => e ? e?.from && !e.to ? { ...e, to: e.from } : e : { from: null, to: null })); u(e) }), [s, a, d, u]), N = (0, U.useCallback)((e => { e?.stopPropagation(), t ? p(null) : (m(), u(null)) }), [p, t, u, m]), I = (0, U.useCallback)((e => { e?.stopPropagation(); const s = [...d || []]; s.splice(1, 1), t ? p(s) : ((!s.length || s.length > 0 && !s[0].from) && m(), u(s)) }), [d, t, p, u, m]); return { estimatedDays: h, modifiers: x, handlers: { onDaySelect: w, onDayMouseEnter: _, onCalendarMouseLeave: C, onTripDurationInputsBlur: j, clearStartField: N, clearEndField: I, onDayTouchStart: D, onDayTouchEnd: F } } })(), z = (() => { const { isDropdownVisible: e, isStartFieldFocused: t, isEndFieldFocused: s, clickEndFieldHandler: a, focusStartFieldHandler: n, period: o, handlePeriodChange: r, onChange: l, resetDateCase: c } = (0, i.useUnit)({ isDropdownVisible: pi, isStartFieldFocused: da, isEndFieldFocused: ha, focusStartFieldHandler: li, clickEndFieldHandler: di, handlePeriodChange: an, period: on, onChange: Mi, resetDateCase: Ni }), [d, u] = (0, U.useState)(), m = o?.range || null, p = o?.duration, h = Boolean(m?.to && m?.from), f = (0, U.useMemo)((() => { const e = qa(d), { boundedFrom: t, boundedTo: s } = La(m ?? void 0, d); return { estimated: e, boundedFrom: t ?? void 0, boundedTo: s ?? void 0 } }), [m, d]), { onDayMouseEnter: g, onCalendarMouseLeave: y } = Qc({ range: m, isRangeFull: h, focusStartField: n, setEstimatedDays: u }); (0, U.useEffect)((() => { d?.from && !e && u(void 0) }), [d, e]); const v = (0, U.useCallback)((e => { const { from: t, to: s } = Ha(e, m, h); if (!(t && s && (0, Ea.Z)(t, s))) { if (!m?.from && !m?.to && t && p?.max) r({ duration: p, range: { from: t, to: (0, yt.Z)(t, (p?.max ?? 0) - 1) } }); else { const e = t && s && (0, Ba.Z)(s, t) + 1, a = e && e < Oc.Max ? e : Oc.Max; r({ duration: s ? { min: Oc.Min, max: a } : null, range: { from: t, to: s } }) } t && s && a(), u(void 0) } }), [m, h, p, r, a]), b = (0, U.useCallback)((e => { const [t, s] = e[0]; t && s && r({ range: { from: m?.from ?? null, to: m?.to ?? null }, duration: { min: t, max: s } }) }), [m, r]), { onTouchEnd: x, onTouchStart: _ } = ed({ onTouch: v }), C = (0, U.useCallback)(((e, t, s) => { _(s) }), [_]), w = (0, U.useCallback)(((e, t, s) => { x(s, e) }), [x]), k = (0, U.useCallback)((() => { t || s || (o?.range?.from && !o.range.to && r({ range: { from: null, to: null }, duration: o.duration }), l(o)) }), [t, s, o, l, r]), S = (0, U.useCallback)((t => { t?.stopPropagation(), e ? r(null) : (c(), l(null)) }), [r, e, l, c]), D = (0, U.useCallback)((() => null), []); return { estimatedDays: d, modifiers: f, handlers: { onDaySelect: v, onDayMouseEnter: g, onCalendarMouseLeave: y, onTripDurationInputsBlur: k, onDurationRangeSelect: b, clearStartField: S, clearEndField: D, onDayTouchStart: C, onDayTouchEnd: w } } })(), G = (() => { const { isDropdownVisible: e, isStartFieldFocused: t, weekendsList: s, handleWeekendsChange: a, weekends: n, onChange: o, dayOffDates: r, extraDayOffDates: l, hoveredDays: c, setHoveredDaysHandler: d, resetHoveredDaysHandler: u, updateTogglesState: m, clearAllDatesCalendarToggle: p, clearExtraDaysCalendarToggle: h } = (0, i.useUnit)({ isDropdownVisible: pi, isStartFieldFocused: da, weekendsList: Tn, handleWeekendsChange: jn, weekends: In, onChange: Mi, dayOffDates: En, extraDayOffDates: Pn, setHoveredDaysHandler: ad, resetHoveredDaysHandler: nd, hoveredDays: id, updateTogglesState: zn, clearAllDatesCalendarToggle: Bn, clearExtraDaysCalendarToggle: Ln }), f = (0, cs.g)() ?? 1, g = (0, U.useMemo)((() => { const e = [], t = [], a = [], i = [], o = [], r = []; return n?.ranges?.forEach((s => { s.from && (e.push(s.from), function (e) { return (0, Ma.Z)(1, arguments), 6 === (0, Ia.Z)(e).getDay() }(s.from) && a.push((0, yt.Z)(s.from, -1))), s.to && (t.push(s.to), Ta(s.to) && i.push((0, yt.Z)(s.to, 1))) })), s.forEach((e => { 1 === f && (e.daysOff[0].getMonth() !== e.extraDays[0].getMonth() && (o.push(e.extraDays[0]), r.push(e.daysOff[0])), e.daysOff[0].getMonth() !== e.daysOff[e.daysOff.length - 1].getMonth() && (o.push(e.daysOff[0]), r.push(e.daysOff[e.daysOff.length - 1]))), 0 === f && (e.daysOff[0].getMonth() !== e.extraDays[0].getMonth() && (o.push(e.extraDays[0]), r.push(e.daysOff[0])), e.daysOff[e.daysOff.length - 1].getMonth() !== e.extraDays[e.extraDays.length - 1].getMonth() && (o.push(e.daysOff[e.daysOff.length - 1]), r.push(e.extraDays[e.extraDays.length - 1]))) })), { boundedFrom: e, boundedTo: t, activeBoundedFrom: a, activeBoundedTo: i, boundedMonthFrom: o, boundedMonthTo: r } }), [f, n?.ranges, s]), y = (0, U.useMemo)((() => ({ visuallyHovered: c, boundedFrom: g.boundedFrom, boundedTo: g.boundedTo, activeBoundedFrom: g.activeBoundedFrom, activeBoundedTo: g.activeBoundedTo, boundedMonthFrom: g.boundedMonthFrom, boundedMonthTo: g.boundedMonthTo, dayOff: r, extraDayOff: l, visuallyBoundedFrom: { daysOfWeek: [6] }, visuallyBoundedTo: { daysOfWeek: [0] } })), [r, l, c, g.boundedFrom, g.boundedTo, g.activeBoundedFrom, g.activeBoundedTo, g.boundedMonthFrom, g.boundedMonthTo]); (0, U.useEffect)((() => { c.length && !e && u() }), [c, e, u]); const v = (0, U.useCallback)((e => s.find((t => t.daysOff.find((t => (0, Ea.Z)(t, e))) || t.extraDays.find((t => (0, Ea.Z)(t, e)))))), [s]), b = (0, U.useCallback)((e => { const t = n?.ranges ? [...n.ranges] : [], s = v(e); if (!s) return; const i = ((e, t, s) => { const a = [...s], n = a.findIndex((({ from: e, to: s }) => e && s && (0, Pa.C)(t, e) && (0, Pa.S)(t, s))), i = e.extraDays[0], o = e.extraDays[e.extraDays.length - 1], r = e.daysOff[0], l = e.daysOff[e.daysOff.length - 1], c = i && (0, Ea.Z)(t, i), d = o && (0, Ea.Z)(t, o); if (-1 === n) if (c || d) { const e = c ? (0, yt.Z)(t, 1) : (0, yt.Z)(t, -1), s = a.findIndex((({ from: t, to: s }) => t && s && ((0, Ea.Z)(e, t) || (0, Ea.Z)(e, s)))), n = { from: c ? i : a[s].from, to: d ? o : a[s].to }; a[s] = n } else a.push({ from: r, to: l }); else if (c || d) { const e = { from: c ? r : a[n].from, to: d ? l : a[n].to }; a[n] = e } else a.splice(n, 1); return a })(s, e, t); a({ ranges: i }) }), [n, v, a]), x = (0, U.useCallback)((e => { const t = v(e); t && ((e, t) => !!t.daysOff.find((t => (0, Ea.Z)(t, e))))(e, t) ? d(t.daysOff) : u() }), [v, u, d]), _ = (0, U.useCallback)((e => { v(e) || u() }), [v, u]), { onTouchEnd: C, onTouchStart: w } = ed({ onTouch: b }), k = (0, U.useCallback)(((e, t, s) => { w(s) }), [w]), S = (0, U.useCallback)(((e, t, s) => { C(s, e) }), [C]), D = (0, U.useCallback)((() => { t || (o(n), m()) }), [t, o, n, m]); return { estimatedDays: void 0, modifiers: y, handlers: { onDaySelect: b, onDayMouseEnter: x, onDayMouseLeave: _, onCalendarMouseLeave: (0, U.useCallback)((() => { c.length && u() }), [c, u]), onTripDurationInputsBlur: D, clearStartField: (0, U.useCallback)((t => { t?.stopPropagation(), p(), h(), e || (o(null), m()) }), [e, p, h, m, o]), clearEndField: (0, U.useCallback)((() => null), []), onDayTouchStart: k, onDayTouchEnd: S } } })(), V = e === Ne.M4.Exact, W = e === Ne.M4.Flexible, K = e === Ne.M4.Period, J = e === Ne.M4.Weekends, Y = W && Z || K && z || J && G || L, X = K && x, { getDayPrice: Q } = ((e, t, s, a, n, o, r, l) => { const { isDropdownVisible: c, exactDateRange: d, isMobile: u } = (0, i.useUnit)({ isDropdownVisible: pi, exactDateRange: vn, isMobile: ld }), [m, p] = (0, U.useReducer)(dd, cd), [h, f] = (0, U.useState)([]), g = e?.iata, y = (0, Jc.D)(g), v = t?.iata, b = (0, Jc.D)(v), x = d?.from, _ = (0, Jc.D)(x), C = d?.to, w = (0, Jc.D)(n), k = (0, Jc.D)(a), S = !x && !C, D = S ? Bc.OW : Bc.RT, F = m[D]; (0, U.useEffect)((() => { const e = g !== y, t = v !== b, s = a !== k; Object.keys(F).length && (e || t || s) && (p({ type: "clear" }), f([])) }), [g, y, v, b, x, a, k, F]), (0, U.useEffect)((() => { (x && x !== _ && c || _ && !x) && (p({ type: "clearRT" }), f([])) }), [x, _, c]); const j = (0, U.useCallback)((async () => { if (!(l && s && a && g && v && n === Ne.M4.Exact)) return; let e, t = []; if (u && x && !C) { const e = (0, od.Z)(x); t = [(0, rd.cM)(e), (0, rd.cM)((0, vt.Z)(e, 1))] } else t = r.reduce(((e, t) => { const s = (0, rd.cM)(t.startDate); return h.includes(s) || e.push(s), e }), []); if (0 !== t.length) { try { e = await l({ originIata: g, destinationIata: v, oneWay: S, monthsISO: t, departDateISO: x ? (0, rd.cM)(x) : void 0, market: s, currency: a }), f([...h, ...t]) } catch (t) { e = {} } p({ type: "set", payload: { daysPrices: e, flightType: D } }) } }), [l, s, a, g, v, n, u, x, C, D, r, h, S]), N = (0, Jc.D)(o), I = (0, Jc.D)(c); return (0, U.useEffect)((() => { c && !I && j() }), [c, I]), (0, U.useEffect)((() => { c && I && !h.length && j() }), [c, I, h]), (0, U.useEffect)((() => { c && w && n !== w && n === Ne.M4.Exact && j() }), [c, n, w]), (0, U.useEffect)((() => { o.startDate !== N?.startDate && c && j() }), [c, o, N]), { selectedPrice: (0, U.useMemo)((() => { const e = C ? (0, rd.cM)(C) : "", t = x ? (0, rd.cM)(x) : ""; return e && m[Bc.RT]?.[e]?.price || t && m[Bc.OW]?.[t]?.price || void 0 }), [m, C, x]), getDayPrice: (0, U.useCallback)((e => { const t = (0, rd.cM)(e), s = F?.[t]; return a && s ? { value: s.price, currency: a, isGood: s.isMin } : null }), [F, a]) } })(a, n, o, r, e, N, I, f), ee = ((e, t, s, a, n) => { const { t: o } = (0, es.useTranslation)("lib_forms_trip_duration"), { exactDateRange: r, flexibleDateRange: l, periodDateRange: c, weekendsDateRange: d, isStartFieldClicked: u, isEndFieldClicked: m, isDesktop: p, isDropdownVisible: h, isEmptyWeekends: f, isAnyWeekends: g } = (0, i.useUnit)({ exactDateRange: vn, flexibleDateRange: Ja, periodDateRange: on, weekendsDateRange: In, isStartFieldClicked: bi, isEndFieldClicked: xi, isDesktop: hd, isDropdownVisible: pi, isEmptyWeekends: fd.$isEmpty, isAnyWeekends: $n }), y = (0, U.useRef)(null), v = (0, U.useRef)(null), b = (0, U.useRef)(null), x = (0, U.useRef)(null), _ = (0, cs.d)("ts_day_month_weekday"), C = (0, cs.d)("ts_day_month_short"), w = (0, cs.d)("interval_date"), k = (0, U.useCallback)(((e, t, s) => { const a = s ? ` ${pd.Az}` : ""; return e && t && (0, Ea.Z)(e, t) ? s ? `${C(e)}${a}` : _(e) : `${e ? C(e) : ""}${t ? ` ${pd.Az} ${C(t)}` : a}` }), [_, C]), S = (0, U.useCallback)((e => [...e || []].sort(((e, t) => e.from.getTime() - t.from.getTime())).map((e => ` ${w(new ps.Xp({ start: e.from, end: e.to }))}`))), [w]); switch (e) { case Ne.M4.Exact: { const e = t.estimatedDays?.from || r?.from, s = t.estimatedDays?.to || r?.to; y.current = gd({ text: e ? _(e) : o(`${Ne.dm.Avia}.exact.departure.title`), className: e ? Yc.primaryText : Yc.secondaryText, testId: "start-date-value" }), v.current = e ? yd({ testId: "clear-start-date", onClick: t.handlers.clearStartField }) : (0, Gt.jsx)(md.a, { className: Yc.calendarIcon, "data-test-id": "departure-calendar-icon" }), b.current = gd({ text: s ? _(s) : o(`${Ne.dm.Avia}.exact.return.title`), className: s ? Yc.primaryText : Yc.secondaryText, testId: "end-date-value" }), x.current = s && (p || !p && !h) ? yd({ testId: "clear-end-date", onClick: t.handlers.clearEndField }) : null; break } case Ne.M4.Flexible: { const e = u && s.estimatedDays?.from || l?.[0]?.from, t = u && s.estimatedDays?.to || l?.[0]?.to, a = e || t, n = m && s.estimatedDays?.from || l?.[1]?.from, i = m && s.estimatedDays?.to || l?.[1]?.to, r = n || i; y.current = gd({ text: a ? k(e, t) : o(`${Ne.dm.Avia}.flexible.departure.title`), className: a ? Yc.primaryText : Yc.secondaryText, testId: "start-date-value" }), v.current = a ? yd({ testId: "clear-start-date", onClick: s.handlers.clearStartField }) : null, b.current = gd({ text: r ? k(n, i) : o(`${Ne.dm.Avia}.flexible.return.title`), className: r ? Yc.primaryText : Yc.secondaryText, testId: "end-date-value" }), x.current = r ? yd({ testId: "clear-end-date", onClick: s.handlers.clearEndField }) : null; break } case Ne.M4.Period: { const e = a.estimatedDays?.from || c?.range?.from, t = a.estimatedDays?.to || c?.range?.to, s = e || t, n = c?.duration?.min, i = c?.duration?.max, r = n && i; y.current = gd({ text: s ? k(e, t, !0) : o(`${Ne.dm.Avia}.period.departure.title`), className: s ? Yc.primaryText : Yc.secondaryText, testId: "start-date-value" }), v.current = s ? yd({ testId: "clear-start-date", onClick: a.handlers.clearStartField }) : null, b.current = gd({ text: r && (n !== i ? o("duration", { min: n, max: i }) : o("equalDuration", { duration: n })) || o(`${Ne.dm.Avia}.period.return.title`), className: r ? Yc.primaryText : Yc.secondaryText, testId: "end-date-value" }), x.current = null; break } case Ne.M4.Weekends: { const e = d?.ranges?.[0]; y.current = f && !h ? gd({ text: o(`${Ne.dm.Avia}.weekends.departure.values.default`), className: Yc.primaryText, testId: "start-date-value" }) : g ? gd({ text: o(`${Ne.dm.Avia}.weekends.departure.values.anyDates`), className: Yc.primaryText, testId: "start-date-value" }) : e ? (0, Gt.jsxs)(Gt.Fragment, { children: [gd({ text: o(`${Ne.dm.Avia}.weekends.departure.values.withDates`), className: Yc.primaryText, testId: "start-date-value" }), gd({ text: `${S(d?.ranges)}`, className: ve()(Yc.secondaryText, Yc.withAdornmentOffset), testId: "start-date-value" })] }) : gd({ text: o(`${Ne.dm.Avia}.weekends.departure.title`), className: Yc.secondaryText, testId: "start-date-value" }), v.current = e ? yd({ testId: "clear-start-date", onClick: n.handlers.clearStartField }) : null; break } }return { startTextSlot: y.current, startAdornmentSlot: v.current, endTextSlot: b.current, endAdornmentSlot: x.current } })(e, L, Z, z, G), te = ((e, t, s, a, n) => { const { t: o } = (0, es.useTranslation)("lib_forms_trip_duration"), { isDesktop: r, closeDropdownHandler: l, exactDateRange: c, flexibleDateRange: d, periodDateRange: u, weekendsDateRange: m, isStartDateFieldFocused: p, isEndDateFieldFocused: h, isStartFieldClicked: f, isEndFieldClicked: g, clickStartFieldHandler: y, clickEndFieldHandler: v } = (0, i.useUnit)({ isDesktop: vd, closeDropdownHandler: fi, exactDateRange: vn, flexibleDateRange: Ja, periodDateRange: on, weekendsDateRange: In, isStartDateFieldFocused: da, isEndDateFieldFocused: ha, isStartFieldClicked: bi, isEndFieldClicked: xi, clickStartFieldHandler: ri, clickEndFieldHandler: di }), b = (0, U.useRef)(null), x = (0, U.useRef)(Cr.Ly.Green), _ = (0, U.useRef)(Cr.Ji.Primary), C = (0, U.useRef)(!1), w = (0, U.useRef)((() => null)), k = (0, U.useRef)(null), S = (0, U.useRef)((() => null)), D = (0, U.useCallback)((() => { w.current = () => { n?.(), s.handlers.clearEndField(), l() }; const t = c?.from, a = c?.to, i = e === Ne.dm.Avia && r; i || !r && t ? (b.current = (0, Gt.jsx)(_r.z.Label, { children: o("actionButton.noReturn") }), x.current = Cr.Ly.Default, _.current = Cr.Ji.Secondary) : b.current = null, i && (C.current = !(t || a || !f)) }), [c?.from, c?.to, e, r, s.handlers, l, o, n, f]), F = (0, U.useCallback)((() => { C.current = !1, w.current = () => { r ? p ? d?.[1]?.from || d?.[1]?.to ? l() : v() : h && (d?.[0]?.from || d?.[0]?.to ? l() : y()) : l() }; const e = d?.[0]?.from && !d?.[0]?.to && f, t = d?.[1]?.from && !d?.[1]?.to && g, s = d?.[0]?.from && d?.[0]?.to && !d?.[1]?.from && g; e || t || s || !r && d?.[0]?.from && d?.[0]?.to && d?.[1]?.from && d?.[1]?.to ? s && r ? (b.current = (0, Gt.jsx)(_r.z.Label, { children: o("actionButton.noReturn") }), x.current = Cr.Ly.Default, _.current = Cr.Ji.Secondary) : (b.current = (0, Gt.jsx)(_r.z.Label, { children: o("actionButton.choose") }), x.current = Cr.Ly.Green, _.current = Cr.Ji.Primary) : b.current = null }), [d, f, g, r, p, h, l, v, y, o]), j = (0, U.useCallback)((() => { C.current = !1, w.current = () => { p && !u?.duration?.min ? v() : u?.range?.from ? l() : (y(), u?.duration || a.handlers.onDurationRangeSelect([[Oc.Min, Oc.Max]])) }; const e = r && g, t = !r && (u?.range?.from && u?.range?.to || g); b.current = e || t ? (0, Gt.jsx)(_r.z.Label, { children: o("actionButton.choose") }) : null, x.current = Cr.Ly.Green, _.current = Cr.Ji.Primary }), [r, g, u?.range?.from, u?.range?.to, u?.duration, p, v, l, y, a.handlers, o]), N = (0, U.useCallback)((() => { C.current = !1, w.current = () => { l() }, b.current = f && m?.ranges?.length ? (0, Gt.jsx)(_r.z.Label, { children: o("actionButton.choose") }) : null, x.current = Cr.Ly.Green, _.current = Cr.Ji.Primary }), [f, m?.ranges?.length, l, o]); switch (t) { case Ne.M4.Exact: D(); break; case Ne.M4.Flexible: F(); break; case Ne.M4.Period: j(); break; case Ne.M4.Weekends: N() }return { actionButtonSlot: b.current, actionButtonMode: x.current, actionButtonPriority: _.current, handleActionButton: w.current, additionButtonSlot: k.current, handleAdditionButton: S.current, actionButtonDisabled: C.current } })(Ne.dm.Avia, e, L, z, R), se = (0, U.useCallback)((e => { y ? (e => { const t = (e => { if (!e) return !1; const t = e.getBoundingClientRect(); return t.top >= 0 && t.left >= 0 && t.bottom <= (window.innerHeight || document.documentElement.clientHeight) && t.right <= (window.innerWidth || document.documentElement.clientWidth) })(e.current); e.current && !t && e.current.scrollIntoView({ behavior: "smooth", block: "end" }) })(e) : D[0] && ((e, t, s) => { const a = za(t); if (!e.current || !a) return; const n = (0, Dd.Z)({ start: s.from, end: s.to }).findIndex((e => (0, Fd.Z)(e, a.startDate))), i = e.current.querySelectorAll(`.${CSS.escape(jd.AK?.month ?? "")}`)[n]; i && setTimeout((() => { Td ? i.scrollIntoView() : i.scrollIntoView({ behavior: "smooth", block: "center" }) }), 100) })(e, D, k) }), [D, k, y]), ae = ((e, { showCurrencySign: t }) => (0, U.useCallback)(((s, a) => { if (!e) return null; const n = e(s); return n ? (0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.FootnoteRegular, className: ve()({ [Yc.price]: !0, [Yc.goodPrice]: n.isGood, [Yc.defaultPrice]: !n.isGood, [Yc.selectedPrice]: _d?.(0, a) }), children: (0, Gt.jsx)(bd.X, { value: n.value, currency: n.currency, formatOptions: { exponent: (0, xd.Q)(n.value) }, showCurrencySign: t }) }) : (0, Gt.jsx)("div", { className: Yc.emptyPrice }) }), [e]))(Q, { showCurrencySign: g }), ne = (0, U.useCallback)(((e, t) => { if (t?.holiday || t?.extraDayOff && !t?.selected && !t.disabled) { const e = (e => e?.holiday ? Ne.rl.Holiday : e?.extraDayOff ? Ne.rl.ExtraDayOff : e?.dayOff ? Ne.rl.DayOff : null)(t); return e ? (0, Gt.jsx)(Sd, { type: e }) : null } return null }), []), ie = V && ae || J && ne || null, oe = (0, U.useCallback)((() => { B && B(), C() }), [B, C]), re = (0, U.useCallback)((() => { O && O(), w() }), [O, w]), le = (0, Gt.jsx)(Xc, { isFocused: l, onClick: oe, textSlot: ee.startTextSlot, endAdornmentSlot: ee.startAdornmentSlot, tabIndex: d, error: m.startDate || void 0, className: Ad(Yc.tripDurationInput, H, { [Yc.weekends]: J }), onBlur: Y.handlers.onTripDurationInputsBlur, dataTestId: "start-date" }), ce = J ? null : (0, Gt.jsx)(Xc, { isFocused: c, onClick: re, textSlot: ee.endTextSlot, endAdornmentSlot: ee.endAdornmentSlot, tabIndex: u, error: m.endDate || void 0, className: Ad(Yc.tripDurationInput, q), onBlur: Y.handlers.onTripDurationInputsBlur, dataTestId: "end-date" }); return (0, Gt.jsx)(lc.f, { hideArrow: !0, onClose: b, onOpened: se, visible: v, className: Ad(Yc.containerWrapper, p, Yc[Ne.dm.Avia]), dropdownClassName: Yc.dropdown, contentClassName: Yc.dropdownContent, dropdownPosition: Pt.i.Bottom, modalHeader: A, hideDropdownsOverflowContent: !1, dropdownContent: (0, Gt.jsxs)("div", { className: Ad(null, j && Yc.sliderWrapper), children: [!y && (0, Gt.jsxs)("div", { className: Yc.modalFieldsContainer, children: [le, ce] }), (0, Gt.jsx)(Kc, { activeTab: e, disabledTabs: t, tabs: s, selectedDays: D, availableDays: k, disabledDays: S, currentMonth: N, duration: j, isSlider: X, isEmptyState: _, numberOfMonths: T, orientation: M, buttons: te, footnotes: null, modifiers: Y.modifiers, hideCalendarHeader: !y, canSelectMonthCaption: F, onTabChange: h, onCurrentMonthChange: E, onPreviousMonthClick: P, onNextMonthClick: $, renderDayContent: ie, ...Y.handlers }), !y && !_ && (te.actionButtonSlot || te.additionButtonSlot) && (0, Gt.jsx)(Sc, { className: Ad(Yc.modalButtons, { [Yc.modalButtonsBg]: Boolean(te.additionButtonSlot), [Yc.modalDefaultButtonsBg]: V }), buttons: te })] }), children: (0, Gt.jsxs)("div", { className: Yc.fieldsContainer, children: [le, ce] }) }) }, Pd = async e => { const { originIata: t, destinationIata: s, oneWay: a, monthsISO: n, currency: i, market: o } = e, r = { origin_iata: t, destination_iata: s, one_way: a, depart_months: n, market: o, currency: i }; let l; a || (r.depart_date = e.departDateISO, r.return_months = n); try { const { data: e } = await dl().get(Te.B.outputs.fillApiHost_IN_DANGEROUS_CLIENT_SIDE_ONLY_WAY(`${$e.H.LYSSA_HOST}/date_picker_prices?${(0, ul.stringify)(r, { arrayFormat: "bracket" })}`)); l = e } catch (e) { l = { prices: [] } } const c = ((e, t) => e.reduce(((e, s) => { const a = new Date(s.depart_date), n = (0, rd.cM)(a), i = s.return_date ? new Date(s.return_date) : void 0, o = { isMin: !1, price: s.price, departDate: a, returnDate: i }; if (!t) { if (!i) return e; const t = (0, rd.cM)(i); return { ...e, [t]: o } } return { ...e, [n]: o } }), {}))(l.prices, a), d = ((e, t) => { const s = [...e.sort(((e, t) => e - t))]; if (0 === s.length) return 0; const a = .2 * (s.length - 1), n = Math.floor(a), i = n + 1, o = a % 1; return i >= s.length ? s[n] : s[n] * (1 - o) + s[i] * o })(Object.values(c).map((e => e.price))); return Object.keys(c).forEach((e => { c[e].isMin = c[e].price <= d })), c }, { $isDesktop: $d } = f.l.outputs, { $availableDateCases: Rd, $origin: Bd, $destination: Od } = W.i.outputs, { $market: Hd } = Ee.D.outputs, { $currency: qd } = us.y.outputs, Ld = (0, n.withFactory)({ sid: "350ol8", fn: () => (0, xe.SC)({ view: Ed, bind: { isDesktop: $d, isDropdownVisible: pi, close: fi, isEndFieldClicked: xi, clickStartFieldHandler: ri, clickEndFieldHandler: di, disabledDays: Hi, availableDays: Ei, selectedDays: Fi, canSelectMonthCaption: qi, duration: rn, currentMonth: $i, visibleMonths: Oi, orientation: Bi, numberOfMonths: Ri, onCurrentMonthChange: Pi, calendarTitle: Gi, isEmptyState: Di, tabs: Rd, origin: Bd, destination: Od, market: Hd, currency: qd, errors: Oo, isStartDateFocused: da, startDateTabIndex: pa, isEndDateFocused: ha, endDateTabIndex: ya, activeTab: oi, disabledTabs: _i, onTabChange: wi, showCurrencySignInCalendar: po, fetchDayPrices: Pd } }) }); var Zd = s(44730), zd = s(78911), Gd = s(60025), Vd = s(32476); const Ud = ({ containerClassName: e, contentClassName: t, inputClassName: s, modalHeader: a, children: n, label: i, sublabel: o, dropdownPosition: r, visibility: l, testIds: c = { dropdownName: "dropdownButton", title: "title", subtitle: "subtitle" }, onClick: d }) => { const { toggle: u } = l.handlers, m = (0, U.useCallback)((() => { d?.(), u() }), [d, u]); return (0, Gt.jsx)(lc.f, { className: ve()("s__GjfjABBy3lBBfRWvt3ms", e), contentClassName: ve()("s__shyr7dlHnRONz5arMMHf", t), visible: l.visible, onClose: l.handlers.close, hideArrow: !0, modalHeader: a, dropdownPosition: r, dropdownContent: (0, Gt.jsx)("div", { className: "s__ecqlsGzGQybvAVGSiPJo", children: "function" == typeof n ? n(l) : n }), children: (0, Gt.jsxs)("button", { onClick: m, className: ve()("s__Gte0Mt6xKAMZFWQHRIc8", s, l.visible && "s__hPwIURqMwEYrNfBqlofd"), type: "button", "data-test-id": c.dropdownName, tabIndex: 0, children: [(0, Gt.jsx)(Ht.x, { type: qt.y.Body2Regular, className: "s__CBMawXuUnYBkLbYmqfWP", testId: c.title, children: i }), o && (0, Gt.jsx)(Ht.x, { type: qt.y.Body2Regular, className: "s___3SCxdT54RzEeR7R1bSu", testId: c.subtitle, children: o })] }) }) }, Wd = ({ className: e, ...t }, s) => (0, Gt.jsxs)("svg", { ref: s, className: e, ...t, width: "54", height: "16", viewBox: "0 0 54 16", fill: "none", xmlns: "http://www.w3.org/2000/svg", children: [(0, Gt.jsx)("path", { d: "M45 4H41V12H45V4Z", fill: "#FF5F00" }), (0, Gt.jsx)("path", { d: "M41.1114 7.99931C41.1108 7.24222 41.2806 6.49491 41.6077 5.81394C41.9349 5.13298 42.411 4.53619 43 4.06875C42.2705 3.48906 41.3945 3.12858 40.472 3.02852C39.5496 2.92846 38.6179 3.09285 37.7834 3.50291C36.949 3.91296 36.2454 4.55214 35.7532 5.34738C35.261 6.14262 35 7.06185 35 8C35 8.93815 35.261 9.85738 35.7532 10.6526C36.2454 11.4479 36.949 12.087 37.7834 12.4971C38.6179 12.9071 39.5496 13.0715 40.472 12.9715C41.3945 12.8714 42.2705 12.5109 43 11.9312C42.4109 11.4637 41.9347 10.8667 41.6074 10.1854C41.2802 9.50421 41.1106 8.75663 41.1114 7.99931Z", fill: "#EB001B" }), (0, Gt.jsx)("path", { d: "M51 8.00069C51 8.93881 50.7389 9.85799 50.2467 10.6532C49.7544 11.4483 49.0509 12.0874 48.2164 12.4974C47.3819 12.9073 46.4502 13.0716 45.5277 12.9714C44.6053 12.8712 43.7293 12.5106 43 11.9308C43.5887 11.463 44.0646 10.8661 44.3918 10.1852C44.7191 9.50426 44.8891 8.75707 44.8891 8C44.8891 7.24293 44.7191 6.49574 44.3918 5.81481C44.0646 5.13389 43.5887 4.53701 43 4.06921C43.7293 3.4894 44.6053 3.12879 45.5277 3.0286C46.4502 2.92841 47.3819 3.09267 48.2164 3.50262C49.0509 3.91257 49.7544 4.55166 50.2467 5.34684C50.7389 6.14201 51 7.06119 51 7.99931V8.00069Z", fill: "#F79E1B" }), (0, Gt.jsx)("path", { d: "M13 12.8517H10.5698L12.0898 3.1714H14.5199L13 12.8517Z", fill: "currentColor" }), (0, Gt.jsx)("path", { d: "M21.8095 3.41213C21.3301 3.21626 20.5698 3 19.6298 3C17.2299 3 15.5399 4.31809 15.5295 6.20257C15.5096 7.59294 16.7395 8.36518 17.6594 8.82877C18.5996 9.30249 18.9192 9.61169 18.9192 10.0339C18.9096 10.6825 18.1594 10.9814 17.4598 10.9814C16.4895 10.9814 15.9697 10.8273 15.1796 10.4665L14.8596 10.3118L14.5195 12.4848C15.0895 12.7523 16.1396 12.9896 17.2299 13C19.7798 13 21.4399 11.7023 21.4596 9.69409C21.4693 8.59212 20.8198 7.74774 19.4197 7.05776C18.5697 6.61484 18.0491 6.31618 18.0491 5.86299C18.0591 5.451 18.4894 5.02902 19.4489 5.02902C20.2389 5.00835 20.8194 5.20394 21.2592 5.39967L21.479 5.50246L21.8095 3.41213Z", fill: "currentColor" }), (0, Gt.jsx)("path", { d: "M25.0397 9.42229C25.2398 8.86617 26.0099 6.71383 26.0099 6.71383C25.9998 6.7345 26.2097 6.14744 26.3297 5.78706L26.4995 6.62116C26.4995 6.62116 26.9597 8.9383 27.0597 9.42229C26.6799 9.42229 25.5197 9.42229 25.0397 9.42229ZM28.0395 3.1714H26.1597C25.58 3.1714 25.1396 3.34632 24.8895 3.97457L21.2798 12.8515H23.8297C23.8297 12.8515 24.2495 11.6568 24.3398 11.3994C24.6195 11.3994 27.1001 11.3994 27.4599 11.3994C27.5297 11.7393 27.7499 12.8515 27.7499 12.8515H30L28.0395 3.1714Z", fill: "currentColor" }), (0, Gt.jsx)("path", { d: "M8.53998 3.1714L6.16002 9.77241L5.89995 8.43365C5.45994 6.88889 4.07999 5.21054 2.54004 4.37602L4.72 12.8414H7.28987L11.1097 3.1714H8.53998Z", fill: "currentColor" }), (0, Gt.jsx)("path", { d: "M3.94995 3.1714H0.0400003L0 3.36699C3.05001 4.1703 5.06997 6.10666 5.89988 8.43406L5.0499 3.98511C4.90996 3.36685 4.47992 3.19179 3.94995 3.1714Z", fill: "#FAA61A" })] }), Kd = (0, U.memo)((0, U.forwardRef)(Wd)); const Jd = ({ containerClassName: e, inputClassName: t, value: s, onChange: a }) => { const { t: n } = (0, es.useTranslation)("lib_forms_avia_form"), i = (0, Vd.x)(); return (0, Gt.jsx)(Ud, { containerClassName: e, inputClassName: t, modalHeader: n("payment.label"), label: n("payment.label"), sublabel: s === Zd.X.VisaMastercard ? (0, Gt.jsx)(Kd, { className: "s__ckUGGxITtgjHfg1HSg9X" }) : n(`payment.option.${s}`), dropdownPosition: Pt.i.BottomRight, visibility: i, testIds: { dropdownName: "payment-field", subtitle: "payment-type" }, children: ({ handlers: e }) => (0, Gt.jsx)(zd.E, { value: s, onChange: t => { a?.(t), e.close() }, "data-test-id": "form-avia-payment-selector", children: Object.values(Zd.X).map((e => (0, Gt.jsx)(Gd.E, { value: e, label: n(`payment.option.${e}`), className: "s__lQYyTHDJ37ip8BIA2H_y", "data-test-id": `payment-option-${e}` }, e))) }) }) }, Yd = (0, U.memo)(Jd), { $paymentMethod: Xd } = W.i.outputs, { changePaymentMethod: Qd } = W.i.inputs, eu = (0, n.withFactory)({ sid: "-gbp748", fn: () => (0, xe.SC)({ view: Yd, bind: { value: Xd, onChange: Qd } }) }); var tu = s(24530), su = s.n(tu), au = s(15458), nu = s(85394), iu = s(51057), ou = s(86064), ru = s(47414), lu = { container: "s__ZSyS0a2TVP975tUmCrdM", label: "s__LMiwYlKpCRKlwolrl_Ud", description: "s__KDzww46taZJ5lBh_pugF", control: "s__RGiGuNmvu6ejNC2zPMM7", button: "s__c6RCzlaLJYYJ2BZ86GA8", value: "s__JEjNvpTIqjdhDMNwS3v0", controlIcon: "s__pMo8XJ4PYXwDYpRlQu2f" }; const cu = ({ onClick: e, disable: t, children: s, dataTestId: a = "form-count-button" }) => { const n = t && "string" == typeof t && t.length > 0 && t, i = Boolean(t) && Boolean(n); return (0, Gt.jsx)(Wo.u, { disabled: !i, placement: "left", touch: !0, content: (0, Gt.jsx)(Ht.x, { type: qt.y.CaptionRegular, children: n }), children: (0, Gt.jsx)("div", { children: (0, Gt.jsx)("button", { onClick: e, className: lu.button, type: "button", disabled: Boolean(t), "data-test-id": a, children: s }) }) }) }, du = ({ title: e, description: t, className: s, value: a, onDecrement: n, onIncrement: i, disableDecrement: o, disableIncrement: r, dataTestId: l = "form-count-select" }) => (0, Gt.jsxs)("div", { className: ve()(lu.container, s), "data-test-id": l, children: [(0, Gt.jsxs)("div", { className: lu.label, children: [(0, Gt.jsx)(Ht.x, { type: qt.y.Body2Regular, className: lu.title, children: e }), t && (0, Gt.jsx)(Ht.x, { type: qt.y.Body3Regular, className: lu.description, children: t })] }), (0, Gt.jsxs)("div", { className: lu.control, children: [(0, Gt.jsx)(cu, { onClick: n, disable: o, dataTestId: "decrease-button", children: (0, Gt.jsx)(ru.r, { className: lu.controlIcon }) }), (0, Gt.jsx)(Ht.x, { type: qt.y.Body1Semi, className: lu.value, testId: "passenger-number", children: a }), (0, Gt.jsx)(cu, { onClick: i, disable: r, dataTestId: "increase-button", children: (0, Gt.jsx)(Cd.F, { className: lu.controlIcon }) })] })] }), uu = (0, U.memo)(du); var mu = "s__eG5nBZatFdGS1Ua3hmih", pu = "s__L3XEGA_7uDLjGQNOxAul"; const { $isMobile: hu } = f.l.outputs, { $isWayAwayBrand: fu } = Ce.U.outputs, gu = ({ containerClassName: e, contentClassName: t, inputClassName: s, onTripClassChange: a, tripClass: n, tripClasses: o = Object.values(au.s), dropdownPosition: r = Pt.i.BottomLeft, passengersAvailability: l = { adults: !0, children: !0, infants: !0 }, onDropdownClose: c, onDropdownToggle: d, isDropdownVisible: u, ...m }) => { const { isMobile: p, isWayAwayBrand: h } = (0, i.useUnit)({ isMobile: hu, isWayAwayBrand: fu }), { t: f } = (0, es.useTranslation)("lib_forms_avia_form"), g = function (e, { infantsWarning: t }) { const s = e.adults === e.infants; return { adults: { increment: e.adultsIncrementDisabled, decrement: s ? t : e.adultsDecrementDisabled }, children: { increment: e.childrenIncrementDisabled, decrement: e.childrenDecrementDisabled }, infants: { increment: s ? t : e.infantsIncrementDisabled, decrement: e.infantsDecrementDisabled } } }(m, { infantsWarning: f("passengers.infantsWarning") }), y = (0, U.useMemo)((() => Object.keys(l).some((e => l[e]))), [l]), v = !!(0, nu.c)(iu.AV)?.is([ou.L.Desktop]), b = { visible: u, handlers: { toggle: d, open: su(), close: c } }; return (0, Gt.jsx)(Ud, { containerClassName: e, contentClassName: ve()("s__wX5rb7U_jv5SokcgctxQ", t), inputClassName: s, modalHeader: f("passengers.header"), label: f("passengers.count", { count: m.total }), sublabel: f(`tripClass.${n}`), dropdownPosition: r, visibility: b, testIds: { dropdownName: "passengers-field", title: "passenger-numbers", subtitle: "trip-class" }, children: (0, Gt.jsxs)("div", { className: "s__jGAq5ellMvcOCWB7qlZd", "data-test-id": "trip-class-and-number-passengers", children: [y && (0, Gt.jsxs)(Gt.Fragment, { children: [v && (0, Gt.jsx)(Ht.x, { type: qt.y.Body1Bold, className: mu, children: f("passengersCount") }), l.adults && (0, Gt.jsx)(uu, { title: f("passengers.ages.adults"), description: f("passengers.comments.adults"), className: pu, onDecrement: m.onAdultsDecrement, onIncrement: m.onAdultsIncrement, value: m.adults, disableIncrement: g.adults.increment, disableDecrement: g.adults.decrement, dataTestId: "number-of-adults" }), l.children && (0, Gt.jsx)(uu, { title: f("passengers.ages.children"), description: f("passengers.comments.children"), className: pu, onDecrement: m.onChildrenDecrement, onIncrement: m.onChildrenIncrement, value: m.children, disableDecrement: g.children.decrement, disableIncrement: g.children.increment, dataTestId: "number-of-children" }), l.infants && (0, Gt.jsx)(uu, { title: f("passengers.ages.infants"), description: f("passengers.comments.infants"), className: pu, onDecrement: m.onInfantsDecrement, onIncrement: m.onInfantsIncrement, disableDecrement: g.infants.decrement, disableIncrement: g.infants.increment, value: m.infants, dataTestId: "number-of-infants" })] }), o.length > 0 && (0, Gt.jsxs)("div", { className: "s__D722uNwpqVaOwzugV2gy", children: [v && (0, Gt.jsx)(Ht.x, { type: qt.y.Body1Bold, className: mu, children: f("tripClassTitle") }), (0, Gt.jsx)(zd.E, { className: "s__d8k6Uv7bOUIyyvcaUPPn", value: n, onChange: a, children: o.map((e => (0, Gt.jsx)(Gd.E, { value: e, label: f(`tripClass.${e}`), labelPosition: "left", className: "s__p7hN8JjHyjvRgSc6tq6a", "data-test-id": `trip-class-${e}` }, e))) })] }), p && (0, Gt.jsx)(_r.z, { className: "s__QsVuzf8QL_98lqtQwn6w", priority: Cr.Ji.Primary, size: Cr.qE.M, mod: h ? Cr.Ly.Default : Cr.Ly.Orange, onClick: b.handlers.close, children: f("ready") })] }) }) }, yu = (0, U.memo)(gu); var vu = s(94945); const { changePassengers: bu } = W.i.inputs, { $passengers: xu } = W.i.outputs, _u = (0, n.withFactory)({ sid: "-erxuge", fn: () => (0, _e.d)(vu.k) }), Cu = (0, n.createEvent)({ sid: "m8n677" }), { $enabled: wu, turnOff: ku, toggle: Su } = (0, n.withFactory)({ sid: "yb66fv", fn: () => (0, _e.d)(Se.qs, !1) }); (0, n.sample)({ and: [{ clock: ka, target: ku }], or: { sid: "-qu1hnz" } }), (0, n.sample)({ and: [{ clock: ku, target: Cu }], or: { sid: "-qfqu8l" } }), (0, n.sample)({ and: [{ clock: xu.updates, target: _u.changePassengers }], or: { sid: "-qbchhp" } }), (0, n.sample)({ and: [{ clock: Cu, source: _u.$passengers, target: bu }], or: { sid: "-pvega8" } }); const { $tripClass: Du, $allowedTripClasses: Fu } = W.i.outputs, { changeTripClass: ju } = W.i.inputs, Nu = (0, n.withFactory)({ sid: "8g4y67", fn: () => (0, xe.SC)({ view: yu, bind: { total: _u.$paxCount, tripClass: Du, tripClasses: Fu, onTripClassChange: ju, adults: _u.$adults, children: _u.$children, infants: _u.$infants, adultsIncrementDisabled: _u.$incrementAdultsDisabled, adultsDecrementDisabled: _u.$decrementAdultsDisabled, childrenIncrementDisabled: _u.$incrementChildrenDisabled, childrenDecrementDisabled: _u.$decrementChildrenDisabled, infantsIncrementDisabled: _u.$incrementInfantsDisabled, infantsDecrementDisabled: _u.$decrementInfantsDisabled, onAdultsDecrement: _u.decrementAdults, onAdultsIncrement: _u.incrementAdults, onChildrenDecrement: _u.decrementChildren, onChildrenIncrement: _u.incrementChildren, onInfantsDecrement: _u.decrementInfants, onInfantsIncrement: _u.incrementInfants, onDropdownClose: ku, onDropdownToggle: Su, isDropdownVisible: wu } }) }), Iu = ve().bind(Sr), Mu = ({ isSwapPlacesEnabled: e, onSwapDirections: t, showPaymentSelect: s, onSubmit: a, showFooter: n, hideFooterOnScroll: i, isHotelCheckboxAvailable: o, isNewDatesTooltipVisible: r, isSubmitButtonFocused: l, onCheckboxChange: c, onNewDatesTooltipClick: d }) => { const { t: u } = (0, es.useTranslation)("lib_forms_avia_form"), m = (0, U.useCallback)((() => 0), []); return (0, Gt.jsx)("div", { className: Sr.root, children: (0, Gt.jsxs)("form", { className: Iu(Sr.form, { [Sr.withPaymentSelect]: s }), "data-test-id": "avia-form", children: [(0, Gt.jsxs)("span", { className: Sr.direction, children: [(0, Gt.jsx)(oc, { placeholder: u("originPlaceholder"), inputTestId: "origin-input", dataTestId: "origin-autocomplete", containerClassName: Iu(Sr.field, Sr.origin), inputClassName: Sr.originInput }), (0, Gt.jsx)(rc, { placeholder: u("destinationPlaceholder"), inputTestId: "destination-input", dataTestId: "destination-autocomplete", containerClassName: Iu(Sr.field, Sr.destination), inputClassName: Sr.destinationInput, innerClassName: Sr.destinationInnerInput }), e && (0, Gt.jsx)(Qo, { className: Sr.swap, onClick: t })] }), (0, Gt.jsx)(Ld, { className: Sr.dates, startClassName: Iu(Sr.field, Sr.datesStartInput), endClassName: Iu(Sr.field, Sr.datesEndInput) }), s && (0, Gt.jsx)(eu, { containerClassName: Sr.payment, inputClassName: Iu(Sr.field, Sr.paymentInput) }), (0, Gt.jsx)(Nu, { containerClassName: Sr.passengers, inputClassName: Iu(Sr.field, Sr.passengersInput) }), (0, Gt.jsx)("div", { className: Sr.submit, children: (0, Gt.jsx)(Wo.u, { placement: "bottom-end", calculateCustomSkidding: m, content: (0, Gt.jsx)(Ht.x, { className: Iu(Sr.tooltipContent), type: qt.y.Body3Semi, onClick: d, children: u("newDatesSelected") }), visible: r ?? !1, appendTo: "parent", interactive: !0, children: (0, Gt.jsx)(kr, { hasFocus: l, onClick: a, children: u("submitButtonText") }) }) }), (0, Gt.jsx)("footer", { className: Iu(Sr.footer, { [Sr.hidden]: !n, [Sr.hideOnScroll]: i }), children: (0, Gt.jsx)(xr, { showCheckbox: o, onCheckboxChange: c }) })] }) }) }, { $allowPaymentMethodsChange: Tu } = W.i.outputs, { swap: Au } = W.i.inputs, Eu = (0, n.withFactory)({ sid: "vfliih", fn: () => (0, xe.SC)({ view: Mu, bind: { isSwapPlacesEnabled: go, onSwapDirections: Au, showPaymentSelect: Tu, onSubmit: Vo, isCollapsed: z, showFooter: ho, hideFooterOnScroll: fo, isHotelCheckboxAvailable: mo, showCurrencySignInCalendar: po, isNewDatesTooltipVisible: bo, isSubmitButtonFocused: va, onNewDatesTooltipClick: yo } }) }); var Pu = s(25309), $u = s.n(Pu), Ru = s(37132); function Bu(e) { return e.iata + e.type } function Ou(e, t) { switch (e.type) { case Mt.A.Country: return t("lib_forms_avia_form:autocomplete.countries"); case Mt.A.City: case Mt.A.Airport: case Mt.A.NationalPark: return t("lib_forms_avia_form:autocomplete.citiesAndAirports"); default: return Ru.x4 } } function Hu(e, t) { return { id: Bu(e), value: e.name, primary: e.name, secondary: e.type === Mt.A.Airport ? e.cityName : e.countryName, comment: e.type === Mt.A.NationalPark ? void 0 : e.iata, type: e.type, category: Ou(e, t), showIndent: e.type === Mt.A.Airport && e.inMetropolis } } const qu = { origin: null, destination: null, date: null }, Lu = { directions: [qu, qu], paymentMethod: Zd.X.All, tripClass: au.s.Economy }; var Zu = s(62041), zu = s(67948), Gu = s(23018), Vu = "s__k5JqgMIiXtsgAtdsRHu5", Uu = "s__hLC2T4nnlytnrGQS8OCB", Wu = "s__RhfVf2vVzQrF6gpvgMLj", Ku = "s__tt0VtIJNUCLjQe1Qzfdd", Ju = "s__pE0s9ZvaYSvIUYUpRYpe", Yu = "s__Unw8q8NTdmswLydWeL3H"; const Xu = ({ item: e, highlighted: t, ...s }) => { const a = ve()("s__MOotFWJ1Es8j9OBqI3Y2", t && "s__YZ9MtBcXVZqK6an_biEw"); switch (e.type) { case Mt.A.City: return (0, Gt.jsx)(Gu.h, { item: e, highlighted: t, ...s, testId: `suggested-city-${e.comment}` }); case Mt.A.Airport: return (0, Gt.jsxs)("button", { className: ve()(a, e.showIndent && "s__xj5HVq29J04AVjpZ0kNZ"), ...s, "data-test-id": `suggested-airport-${e.comment}`, children: [(0, Gt.jsxs)("span", { className: Ku, children: [(0, Gt.jsx)(ts.s, { className: Yu }), (0, Gt.jsx)("span", { className: Vu, children: e.primary })] }), (0, Gt.jsx)("span", { className: Uu, children: e.comment })] }); case Mt.A.History: return (0, Gt.jsxs)("button", { className: a, ...s, children: [(0, Gt.jsxs)("span", { className: Ku, children: [(0, Gt.jsx)(ds.I, { className: Yu }), (0, Gt.jsxs)("span", { className: Ju, children: [(0, Gt.jsx)("span", { className: Vu, children: e.primary }), (0, Gt.jsx)("span", { className: ve()(Uu, Wu), children: e.secondary })] })] }), (0, Gt.jsx)("span", { className: ve()(Uu, Wu), children: e.comment })] }); case Mt.A.Anywhere: return (0, Gt.jsx)("button", { className: ve()(a, "s__cch8AgywRxpMub7vMjRk"), "data-test-id": "suggested-anywhere", ...s, children: (0, Gt.jsxs)("span", { className: Ku, children: [(0, Gt.jsx)(Jt.M, { className: Yu }), (0, Gt.jsxs)("span", { className: Ju, children: [(0, Gt.jsx)("span", { className: Vu, children: e.primary }), (0, Gt.jsx)("span", { className: ve()(Uu, Wu), children: e.secondary })] })] }) }); case Mt.A.Country: return (0, Gt.jsxs)("button", { className: a, ...s, "data-test-id": `suggested-country-${e.comment}`, children: [(0, Gt.jsxs)("span", { className: Ku, children: [e.comment && (0, Gt.jsx)(os.W, { className: "s__Z6E4TvYD18lo0a4HdCPm", countryCode: e.comment }), (0, Gt.jsx)("span", { className: Vu, children: e.primary })] }), (0, Gt.jsx)("span", { className: Uu, children: e.comment })] }); case Mt.A.NationalPark: return (0, Gt.jsx)("button", { className: a, ...s, "data-test-id": `suggested-national-park-${e.primary}`, children: (0, Gt.jsxs)("span", { className: Ku, children: [(0, Gt.jsx)(as, { className: Yu }), (0, Gt.jsx)("span", { className: Vu, children: e.primary })] }) }); default: return null } }, Qu = (0, U.memo)(Xu); const em = U.forwardRef((({ innerClassname: e, item: t, dataTestId: s, ...a }, n) => { const i = t?.comment ? (0, Gt.jsx)(Ht.x, { className: "s__PcTprGwXRoDAv8cgXFdf", type: qt.y.CaptionAllCaps, testId: "iata", children: t.comment }) : null; return (0, Gt.jsx)(Wt, { ...a, ref: n, innerClassname: ve()("s__VB86AmJU7zXOnYoge4TF", e), addonAfter: i, dataTestId: s }) })); var tm = { direction: "s__R_HJ9X2V6nI0XeW8nnqq", removable: "s__iRuRw8jBxP77jsqFlQEE", fieldsWrapper: "s__O_p3vOQ4wSPJntiAWTeF", removeButton: "s__AskYxLPg3w235pJ0Jdlw", field: "s__W6Qh7kZUrjwTYtVxzGr5", input: "s__jKl4tsgsL7bSIAQBJES8", dateInput: "s__c5xqjy4cjVTt3LgBHYSV", dropdown: "s__eZV0WmxfW4LLOiXm4W6C", error: "s__OAVQf7uH7sMG7A3Vc9_b" }; const sm = (0, U.forwardRef)(((e, t) => (0, Gt.jsx)(em, { ...e, ref: t, dataTestId: "destination-input", errorClassName: tm.error }))), am = (0, U.memo)(sm), nm = (0, U.forwardRef)(((e, t) => (0, Gt.jsx)(em, { ...e, ref: t, dataTestId: "origin-input", errorClassName: tm.error }))), im = (0, U.memo)(nm), { $isDesktop: om } = f.l.outputs, { $enabled: rm, turnOn: lm, turnOff: cm } = (0, n.withFactory)({ sid: "93ko7u", fn: () => (0, _e.d)(Se.qs, !1) }), dm = (0, n.createEvent)({ sid: "-rrlaza" }), um = (0, n.createStore)(null, { sid: "-y3ij8t" }).on(dm, ((e, t) => t)).reset(cm); (0, n.sample)({ and: [{ clock: dm, target: lm }], or: { sid: "zgi7al" } }); const mm = (0, n.withFactory)({ sid: "avbsdc", fn: () => (0, ht.w)(om, 1, bt.U.max) }), pm = (0, n.withFactory)({ sid: "-ciye38", fn: () => (0, ht.w)(om, xt.i.Horizontal, xt.i.Vertical) }), hm = om, fm = om, gm = (0, n.createEvent)({ sid: "l5qrab" }), ym = (0, n.createStore)(new _t.m(new Date), { sid: "wy6a6l" }).on(gm, ((e, t) => t)); var vm = { field: "s__ciKT9LrkSTYzs5qsSV8q", focus: "s__uB03JSEbLNPaw5uE4bec", error: "s__PisyGXesVIP8ctw7eKgx", primaryText: "s__JMqdj7gUpaKpZKBwHfjI", secondaryText: "s__K82GQ_5uAVoyo9bJivws", calendarIcon: "s__FYzDCKuS2A52KKfMOubg" }; const bm = Zt().bind(vm); function xm({ tabIndex: e, error: t, calendarId: s, hasFocus: a, title: n, onOpen: i, onDateFocus: o, selectedDate: r, className: l }) { const c = (0, cs.d)("ts_day_month_weekday"), d = (0, U.useRef)(null); (0, U.useEffect)((() => { a && d.current?.focus() }), [a]); const u = (0, U.useCallback)((() => { i(s) }), [s, i]); return (0, Gt.jsxs)("button", { ref: d, className: bm(vm.field, l, { [vm.error]: !!t, [vm.focus]: a }), type: "button", tabIndex: e, onClick: u, onFocus: o, "data-test-id": "multiway-date", children: [t && (0, Gt.jsx)(Ut, { text: t, className: vm.error }), (0, Gt.jsx)(Ht.x, { type: qt.y.Body2Regular, className: r ? vm.primaryText : vm.secondaryText, children: r ? c(r) : n }), (0, Gt.jsx)(md.a, { "aria-hidden": !0, className: vm.calendarIcon })] }) } function _m({ minDirectionsDate: e, selectedDate: t, onDayClick: s, error: a, tabIndex: n, onDateFocus: i, hasFocus: o, calendarId: r, activeCalendarId: l, orientation: c, numberOfMonths: d, canSelectMonthCaption: u, showNavbar: m, onClose: p, isVisible: h, currentMonth: f, onCurrentMonthChange: g, onOpen: y, inputClassName: v }) { const { t: b } = (0, es.useTranslation)("lib_forms_trip_duration"), { availableDays: x, disabledDays: _ } = (0, U.useMemo)((() => { const t = e ? (0, yt.Z)(e, -1) : new Date, s = e || new Date, a = e ? (0, gt.Z)((0, yt.Z)(e, -1), 1) : (0, gt.Z)((0, yt.Z)(new Date, -1), 1); return { availableDays: { from: t, to: a }, disabledDays: { before: s, after: a } } }), [e]); (0, U.useEffect)((() => { if (!h) { const e = za(t ?? new Date, x); g(e) } }), [x, h, g, t]); const C = (0, U.useCallback)((() => { p(); const e = za(t ?? new Date, x); g(e) }), [x, p, g, t]), w = (0, U.useCallback)(((e, t, a) => { s?.(e, t, a), C() }), [C, s]), k = (0, Gt.jsx)(bc.f, { availableDays: x, disabledDays: _, selectedDays: t ?? void 0, onDayClick: w, orientation: c, numberOfMonths: d, canSelectMonthCaption: u, showNavbar: m, currentMonth: f, onCurrentMonthChange: g, className: "s__aHpCbxKc4oFNiaCahmTC" }); return (0, Gt.jsx)(lc.f, { visible: h && r === l, onClose: C, hideArrow: !0, dropdownPosition: Pt.i.BottomLeft, hideDropdownsOverflowContent: !1, modalHeader: b("multiway.departureTitle"), dropdownContent: k, contentClassName: "s__GyRuFBaKVJT5Yy9PeTJ8", children: (0, Gt.jsx)("div", { children: (0, Gt.jsx)(xm, { title: b("multiway.departureTitle"), tabIndex: n, selectedDate: t, error: a, onDateFocus: i, calendarId: r, onOpen: y, hasFocus: o, className: v }) }) }) } const Cm = (0, n.withFactory)({ sid: "ew29zg", fn: () => (0, xe.SC)({ view: _m, bind: { orientation: pm, numberOfMonths: mm, canSelectMonthCaption: hm, showNavbar: fm, isVisible: rm, onClose: cm, currentMonth: ym, onCurrentMonthChange: gm, onOpen: dm, activeCalendarId: um } }) }), wm = ({ direction: e, directionIndex: t, removable: s, autocompleteFetcher: a, minDirectionsDate: n, errors: i, onDirectionRemove: o, onOriginChange: r, onDestinationChange: l, onDateChange: c, onErrorReset: d }) => { const { t: u } = (0, es.useTranslation)("lib_forms_avia_form"), { t: m } = (0, es.useTranslation)("lib_forms_trip_duration"), { fieldInFocus: p, handleErrorReset: h, handleDateSelect: f, handleDestinationSelect: g, handleOriginSelect: y } = function (e, t, s, a, n, i, o) { const [r, l] = (0, U.useState)(null); return { fieldInFocus: r, handleErrorReset: (0, U.useCallback)((t => { s?.[t] && o(t, e) }), [e, s, o]), handleOriginSelect: (0, U.useCallback)((t => { t && (a(e, t), l("destination")) }), [e, a]), handleDestinationSelect: (0, U.useCallback)((s => { s && (n(e, s), l(t.date ? null : "date")) }), [t.date, e, n]), handleDateSelect: (0, U.useCallback)((t => { i(e, t), l(null) }), [e, i]) } }(t, e, i, r, l, c, d), v = (0, U.useMemo)((() => ({ fetcher: a, customInput: im, customItem: Qu, inputClassName: tm.input, dropdownClassName: tm.dropdown })), [a]), b = (0, U.useMemo)((() => ({ fetcher: a, customInput: am, customItem: Qu, inputClassName: tm.input, dropdownClassName: tm.dropdown })), [a]), { origin: x, destination: _ } = function (e, t) { return { origin: (0, U.useMemo)((() => e.origin ? Hu(e.origin, t) : null), [e.origin, t]), destination: (0, U.useMemo)((() => e.destination ? Hu(e.destination, t) : null), [e.destination, t]) } }(e, u), C = t + 1; return (0, Gt.jsxs)("fieldset", { className: ve()(tm.direction, { [tm.removable]: s }), "data-test-id": `multiway-direction-${C}`, children: [(0, Gt.jsx)("legend", { className: zu.Z.visuallyHidden, children: u("directionNumber", { value: C }) }), (0, Gt.jsxs)("div", { className: tm.fieldsWrapper, children: [(0, Gt.jsxs)("label", { className: ve()(tm.field, tm.origin), children: [(0, Gt.jsxs)("span", { className: zu.Z.visuallyHidden, children: [u("originPlaceholder"), ":"] }), (0, Gt.jsx)(Zu.F, { ...v, id: "multiway_form_origin", value: x, placeholder: u("originPlaceholder"), hasFocus: "origin" === p, tabIndex: C, onItemSelect: y, onInputFocus: () => h("origin"), error: i?.origin, testId: "multiway-origin" })] }), (0, Gt.jsxs)("label", { className: ve()(tm.field, tm.destination), children: [(0, Gt.jsxs)("span", { className: zu.Z.visuallyHidden, children: [u("destinationPlaceholder"), ":"] }), (0, Gt.jsx)(Zu.F, { ...b, id: "multiway_form_destination", value: _, placeholder: u("destinationPlaceholder"), hasFocus: "destination" === p, tabIndex: C, onItemSelect: g, onInputFocus: () => h("destination"), error: i?.destination, testId: "multiway-destination" })] }), (0, Gt.jsxs)("label", { className: tm.field, onClick: e => e.preventDefault(), children: [(0, Gt.jsxs)("span", { className: zu.Z.visuallyHidden, children: [m("multiway.departureTitle"), ":"] }), (0, Gt.jsx)(Cm, { hasFocus: "date" === p, onDayClick: f, onDateFocus: () => h("date"), selectedDate: e.date, minDirectionsDate: n, tabIndex: C, error: i?.date, calendarId: t, inputClassName: tm.dateInput })] })] }), s && (0, Gt.jsx)("button", { className: tm.removeButton, onClick: o, type: "button", tabIndex: -1, children: (0, Gt.jsx)("span", { className: zu.Z.visuallyHidden, children: u("removeDirectionButton") }) })] }) }, km = (0, U.memo)(wm); let Sm; !function (e) { e[e.Min = 1] = "Min", e[e.Max = 6] = "Max" }(Sm || (Sm = {})); const Dm = ({ directions: e, autocompleteFetcher: t, errors: s, ...a }) => { const n = (0, U.useMemo)((() => e.length > Sm.Min ? e.length - 1 : null), [e.length]), i = (0, U.useMemo)((() => function (e) { const t = e.reduce(((t, s, a) => { if (0 === a) return t.push(null), t; const n = e?.[a - 1]?.date; if (n) return t.push(n), t; const i = t.filter((e => e instanceof Date)), o = i?.[i.length - 1]; return o ? (t.push(o), t) : (t.push(null), t) }), []); return t }(e)), [e]); return (0, Gt.jsx)(Gt.Fragment, { children: e.map(((e, o) => (0, Gt.jsx)(km, { direction: e, directionIndex: o, autocompleteFetcher: t, minDirectionsDate: i?.[o] || null, removable: o === n, errors: s?.[o], ...a }, o))) }) }; var Fm = { controls: "s__eoqJlmRJ0uDnKHH8HuS3", selectors: "s__cRpLSAA2Dkpd5Mcl7A6w", selector: "s__U_Yuhl0uxO7c6DIfKrZi", input: "s__mOuLAw98MNKGHbMev2mH", add: "s__Ohmu6rYdw3R7ggsVz3f4", addButton: "s__acK398U1_ZWzNrIcXpQ2", addWarning: "s__Acj6x2AoLIbimp_zy7C9", submitButton: "s__p3vKsUXeugmr1EChdSP0", footer: "s__XKkmEF5oQJn4d7lO_ymi" }; const jm = ({ totalDirectionCount: e, onDirectionAdd: t }) => { const { t: s } = (0, es.useTranslation)("lib_forms_avia_form"), a = e < Sm.Max; return (0, Gt.jsx)("div", { className: Fm.add, "data-test-id": "multiway-add-direction", children: a ? (0, Gt.jsx)(_r.z, { className: Fm.addButton, priority: Cr.Ji.Secondary, size: Cr.qE.M, mod: Cr.Ly.Custom, onClick: t, children: (0, Gt.jsxs)(_r.z.Label, { className: Fm.addButtonLabel, type: qt.y.Title4Semi, children: ["+ ", s("addDirectionButton")] }) }) : (0, Gt.jsx)(Ht.x, { className: Fm.addWarning, tag: "p", type: qt.y.CaptionSemi, children: s("maximumDirectionsWarning") }) }) }, Nm = (0, U.memo)(jm), Im = ({ paymentMethod: e, onChange: t }) => (0, Gt.jsx)(Yd, { containerClassName: ve()(Fm.selector, Fm.payment), inputClassName: Fm.input, value: e, onChange: t }), Mm = (0, U.memo)(Im); const Tm = (0, U.memo)((({ onClick: e }) => { const { t: t } = (0, es.useTranslation)("lib_forms_avia_form"); return (0, Gt.jsxs)("button", { className: "s__HPJi4zWsGcHkvh09j6K1", onClick: e, "data-test-id": "switch-to-aviaform", children: [(0, Gt.jsx)("span", { className: "s__yqYhjAWc2woFy4euwf5Q" }), (0, Gt.jsx)(Ht.x, { type: qt.y.Body2Regular, children: t("footer.changeToAviaForm") })] }) })); Tm.displayName = "ChangeToAviaFormButton"; const Am = ({ form: e, autocompleteFetcher: t, showPaymentSelect: s, onChange: a, onSubmit: n, onToAviaFormClick: i }) => { const { t: o } = (0, es.useTranslation)("lib_forms_avia_form"), r = function (e) { return (0, U.useMemo)((() => ({ directions: e.directions || Lu.directions, paymentMethod: e.paymentMethod || Zd.X.All })), [e]) }(e), { fetcher: l, autocompletePlaces: c } = function (e, t) { const s = (0, U.useMemo)((() => new Map), []), a = (0, U.useMemo)((() => ({ fetch: async a => { const n = await e.fetch(a); s.clear(); for (const e of n) s.set(Bu(e), e); return function (e, t) { return e.reduce(((s, a) => { if (a.type === Mt.A.Airport && a.inMetropolis) return s; const n = Hu(a, t); if (a.type === Mt.A.City) { const i = e.filter((e => e.inMetropolis && e.cityIata === a.iata)).map((e => Hu(e, t))); return [...s, n, ...i] } return [...s, n] }), []) }(n, t) }, choice: async (a, n) => { const i = a.map((e => s.get(e.id))).filter((e => Boolean(e))), o = await e.choice(i, n); return o ? Hu(o, t) : null } })), [e, s, t]); return { fetcher: a, autocompletePlaces: s } }(t, o), { errors: d, validateState: u, resetError: m } = function (e, t) { const [s, a] = (0, U.useState)(); return { errors: s, validateState: () => { a(function (e, t) { return e.map((e => { let s, a, n; return e.origin?.name || (s = t("errors.emptyOrigin")), e.destination?.name || (a = t("errors.emptyDestination")), (0, Y.PM)(e.origin, e.destination) && (a = t("errors.sameCities")), e.date || (n = t("errors.emptyDate")), { origin: s, destination: a, date: n } })) }(e.directions, t)) }, resetError: (e, t) => { if (!s) return; const n = Object.assign([], s, { [t]: { ...s[t], [e]: void 0 } }); a(n) } } }(r, o), p = function (e, t, s, a, n) { return { handleSubmit: (0, U.useCallback)((e => { e.preventDefault(), s(), n() }), [s, n]), addDirection: (0, U.useCallback)((() => { const t = [...e.directions]; t.push({ origin: t[t.length - 1].destination, destination: null, date: null }), a({ ...e, directions: t }) }), [e, a]), removeDirection: (0, U.useCallback)((() => { const t = [...e.directions]; t.pop(), a({ ...e, directions: t }) }), [e, a]), changeDirectionOrigin: (0, U.useCallback)(((s, n) => { const i = $u()(e.directions); i[s].origin = t.get(n.id) ?? null, a({ ...e, directions: i }) }), [e, a, t]), changeDirectionDestination: (0, U.useCallback)(((s, n) => { const i = $u()(e.directions); i[s].destination = t.get(n.id) ?? null, a({ ...e, directions: i }) }), [e, a, t]), changeDirectionDate: (0, U.useCallback)(((t, s) => { const n = $u()(e.directions); n[t].date = s; for (let e = t + 1; e < n.length; e += 1) { const t = n[e]; t.date && t.date < s && (t.date = null) } a({ ...e, directions: n }) }), [e, a]), changePaymentMethod: (0, U.useCallback)((t => { a({ ...e, paymentMethod: t }) }), [e, a]) } }(r, c, u, a, n); return (0, Gt.jsxs)("form", { className: Fm.form, "data-test-id": "multiway-form", children: [(0, Gt.jsx)(Dm, { directions: r.directions, autocompleteFetcher: l, errors: d, onDirectionRemove: p.removeDirection, onOriginChange: p.changeDirectionOrigin, onDestinationChange: p.changeDirectionDestination, onDateChange: p.changeDirectionDate, onErrorReset: m }), (0, Gt.jsxs)("div", { className: Fm.controls, children: [(0, Gt.jsxs)("div", { className: Fm.selectors, children: [s && (0, Gt.jsx)(Mm, { paymentMethod: r.paymentMethod, onChange: p.changePaymentMethod }), (0, Gt.jsx)(Nu, { containerClassName: ve()(Fm.selector, Fm.passengers), inputClassName: Fm.input })] }), (0, Gt.jsx)(Nm, { totalDirectionCount: r.directions.length, onDirectionAdd: p.addDirection }), (0, Gt.jsx)(kr, { className: Fm.submitButton, onClick: p.handleSubmit, children: o("submitButtonText") })] }), i && (0, Gt.jsx)("div", { className: Fm.footer, children: (0, Gt.jsx)(Tm, { onClick: i }) })] }) }, { $localeDeprecated: Em } = ml.z.outputs, Pm = Em.map((e => ({ fetch: async t => { if (!t || 0 === t.trim().length) return []; const s = { locale: e, max: 7, term: t, types: ["city", "airport"] }; return await async function (e) { let t; try { const { data: s } = await dl().get(bl(Ae.Nv`${xl}/v2/places.json?${(0, ul.stringify)(e, { arrayFormat: "bracket" })}`, { escape: !1 })); t = pl(s) } catch (e) { t = [] } return t }(s) }, choice: async e => e[0] }))), { changePaymentMethod: $m, changeSegments: Rm, exact: { changeSegments: Bm } } = W.i.inputs, { $paymentMethod: Om, $directionSegments: Hm, exact: { $segments: qm } } = W.i.outputs, { tryToStartSearch: Lm } = J.J.inputs, Zm = (0, n.createEvent)({ sid: "17x6vf" }), zm = Lm, Gm = (0, n.combine)({ and: [{ directions: (0, n.combine)({ and: [{ segments: Hm, dateSegments: qm }, ({ segments: e, dateSegments: t }) => e.map(((e, s) => ({ ...e, date: t[s] ?? null })))], or: { sid: "-qatdz5" } }), paymentMethod: Om }], or: { sid: "3dng9t" } }); (0, n.sample)({ and: [{ clock: Zm, fn: ({ directions: e }) => e.map((e => ({ origin: e.origin, destination: e.destination }))), target: Rm }], or: { sid: "-vx2r7u" } }), (0, n.sample)({ and: [{ clock: Zm, fn: ({ directions: e }) => e.map((({ date: e }) => e)), target: Bm }], or: { sid: "-vg14tn" } }), (0, n.sample)({ and: [{ clock: Zm, fn: ({ paymentMethod: e }) => e, target: $m }], or: { sid: "-vcqd9h" } }); const { toSimpleSearch: Vm } = W.i.inputs, { $allowPaymentMethodsChange: Um } = W.i.outputs, Wm = (0, n.withFactory)({ sid: "-efc3yq", fn: () => (0, xe.SC)({ view: Am, bind: { form: Gm, onChange: Zm, onSubmit: zm, onToAviaFormClick: Vm, showPaymentSelect: Um, renderPassengers: Nu, autocompleteFetcher: Pm } }) }); var Km = s(531), Jm = s(35712), Ym = s(78620); const Xm = (0, U.forwardRef)((({ innerClassname: e, className: t, item: s, dataTestId: a, loading: n, ...i }, o) => { const r = s?.comment ? (0, Gt.jsx)(Ht.x, { className: "s__fn7FFmpY7od8MCOOLJsT", type: qt.y.CaptionAllCaps, testId: "iata", children: s.comment }) : null; return (0, Gt.jsx)(Wt, { ...i, ref: o, className: ve()(t, "s__pdI69AJ09kfA9ib9630O", { s__aTR_QG8rJAQj2B2P4o4k: Boolean(n) }), innerClassname: ve()("s__GDDndnkteA5ZrIDYeB1U", e), addonAfter: r, dataTestId: a, disabled: n }) })); Xm.displayName = "AutocompleteInput"; const Qm = ({ isLoading: e, isFocused: t, tabIndex: s, onFocus: a, onBlur: n, ...i }) => { const { t: o } = (0, es.useTranslation)("lib_forms_hotel_form"); return (0, Gt.jsx)(Zu.F, { id: "hotel_form_destination", customInput: Xm, hasFocus: t, onInputBlur: n, onInputFocus: a, placeholder: o(e ? "destinationLoadingPlaceholder" : "destinationPlaceholder"), tabIndex: s, inputLoading: e, ...i }) }; var ep = s(34859), tp = s(59458), sp = "s__S4pltwva6vcDKNcMq7E6"; const ap = ({ title: e }) => { const t = (0, U.useRef)(null); return (0, Gt.jsx)(vc.Z, { unmountOnExit: !0, timeout: { appear: 500, enter: 300, exit: 150 }, classNames: { appear: "s__gWNelDp7hEAi2wxzMXYn", appearActive: "s__Bpyzk1JZWJhzYzYhM47T", enter: "s__tK2XH2mEAsfkEqZFwZjN", enterActive: "s__aEW66V9canRAFM3SLV_A", enterDone: "s__GU2kGzFe9QswEkI1mKSj", exit: sp, exitActive: sp, exitDone: "s__NuPJLLOlrd2VcBxkwCzc" }, nodeRef: t, in: !0, appear: !!t.current, children: (0, Gt.jsx)("div", { className: "s__lVMW7wf4fMoC0dXKE4K6", ref: t, children: (0, Gt.jsx)("div", { className: "s__uJkiIu_INJqmJzTTPMgo", children: (0, Gt.jsx)(Ht.x, { type: qt.y.Title4Semi, testId: "calendar-title", children: e }) }) }) }, e) }, np = U.memo(ap); const { $isDesktop: ip } = f.l.outputs, op = e => { const { selectedDays: t, availableDays: s, disabledDays: a, currentMonth: n, modifiers: o, numberOfMonths: r, orientation: l, texts: c, hideCalendarHeader: d, canSelectMonthCaption: u, onDaySelect: m, onDayMouseEnter: p, onDayMouseLeave: h, onCurrentMonthChange: f, onCalendarMouseLeave: g, renderDayContent: y } = e, v = (0, i.useUnit)(ip), b = (0, U.useRef)(null); return (0, Gt.jsxs)("div", { className: "s__T9GheC4mDYGp0BSMHjsH", "data-test-id": "exact-calendar", children: [!d && (0, Gt.jsx)("header", { className: "s__fltrjkt9WJu5fak5p8LS", "data-test-id": "exact-calendar-header", children: (0, Gt.jsx)(np, { title: c.title }) }), (0, Gt.jsx)(vc.Z, { unmountOnExit: !0, timeout: { appear: 1e3 }, classNames: { appear: "s__HAeHMRHttqeynipqz67t", appearActive: "s__a_g5l5L2YDjzU25yfJUH" }, nodeRef: b, in: !0, appear: v && !!b.current, children: (0, Gt.jsx)("div", { className: "s__Zasz15rbiV6LQwsylVRk", ref: b, children: (0, Gt.jsx)(bc.f, { selectedDays: t, availableDays: s, disabledDays: a, currentMonth: n, modifiers: o, numberOfMonths: r, orientation: l, canSelectMonthCaption: u, showNavbar: l === xt.i.Horizontal, onDayClick: m, onDayMouseEnter: p, onDayMouseLeave: h, onCurrentMonthChange: f, onCalendarMouseLeave: g, renderDayContent: y }) }) })] }) }; const rp = e => { const { texts: t, selectedDays: s, availableDays: a, disabledDays: n, currentMonth: i, modifiers: o, orientation: r, numberOfMonths: l, hideCalendarHeader: c, canSelectMonthCaption: d, onDaySelect: u, onDayMouseEnter: m, onDayMouseLeave: p, onCurrentMonthChange: h, onCalendarMouseLeave: f, renderDayContent: g } = e; return (0, Gt.jsx)("div", { className: ve()("s__eI1rTFEnQanzfzR7hm0A", "s__HewX0N9STjiau47zgvtF"), children: (0, Gt.jsx)("div", { className: "s__cmrFlwuwYO5tVAlZaSWO", children: (0, Gt.jsx)(op, { selectedDays: s, availableDays: a, disabledDays: n, currentMonth: i, modifiers: o, orientation: r, numberOfMonths: l, texts: t, hideCalendarHeader: c, canSelectMonthCaption: d, onDaySelect: u, onDayMouseEnter: m, onDayMouseLeave: p, onCurrentMonthChange: h, onCalendarMouseLeave: f, renderDayContent: g }) }) }) }; var lp = { containerWrapper: "s__be7g2XWZz2nOVcLfzSba", dropdown: "s__xnYp7NZyIVqlGkZ0iXrt", dropdownContent: "s__hK69YHg_OByNGJeMAxfA", fieldsContainer: "s__u61Xi2bSpwP1Q2T9iDZi", tripDurationInput: "s__ZKWFNzjPVUEt1KNpzik4", field: "s__EjEgAqZN8KBc4vzo2mw4", focused: "s__HhA8WLAZ54a0t5TGQdaw", error: "s__Dg_WdmrQUpsHCMFH6VfG", secondaryText: "s__Id1ICy_tsMuk6Jj1r4ze", primaryText: "s__OEPOoebw02XbSSxCUKK8", modalFieldsContainer: "s__k5z5RMAHb8ZlmiWg4iX0", modalButtons: "s__QB93Xp1wx6cxwnRuhSig", modalButtonsBg: "s__feAnxSPYfeZNp5NRtFaE", price: "s__vkTsf8RX7IEtq3l_30kA", defaultPrice: "s__ezXZp_g2NzPQNizW3qKW", goodPrice: "s__rtY_YEj_w3d_CF7MGygf", selectedPrice: "s__MRygnCEXifUK3RYGvr7L", emptyPrice: "s__B9jIQmPKmVG3m7EtuWuS", holidayTitle: "s__Cu140CVZ1FomPpebdNr2", weekendCircle: "s__RsOPqP5ZyJdH89QA4qOH", adornmentButton: "s__F_OnABlAdiyEaIwWYMNo", withAdornmentOffset: "s__yrAg6Zbkd_mHUYNWYZsJ", adornmentIcon: "s__XgRGCFYB6l8ynYBWSnoM", label: "s__NTlNwEwWq4gkGXsiyUST" }; const cp = ({ field: e, textSlot: t, endAdornmentSlot: s, error: a, className: n, tabIndex: i, onBlur: o, dataTestId: r }) => { const l = (0, U.useRef)(null), c = (0, Jc.D)(e.focused); (0, U.useEffect)((() => { c && !e.focused ? (l.current?.blur(), o()) : !c && e.focused && l.current?.focus() }), [e.focused, c, o]); const d = (0, U.useCallback)((() => { e.activate(!0) }), [e]); return (0, Gt.jsxs)("button", { ref: l, className: ve()(n, lp.field, { [lp.focused]: e.focused, [lp.error]: a }), tabIndex: i, type: "button", onClick: d, "data-test-id": `${r}-field`, children: [a && (0, Gt.jsx)(Ut, { text: a }), t, s] }) }, dp = ({ text: e, className: t, testId: s }) => (0, Gt.jsx)(Ht.x, { type: qt.y.Body2Regular, className: t, testId: s, children: e }); var up = s(53745); const mp = e => { const { from: t, to: s } = e; return t && s && (0, Fa.Z)(t, s) ? { from: s, to: t } : e }, { isSafari: pp, isIOS: hp } = Nd.t.outputs, fp = pp && hp; var gp = s(18446), yp = s.n(gp); const { $isDesktop: vp } = f.l.outputs, { $isDesktop: bp } = f.l.outputs, xp = ({ date: e, isStartDateFocused: t, isEndDateFocused: s, onStartDateFocus: a, onStartDateBlur: n, onEndDateFocus: o, onEndDateBlur: r, startDateTabIndex: l, endDateTabIndex: c, errors: d, startClassName: u, endClassName: m, className: p, onChange: h }) => { const f = (0, i.useUnit)(bp), g = (0, Vd.x)(), { startField: y, endField: v } = (0, tp.j)(g.handlers.open, { startFocus: { value: t, focus: a, blur: n, tabIndex: l }, endFocus: { value: s, focus: o, blur: r, tabIndex: c } }), b = ((e, t) => { const s = (0, U.useCallback)((() => { e.handlers.close(), t.forEach((e => e())) }), [e.handlers.close, ...t]); return { ...e, handlers: { ...e, close: s } } })(g, [y.deactivate, v.deactivate]), x = ((e, t, s, a, n) => { const o = (0, i.useUnit)(vp), [r, l] = (0, U.useState)(a), c = (0, Jc.D)(a), [d, u] = (0, U.useState)(), m = (0, U.useCallback)((e => l(e)), []); (0, U.useEffect)((() => { yp()(a, c) || m(a) }), [a, c, m]); const p = (0, U.useMemo)((() => { const e = (e => e?.from && e?.to ? (0, Da.Z)({ start: (0, $a.Z)([e.from, e.to]), end: (0, Ra.Z)([e.from, e.to]) }) : [])(d), { boundedFrom: t, boundedTo: s } = ((e, t) => ({ boundedFrom: t?.from && (0, Pa.S)(t.from, e?.from) && t.from || !e?.from && t?.from || e?.from, boundedTo: t?.to && (0, Pa.C)(t.to, e?.to) && t.to || !e?.to && t?.to || e?.to }))(r, d), a = ((e, t) => e && t ? (0, Ba.Z)(t, e) <= 1 ? [] : (0, Da.Z)({ start: (0, yt.Z)(e, 1), end: (0, yt.Z)(t, -1) }) : [])(t, s); return { estimated: e, boundedFrom: t, boundedTo: s, between: a } }), [r, d]), { onCalendarMouseLeave: h } = (({ range: e, isRangeFull: t, startField: s, setEstimatedDays: a }) => ({ onDayMouseEnter: (0, U.useCallback)((n => { s && s.activate(), !e?.from && !e?.to || t || ((0, Pa.S)(n, e?.from) ? a({ from: n, to: e?.from }) : (0, Pa.C)(n, e?.from) ? a({ from: e?.from, to: n }) : a({ from: n, to: n })) }), [e, t, s, a]), onCalendarMouseLeave: (0, U.useCallback)((() => { a(void 0) }), [a]) }))({ range: r, setEstimatedDays: u }); (0, U.useEffect)((() => { d?.from && !s.visible && u(void 0) }), [d, s.visible]); const f = (0, U.useCallback)((s => { if (t.clicked.current) { if (r?.from && (0, Pa.C)(s, r.from) || !r?.from && !r?.to) return t.activate(), void u({ from: r?.from, to: s }); if (!r?.to && r?.from && (0, Za.Z)(s, r.from)) return e.activate(), void u({ from: s, to: r.from }) } if (r?.from && r?.to && (0, Fa.Z)(s, r.from)) u({ from: s, to: void 0 }); else { if (!r?.from && r?.to && (0, Fa.Z)(s, r.to)) return t.activate(), void u({ from: r.to, to: s }); e.activate(), u({ from: s, to: r?.to }) } }), [e, t, r?.from, r?.to]), g = (0, U.useCallback)((a => { let n = {}; if (e.focused) { const i = ((e, t, s) => { const a = t?.from && !t.to && e?.from && !e.to, n = e?.to && e?.from && s.focused && t?.from && (0, Pa.C)(t.from, e.from); return Boolean(a || n) })(r, d, e); n = ((e, t, s) => { let a, n = (0, Pa.C)(e, t?.from) && t?.from || e; return s ? (n = e, a = void 0) : a = ((0, Pa.C)(e, t?.from) ? e : t?.to) || t?.from, mp({ from: n, to: a }) })(a, r, i), m(n), n.to && !i ? s.handlers.close() : t.activate(!0) } t.focused && (n = { from: r?.from || r?.to, to: a }, m(mp(n)), r?.from || r?.to ? s.handlers.close() : e.activate(!0)), u({ from: n.from || n.to, to: n.to || n.from }) }), [e, t, r, d, s.handlers, m]), y = (0, U.useCallback)((a => { let n = {}; const i = ((e, t, s, a) => { const n = t?.from && !t.to && a.focused && (0, Za.Z)(e, t.from), i = t?.from && t?.to && (a.focused && (0, Za.Z)(e, t.from) || s.focused && (0, Za.Z)(t.to, e)); return Boolean(n || i) })(a, r, e, t); e.focused && (n = { from: a, to: i ? void 0 : r?.to }, n.to && !i ? s.handlers.close() : t.activate(!0)), t.focused && (i ? n = { from: a, to: void 0 } : (n = { from: r?.from, to: a }, r?.from || r?.to ? s.handlers.close() : e.activate(!0))); const o = mp(n); m(o) }), [r, e, t, m, s.handlers]), v = (0, U.useCallback)((e => { o ? g(e) : y(e) }), [o, g, y]), b = (0, U.useCallback)((() => { e.focused || t.focused || yp()(r, c) || n(r ?? {}) }), [e, t, r, c, n]), x = (0, U.useCallback)((e => { e?.stopPropagation(), m(null), n({}) }), [m, n]), _ = (0, U.useCallback)((e => { e?.stopPropagation(), m({ from: r?.from, to: void 0 }), n({ from: r?.from, to: void 0 }) }), [r?.from, m, n]), C = (0, U.useCallback)((() => { n({}), u(void 0) }), [n, u]); return { date: r, estimatedDays: d, modifiers: p, handlers: { onDaySelect: v, onDayMouseEnter: f, onCalendarMouseLeave: h, onTripDurationInputsBlur: b, clearStartField: x, clearEndField: _, clearAll: C } } })(y, v, b, e, h), _ = (e => { let t = []; return (0, up.Ab)(e) ? t = [e] : (0, up.Mc)(e) ? t = e : (0, up.mD)(e) && e.range ? t = [e.range] : (0, up.ZM)(e) && e.ranges && (t = e.ranges), t.reduce(((e, t) => { if (t.from || t.to) { const s = (e => ({ from: e.from || e.to, to: e.to || e.from }))(t); s && e.push(s) } return e }), []) })(x.date), { availableDays: C, disabledDays: w, visuallyDisabled: k } = (() => { const e = (0, U.useMemo)((() => ({ from: (0, yt.Z)(new Date, -1), to: (0, gt.Z)(new Date, 1) })), []), t = e.from, s = e.to; return { availableDays: e, disabledDays: (0, U.useMemo)((() => ({ before: t, after: s })), [t, s]), visuallyDisabled: e.from } })(), { currentMonth: S, orientation: D, numberOfMonths: F, onCurrentMonthChange: j } = (0, ep.r)(_, f, C, b.visible), N = (e => { const { t: t } = (0, es.useTranslation)("lib_forms_trip_duration"); let s = ""; return s = e.clicked.current ? t("hotel.exact.departure.title") : t("hotel.exact.return.title"), { title: s } })(y), I = (e => { const { t: t } = (0, es.useTranslation)("lib_forms_trip_duration"), s = (0, U.useRef)(null); (0, U.useRef)(null); const a = (0, U.useRef)(null), n = (0, U.useRef)(null), i = (0, U.useRef)(null), o = (0, cs.d)("ts_day_month_weekday"), r = e.estimatedDays?.from || e.date?.from, l = e.estimatedDays?.to || e.date?.to; return s.current = dp({ text: r ? o(r) : t("hotel.exact.departure.title"), className: r ? lp.primaryText : lp.secondaryText, testId: "start-date-value" }), n.current = dp({ text: l ? o(l) : t("hotel.exact.return.title"), className: l ? lp.primaryText : lp.secondaryText, testId: "end-date-value" }), { startTextSlot: s.current, startAdornmentSlot: a.current, endTextSlot: n.current, endAdornmentSlot: i.current } })(x), M = (0, U.useCallback)((e => { f ? (e => { const t = (e => { if (!e) return !1; const t = e.getBoundingClientRect(); return t.top >= 0 && t.left >= 0 && t.bottom <= (window.innerHeight || document.documentElement.clientHeight) && t.right <= (window.innerWidth || document.documentElement.clientWidth) })(e.current); e.current && !t && e.current.scrollIntoView({ behavior: "smooth", block: "end" }) })(e) : _ && Array.isArray(_) && _[0] && ((e, t, s) => { const a = (0, jd.Cl)(t); if (!e.current || !a) return; const n = (0, Dd.Z)({ start: s.from, end: s.to }).findIndex((e => (0, Fd.Z)(e, a.startDate))), i = e.current.querySelectorAll(`.${CSS.escape(jd.AK?.month ?? "")}`)[n]; i && setTimeout((() => { fp ? i.scrollIntoView() : i.scrollIntoView({ behavior: "smooth", block: "center" }) }), 100) })(e, _, C) }), [_, C, f]), T = (0, Gt.jsx)(cp, { field: y, textSlot: I.startTextSlot, endAdornmentSlot: I.startAdornmentSlot, tabIndex: l, error: d.startDate || void 0, className: ve()(lp.tripDurationInput, u), onBlur: x.handlers.onTripDurationInputsBlur, dataTestId: "start-date" }), A = (0, Gt.jsx)(cp, { field: v, textSlot: I.endTextSlot, endAdornmentSlot: I.endAdornmentSlot, tabIndex: c, error: d.endDate || void 0, className: ve()(lp.tripDurationInput, m), onBlur: x.handlers.onTripDurationInputsBlur, dataTestId: "end-date" }), E = (0, U.useMemo)((() => ({ visuallyDisabled: k, ...x.modifiers })), [k, x.modifiers]), P = f; return (0, Gt.jsx)(lc.f, { hideArrow: !0, onClose: b.handlers.close, onOpened: M, visible: b.visible, className: ve()(lp.containerWrapper, p, lp.hotel), dropdownClassName: lp.dropdown, contentClassName: lp.dropdownContent, dropdownPosition: Pt.i.Bottom, modalHeader: N.title, hideDropdownsOverflowContent: !1, dropdownContent: (0, Gt.jsxs)("div", { children: [!f && (0, Gt.jsxs)("div", { className: lp.modalFieldsContainer, children: [T, A] }), (0, Gt.jsx)(rp, { selectedDays: _, availableDays: C, disabledDays: w, currentMonth: S, numberOfMonths: F, orientation: D, texts: N, modifiers: E, hideCalendarHeader: !f, canSelectMonthCaption: P, onCurrentMonthChange: j, ...x.handlers })] }), children: (0, Gt.jsxs)("div", { className: lp.fieldsContainer, children: [T, A] }) }) }; var _p = s(98913), Cp = s.n(_p), wp = s(4482), kp = s(69582), Sp = { wrap: "s__pSVWSeqYWFAnxAEKzvS5", title: "s__qAN64o6i7F4ChVeuXhym", select: "s__niVLwRrYzcon0wBO8qUg", select__inner: "s__HimI1X8uteaWUQ2tlKrS" }; const Dp = ({ className: e, value: t, elementIndex: s, onChange: a }) => { const { t: n } = (0, es.useTranslation)("lib_forms_hotel_form"), i = U.useCallback((e => { const t = Number(e.target.value); a(t, s) }), [a, s]); return (0, Gt.jsxs)("div", { className: ve()(Sp.wrap, e), "data-test-id": "hotel-guests-child-age", children: [(0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.Body2Regular, className: Sp.title, children: n("guests.childAge", { index: s + 1 }) }), (0, Gt.jsx)("div", { className: Sp.field, children: (0, Gt.jsx)(kp.P, { value: t, onChange: i, className: Sp.select, innerClassName: Sp.select__inner, children: Cp()(18, (e => (0, Gt.jsx)(wp.W, { value: e, children: n("guests.agesCount", { count: e }) }, e))) }) })] }) }, Fp = (0, U.memo)(Dp); var jp = { dropdownContent: "s__h4CvaQn1wlCnMlO7ZFUa", dropdown: "s__Qp1F8RqIbesRpmRwwnQ1", dropdownTitle: "s__regDtpUpCXojYDObNi40", wrap: "s__KBL505r6zg3NLyDALHBx", counter: "s__aOXqP4DTVm2S68y2tElM", agePicker: "s__uv5lDLzq2YZMMkFcSgVl" }; const Np = ({ onAdultsAdd: e, onAdultsRemove: t, onChildrenAdd: s, onChildrenRemove: a, onChildAgeChange: n, adults: i, children: o, childAges: r, total: l, inputClassName: c, canAddChildren: d, canRemoveChildren: u, canAddAdult: m, canRemoveAdult: p }) => { const { t: h } = (0, es.useTranslation)("lib_forms_hotel_form"), f = !!(0, nu.c)(iu.AV)?.is([ou.L.Desktop]), g = (0, Vd.x)(); return (0, Gt.jsx)(Ud, { contentClassName: jp.dropdownContent, inputClassName: ve()(c, jp.field), modalHeader: h("guests.header"), label: h("guests.count", { count: l }), visibility: g, children: (0, Gt.jsxs)("div", { className: jp.dropdown, "data-test-id": "hotel-guests", children: [f && (0, Gt.jsx)(Ht.x, { type: qt.y.Body1Bold, className: jp.dropdownTitle, children: h("guestsCount") }), (0, Gt.jsxs)("div", { className: jp.wrap, children: [(0, Gt.jsx)(uu, { title: h("guests.ages.adults"), className: jp.counter, onDecrement: t, onIncrement: e, value: i, disableIncrement: !m, disableDecrement: !p }), (0, Gt.jsx)(uu, { title: h("guests.ages.children"), description: h("guests.comments.children"), className: jp.counter, onDecrement: a, onIncrement: s, value: o, disableIncrement: !d, disableDecrement: !u })] }), r.map(((e, t) => (0, Gt.jsx)(Fp, { className: jp.agePicker, value: e, elementIndex: t, onChange: n }, t)))] }) }) }, Ip = (0, U.memo)(Np), Mp = ({ guests: e, onGuestsAdd: t, onGuestsRemove: s, onChildAgeChange: a, ...n }) => { const i = U.useMemo((() => ({ canAddChildren: e.children < Ne.RC.MaxChildren, canRemoveChildren: e.children >= Ne.RC.MinChildren, canAddAdult: e.adults < Ne.RC.MaxAdults, canRemoveAdult: e.adults > Ne.RC.MinAdults, adults: e.adults, children: e.children, childAges: e.childAges, total: e.adults + e.children })), [e]), o = U.useMemo((() => ({ onAdultsAdd() { t(Ne.gM.Adults) }, onAdultsRemove() { s(Ne.gM.Adults) }, onChildrenAdd() { t(Ne.gM.Children) }, onChildrenRemove() { s(Ne.gM.Children) }, onChildAgeChange(e, t) { a(e, t) } })), [t, s, a]); return (0, Gt.jsx)(Ip, { ...i, ...o, ...n }) }; let Tp; function Ap(e) { return e ? e.name : "" } !function (e) { e.Location = "location", e.Popular = "popular" }(Tp || (Tp = {})); const Ep = Zt().bind({ input: "s__xdZcVuEEcbgctYsbFS5A", comment: "s__XUORljrgSYjDUtXGMoLl" }), Pp = (0, U.forwardRef)((({ innerClassname: e, item: t, dataTestId: s, ...a }, n) => { const i = t?.comment && (0, Gt.jsx)(Ht.x, { className: Ep("comment"), type: qt.y.CaptionAllCaps, children: t.comment }); return (0, Gt.jsx)(Wt, { ...a, ref: n, innerClassname: Ep("input", e), addonAfter: i, dataTestId: s }) })); Pp.displayName = "AutocompleteInput"; var $p = { title: "s__dSoPXIowKNUCyNrXsMLT", item: "s__rlIKHI28wJTlp9KnXQPh", item_highlighted: "s__bZekzHv7wXQpETZSdEng", "--night": "s__LhkA3U8fXIVvRoWfPn4s", shadow: "s__ujJ02AkYZ_Fftc5ydei4", text: "s__T7O26p8BDCePJoH0eMBB", text_primary: "s__RhBo3ZYWJJAGXREzGqSx", line: "s__uVShKZAXpKzZnMzITGos", column: "s__m2pyXcKghrDFnnheCNRZ" }; const Rp = Zt().bind($p), Bp = ({ items: e, highlightedIndex: t, itemProps: s, showTitle: a, onClick: n }) => { const { t: i } = (0, es.useTranslation)("lib_forms_hotel_form"); return (0, Gt.jsxs)(Gt.Fragment, { children: [a && (0, Gt.jsx)(Ht.x, { type: qt.y.FootnoteAllCaps, className: Rp("title"), tag: "p", children: i("autocomplete.section.popular") }), e.map((e => { let a; e.type === Mt.A.City && (a = e.countryName); const i = `${e.name}${a ? "," : ""}`; return (0, Gt.jsxs)("li", { className: Rp("item", { item_highlighted: t === e.index }), "data-test-id": `suggested-${e.type}-${e.iata}`, ...s({ item: e, index: e.index, type: "li", onClick: () => n?.(e) }), children: [(0, Gt.jsx)("span", { className: Rp("line"), children: (0, Gt.jsxs)("span", { className: Rp("text"), children: [(0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.Body3Semi, className: Rp("text_primary"), children: i }), a && (0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.Body3Regular, className: Rp("shadow"), children: a })] }) }), e.comment && (0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.Body3Regular, className: Rp("shadow"), children: e.comment })] }, `${e.type}${e.iata}${e.index}`) }))] }) }, Op = Zt().bind($p), Hp = ({ items: e, highlightedIndex: t, itemProps: s, showTitle: a, onClick: n }) => { const { t: i } = (0, es.useTranslation)("lib_forms_avia_form"); return (0, Gt.jsxs)(Gt.Fragment, { children: [a && (0, Gt.jsx)(Ht.x, { type: qt.y.FootnoteAllCaps, className: Op("title"), tag: "p", children: i("autocomplete.citiesAndAirports") }), e.map((e => { let a; e.type === Mt.A.City && (a = e.countryName); const i = `${e.name}${a ? "," : ""}`; return (0, Gt.jsxs)("li", { className: Op("item", { highlighted: t === e.index }), ...s({ item: e, index: e.index, type: "li", onClick: () => n?.(e) }), children: [(0, Gt.jsx)("span", { className: Op("line"), children: (0, Gt.jsxs)("span", { className: Op("text"), children: [(0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.Body3Semi, className: Op("text_primary"), children: i }), a && (0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.Body3Regular, className: Op("shadow"), children: a })] }) }), e.comment && (0, Gt.jsx)(Ht.x, { tag: "span", type: qt.y.Body3Regular, className: Op("shadow"), children: e.comment })] }, `${e.type}${e.iata}${e.index}`) }))] }) }, qp = Zt().bind({ items: "s__tRGhJPLaoewnqaQe7eah" }), Lp = ({ sections: e, highlightedIndex: t, itemProps: s, menuProps: a, onItemClick: n }) => (0, Gt.jsx)("section", { "data-test-id": "autocomplete-menu", children: (0, Gt.jsx)("ul", { className: qp("items"), ...a(), children: e.map(((e, a) => { switch (e.type) { case Tp.Popular: return (0, Gt.jsx)(Bp, { items: e.items, highlightedIndex: t, itemProps: s, showTitle: !0, onClick: n }, `${e.type}${a}`); case Tp.Location: return (0, Gt.jsx)(Hp, { items: e.items, highlightedIndex: t, itemProps: s, onClick: n, showTitle: !1 }, `${e.type}${a}`); default: return null } })) }) }), Zp = Zt().bind({ input: "s__VHtgodtAQ6hhzEsb_XWQ", dropdown: "s__SJGGrjvG0uoSZHLPVypm" }), zp = ({ id: e, onItemClick: t, onItemSelect: s, onInputValueChange: a, hasFocus: n, selectedItem: i, sections: o, placeholder: r, error: l, onInputBlur: c, onInputFocus: d, dataTestId: u, inputTestId: m, inputClassName: p, containerClassName: h, innerClassName: f }) => { const { inputRef: g, handleInputBlur: y, handleInputFocus: v, handleStateChange: b } = ((e, t, s, a, n, i) => { const [o, r] = (0, U.useState)(null), l = (0, U.useRef)(null); (0, U.useEffect)((() => { let t = null; return e ? t = setTimeout((() => { l.current?.select() }), 50) : l.current?.blur(), () => { t && clearTimeout(t) } }), [e]); const c = (0, U.useCallback)((e => { r(e), s(e) }), [s]), d = (0, U.useCallback)(((e, t) => { i(e), n(t.inputValue) }), [n, i]), u = (0, U.useCallback)(((e, t) => { e.type !== At.ZP.stateChangeTypes.clickItem && e.type !== At.ZP.stateChangeTypes.keyDownEnter && e.type !== At.ZP.stateChangeTypes.touchEnd ? e.type === At.ZP.stateChangeTypes.changeInput && c(e.inputValue ?? "") : d(e.selectedItem ?? null, t) }), [c, d]), m = (0, U.useCallback)((t => () => { t.selectedItem || t.openMenu(), e || a() }), [e, a]), p = (0, U.useCallback)((s => () => { if (s.closeMenu(), e && n(s.inputValue), s.inputValue) { if (s.inputValue === s.selectedItem?.name) return; const e = t.filter((e => e.type !== Tp.Popular)).map((e => e.items)).flat(); let a = e.length ? e[0] : null; a || (a = s.selectedItem); const n = a?.name || s.inputValue; s.setState({ selectedItem: a, inputValue: n }), i(a) } else s.setState({ selectedItem: null }) }), [e, n, i, t]); return { downshiftInputValue: o, inputRef: l, handleInputFocus: m, handleInputBlur: p, handleStateChange: u } })(n, o, a, d, c, s); return (0, Gt.jsx)(At.ZP, { id: e, itemToString: Ap, selectedItem: i, onStateChange: b, children: e => (0, Gt.jsx)("div", { "data-test-id": u, className: h, children: (0, Gt.jsx)(Et.L, { visible: e.isOpen && o.length > 0, position: Pt.i.BottomRight, contentClassName: Zp("dropdown"), hideArrow: !0, content: (0, Gt.jsx)(Lp, { sections: o, highlightedIndex: e.highlightedIndex, itemProps: e.getItemProps, menuProps: e.getMenuProps, onItemClick: t }), children: (0, Gt.jsx)(Pp, { ...e.getInputProps(), forwardedRef: g, placeholder: r, value: e.inputValue ?? "", item: e.selectedItem, onBlur: y(e), onFocus: v(e), error: l, innerClassname: Zp("input", f), className: p, dataTestId: m }) }) }) }) }; var Gp = { root: "s__GpSk_XfJpGbqjw4j3rfV", form: "s__jsAh936o9JIJnVHyb6nw", destinationInput: "s__qDSWUQZOqjiXt3oW9aUK", datesStartInput: "s__RjsqEFayyGqDA0viSyCA", datesEndInput: "s__TVbjH0pMLi78oSX9V0SZ", guestsInput: "s__bluJLfbu5iATtiZfj6Q6", submit: "s__lgMHPo6TChwBq8yyQFXQ", withoutGuestsSelect: "s__M361xgNlLbu4K_bzidNn", field: "s__Qa1z2AZPA7I3HrkCGMPM", destination: "s__WFeJ1fgXmLxsScsnGN69", dates: "s__R51BxaAgtF4A5wpcwZLD", guests: "s__DtMmfjqpg0IyOK9H2v5H", dropdown: "s__oRySTKQisLlFVIG0bllx", "collapse-button": "s__oX13MmvkCNrLamLVMDPa", "collapse-button_hidden": "s__Wpn69BMRDGExmSdLizpA", "chevron-icon": "s__jlGcEBkCvNnY1ZMMJNnH" }; const Vp = Zt().bind(Gp), Up = ({ sections: e, selectedItem: t, error: s, onItemClick: a, onItemSelect: n, onInputValueChange: i, onInputFocus: o, onInputBlur: r, hasFocus: l = !1, isLoading: c = !1 }) => { const { t: d } = (0, es.useTranslation)("lib_forms_hotel_form"); return (0, Gt.jsx)(zp, { sections: e, selectedItem: t, onItemSelect: n, onInputValueChange: i, onItemClick: a, error: s, placeholder: d(c ? "destinationLoadingPlaceholder" : "destinationPlaceholder"), hasFocus: l, onInputBlur: r, onInputFocus: o, dataTestId: "hotel-autocomplete", inputTestId: "hotel-autocomplete-input", id: "hotel_autocomplete", containerClassName: Vp("field", "destination"), inputClassName: Vp("destinationInput") }) }; function Wp(e) { return e.iata + e.type } function Kp(e, t) { return { id: Wp(e), value: e.name, primary: e.name, secondary: e.countryName, comment: e.type === Mt.A.HotelCity ? t("autocompleteComment", { count: e.hotelsCount }) : void 0, type: e.type, category: e.type === Mt.A.Hotel ? t("hotelCategory") : void 0 } } var Jp; !function (e) { e.StartDate = "startDate", e.EndDate = "endDate" }(Jp || (Jp = {})); const Yp = (0, n.withFactory)({ sid: "cwajns", fn: () => (0, _e.s)((e => { const t = (0, n.createStore)(!1, { sid: "-5zwd4f" }), s = (0, n.createStore)(e, { sid: "g2i41w" }), a = (0, n.createEvent)({ sid: "-vsoqzg" }), i = (0, n.createEvent)({ sid: "-5di39n" }); return (0, n.sample)({ and: [{ clock: a, fn: () => !0, target: t }], or: { sid: "4nf7gv" } }), (0, n.sample)({ and: [{ clock: i, fn: () => !1, target: t }], or: { sid: "4qpz11" } }), { $value: t, $tabIndex: s, focus: a, blur: i } })) }), { $value: Xp, focus: Qp, blur: eh, $tabIndex: th } = (0, n.withFactory)({ sid: "-h1mbsv", fn: () => (0, _e.d)(Yp, 0) }), { $value: sh, focus: ah, blur: nh, $tabIndex: ih } = (0, n.withFactory)({ sid: "-gm836r", fn: () => (0, _e.d)(Yp, 0) }), { $value: oh, focus: rh, blur: lh, $tabIndex: ch } = (0, n.withFactory)({ sid: "-g6tukn", fn: () => (0, _e.d)(Yp, 0) }), { $value: dh, focus: uh, blur: mh, $tabIndex: ph } = (0, n.withFactory)({ sid: "-g2zaf4", fn: () => (0, _e.d)(Yp, 0) }), { $value: hh, focus: fh, blur: gh } = (0, n.withFactory)({ sid: "-fo4ued", fn: () => (0, _e.d)(Yp, 0) }), yh = Zt().bind(Gp), vh = ({ destination: e, checkInDate: t, checkOutDate: s, guests: a, autocompleteFetcher: n, sections: o, autocompleteDestinationField: r, onSubmit: l, onChangeDestination: c, onChangeCheckInDate: d, onChangeCheckOutDate: u, onChangeGuests: m, onHotelFormCollapsed: p, onDestinationInputChange: h = su(), isLoading: f = !1, isFormCollapsePossible: g = !1, isV2AutocompleteAvailable: y = !1, withoutGuestsSelect: v = !1 }) => { const { t: b } = (0, es.useTranslation)("lib_forms_hotel_form"), x = ((e, t) => (0, U.useMemo)((() => ({ from: e ?? void 0, to: t ?? void 0 })), [e, t]))(t, s), { isDestinationFieldFocused: _, isStartDateFieldFocused: C, isEndDateFieldFocused: w, onDestinationFocus: k, onCheckInFocus: S, onCheckOutFocus: D, onDestinationBlur: F, onCheckInBlur: j, onCheckOutBlur: N, destinationTabIndex: I, checkInTabIndex: M, checkOutTabIndex: T } = (() => { const { isDestinationFieldFocused: e, isStartDateFieldFocused: t, isEndDateFieldFocused: s, isGuestsFocused: a, destinationTabIndex: n, checkInTabIndex: o, checkOutTabIndex: r, onDestinationFocus: l, onCheckInFocus: c, onCheckOutFocus: d, onGuestsFocus: u, onDestinationBlur: m, onCheckInBlur: p, onCheckOutBlur: h, onGuestsBlur: f } = (0, i.useUnit)({ isDestinationFieldFocused: Xp, isStartDateFieldFocused: sh, isEndDateFieldFocused: oh, isGuestsFocused: dh, destinationTabIndex: th, checkInTabIndex: ih, checkOutTabIndex: ch, onDestinationFocus: Qp, onCheckInFocus: ah, onCheckOutFocus: rh, onGuestsFocus: uh, onDestinationBlur: eh, onCheckInBlur: nh, onCheckOutBlur: lh, onGuestsBlur: mh }); return { isDestinationFieldFocused: e, isStartDateFieldFocused: t, isEndDateFieldFocused: s, isGuestsFocused: a, destinationTabIndex: n, checkInTabIndex: o, checkOutTabIndex: r, onDestinationFocus: l, onCheckInFocus: c, onCheckOutFocus: d, onGuestsFocus: u, onDestinationBlur: m, onCheckInBlur: p, onCheckOutBlur: h, onGuestsBlur: f } })(), { errors: A, validateValues: E } = ((e, t, s, a, n) => { const { t: i } = (0, es.useTranslation)("lib_forms_hotel_form"), [o, r] = (0, U.useState)({}), l = (0, U.useMemo)((() => { let e = !1, t = !1; return !(0, up.Ab)(s) && s || (s?.from || (e = !0), s?.to || (t = !0)), { isDepartEmpty: e, isReturnEmpty: t } }), [s]), c = (0, U.useCallback)((() => { const t = {}; return e?.name || (t[jr.d.Destination] = i("errors.emptyDestination")), l.isDepartEmpty && (t[Jp.StartDate] = i("errors.emptyDepart")), l.isReturnEmpty && (t[Jp.EndDate] = i("errors.emptyReturn")), r(t), Object.keys(t).length < 1 }), [i, e, l]), d = (0, U.useCallback)((e => { const t = { ...o }; delete t[e], r(t) }), [o]); return (0, U.useEffect)((() => { o[jr.d.Destination] && (t || e?.name) && d(jr.d.Destination), !o[Jp.StartDate] || !a && l.isDepartEmpty || d(Jp.StartDate), !o[Jp.EndDate] || !n && l.isReturnEmpty || d(Jp.EndDate) }), [o, e, t, l, a, n, d]), { errors: o, validateValues: c } })(e, _, x, C, w), { fetcher: P, autocompletePlaces: $ } = function (e) { const { t: t } = (0, es.useTranslation)("lib_forms_hotel_form"), s = (0, U.useMemo)((() => new Map), []), a = (0, U.useMemo)((() => ({ fetch: async a => { const n = await e.fetch(a); s.clear(); for (const e of n) s.set(Wp(e), e); return n.map((e => Kp(e, t))) }, choice: async (a, n) => { const i = a.map((e => s.get(e.id))).filter((e => Boolean(e))), o = await e.choice(i, n); return o ? Kp(o, t) : null } })), [e, s, t]); return { fetcher: a, autocompletePlaces: s } }(n), R = ((e, t, s, a, n, i, o, r) => ({ handleDestinationChange: (0, U.useCallback)((e => { const s = e ? t.get(e?.id) : null; a(s ?? null) }), [a, t]), handleDateChange: (0, U.useCallback)((e => { (0, up.Ab)(e) ? (n(e.from ?? null), i(e.to ?? null)) : (n(null), i(null)) }), [n, i]), handleGuestAdd: (0, U.useCallback)((t => { const s = t === Ne.gM.Children ? { ...e, children: e.children + 1, childAges: [...e.childAges, 7] } : { ...e, adults: e.adults + 1 }; o(s) }), [e, o]), handleGuestRemove: (0, U.useCallback)((t => { const s = t === Ne.gM.Children ? { ...e, children: Math.max(e.children - 1, 0), childAges: e.childAges.slice(0, -1) } : { ...e, adults: Math.max(e.adults - 1, 1) }; o(s) }), [e, o]), handleChildAgeChange: (0, U.useCallback)(((t, s) => { const a = [...e.childAges]; a[s] = t, o({ ...e, childAges: a }) }), [e, o]), handleSubmit: (0, U.useCallback)((e => { e.preventDefault(), s() && r() }), [s, r]) }))(a, $, E, c, d, u, m, l), B = (e => { const { t: t } = (0, es.useTranslation)("lib_forms_hotel_form"); return (0, U.useMemo)((() => e ? Kp(e, t) : null), [e, t]) })(e); return (0, Gt.jsxs)("div", { className: yh("root"), children: [(0, Gt.jsxs)("form", { className: yh("form", { withoutGuestsSelect: v }), "data-test-id": "hotel-form", children: [(0, Gt.jsx)("div", { className: yh("destination"), children: y ? (0, Gt.jsx)(Up, { sections: o || [], selectedItem: r, onInputFocus: k, onInputBlur: F, onItemSelect: c, onInputValueChange: h, hasFocus: _ }) : (0, Gt.jsx)(Qm, { value: B, onItemSelect: R.handleDestinationChange, fetcher: P, containerClassName: yh("field"), dropdownClassName: yh("dropdown"), inputClassName: yh("destinationInput"), onFocus: k, onBlur: F, isFocused: _, isLoading: f, tabIndex: I, error: A.destination ?? void 0 }) }), (0, Gt.jsx)(xp, { date: x, className: yh("dates"), startClassName: yh("field", "datesStartInput"), endClassName: yh("field", "datesEndInput"), isStartDateFocused: C, isEndDateFocused: w, onStartDateFocus: S, onEndDateFocus: D, onStartDateBlur: j, onEndDateBlur: N, startDateTabIndex: M, endDateTabIndex: T, errors: A, onChange: R.handleDateChange }), !v && (0, Gt.jsx)("div", { className: yh("field", "guests"), children: (0, Gt.jsx)(Mp, { guests: a, title: b("guests.header"), inputClassName: yh("guestsInput"), onGuestsAdd: R.handleGuestAdd, onGuestsRemove: R.handleGuestRemove, onChildAgeChange: R.handleChildAgeChange }) }), (0, Gt.jsx)(kr, { className: yh("submit"), onClick: R.handleSubmit, children: b("submitButtonText") })] }), (0, Gt.jsx)(_r.z, { mod: Cr.Ly.Custom, shape: Cr.jL.Round, priority: Cr.Ji.Secondary, className: yh("collapse-button", { "collapse-button_hidden": !g }), onClick: p, children: (0, Gt.jsx)(Ym.I, { className: yh("chevron-icon") }) })] }) }; var bh = s(20381), xh = s(30048), _h = s(19722), Ch = s(99186); let wh; !function (e) { e.Hotels = "hotels", e.Cities = "cities" }(wh || (wh = {})); const kh = { [wh.Hotels]: e => e.map((e => ({ id: e.id, gateId: e.gate_id, iata: e.id, name: e.name, type: e.type ?? Mt.A.Hotel, regionId: e.region_id }))), [wh.Cities]: e => e.map((e => ({ id: e.id, gateId: e.gate_id, iata: e.id, name: e.name, type: e.type ?? Mt.A.City, countryName: e.country }))) }, Sh = ({ blocks: e }) => e.filter((({ id: e }) => ["hotels", "regions", "popular"].includes(e))).map((({ id: e, items: t }) => "hotels" === e ? t.map((e => { const t = e.search_params; return { id: t.id, gateId: t.gate_id, iata: t.id, name: t.title, type: t.type ?? Mt.A.Hotel } })) : t.map((e => { const t = e.search_params; return { id: t.id, gateId: t.gate_id, iata: t.id, type: t.type ?? Mt.A.City, name: e.title, countryName: e.subtitle } })))).flat(), { $language: Dh } = Ch.l.outputs, { $localeDeprecated: Fh } = ml.z.outputs, { $market: jh } = Ee.D.outputs, { $brand: Nh } = Ce.U.outputs, Ih = (0, n.combine)({ and: [{ locale: Fh, market: jh, brand: Nh }, ({ locale: e, brand: t, market: s }) => ({ fetch: async a => { if (!a || 0 === a.trim().length) return []; const n = { locale: e, market: s, term: a, brand: t }; let i; try { const { data: e } = await dl().get(Te.B.outputs.fillApiHost_IN_DANGEROUS_CLIENT_SIDE_ONLY_WAY(Ae.Nv`${$e.H.SUGGEST_HOST}/hotels/v1/suggest?${(0, ul.stringify)(n)}`, { escape: !1 })); i = (e => { const { groups_order: t, groups: s } = e; return t.reduce(((e, t) => { const a = kh[t], n = s[t]; if (!a || !n) return e; const i = a(n); return [...e, ...i] }), []) })(e) } catch (e) { i = [] } return i }, choice: async e => e[0] })], or: { sid: "7fleau" } }), Mh = Dh.map((e => ({ fetch: async t => { if (!t || 0 === t.trim().length) return []; const s = { lang: e, limit: 3, query: t }; let a; try { const { data: e } = await dl().get(Te.B.outputs.fillApiHost_IN_DANGEROUS_CLIENT_SIDE_ONLY_WAY(`${$e.H.HOTELLOOK_ENGINE}/api/v2/lookup.json?${(0, ul.stringify)(s)}`)); a = (e => { const { hotels: t, locations: s } = e.results, a = t.map((e => ({ iata: e.id, name: e.label, type: Mt.A.Hotel, cityName: e.locationName }))); return [...s.map((e => ({ iata: e.iata[0] ?? String(e.id), name: e.cityName, hotelsCount: Number(e.hotelsCount), countryIata: e.countryCode, countryName: e.countryName, cityName: e.cityName, type: Mt.A.HotelCity, locationId: e.id }))), ...a] })(e) } catch (e) { a = [] } return a }, choice: async e => e[0] }))), { $destination: Th, $checkInDate: Ah, $checkOutDate: Eh, $guests: Ph } = Km.c.outputs, { dialog: $h } = bh.i.inputs, { translated: Rh, $t: Bh } = kt.J.outputs, { getIsHotelFormFilled: Oh, getIsHotelFormDatesIntervalValid: Hh, requestHotelSearchStart: qh, requestHotelSearchStartNative: Lh } = nr.K.inputs, { $isNativeHotelsResultsExpEnabled: Zh, $isHotelsMapResultsSyncExpEnabled: zh } = Jm.n.outputs, { $isHotelRawFormPossible: Gh } = xh.T.outputs, { formCollapsed: Vh } = xh.T.inputs, { $isHotelRawFormPossible: Uh } = _h.T.outputs, { formCollapsed: Wh } = _h.T.inputs, Kh = (0, n.combine)({ and: [{ isNativeHotelsResultsExpEnabled: Zh, hotelAutocompleteFetcher: Ih, hotellookAutocompleteFetcher: Mh }, ({ isNativeHotelsResultsExpEnabled: e, hotelAutocompleteFetcher: t, hotellookAutocompleteFetcher: s }) => e ? t : s], or: { sid: "ifj1pl" } }), Jh = (0, n.withFactory)({ sid: "mwwm4r", fn: () => (0, ht.w)(zh, Gh, Uh) }), Yh = (0, n.createEvent)({ sid: "whqsq6" }), Xh = (0, n.createEvent)({ sid: "-fhp2lo" }), Qh = (0, n.createEvent)({ sid: "-9rqbxj" }), ef = (0, n.createEvent)({ sid: "mdwdgv" }), tf = (0, n.createEvent)({ sid: "-p9114u" }), sf = (0, n.combine)({ and: [{ checkInDate: Ah, checkOutDate: Eh }, Hh], or: { sid: "xwpxaw" } }); (0, n.sample)({ and: [{ clock: Qh, source: { destination: Th, checkInDate: Ah, checkOutDate: Eh, guests: Ph }, filter: Oh, fn: e => ({ hotelFormState: e }), target: ef }], or: { sid: "w4vnan" } }), (0, n.withFactory)({ sid: "wnkngx", fn: () => (0, pt.s)({ source: ef, if: sf, then: tf, else: Xh }) }), (0, n.withFactory)({ sid: "-usktc0", fn: () => (0, pt.s)({ source: tf, if: Zh, then: Lh, else: qh }) }), (0, n.withFactory)({ sid: "-uoq96h", fn: () => (0, pt.s)({ source: Yh, if: zh, then: Vh, else: Wh }) }), $h({ clock: Xh, title: Rh("lib_forms_hotel_form:tripDurationErrorPopup.title"), message: Rh("lib_forms_hotel_form:tripDurationErrorPopup.text"), buttons: { source: Bh, fn: (e, t) => ({ entries: [{ priority: "Primary", label: t("lib_forms_hotel_form:tripDurationErrorPopup.button") }], vertical: !0 }) } }); const af = { inputs: { hotelFormSubmitted: Qh, hotelFormCollapsed: Yh }, outputs: { $autocompleteFetcher: Kh, $isFormCollapsePossible: Jh } }; var nf = s(63246); const { $isClient: of } = nf.y.outputs, rf = Te.B.outputs.urlWithApiHost(Ae.Nv`${$e.H.SUGGEST_HOST}/hotels/v2/suggest`), lf = Te.B.outputs.urlWithApiHost(Ae.Nv`${$e.H.SUGGEST_HOST}/hotels/v2/popular`), cf = (0, n.withFactory)({ sid: "-4cii81", fn: () => (0, Ie.s5)({ name: "hotels_autocomplete", enabled: of, params: (0, n.withFactory)({ sid: "-2r3pli", fn: () => (0, Ie.t6)() }), request: { method: "GET", url: { source: rf, fn: (e, t) => `${t}?${(0, ul.stringify)(e)}` } }, response: { contract: Ie.ac, mapData: e => Sh(e.result) } }) }), df = (0, n.withFactory)({ sid: "mr41oa", fn: () => (0, Ie.s5)({ name: "hotels_popular", enabled: of, params: (0, n.withFactory)({ sid: "q4n8gd", fn: () => (0, Ie.t6)() }), request: { method: "GET", url: { source: lf, fn: (e, t) => `${t}?${(0, ul.stringify)(e)}` } }, response: { contract: Ie.ac, mapData: e => Sh(e.result) } }) }), { $data: uf, start: mf, finished: pf } = cf, { $data: hf, start: ff, finished: gf } = df; function yf({ popular: e, locations: t }) { const s = [], a = t?.length ?? 0; return t?.length && s.push({ type: Tp.Location, items: t.map(((e, t) => ({ ...e, name: e.cityName ?? e.name, iata: e.iata, index: t }))) }), e?.length && s.push({ type: Tp.Popular, items: e.map(((e, t) => ({ ...e, name: e.cityName ?? e.name, iata: e.iata, index: a + t }))) }), s } const { $localeDeprecated: vf } = ml.z.outputs, { $market: bf } = Ee.D.outputs, { $brand: xf } = Ce.U.outputs, { $isHotelFormActive: _f } = p.B.outputs, { $destination: Cf } = Km.c.outputs, { changeDestination: wf } = Km.c.inputs, { $isHotelsAutocompleteV2ExpFlagEnabled: kf } = Jm.n.outputs, Sf = (0, n.createEvent)({ sid: "m8hd2" }), Df = (0, n.createEvent)({ sid: "rduwul" }), Ff = (0, n.createStore)("", { sid: "-j43v2t" }); (0, n.sample)({ and: [{ clock: Df, target: Ff }], or: { sid: "-ws7amn" } }); const jf = (0, n.combine)({ and: [Cf, e => e || null], or: { sid: "-7mqwd6" } }); (0, n.sample)({ and: [{ clock: Df, source: { destination: jf, locale: vf, brand: xf, market: bf }, filter: ({ destination: e }, t) => !Fr()(t.trim()) && e?.name !== t.trim(), fn: ({ locale: e, market: t, brand: s }, a) => ({ term: a.trim(), locale: e, market: t, brand: s }), target: mf }], or: { sid: "-vxylzs" } }); const Nf = pf.success, If = (0, n.createStore)([], { sid: "-xtev4" }), Mf = (0, n.createEvent)({ sid: "-qb3wkh" }), Tf = (0, n.createEvent)({ sid: "-e9ikyi" }); (0, n.sample)({ and: [{ clock: [_f.updates, Sf], source: { popular: hf, locale: vf, isHotelFormActive: _f }, target: ff }], or: { sid: "-ui9y7u" } }), (0, n.sample)({ and: [{ clock: Tf, source: { locations: uf, inputValue: Ff }, filter: ({ inputValue: e }) => !Fr()(e), fn: ({ locations: e }) => yf({ locations: e }), target: If }], or: { sid: "-tzky1k" } }), (0, n.sample)({ and: [{ clock: Nf, target: Tf }], or: { sid: "fqgjn3" } }), (0, n.sample)({ and: [{ clock: [Qp, Df], source: { inputValue: Ff }, filter: ({ inputValue: e }) => Fr()(e), target: Mf }], or: { sid: "g6ekuk" } }), (0, n.sample)({ and: [{ clock: Mf, source: { popular: hf, inputValue: Ff }, filter: ({ inputValue: e }) => Fr()(e), fn: ({ popular: e }) => yf({ popular: e }), target: If }], or: { sid: "gmwene" } }), (0, n.sample)({ and: [{ clock: eh, source: kf, filter: (e, t) => Fr()(t) && e, fn: () => null, target: wf }], or: { sid: "hish2c" } }); var Af = s(39018), Ef = s(92309); const { sendEvent: Pf } = Af.n.inputs, { requestHotelSearchStart: $f, requestHotelSearchStartNative: Rf } = nr.K.inputs, { createReporter: Bf } = je.I.inputs, { hotelFormShowed: Of } = Ef.r.outputs, { $deviceSearchId: Hf } = nr.K.outputs, { $isHotelFormActive: qf } = p.B.outputs, Lf = qf; Bf({ data: { service: Fe.t6.Serp, category: "hotels" }, payload: { device_search_id: Hf } })({ clock: (0, n.sample)({ and: [{ clock: Of, filter: Lf }], or: { sid: "adc1nw" } }), data: { label: "search_page", action: "showed" }, payload: ({ hotelFormSource: e, searchId: t }, { payload: s }) => ({ search_page_source: e, search_id: t, ...s }) }), (0, n.sample)({ and: [{ clock: [$f, Rf], fn: ({ hotelFormState: e }) => { const { destination: t, guests: s, checkInDate: a, checkOutDate: n } = e; return { type: "start_search_hotel", location_id: t.iata, psgr: s.adults, children: s.children, period: (0, Ba.Z)(n, a) } }, target: Pf }], or: { sid: "-dxfusn" } }); const { $destination: Zf, $guests: zf, $checkInDate: Gf, $checkOutDate: Vf } = Km.c.outputs, { changeDestination: Uf, changeGuests: Wf, changeCheckInDate: Kf, changeCheckOutDate: Jf } = Km.c.inputs, { $autocompleteFetcher: Yf, $isFormCollapsePossible: Xf } = af.outputs, { hotelFormSubmitted: Qf, hotelFormCollapsed: eg } = af.inputs, { $isHotelsAutocompleteV2ExpFlagEnabled: tg } = Jm.n.outputs, sg = (0, n.withFactory)({ sid: "-e24e4t", fn: () => (0, xe.SC)({ bind: { destination: Zf, checkInDate: Gf, checkOutDate: Vf, guests: zf, sections: If, autocompleteDestinationField: jf, onChangeDestination: Uf, onDestinationInputChange: Df, onChangeCheckInDate: Kf, onChangeCheckOutDate: Jf, onChangeGuests: Wf, onSubmit: Qf, onHotelFormCollapsed: eg, autocompleteFetcher: Yf, isCollapsed: z, isFormCollapsePossible: Xf, isV2AutocompleteAvailable: tg }, view: vh }) }); var ag = s(69569), ng = s(62221), ig = s(23446), og = s(23493), rg = s.n(og); const lg = parseInt("100px", 10), cg = parseInt("110px", 10), dg = ({ directions: e, onEdit: t }) => { const { t: s } = (0, es.useTranslation)("lib_forms_avia_form"), a = (0, i.useUnit)(Ce.U.outputs.$isWayAwayBrand), { ref: n, width: o } = (0, ng.y)(), r = (0, U.useRef)(null), l = (0, U.useRef)(null), { hiddenCount: c, handleContentOverflow: d } = function (e, t) { const [s, a] = (0, U.useState)(t - 1), n = (0, U.useCallback)((() => { if (!e) return; const s = e - lg, n = Math.floor(s / cg); a(Math.max(t - n, 0)) }), [e, t]); return (0, U.useEffect)((() => { const e = rg()(n, 500); return window.addEventListener("resize", e), () => { window.removeEventListener("resize", e) } }), [n]), { hiddenCount: s, handleContentOverflow: n } }(o, e.length); (0, U.useEffect)((() => { o && d() }), [o, d]); const u = (0, U.useCallback)((e => { const s = e.target; let a = "collapsed-plate"; (r.current?.contains(s) || l.current?.contains(s)) && (a = "edit-button"), t(a) }), [t]), m = c ? e.slice(0, -c) : e, p = (0, cs.d)("ts_day_month"); return (0, Gt.jsxs)("div", { className: "s__dnDTYpdVXFKbaBQjHY12", "data-test-id": "collapsed-form", children: [(0, Gt.jsxs)("button", { ref: n, className: "s__RdhcllNhvO8KtfNan9Hk", onClick: u, children: [(0, Gt.jsx)("ol", { className: "s__DJC_rd0wMe5kgXenbY5o", children: m.map((({ destination: e, origin: t, date: s }, a) => (0, Gt.jsxs)("li", { className: "s__JFrPK6HAFODScvZDKWh5", "data-test-id": `collapsed-direction-${a + 1}`, children: [(0, Gt.jsxs)(Ht.x, { className: "s___RhZoxqSFfqpJbkLQK1l", type: qt.y.Body3Semi, testId: "direction-iatas", children: [t.iata, " – ", e.iata] }), (0, Gt.jsx)(Ht.x, { className: "s__RogCl1CXEeKL2wtUO5bG", type: qt.y.CaptionRegular, tag: "time", dateTime: (0, ig.x)("yyyy-MM-dd", s), testId: `date-${(0, ig.x)("yyyy-MM-dd", s)}`, children: p(s) })] }, `${t.iata}-${e.iata}-${s}`))) }), Boolean(c) && (0, Gt.jsxs)(Ht.x, { className: "s__bhdpBQOzGEYkXurVejMP", type: qt.y.Body2Semi, children: ["+ ", c] }), (0, Gt.jsx)(ag.A, { ref: l, className: "s__yyfkIlG4_A3CYJ9u9vqA", "aria-label": s("editButtonText") })] }), (0, Gt.jsx)(_r.z, { ref: r, inline: !0, className: "s__Xo6dCpcCrGJUQmpA_Ql2", mod: a ? Cr.Ly.Default : Cr.Ly.Orange, size: Cr.qE.M, onClick: u, children: s("editButtonText") })] }) }, ug = (0, n.withFactory)({ sid: "wjrq0n", fn: () => (0, xe.SC)({ bind: { directions: de, onEdit: pe.prepend((() => null)) }, view: dg }) }); const { Tabbar: mg } = K.n.containers, pg = (0, U.forwardRef)((({ showFormTabs: e, isRawForm: t, isAviaFormActive: s, isHotelFormActive: a, isComplexSearch: n, isSimpleSearch: o, isCollapsed: r, isSearchPage: l, isMainPage: c, isMapPage: d, isExploreFlow: u, isNewTabbarEnabled: m, isNewTabbarInForm: p, isHotelsSearchPage: h, isHotelsMapPage: f }, g) => ((0, i.useGate)(H), t ? (0, Gt.jsx)("div", { className: "s__mHbkxVBPBe8NdRISMwo_", ref: g, children: (0, Gt.jsx)(ug, {}) }) : (0, Gt.jsx)("div", { ref: g, className: ve()("s__FKt_57Z3lbn26yIqnsch", r && "s__CeWFOZpDuqmnqsQ_NRd0", l && "s__uT9BcFRE5Ojha9EkAMTe", (h || f) && "s__p6willeIPoJY3Ok5EAdl", c && "s__gBXvWwOiyrcJ_iHhUhbL", d && "s__VNNYl_gvuyt_EgY96pPN", !u && "s__ARHsZuFmUg0yaANQTHed"), children: (0, Gt.jsxs)("div", { className: "s__POufPj1C_k_Fu65TDuPk", children: [e && (0, Gt.jsxs)("div", { className: ve()("s__axUNR8b_2gLsRlKwbw7k", m && p && "s__vCSSWSWy3UNTA9Kwvj0P"), children: [m && p && (0, Gt.jsx)(mg, { isCompact: !1 }), !m && (0, Gt.jsx)(be.H, {})] }), s && o && (0, Gt.jsx)(Eu, {}), s && n && (0, Gt.jsx)(Wm, {}), a && (0, Gt.jsx)(sg, {})] }) })))); pg.displayName = "FormView"; const { $isAviaFormActive: hg, $isHotelFormActive: fg } = p.B.outputs, { $isComplexSearch: gg, $isSimpleSearch: yg } = W.i.outputs, { pages: vg, matchPage: bg } = m.$.outputs, { $isNewTabbarEnabled: xg, $isNewTabbarInForm: _g } = K.n.outputs, { $exploreFlowEnabled: Cg } = _.l.outputs, wg = bg(vg.SearchPage).$isOpen, kg = bg(vg.MainPage).$isOpen, Sg = bg(vg.MapPage).$isOpen, Dg = bg(vg.HotelsPage).$isOpen, Fg = bg(vg.HotelsMapPage).$isOpen, jg = (0, U.forwardRef)(((e, t) => { const s = (0, i.useUnit)({ showFormTabs: G, isRawForm: fe, isAviaFormActive: hg, isHotelFormActive: fg, isComplexSearch: gg, isSimpleSearch: yg, isCollapsed: z, isSearchPage: wg, isMainPage: kg, isMapPage: Sg, isHotelsSearchPage: Dg, isHotelsMapPage: Fg, isExploreFlow: Cg, isNewTabbarEnabled: xg, isNewTabbarInForm: _g }); return (0, Gt.jsx)(pg, { ...s, ref: t }) })); jg.displayName = "FormContainer"; const Ng = (0, a.G6)({ importMetaUrl: "file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/form/index.ts", lifecycle: { start: V }, api: { containers: { FormContainer: jg } } }) }, 72105: function (e, t, s) { "use strict"; s.d(t, { H: function () { return we }, Z: function () { return ke } }); var a = s(30091), n = s(98116), i = s(54448), o = s(72675), r = s(82672), l = s(14210); const { outputs: c } = r.$, { matchPage: d, pages: u } = c, m = (0, n.withFactory)({ sid: "-cmmjj7", fn: () => (0, i.or)(d(u.MainPage).$isOpen, d(u.GuidesPage).$isOpen) }), p = { outputs: { $shouldShowGuidesButton: (0, n.withFactory)({ sid: "-o77yac", fn: () => (0, o.x)(l.qF.outputs.$isGuidesButtonEnabled, m) }) } }; var h = s(35529), f = s(47047), g = s(38032), y = s(78364), v = s(11763), b = s(25628), x = s(52247), _ = s(10924), C = s(20611), w = s(35712); const { $activeForm: k } = v.B.outputs, { changeActiveForm: S } = v.B.inputs, { link: D } = x.x.outputs, { matchPage: F, pages: j } = r.$.outputs, { createReporter: N } = _.I.inputs, { removeQueryParams: I } = C.D.inputs, { $isHotelsResultsSearchFormExpEnabled: M } = w.n.outputs, T = (0, n.withFactory)({ sid: "mekyyx", fn: () => (0, f.d)((() => y.f.inputs.createFlag({ name: "avs-feat-linksAboveForm", contract: (0, h.Record)({ business: h.String.optional() }), defaultValue: {} }))) }), A = (0, n.createStore)(["avia", "hotel"], { sid: "-jkl4xv" }), E = (0, n.createEvent)({ sid: "eckfjc" }), P = (0, n.createEvent)({ sid: "2horln" }), $ = T.$value.map((e => Object.entries(e ?? {}).map((([e, t]) => "business" === e ? { name: e, link: `${t}&utm_medium=button` } : { name: e, link: t })))), R = (0, n.createEvent)({ sid: "-erqeml" }), B = (0, n.createStore)(!1, { sid: "53f9y9" }).on(R, ((e, t) => t)), O = (0, n.createStore)({ activeTab: "avia", prevActiveTab: null }, { sid: "2qj3sq" }).on(k, ((e, t) => ({ activeTab: t, prevActiveTab: e.activeTab }))), H = (0, n.createEffect)((e => { (0, b.IG)(null, (() => { document.body.classList.toggle("is-sticky", e) })) }), { sid: "kufzn0" }), q = F(j.MainPage).$isOpen, L = F(j.SearchPage).$isOpen, Z = F(j.MapPage).$isOpen, z = F(j.GuidesPage).$isOpen, G = F(j.HotelsPage).$isOpen, V = F(j.HotelsMapPage).$isOpen, U = (0, n.createEvent)({ sid: "-jha1a6" }), W = D({ path: "/guides?source=tab" }), K = D({ path: "/" }), J = D({ path: "/#hotel" }), Y = (0, n.withFactory)({ sid: "-fpjnqw", fn: () => (0, i.or)(q, L, Z, (0, n.withFactory)({ sid: "pxggyr", fn: () => (0, o.x)(G, M) }), (0, n.withFactory)({ sid: "py09k4", fn: () => (0, o.x)(V, M) })) }); (0, n.sample)({ and: [{ source: E, target: S }], or: { sid: "-6s4vjh" } }); const X = N({ data: { category: "tabbar", action: "clicked" }, payload: { userEvent: !0 } }); X({ clock: E, data: (e, { data: t }) => ({ ...t, label: "avia" === e ? "flights" : "hotels" }) }), X({ clock: P, data: { label: "guides" } }), (0, n.sample)({ and: [{ clock: U, source: B, filter: (e, { isSticky: t }) => e && t, fn: () => !0, target: H }], or: { sid: "-5cg7rj" } }), (0, n.sample)({ and: [{ clock: U, filter: ({ isSticky: e }) => !e, fn: () => !1, target: H }], or: { sid: "-581v0n" } }), (0, n.sample)({ and: [{ clock: B.updates, filter: (0, n.withFactory)({ sid: "-lfzt1w", fn: () => (0, g.f)(B) }), fn: () => !1, target: H }], or: { sid: "-4snmej" } }), (0, n.sample)({ and: [{ clock: E, filter: e => "avia" === e, fn: () => ({ keys: ["source", "search_id"], type: "replace" }), target: I }], or: { sid: "-4d9dsf" } }), (0, n.sample)({ and: [{ clock: E, target: S }], or: { sid: "-3w7re8" } }); const Q = { outputs: { formTabs: A, externalLinks: $, activeTabs: O, areTabsVisible: B, guidesMainButtonLink: W, isPageWithForm: Y, aviaFormTabLink: K, hotelFormTabLink: J, isGuidesPage: z }, inputs: { changeActiveTab: E, setTabsVisibility: R, toggleTabsStickyClassname: U, onGuidesTabClicked: P } }; var ee = s(67294), te = s(4190), se = s(97650), ae = s(94184), ne = s.n(ae), ie = s(86064), oe = s(38387), re = s(28225), le = s(49963), ce = s(44619), de = s(16464), ue = { guides: "s__Y_otfVIaEDr3XLw0WSPv", item: "s__mfigXqoOZ3XJbBXBbbZU", business: "s__KaAUY2NQJ1XNM_WrE97H", business_short: "s__uZSuS7szzZ71QRmvYxaq", avia: "s__JZCq3JC0ThxZLmBOZayL", hotel: "s__nOfmoPLt0T6F7tFHKA35", compact: "s__lrhG0jI1mDQfpZp8Oej_", link: "s__gliJeBMTvyJMWoL2AY41", isActive: "s__fQYboBQNlSt15CIIxpI_", guidesLink: "s__KJpKKJWFCHEV2iLdr8_5", formTabs: "s__xS1dg8kDmDEsMz6vPC6D" }, me = s(85893); const pe = ({ name: e, link: t }) => { const { t: s } = (0, re.useTranslation)("component_external_link"); return (0, me.jsx)("li", { className: ne()(ue.item, ue[e]), children: (0, me.jsxs)("a", { className: ue.link, href: t, target: "_blank", rel: "nofollow noreferrer", "data-test-id": "form_tabs_outer_link", children: [(0, me.jsx)(le.x, { type: ce.y.Body3Semi, children: s(e) }), (0, me.jsx)(de.i, { width: 12, height: 12 })] }) }) }, he = (0, ee.memo)(pe), fe = ({ isActive: e, onTabClick: t, tabName: s, href: a }) => { const { t: n } = (0, re.useTranslation)("component_form_tab"), i = (0, ee.useCallback)((e => { t(s, e) }), [t, s]); return (0, me.jsx)("li", { className: ne()(ue.item, ue[s], { [ue.isActive]: e }), "data-placement-target": `tab-${s}`, children: (0, me.jsx)("a", { className: ne()(ue.link, { [ue.isActive]: e }), href: a, onClick: i, "data-test-id": `tab-${s}`, children: (0, me.jsx)(le.x, { type: ce.y.Body3Semi, children: n(s) }) }) }) }, ge = (0, ee.memo)(fe); var ye = s(51057), ve = s(85394), be = s(72914); const xe = ({ compactView: e, link: t, isActive: s, onTabClick: a }) => { const { t: n } = (0, re.useTranslation)("component_guides_list_button"), { isMobile: i, navigateTo: o } = (0, te.useUnit)({ isMobile: oe.l.outputs.$isOnlyMobile, navigateTo: C.D.inputs.navigateTo }), r = (0, ve.c)([ie.U.between(ye.Ii.medium, ye.Ii.max, "desktop_from_medium_to_max"), ie.U.greaterThan(ye.Ii.max, "desktop_max")])?.is("desktop_max"), l = (0, ee.useCallback)((() => { s ? o({ pathname: t, type: "push" }) : a() }), [a, t, o, s]); return (0, me.jsx)("li", { id: e ? void 0 : "guides-cities-button", className: ne()(ue.item, ue.guides, { [ue.isActive]: s }), onClick: l, children: (0, me.jsxs)("a", { className: ne()(ue.link, ue.guidesLink, ue.guides, { [ue.isActive]: s }), rel: "nofollow noreferrer", href: s ? void 0 : t, children: [(0, me.jsx)(be.t, {}), (0, me.jsx)(le.x, { type: ce.y.Body3Semi, children: n(i || e && !r ? "guides_short" : "guides") })] }) }) }, _e = (0, ee.memo)(xe), Ce = e => { const { activeTabs: t, externalLinks: s, formTabs: a, breakpoint: n, shouldShowGuidesButton: i, isPageWithForm: o, setTabsVisibility: r, changeActiveTab: l, hotelFormTabLink: c, aviaFormTabLink: d, guidesMainButtonLink: u, isGuidesPage: m, onGuidesTabClicked: h } = (0, te.useUnit)({ ...Q.outputs, ...Q.inputs, shouldShowGuidesButton: p.outputs.$shouldShowGuidesButton, breakpoint: oe.l.outputs.$currentBreakpoint }), f = (0, ee.useMemo)((() => Boolean(n?.is([ie.L.Mobile, ie.L.Tablet]))), [n]), { ref: g, entry: y } = (0, se.YD)({ threshold: .5 }); (0, ee.useEffect)((() => { r(!!y?.rootBounds?.height) }), [y, r]); const { activeTab: v, prevActiveTab: b } = t, x = (0, ee.useCallback)(((e, t) => { if (o) { t.preventDefault(), l(e); try { window.scroll({ top: 0, left: 0, behavior: "smooth" }) } catch (e) { } } }), [l, o]), _ = (0, ee.useCallback)((e => ({ avia: o ? `#${e}` : d, hotel: o ? `#${e}` : c }[e])), [d, c, o]); return (0, ee.useEffect)((() => { var e; v !== b && (b && (e = `page--${b}`, document.body.classList.remove(e)), (e => { document.body.classList.add(e) })(`page--${v}`)) }), [v, b]), (0, me.jsxs)("ul", { ref: g, className: ne()(ue.formTabs, e?.compactView && ue.compact), children: [a && a.map((e => (0, me.jsx)(ge, { tabName: e, href: _(e), isActive: o && e === v, onTabClick: x }, e))), i && (0, me.jsx)(_e, { compactView: e?.compactView, link: u, isActive: m, onTabClick: h }), s && s.map((({ name: t, link: s }) => "business" === t ? (0, me.jsx)(he, { name: f && e?.compactView ? "business_short" : "business", link: s }, t) : (0, me.jsx)(he, { name: t, link: s }, t)))] }) }, we = (0, ee.memo)(Ce), ke = (0, a.G6)({ importMetaUrl: "file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/form_tabs/index.ts", api: { outputs: { ...p.outputs, ...Q.outputs }, inputs: Q.inputs } }) }, 66170: function (e, t, s) { "use strict"; s.d(t, { p: function () { return I } }); var a = s(30091), n = s(98116), i = s(87722), o = s(16243), r = s(82672), l = s(11763), c = s(47420), d = s(82203), u = s(77195); const { matchPage: m, pages: p } = r.$.outputs, { $isAviaFormActive: h } = l.B.outputs, { toAviaForm: f } = l.B.inputs, { $isSimpleSearch: g, $origin: y, $destination: v, flexible: b, period: x, $dateCase: _ } = c.i.outputs, { toSimpleSearch: C, changeOrigin: w, changeDestination: k, flexible: { changeFlexibleDates: S }, period: { changePeriodDates: D } } = c.i.inputs, F = m(p.MainPage).$isOpen, j = (0, n.createEvent)({ sid: "5vmdr1" }), N = (0, o.J)({ parameters: { isMainPage: (0, o.C)({ read: F }), origin: (0, o.C)({ read: y, write: w }), destination: (0, o.C)({ read: v, write: k }), aviaFormIsActive: (0, o.C)({ read: h, write: f }), searchModeIsSimple: (0, o.C)({ read: g, write: C }), flexibleDate: (0, o.C)({ read: b.$flexibleDates, write: S }), periodDate: (0, o.C)({ read: x.$periodDates, write: D }), dateCase: (0, o.C)({ read: _ }) }, checkActive: ({ isMainPage: e, origin: t, destination: s, aviaFormIsActive: a, searchModeIsSimple: n, dateCase: o }) => Boolean(e && a && n && t && s && (0, i.bx)(t, s) && (o === d.M4.Flexible || o === d.M4.Period)), beforeOpen: (e, t) => ({ origin: t.origin, destination: e.destination, flexibleDate: e.dates.flexible ?? { departRange: { from: null, to: null }, returnRange: { from: null, to: null } }, periodDate: e.dates.period ?? { range: { from: null, to: null }, duration: null }, aviaFormIsActive: !0, searchModeIsSimple: !0, isMainPage: !0, isGuidesPage: !1, dateCase: e.dates.flexible ? d.M4.Flexible : d.M4.Period }), initialized: j }); (0, n.sample)({ and: [{ clock: N.opened, target: u.H }], or: { sid: "rj07e8" } }); const I = (0, a.G6)({ importMetaUrl: "file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/screen_flexible_prices_results/index.ts", lifecycle: { start: j }, api: { outputs: { flexiblePricesResultsScreen: N } } }) }, 40038: function (e, t, s) { "use strict"; s.d(t, { L: function () { return z } }); var a = s(30091), n = s(98116), i = s(38032), o = s(72675), r = s(87722), l = s(40254), c = s(16243), d = s(82672), u = s(11763), m = s(47420), p = s(20611), h = s(82203), f = s(83781), g = s(77195), y = s(80094), v = s(43175), b = s(78194), x = s(38387); const { $searchParams: _ } = p.D.outputs, { navigateTo: C } = p.D.inputs, { matchPage: w, pages: k } = d.$.outputs, { $isAviaFormActive: S } = u.B.outputs, { toAviaForm: D } = u.B.inputs, { $isSimpleSearch: F, $origin: j, $activeService: N } = m.i.outputs, { toSimpleSearch: I, changeOrigin: M, changeService: T, changeCurrentDateCase: A, updateAnalyticsDirectionSource: E } = m.i.inputs, { notify: P, notificationsViewContext: $ } = y.B.inputs, { tryToStartSearch: R } = v.J.inputs, { translated: B } = b.J.outputs, { $isMobile: O } = x.l.outputs, H = (0, n.createEvent)({ sid: "cckj0s" }), q = w(k.MainPage).$isOpen, L = (0, n.createEvent)({ sid: "-6u8sj0" }); (0, n.sample)({ and: [{ clock: L, source: _, filter: (0, n.withFactory)({ sid: "8pj083", fn: () => (0, i.f)(q) }), fn: e => ({ pathname: "/", searchParams: e, type: "push" }), target: C }], or: { sid: "lkuz0t" } }); const Z = (0, c.J)({ parameters: { isMainPage: (0, c.C)({ read: q, write: L }), origin: (0, c.C)({ read: j, write: M }), service: (0, c.C)({ read: N, write: T }), aviaFormIsActive: (0, c.C)({ read: S, write: D }), searchModeIsSimple: (0, c.C)({ read: F, write: I }) }, checkActive: ({ isMainPage: e, origin: t, service: s, aviaFormIsActive: a, searchModeIsSimple: n }) => Boolean((0, l.uH)(s) && !(0, r.Tu)(t) && n && a && e), beforeOpen: (e, t) => ({ origin: t.origin, service: e.service, datesIsValid: !0, aviaFormIsActive: !0, searchModeIsSimple: !0, isMainPage: !0, isGuidesPage: !1 }), initialized: H }); (0, n.sample)({ and: [{ clock: Z.opened, target: (0, f.Sy)((0, f.ZE)("service/helios/weekends_screen/opened")) }], or: { sid: "-f39sur" } }), (0, n.sample)({ and: [{ clock: Z.closed, target: (0, f.Sy)((0, f.ZE)("service/helios/weekends_screen/closed")) }], or: { sid: "-eoz5fd" } }), (0, n.sample)({ and: [{ clock: Z.opened, target: g.H }], or: { sid: "-em86gk" } }), (0, n.sample)({ and: [{ clock: Z.opened, fn: () => h.M4.Weekends, target: A }], or: { sid: "-e9kwt9" } }), P({ clock: { show: (0, n.sample)({ and: [{ clock: R, filter: Z.$active }], or: { sid: "-7caqsj" } }), hide: Z.closed }, message: B("widget_weekends:pickCity"), icon: "warning", autoClose: !1 }), (0, n.sample)({ and: [{ clock: Z.open, filter: e => Boolean(e.analytics?.directionSource), fn: e => e.analytics?.directionSource ?? h.yh.Deeplink, target: E }], or: { sid: "-dc1gm8" } }), $({ overrides: { position: "bottom" }, setupOn: (0, n.sample)({ and: [{ clock: [O.updates, Z.$active.updates], filter: (0, n.withFactory)({ sid: "-q38d9d", fn: () => (0, o.x)(O, Z.$active) }) }], or: { sid: "uyn51i" } }), dropOn: (0, n.sample)({ and: [{ clock: [Z.closed, (0, n.sample)({ and: [{ clock: O.updates, filter: (0, n.withFactory)({ sid: "-n8yki3", fn: () => (0, i.f)(O) }) }], or: { sid: "-b3b1l8" } })] }], or: { sid: "-6jbhvw" } }) }); const z = (0, a.G6)({ importMetaUrl: "file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/screen_weekends/index.ts", lifecycle: { start: H }, api: { outputs: { weekendsScreen: Z } } }) }, 659: function (e, t, s) { "use strict"; s.d(t, { v: function () { return T } }); var a = s(30091), n = s(98116), i = s(87722), o = s(16243), r = s(82672), l = s(11763), c = s(47420), d = s(82203), u = s(77195); const { matchPage: m, pages: p } = r.$.outputs, { $isAviaFormActive: h } = l.B.outputs, { toAviaForm: f } = l.B.inputs, { $isSimpleSearch: g, $origin: y, $destination: v, weekends: b, $currentDateCase: x } = c.i.outputs, { toSimpleSearch: _, changeOrigin: C, changeDestination: w, weekends: { changeWeekendsDates: k, changeAllDatesSelection: S, changeExtraDaysSelection: D }, changeCurrentDateCase: F, updateAnalyticsDirectionSource: j } = c.i.inputs, N = m(p.MainPage).$isOpen, I = (0, n.createEvent)({ sid: "s3zd42" }), M = (0, o.J)({ parameters: { isMainPage: (0, o.C)({ read: N }), origin: (0, o.C)({ read: y, write: C }), destination: (0, o.C)({ read: v, write: w }), aviaFormIsActive: (0, o.C)({ read: h, write: f }), searchModeIsSimple: (0, o.C)({ read: g, write: _ }), weekendsDate: (0, o.C)({ read: b.$weekendsDates, write: k }), currentDateCase: (0, o.C)({ read: x, write: F }), isAllDatesSelected: (0, o.C)({ read: b.$isAllDatesSelected, write: S }), isExtraDaysSelected: (0, o.C)({ read: b.$isExtraDaysSelected, write: D }) }, checkActive: ({ isMainPage: e, origin: t, destination: s, aviaFormIsActive: a, searchModeIsSimple: n, currentDateCase: o }) => Boolean(e && a && n && t && s && (0, i.bx)(t, s) && o === d.M4.Weekends), beforeOpen: (e, t) => ({ origin: t.origin, destination: e.destination, weekendsDate: e.weekendsDate, isAllDatesSelected: e.isAllDatesSelected, isExtraDaysSelected: e.isExtraDaysSelected, aviaFormIsActive: !0, searchModeIsSimple: !0, isMainPage: !0, isGuidesPage: !1, currentDateCase: d.M4.Weekends }), initialized: I }); (0, n.sample)({ and: [{ clock: M.opened, target: u.H }], or: { sid: "fgr619" } }), (0, n.sample)({ and: [{ clock: M.open, filter: e => Boolean(e.analytics?.directionSource), fn: e => e.analytics?.directionSource ?? d.yh.Deeplink, target: j }], or: { sid: "fhur7z" } }); const T = (0, a.G6)({ importMetaUrl: "file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/screen_weekends_prices_results/index.ts", lifecycle: { start: I }, api: { outputs: { weekendsPricesResultsScreen: M } } }) }, 28148: function (e, t, s) { "use strict"; s.d(t, { n: function () { return wt } }); var a = s(30091), n = s(98116), i = s(65752), o = s(20611), r = s(67294), l = s(28225), c = s(85893); const d = ({ className: e, ...t }, s) => (0, c.jsxs)("svg", { width: 24, height: 24, viewBox: "0 0 24 24", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: [(0, c.jsx)("path", { d: "M12 13a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z" }), (0, c.jsx)("path", { fillRule: "evenodd", clipRule: "evenodd", d: "M19.291 16.277a9 9 0 1 0-14.583 0C7.19 19.972 11.5 22 11.5 22h1s4.31-2.028 6.791-5.723ZM9 7l.5-1.5h5L15 7h1a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1Z" })] }), u = (0, r.memo)((0, r.forwardRef)(d)); u.displayName = "Icon24ProductsGuides"; const m = ({ className: e, ...t }, s) => (0, c.jsx)("svg", { width: 24, height: 24, viewBox: "0 0 24 24", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: (0, c.jsx)("path", { d: "M21 5H3v6h3.5v-1a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v1h3v-1a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v1H21V5ZM4 13a3 3 0 0 0-3 3v3h2l1-2h16l1 2h2v-3a3 3 0 0 0-3-3H4Z" }) }), p = (0, r.memo)((0, r.forwardRef)(m)); p.displayName = "Icon24ProductsHotels"; const h = ({ className: e, ...t }, s) => (0, c.jsx)("svg", { width: 24, height: 24, viewBox: "0 0 24 24", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: (0, c.jsx)("path", { d: "M8.102 5.224C8 5.605 8 6.07 8 7v2c0 .93 0 1.395.102 1.777a3 3 0 0 0 2.121 2.12C10.605 13 11.07 13 12 13c.93 0 1.395 0 1.777-.102a3 3 0 0 0 2.12-2.121C16 10.395 16 9.93 16 9V7c0-.93 0-1.395-.102-1.776a3 3 0 0 0-2.121-2.122C13.395 3 12.93 3 12 3c-.93 0-1.395 0-1.777.102a3 3 0 0 0-2.12 2.122ZM11 15a6 6 0 0 0-6 6h14a6 6 0 0 0-6-6h-2Z" }) }), f = (0, r.memo)((0, r.forwardRef)(h)); f.displayName = "Icon24ProductsProfile"; const g = ({ className: e, ...t }, s) => (0, c.jsx)("svg", { width: 24, height: 24, viewBox: "0 0 24 24", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: (0, c.jsx)("path", { d: "M7.37 14.592 5 14l-2 2 3.5 1.5L8 21l2-2-.593-2.37 2.947-2.679 4.147 7.05a1.777 1.777 0 0 0 1.176-2.048l-1.746-8.385 2.202-2.202a7.046 7.046 0 0 0 1.84-3.259.89.89 0 0 0-1.08-1.08 7.043 7.043 0 0 0-3.26 1.84L13.43 8.069 5.049 6.322A1.778 1.778 0 0 0 2.999 7.5l7.05 4.146-2.679 2.946Z" }) }), y = (0, r.memo)((0, r.forwardRef)(g)); y.displayName = "Icon24ProductsTickets"; const v = ({ className: e, ...t }, s) => (0, c.jsx)("svg", { width: 24, height: 24, viewBox: "0 0 24 24", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: (0, c.jsx)("path", { d: "M10.027 4.17a2 2 0 0 1 3.946 0A4.802 4.802 0 0 1 17.5 8.8v3.805A4.973 4.973 0 0 1 20 16v1H4v-1a4.973 4.973 0 0 1 2.5-3.395V8.8a4.802 4.802 0 0 1 3.527-4.63ZM9.5 19a2.5 2.5 0 0 0 4.9 0H9.5Z" }) }), b = (0, r.memo)((0, r.forwardRef)(v)); b.displayName = "Icon24ProductsSubscription"; var x = s(53019), _ = s(72914); const C = ({ className: e, ...t }, s) => (0, c.jsx)("svg", { width: 16, height: 16, viewBox: "0 0 16 16", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: (0, c.jsx)("path", { d: "M14.5 2.5h-13v4H4v-1a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v1h2v-1a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v1h2.5v-4ZM2 8a2 2 0 0 0-2 2v3h1.5l1-2h11l1 2H16v-3a2 2 0 0 0-2-2H2Z" }) }), w = (0, r.memo)((0, r.forwardRef)(C)); w.displayName = "Icon16ProductsHotels"; const k = ({ className: e, ...t }, s) => (0, c.jsx)("svg", { width: 16, height: 16, viewBox: "0 0 16 16", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: (0, c.jsx)("path", { d: "M5.152 3.235C5 3.602 5 4.068 5 5v1c0 .932 0 1.398.152 1.765a2 2 0 0 0 1.083 1.083C6.602 9 7.068 9 8 9c.932 0 1.398 0 1.765-.152a2 2 0 0 0 1.083-1.083C11 7.398 11 6.932 11 6V5c0-.932 0-1.398-.152-1.765a2 2 0 0 0-1.083-1.083C9.398 2 8.932 2 8 2c-.932 0-1.398 0-1.765.152a2 2 0 0 0-1.083 1.083ZM7 10.5A3.5 3.5 0 0 0 3.5 14h9A3.5 3.5 0 0 0 9 10.5H7Z" }) }), S = (0, r.memo)((0, r.forwardRef)(k)); S.displayName = "Icon16ProductsProfile"; const D = ({ className: e, ...t }, s) => (0, c.jsx)("svg", { width: 16, height: 16, viewBox: "0 0 16 16", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: (0, c.jsx)("path", { d: "M6.197 11.38 6.5 13.5 5 15l-.999-3.003-3-1.002 1.5-1.499 2.12.305 1.714-1.928L1.001 5a2.5 2.5 0 0 1 2.738-1.026l4.94 1.347 1.807-1.807a6.102 6.102 0 0 1 2.38-1.47.86.86 0 0 1 1.089 1.089 6.102 6.102 0 0 1-1.469 2.38L10.68 7.321l1.442 5.288a2 2 0 0 1-.82 2.19L11 15 8.127 9.664l-1.93 1.716Z" }) }), F = (0, r.memo)((0, r.forwardRef)(D)); F.displayName = "Icon16ProductsTickets"; const j = ({ className: e, ...t }, s) => (0, c.jsx)("svg", { width: 16, height: 16, viewBox: "0 0 16 16", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: (0, c.jsx)("path", { d: "M8 1a1.25 1.25 0 0 1 1.249 1.199A4.002 4.002 0 0 1 12 6v2.717A3.261 3.261 0 0 1 14 11v1H2v-1a3.261 3.261 0 0 1 2-2.283V6a4.002 4.002 0 0 1 2.751-3.801A1.25 1.25 0 0 1 8 1ZM8 15a2 2 0 0 1-1.937-1.5h3.874A2 2 0 0 1 8 15Z" }) }), N = (0, r.memo)((0, r.forwardRef)(j)); N.displayName = "Icon16ProductsSubscription"; const I = e => { document.body.classList.add(e) }, M = e => { document.body.classList.remove(e) }; var T = s(94184), A = s.n(T); const E = ({ children: e, isCompact: t, isShrunk: s, isExternal: a }) => (0, c.jsx)("div", { className: A()("s__l5mTjze64CXxKOqeaPPP", t && "s__fm1UX3c4M8zafcQyDcrW", a && "s__so7VUIzTr_cRlkM3SfaM", s && "s__PUI5OfiyaWeineag8GcF"), children: e }); var P = s(49963), $ = s(44619); const R = ({ children: e, className: t, size: s = "m" }, a) => (0, c.jsx)(P.x, { ref: a, className: A()("s__HrVnNfqeMvwHldrpXROu", "xs" === s && "s__h50fgJDExPJu04XCRgyS", t), type: "m" === s ? $.y.Body3Semi : $.y.CaptionSemi, truncateMode: "xs" === s ? $.k.TwoLines : void 0, mobileType: "m" === s ? $.y.CaptionSemi : $.y.FootnoteSemi, tag: "div", "data-tab-text": !0, children: e }), B = (0, r.forwardRef)(R); const O = ({ children: e, isActive: t, isShrunk: s, onClick: a, href: n = "#", className: i }) => (0, c.jsx)("li", { className: A()("s__hbxcNc1I5xO3XeJf8geU", t && "s__BOvkqMW6bV35aSSkVH1y", s && "s__OrVQ6n62Xad8mgN_l1a5", i), children: (0, c.jsx)("a", { className: "s__OMjhp8bAT_JSRaRzI3Zt", href: n, onClick: a, children: e }) }); O.Icon = E, O.Title = B; var H = { tab: "s__ygiK4e8hqDJ5NEojK5s3", link: "s__copbTnCU01Z8RvQlTAy3", "focus-visible": "s__jGntV3Um033jSa3fIigH", active: "s__pJI6t1ERxMhstaRoStfw" }; const q = ({ children: e, isActive: t, isCompact: s, onClick: a, href: n = "#", className: i }) => (0, c.jsx)("li", { className: A()(H.tab, t && H.active, s && H.compact, i), children: (0, c.jsx)("a", { className: H.link, href: n, onClick: a, children: e }) }); const L = ({ children: e, isActive: t, onClick: s, href: a = "#", className: n }) => (0, c.jsx)("li", { className: A()("s__p5uDmPSTA17RT1P6Rhiv", t && "s__O0vQSSqmjIrRIsA_W_Sx", n), children: (0, c.jsx)("a", { className: "s__GTAY0pQZE1aakVOYMuuv", href: a, onClick: s, children: e }) }), Z = ({ children: e, isMobile: t, isCompact: s, onClick: a, name: n, tabClickedAnalytics: i, ...o }) => { const l = (0, r.useCallback)((e => { a && (e.preventDefault(), a()), i(n) }), [a, n, i]); return t ? (0, c.jsx)(O, { onClick: l, ...o, children: e }) : s ? (0, c.jsx)(L, { onClick: l, ...o, children: e }) : (0, c.jsx)(q, { onClick: l, ...o, children: e }) }; Z.Icon = E, Z.Title = B; var z = s(16464); const G = ({ children: e, href: t, isCompact: s }) => (0, c.jsx)("li", { className: A()("s__p5b_rzx0dunEdyXou2bU", s && "s__un9dJMc6ZM_3b26flMJD"), children: (0, c.jsxs)("a", { className: "s__CBqCpJ7f0VNaD4mC7OJe", href: t, target: "_blank", rel: "nofollow noreferrer", children: [e, (0, c.jsx)(z.i, { className: "s__c5tjpW27m2ilO4YlK52N" })] }) }); G.Icon = ({ children: e, ...t }) => (0, c.jsx)(E, { isExternal: !0, ...t, children: e }), G.Title = B; var V = s(54448), U = s(72675), W = s(65740), K = s(38032), J = s(35529), Y = s(47047), X = s(27636), Q = s(78364), ee = s(82672), te = s(10924), se = s(11763), ae = s(77195), ne = s(14210), ie = s(76815), oe = s(40777), re = s(35712), le = s(52247), ce = s(54428); const { createFlag: de } = Q.f.inputs, { matchPage: ue, pages: me } = ee.$.outputs, { toAviaForm: pe, toHotelForm: he } = se.B.inputs, { $activeForm: fe, $hasHotelHash: ge } = se.B.outputs, { $isGuidesButtonEnabled: ye } = ne.qF.outputs, { $isHotelsResultsSearchFormExpEnabled: ve } = re.n.outputs, { $b2bTabbarButtonFlag: be } = ie.E.outputs, { profileContentPagesWithPremium: xe, profileSubscriptionsPage: _e, $isSubscriptionsRouteAvailable: Ce, profileIndexPage: we } = oe.m.outputs, { link: ke } = le.x.outputs, { createReporter: Se } = te.I.inputs, { $isHotelFormActive: De, $isAviaFormActive: Fe } = se.B.outputs, je = ue(me.MainPage).$isOpen, Ne = ue(me.GuidesPage).$isOpen, Ie = ue(me.SearchPage).$isOpen, Me = ue(me.MapPage).$isOpen, Te = ue(me.WalksPage).$isOpen, Ae = ue(me.HotelsPage).$isOpen, Ee = ue(me.HotelsMapPage).$isOpen, [Pe, $e] = (0, n.withFactory)({ sid: "-q52yxv", fn: () => (0, X.K)((0, n.withFactory)({ sid: "-x2mgj0", fn: () => (0, V.or)(je, Ne, Ie, Me, _e.$isOpen, xe.$isOpen, we.$isOpen) })) }), Re = (0, n.withFactory)({ sid: "-p0q760", fn: () => (0, V.or)(je, Ie, Me, (0, n.withFactory)({ sid: "-w2vu09", fn: () => (0, U.x)(Ae, ve) })) }), Be = (0, n.withFactory)({ sid: "gjuls1", fn: () => (0, U.x)(De, Re) }), Oe = (0, n.withFactory)({ sid: "-k06uiy", fn: () => (0, U.x)(Fe, Re) }), He = (0, n.createEvent)({ sid: "-wtqn8y" }), qe = (0, n.createEvent)({ sid: "tufef7" }), Le = (0, n.createEvent)({ sid: "-dzzs3d" }), Ze = (0, n.createEvent)({ sid: "-ycfxqr" }), ze = ke({ path: "/" }), Ge = ke({ path: "/#hotel" }), Ve = (0, n.createStore)({ activeTab: "avia", prevActiveTab: null }, { sid: "ctztm4" }).on(fe, ((e, t) => ({ activeTab: t, prevActiveTab: e.activeTab }))); (0, n.withFactory)({ sid: "etz8nl", fn: () => (0, W.s)({ source: He, if: Re, then: qe }) }), (0, n.sample)({ and: [{ clock: qe, target: [pe, ae.p] }], or: { sid: "-fi5r6n" } }), (0, n.withFactory)({ sid: "-ffes7u", fn: () => (0, W.s)({ source: Le, if: Re, then: Ze }) }), (0, n.sample)({ and: [{ clock: Ze, target: [he, ae.p] }], or: { sid: "-f0kc73" } }); const Ue = Ne, We = ye, Ke = ce.O.outputs.$isAuthorizationEnabled, Je = (0, n.withFactory)({ sid: "-47t05p", fn: () => (0, U.x)(ce.O.outputs.$isAuthorizationEnabled, Ce) }), Ye = _e.$isOpen, Xe = (0, n.withFactory)({ sid: "-b7z68l", fn: () => (0, V.or)(we.$isOpen, (0, n.withFactory)({ sid: "-hg3imj", fn: () => (0, U.x)(xe.$isOpen, (0, n.withFactory)({ sid: "-hezxe3", fn: () => (0, K.f)(_e.$isOpen) })) })) }), Qe = ke({ path: "/my/subscriptions" }), et = ke({ path: "/my" }), tt = ke({ path: "/my/settings" }), st = ke({ path: "/guides?source=tab" }), at = (0, n.combine)({ and: [be, e => e.link ?? null], or: { sid: "-aav4fu" } }), nt = (0, n.withFactory)({ sid: "r23xu9", fn: () => (0, Y.d)((() => de({ name: "ex-exp-webTabbar", contract: (0, J.Record)({ enabled: J.Boolean, place: J.String.optional() }), defaultValue: { enabled: !1 } }))) }), it = (0, n.combine)({ and: [{ flag: nt.$value }, ({ flag: e }) => e.enabled], or: { sid: "lynjxf" } }), ot = (0, n.withFactory)({ sid: "ng1nob", fn: () => (0, U.x)(it, Pe) }), rt = (0, n.combine)({ and: [nt.$value, e => e.enabled && "form" === e.place], or: { sid: "zduw0y" } }), lt = (0, n.combine)({ and: [nt.$value, e => e.enabled && "header" === e.place], or: { sid: "h512j6" } }), ct = (0, n.withFactory)({ sid: "-yz0rbb", fn: () => (0, V.or)(Te, (0, n.withFactory)({ sid: "-f3yzua", fn: () => (0, U.x)(Ae, (0, n.withFactory)({ sid: "ssnhrv", fn: () => (0, K.f)(ve) })) }), (0, n.withFactory)({ sid: "-f3f78x", fn: () => (0, U.x)(Ee, (0, n.withFactory)({ sid: "t9p48n", fn: () => (0, K.f)(ve) })) })) }), dt = (0, n.withFactory)({ sid: "wn69g", fn: () => (0, K.f)(ct) }), ut = (0, n.createEvent)({ sid: "fya44d" }); Se({ data: { category: "tabbar", action: "clicked" }, payload: { userEvent: !0 } })({ clock: ut, data: (e, { data: t }) => ({ ...t, label: e }) }); const mt = (0, n.createStore)(0, { sid: "-ui8e73" }), pt = (0, n.createEvent)({ sid: "5c4y50" }); (0, n.sample)({ and: [{ clock: pt, source: mt, fn: e => e + 1, target: mt }], or: { sid: "386n2" } }), (0, n.sample)({ and: [{ source: ge.updates, target: pt }], or: { sid: "72qsl" } }); const ht = (0, n.withFactory)({ sid: "9cjd6i", fn: () => (0, i.SC)({ view: Z, bind: { tabClickedAnalytics: ut } }) }); var ft = "s__JvoYkPCB88widi_F4bcq"; const gt = ({ tabsConfig: e, externalTabsConfig: t }) => (0, c.jsxs)("nav", { className: A()("s__wx7MJxUGhHY6zZXFlyGP"), children: [(0, c.jsx)("ul", { className: A()("s__FISH3sjuSHMm96ZYKrkI"), children: e.map((e => (0, c.jsxs)(ht, { name: e.name, href: e.href, isActive: e.isActive, isCompact: !0, onClick: e.onClick, children: [(0, c.jsx)(Z.Icon, { isCompact: !0, children: e.icon }), (0, c.jsx)(Z.Title, { className: ft, children: e.title })] }, e.name))) }), t.length ? (0, c.jsx)("ul", { className: A()("s__IXH_WhsOeQY2LCN8Dbbj"), children: t.map((e => (0, c.jsxs)(G, { isCompact: !0, href: e.href, children: [(0, c.jsx)(G.Icon, { isCompact: !0, children: e.icon }), (0, c.jsx)(G.Title, { className: ft, children: e.title })] }, e.href))) }) : null] }); var yt = s(80191); const vt = ({ tabsCount: e, isMobile: t }) => { const [s, a] = (0, r.useState)("m"), n = (0, r.useRef)(null), i = (0, r.useRef)(Array(e).fill(0).map((e => (0, r.createRef)()))), o = "xs" === s; return (0, r.useEffect)((() => { if (n.current && n.current.clientWidth > 0 && "xs" !== s) { const e = n.current.querySelectorAll("ul"), o = []; e.forEach((e => { o.push(...e.children) })), o.forEach(((e, n) => { const o = e.clientWidth, r = i.current[n].current?.clientWidth; r && r > o && a(t || "m" !== s ? "xs" : "s") })) } }), [t, s]), { tabbarRef: n, textRefs: i, textSize: s, isShrunk: o } }, bt = ({ tabsConfig: e }) => { (0, r.useEffect)((() => (I("--new-tabbar-view"), () => M("--new-tabbar-view"))), []); const { tabbarRef: t, isShrunk: s, textRefs: a, textSize: n } = vt({ isMobile: !0, tabsCount: e.length }); return (0, c.jsxs)("nav", { ref: t, className: "s__vLXGAvFLeuG9qR0Pd6eC", children: [(0, c.jsx)(yt.i, { className: "s__NxzkPqTDCiR0wfw3C3Bs", color: "transparent" }), (0, c.jsx)("ul", { className: A()("s__Uq6cCCTdKVlHkZwKgG_O"), children: e.map(((e, t) => (0, c.jsxs)(ht, { name: e.name, href: e.href, isActive: e.isActive, isShrunk: s, onClick: e.onClick, isMobile: !0, children: [(0, c.jsx)(Z.Icon, { isCompact: !1, isShrunk: s, children: e.icon }), (0, c.jsx)(Z.Title, { ref: a.current[t], size: n, children: e.title })] }, e.name))) })] }) }; const xt = ({ tabsConfig: e, externalTabsConfig: t }) => { const { tabbarRef: s, textRefs: a, isShrunk: n, textSize: i } = vt({ isMobile: !1, tabsCount: e.length + t.length }); return (0, c.jsxs)("nav", { ref: s, className: "s__AU7utwjUoMmpe2z0pQq1", children: [(0, c.jsx)("ul", { className: A()("s__cEgluR7x5ZYH93r2eqJx"), children: e.map(((e, t) => (0, c.jsxs)(ht, { name: e.name, href: e.href, isActive: e.isActive, isShrunk: n, isCompact: !1, onClick: e.onClick, children: [(0, c.jsx)(Z.Icon, { isCompact: !1, isShrunk: n, children: e.icon }), (0, c.jsx)(Z.Title, { ref: a.current[t], size: i, children: e.title })] }, e.name))) }), t.length ? (0, c.jsx)("ul", { className: A()("s__U9tFRe7WHUQP1xlqBtrY"), children: t.map(((t, s) => (0, c.jsxs)(G, { isCompact: !1, href: t.href, children: [(0, c.jsx)(G.Icon, { isShrunk: n, children: t.icon }), (0, c.jsx)(G.Title, { ref: a.current[e.length + s], size: i, children: t.title })] }, t.href))) }) : null] }) }, _t = ({ isMobile: e, isCompact: t, isPageWithForm: s, aviaFormTabLink: a, hotelFormTabLink: n, isAviaTabActive: i, toAviaFormTab: o, isHotelTabActive: d, toHotelFormTab: m, activeFormTabs: h, shouldShowGuidesTab: g, isGuidesTabActive: v, b2bButtonLink: C, showProfileButton: k, showSubscriptionsButton: D, isProfileTabActive: j, isSubscriptionsTabActive: T, subscriptionsButtonLink: A, profileMobileButtonLink: E, profileDesktopButtonLink: P, guidesMainButtonLink: $, navigateTo: R }) => { const { t: B } = (0, l.useTranslation)("service_explore_tabbar"), { activeTab: O, prevActiveTab: H } = h; (0, r.useEffect)((() => { O !== H && (H && M(`page--${H}`), I(`page--${O}`)) }), [O, H]); const q = j || T, L = [{ name: "flights", href: s ? "#avia" : a, isActive: i, onClick: s ? o : void 0, icon: t ? (0, c.jsx)(F, {}) : (0, c.jsx)(y, {}), title: B("tickets") }, { name: "hotels", href: s ? "#hotel" : n, isActive: d, onClick: s ? m : void 0, icon: t ? (0, c.jsx)(w, {}) : (0, c.jsx)(p, {}), title: B("hotels") }, g && { name: "guides", isActive: v, href: $, onClick: v ? () => R({ pathname: $, type: "push" }) : void 0, title: B("guides"), icon: t ? (0, c.jsx)(_.t, {}) : (0, c.jsx)(u, {}) }, D && { name: "subscriptions", isActive: T, href: A, onClick: q ? () => R({ pathname: A, type: "push" }) : void 0, title: B("subscription"), icon: t ? (0, c.jsx)(N, {}) : (0, c.jsx)(b, {}) }, k && { name: "profile", isActive: j, href: e ? E : P, onClick: q ? () => R({ pathname: e ? E : P, type: "push" }) : void 0, title: B("profile"), icon: t ? (0, c.jsx)(S, {}) : (0, c.jsx)(f, {}) }].filter(Boolean), Z = [C && { name: "b2b", href: C, icon: (0, c.jsx)(x.O, {}), title: B(t ? "business_compact" : "business") }].filter(Boolean); return e ? (0, c.jsx)(bt, { tabsConfig: L }) : t ? (0, c.jsx)(gt, { tabsConfig: L, externalTabsConfig: Z }) : (0, c.jsx)(xt, { tabsConfig: L, externalTabsConfig: Z }) }, Ct = (0, n.withFactory)({ sid: "p1nupn", fn: () => (0, i.SC)({ view: _t, bind: { isPageWithForm: Re, aviaFormTabLink: ze, hotelFormTabLink: Ge, isAviaTabActive: Oe, toAviaFormTab: He, isHotelTabActive: Be, toHotelFormTab: Le, activeFormTabs: Ve, shouldShowGuidesTab: We, isGuidesTabActive: Ue, b2bButtonLink: at, showProfileButton: Ke, showSubscriptionsButton: Je, isProfileTabActive: Xe, isSubscriptionsTabActive: Ye, subscriptionsButtonLink: Qe, profileMobileButtonLink: et, profileDesktopButtonLink: tt, guidesMainButtonLink: st, navigateTo: o.D.inputs.navigateTo, key: mt } }) }), wt = (0, a.G6)({ importMetaUrl: "file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/tabbar/index.ts", api: { containers: { Tabbar: Ct }, outputs: { $isNewTabbarEnabled: ot, $isNewTabbarInNavbar: lt, $isNewTabbarInForm: rt, $isPageWithForm: Re, $areTabsVisible: dt } } }) }, 19722: function (e, t, s) { "use strict"; s.d(t, { T: function () { return P } }); var a = s(30091), n = s(98116), i = s(72675), o = s(54448), r = s(85349), l = s(82672), c = s(38387), d = s(11763), u = s(85658), m = s(39698); const { matchPage: p, pages: h } = l.$.outputs, { $isMobile: f } = c.l.outputs, { $isHotelFormActive: g } = d.B.outputs, { startSearch: y } = m.K.inputs, { smoothScrollToTop: v } = u.u.inputs, { $scrollY: b } = u.u.outputs, x = (0, n.createStore)(!1, { sid: "moz32k" }), _ = (0, n.withFactory)({ sid: "-j4ne0d", fn: () => (0, i.x)(g, (0, n.withFactory)({ sid: "-175puo", fn: () => (0, o.or)(p(h.HotelsPage).$isOpen, p(h.HotelsMapPage).$isOpen) }), f) }), C = (0, n.createEvent)({ sid: "-ggm9bf" }), w = (0, n.createEvent)({ sid: "-de8stt" }); (0, n.withFactory)({ sid: "2aot1l", fn: () => (0, r.m)({ clock: C, target: x }) }), (0, n.sample)({ and: [{ clock: C, target: v }], or: { sid: "2dfs0e" } }), (0, n.sample)({ and: [{ clock: y, filter: _, fn: () => !0, target: x }], or: { sid: "2rqffs" } }), (0, n.sample)({ and: [{ clock: w, filter: _, fn: () => !0, target: x }], or: { sid: "374o1w" } }); const k = (0, n.combine)({ and: [{ scrollY: b, isHotelRawForm: x, isHotelRawFormPossible: _ }, ({ scrollY: e, isHotelRawFormPossible: t, isHotelRawForm: s }) => !!t && (!!s || e > 340)], or: { sid: "-8mvfm" } }); (0, n.sample)({ and: [{ clock: k, target: x }], or: { sid: "46bi10" } }); var S = s(67294), D = s(4190), F = s(531), j = s(20411), N = s(85893); const { $destination: I, $guests: M, $checkInDate: T, $checkOutDate: A } = F.c.outputs, E = (0, S.memo)((() => { const { destination: e, guests: t, checkInDate: s, checkOutDate: a, rawFormClosedEvent: n } = (0, D.useUnit)({ destination: I, guests: M, checkInDate: T, checkOutDate: A, rawFormClosedEvent: C }); return (0, N.jsx)(j.PN, { location: e, guests: t, checkInDate: s, checkOutDate: a, onEdit: n }) })); E.displayName = "HotelsRawFormContainer"; const P = (0, a.G6)({ importMetaUrl: "file:///home/jenkins/agent/workspace/selene/client/src/product/hotels/services/hotels_raw_form/index.ts", api: { containers: { HotelsRawFormContainer: E }, outputs: { $isHotelRawForm: x, $isHotelRawFormPossible: _ }, inputs: { formCollapsed: w } } }) }, 39698: function (e, t, s) { "use strict"; s.d(t, { Z: function () { return ue }, K: function () { return me } }); var a = s(98116), n = s(21247), i = s(47047), o = s(27636), r = s(75381), l = s(57640), c = s(82525), d = s(35712), u = s(54428), m = s(73241), p = s(96025), h = s(25974), f = s(94590), g = s(38387); const { $hotelsResultsFeatFlag: y } = d.n.outputs, { createHotelsSearchStarter: v, createHotelsResultsFetcher: b } = m.Q.factories, { createSearchStatus: x } = p.b.factories, _ = (0, a.createEvent)({ sid: "qbhso1" }), C = (0, a.createEvent)({ sid: "j98c7j" }), w = (0, a.createEvent)({ sid: "2wkzbj" }), k = (0, a.createEvent)({ sid: "-6xhga0" }), S = (0, a.createEvent)({ sid: "59adna" }), D = (0, a.createEvent)({ sid: "ugilop" }), F = (0, a.createEvent)({ sid: "1ipz9i" }), j = (0, a.createEvent)({ sid: "-wccgma" }), N = (0, a.createEvent)({ sid: "-v5dout" }), I = (0, a.createStore)(null, { sid: "p7don1" }), M = (0, a.createEvent)({ sid: "-psjdku" }), T = (0, a.createEvent)({ sid: "v5k9vo" }), A = (0, a.createStore)(null, { sid: "-w7v6u7" }), E = y.map((({ pollingInterval: e }) => e)), P = y.map((({ pollingTimeout: e }) => e)), [$, R] = (0, a.withFactory)({ sid: "-5t5s8j", fn: () => (0, o.K)(y.map((({ pageSize: e }) => e))) }), B = $.map((e => ({ limit: e }))), O = c.B.outputs.urlWithApiHost(r.Nv`${l.H.HOTELS_ENGINE}${h.KV}`), H = (0, a.combine)({ and: [{ jwt: u.O.outputs.$jwt, isMobile: g.l.outputs.$isMobile }, ({ jwt: e, isMobile: t }) => "undefined" == typeof document ? {} : { Authorization: e ? `Bearer ${e}` : "", "X-Origin-Cookie": document.cookie, "X-Client-Type": t ? f.Bh.Mobile : f.Bh.Desktop }], or: { sid: "-ms7pro" } }), q = (0, a.withFactory)({ sid: "-mkg6aq", fn: () => (0, i.d)(v, { $url: O, $headers: H, onSuccess: _, onFail: C, onExpire: S }) }), L = (0, a.withFactory)({ sid: "jvhzu3", fn: () => (0, i.d)((() => b({ $pollingInterval: E, $pollingTimeout: P, $initialRequestParams: B, completedPredicate: e => e.completed, path: h.K2, onComplete: D, onFail: w }))) }), Z = (0, a.withFactory)({ sid: "vr1oof", fn: () => (0, i.d)((() => b({ $pollingInterval: E, $pollingTimeout: P, $initialRequestParams: (0, a.createStore)({ bounds: { northeast: { latitude: 0, longitude: 0 }, southwest: { latitude: 0, longitude: 0 } } }, { sid: "-fxir90" }), completedPredicate: e => e.completed, path: h.ce, onComplete: F, onFail: k }))) }), z = (0, a.withFactory)({ sid: "fnbp75", fn: () => (0, i.d)((() => x({ searchStarted: q.inputs.start, searchStartSuccess: _, searchCompleted: D, searchFailed: (0, a.merge)([w, C], { sid: "-6dlmzu" }), searchExpired: S, emptyPredicate: e => 0 === e.meta.total_hotels_count }))) }), G = (0, a.withFactory)({ sid: "-irp5kh", fn: () => (0, i.d)((() => x({ searchStarted: q.inputs.start, searchStartSuccess: _, searchCompleted: F, searchFailed: (0, a.merge)([k, C], { sid: "8ru9me" }), searchExpired: S, emptyPredicate: e => 0 === e.meta.total_hotels_count }))) }), V = q.outputs.$searchSession.map((e => e?.searchId ?? null)), [U, W] = (0, a.withFactory)({ sid: "-uvrmj3", fn: () => (0, o.K)((0, a.combine)({ and: [{ isRequestPending: L.outputs.$isRequestPending, searchStatus: z.outputs.$searchStatus }, ({ isRequestPending: e, searchStatus: t }) => e && t === f.jy.Finished], or: { sid: "yxyuwz" } })) }), [K, J] = (0, a.withFactory)({ sid: "-5bc1xk", fn: () => (0, o.K)((0, a.combine)({ and: [{ isRequestPending: Z.outputs.$isRequestPending, searchStatus: G.outputs.$searchStatus }, ({ isRequestPending: e, searchStatus: t }) => e && t === f.jy.Finished], or: { sid: "zg42hw" } })) }); (0, a.sample)({ and: [{ clock: _, source: y, fn: (e, t) => ({ session: t, requestParams: { limit: e.pageSize } }), target: L.inputs.startPolling }], or: { sid: "-egur8" } }), (0, a.sample)({ and: [{ clock: j, target: (0, a.withFactory)({ sid: "lql55c", fn: () => (0, n.h)({ source: I, requestParams: L.inputs.put }) }) }], or: { sid: "xduw" } }), (0, a.sample)({ and: [{ clock: N, target: (0, a.withFactory)({ sid: "zgw6kz", fn: () => (0, n.h)({ source: I, requestParams: L.inputs.update }) }) }], or: { sid: "gvf2d" } }), (0, a.sample)({ and: [{ clock: M, target: (0, a.withFactory)({ sid: "-ltwtyi", fn: () => (0, n.h)({ source: A, requestParams: Z.inputs.put }) }) }], or: { sid: "l9rt9" } }), (0, a.sample)({ and: [{ clock: T, target: (0, a.withFactory)({ sid: "-i1jusy", fn: () => (0, n.h)({ source: A, requestParams: Z.inputs.update }) }) }], or: { sid: "117t0q" } }); const Y = { startSearch: q.inputs.start, startMapPolling: Z.inputs.startPolling, putResults: j, updateResults: N, putMap: M, updateMap: T, abortFetchResults: L.inputs.abort, abortFetchMap: Z.inputs.abort, searchExpired: q.inputs.sessionExpired }, X = { searchStartSuccess: _, searchStartFailed: C, fetchResultsCompleted: D, fetchResultsFailed: w, fetchMapCompleted: F, fetchMapFailed: k, $resultsSearchStatus: z.outputs.$searchStatus, $mapSearchStatus: G.outputs.$searchStatus, $searchSession: q.outputs.$searchSession, $searchId: V, $isResultsUpdating: U, $isMapUpdating: K, $resultsRequestContext: L.outputs.$requestContext, $mapRequestContext: Z.outputs.$requestContext, $isSearchExpired: q.outputs.$isExpired, $pageSize: $, $lastResultsUpdateSource: I, $lastMapUpdateSource: A }; var Q = s(8054); const { searchParamsReady: ee } = Q.L.outputs, { $isHotelsMapResultsSyncExpEnabled: te } = d.n.outputs, { startSearch: se } = Y; (0, a.sample)({ and: [{ clock: ee, source: te, filter: e => !e, fn: (e, t) => t, target: se }], or: { sid: "-yybi5b" } }); var ae = s(80094), ne = s(78194); const { notify: ie } = ae.B.inputs, { translated: oe } = ne.J.outputs, re = (0, a.sample)({ and: [{ clock: X.fetchResultsFailed, source: { resultsSearchStatus: X.$resultsSearchStatus }, filter: ({ resultsSearchStatus: e }) => e === f.jy.Finished }], or: { sid: "-tgn8ts" } }), le = (0, a.sample)({ and: [{ clock: X.fetchMapFailed, source: { mapSearchStatus: X.$mapSearchStatus }, filter: ({ mapSearchStatus: e }) => e === f.jy.Finished || e === f.jy.Error }], or: { sid: "6jrg07" } }); ie({ id: "hotels_search_error", autoClose: !0, clock: (0, a.merge)([re, le], { sid: "qwvb2t" }), icon: "warning", message: oe("service_hotels_search:errorNotificationMessage") }), s(21703); const ce = (0, s(78260).cr)("serp", { name: "hotels_search" }), de = X.$searchSession.map((e => e?.searchId ?? null)); let ue; (0, a.sample)({ and: [{ clock: X.searchStartFailed, fn: e => ({ msg: "Hotels search start failed", error: new Error(e) }), target: ce.sendErrorLog }], or: { sid: "-9bz29d" } }), (0, a.sample)({ and: [{ clock: X.fetchResultsFailed, source: { searchId: de }, fn: ({ searchId: e }, t) => ({ msg: "Hotels results fetching failed", error: new Error(t), extra: { searchId: e } }), target: ce.sendErrorLog }], or: { sid: "-8vh8gj" } }), (0, a.sample)({ and: [{ clock: X.fetchMapFailed, source: { searchId: de }, fn: ({ searchId: e }, t) => ({ msg: "Hotels map fetching failed", error: new Error(t), extra: { searchId: e } }), target: ce.sendErrorLog }], or: { sid: "-8bon3j" } }), function (e) { e.Paging = "paging", e.Filters = "filters", e.MapMove = "map_move" }(ue || (ue = {})); const me = { inputs: Y, outputs: X } }, 73241: function (e, t, s) { "use strict"; s.d(t, { Q: function () { return f } }); var a = s(98116), n = s(76588), i = s(85349), o = s(76830), r = s(47047), l = s(63246), c = s(94590); const { $isClient: d, pageBecomesVisible: u } = l.y.outputs, m = (0, a.withFactory)({ sid: "-299do1", fn: () => (0, r.s)((({ $url: e, $headers: t, onSuccess: s, onFail: r, onExpire: l }) => { const m = (0, a.createEvent)({ sid: "yibvm0" }), p = (0, a.createEvent)({ sid: "-lgz9qq" }), h = (0, a.createEvent)({ sid: "-gj0hh1" }), f = (0, a.createEvent)({ sid: "-4qzqga" }), g = (0, a.createStore)(null, { sid: "r5snvy" }), y = (0, a.createStore)(!1, { sid: "-piqaea" }), v = (0, a.createStore)(0, { sid: "-7u17b8" }); (0, a.sample)({ and: [{ source: g, fn: e => { if (!e) return 0; const t = Date.now() - e.createdAt; return Math.max(0, 1e3 * e.resultsTtl - t) }, target: v }], or: { sid: "-3q58bi" } }); const b = (0, a.createEvent)({ sid: "-kbeihp" }), x = (0, a.createEvent)({ sid: "-ekvlhm" }), _ = (0, a.withFactory)({ sid: "-41pyla", fn: () => (0, n.s5)({ name: "hotels_search_start", enabled: d, params: (0, a.withFactory)({ sid: "-jqv2c5", fn: () => (0, n.t6)() }), request: { method: "POST", url: e, headers: t, body: e => e }, response: { contract: n.ac, mapData: e => e.result }, concurrency: { abort: x } }) }), C = (0, a.createEvent)({ sid: "o4qiy5" }); return (0, a.withFactory)({ sid: "-1cx4cj", fn: () => (0, n.XD)(_, { times: 3, delay: 1e3, otherwise: C, supressIntermediateErrors: !1 }) }), (0, a.withFactory)({ sid: "-kmjar1", fn: () => (0, i.m)({ clock: b, target: [g, y, v] }) }), (0, a.sample)({ and: [{ clock: b, target: _.start }], or: { sid: "-k6l9jk" } }), (0, a.sample)({ and: [{ clock: _.finished.success, fn: ({ result: e }) => ({ searchId: e.search_id, resultsUrl: e.results_url, resultsTtl: e.results_ttl, createdAt: Date.now() }), target: g }], or: { sid: "-jqn8c3" } }), (0, a.sample)({ and: [{ clock: _.finished.success, source: g, target: m }], or: { sid: "-j7efkg" } }), (0, a.sample)({ and: [{ clock: u, source: { searchSession: g }, fn: ({ searchSession: e }) => { if (!e) return 0; const t = Date.now() - e.createdAt; return Math.max(0, 1e3 * e.resultsTtl - t) }, target: v }], or: { sid: "-iqwlrm" } }), (0, a.sample)({ and: [{ clock: u, source: g, filter: Boolean, fn: e => e.searchId, target: f }], or: { sid: "-htwy5y" } }), (0, a.sample)({ and: [{ clock: _.finished.success, fn: ({ result: e }) => e.search_id, target: f }], or: { sid: "-hcbj6e" } }), (0, a.sample)({ and: [{ clock: (0, a.withFactory)({ sid: "-4ubfn7", fn: () => (0, o.D)({ source: f, timeout: v, name: "debounce: hotels start expiration" }) }), source: { searchSession: g, isExpired: y }, filter: ({ searchSession: e, isExpired: t }, s) => e?.searchId === s && !t, target: h }], or: { sid: "-gvtpdk" } }), (0, a.sample)({ and: [{ clock: C, fn: e => (0, a.withFactory)({ sid: "-uz0i4n", fn: () => (0, n.Bh)(400) })(e) ? c.bG.BadRequest : c.bG.Unknown, target: p }], or: { sid: "-5y50j0" } }), (0, a.sample)({ and: [{ clock: h, fn: () => !0, target: y }], or: { sid: "-52sqpf" } }), s && (0, a.sample)({ and: [{ clock: m, target: s }], or: { sid: "-4lr49i" } }), r && (0, a.sample)({ and: [{ clock: p, target: r }], or: { sid: "-4hwk3z" } }), l && (0, a.sample)({ and: [{ clock: h, target: l }], or: { sid: "-42ibhv" } }), { inputs: { start: b, abort: x, sessionExpired: h }, outputs: { $searchSession: g, $isExpired: y }, internals: { startSearchQuery: _ } } })) }); var p = s(59399), h = s(27636); const f = { factories: { createHotelsSearchStarter: m, createHotelsResultsFetcher: (0, a.withFactory)({ sid: "nlc9vd", fn: () => (0, r.s)((({ completedPredicate: e, path: t, $initialRequestParams: s, $pollingInterval: i, $pollingTimeout: o, onDataReceived: r, onComplete: d, onFail: u }) => { const m = (0, a.createEvent)({ sid: "iaf2ic" }), f = (0, a.createEvent)({ sid: "w99pb1" }), g = (0, a.createEvent)({ sid: "-vw31u0" }), y = (0, a.createEvent)({ sid: "ez8jw5" }), v = (0, a.createEvent)({ sid: "-sshx0m" }), b = (0, a.createEvent)({ sid: "-cp27b8" }), x = (0, a.createEvent)({ sid: "-iax4yj" }), _ = (0, a.createEvent)({ sid: "86a24k" }), C = (0, a.createEvent)({ sid: "-3kww9l" }), w = (0, a.createStore)(0, { sid: "-yb1c8k" }), k = (0, a.createStore)(null, { sid: "-wfc2zl" }), S = (0, a.createStore)({}, { sid: "-hwsjla" }), D = (0, a.createStore)(null, { sid: "-3pdy1i" }), F = (0, a.createEvent)({ sid: "d2blp0" }), j = (0, a.createEvent)({ sid: "-kph2wf" }), N = (0, a.withFactory)({ sid: "-23hp98", fn: () => (0, n.s5)({ name: "hotels_search_results", enabled: l.y.outputs.$isClient, params: (0, a.withFactory)({ sid: "s49wfp", fn: () => (0, n.t6)() }), request: { method: "POST", query: e => ({ search_id: e.session?.searchId ?? "" }), url: ({ session: e }) => e ? e.resultsUrl + t : "", body: { source: (0, a.combine)({ and: [{ initialRequestParams: s, requestContext: S }], or: { sid: "-yhpywf" } }), fn: (e, { initialRequestParams: t, requestContext: s }) => ({ ...t, ...s }) } }, response: { contract: n.ac, mapData: e => e.result }, concurrency: { abort: f } }) }), I = (0, a.createEvent)({ sid: "-b7cx19" }); (0, a.withFactory)({ sid: "r3zc51", fn: () => (0, n.XD)(N, { times: 3, delay: 1e3, otherwise: I, supressIntermediateErrors: !1 }) }), (0, a.sample)({ and: [{ clock: m, fn: ({ requestParams: e }) => e ?? {}, target: S }], or: { sid: "rl0yj8" } }), (0, a.sample)({ and: [{ clock: m, fn: ({ session: e }) => e, target: C }], or: { sid: "s1isc2" } }), (0, a.sample)({ and: [{ clock: C, source: { pollingTransactionId: w }, fn: ({ pollingTransactionId: e }) => e + 1, target: w }], or: { sid: "si0m4w" } }), (0, a.sample)({ and: [{ clock: C, source: { pollingTransactionId: w }, filter: (e, t) => null !== t, fn: ({ pollingTransactionId: e }, t) => ({ session: t, transactionId: e }), target: N.start }], or: { sid: "t05tpt" } }), (0, a.sample)({ and: [{ clock: C, target: D }], or: { sid: "tjemhg" } }), (0, a.sample)({ and: [{ clock: C, fn: () => Date.now(), target: k }], or: { sid: "tzcnox" } }), (0, a.sample)({ and: [{ clock: f, source: { pollingTransactionId: w }, fn: ({ pollingTransactionId: e }) => e + 1, target: w }], or: { sid: "-unbi7a" } }), (0, a.sample)({ and: [{ clock: g, target: S }], or: { sid: "-u69vt3" } }), (0, a.sample)({ and: [{ clock: y, source: { requestContext: S }, fn: ({ requestContext: e }, t) => ({ ...e, ...t }), target: S }], or: { sid: "-tqbulm" } }), (0, a.sample)({ and: [{ clock: [g, y], source: D, target: C }], or: { sid: "-t9a87f" } }), (0, a.sample)({ and: [{ clock: N.finished.success, fn: ({ result: e }) => e, target: v }], or: { sid: "-ssseel" } }), (0, a.sample)({ and: [{ clock: N.finished.success, filter: ({ result: t }) => e(t), fn: ({ result: e }) => e, target: b }], or: { sid: "-scaklr" } }), (0, a.sample)({ and: [{ clock: N.finished.success, filter: ({ result: t }) => !e(t), fn: ({ params: e }) => e, target: x }], or: { sid: "-rv8y7k" } }), (0, a.sample)({ and: [{ clock: (0, a.withFactory)({ sid: "xc6yoz", fn: () => (0, p.g)(x, i) }), source: { pollingTransactionId: w, currentSession: D }, filter: ({ pollingTransactionId: e, currentSession: t }, s) => { const a = s.transactionId === e, n = t?.searchId === s.session?.searchId; return a && n }, fn: (e, t) => t, target: F }], or: { sid: "-rcjy1a" } }), (0, a.sample)({ and: [{ clock: I, fn: e => (0, a.withFactory)({ sid: "zc3p1u", fn: () => (0, n.Bh)(400) })(e) ? c.bG.BadRequest : c.bG.Unknown, target: _ }], or: { sid: "-qegp8w" } }), (0, a.sample)({ and: [{ clock: j, fn: () => c.bG.PollingTimeout, target: _ }], or: { sid: "-fwq1lt" } }), (0, a.sample)({ and: [{ clock: [b, _], fn: () => null, target: k }], or: { sid: "-fg87sz" } }), (0, a.sample)({ and: [{ clock: F, source: { pollingTimeout: o, pollingStartTimestamp: k }, filter: ({ pollingStartTimestamp: e, pollingTimeout: t }) => null !== e && Date.now() - e < t, fn: (e, t) => t, target: N.start }], or: { sid: "-ez6les" } }), (0, a.sample)({ and: [{ clock: F, source: { pollingTimeout: o, pollingStartTimestamp: k }, filter: ({ pollingStartTimestamp: e, pollingTimeout: t }) => null !== e && Date.now() - e >= t, target: j }], or: { sid: "-dog2z3" } }), r && (0, a.sample)({ and: [{ clock: v, target: r }], or: { sid: "-cp98y9" } }), d && (0, a.sample)({ and: [{ clock: b, target: d }], or: { sid: "-cleosq" } }), u && (0, a.sample)({ and: [{ clock: _, target: u }], or: { sid: "-c60g6m" } }); const [M, T] = (0, a.withFactory)({ sid: "zfnlk3", fn: () => (0, h.K)(N.$pending) }); return { inputs: { startPolling: m, abort: f, update: y, put: g }, outputs: { $requestContext: S, $isRequestPending: M }, internals: { fetchResultsQuery: N, $isRequestPendingOverride: T } } })) }) } } }, 96025: function (e, t, s) { "use strict"; s.d(t, { b: function () { return o } }), s(26699); var a = s(98116), n = s(47047), i = s(94590); const o = { factories: { createSearchStatus: (0, a.withFactory)({ sid: "-ihz1co", fn: () => (0, n.s)((({ searchStarted: e, searchStartSuccess: t, searchCompleted: s, searchFailed: n, searchExpired: o, emptyPredicate: r }) => { const l = (0, a.createStore)(i.jy.Initial, { sid: "-dj1jld" }); return (0, a.sample)({ and: [{ clock: e, fn: () => i.jy.Started, target: l }], or: { sid: "8phu39" } }), (0, a.sample)({ and: [{ clock: t, fn: () => i.jy.Loading, target: l }], or: { sid: "94ca40" } }), (0, a.sample)({ and: [{ clock: n, source: { searchStatus: l }, filter: ({ searchStatus: e }) => [i.jy.Started, i.jy.Loading].includes(e), fn: () => i.jy.Error, target: l }], or: { sid: "97n1o6" } }), (0, a.sample)({ and: [{ clock: s, source: { searchStatus: l }, filter: ({ searchStatus: e }) => e === i.jy.Loading, fn: (e, t) => r(t) ? i.jy.Empty : i.jy.Finished, target: l }], or: { sid: "9p8gnq" } }), (0, a.sample)({ and: [{ clock: o, source: { searchStatus: l }, filter: ({ searchStatus: e }) => e === i.jy.Finished, fn: () => i.jy.Expired, target: l }], or: { sid: "ak0xvy" } }), { outputs: { $searchStatus: l } } })) }) } } }, 21824: function (e, t, s) { "use strict"; s.d(t, { s: function () { return _ } }); var a = s(30091), n = s(98116), i = s(72675), o = s(35529), r = s(47047), l = s(78364); const { createFlag: c } = l.f.inputs, d = (0, n.withFactory)({ sid: "-y4g7v", fn: () => (0, r.d)((() => c({ name: "asb-feat-my-orders", contract: o.Boolean, defaultValue: !1 }))) }).$value; var u = s(59051), m = s.n(u), p = s(96864); const { $userOrderCounters: h } = p.W.outputs, f = h.map((e => e?.new ?? 0)), g = h.map((e => { if (m()(e)) return !1; const { new: t, ...s } = e; return Object.values(s).reduce(((e, t) => e + t), 0) > 0 })), y = f.map((e => e > 0)), v = (0, n.withFactory)({ sid: "lkqfrr", fn: () => (0, i.x)(d, g) }), b = (0, n.withFactory)({ sid: "-wx2cd1", fn: () => (0, i.x)(d, y) }), x = { $isMyOrdersAvailable: v, $hasNewOrders: y, $shouldNotifyAboutNewOrders: b }, _ = (0, a.G6)({ importMetaUrl: "file:///home/jenkins/agent/workspace/selene/client/src/product/px_my_orders/services/my_orders_status/index.ts", api: { outputs: x } }) }, 30048: function (e, t, s) { "use strict"; s.d(t, { T: function () { return R } }), s(21703); var a = s(30091), n = s(98116), i = s(72675), o = s(54448), r = s(85349), l = s(27636), c = s(82672), d = s(38387), u = s(11763), m = s(85658), p = s(80943); const { matchPage: h, pages: f } = c.$.outputs, { $isMobile: g } = d.l.outputs, { $isHotelFormActive: y } = u.B.outputs, { startSearch: v } = p.K.inputs, { smoothScrollToTop: b } = m.u.inputs, { $scrollY: x } = m.u.outputs, _ = (0, n.createStore)(!1, { sid: "53ey5s" }), [C, w] = (0, n.withFactory)({ sid: "9ihz2f", fn: () => (0, l.K)((0, n.withFactory)({ sid: "5yso3i", fn: () => (0, i.x)(y, (0, n.withFactory)({ sid: "5zw9by", fn: () => (0, o.or)(h(f.HotelsPage).$isOpen, h(f.HotelsMapPage).$isOpen) }), g) })) }), k = (0, n.createEvent)({ sid: "-66z49a" }), S = (0, n.createEvent)({ sid: "-rlwfe2" }); (0, n.withFactory)({ sid: "jwjkkc", fn: () => (0, r.m)({ clock: k, target: _ }) }), (0, n.sample)({ and: [{ clock: k, target: b }], or: { sid: "kau7zq" } }), (0, n.sample)({ and: [{ clock: v, filter: C, fn: () => !0, target: _ }], or: { sid: "kdl6yj" } }), (0, n.sample)({ and: [{ clock: S, filter: C, fn: () => !0, target: _ }], or: { sid: "kszfkn" } }); const D = (0, n.combine)({ and: [{ scrollY: x, isHotelRawForm: _, isHotelRawFormPossible: C }, ({ scrollY: e, isHotelRawFormPossible: t, isHotelRawForm: s }) => !!t && (!!s || e > 340)], or: { sid: "an2qe4" } }); (0, n.sample)({ and: [{ clock: D, target: _ }], or: { sid: "ls69jr" } }); var F = s(67294), j = s(4190), N = s(531), I = s(34670), M = s(85893); const { $guests: T, $checkInDate: A, $checkOutDate: E, $destination: P } = N.c.outputs, $ = (0, F.memo)((() => { const { destination: e, guests: t, checkInDate: s, checkOutDate: a, rawFormClosedEvent: n } = (0, j.useUnit)({ destination: P, guests: T, checkInDate: A, checkOutDate: E, rawFormClosedEvent: k }); return (0, M.jsx)(I.P, { location: e, guests: t, checkInDate: s, checkOutDate: a, onEdit: n }) })); $.displayName = "HotelsRawFormContainer"; const R = (0, a.G6)({ importMetaUrl: "file:///home/jenkins/agent/workspace/selene/client/src/product/serp_hotels/services/hotels_raw_form/index.ts", api: { containers: { HotelsRawFormContainer: $ }, inputs: { formCollapsed: S }, outputs: { $isHotelRawForm: _, $isHotelRawFormPossible: C } }, attachTestApi: () => { throw new Error("Test API is not available in production") } }) }, 80943: function (e, t, s) { "use strict"; s.d(t, { Z: function () { return re }, K: function () { return ue } }), s(21703); var a = s(30091), n = s(98116), i = s(80094), o = s(78194), r = s(94590), l = s(21247), c = s(85349), d = s(47047), u = s(27636), m = s(75381), p = s(57640), h = s(82525), f = s(38387), g = s(35712), y = s(54428), v = s(73241), b = s(96025), x = s(8054), _ = s(25974); const { $hotelsResultsFeatFlag: C } = g.n.outputs, { searchParamsReady: w } = x.L.outputs, { $isHotelsMapResultsSyncExpEnabled: k } = g.n.outputs, { createHotelsSearchStarter: S, createHotelsResultsFetcher: D } = v.Q.factories, { createSearchStatus: F } = b.b.factories, j = (0, n.createEvent)({ sid: "uqtssa" }), N = (0, n.createEvent)({ sid: "-1ttqmw" }), I = (0, n.createEvent)({ sid: "d6s7e0" }), M = (0, n.createEvent)({ sid: "-3451tc" }), T = (0, n.createEvent)({ sid: "r9w43n" }), A = (0, n.createEvent)({ sid: "-vi4sia" }), E = (0, n.createEvent)({ sid: "-rc0l39" }), P = (0, n.createStore)(null, { sid: "-kld243" }), $ = (0, n.createStore)(null, { sid: "udthua" }), R = C.map((({ pollingInterval: e }) => e)), B = C.map((({ pollingTimeout: e }) => e)), O = C.map((({ pageSize: e }) => e)), H = O.map((e => ({ limit: e }))), q = h.B.outputs.urlWithApiHost(m.Nv`${p.H.HOTELS_ENGINE}${_.KV}`), L = (0, n.combine)({ and: [{ jwt: y.O.outputs.$jwt, isMobile: f.l.outputs.$isMobile }, ({ jwt: e, isMobile: t }) => "undefined" == typeof document ? {} : { Authorization: e ? `Bearer ${e}` : "", "X-Origin-Cookie": document.cookie, "X-Client-Type": t ? r.Bh.Mobile : r.Bh.Desktop }], or: { sid: "-37zzq8" } }), Z = (0, n.withFactory)({ sid: "j9qf41", fn: () => (0, d.d)(S, { $url: q, $headers: L, onSuccess: j, onFail: N, onExpire: M }) }), z = (0, n.withFactory)({ sid: "-jvt7i", fn: () => (0, d.d)((() => D({ $pollingInterval: R, $pollingTimeout: B, $initialRequestParams: H, completedPredicate: e => e.completed, path: _.K2, onComplete: T, onFail: I }))) }), G = (0, n.withFactory)({ sid: "-r8ozt8", fn: () => (0, d.d)((() => F({ searchStarted: Z.inputs.start, searchStartSuccess: j, searchCompleted: T, searchFailed: (0, n.merge)([I, N], { sid: "9fnlok" }), searchExpired: M, emptyPredicate: e => 0 === e.meta.total_hotels_count }))) }), V = Z.outputs.$searchSession.map((e => e?.searchId ?? null)), [U, W] = (0, n.withFactory)({ sid: "-abak3l", fn: () => (0, u.K)((0, n.combine)({ and: [{ isRequestPending: z.outputs.$isRequestPending, searchStatus: G.outputs.$searchStatus }, ({ isRequestPending: e, searchStatus: t }) => e && t === r.jy.Finished], or: { sid: "qcig4g" } })) }), K = z.outputs.$requestContext.map((e => Boolean(e.bounds))); (0, n.sample)({ and: [{ clock: j, source: O, fn: (e, t) => ({ session: t, requestParams: { limit: e, offset: 0 } }), target: z.inputs.startPolling }], or: { sid: "n5f2hi" } }), (0, n.sample)({ and: [{ clock: A, target: (0, n.withFactory)({ sid: "-7djeu5", fn: () => (0, l.h)({ source: P, requestParams: z.inputs.put }) }) }], or: { sid: "nmgovp" } }), (0, n.sample)({ and: [{ clock: E, target: (0, n.withFactory)({ sid: "6crmli", fn: () => (0, l.h)({ source: P, requestParams: z.inputs.update }) }) }], or: { sid: "nqv1ml" } }), (0, n.sample)({ and: [{ clock: w, filter: k, target: Z.inputs.start }], or: { sid: "o6t2u2" } }), (0, n.sample)({ and: [{ clock: N, target: $ }], or: { sid: "olniut" } }), (0, n.withFactory)({ sid: "ooehtm", fn: () => (0, c.m)({ clock: Z.inputs.start, target: [$, P] }) }); const J = { inputs: { startSearch: Z.inputs.start, putResults: A, updateResults: E, abortFetchResults: z.inputs.abort, searchExpired: Z.inputs.sessionExpired }, outputs: { searchStartSuccess: j, searchStartFailed: N, fetchResultsCompleted: T, fetchResultsFailed: I, $searchStatus: G.outputs.$searchStatus, $searchSession: Z.outputs.$searchSession, $searchId: V, $isResultsUpdating: U, $isMapBoundsApplied: K, $resultsRequestContext: z.outputs.$requestContext, $isSearchExpired: Z.outputs.$isExpired, $pageSize: O, $lastResultsUpdateSource: P, $startSearchError: $ }, internals: { searchStarter: Z, resultsFetcher: z, $isResultsUpdatingOverride: W } }, { notify: Y } = i.B.inputs, { translated: X } = o.J.outputs, { fetchResultsFailed: Q, $searchStatus: ee } = J.outputs; Y({ id: "hotels_search_error", autoClose: !0, clock: (0, n.sample)({ and: [{ clock: Q, source: ee, filter: e => e === r.jy.Finished }], or: { sid: "tpkpjq" } }), icon: "warning", message: X("service_hotels_search:errorNotificationMessage") }); var te = s(78260); const { $searchSession: se, searchStartFailed: ae, fetchResultsFailed: ne } = J.outputs, ie = (0, te.cr)("serp", { name: "hotels_search" }), oe = se.map((e => e?.searchId ?? null)); let re; (0, n.sample)({ and: [{ clock: ae, fn: e => ({ msg: "Hotels search start failed", error: new Error(e) }), target: ie.sendErrorLog }], or: { sid: "-ncrh0p" } }), (0, n.sample)({ and: [{ clock: ne, source: { searchId: oe }, fn: ({ searchId: e }, t) => ({ msg: "Hotels results fetching failed", error: new Error(t), extra: { searchId: e } }), target: ie.sendErrorLog }], or: { sid: "-mw9n7v" } }), function (e) { e.Pagination = "pagination", e.Filters = "filter", e.MapMove = "map_move", e.ResetBounds = "reset_bounds", e.ResetFilters = "reset_filters" }(re || (re = {})); const { internals: le, inputs: ce, outputs: de } = J, ue = (0, a.G6)({ importMetaUrl: "file:///home/jenkins/agent/workspace/selene/client/src/product/serp_hotels/services/search/index.ts", api: { internals: le, inputs: ce, outputs: de }, attachTestApi: () => { throw new Error("Test API is not available in production") } }) }, 40777: function (e, t, s) { "use strict"; s.d(t, { m: function () { return Ve } }); var a = {}; s.r(a), s.d(a, { profileContentPagesExceptPremium: function () { return I }, profileContentPagesWithPremium: function () { return M }, profileDocumentsPage: function () { return k }, profileIndexPage: function () { return x }, profileMyOrdersPage: function () { return F }, profileNotificationsPage: function () { return S }, profileOrderPage: function () { return j }, profilePage: function () { return b }, profilePremiumPage: function () { return C }, profileSettingsPage: function () { return w }, profileSubscriptionsPage: function () { return D }, profileUnknownPage: function () { return _ } }); var n = s(30091), i = s(35529), o = s(82672); const { matchPage: r, pages: l } = o.$.outputs, { ProfileIndexPage: c, ProfileUnknownPage: d, ProfilePremiumPage: u, ProfileAccountPages: m, ProfileSettingsPage: p, ProfileDocumentsPage: h, ProfileNotificationsPage: f, ProfileSubscriptionsPage: g, ProfileMyOrdersPage: y, ProfileOrderPage: v } = l, b = r(m), x = r(c), _ = r(d), C = r(u), w = r(p), k = r(h), S = r(f), D = r(g), F = r(y), j = r(v), N = (0, i.Union)(p, h, g, f, y, v), I = r(N), M = r((0, i.Union)(N, u)); var T = s(98116); const { ProfileAccountPages: A } = o.$.outputs.pages, E = { Settings: "settings", Subscriptions: "subscriptions", Documents: "documents", More: "more", Plus: "plus", Notifications: "notifications", MyOrders: "orders" }, P = Object.values(E), $ = { [E.Documents]: "profile_documents", [E.Notifications]: "profile_notifications", [E.Settings]: "profile_settings", [E.Subscriptions]: "profile_subscriptions", [E.More]: "profile_premium", [E.Plus]: "profile_premium", [E.MyOrders]: "profile_my_orders" }, R = { [E.Documents]: [], [E.Notifications]: [], [E.Settings]: [], [E.Subscriptions]: [], [E.More]: [], [E.Plus]: [], [E.MyOrders]: ["profile_order"] }; s(26699); var B = s(47047), O = s(78364); const H = (0, i.Record)({ routes: (0, i.Array)(i.String) }), q = ["settings", "notifications", "subscriptions"], L = (0, T.withFactory)({ sid: "wpb6bv", fn: () => (0, B.d)((() => O.f.inputs.createFlag({ name: "avs-feat-userAccountRoutes", contract: H, defaultValue: q, mapValue: ({ routes: e }) => e.filter((e => P.includes(e))) }))) }); var Z = s(69430), z = s(85893), G = s(67294); const V = ({ className: e, ...t }, s) => (0, z.jsx)("svg", { width: 24, height: 24, viewBox: "0 0 24 24", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: (0, z.jsx)("path", { fillRule: "evenodd", clipRule: "evenodd", d: "M14.002 3.223a9.03 9.03 0 0 0-4.003 0A3 3 0 0 1 5.402 5.88a8.99 8.99 0 0 0-2.004 3.466 3 3 0 0 1 0 5.31 8.99 8.99 0 0 0 2.004 3.466A3 3 0 0 1 10 20.777a9.03 9.03 0 0 0 4.003 0A3 3 0 0 1 18.6 18.12a8.99 8.99 0 0 0 2.003-3.466 3 3 0 0 1 0-5.31A8.991 8.991 0 0 0 18.6 5.879a3 3 0 0 1-4.597-2.656ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" }) }), U = (0, G.memo)((0, G.forwardRef)(V)); U.displayName = "Icon24ControlsSettings"; const W = ({ className: e, ...t }, s) => (0, z.jsx)("svg", { width: 24, height: 24, viewBox: "0 0 24 24", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: (0, z.jsx)("path", { fillRule: "evenodd", clipRule: "evenodd", d: "M20 5a3 3 0 0 0-3-3H4v20h13a3 3 0 0 0 3-3V5ZM7 11h10V9H7v2Zm10-4H7V5h10v2ZM9 19a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" }) }), K = (0, G.memo)((0, G.forwardRef)(W)); K.displayName = "Icon24CommonDocument"; var J = s(10614), Y = s(18611), X = s(69127); const Q = ({ className: e, ...t }, s) => (0, z.jsxs)("svg", { width: 24, height: 24, viewBox: "0 0 24 24", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: [(0, z.jsx)("path", { d: "M5.193 6h13.868l-.596-1.638a3 3 0 0 0-3.845-1.793L5.193 6Z" }), (0, z.jsx)("path", { fillRule: "evenodd", clipRule: "evenodd", d: "M5 8a3 3 0 0 0-3 3v6a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-1a2 2 0 1 1 0-4v-1a3 3 0 0 0-3-3H5Zm4.207 8.707 4.5-4.5-1.414-1.414L8.5 14.586l-1.793-1.793-1.414 1.414 2.5 2.5h1.414Z" })] }), ee = (0, G.memo)((0, G.forwardRef)(Q)); ee.displayName = "Icon24CommonOrder"; const te = { profile_settings: E.Settings, profile_notifications: E.Notifications, profile_documents: E.Documents, profile_subscriptions: E.Subscriptions, profile_premium: "premium", profile_index: null, profile_unknown: null, profile_my_orders: E.MyOrders, profile_order: null }, se = { settings: U, subscriptions: Z.C, documents: K, more: J.Z, plus: X.F, notifications: Y.g, orders: ee }; function ae(e) { return te[e] } var ne = s(42177), ie = s(21824); const { $isPremiumProfileRoutesAvailable: oe } = ne.X.outputs, { $isMyOrdersAvailable: re } = ie.s.outputs, le = [E.More, E.Plus, E.MyOrders], ce = [E.More, E.Plus], de = e => le.includes(e), ue = e => ce.includes(e), me = (0, T.combine)({ and: [{ [E.More]: oe, [E.Plus]: oe, [E.MyOrders]: re }], or: { sid: "9im9nn" } }), pe = (e, t) => { if (!e) return !1; const s = e.type; return $[t] === s || R[t].includes(s) }; var he = s(63832), fe = s(96864); const { $shouldNotifyAboutNewOrders: ge } = ie.s.outputs, ye = fe.W.outputs.$userInfo.map((e => e?.email_info.activation_status === he.G.Pending)), ve = (0, T.combine)({ and: [{ [E.Documents]: !1, [E.Notifications]: !1, [E.Subscriptions]: !1, [E.More]: !1, [E.Plus]: !1, [E.Settings]: ye, [E.MyOrders]: ge }], or: { sid: "-1j5sqg" } }), be = (0, T.combine)({ and: [{ routes: L.$value, profilePageMatch: b.$match, dynamicRoutesAvailability: me, routesNotifications: ve }, ({ routes: e, profilePageMatch: t, dynamicRoutesAvailability: s, routesNotifications: a }) => { const n = []; for (const i of e) { const e = $[i], o = { name: i, url: `/my/${i}`, isActive: pe(t, i), pageType: e, notify: a[i], premium: !1 }, r = de(i); r && s[i] && n.push({ ...o, premium: ue(i) }), r || n.push(o) } return n }], or: { sid: "-1qo2on" } }), xe = (0, T.attach)({ and: { source: be, effect: (e, t) => function (e, t) { return t.find((({ pageType: t }) => t === e))?.name ?? null }(t, e) }, or: { sid: "-eltveq" } }), _e = be.map((e => e.some((({ name: e }) => "subscriptions" === e)))); var Ce = s(78194); const we = "service_usercom_user_account_navigation", ke = (0, T.combine)({ and: [{ t: Ce.J.outputs.$t, page: M.$match }, ({ t: e, page: t }) => { if (t) { const s = ae(t.type); return s ? e(`${we}:menu.${s}`) : null } return null }], or: { sid: "tf27mz" } }), Se = (0, T.combine)({ and: [{ t: Ce.J.outputs.$t, pageName: ke }, ({ t: e, pageName: t }) => t ? e(`${we}:windowTitle`, { route: t }) : null], or: { sid: "-cqig1x" } }); var De = s(20611); const Fe = (0, T.createEvent)({ sid: "-pkrm35" }); (0, T.sample)({ and: [{ clock: Fe, source: be, fn: e => ({ pathname: e[0].url, type: "replace" }), target: De.D.inputs.navigateTo }], or: { sid: "-lza8y1" } }); const je = { inputs: { redirectToDefaultRoute: Fe, getRouteNameByTypeFx: xe }, outputs: { $navRoutes: be, $activePageName: ke, $activePageWindowTitle: Se, $isSubscriptionsRouteAvailable: _e, ...a } }; var Ne = s(4190), Ie = s(52247), Me = s(68621), Te = s(40540), Ae = s(53788); const Ee = (0, T.combine)({ and: [{ navRoutes: je.outputs.$navRoutes, isMyCashbackMarket: Ae.D.outputs.$isMyCashbackMarket, t: Ce.J.outputs.$t }, ({ navRoutes: e, isMyCashbackMarket: t, t: s }) => e.map((e => { const a = e.premium && t, n = a ? "myCashback" : ae(e.pageType); return { route: e, text: s(`service_usercom_user_account_navigation:menu.${n}`), icon: a ? Te.D : se[e.name], testId: `${e.name}-item`, notify: e.notify } }))], or: { sid: "uk4r2g" } }), { useLinkGenerator: Pe } = Ie.x.outputs; var $e = s(94184), Re = s.n($e), Be = s(80669), Oe = "s__PA0YsUHUSNRq39vHBLcv"; const He = ({ items: e, className: t }) => (0, z.jsx)(Be.i9, { className: t, children: e.map((({ route: e, testId: t, onClick: s, href: a, text: n, icon: i }) => (0, z.jsx)(Be.Dx, { testId: t, children: (0, z.jsx)(Be.F6, { active: e.isActive, onClick: s, href: a, activeClassName: Re()(e.premium && "s__dvxHgaSyFuS7vIRcGy1z"), title: e.name, children: (0, z.jsx)(Be.rU, { iconClassName: Re()(e.premium && ["s__LH7UxZ9BmfFJIBl_60NV", Oe]), textClassName: Re()(e.premium && "s__dCqaTQ1CJPG8NKRzbp90"), text: n, icon: i, notify: e.notify }) }) }, e.name))) }); var qe = s(49963), Le = s(44619), Ze = s(14711), ze = s(80871); const Ge = ({ items: e, className: t }) => (0, z.jsx)("nav", { className: t, children: e.map((({ route: e, testId: t, onClick: s, href: a, text: n, icon: i }) => (0, z.jsx)(Ze.p, { title: e.name, testId: t, renderAs: "a", href: a, onClick: s, leftSideContent: i && (e.premium ? (0, z.jsx)("div", { className: Re()("s__Inp60GTA7x1KZtyVvh1u", Oe), children: (0, z.jsx)(i, {}) }) : (0, z.jsx)(i, {})), labelContent: (0, z.jsx)(qe.x, { type: Le.y.Body1Semi, children: n }), labelClassName: "s__ioL_3TCO8CUspEWOXKVm", rightSideContent: (0, z.jsx)(ze.i, {}), rightSideClassName: "s__ufpXbwPwpbsXyJMst6Mo" }, e.name))) }), Ve = (0, n.G6)({ importMetaUrl: "file:///home/jenkins/agent/workspace/selene/client/src/product/usercom/services/profile_navigation/index.ts", api: { ...je, containers: { ProfileNavigation: function (e) { const { routes: t } = function ({ onNavLinkClick: e, premiumRouteSource: t }) { const { linkGenerator: s } = Pe(), { routesData: a, isAnyPremium: n, entryPointInteracted: i, getPageByPath: r, navigateTo: l } = (0, Ne.useUnit)({ routesData: Ee, isAnyPremium: Me.b.outputs.$isAnyPremium, entryPointInteracted: ne.X.inputs.entryPointInteracted, getPageByPath: o.$.outputs.$getPageByPath, navigateTo: De.D.inputs.navigateTo }), c = (0, G.useCallback)((() => { i(t) }), [i, t]); return { routes: a.map((a => { const { name: i, premium: o, url: d } = a.route, u = o && !n, m = o && n, p = s(d), h = m ? `${p}?source=${t}` : p; return { ...a, href: h, onClick: t => u ? c : e ? e(i) : "user_account" === r("/my").name ? (t.preventDefault(), l({ pathname: h, type: "push" })) : void 0 } })) } }(e); switch (e.viewType) { case "main": return (0, z.jsx)(He, { items: t, className: e.className }); case "flat": return (0, z.jsx)(Ge, { items: t, className: e.className }); default: return null } } } } }) }, 23109: function (e, t, s) { var a = { "./AC.svg": [25761, 41165], "./AD.svg": [69466, 48921], "./AE.svg": [68885, 69061], "./AF.svg": [28822, 18461], "./AG.svg": [44996, 86200], "./AI.svg": [83211, 78656], "./AL.svg": [11410, 7864], "./AM.svg": [7103, 41344], "./AO.svg": [77865, 83166], "./AQ.svg": [19937, 35218], "./AR.svg": [65657, 62569], "./AS.svg": [45164, 10960], "./AT.svg": [21029, 20103], "./AU.svg": [31196, 11889], "./AW.svg": [34626, 72717], "./AX.svg": [5116, 14234], "./AZ.svg": [1150, 76924], "./BA.svg": [71648, 89900], "./BB.svg": [27426, 13853], "./BD.svg": [79283, 18898], "./BE.svg": [417, 63987], "./BF.svg": [15445, 90411], "./BG.svg": [52891, 20654], "./BH.svg": [19127, 91076], "./BI.svg": [88034, 8280], "./BJ.svg": [60840, 37806], "./BL.svg": [99272, 37783], "./BM.svg": [20858, 49590], "./BN.svg": [72844, 17251], "./BO.svg": [85163, 20022], "./BQ.svg": [82903, 4847], "./BR.svg": [15119, 52566], "./BS.svg": [62694, 21362], "./BT.svg": [6209, 38839], "./BV.svg": [17760, 56833], "./BW.svg": [41676, 87542], "./BY.svg": [47866, 27804], "./BZ.svg": [40988, 45686], "./CA.svg": [95343, 13220], "./CC.svg": [96179, 79894], "./CD.svg": [69318, 59047], "./CF.svg": [53873, 19120], "./CG.svg": [30120, 62716], "./CH.svg": [82950, 97779], "./CI.svg": [49252, 37961], "./CK.svg": [97705, 69332], "./CL.svg": [55568, 75337], "./CM.svg": [81563, 24641], "./CN.svg": [22726, 14292], "./CO.svg": [36951, 26777], "./CR.svg": [32745, 68011], "./CU.svg": [23202, 11454], "./CV.svg": [12152, 96042], "./CW.svg": [85245, 77645], "./CX.svg": [72792, 1934], "./CY.svg": [34954, 67532], "./CZ.svg": [97808, 7070], "./DE.svg": [96779, 39849], "./DJ.svg": [88001, 2978], "./DK.svg": [93268, 24603], "./DM.svg": [26200, 11449], "./DO.svg": [93592, 84756], "./DZ.svg": [43500, 39424], "./EC.svg": [15359, 49787], "./EE.svg": [71920, 9111], "./EG.svg": [51088, 7064], "./EH.svg": [23756, 16635], "./ER.svg": [67810, 59016], "./ES.svg": [61719, 17440], "./ET.svg": [36595, 48481], "./EU.svg": [84735, 15866], "./FI.svg": [15394, 48721], "./FJ.svg": [85047, 68521], "./FK.svg": [68967, 6240], "./FM.svg": [27315, 66704], "./FO.svg": [32154, 9609], "./FR.svg": [73027, 69124], "./GA.svg": [3840, 96472], "./GB.svg": [21261, 23242], "./GD.svg": [25465, 20986], "./GE.svg": [33272, 84156], "./GF.svg": [3959, 96791], "./GG.svg": [25745, 37066], "./GH.svg": [21380, 67842], "./GI.svg": [29381, 44523], "./GL.svg": [47701, 75414], "./GM.svg": [4749, 46868], "./GN.svg": [9427, 56943], "./GP.svg": [75564, 76820], "./GQ.svg": [83755, 97544], "./GR.svg": [46095, 84332], "./GS.svg": [54777, 85412], "./GT.svg": [49723, 48694], "./GU.svg": [15348, 80441], "./GW.svg": [3102, 51179], "./GY.svg": [18378, 80720], "./HK.svg": [29029, 37691], "./HM.svg": [48809, 87791], "./HN.svg": [1070, 88409], "./HR.svg": [38466, 80308], "./HT.svg": [60143, 59763], "./HU.svg": [42527, 12294], "./ID.svg": [15883, 14839], "./IE.svg": [82795, 98213], "./IL.svg": [41193, 95752], "./IM.svg": [61889, 84610], "./IN.svg": [89517, 32416], "./IO.svg": [13743, 32056], "./IQ.svg": [46697, 32769], "./IR.svg": [43626, 60490], "./IS.svg": [26837, 71214], "./IT.svg": [75281, 99508], "./JE.svg": [70055, 78953], "./JM.svg": [92609, 95709], "./JO.svg": [85273, 22737], "./JP.svg": [21691, 59863], "./KE.svg": [5764, 25510], "./KG.svg": [91438, 6437], "./KH.svg": [45893, 17484], "./KI.svg": [25038, 81665], "./KM.svg": [35647, 60127], "./KN.svg": [50462, 13422], "./KP.svg": [63227, 39850], "./KR.svg": [57813, 39456], "./KW.svg": [14033, 82558], "./KY.svg": [20334, 99757], "./KZ.svg": [30965, 92243], "./LA.svg": [79829, 47036], "./LB.svg": [72649, 61673], "./LC.svg": [78692, 13482], "./LI.svg": [89883, 20774], "./LK.svg": [88904, 16544], "./LR.svg": [8157, 35587], "./LS.svg": [58757, 83799], "./LT.svg": [92485, 90069], "./LU.svg": [43483, 35848], "./LV.svg": [79584, 36600], "./LY.svg": [33405, 99786], "./MA.svg": [73604, 16962], "./MC.svg": [29687, 95436], "./MD.svg": [22982, 69986], "./ME.svg": [19278, 83553], "./MF.svg": [70037, 73855], "./MG.svg": [30010, 13522], "./MH.svg": [79398, 15545], "./MK.svg": [77339, 91473], "./ML.svg": [50153, 70289], "./MM.svg": [2461, 91046], "./MN.svg": [60499, 71478], "./MO.svg": [82775, 9008], "./MP.svg": [9828, 45350], "./MQ.svg": [39333, 55769], "./MR.svg": [68397, 24392], "./MS.svg": [15875, 60197], "./MT.svg": [31958, 16214], "./MU.svg": [90902, 62133], "./MV.svg": [6120, 18308], "./MW.svg": [45929, 58382], "./MX.svg": [12102, 51633], "./MY.svg": [72317, 56793], "./MZ.svg": [57779, 7683], "./NA.svg": [96091, 55127], "./NC.svg": [81578, 71660], "./NE.svg": [97687, 31470], "./NF.svg": [54685, 20035], "./NG.svg": [43165, 70081], "./NI.svg": [61561, 57292], "./NL.svg": [12880, 89313], "./NO.svg": [80754, 11959], "./NP.svg": [69982, 43642], "./NR.svg": [77198, 63836], "./NU.svg": [94731, 97928], "./NZ.svg": [75934, 43549], "./OM.svg": [98627, 4974], "./PA.svg": [26114, 90361], "./PE.svg": [72780, 852], "./PF.svg": [97511, 81097], "./PG.svg": [47689, 46290], "./PH.svg": [65901, 64769], "./PK.svg": [69748, 98194], "./PL.svg": [8065, 69051], "./PM.svg": [23093, 37201], "./PN.svg": [39825, 39234], "./PR.svg": [70334, 50413], "./PS.svg": [75364, 45516], "./PT.svg": [70378, 65780], "./PW.svg": [14435, 74361], "./PY.svg": [47698, 51175], "./QA.svg": [90776, 59624], "./RE.svg": [88157, 61097], "./RO.svg": [64586, 54565], "./RS.svg": [78829, 82069], "./RU.svg": [28182, 43138], "./RW.svg": [47024, 23554], "./SA.svg": [99566, 80075], "./SB.svg": [59033, 57525], "./SC.svg": [63754, 29051], "./SD.svg": [97381, 23534], "./SE.svg": [86278, 90137], "./SG.svg": [41583, 90594], "./SH.svg": [1241, 59580], "./SI.svg": [10096, 64740], "./SJ.svg": [61462, 82815], "./SK.svg": [99346, 90748], "./SL.svg": [70024, 45940], "./SM.svg": [37324, 18284], "./SN.svg": [81865, 26714], "./SO.svg": [12647, 72469], "./SR.svg": [72637, 59466], "./SS.svg": [9037, 65394], "./ST.svg": [3525, 93375], "./SV.svg": [23828, 83978], "./SX.svg": [66396, 63308], "./SY.svg": [61237, 33751], "./SZ.svg": [39948, 19131], "./TA.svg": [27994, 76693], "./TC.svg": [16724, 30520], "./TD.svg": [97139, 78626], "./TF.svg": [28449, 98007], "./TG.svg": [8603, 84890], "./TH.svg": [66694, 10277], "./TJ.svg": [2979, 18884], "./TK.svg": [99837, 51968], "./TL.svg": [43474, 53557], "./TM.svg": [7890, 99398], "./TN.svg": [10321, 20160], "./TO.svg": [79109, 97481], "./TR.svg": [72919, 28639], "./TT.svg": [66354, 11380], "./TV.svg": [19533, 24142], "./TW.svg": [87603, 78665], "./TZ.svg": [5580, 15666], "./UA.svg": [49694, 92053], "./UG.svg": [35350, 65397], "./UM.svg": [87749, 69602], "./US.svg": [78905, 76634], "./UY.svg": [69252, 72437], "./UZ.svg": [52357, 38644], "./VA.svg": [60450, 78492], "./VC.svg": [17370, 19188], "./VE.svg": [59382, 8889], "./VG.svg": [92398, 2547], "./VI.svg": [49920, 74993], "./VN.svg": [21448, 78681], "./VU.svg": [83373, 74319], "./WF.svg": [36118, 61742], "./WS.svg": [46610, 45298], "./XK.svg": [82107, 59940], "./YE.svg": [39301, 15450], "./YT.svg": [40634, 6950], "./ZA.svg": [72561, 96734], "./ZM.svg": [56335, 52357], "./ZW.svg": [16024, 21244] }; function n(e) { if (!s.o(a, e)) return Promise.resolve().then((function () { var t = new Error("Cannot find module '" + e + "'"); throw t.code = "MODULE_NOT_FOUND", t })); var t = a[e], n = t[0]; return s.e(t[1]).then((function () { return s.t(n, 17) })) } n.keys = function () { return Object.keys(a) }, n.id = 23109, e.exports = n }, 49317: function (e, t, s) { "use strict"; s.d(t, { Z: function () { return i } }); var a = s(19013), n = s(13882); function i(e) { (0, n.Z)(1, arguments); var t = (0, a.Z)(e), s = t.getDay(); return 0 === s || 6 === s } }, 50361: function (e, t, s) { var a = s(85990); e.exports = function (e) { return a(e, 5) } }, 25309: function (e, t, s) { var a = s(92822)("cloneDeep", s(50361), s(69087)); a.placeholder = s(69306), e.exports = a }, 39104: function (e, t, s) { var a = s(92822)("slice", s(12571)); a.placeholder = s(69306), e.exports = a }, 12571: function (e, t, s) { var a = s(14259), n = s(16612), i = s(40554); e.exports = function (e, t, s) { var o = null == e ? 0 : e.length; return o ? (s && "number" != typeof s && n(e, t, s) ? (t = 0, s = o) : (t = null == t ? 0 : i(t), s = void 0 === s ? o : i(s)), a(e, t, s)) : [] } }, 68689: function (e, t, s) { "use strict"; var a; s.d(t, { d: function () { return a } }), function (e) { e.Origin = "origin", e.Destination = "destination" }(a || (a = {})) }, 16464: function (e, t, s) { "use strict"; s.d(t, { i: function () { return o } }); var a = s(85893), n = s(67294); const i = ({ className: e, ...t }, s) => (0, a.jsx)("svg", { width: 16, height: 16, viewBox: "0 0 16 16", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: (0, a.jsx)("path", { fillRule: "evenodd", clipRule: "evenodd", d: "M11.44 3.5H4V2h9.25l.75.75V12h-1.5V4.56L3.06 14 2 12.94l9.44-9.44Z" }) }), o = (0, n.memo)((0, n.forwardRef)(i)); o.displayName = "Icon16ControlsLaunch" }, 72914: function (e, t, s) { "use strict"; s.d(t, { t: function () { return o } }); var a = s(85893), n = s(67294); const i = ({ className: e, ...t }, s) => (0, a.jsx)("svg", { width: 16, height: 16, viewBox: "0 0 16 16", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: (0, a.jsx)("path", { fillRule: "evenodd", clipRule: "evenodd", d: "M13.5 6.5a5.5 5.5 0 1 0-11 0c0 4.5 5 8.5 5 8.5h1s5-4 5-8.5ZM8 9a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z" }) }), o = (0, n.memo)((0, n.forwardRef)(i)); o.displayName = "Icon16ProductsGuides" }, 49366: function (e, t, s) { "use strict"; s.d(t, { s: function () { return o } }); var a = s(85893), n = s(67294); const i = ({ className: e, ...t }, s) => (0, a.jsx)("svg", { width: 24, height: 24, viewBox: "0 0 24 24", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: (0, a.jsx)("path", { d: "m8.518 4.76 5.127 2.39 3.758-1.368a2.992 2.992 0 0 1 1.898-.05l.448.137a2.052 2.052 0 0 1 1.328 1.26l.06.164a1.302 1.302 0 0 1-.779 1.67l-9.476 3.449a8 8 0 0 1-8.866-2.377l-.16-.19 1.88-.685 1.922.897 3.1-1.129-2.12-3.485 1.88-.684ZM20 17H4v2h16v-2Z" }) }), o = (0, n.memo)((0, n.forwardRef)(i)); o.displayName = "Icon24CommonAirport" }, 88236: function (e, t, s) { "use strict"; s.d(t, { M: function () { return o } }); var a = s(85893), n = s(67294); const i = ({ className: e, ...t }, s) => (0, a.jsx)("svg", { width: 24, height: 24, viewBox: "0 0 24 24", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: (0, a.jsx)("path", { fillRule: "evenodd", clipRule: "evenodd", d: "M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0Zm11.788 6.423-.955-1.591L12 16.22V14.5l1.61-1.207-1.34-1.834-4.9 1.095-2.343-1.172a6.965 6.965 0 0 0 1.431 4.896A6.987 6.987 0 0 0 12 19c.99 0 1.933-.206 2.788-.577Zm1.848-11.668L16.22 8h-2.135l-1.194-1.194-1.512 1.08 4.338 2.366 1.348 2.248h1.916a6.983 6.983 0 0 0-2.347-5.745Z" }) }), o = (0, n.memo)((0, n.forwardRef)(i)); o.displayName = "Icon24CommonAnywhere" }, 53019: function (e, t, s) { "use strict"; s.d(t, { O: function () { return o } }); var a = s(85893), n = s(67294); const i = ({ className: e, ...t }, s) => (0, a.jsxs)("svg", { width: 24, height: 24, viewBox: "0 0 24 24", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: [(0, a.jsx)("path", { fillRule: "evenodd", clipRule: "evenodd", d: "M7.334 6.596A4 4 0 0 1 11.079 4h1.842a4 4 0 0 1 3.745 2.596L17.193 8H21v3a3 3 0 0 1-3 3h-4v-1a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v1H6a3 3 0 0 1-3-3V8h3.807l.527-1.404ZM8.943 8h6.114l-.263-.702A2 2 0 0 0 12.92 6h-1.842a2 2 0 0 0-1.873 1.298L8.943 8Z" }), (0, a.jsx)("path", { d: "M20 16v4H4v-4h16Z" })] }), o = (0, n.memo)((0, n.forwardRef)(i)); o.displayName = "Icon24CommonB2bSuitcase" }, 18611: function (e, t, s) { "use strict"; s.d(t, { g: function () { return o } }); var a = s(85893), n = s(67294); const i = ({ className: e, ...t }, s) => (0, a.jsxs)("svg", { xmlns: "http://www.w3.org/2000/svg", width: 24, height: 24, viewBox: "0 0 24 24", fill: "currentColor", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: [(0, a.jsx)("path", { d: "M18.962 8.842a3 3 0 1 1-1.924-5.685 3 3 0 0 1 1.924 5.685Z" }), (0, a.jsx)("path", { d: "M3 20V7a3 3 0 0 1 3-3h7.416A5 5 0 0 0 19 10.9V15a3 3 0 0 1-3 3H8l-4 2H3Z" })] }), o = (0, n.memo)((0, n.forwardRef)(i)); o.displayName = "Icon24CommonNotify" }, 36758: function (e, t, s) { "use strict"; s.d(t, { Y: function () { return o } }); var a = s(85893), n = s(67294); const i = ({ className: e, ...t }, s) => (0, a.jsxs)("svg", { width: 24, height: 24, viewBox: "0 0 24 24", fill: "currentColor", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": !0, className: e, "data-test-id": "icon", ref: s, style: { display: "inline-block" }, ...t, children: [(0, a.jsx)("path", { d: "M11 10H9v2h2v-2ZM13 10h2v2h-2v-2ZM11 14H9v2h2v-2ZM13 14h2v2h-2v-2Z" }), (0, a.jsx)("path", { fillRule: "evenodd", clipRule: "evenodd", d: "M7 3h2v1h6V3h2v1a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3V3ZM6 8v9a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V8H6Z" })] }), o = (0, n.memo)((0, n.forwardRef)(i)); o.displayName = "Icon24ControlsCalendarMonth" }, 14711: function (e, t, s) { "use strict"; s.d(t, { p: function () { return m } }); var a = s(85893), n = s(67294), i = s(94184), o = s(49963), r = s(44619), l = s(80191), c = { tableCell: "s__M8njCacQJr_0KjtoyqEm", title: "s__kXMpHHdQh1NAdSEJiEUG", subtitle: "s__faKUT1c57DUMAmin3_As", content: "s__VHwLO_1h1D8c4cv_JGWL", cell: "s__grHlAhVTfBCndz4ItejZ", divider: "s__pvf0en6SeuMDnP2Uqzmz", preventHoverState: "s__RZJWzinGGTO4JIML0D5p", disabled: "s__uzrNgEpV8STrAVOwTRBy", leftSide: "s__KYlUOiUmifA_PPy3ojKe", rightSideAddition: "s__deCdu79vljV5JF3Sdfhe", rightSide: "s__SOYvTQoRs13_JlgZbl34", label: "s__eDxmSopi3L7qKM3pMOuB", mainText: "s__LI48T8KqYO4pUNnzOE9w", subText: "s__JGVZ5ZvZMdieHitZnRZZ" }; s(19959); const d = e => { switch (e) { case "title": return r.y.Title3Bold; case "subtitle": return r.y.Body1Bold; default: return r.y.Body1Regular } }, u = ({ cellType: e = "cell", mainText: t, subText: s, mainTextTruncateMode: u, subTextTruncateMode: m, renderAs: p = "div", hideRightSideAddition: h = !1, preventHoverState: f = !1, className: g, leftSideClassName: y, labelClassName: v, rightSideAdditionClassName: b, rightSideClassName: x, leftSideContent: _, labelContent: C, rightSideAdditionContent: w, rightSideContent: k, testId: S, ...D }, F) => { const j = "subtitle" !== e, N = (0, a.jsxs)(a.Fragment, { children: [(0, a.jsx)(l.i, { className: c.divider }), (0, a.jsxs)("div", { className: c.content, children: [j && (0, a.jsx)("div", { className: i(c.leftSide, y), children: _ }), (0, a.jsx)("div", { className: i(c.label, v), children: C ?? (0, a.jsxs)(a.Fragment, { children: [t && (0, a.jsx)(o.x, { type: d(e), transformOnMobile: !0, className: c.mainText, truncateMode: u, children: t }), s && (0, a.jsx)(o.x, { type: r.y.Body3Regular, className: c.subText, truncateMode: m, children: s })] }) }), !h && j && (0, a.jsx)("div", { className: i(c.rightSideAddition, b), children: w }), j && (0, a.jsx)("div", { className: i(c.rightSide, x), children: k })] })] }); return n.createElement(p, { "data-test-id": S, className: i(c.tableCell, c[e], { [c.preventHoverState]: f, [c.disabled]: D.disabled }, g), ref: F, ...D }, N) }, m = (0, n.memo)((0, n.forwardRef)(u)) }, 61079: function (e, t, s) { "use strict"; s.d(t, { D: function () { return n } }); var a = s(67294); const n = e => { const t = (0, a.useRef)(); return (0, a.useEffect)((() => { t.current = e })), t.current } }, 62041: function (e, t, s) { "use strict"; s.d(t, { F: function () { return f } }); var a = s(85893), n = s(67294), i = s(80705), o = s(94184), r = s(67907), l = s(48500), c = s(23018), d = s(37132); const u = ({ suggestions: e, getHelpers: t, highlightedIndex: s, customItem: i }) => { const o = (0, d.jl)(e), r = (0, d.Df)(o); return (0, a.jsx)("section", { "data-test-id": "autocomplete-menu", children: o.map(((e, l) => (0, a.jsxs)("section", { children: [e.title !== d.x4 && o.length > 2 && (0, a.jsx)("p", { className: "s__O3HyL9_vSyCIMC85tTkU", children: e.title }), e.items.map(((e, a) => (0, n.createElement)(c.h, { ...t({ item: e, type: "button" }), customElement: i, highlighted: s === r(l, a), key: e.id, item: e })))] }, e.title))) }) }; s(26699); const m = e => e ? e.value : ""; var p = s(28580), h = { variables: "s__WI0eAImzZPQntPLFaDm3", dropdown: "s__VNqQMHwM8669SBqGm6gy" }; const f = (0, n.forwardRef)((({ id: e, value: t, fetcher: s, placeholder: c, customItem: d, onInputBlur: f, onInputFocus: g, onItemSelect: y, customInput: v, error: b, containerClassName: x, inputClassName: _, dropdownClassName: C, inputInnerClassName: w, hasFocus: k, autoSelect: S, title: D, testId: F, tabIndex: j, hideTitle: N, inputLoading: I }, M) => { const { downshiftInputValue: T, suggestions: A, handleStateChange: E, inputRef: P } = ((e, t, s) => { const [a, i] = (0, n.useState)(null), [o, r] = (0, n.useState)([]), l = (0, n.useRef)(null); return (0, n.useEffect)((() => { s ? setTimeout((() => { l.current?.select() }), 50) : l.current?.blur() }), [s]), { downshiftInputValue: a, suggestions: o, handleStateChange: s => { s.selectedItem ? t && (i(s.selectedItem.value), t(s.selectedItem)) : l.current === document.activeElement && (async t => { if (i(t), "string" != typeof t) return; const s = await e.fetch(t); r(s) })(s.inputValue ?? null) }, inputRef: l } })(s, y, k); ((e, t, s, a, i) => { const [o, r] = (0, n.useState)(e); (0, n.useEffect)((() => { if (!a) return () => null; const t = setTimeout((() => { r(e) }), 600); return () => { clearTimeout(t) } }), [e, a]), (0, n.useEffect)((() => { if (a && s && e) { if (t.length > 1 && e !== o) return; const s = ((e, t) => { if (!t.length) return !1; const s = e.toLowerCase(); return !(t.filter((e => e.value.toLowerCase().includes(s))).length > 1 || t[0].value.toLowerCase() !== s || (a = t[0], t.some((e => e.secondary === a.primary)))); var a })(e, t); s && i && i(t[0]) } }), [e, t, s, a, o, i]) })(T, A, k, S, y); const { createHandleInputBlur: $, createHandleInputFocus: R } = ((e, t, { onInputBlur: s, onInputFocus: a }) => ({ createHandleInputFocus: e => () => { e.selectedItem || e.openMenu(), a && a() }, createHandleInputBlur: a => async () => { if (a.closeMenu(), s && s(), a.inputValue) { if (a.inputValue === a.selectedItem?.value) return; let s = await e.choice(t, a.inputValue); s || (s = a.selectedItem); const n = s?.value || a.inputValue; a.setState({ selectedItem: s, inputValue: n }) } else a.setState({ selectedItem: null }) } }))(s, A, { onInputBlur: f, onInputFocus: g }), B = (0, n.useMemo)((() => v || p.I), [v]); return (0, a.jsx)(i.ZP, { id: e, itemToString: m, onStateChange: E, onSelect: y, selectedItem: t, ref: M, children: e => (0, a.jsx)("div", { className: o(h.variables, x), "data-test-id": F ?? "autocomplete", children: (0, a.jsx)(r.L, { visible: e.isOpen && A.length > 0, position: l.i.BottomRight, contentClassName: o(h.dropdown, C), hideArrow: !0, content: (0, a.jsx)(u, { suggestions: A, highlightedIndex: e.highlightedIndex, getHelpers: e.getItemProps, customItem: d }), children: (0, a.jsx)(B, { ...e.getInputProps(), forwardedRef: P, onBlur: $(e), onFocus: R(e), value: e.inputValue ?? void 0, item: e.selectedItem, placeholder: c, className: o(h.input, _), innerClassname: w, title: D, error: b, tabIndex: j, hideTitle: N, loading: I }) }) }) }) })); f.displayName = "Autocomplete" }, 23018: function (e, t, s) { "use strict"; s.d(t, { h: function () { return l } }); var a = s(85893), n = s(67294), i = s(94184), o = "s__BLQdtijJtKgvuPXdOgO0"; const r = ({ item: e, customElement: t, highlighted: s, additionalOnClick: n, testId: r, ...l }) => { const c = Boolean(e.secondary), d = c ? `${e.primary}, ` : e.primary; if (t) { const n = t; return (0, a.jsx)(n, { item: e, highlighted: s, ...l }) } return (0, a.jsxs)("button", { className: i("s__KRUwm5_kYx_cSurb4Esu", s && "s__BUMchp9DR4Y726rdVj3D"), "data-test-id": r ?? "autocomplete-item", ...l, children: [(0, a.jsxs)("span", { className: "s__MiLuJ9nYrf0KcKi9EH4P", children: [(0, a.jsx)("span", { className: "s__Jz5_hGXQ0m94SarEnG40", children: d }), c && (0, a.jsx)("span", { className: o, children: e.secondary })] }), (0, a.jsx)("span", { className: o, children: e.comment })] }) }, l = (0, n.memo)(r) }, 37132: function (e, t, s) { "use strict"; s.d(t, { Df: function () { return u }, jl: function () { return d }, x4: function () { return c } }); var a = s(88846), n = s(46898), i = s(78085), o = s(66415), r = s(63360), l = s(5500); const c = "__@aviasales/ui:autocomplete_default_category", d = e => n(i(((e, t) => { const s = t?.category || c, a = e[s]?.items ?? []; return { ...e, [s]: { category: s, type: t.type, items: [...a, t] } } }), {}), o((e => e.type === l.A.Anywhere || e.type === l.A.History || e.type === l.A.Country)), r, a((({ category: e, items: t }) => ({ title: e, items: t }))))(e), u = e => (t, s) => e.slice(0, t).map((e => e.items.length)).reduce(((e, t) => e + t), 0) + s }, 45594: function (e, t, s) { "use strict"; s.d(t, { W: function () { return l } }); var a = s(85893), n = s(67294), i = s(94184), o = s(28225), r = JSON.parse('["AC","AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","EU","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TA","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","XK","YE","YT","ZA","ZM","ZW"]'); const l = (0, n.memo)((({ countryCode: e, className: t }) => { const { t: l } = (0, o.useTranslation)("uiKit"), c = function (e) { const [t, a] = (0, n.useState)(null), i = e.toUpperCase(), o = (0, n.useCallback)((async () => { const e = await s(23109)(`./${i}.svg`); a(e.default) }), [i]); return (0, n.useEffect)((() => { var e; e = i, r.indexOf(e) >= 0 && o() }), [o, i]), t }(e); return c ? (0, a.jsx)("img", { src: c, alt: l("flag.description", { country: e }), className: i("s__XRs7wLF06BTwI6fxqhPA", t) }) : null })); l.displayName = "Flag" } }]);
// //# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/shared-4dbf5de51a55bd494e227ee90f6569c525326376.63a95528294e6ba9e96c.min.js.map