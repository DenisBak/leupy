"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[52647],{15126:function(e,t,n){n.d(t,{L:function(){return p},H:function(){return pe}}),n(26699);var a=n(98116),o=n(67803),i=n(5500),r=n(23446),d=n(20611),s=n(38387),l=n(96864),u=n(79403),c=n(35529);let p,g;!function(e){e.Top="top",e.Third="third",e.Bottom="bottom",e.Skyscraper="skyscraper",e.Sticker="sticker",e.MainMarketing="main_marketing",e.DirectionScreen="directionscreen",e.HotelsMainFirst="hotels_main_first",e.HotelsMainSecond="hotels_main_second"}(p||(p={})),function(e){e.Desktop="desktop",e.Mobile="mobile"}(g||(g={}));const m=(0,c.Record)({type:(0,c.Literal)("doubleClick"),gamPlacement:c.String,size:(0,c.Union)((0,c.Literal)("fluid"),(0,c.Tuple)((0,c.Literal)("fluid")),(0,c.Tuple)(c.Number,c.Number))}),y=(0,c.Record)({type:(0,c.Literal)("adFox"),ownerId:c.Number,params:(0,c.Dictionary)(c.String),adUnit:(0,c.Record)({sizes:(0,c.Array)((0,c.Tuple)(c.Number,c.Number)),bids:(0,c.Array)((0,c.Record)({bidder:c.String,params:(0,c.Record)({placementId:c.String})}))}).optional()}),b=(0,c.Union)(m,y),f=(0,c.Record)({visible:c.Boolean,slots:(0,c.Array)(b)}),C=(0,c.Record)({[g.Desktop]:(0,c.Optional)(f),[g.Mobile]:(0,c.Optional)(f)}),I=(0,c.Record)({enabled:c.Boolean,placements:(0,c.Record)({[p.Skyscraper]:(0,c.Optional)(C),[p.Sticker]:(0,c.Optional)(C),[p.Third]:(0,c.Optional)(C),[p.Top]:(0,c.Optional)(C),[p.Bottom]:(0,c.Optional)(C),[p.MainMarketing]:(0,c.Optional)(C),[p.DirectionScreen]:(0,c.Optional)(C),[p.HotelsMainFirst]:(0,c.Optional)(C),[p.HotelsMainSecond]:(0,c.Optional)(C)})});var v=n(47047),L=n(78364);const{createFlag:k}=L.f.inputs,P=(0,a.withFactory)({sid:"b0pi4l",fn:()=>(0,v.d)((()=>k({name:"avs-feat-ad",contract:I,defaultValue:{enabled:!1,placements:{}}})))});var R=n(99186);const{$isMobile:h}=s.l.outputs,{$topLevelDomain:D}=d.D.outputs,{$userLoggedIn:E}=l.W.outputs,{$brand:w}=u.U.outputs,{$language:A}=R.l.outputs,S=(0,a.combine)({and:[h,e=>e?g.Mobile:g.Desktop],or:{sid:"-idgfh5"}}),_=(0,a.combine)({and:[P.$value,({enabled:e})=>e],or:{sid:"n651mb"}}),M=(0,a.combine)({and:[{adConfig:P.$value,adLayout:S},({adConfig:e,adLayout:t})=>Object.entries(e.placements).filter((([e])=>Object.values(p).includes(e))).filter((([,e])=>e[t])).map((([e,n])=>[e,n[t]])).reduce(((e,[t,n])=>({...e,[t]:n})),{})],or:{sid:"rq4124"}}),x=(0,a.combine)({and:[{placementCollection:M,isAdEnabled:_},({placementCollection:e,isAdEnabled:t})=>t?Object.entries(e).filter((([,e])=>e.visible)).map((([e])=>e)):[]],or:{sid:"-d14xai"}});var B=n(65752),$=n(67294),O=n(4190),N=n(47166),q=n.n(N),U=n(85893);const j=({size:e,placement:t,gamPlacement:n,containerModel:a})=>{const o=(0,$.useId)();return(0,O.useGate)(a.InitGate,{slotId:o,placement:t,gamPlacement:n,size:e}),(0,U.jsx)("div",{id:o})};var z=n(59051),F=n.n(z),G=n(30494),T=n.n(G),Y=n(29893),H=n.n(Y),V=n(46898),K=n.n(V),Q=n(42583),W=n.n(Q);const Z={},J=e=>{const t=window.googletag||{};t.cmd=t.cmd||[],t.cmd.push((()=>{try{e()}catch(e){}}))},X=e=>{J((()=>{const t=Z[e];t&&(googletag.pubads().removeEventListener("slotRequested",t.requestListener),googletag.pubads().removeEventListener("slotRenderEnded",t.renderListener),googletag.destroySlots([t.slot]),delete Z[e])}))};var ee=n(63246);function te({model:e}){const t=(0,O.createGate)({and:[],or:{sid:"n2unxv"}}),n=e.inputs.adInited,o=(0,a.createEffect)((({placement:t,gamPlacement:n,size:o,slotId:i,targetingParams:r})=>{const d=(0,a.scopeBind)(e.inputs.adRequested),s=(0,a.scopeBind)(e.inputs.adNotRendered),l=(0,a.scopeBind)(e.inputs.adRendered),u=(0,a.scopeBind)(e.inputs.adLoaded);var c;(({slotName:e,slotSizes:t,id:n,targetingParams:a={},onRequest:o,onRender:i,onError:r})=>{J((()=>{X(n),googletag.pubads().enableSingleRequest();const d=googletag.defineSlot(e,t,n);if(null===d)return;const s=H()(F())(a);d.addService(googletag.pubads()).updateTargetingFromMap(s).setCollapseEmptyDiv(!0,!0),googletag.enableServices();const l=e=>{e.slot.getSlotElementId()===n&&o?.(n)},u=e=>{e.slot.getSlotElementId()===n&&(e.isEmpty?r?.(n):i?.(n))};Z[n]={slot:d,requestListener:l,renderListener:u},googletag.pubads().addEventListener("slotRequested",l),googletag.pubads().addEventListener("slotRenderEnded",u)}))})({slotName:n,slotSizes:o,id:i,targetingParams:r,onRequest:()=>d(t),onRender:()=>{u({placement:t}),l(t)},onError:()=>s(t)}),c=i,J((()=>{const e=Z[c];e&&(googletag.display(e.slot),googletag.pubads().refresh([e.slot]))}))}),{sid:"7hfwh6"}),i=(0,a.createEffect)((({slotId:e})=>{X(e)}),{sid:"rjzvkf"}),r=e.outputs.$targetingParams.map((e=>{const t={ddate:e.departureDate,rdate:e.arrivalDate,orgn_airpt:e.originAirport,orgn_city:e.originCity,orgn_ctry:e.originCountry,dest_airpt:e.destinationAirport,dest_city:e.destinationCity,dest_ctry:e.destinationCountry,trp_cls:e.tripClass,adt:e.adultsCount,cld:e.childrenCount,inf:e.infantsCount,td:e.tripDuration,host:e.topLevelDomain,trp_type:e.tripDirection,login:e.userLoggedIn?"1":"0",brand:e.brand,lang:e.language,country:e.country,gate_id:e.gateId,region_id:e.regionId};return K()([H()(F()),T()(W())])(t)}));return(0,a.sample)({and:[{clock:t.open,source:{targetingParams:r},filter:ee.y.outputs.$isClient,fn:({targetingParams:e},t)=>({...t,targetingParams:e}),target:o}],or:{sid:"orshy9"}}),(0,a.sample)({and:[{clock:o.done,fn:e=>e.params.placement,target:n}],or:{sid:"p9dwxt"}}),(0,a.sample)({and:[{clock:t.close,filter:ee.y.outputs.$isClient,target:i}],or:{sid:"po8cyk"}}),{InitGate:t}}const ne=({placement:e,ownerId:t,initialTargetingParams:n,adUnit:a,containerModel:o})=>{const i=(0,$.useId)();return(0,O.useGate)(o.InitGate,{id:i,ownerId:t,placement:e,adUnit:a,targetingParams:n}),(0,U.jsx)("div",{id:i})};var ae=n(18812),oe=n(25628);const ie={},re=new Set,de=new Set,se=e=>{const t=(0,oe.IG)(null,(()=>window.Ya?.adfoxCode?.hbCallbacks)),n=(0,oe.IG)(null,(()=>window.yaContextCb));t&&n&&window.Ya?.adfoxCode?.hbCallbacks?.push?.((()=>{window.yaContextCb?.push?.(e)}))};function le({model:e}){const t=(0,O.createGate)({and:[],or:{sid:"jd94k1"}}),n=e.inputs.adInited,o=(0,a.createEffect)((({placement:t,id:n,ownerId:o,targetingParams:i,adUnit:r})=>{const d=(0,a.scopeBind)(e.inputs.adRequested),s=(0,a.scopeBind)(e.inputs.adNotRendered),l=(0,a.scopeBind)(e.inputs.adRendered),u=(0,a.scopeBind)(e.inputs.adLoaded);(({id:e,ownerId:t,adUnit:n,targetingParams:a={},onRequest:o,onRender:i,onError:r,onLoad:d})=>{se((()=>{if(de.has(e))return;const s=()=>{de.delete(e),ie[e]&&r?.()};de.add(e),((e,t)=>{const n=(0,oe.IG)(null,(()=>window.Ya?.headerBidding));t&&n&&(re.has(e)||(re.add(e),n.pushAdUnits?.([{...t,code:e}])))})(e,(0,ae.Y)(n)),ie[e]=window.Ya?.adfoxCode?.createAdaptive?.({ownerId:t,containerId:e,params:(0,ae.Y)(a),onRender:()=>{de.delete(e),ie[e]&&i?.()},onError:s,onStub:s,onLoad:e=>d?.({bannerId:e?.bundleParams?.bannerId,campaignId:e?.bundleParams?.campaignId,placeId:e?.bundleParams?.placeId})},["desktop","tablet","phone"],{isAutoReloads:!0}),o?.()}))})({id:n,ownerId:o,targetingParams:i,adUnit:r,onRequest:()=>d(t),onRender:()=>l(t),onError:()=>s(t),onLoad:e=>u({placement:t,...e})})}),{sid:"-hmov1p"}),i=(0,a.createEffect)((({id:e})=>{(e=>{se((()=>{if(de.has(e))return;const t=ie[e];t&&(delete ie[e],t.destroy?.())}))})(e)}),{sid:"iesj9v"}),r=e.outputs.$targetingParams.map((e=>{const t={puid2:e.tripDirection,puid3:e.tripClass,puid4:e.adultsCount,puid5:e.childrenCount,puid6:e.infantsCount,puid7:e.originAirport,puid8:e.originCity,puid9:e.originCountry,puid10:e.destinationAirport,puid11:e.destinationCity,puid12:e.destinationCountry,puid13:e.departureDate,puid14:e.arrivalDate,puid15:e.tripDuration,puid17:e.topLevelDomain,puid18:e.userLoggedIn?"1":"0",puid19:e.language,puid20:e.country,puid21:e.gateId,puid24:e.regionId};return K()([H()(F()),T()(W())])(t)}));return(0,a.sample)({and:[{clock:t.open,source:{targetingParams:r},filter:ee.y.outputs.$isClient,fn:({targetingParams:e},t)=>({...t,targetingParams:{...t.targetingParams,...e}}),target:o}],or:{sid:"-wfyoyd"}}),(0,a.sample)({and:[{clock:o.done,fn:e=>e.params.placement,target:n}],or:{sid:"ppvizm"}}),(0,a.sample)({and:[{clock:t.close,filter:ee.y.outputs.$isClient,target:i}],or:{sid:"pt6ajs"}}),{InitGate:t}}const ue=q().bind({"media-ad":"s__RgWF1oQMNm9hYQYDM4OA"});function ce({placementId:e,model:t,containerModels:n,className:a}){const o=(0,O.useStoreMap)({store:t.outputs.$slotByPlacement,keys:[e],defaultValue:null,fn:(e,[t])=>e[t]??null}),i=(0,O.useStoreMap)({store:t.outputs.$slotIndexByPlacement,keys:[e],defaultValue:null,fn:(e,[t])=>e[t]??null}),{adClickedEvent:r}=(0,O.useUnit)({adClickedEvent:t.outputs.adClicked}),d=(0,$.useCallback)((()=>{r(e)}),[r,e]),s=ue("media-ad",a);if("doubleClick"===o?.type){const{gamPlacement:t,size:a}=o;return(0,U.jsx)("div",{className:s,onClick:d,children:(0,U.jsx)(j,{containerModel:n.googleAd,placement:e,gamPlacement:t,size:a})},i)}if("adFox"===o?.type){const{ownerId:t,params:a,adUnit:r}=o;return(0,U.jsx)("div",{className:s,onClick:d,children:(0,U.jsx)(ne,{containerModel:n.adFox,placement:e,ownerId:t,initialTargetingParams:a,adUnit:r})},i)}return null}const pe={inputs:{createAdverisementModel:function(e){const t=(0,a.createEvent)({sid:"snsp0u"}),n=(0,a.createEvent)({sid:"5s6j9"}),d=(0,a.createEvent)({sid:"ub1ppk"}),s=(0,a.createEvent)({sid:"-6uime4"}),l=(0,a.createEvent)({sid:"lrmbak"}),u=(0,a.createEvent)({sid:"nb3ewf"}),c=(0,a.createEvent)({sid:"igt4e7"}),p=(0,a.createStore)({},{and:{serialize:"ignore"},sid:"-c1t5bb"}).reset(c),g=(0,a.combine)({and:[{topLevelDomain:D,userLoggedIn:E,brand:w,language:A,params:e},({topLevelDomain:e,userLoggedIn:t,brand:n,language:a,params:d})=>{const{tripDirection:s=null,tripClass:l=null,origin:u=null,destination:c=null,departDate:p=null,returnDate:g=null,passengers:m=null,country:y=null,gateId:b=null,regionId:f=null}=d;return{departureDate:p?(0,r.x)("yyyyMMdd",p):null,arrivalDate:g?(0,r.x)("yyyyMMdd",g):null,originAirport:u?.type===i.A.Airport?u?.iata:null,originCity:u?.cityIata??null,originCountry:u?.countryIata??null,destinationAirport:c?.type===i.A.Airport?c?.iata:null,destinationCity:c?.cityIata??null,destinationCountry:c?.countryIata??null,tripClass:l,adultsCount:m?.adults??null,childrenCount:m?.children??null,infantsCount:m?.infants??null,tripDuration:null!==p&&null!==g?(0,o.Z)(g,p):null,tripDirection:s,topLevelDomain:e,userLoggedIn:t,brand:n,language:a,country:y,gateId:b,regionId:f}}],or:{sid:"-6c38sb"}});(0,a.sample)({and:[{clock:d,source:{slotIndexByPlacement:p,placementCollection:M,adLayout:S},fn:({slotIndexByPlacement:e,placementCollection:t},n)=>{const a=t?.[n];if(!a)return e;const o=e?.[n]??0,i=o<a.slots.length-1?o+1:null;return{...e,[n]:i}},target:p}],or:{sid:"i4r7oq"}});const m=(0,a.combine)({and:[{placementCollection:M,adVisiblePlacements:x,slotIndexByPlacement:p},({placementCollection:e,adVisiblePlacements:t,slotIndexByPlacement:n})=>t.reduce(((t,a)=>{const o=n[a];if(null===o)return t;const i=e?.[a]?.slots?.[o??0];return i?{...t,[a]:i}:t}),{})],or:{sid:"d0792h"}});return(0,a.sample)({and:[{clock:x,target:c}],or:{sid:"uvvf59"}}),{internals:{$targetingParams:g},inputs:{adInited:t,adRequested:n,adNotRendered:d,adRendered:s,adClicked:l,adLoaded:u,slotsReset:c},outputs:{$adLayout:S,$isAdEnabled:_,$placementCollection:M,$visiblePlacements:x,$slotIndexByPlacement:p,$targetingParams:g,$slotByPlacement:m,adInited:t,adRequested:n,adNotRendered:d,adRendered:s,adClicked:l,adLoaded:u}}},createAdverisementContainer:function({model:e}){const t=function({model:e}){return{adFox:le({model:e}),googleAd:te({model:e})}}({model:e});return(0,a.withFactory)({sid:"-gdurmv",fn:()=>(0,B.SC)({view:ce,bind:{model:e,containerModels:t}})})}},outputs:{adFlag:P}}}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/platform-3270dee9b1b4eb9670bbc277deb51f72576de5b9.bd674da3e6636bf47456.min.js.map