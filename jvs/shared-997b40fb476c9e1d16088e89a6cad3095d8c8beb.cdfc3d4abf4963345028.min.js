(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[77279],{73472:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var i=r(30091),a=r(82672);const{matchPage:n,pages:o}=a.$.outputs,s=n(o.GuidesPage),u={$isOpen:s.$isOpen,opened:s.opened,closed:s.closed},c=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/guides_page/index.ts",api:{outputs:{...u}}})},51456:function(e,t,r){"use strict";r.d(t,{OR:function(){return k},jQ:function(){return O},NT:function(){return w},RR:function(){return E},Fq:function(){return P},_y:function(){return I},TP:function(){return T},ln:function(){return A},mH:function(){return ge},VO:function(){return _},Qu:function(){return b},Q:function(){return S}});var i=r(30091),a=(r(21703),r(98116)),n=r(76588),o=r(80472),s=r(51717),u=r(27636),c=r(78260),d=r(8661),l=r(41832),p=r(95628),m=r(77802),f=r(63246),g=r(31087),y=r(2885),v=r(54428),h=r(68621),$=(r(26699),r(91285));const P=e=>e?.places?e.places.filter((e=>e.type===g.AS.PLACE||e.type===g.AS.ALERT||e.type===g.AS.WALK||e.type===g.AS.EXTERNAL_URL)):null,_=e=>e.type===g.AS.ALERT,b=e=>e.filter((e=>!_(e))),I=(e,t)=>e.filter((e=>t.includes(e.id))),S=e=>e.filter((e=>!_(e)&&!(0,$.xm)(e))),A=e=>(-1*e).toString(),k="districts",w="hotels",E="routes",O="favorite";function M(e){const t=e.find((e=>e.type===O));if(!t||!t.subgroups)return[];const r=t.subgroups.filter((t=>"all"!==t.type&&e.find((e=>e.title===t.title)))).map((t=>{const r=e.find((e=>e.title===t.title)).id;return{...t,id:A(r)}}));return[t.subgroups[0],...r]}const T=e=>({...e,groups:e.groups.map((t=>t.type===O?{...t,subgroups:M(e.groups)}:(t.type,{...t,places:t.places.map((e=>({...e,groupId:t.id,groupType:t.type,productId:t.product_id})))})))}),{$apiPrefix:x,$defaultQuery:L,$defaultHeaders:N}=d.D.outputs,Q=(0,a.createEvent)({sid:"i3e28o"}),z=(0,a.restore)(Q,!1,{sid:"3c9500"}),[R,D]=(0,a.withFactory)({sid:"-86ojr1",fn:()=>(0,u.K)((0,a.combine)({and:[f.y.outputs.$isClient,z,p.R.outputs.$guideId,(e,t,r)=>e&&t&&Boolean(r)],or:{sid:"-p67z4i"}}))}),j=(0,c.cr)("guides",{name:"travel_map_place",samplingRate:.2}),G=(0,a.withFactory)({sid:"-fpgar5",fn:()=>(0,n.s5)({name:"guides_travel_map",params:(0,a.withFactory)({sid:"-4wzzd8",fn:()=>(0,n.t6)()}),request:{method:"GET",url:{source:x,fn:({direction:e},t)=>`${t}/v2/travel_maps/${e}`},query:(0,a.combine)({and:[{defaultQuery:L,currency:l.y.outputs.$currency},({defaultQuery:e,currency:t})=>({...e,currency:t})],or:{sid:"-ym70x4"}}),headers:N},response:{contract:(0,o.v)(y.g6),mapData:({result:e})=>T(e)}})}),{$data:C,$pending:F,$error:U,start:B,reset:Y,finished:{failure:q}}=G,[W,K]=(0,a.withFactory)({sid:"-4vpzeg",fn:()=>(0,u.K)(C)}),H=(0,a.createEvent)({sid:"-dfecia"}),Z=(0,a.restore)(H,null,{sid:"-hg19zj"});(0,a.sample)({and:[{clock:W,fn:e=>e?.groups||null,target:H}],or:{sid:"ybi0ey"}});const V=(0,a.combine)({and:[{error:U},({error:e})=>e],or:{sid:"rubnlw"}}),{$startZoom:X,$trapId:J,$guideArkId:ee,$title:te}=(0,a.withFactory)({sid:"iw4x1c",fn:()=>(0,s.X)({source:W,shape:{$startZoom:e=>e?.start_zoom??null,$trapId:e=>e?.id??null,$guideArkId:e=>e?.analytics.guide_ark_id??null,$title:e=>e?.title??null}})}),re=Z.map((e=>e?e.filter((e=>e.premium.availability===g.oY.PAYWALLED)):null)),ie=Z.map((e=>e?e.filter((e=>e.is_hidden)):null)),ae=Z.map((e=>e&&e.find((e=>e.type===k))||null)),ne=ae.map(P),oe=(0,a.combine)({and:[{placeData:W,latQuery:m.aj.outputs.$latQuery,lonQuery:m.aj.outputs.$lonQuery,zoomQuery:m.aj.outputs.$zoomQuery},({placeData:e,lonQuery:t,latQuery:r,zoomQuery:i})=>({localIdeographFontFamily:"sans-serif",dragRotate:!1,touchZoomRotate:!0,minZoom:e?.min_zoom,maxZoom:e?.max_zoom,minPitch:0,maxPitch:0,initialViewState:{longitude:t||e?.start_point.longitude,latitude:r||e?.start_point.latitude,zoom:i||e?.start_zoom}})],or:{sid:"wolks8"}}),se=W.map((e=>e?e.pins_config:null)),ue=W.map((e=>e?e.groups.reduce(((e,t)=>(e.push(...S(t.places)),e)),[]):[])),ce=Z.map((e=>e&&e.find((e=>e.type===O))||null)),de=ce.map((e=>e?e.places.map((e=>e.id)):[]));(0,a.sample)({and:[{source:{shouldShowWidget:R,guideId:p.R.outputs.$guideId,currency:l.y.outputs.$currency,jwt:v.O.outputs.$jwt,isUserHasPremiumSubscription:h.b.outputs.$isAnyPremiumActive},filter:({shouldShowWidget:e,currency:t})=>e&&Boolean(t),fn:({guideId:e})=>({direction:e}),target:B}],or:{sid:"y2er0b"}}),(0,a.sample)({and:[{source:R,filter:e=>!e,target:Y}],or:{sid:"ymr4yo"}}),(0,a.sample)({and:[{source:q,filter:n.QO,fn:()=>new Error("travel_map_place contract validation failed"),target:j.sendErrorLog}],or:{sid:"z1lkzf"}});const le={outputs:{$data:W,$pending:F,$error:V,$tabs:Z,$premiumTabs:re,$hiddenTabs:ie,$districtPins:ne,$districtsTab:ae,$shouldShowWidget:R,$mapSettings:oe,$trapId:J,$flatPinsWithImage:ue,$startZoom:X,trapDataSuccessfulyUpdated:G.finished.success,$pinsConfig:se,$guideArkId:ee,$title:te,$favoriteTab:ce,$favoritePlacesIds:de},inputs:{readyToFetchModal:Q,fetch:B,reset:Y,setTabs:H},internal:{fetchTrapQuery:G,$dataOverride:K,$shouldShowWidgetOverride:D}};var pe=r(5500);const me=(e={})=>e.type===g.AS.ALERT?{id:"41",name:"Ð¢ÑƒÑ€Ð¸ÑÑ‚Ñ‹",description:"Ð¡Ð°Ð¼Ñ‹Ð¹ Ñ†ÐµÐ½Ñ‚Ñ€ Ð¾Ñ‚ Ð”Ð²Ð¾Ñ€Ñ†Ð¾Ð²Ð¾Ð¹ Ð¿Ð»Ð¾Ñ‰Ð°Ð´Ð¸ Ð´Ð¾ Ð½Ð°Ð±ÐµÑ€ÐµÐ¶Ð½Ð¾Ð¹ Ñ€ÐµÐºÐ¸ Ð¤Ð¾Ð½Ñ‚Ð°Ð½ÐºÐ¸",order:0,coordinates:{latitude:59.9373793819188,longitude:30.3250273921624},premium:{type:g.cy.FREE,availability:g.oY.AVAILABLE},type:g.AS.PLACE,icon:{svg:"https://photo.hotellook.com/static/as_trap/districts/41/{width}x{height}/2ce221b5-be65-46f5-ba0a-95cf975b7a78.jpg"},...e}:{id:"41",open_type:g.B8.MAP,pin_type:g.Er.IMAGE_TEXT,name:"Ð¢ÑƒÑ€Ð¸ÑÑ‚Ñ‹",description:"Ð¡Ð°Ð¼Ñ‹Ð¹ Ñ†ÐµÐ½Ñ‚Ñ€ Ð¾Ñ‚ Ð”Ð²Ð¾Ñ€Ñ†Ð¾Ð²Ð¾Ð¹ Ð¿Ð»Ð¾Ñ‰Ð°Ð´Ð¸ Ð´Ð¾ Ð½Ð°Ð±ÐµÑ€ÐµÐ¶Ð½Ð¾Ð¹ Ñ€ÐµÐºÐ¸ Ð¤Ð¾Ð½Ñ‚Ð°Ð½ÐºÐ¸",order:0,coordinates:{latitude:59.9373793819188,longitude:30.3250273921624},premium:{type:g.cy.FREE,availability:g.oY.AVAILABLE},type:g.AS.PLACE,image_url:"https://photo.hotellook.com/static/as_trap/districts/41/{width}x{height}/2ce221b5-be65-46f5-ba0a-95cf975b7a78.jpg",groupId:1,groupType:"",...e},fe=({layerType:e,layerId:t},r={})=>({id:t,title:"Ð Ð°Ð¹Ð¾Ð½Ñ‹",subtitle:"Ð“Ð´Ðµ Ð¶Ð¸Ñ‚ÑŒ",emoji:"ðŸ—ºï¸",icon:{svg:"https://photo.hotellook.com/static/as_trap_icons/tabs/e3049060-c837-48e4-bc7d-daef72479622.svg"},is_premium:!1,is_hidden:!1,type:e,list_type:e,open_type:g.B8.MAP,pin_type:e,premium:{type:g.cy.FREE,availability:g.oY.AVAILABLE},places:[],...r}),ge=(fe({layerType:"districts",layerId:38}),me({id:"41",name:"Ð¢ÑƒÑ€Ð¸ÑÑ‚Ñ‹"}),me({id:"42",name:"ÐÐµÑ‚ÑƒÑ€Ð¸ÑÑ‚Ñ‹"}),me({id:"43",name:"No go",type:g.AS.ALERT}),fe({layerType:"shopping",layerId:39}),me({id:"1"}),me({id:"2"}),fe({layerType:"instaplaces",layerId:100},{title:"Ð˜Ð½ÑÑ‚Ð°Ð¼ÐµÑÑ‚Ð°"}),me({id:"12",name:"Ð˜Ð½ÑÑ‚Ð°Ð¼ÐµÑÑ‚Ð°",premium:{type:g.cy.PREMIUM,availability:g.oY.PAYWALLED}}),fe({layerType:"overview",layerId:101},{title:"Featured spots",premium:{type:g.cy.PREMIUM,availability:g.oY.PAYWALLED}}),me({id:"13",name:"Featured spots",premium:{type:g.cy.PREMIUM,availability:g.oY.PAYWALLED}}),new Date(2021,11,3),new Date(2021,11,3),pe.A.City,pe.A.City,(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/guides_travel_map_query/index.ts",api:le}))},95628:function(e,t,r){"use strict";r.d(t,{R:function(){return v}});var i=r(30091),a=r(98116),n=r(47420),o=r(27636);const[s,u]=(0,a.withFactory)({sid:"wcvd75",fn:()=>(0,o.K)(n.i.outputs.$destination.map((e=>e?.iata??null)))}),c=(0,a.createStore)(null,{sid:"pd856z"}),d=c.map((e=>!!e&&e.length>3&&Number.isNaN(Number(e)))),l=c.map((e=>!!e&&e?.length<=3&&Number.isNaN(Number(e)))),{setGuideId:p,resetGuideId:m}=(0,a.createApi)({and:[c,{setGuideId:(e,t)=>t,resetGuideId:()=>null}],or:{sid:"f6duer"}}),f={setGuideId:p,resetGuideId:m},g={$direction:s,$isArkId:d,$guideId:c,$isIata:l},y={$directionOverride:u},v=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/travel_map_direction/index.ts",api:{inputs:f,outputs:g,internals:y}})},47956:function(e,t,r){"use strict";r.d(t,{I:function(){return O}});var i=r(30091),a=r(98116),n=r(72675),o=r(44904),s=r(77802),u=r(95628),c=r(38387),d=r(70422);const l=(0,a.createDomain)("travel_map_modal",{sid:"or655f"}),p=l.createStore(!1,{sid:"yhakec"}),{open:m,close:f}=(0,a.createApi)({and:[p,{open:(e,t)=>!0,close:(e,t)=>!1}],or:{sid:"7unysw"}}),g=(0,a.combine)({and:[p,o.Y.outputs.$isOpened,o.Y.outputs.$openingParams,(e,t,r)=>!r?.withoutMap&&(e||t)],or:{sid:"e1gjb"}}),y=l.createEvent({sid:"-i1ujuz"}),v=l.createEvent({sid:"gw4rtw"}),h=(0,a.restore)(v,null,{sid:"vd7xz7"}),$=l.createEvent({sid:"-2dmevd"}),P=(0,a.restore)($,null,{sid:"-sk008r"}),_=l.createEvent({sid:"-hh5x1d"}),b=(0,a.restore)(_,null,{sid:"61wubi"}),I=l.createEvent({sid:"-je8y6"}),S=(0,a.restore)(I,null,{sid:"-zdk9xr"}),A=l.createEvent({sid:"3s7y4x"}),k={open:m,close:f,setTrapOpenSource:v,setTrapSource:$,setPoiOpenSource:_,setPoiQueryOpenSource:I,setMapOpenSource:A},w={$isOpened:p,$isGuidesModalOpened:g,guidesContentClosed:y,$trapOpenSource:h,$trapSource:P,$poiOpenSource:b,$poiQueryOpenSource:S,$mapOpenSource:(0,a.restore)(A,null,{sid:"-18az8t"})};let E;(0,a.sample)({and:[{source:g,filter:e=>!e,target:y}],or:{sid:"z7ba2c"}}),(0,a.sample)({and:[{clock:m,filter:({guideId:e})=>Boolean(e),fn:({guideId:e})=>e,target:u.R.inputs.setGuideId}],or:{sid:"-zeybw1"}}),(0,a.sample)({and:[{clock:o.Y.inputs.open,source:{isMobile:c.l.outputs.$isMobile,isModalOpened:p},filter:({isMobile:e,isModalOpened:t},{withoutMap:r})=>!e&&!t&&!r,fn:(e,t)=>({...t,mapOpenSource:null}),target:m}],or:{sid:"-zajz55"}}),(0,a.sample)({and:[{clock:f,source:o.Y.outputs.$isOpened,filter:e=>e,target:o.Y.inputs.close}],or:{sid:"-766ao2"}}),h.reset(y),b.reset(y),(0,a.sample)({and:[{clock:m,fn:({openSource:e})=>e,target:$}],or:{sid:"-6o1335"}}),(0,a.sample)({and:[{clock:m,fn:({mapOpenSource:e})=>e,target:A}],or:{sid:"-696n2e"}}),(0,a.sample)({and:[{clock:o.Y.inputs.open,fn:({openSource:e})=>e,target:$}],or:{sid:"-65vvi8"}}),(0,a.sample)({and:[{clock:o.Y.inputs.open,filter:({poiOpenSource:e})=>Boolean(e),fn:({poiOpenSource:e})=>e,target:_}],or:{sid:"-5r1fhh"}}),(0,a.sample)({and:[{clock:o.Y.inputs.open,filter:({poiQueryOpenSource:e})=>Boolean(e),fn:({poiQueryOpenSource:e})=>e,target:I}],or:{sid:"-5bn6vd"}}),(0,a.sample)({and:[{clock:o.Y.inputs.open,filter:({mapOpenSource:e})=>Boolean(e),fn:({mapOpenSource:e})=>e,target:A}],or:{sid:"-57smpu"}}),(0,a.sample)({and:[{clock:f,filter:e=>e,target:s.aj.inputs.removeTravelMapModalPath}],or:{sid:"-4see3q"}}),(0,a.sample)({and:[{clock:y,filter:(0,a.withFactory)({sid:"-2r6tgk",fn:()=>(0,n.x)(c.l.outputs.$isMobile,d.N.outputs.$isSharingPage)}),target:s.aj.inputs.removeTravelMapModalPath}],or:{sid:"-4djy2z"}}),(0,a.sample)({and:[{clock:s.aj.outputs.historyPopedByUser,filter:g,fn:()=>!1,target:f}],or:{sid:"-3x24a5"}}),function(e){e.MAP="map",e.TAB="tab",e.TAB_SHOW_MAP="tab-show_map",e.CONTENT_LIST="content_list",e.CONTENT_LIST_ITEM="content_list-item"}(E||(E={}));const O=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/travel_map_modal/index.ts",api:{inputs:k,outputs:w}})},44904:function(e,t,r){"use strict";r.d(t,{Y:function(){return n}});var i=r(30091),a=r(7425);const n=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/travel_map_poi_details/index.ts",api:a.C})},7425:function(e,t,r){"use strict";r.d(t,{C:function(){return d}});var i=r(98116),a=r(95628);const n=(0,i.createDomain)("travel_map_poi_details",{sid:"-q67peq"}),o=n.createStore(!1,{sid:"cqqqvx"}),s=n.createStore(null,{sid:"-bdz9xs"}),{open:u,close:c}=(0,i.createApi)({and:[o,{open:(e,t)=>!0,close:()=>!1}],or:{sid:"2vaevu"}});(0,i.sample)({and:[{clock:u,filter:({guideId:e})=>Boolean(e),fn:({guideId:e})=>e,target:a.R.inputs.setGuideId}],or:{sid:"w8wmdv"}}),(0,i.sample)({and:[{clock:u,target:s}],or:{sid:"woauzz"}});const d={inputs:{open:u,close:c},outputs:{$isOpened:o,$openingParams:s}}},77802:function(e,t,r){"use strict";r.d(t,{HN:function(){return y},Fx:function(){return l},aJ:function(){return f},Ac:function(){return m},Uf:function(){return g},wO:function(){return b},Q:function(){return _},aj:function(){return le}});var i={};r.r(i),r.d(i,{inputs:function(){return re},internals:function(){return ae},outputs:function(){return ie}});var a=r(30091),n=r(98116),o=r(48695),s=r(20611),u=r(47420),c=r(63246);const d="travel_map_layer",l="group",p="travel_map_poi",m="place",f="ll",g="z",y="params",v="id",h="search_text",$=[y,v,d,l,p,m,f,g,"guides_app"],P=(e,t)=>{const r=[];return e&&r.push(e),t&&r.push(t),`${r.join("")}1`},_=(e,t)=>`${e},${t}`,b=e=>{const t=decodeURIComponent(e).split(","),r=Number(t[0]),i=Number(t[1]);return Number.isNaN(r)||Number.isNaN(i)?null:{lat:r,lon:i}},I=e=>e.toFixed(2),{$isClient:S}=c.y.outputs,{historyChanged:A}=s.D.outputs,{createQueryParameterApi:k}=s.D.inputs,w=k({name:l,clientOnly:!0}),E=k({name:d,clientOnly:!0}),O=k({name:m,clientOnly:!0}),M=k({name:p,clientOnly:!0}),T=k({name:v,clientOnly:!0}),x=k({name:f,clientOnly:!0}),L=k({name:g,clientOnly:!0}),N=k({name:h,clientOnly:!0}),Q=k({name:y,clientOnly:!1}),z=(0,n.combine)({and:[w.$value,E.$value,u.i.outputs.$origin,(e,t,r)=>{const i=e||t;return r&&i?parseInt(i,10)||i:null}],or:{sid:"-zekaq1"}}),R=(0,n.combine)({and:[O.$value,M.$value,u.i.outputs.$origin,(e,t,r)=>r&&(e||t)||null],or:{sid:"-t7mcl7"}}),D=(0,n.combine)({and:[T.$value,u.i.outputs.$origin,(e,t)=>t&&e||null],or:{sid:"xo8djr"}}),j=(0,n.combine)({and:[x.$value,e=>{if("string"!=typeof e)return null;const t=b(e);return t?t.lon:null}],or:{sid:"ap39sf"}}),G=(0,n.combine)({and:[x.$value,e=>{if("string"!=typeof e)return null;const t=b(e);return t?t.lat:null}],or:{sid:"-dxbzyg"}}),C=(0,n.combine)({and:[L.$value,e=>"string"==typeof e?Number.isNaN(Number(e))?null:Number(e):null],or:{sid:"b33i54"}}),F=N.$value,U=(0,n.createEvent)({sid:"pa2rd9"}),B=(0,n.createEvent)({sid:"-e93fis"}),Y=(0,n.createEvent)({sid:"90s9x3"}),q=(0,n.createEvent)({sid:"-tpv3u7"}),W=(0,n.createEvent)({sid:"-em8bpi"}),K=(0,n.createEvent)({sid:"oom3dz"}),H=(0,n.createEvent)({sid:"rntno6"}),Z=(0,n.createEvent)({sid:"-dv7osq"}),V=(0,n.withFactory)({sid:"-vogrmr",fn:()=>(0,o.C)({clock:B,source:Q.$value})}),X=(0,n.createEvent)({sid:"-oh1ost"}),J=(0,n.withFactory)({sid:"-2okxlh",fn:()=>(0,o.C)({source:T.$value,clock:X,fn:e=>e??null})}),ee=(0,n.withFactory)({sid:"on5v3b",fn:()=>(0,o.C)({source:N.$value,clock:X,fn:e=>e??null})}),te=(0,n.sample)({and:[{clock:A,source:{isClient:S,previousGuideId:J,previousCitiesSearch:ee},filter:({isClient:e,previousGuideId:t,previousCitiesSearch:r},{location:i,action:a})=>{const n=new URLSearchParams(i.search),o=n.get(v)??null,s=n.get(h)??null;return e&&"POP"===a&&(t!==o||r!==s)}}],or:{sid:"-ggghwq"}});(0,n.sample)({and:[{clock:A,filter:S,target:X}],or:{sid:"-upl3ye"}});const re={setTravelMapModalPath:B,setMapParams:Y,removeMapParams:q,removeTravelMapModalPath:K,removePoiParam:W,citiesSearchChanged:U},ie={$lonQuery:j,$latQuery:G,$zoomQuery:C,$layerQuery:z,$poiQuery:R,$initialParams:V,$citiesSearchQuery:F,$guideIdQuery:D,historyPopedByUser:te,guideIdParam:T,paramsQueryParam:Q},ae={setGuidesEnabled:H,setMapParamsEnabled:Z};var ne=r(17563),oe=r(65740),se=r(95628),ue=r(73472),ce=r(70422);const{removeKeysFromSearch:de}=s.D.inputs;(0,n.withFactory)({sid:"5vwbgw",fn:()=>(0,oe.s)({source:re.setTravelMapModalPath,if:ce.N.outputs.$isSharingPage,then:ae.setGuidesEnabled})}),(0,n.withFactory)({sid:"5z7312",fn:()=>(0,oe.s)({source:re.setMapParams,if:ce.N.outputs.$isSharingPage,then:ae.setMapParamsEnabled})}),(0,n.sample)({and:[{clock:ae.setGuidesEnabled,source:{origin:u.i.outputs.$origin,guideId:se.R.outputs.$guideId,isArkId:se.R.outputs.$isArkId,isIata:se.R.outputs.$isIata,lat:ie.$latQuery,lon:ie.$lonQuery,zoom:ie.$zoomQuery,pathname:s.D.outputs.$pathname,currentSearchParams:s.D.outputs.$searchParamsPlain},fn:({origin:e,isIata:t,isArkId:r,guideId:i,lat:a,lon:n,zoom:o,currentSearchParams:s,pathname:u},{originIata:c,layer:h,layerId:$,poi:b,navigationType:S})=>{const A=t?i:void 0,k={...s,[y]:P(c||e?.iata,A),[v]:i,parkId:r?i:void 0,[d]:h||void 0,[l]:$||void 0,[p]:b||void 0,[m]:b||void 0,[f]:a&&n?_(a,n):void 0,[g]:o?I(o):void 0};return{pathname:u,search:new URLSearchParams((0,ne.stringify)(k)),type:S||"push"}},target:s.D.inputs.navigateTo}],or:{sid:"6e1j1t"}}),(0,n.sample)({and:[{clock:re.removeTravelMapModalPath,source:{isGuidesPage:ue._.outputs.$isOpen,initialParams:ie.$initialParams,pathname:s.D.outputs.$pathname,searchParams:s.D.outputs.$searchParams,currentParams:ie.paramsQueryParam.$value},fn:({initialParams:e,searchParams:t,pathname:r,isGuidesPage:i,currentParams:a})=>{const n=new URLSearchParams(de(t,$).toString());return e?n.append(y,e):a&&n.append(y,a),i&&n.delete(y),{pathname:r,search:n,type:"push"}},target:s.D.inputs.navigateTo}],or:{sid:"8tgte8"}}),(0,n.sample)({and:[{clock:re.citiesSearchChanged,source:{searchParams:s.D.outputs.$searchParams,isSharingPage:ce.N.outputs.$isSharingPage},fn:({searchParams:e},{search:t,navigationType:r})=>{const i=new URLSearchParams(e.toString());return t?i.set(h,t):i.delete(h),{search:i,type:r}},target:s.D.inputs.navigateTo}],or:{sid:"c5louc"}}),(0,n.sample)({and:[{clock:ae.setMapParamsEnabled,source:s.D.outputs.$searchParams,fn:(e,{lat:t,lon:r,zoom:i})=>{const a=new URLSearchParams(e.toString()),n={[f]:_(t,r),[g]:I(i)};return Object.entries(n).forEach((([e,t])=>{a.set(e,t.toString())})),{search:a,type:"replace"}},target:s.D.inputs.navigateTo}],or:{sid:"d5cbet"}}),(0,n.sample)({and:[{clock:re.removeMapParams,fn:()=>({keys:[f,g]}),target:s.D.inputs.removeQueryParams}],or:{sid:"eg2tui"}}),(0,n.sample)({and:[{clock:re.removePoiParam,fn:()=>({keys:[p,m]}),target:s.D.inputs.removeQueryParams}],or:{sid:"ekh6le"}}),(0,n.sample)({and:[{clock:ie.$guideIdQuery.updates,filter:Boolean,target:se.R.inputs.setGuideId}],or:{sid:"f0f7sv"}}),(0,n.sample)({and:[{clock:u.i.outputs.$destination.updates,source:{guideIdQuery:ie.guideIdParam.$value,destination:u.i.outputs.$destination,isGuidesPage:ue._.outputs.$isOpen},filter:({guideIdQuery:e,destination:t,isGuidesPage:r})=>!e&&Boolean(t?.iata)&&r,fn:({destination:e})=>e?.iata??null,target:se.R.inputs.setGuideId}],or:{sid:"pdrip2"}});const le=(0,a.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/travel_map_search_params/index.ts",api:i})},70422:function(e,t,r){"use strict";r.d(t,{N:function(){return d}});var i=r(30091),a=r(98116),n=r(54448),o=r(82672);const{matchPage:s,pages:u}=o.$.outputs,c={outputs:{$isSharingPage:(0,a.withFactory)({sid:"lg8alb",fn:()=>(0,n.or)(s(u.MainPage).$isOpen,s(u.GuidesPage).$isOpen)})}},d=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/travel_map_sharing/index.ts",api:c})},91285:function(e,t,r){"use strict";r.d(t,{xd:function(){return o},Oh:function(){return c},mb:function(){return a},$2:function(){return d},Jq:function(){return u},xm:function(){return s}});var i=r(31087);function a(e,t){for(const r of e){const e=r.places.find((e=>e.id===t));if(e)return e}return null}function n(e){return"premium"in e}function o(e){return e.filter(n)}const s=e=>e.type===i.AS.WALK,u=e=>e.type===i.AS.EXTERNAL_URL;function c(e,t){return e.find((e=>e.id===t))||null}const d=e=>{const t=(e=>{let[t,r,i,a]=[1/0,1/0,-1/0,-1/0];return e.forEach((([e,n])=>{t>e&&(t=e),r>n&&(r=n),i<e&&(i=e),a<n&&(a=n)})),[t,r,i,a]})(e.map((e=>[e.longitude,e.latitude]))),[r,i,a,n]=t;return[[a,n],[r,i]]};r(74613)},86556:function(e,t,r){var i=r(89465),a=r(77813);e.exports=function(e,t,r){(void 0!==r&&!a(e[t],r)||void 0===r&&!(t in e))&&i(e,t,r)}},42980:function(e,t,r){var i=r(46384),a=r(86556),n=r(28483),o=r(59783),s=r(13218),u=r(81704),c=r(36390);e.exports=function e(t,r,d,l,p){t!==r&&n(r,(function(n,u){if(p||(p=new i),s(n))o(t,r,u,d,e,l,p);else{var m=l?l(c(t,u),n,u+"",t,r,p):void 0;void 0===m&&(m=n),a(t,u,m)}}),u)}},59783:function(e,t,r){var i=r(86556),a=r(64626),n=r(77133),o=r(278),s=r(38517),u=r(35694),c=r(1469),d=r(29246),l=r(44144),p=r(23560),m=r(13218),f=r(68630),g=r(36719),y=r(36390),v=r(59881);e.exports=function(e,t,r,h,$,P,_){var b=y(e,r),I=y(t,r),S=_.get(I);if(S)i(e,r,S);else{var A=P?P(b,I,r+"",e,t,_):void 0,k=void 0===A;if(k){var w=c(I),E=!w&&l(I),O=!w&&!E&&g(I);A=I,w||E||O?c(b)?A=b:d(b)?A=o(b):E?(k=!1,A=a(I,!0)):O?(k=!1,A=n(I,!0)):A=[]:f(I)||u(I)?(A=b,u(b)?A=v(b):m(b)&&!p(b)||(A=s(I))):k=!1}k&&(_.set(I,A),$(A,I,h,P,_),_.delete(I)),i(e,r,A)}}},21463:function(e,t,r){var i=r(5976),a=r(16612);e.exports=function(e){return i((function(t,r){var i=-1,n=r.length,o=n>1?r[n-1]:void 0,s=n>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(n--,o):void 0,s&&a(r[0],r[1],s)&&(o=n<3?void 0:o,n=1),t=Object(t);++i<n;){var u=r[i];u&&e(t,u,i,o)}return t}))}},36390:function(e){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},74613:function(e,t,r){var i=r(92822)("merge",r(82492));i.placeholder=r(69306),e.exports=i},82492:function(e,t,r){var i=r(42980),a=r(21463)((function(e,t,r){i(e,t,r)}));e.exports=a},59881:function(e,t,r){var i=r(98363),a=r(81704);e.exports=function(e){return i(e,a(e))}},80871:function(e,t,r){"use strict";r.d(t,{i:function(){return o}});var i=r(85893),a=r(67294);const n=({className:e,...t},r)=>(0,i.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:r,style:{display:"inline-block"},...t,children:(0,i.jsx)("path",{d:"M9.929 14a.885.885 0 0 0 .643-.266l5.09-4.985c.225-.227.331-.46.338-.746 0-.286-.106-.525-.338-.745l-5.09-4.992A.896.896 0 0 0 9.93 2 .923.923 0 0 0 9 2.925c0 .253.106.493.292.679l4.512 4.4-4.512 4.392a.961.961 0 0 0-.292.679c0 .512.411.925.929.925Z"})}),o=(0,a.memo)((0,a.forwardRef)(n));o.displayName="Icon16ControlsDisclosure"}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/shared-997b40fb476c9e1d16088e89a6cad3095d8c8beb.cdfc3d4abf4963345028.min.js.map