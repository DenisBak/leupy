(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[22474],{81832:function(e,t,a){"use strict";a.d(t,{Y:function(){return i},R:function(){return o}});const i=e=>{const t=document.createElement("a");t.href=e,t.target="_blank",t.id="openinnewtablink",t.rel="noopener noreferrer",document.body.appendChild(t),t.click()};var n=a(29238),r=a.n(n);function o(e){try{const t=r().sanitize(e),a=document.createElement("div");return a.innerHTML=t,a.textContent||""}catch(e){return""}}},11763:function(e,t,a){"use strict";a.d(t,{B:function(){return H}});var i=a(30091),n=a(98116),r=a(72675),o=a(38032),s=a(83781),l=a(47420),c=a(82097),d=a(54448),u=a(27636),p=(a(26699),a(20611)),m=a(14775);const{$onlyClientHash:h}=p.D.outputs,{hotelsPage:g,hotelsMapPage:f}=m.p.outputs,_=h.map((e=>e.includes("#hotel"))),v=(0,n.withFactory)({sid:"-ay37g8",fn:()=>(0,d.or)(g.$isOpen,f.$isOpen)}),y=(0,n.createEvent)({sid:"-n1feds"}),k=(0,n.createStore)("avia",{sid:"-v77yed"}),b=(0,n.withFactory)({sid:"-l1qhzs",fn:()=>(0,c.f)(k,"avia")}),[x,S]=(0,n.withFactory)({sid:"-31as8y",fn:()=>(0,u.K)((0,n.withFactory)({sid:"6jvdyd",fn:()=>(0,c.f)(k,"hotel")}))}),{changeActiveForm:w,toHotelForm:E,toAviaForm:F}=(0,n.createApi)({and:[k,{changeActiveForm:(e,t)=>t,toHotelForm:()=>"hotel",toAviaForm:()=>"avia"}],or:{sid:"ezx62g"}});(0,n.sample)({and:[{clock:y,filter:(0,n.withFactory)({sid:"w1pcvw",fn:()=>(0,d.or)(_,v)}),target:E}],or:{sid:"-sufbl7"}});const{$isSimpleSearch:P,$isComplexSearch:$}=l.i.outputs,{toSimpleSearch:C,toComplexSearch:I}=l.i.inputs,D=(0,s.V6)((0,s.ZE)("service/helios/active_form/changed")),{avia:R,multiway:O,hotel:M}=(0,n.split)({and:[D,{avia:e=>"avia"===e,multiway:e=>"multiway"===e,hotel:e=>"hotel"===e}],or:{sid:"ka4ziz"}}),A=(0,n.createEvent)({sid:"-z2kue6"}),T=(0,n.createEvent)({sid:"-k43uhk"});(0,n.split)({and:[{source:R,match:{returnToSimpleAviaSearch:(0,n.withFactory)({sid:"-vr9hpe",fn:()=>(0,r.x)((0,n.withFactory)({sid:"-woigvk",fn:()=>(0,o.f)(b)}),P)}),returnToComplexAviaSearch:(0,n.withFactory)({sid:"-gsshss",fn:()=>(0,r.x)((0,n.withFactory)({sid:"-w7gugi",fn:()=>(0,o.f)(b)}),$)})},cases:{returnToSimpleAviaSearch:A,returnToComplexAviaSearch:T,__:[F,C]}}],or:{sid:"kqmt8d"}}),(0,n.sample)({and:[{clock:A,target:F}],or:{sid:"l9vm00"}}),(0,n.sample)({and:[{clock:[O,T],filter:(0,n.withFactory)({sid:"-rwxu3d",fn:()=>(0,o.f)(_)}),target:[I,F]}],or:{sid:"lo69fe"}}),(0,n.sample)({and:[{clock:M,target:E}],or:{sid:"lrh0zk"}});const B=(0,s.Sy)((0,s.ZE)("service/helios/active_form/should_change"));(0,n.sample)({and:[{clock:[k,$],source:{activeForm:k,isComplexSearch:$},fn:({activeForm:e,isComplexSearch:t})=>"avia"===e?t?"multiway":"avia":"hotel",target:B}],or:{sid:"m92fz4"}});const H=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/active_form/index.ts",lifecycle:{start:y},api:{outputs:{$activeForm:k,$isAviaFormActive:b,$isHotelFormActive:x,$hasHotelHash:_},inputs:{changeActiveForm:w,toAviaForm:F,toHotelForm:E},internals:{$isHotelFormActiveOverride:S}}})},41520:function(e,t,a){"use strict";a.d(t,{l:function(){return d}}),a(21703);var i=a(30091),n=a(98116),r=a(35529),o=a(47047),s=a(78364);const{createFlag:l}=s.f.inputs,c=(0,n.withFactory)({sid:"my0ftf",fn:()=>(0,o.d)((()=>l({name:"ex-feat-exploreFlow",contract:(0,r.Record)({enabled:r.Boolean}),mapValue:({enabled:e})=>e,defaultValue:!1})))}),d=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/explore_flow/index.ts",api:{outputs:{$exploreFlowEnabled:c.$value},internals:{$exploreFlowEnabledOverride:c.__.$override}},attachTestApi(){throw new Error("Test API not available in production")}})},92309:function(e,t,a){"use strict";a.d(t,{r:function(){return h}});var i=a(98116),n=a(21247),r=a(20611),o=a(11763);const{$isHotelFormActive:s}=o.B.outputs,{createQueryParameterApi:l}=r.D.inputs,c=l({name:"search_id",clientOnly:!0}),d=l({name:"source",clientOnly:!0}),u=(0,i.createStore)(null,{sid:"-hmhnrg"}),p=(0,i.createStore)(null,{sid:"viz0wf"}),m=(0,i.createEvent)({sid:"-lfrn6f"});(0,i.sample)({and:[{clock:s,source:{searchId:c.$value,source:d.$value},fn:({searchId:e,source:t})=>({hotelFormSource:t??"tab_change",searchId:e??null}),target:m}],or:{sid:"fkb0f9"}}),(0,i.sample)({and:[{clock:m,target:(0,i.withFactory)({sid:"ndzubb",fn:()=>(0,n.h)({searchId:u,hotelFormSource:p})})}],or:{sid:"g5qzkc"}});const h={outputs:{$searchId:u,$hotelFormSource:p,hotelFormShowed:m}}},43548:function(e,t,a){"use strict";a.d(t,{K:function(){return ot}});var i=a(30091),n=a(98116),r=a(65752),o=a(77349),s=a(94547),l=a(41832),c=a(57640),d=a(82525),u=a(37213),p=a(54236),m=a(79403),h=a(53788),g=a(49829),f=a(83781),_=a(39018),v=a(82672),y=a(2503),k=a(5500),b=a(17563),x=a(23446),S=a(81832),w=a(27897);const E=(e,t)=>"WA"===e?w.US.decode("d2F5YXdheQ=="):"AS"===e&&"ru"===t?w.US.decode("0LDQstC40LDRgdC10LnQu9GB"):w.US.decode("YXZpYXNhbGVz");var F=a(27636),P=a(531),$=a(47420),C=a(11763),I=a(35712),D=(a(26699),a(2905)),R=a(82203);const O=["ru","by"],M=(0,n.createEvent)({sid:"-cypxj9"}),{$destination:A}=P.c.outputs,{$destination:T}=$.i.outputs,{$brand:B}=m.U.outputs,{$market:H}=h.D.outputs,{$activeForm:L}=C.B.outputs;var U;!function(e){e.UpdateHotelPartner="service/helios/hotel_partner/update_partner",e.UpdateCheckboxSearchFlag="service/helios/hotel_partner/update_search_flag"}(U||(U={}));const{$hotelsCheckboxExpFlag:N,$hotelsResultsExpFlag:z}=I.n.outputs,G=(0,n.combine)({and:[z,({experimentState:e})=>`serp-exp-hotelsResults.${e}`],or:{sid:"-hi3u4a"}}),j=(0,n.combine)({and:[N,({experimentState:e})=>`serp-exp-hotelsResultsCheckbox.${e}`],or:{sid:"m9hfy1"}}),[V,q]=(0,n.withFactory)({sid:"h5yprl",fn:()=>(0,F.K)((0,n.combine)({and:[{activeForm:L,aviaFormDestination:T,hotelFormDestination:A,brand:B,market:H,hotelsCheckboxExpFlag:N},({activeForm:e,aviaFormDestination:t,hotelFormDestination:a,brand:i,market:n,hotelsCheckboxExpFlag:r})=>((e,t,a,i)=>{if((0,D.JT)(t))return R.SL.Booking;if("native.test"===i)return R.SL.Native;const n=function(e,t,a){return O.includes(a)||O.includes(e)||O.includes(t)}((e?.iata||e?.cityIata)?.toLowerCase()||"",e?.countryIata?.toLowerCase()||"",a);return n?R.SL.Ostrovok:R.SL.Booking})("hotel"===e?a:t,i,n,r.experimentState)],or:{sid:"mfalkh"}}))}),W=(0,f.Sy)((0,f.ZE)(U.UpdateHotelPartner));(0,n.sample)({and:[{clock:[V,M],source:V,target:W}],or:{sid:"-mf556c"}});const Q=(0,f.Sy)((0,f.ZE)(U.UpdateCheckboxSearchFlag));(0,n.sample)({and:[{clock:[j,M],source:j,target:Q}],or:{sid:"-lxjq6s"}});var Z=a(67803);const K=e=>Boolean(e.destination?.iata&&e.destination.name&&e.guests.adults>=1&&e.checkInDate instanceof Date&&e.checkOutDate instanceof Date),{urlWithApiHost:Y}=d.B.outputs,{pages:J,matchPage:X}=v.$.outputs,{sendEvent:ee}=_.n.inputs,{$isWayAwayBrand:te,$brand:ae}=m.U.outputs,{$marker:ie}=u.b.outputs,{$market:ne}=h.D.outputs,{$premiumHotelPartnerDeeplinks:re}=g.w.outputs,{$currency:oe}=l.y.outputs,{$localeDeprecated:se}=p.z.outputs,{$auid:le}=y.Y.outputs,{HOTELS_SEARCH:ce}=c.H,de=(0,n.createEvent)({sid:"-t718ug"}),ue=(0,n.attach)({and:{source:{url:Y(`${ce}/hotels`),auid:le},mapParams:(e,{url:t,auid:a})=>({...e,url:t,auid:a}),effect:(0,n.createEffect)((function(e){const{url:t,params:a}=function(e){const{url:t,currency:a,hotelFormState:i,language:n,marker:r,pageName:o,brand:s,market:l,premiumHotelPartnerDeeplinks:c,hotelPartner:d,auid:u,...p}=e,{destination:m,checkInDate:h,checkOutDate:g,guests:f}=i,{adults:_,childAges:v}=f,y=m?.type===k.A.Hotel,b=c?.[d],S=b?.url||t,w=b?.query||{};return{url:S,params:{brand:s,marker:r,destination:m.name,hotelId:y?m.iata:void 0,locationId:m.locationId,checkIn:(0,x.x)("yyyy-MM-dd",h),checkOut:(0,x.x)("yyyy-MM-dd",g),utm_medium:o,utm_source:E(s,l),utm_campaign:"search_form_tab",as_auid:u,currency:a,language:n,adults:_,children:v.join(","),flags:[],...w,...p}}}(e),i=`${t}?${(0,b.stringify)(a)}`;(0,S.Y)(i)}),{sid:"-fm6yp5"})},or:{sid:"plu0rq"}});(0,n.sample)({and:[{clock:de,target:ue}],or:{sid:"4j6vk6"}});const pe=(0,n.createEvent)({sid:"h9ok8c"}),me=(0,f.V6)((0,f.ZE)("service/helios/hotel_form/start_search"));(0,n.sample)({and:[{clock:me,target:pe}],or:{sid:"52fobt"}});const he=(0,n.combine)({and:[{isSearchPage:X(J.SearchPage).$isOpen,isMainPage:X(J.MainPage).$isOpen},({isSearchPage:e,isMainPage:t})=>e?"search_results":t?"homepage":"content_page"],or:{sid:"-rv0ise"}});(0,n.sample)({and:[{clock:pe,source:{currency:oe,language:se,pageName:he,marker:ie,market:ne,brand:ae,hotelPartner:V,searchFlag:G,auid:le,premiumHotelPartnerDeeplinks:re},filter:(e,{hotelFormState:t})=>K(t),fn:(e,t)=>({...e,...t}),target:de}],or:{sid:"5yvjc4"}}),(0,n.sample)({and:[{clock:de,filter:te,fn:({hotelFormState:e})=>{const{destination:t,guests:a}=e,{adults:i,children:n}=a,{iata:r}=t;return{type:"start_search_hotel",iata:r,psgr:i+n,children:n}},target:ee}],or:{sid:"6y2db8"}});var ge=a(65740),fe=a(2568),_e=a.n(fe),ve=a(94590),ye=a(33724),ke=a(63246),be=a(8054);const{openHotelPage:xe,openHotelsResultsPage:Se}=ye.k.inputs,{$auid:we}=y.Y.outputs,{appInited:Ee}=ke.y.outputs,{hotelSearchParamsUpdatedByUser:Fe}=be.L.inputs,{matchPage:Pe,pages:$e}=v.$.outputs,{$isHotelsResultsSearchFormExpEnabled:Ce}=I.n.outputs,Ie=Pe($e.HotelsPage).$isOpen,De=Pe($e.HotelsMapPage).$isOpen,Re=(0,n.createStore)(null,{sid:"-rv8ljx"}),Oe=(0,n.createEvent)({sid:"um0aog"}),Me=(0,n.createEvent)({sid:"gw2621"}),Ae=(0,n.createEvent)({sid:"f3n3co"});var Te;(0,n.sample)({and:[{clock:Oe,source:{deviceSearchId:Re,isHotelsPage:Ie,isHotelsMapPage:De},fn:({deviceSearchId:e,isHotelsPage:t,isHotelsMapPage:a},{hotelFormState:i})=>{const{destination:n,checkInDate:r,checkOutDate:o,guests:s}=i,{adults:l,childAges:c}=s;return{params:{locationType:n.type,locationId:n.id,gateId:n.gateId,checkin:(0,x.x)("yyyy-MM-dd",r),checkout:(0,x.x)("yyyy-MM-dd",o),adults:l,children:c,source:n.type===k.A.Hotel?ve.H_.SearchForm:ve.Si.SearchForm,deviceSearchId:e},navigationType:n.type===k.A.Hotel?"reload":t||a?"replace":"reload"}},target:Ae}],or:{sid:"-6n3gyr"}}),(0,n.sample)({and:[{clock:Ae,target:Me}],or:{sid:"-4n2f8g"}}),(0,n.sample)({and:[{clock:Ae,source:{isHotelsPage:Ie,isHotelsMapPage:De,isHotelsResultsSearchFormExpEnabled:Ce},filter:({isHotelsPage:e,isHotelsMapPage:t,isHotelsResultsSearchFormExpEnabled:a},{params:i})=>i.locationType!==k.A.Hotel&&a&&(e||t),fn:(e,{params:t})=>t,target:Fe}],or:{sid:"j5vpth"}}),(0,n.withFactory)({sid:"k5mcdy",fn:()=>(0,ge.s)({source:Me,if:({params:e})=>e.locationType===k.A.Hotel,then:xe,else:Se})}),(0,n.sample)({and:[{clock:[Ee,Me],source:we,fn:e=>_e()(Date.now()+(e??"")),target:Re}],or:{sid:"kl0l02"}}),function(e){e.Change="service/helios/avia_form/hotels_search/change"}(Te||(Te={}));const Be=(0,f.Sy)((0,f.ZE)(Te.Change)),He=(0,s.kl)("uncheck_hotel_cookie",{adapter:s.j$.boolean()}),Le=(0,n.createStore)(!0,{sid:"-564fc3"}),Ue=(0,n.createEffect)((()=>He.read()??!1),{sid:"jn5gyj"}),Ne=(0,n.createEffect)((e=>{e?He.remove():He.write(!0,{expires:(0,o.Z)(new Date,7)})}),{sid:"-47rsxf"}),ze=(0,n.createEvent)({sid:"-8mgsti"});(0,n.sample)({and:[{clock:M,target:Ue}],or:{sid:"2x7qcj"}}),(0,n.sample)({and:[{clock:ze,source:Le,target:Ne}],or:{sid:"2ybbj9"}}),Le.on(Ue.doneData,((e,t)=>!t)).on(ze,(e=>!e)),(0,n.sample)({and:[{source:Le,fn:e=>({shouldSearchHotels:e}),target:Be}],or:{sid:"3fcxxg"}});const Ge={outputs:{$shouldSearchHotels:Le,$deviceSearchId:Re,$hotelPartner:V,$searchFlag:G},inputs:{toggledHotelsCheckbox:ze,requestHotelSearchStart:pe,requestHotelSearchStartNative:Oe,getIsHotelFormFilled:K,getIsHotelFormDatesIntervalValid:({checkInDate:e,checkOutDate:t})=>e instanceof Date&&t instanceof Date&&(0,Z.Z)(t,e)<=30},internals:{getHotelsCookieFx:Ue,setHotelsCookieFx:Ne,startHotelsSearchService:M,$hotelPartnerOverride:q}};var je=a(67294),Ve=a(28225),qe=a(49963),We=a(44619),Qe=a(94184),Ze=a.n(Qe),Ke=a(85893);const Ye=({className:e})=>(0,Ke.jsx)("svg",{width:"16",height:"16",className:e,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ke.jsx)("path",{d:"M12.756 5.518L6.923 11.74a.805.805 0 01-.59.26.805.805 0 01-.589-.26l-2.5-2.667a.93.93 0 010-1.257.796.796 0 011.179 0l1.91 2.038 5.244-5.593a.796.796 0 011.179 0 .93.93 0 010 1.257z",fill:"currentColor"})}),Je=(0,je.memo)(Ye);const Xe=({checked:e,onChange:t,className:a})=>{const{t:i}=(0,Ve.useTranslation)("component_hotel_checkbox");return(0,Ke.jsxs)("label",{className:Ze()("s__yi49EYhEEyAPB3wNdk0O",a),children:[(0,Ke.jsx)("input",{type:"checkbox",className:"s__qSe46RLUjCwlTzX7_1kP",checked:e,onChange:t}),(0,Ke.jsx)("span",{className:"s__WerNxAaHCzQMOIF7geRA","aria-hidden":!0,children:(0,Ke.jsx)(Je,{className:"s__p10tDGZ7BQIY8sz13RQt"})}),(0,Ke.jsx)(qe.x,{type:We.y.Body3Regular,className:"s__ynYyfxw7qHkXeCSzGhEA",tag:"span",children:i("label")})]})},et=(0,je.memo)(Xe),{$shouldSearchHotels:tt}=Ge.outputs,{toggledHotelsCheckbox:at}=Ge.inputs,it=(0,n.withFactory)({sid:"-g9cnuf",fn:()=>(0,r.SC)({view:et,bind:{checked:tt,onChange:at}})});a(92309);const nt={HotelCheckboxContainer:it},{startHotelsSearchService:rt}=Ge.internals,ot=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/hotels_search/index.ts",lifecycle:{start:rt},api:{...Ge,containers:nt}})},531:function(e,t,a){"use strict";a.d(t,{c:function(){return re}});var i=a(30091),n=a(98116);const r=(0,n.createEvent)({sid:"aqzj0z"});var o=a(15863),s=a(72675),l=a(21247),c=a(20611),d=a(63246),u=a(37977),p=a.n(u),m=a(46898),h=a.n(m),g=a(88846),f=a.n(g),_=a(4835),v=a.n(_),y=a(82203);const{createQueryParameterApi:k}=c.D.inputs,b=e=>e?new Date(e):null,x=k({name:"location_id",clientOnly:!1}),S=k({name:"checkin",clientOnly:!1}),w=k({name:"checkout",clientOnly:!1}),E=k({name:"adults",clientOnly:!1}),F=k({name:"children",clientOnly:!1}),P=(0,n.combine)({and:[{locationIdParam:x.$value,checkinParam:S.$value,checkoutParam:w.$value,adultsParam:E.$value,childrenParam:F.$value},({locationIdParam:e,checkinParam:t,checkoutParam:a,adultsParam:i,childrenParam:n})=>{const r=(o=Number(i),Math.min(Math.max(o,y.RC.MinAdults),y.RC.MaxAdults));var o;const s=(e=>h()(p()(","),v(),f()(Number))(e).filter((e=>e<=y.RC.MaxChildrenAge&&e>=y.RC.MinChildrenAge)).slice(0,y.RC.MaxChildren))(n);return{locationId:e??void 0,checkInDate:b(t)??void 0,checkOutDate:b(a)??void 0,guests:{adults:r,children:s.length,childAges:s}}}],or:{sid:"4uo7mr"}}),{$isReady:$}=c.D.outputs,{$isClient:C}=d.y.outputs,I=(0,n.createEvent)({sid:"23tuk"}),D=(0,n.createEvent)({sid:"q7dza7"}),R=(0,n.createEvent)({sid:"c9ttb8"}),O=(0,n.createEvent)({sid:"-hwefgl"}),M=(0,n.createEvent)({sid:"hstta"});(0,n.sample)({and:[{clock:r,source:P,filter:(0,n.withFactory)({sid:"n4gpmc",fn:()=>(0,s.x)($,C)}),target:M}],or:{sid:"2zlscs"}}),(0,n.withFactory)({sid:"33gcib",fn:()=>(0,l.h)({source:M,targets:{locationId:I,guests:D,checkInDate:R,checkOutDate:O}})});const A=(0,n.createStore)({adults:1,children:0,childAges:[]},{and:{updateFilter:o.Ih},sid:"96h6th"}),T=(0,n.createEvent)({sid:"2ipnvd"});(0,n.sample)({and:[{clock:T,target:A}],or:{sid:"-gptcht"}}),(0,n.sample)({and:[{clock:D,target:T}],or:{sid:"-gc2hns"}});const B=(0,n.createStore)(null,{and:{updateFilter:o.Ih},sid:"qqop86"}),H=(0,n.createStore)(null,{and:{updateFilter:o.Ih},sid:"-sxmlm5"}),L=(0,n.createEvent)({sid:"-77zcle"}),U=(0,n.createEvent)({sid:"pd0sc5"});(0,n.sample)({and:[{clock:L,fn:e=>void 0===e?null:e,target:B}],or:{sid:"-f05kk5"}}),(0,n.sample)({and:[{clock:U,fn:e=>void 0===e?null:e,target:H}],or:{sid:"-exellc"}});const N=(0,n.createEvent)({sid:"-t7n8r"}),z=(0,n.createEvent)({sid:"2bink9"});(0,n.sample)({and:[{clock:z,fn:()=>null,target:L}],or:{sid:"-egwrsi"}}),(0,n.sample)({and:[{clock:N,target:L}],or:{sid:"-e22brr"}});const G=(0,n.createEvent)({sid:"czm6gg"}),j=(0,n.createEvent)({sid:"otsqwo"});(0,n.sample)({and:[{clock:j,fn:()=>null,target:U}],or:{sid:"-dxnz0v"}}),(0,n.sample)({and:[{clock:G,target:U}],or:{sid:"-ditj04"}}),(0,n.sample)({and:[{clock:R,target:L}],or:{sid:"-d3fae0"}}),(0,n.sample)({and:[{clock:O,target:U}],or:{sid:"-d0obf7"}});var V=a(76588),q=a(80472),W=a(82525),Q=a(75381),Z=a(57640),K=a(54236),Y=a(35529);const J=(0,Y.Record)({gate_id:Y.String,id:Y.String,title:Y.String,type:Y.String}),{$isClient:X}=d.y.outputs,{$localeDeprecated:ee}=K.z.outputs,te=(0,n.withFactory)({sid:"296r2u",fn:()=>(0,V.s5)({name:"hotels_get_place_by_location_id",enabled:X,params:(0,n.withFactory)({sid:"k4xr92",fn:()=>(0,V.t6)()}),request:{method:"GET",url:{source:W.B.outputs.urlWithApiHost(Q.Nv`${Z.H.SUGGEST_HOST}/hotels/v2/location`),fn:({locationId:e,locale:t},a)=>`${a}/${e}?locale=${t}`}},response:{contract:(0,q.v)(J),mapData:({result:e})=>({id:e.id,iata:e.id,name:e.title,type:e.type,gateId:e.gate_id})}})}),ae=(0,n.createStore)(null,{and:{updateFilter:o.Ih},sid:"g9hpjr"}),ie=(0,n.createEvent)({sid:"-7pp0fn"}),ne=(0,n.createEvent)({sid:"aqt7ov"});(0,n.sample)({and:[{clock:ie,target:ae}],or:{sid:"vwjt4r"}}),(0,n.sample)({and:[{clock:ne,fn:()=>null,target:ie}],or:{sid:"waugk5"}}),(0,n.sample)({and:[{clock:I,source:{locale:ee},filter:(e,t)=>Boolean(t),fn:({locale:e},t)=>({locale:e,locationId:t}),target:te.start}],or:{sid:"wf8tb1"}}),(0,n.sample)({and:[{clock:te.$data,filter:Boolean,target:ie}],or:{sid:"x8xpcj"}});const re=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/hotels_trip_params/index.ts",lifecycle:{start:r},api:{inputs:{changeDestination:ie,clearDestination:ne,changeGuests:T,changeCheckInDate:L,changeCheckOutDate:U,fillCheckInDate:N,fillCheckOutDate:G,clearCheckInDate:z,clearCheckOutDate:j},outputs:{$destination:ae,$guests:A,$checkInDate:B,$checkOutDate:H}}})},24943:function(e,t,a){"use strict";a.d(t,{q:function(){return R}});var i=a(30091),n=a(98116),r=a(87722),o=a(16243),s=a(82672),l=a(11763),c=a(47420),d=a(82203),u=a(85658);const{matchPage:p,pages:m}=s.$.outputs,{$isAviaFormActive:h}=l.B.outputs,{toAviaForm:g}=l.B.inputs,{$isSimpleSearch:f,$origin:_,$destination:v,exact:y,$dateCase:k,originChanged:b,destinationChanged:x}=c.i.outputs,{toSimpleSearch:S,changeOrigin:w,changeDestination:E,exact:{changeExactDates:F},updateAnalyticsDirectionSource:P}=c.i.inputs,{scrollToTop:$}=u.u.inputs,C=p(m.MainPage).$isOpen,I=(0,n.createEvent)({sid:"-d7epn"}),D=(0,o.J)({parameters:{isMainPage:(0,o.C)({read:C}),origin:(0,o.C)({read:_,write:w}),destination:(0,o.C)({read:v,write:E}),aviaFormIsActive:(0,o.C)({read:h,write:g}),searchModeIsSimple:(0,o.C)({read:f,write:S}),exactDates:(0,o.C)({read:y.$exactDates,write:F}),dateCase:(0,o.C)({read:k})},checkActive:({isMainPage:e,origin:t,destination:a,aviaFormIsActive:i,searchModeIsSimple:n,dateCase:o})=>Boolean(e&&i&&n&&t&&a&&(0,r.bx)(t,a)&&o===d.M4.Exact),beforeOpen:(e,t)=>({origin:t.origin,destination:e.destination,exactDates:e.exactDates,aviaFormIsActive:!0,searchModeIsSimple:!0,isMainPage:!0,isGuidesPage:!1,dateCase:d.M4.Exact}),initialized:I});(0,n.sample)({and:[{clock:D.opened,target:$}],or:{sid:"-d5ez82"}}),(0,n.sample)({and:[{clock:[b,x],filter:D.$wasOpened,target:$}],or:{sid:"-cr4bso"}}),(0,n.sample)({and:[{clock:D.open,filter:e=>Boolean(e.analytics?.directionSource),fn:e=>e.analytics.directionSource,target:P}],or:{sid:"-cb6al7"}});const R=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/screen_exact_prices_results/index.ts",lifecycle:{start:I},api:{outputs:{exactPricesResultsScreen:D}}})},43175:function(e,t,a){"use strict";a.d(t,{J:function(){return ve}});var i=a(30091),n=a(98116),r=a(54448),o=a(72675),s=a(38032),l=a(47420),c=a(43548);const d=e=>{const{origin:t,destination:a,departDate:i,returnDate:n}=e,r={origin:t,destination:a,date:i};return n?[r,{origin:a,destination:t,date:n}]:[r]};var u=a(87722);const p=e=>0!==e.length&&e.every((e=>(0,u.bx)(e.origin,e.destination)&&e.date));var m=a(83781);const h=(0,m.Sy)((0,m.ZE)("service/helios/autosearch/enable")),g=(0,m.Sy)((0,m.ZE)("service/helios/autosearch/start")),f=(0,m.Sy)((0,m.ZE)("service/helios/autosearch/show")),_=(0,m.Sy)((0,m.ZE)("service/helios/autosearch/hide")),v=(0,m.V6)((0,m.ZE)("service/helios/autosearch/all_tickets_shown")),y=(0,m.V6)((0,m.ZE)("service/helios/autosearch/all_tickets_closed")),k=(0,m.Sy)((0,m.ZE)("service/helios/autosearch/open_autosearch_modal")),b=(0,n.createStore)(!1,{sid:"-bm82i3"}).on(v,(()=>!0)).on(y,(()=>!1));var x=a(41832),S=a(24943),w=a(15863),E=a(82672),F=a(38387),P=a(63246),$=a(41520);const{$currency:C}=x.y.outputs,{$tripClass:I,$passengers:D,$paymentMethod:R,$origin:O,$destination:M,exact:A}=l.i.outputs,{exactPricesResultsScreen:T}=S.q.outputs,{matchPage:B,pages:H}=E.$.outputs,{$isMobile:L}=F.l.outputs,{$isClient:U}=P.y.outputs,{$exploreFlowEnabled:N}=$.l.outputs,z=(0,n.createEvent)({sid:"1ui9te"}),G=(0,n.createStore)(!1,{sid:"-rv7vhw"});(0,n.sample)({and:[{clock:[z,N.updates],source:(0,n.withFactory)({sid:"-ep3x5i",fn:()=>(0,o.x)(L,B(H.MainPage).$isOpen)}),filter:(0,n.withFactory)({sid:"jhi8yu",fn:()=>(0,o.x)(U,N)}),target:G}],or:{sid:"beoptx"}}),(0,n.sample)({and:[{clock:G,filter:Boolean,target:h}],or:{sid:"bu2yg1"}});const j=(0,n.combine)({and:[{origin:O,destination:M,departDate:A.$departDate,returnDate:A.$returnDate,tripClass:I,passengers:D,paymentMethod:R,currency:C}],or:{sid:"-gtunoa"}}),V=(0,n.createEvent)({sid:"-n1ngle"}),q=(0,n.createStore)(null,{sid:"bnv7bv"});(0,n.sample)({and:[{clock:j,source:q,filter:w.Ih,fn:(e,t)=>t,target:V}],or:{sid:"lss9kk"}}),(0,n.sample)({and:[{clock:V,target:q}],or:{sid:"lwmtq3"}});const W=(0,n.createStore)(!1,{sid:"-d2lmyj"}),Q=(0,n.withFactory)({sid:"-9ex2ef",fn:()=>(0,o.x)(T.$active,G)});(0,n.createStore)(!1,{sid:"akerse"}),W.on(f,(()=>!0)).on(_,(()=>!1)),(0,n.sample)({and:[{clock:Q.updates,filter:(0,n.withFactory)({sid:"nxsete",fn:()=>(0,o.x)((0,n.withFactory)({sid:"vv9n3i",fn:()=>(0,s.f)(W)}),Q)}),target:f}],or:{sid:"n6tjkf"}}),(0,n.sample)({and:[{clock:Q.updates,filter:(0,n.withFactory)({sid:"qs256k",fn:()=>(0,o.x)(W,(0,n.withFactory)({sid:"ypjey2",fn:()=>(0,s.f)(Q)}))}),target:_}],or:{sid:"na4b4l"}}),(0,n.sample)({and:[{clock:[V,W],filter:W,target:g}],or:{sid:"noyr5c"}});const{$tripClass:Z,$passengers:K,$isSimpleSearch:Y,$isComplexSearch:J,$paymentMethod:X,$directionSegments:ee,exact:{$segments:te}}=l.i.outputs,{$shouldSearchHotels:ae}=c.K.outputs,ie=(0,n.createEvent)({sid:"-b9sfdv"});(0,n.sample)({and:[{clock:ie,target:z}],or:{sid:"-mxpb1"}});const ne=(0,n.combine)({and:[{directions:ee,dates:te},({directions:e,dates:t})=>e.map(((e,a)=>({...e,date:t[a]??null})))],or:{sid:"-cqp4lt"}}),re=(0,n.combine)({and:[{segments:ne,tripClass:Z,paymentMethod:X,passengers:K,shouldSearchHotels:ae}],or:{sid:"621tcl"}}),oe=(0,n.createEvent)({sid:"-ozwvb0"}),se=(0,n.createEvent)({sid:"-1w83ks"}),le=ne.map(p),ce=(0,n.sample)({and:[{clock:[(0,n.sample)({and:[{clock:se,source:re,fn:(e,t)=>({...e,requestSource:t?.requestSource??null})}],or:{sid:"gw2v6z"}}),(0,n.sample)({and:[{clock:oe,source:re,fn:(e,{origin:t,destination:a,departDate:i,returnDate:n,...r})=>({...e,...r,segments:d({origin:t,destination:a,departDate:i,returnDate:n})})}],or:{sid:"hc0weg"}})],filter:e=>p(e.segments)}],or:{sid:"-fc84zy"}}),de=(0,n.createEvent)({sid:"bg0kyj"});(0,n.sample)({and:[{clock:ce,filter:(0,n.withFactory)({sid:"2p1mzi",fn:()=>(0,r.or)(J,(0,n.withFactory)({sid:"-ctg1e9",fn:()=>(0,o.x)(Y,(0,n.withFactory)({sid:"-ctfzw0",fn:()=>(0,s.f)(G)}))}))}),target:de}],or:{sid:"km7oz7"}}),(0,n.sample)({and:[{clock:ce,filter:G,target:k}],or:{sid:"l2pis1"}});var ue=a(39018),pe=a(36071),me=a(79403);const{sendEvent:he}=ue.n.inputs,{$isWayAwayBrand:ge}=me.U.outputs,fe=(0,m.V6)((0,m.ZE)("service/helios/search/started")),_e=(0,m.Sy)((0,m.ZE)("service/helios/search/should_start"));(0,n.sample)({and:[{clock:de,target:_e}],or:{sid:"n977yt"}}),(0,n.sample)({and:[{clock:fe,filter:ge,fn:({destination:e,passengers:t})=>({type:"start_search_avia",iata:e?.iata,psgr:(0,pe.P_)(t),children:t.children+t.infants}),target:he}],or:{sid:"nnhve7"}});const ve=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/search_starter/index.ts",lifecycle:{start:ie},api:{outputs:{$searchCanBeStarted:le,searchStarted:fe,$isSerpInModal:b,$autosearchEnabled:G,hideAutosearchFx:_},inputs:{tryToStartSearch:se,startSimpleSearchByParams:oe,showAutosearchModalFx:k},internals:{shouldStartSearch:de,shouldStartSearchFx:_e,showAutosearchModalFx:k}}})},25974:function(e,t,a){"use strict";a.d(t,{E0:function(){return d},K2:function(){return c},KV:function(){return s},SM:function(){return n},Zo:function(){return o},ce:function(){return l},iG:function(){return r},sz:function(){return i}});const i="/hotels/map",n="/hotels",r="/",o="hotel",s="/v1/start",l="/v1/results/map",c="/v1/results",d="/v1/hotel"},30113:function(e,t,a){"use strict";a.d(t,{kE:function(){return p},dZ:function(){return x},vH:function(){return S},fr:function(){return E},Fn:function(){return $},KN:function(){return k},HI:function(){return C},MV:function(){return b},wU:function(){return u},JX:function(){return l}});var i=a(94590);const n={[i.MV.Green]:i.JV.Green,[i.MV.Yellow]:i.JV.Yellow,[i.MV.Red]:i.JV.Red,[i.MV.Purple]:i.JV.Purple,[i.MV.Pink]:i.JV.Pink,[i.MV.Blue]:i.JV.Blue};var r=a(58809),o=a.n(r);const s={[i.L9.Breakfast]:i.CM.Breakfast,[i.L9.HalfBoard]:i.CM.HalfBoard,[i.L9.FullBoard]:i.CM.FullBoard,[i.L9.Lunch]:i.CM.Lunch,[i.L9.Dinner]:i.CM.Dinner,[i.L9.SomeMeal]:i.CM.SomeMeal,[i.L9.AllInclusive]:i.CM.AllInclusive},l=e=>e?s[e]:i.CM.None,c=e=>({value:e.value,currency:e.currency_code}),d=e=>{const t=l(e.meal_plan),a=e?.badge&&{text:e.badge.name,color:(i=e.badge.color,n[i])};var i;return{id:e.id,badge:a,stars:e.stars,rating:e.overall_rating,name:e.name,photos:e.photos.slice(0,8),reviewsCount:e.reviews_count,address:e.location.address,location:e.location.coordinates,distanceToCenter:e.location.distance_to_center,price:e.price.value,pricePerNight:e.price_per_night.value,currency:e.price.currency_code,mealPlan:t,availableRoomsCount:e.available_rooms_count,isFreeCancellationAvailable:e.is_free_cancellation_available}},u=e=>{const{max_bounds:t,hotels:a,meta:i}=e,n=a.map(d);return{hotelIds:n.map((({id:e})=>e)),hotelCollection:o()("id",n),maxBounds:t,meta:(r=i,{totalHotelsCount:r.total_hotels_count,filteredHotelsCount:r.filtered_hotels_count,boundedHotelsCount:r.bounded_hotels_count,minPrice:c(r.min_price),minFilteredPrice:c(r.min_filtered_price),region:r.region})};var r},p=e=>{const t=new Date(e);return new Date(t.getTime()+6e4*t.getTimezoneOffset())};var m=a(5500),h=a(25974),g=a(77606),f=a.n(g),_=a(29893),v=a.n(_);const y=e=>{const{gateId:t,checkin:a,checkout:i,adults:n,children:r,source:o,deviceSearchId:s}=e,l={gate_id:t,checkin:a,checkout:i,adults:n.toString(),children:r?.toString(),source:o,device_search_id:s};return new URLSearchParams(v()(f())(l))},k=e=>{const{searchId:t,hotelPosition:a,pricePerNight:i}=e,n=y(e);return t&&n.set("search_id",t),a&&n.set("hotel_position",a.toString()),i&&n.set("price_per_night",i.toString()),n},b=e=>{const{locationId:t,locationType:a}=e,i=y(e);return i.set("location_id",t),i.set("location_type",a),i},x=({hotelsSearchParams:e,hotelId:t,searchId:a,deviceSearchId:i,position:n,pricePerNight:r,source:o})=>{const s={searchId:a,deviceSearchId:i,locationId:t,locationType:m.A.Hotel,gateId:e.gate_id,checkin:e.checkin,checkout:e.checkout,adults:e.guests.adults,children:e.guests.children,source:o,hotelPosition:n,pricePerNight:r},l=k(s);return`${h.SM}/${t}?${l}`},S=(e,t)=>e.replace("{height}","12").replace("{width}","24").replace("{theme}",t).replace("{extension}","svg"),w={bunk_bed:"Bed/Bunk",futon:"Bed/Futon",king_size_bed:"Bed/KingSize",single_bed:"Bed/SingleBed",sofa:"Bed/Sofa",super_king_size_bed:"Bed/SuperKingSize",double_bed:"Bed/DoubleBed",multiple:"Bed/MultipleBed"},E=e=>w[e];var F=a(73918),P=a.n(F);const $=(e,t)=>P()((t=>t.type===e),t),C=e=>e<=2?"bad":e<=3.5?"normal":"good"},35712:function(e,t,a){"use strict";a.d(t,{n:function(){return ee}}),a(21703);var i=a(30091),n=a(98116),r=a(47047),o=a(78364),s=a(35529);const l=(0,s.Record)({enabled:s.Boolean}),c=(0,s.Record)({type:(0,s.Literal)("percent"),value:s.Number}),d=(0,s.Record)({type:(0,s.Literal)("fixed"),currency_code:s.String,value:s.Number}),u=(0,s.Record)({type:(0,s.Literal)("percent_range"),min_value:(0,s.Optional)(s.Number),max_value:s.Number}),p=(0,s.Record)({type:(0,s.Literal)("fixed_range"),min_value:(0,s.Optional)(s.Number),max_value:s.Number,currency_code:s.String}),m=(0,s.Union)(c,d,u,p),h=(0,s.Record)({gate_ids:(0,s.Array)(s.String),screen:s.String}),g=(0,s.Record)({explore_direction_hotels:s.Boolean,explore_trip_hotels:s.Boolean,flights_results_banner:s.Boolean,hotellook:h,hotels_search_results:s.Boolean,trap_hotels:s.Boolean}),f=(0,s.Record)({enabled:s.Boolean,cashback_rate:(0,s.Optional)(m),entry_points:(0,s.Optional)(g),hotel_screen_reviews_enabled:(0,s.Optional)(s.Boolean),hotel_screen_search_form_enabled:(0,s.Optional)(s.Boolean),search_form_max_interval:(0,s.Optional)(s.Number),is_map_enabled:(0,s.Optional)(s.Boolean)}),_=(0,s.Record)({experimentState:(0,s.Union)((0,s.Literal)("native.control"),(0,s.Literal)("native.test"))}),v=(0,s.Record)({experimentState:(0,s.Union)((0,s.Literal)("native.control"),(0,s.Literal)("native.test"))}),y=(0,s.Record)({activateMapOnStart:s.Boolean,mapRequestDebounce:s.Number,pageSize:s.Number,pollingInterval:s.Number,pollingTimeout:s.Number,viewedBadgeEnabled:s.Boolean}),k=((0,s.Record)({enabled:s.Boolean}),(0,s.Record)({enabled:(0,s.Optional)(s.Boolean)})),b=(0,s.Record)({enabled:s.Boolean,sdui:(0,s.Optional)(s.Boolean)}),{createFlag:x}=o.f.inputs,S=(0,n.createEvent)({sid:"onqe5m"}),w=(0,n.withFactory)({sid:"8te400",fn:()=>(0,r.d)((()=>x({name:"serp-exp-hotels",contract:f,defaultValue:{enabled:!1}})))}),E=w.$value,F=E.map((e=>Boolean(e?.enabled&&e?.hotel_screen_reviews_enabled))),P=E.map((e=>Boolean(e?.enabled&&e?.is_map_enabled))),$=(0,n.withFactory)({sid:"-oen4ao",fn:()=>(0,r.d)((()=>x({name:"serp-exp-hotelsResults",contract:_,defaultValue:{experimentState:"native.control"}})))}),C=$.$value,I=C.map((({experimentState:e})=>"native.test"===e)),D=(0,n.withFactory)({sid:"siwk3o",fn:()=>(0,r.d)((()=>x({name:"serp-exp-hotelsResultsCheckbox",contract:v,defaultValue:{experimentState:"native.control"}})))}),R=D.$value,O=R.map((({experimentState:e})=>"native.test"===e)),M=(0,n.withFactory)({sid:"-yida95",fn:()=>(0,r.d)((()=>x({name:"serp-feat-hotelsResults",contract:y,defaultValue:{activateMapOnStart:!1,mapRequestDebounce:1e3,pageSize:20,pollingInterval:2e3,pollingTimeout:6e4,viewedBadgeEnabled:!1}})))}),A=M.$value,T=A.map((e=>e.viewedBadgeEnabled)),B=A.map((e=>e.activateMapOnStart)),H=(0,n.withFactory)({sid:"-nhbo35",fn:()=>(0,r.d)((()=>x({name:"serp-exp-hotelsMapResultsSync",contract:l,defaultValue:{enabled:!1}})))}),L=H.$value,U=L.map((e=>Boolean(e?.enabled))),N=(0,n.withFactory)({sid:"n04e9f",fn:()=>(0,r.d)((()=>x({name:"serp-exp-hotelsMainAdPlacement",contract:l,defaultValue:{enabled:!1}})))}),z=N.$value,G=z.map((e=>Boolean(e?.enabled))),j=(0,n.withFactory)({sid:"-22xdai",fn:()=>(0,r.d)((()=>x({name:"serp-exp-hotelsResultsSearchForm",contract:k,defaultValue:{enabled:!1}})))}),V=j.$value,q=V.map((({enabled:e})=>Boolean(e))),W=(0,n.withFactory)({sid:"-1vxcrr",fn:()=>(0,r.d)((()=>x({name:"serp-exp-hotelTariffsV2",contract:l,defaultValue:{enabled:!1}})))}),Q=W.$value.map((e=>Boolean(e?.enabled))),Z=(0,n.withFactory)({sid:"-lic072",fn:()=>(0,r.d)((()=>x({name:"serp-exp-hotelsAutocomplete",contract:b,defaultValue:{enabled:!1,sdui:!1}})))}),K=Z.$value.map((e=>Boolean(e?.sdui))),Y=(0,n.withFactory)({sid:"-a5rmjz",fn:()=>(0,r.d)((()=>x({name:"serp-exp-hotelsWithTrapPoi",contract:l,defaultValue:{enabled:!1}})))}),J={hotelsExpFlag:w,hotelsResultsExpFlag:$,hotelsCheckboxExpFlag:D,hotelsResultsFeatFlag:M,hotelsMapResultsSyncExpFlag:H,hotelsMainAdPlacementFlag:N,hotelsResultsSearchFormExpFlag:j,hotelTariffsV2ExpFlag:W,hotelsAutocompleteV2ExpFlag:Z,hotelsWithTrapPoiExpFlag:Y},X={$hotelsExpFlag:E,$isHotelReviewsFeatureEnabled:F,$isHotelMapEnabled:P,$hotelsResultsExpFlag:C,$isNativeHotelsResultsExpEnabled:I,$hotelsCheckboxExpFlag:R,$isNativeHotelsCheckboxExpEnabled:O,$hotelsResultsFeatFlag:A,$isVisitedHotelsFeatureEnabled:T,$isMapActiveOnStart:B,$hotelsMapResultsSyncExpFlag:L,$isHotelsMapResultsSyncExpEnabled:U,$hotelsMainAdPlacementFlag:z,$isHotelsMainAdPlacementFlagEnabled:G,$hotelsResultsSearchFormExpFlag:V,$isHotelsResultsSearchFormExpEnabled:q,$isHotelTariffsV2ExpFlagEnabled:Q,$isHotelsAutocompleteV2ExpFlagEnabled:K,$isHotelsWithTrapPoiExpFlagEnabled:Y.$value.map((e=>Boolean(e?.enabled)))},ee=(0,i.G6)({lifecycle:{start:S},importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/hotels/services/flags/index.ts",api:{outputs:X,internals:J},attachTestApi:()=>{throw new Error("Test API is not available in production")}})},33724:function(e,t,a){"use strict";a.d(t,{k:function(){return m}}),a(21703);var i=a(30091),n=a(98116),r=a(20611),o=a(25974),s=a(30113);const{navigateTo:l}=r.D.inputs,c=(0,n.createEvent)({sid:"2fhb84"}),d=(0,n.createEvent)({sid:"-s0j5s7"}),u=(0,n.createEvent)({sid:"-fs1q15"});(0,n.sample)({and:[{clock:c,fn:({params:e,navigationType:t})=>{const{locationId:a}=e;return{type:t,pathname:`${o.SM}/${a}`,search:(0,s.KN)(e)}},target:l}],or:{sid:"-g5gl8t"}}),(0,n.sample)({and:[{clock:d,fn:({params:e,navigationType:t})=>{const a=(0,s.MV)(e);return{type:t,pathname:o.SM,search:a}},target:l}],or:{sid:"-fm7sh6"}}),(0,n.sample)({and:[{clock:u,fn:({params:e,navigationType:t})=>{const a=(0,s.MV)(e);return{type:t,pathname:o.sz,search:a}},target:l}],or:{sid:"-erfb8y"}});const p={openHotelPage:c,openHotelsResultsPage:d,openHotelsMapPage:u},m=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/hotels/services/hotels_opener/index.ts",api:{inputs:p},attachTestApi:()=>{throw new Error("Test API is not available in production")}})},14775:function(e,t,a){"use strict";a.d(t,{p:function(){return u}});var i=a(30091),n=a(82672);const{pages:r,matchPage:o}=n.$.outputs,{HotelPage:s,HotelsPage:l,HotelsMapPage:c}=r,d={hotelPage:o(s),hotelsPage:o(l),hotelsMapPage:o(c)},u=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/hotels/services/hotels_pages/index.ts",api:{outputs:d}})},8054:function(e,t,a){"use strict";a.d(t,{L:function(){return Ee}}),a(21703);var i=a(30091),n=a(37977),r=a.n(n),o=a(46898),s=a.n(o),l=a(29893),c=a.n(l),d=a(88846),u=a.n(d),p=a(77606),m=a.n(p),h=a(4835),g=a.n(h),f=a(98116),_=a(21247),v=a(72675),y=a(2568),k=a.n(y),b=a(15863),x=a(63246),S=a(82672),w=a(20611),E=a(41832),F=a(54236),P=a(96864),$=a(37213),C=a(79403),I=a(54428),D=a(68621),R=a(94590),O=a(2503),M=a(91163);const{$isInitialUserDataReceived:A}=I.O.outputs,{$isClient:T}=x.y.outputs,{$page:B}=S.$.outputs,{$currencyUpperCase:H}=E.y.outputs,{$localeDeprecated:L}=F.z.outputs,{$isAnyPremiumActive:U,$userPremiumMarker:N}=D.b.outputs,{$userLoggedIn:z}=P.W.outputs,{$marker:G}=$.b.outputs,{$brand:j}=C.U.outputs,{$auid:V}=O.Y.outputs,{reloadPage:q}=w.D.inputs,{removeQueryParams:W}=w.D.inputs,{matchPage:Q,pages:Z}=S.$.outputs,{locationIdQueryParam:K,locationTypeQueryParam:Y,gateIdQueryParam:J,checkinQueryParam:X,checkoutQueryParam:ee,adultsQueryParam:te,childrenQueryParam:ae,sourceQueryParam:ie,deviceSearchIdQueryParam:ne,utmSourceQueryParam:re,utmMediumQueryParam:oe,utmCampaignQueryParam:se,utmTermQueryParam:le,utmContentQueryParam:ce}=M.j.outputs,de=Q(Z.HotelsPage).$isOpen,ue=(0,f.createEvent)({sid:"ppxtdl"}),pe=(0,f.createEvent)({sid:"-gzhg0i"}),me=(0,f.createEvent)({sid:"-okccn6"}),he=(0,f.createEvent)({sid:"-r9nmf8"}),ge=(0,f.createEvent)({sid:"bd945f"}),fe=(0,f.createEvent)({sid:"6wi525"}),_e=(0,f.createStore)(null,{sid:"6fpegs"}),ve=(0,f.createStore)(R.Si.Deeplink,{sid:"-n6j1l"}),ye=(0,f.createStore)(null,{sid:"wdmxt4"}),ke=(0,f.combine)({and:[{isAnyPremiumActive:U,userPremiumMarker:N,marker:G},({isAnyPremiumActive:e,userPremiumMarker:t,marker:a})=>(e?t:a)??"direct"],or:{sid:"vyy6s3"}});(0,f.sample)({and:[{clock:me,target:_e}],or:{sid:"-6wvcrr"}}),(0,f.sample)({and:[{clock:me,target:he}],or:{sid:"-6u4dsy"}}),(0,f.sample)({and:[{clock:(0,f.withFactory)({sid:"-6o9jcy",fn:()=>(0,b.CJ)({clock:ue,until:A})}),source:{isClient:T,page:B},filter:({isClient:e,page:t})=>e&&("hotels"===t?.type||"hotels_map"===t?.type),target:pe}],or:{sid:"mmg7q0"}}),(0,f.sample)({and:[{clock:fe,source:{page:B,searchParams:_e},filter:({page:e,searchParams:t})=>("hotels"===e?.type||"hotels_map"===e?.type)&&null!==t,fn:({searchParams:e},{locationId:t,locationType:a,checkin:i,checkout:n,adults:r,children:o})=>({...e,location_id:t,location_type:a,checkin:i,checkout:n,guests:{adults:r,children:o}}),target:me}],or:{sid:"n5p0hn"}}),(0,f.sample)({and:[{clock:pe,source:{checkin:X.$value,checkout:ee.$value,adults:te.$value,childrenParam:ae.$value,utmSource:re.$value,utmMedium:oe.$value,utmCampaign:se.$value,utmTerm:le.$value,utmContent:ce.$value,locationId:K.$value,locationType:Y.$value,gateId:J.$value,currencyUpperCase:H,locale:L,userMarker:ke,brand:j},fn:({checkin:e,checkout:t,adults:a,childrenParam:i,locationId:n,locationType:o,gateId:l,utmSource:d,utmMedium:p,utmCampaign:h,utmTerm:f,utmContent:_,currencyUpperCase:v,locale:y,userMarker:k,brand:b})=>{const x=s()(r()(","),g(),u()(Number))(i),S={utm_source:d,utm_medium:p,utm_campaign:h,utm_term:f,utm_content:_},w=c()(m(),S);return{location_id:n,location_type:o,gate_id:l,checkin:e,checkout:t,guests:{adults:Number(a),children:x},currency:v,marker:k,locale:y,brand:b,meta:w}},target:me}],or:{sid:"owxcq6"}}),(0,f.sample)({and:[{clock:pe,source:{auid:V,sourceParam:ie.$value,deviceSearchId:ne.$value},fn:({auid:e,sourceParam:t,deviceSearchId:a})=>({source:t??R.Si.Deeplink,deviceSearchId:a??k()(Date.now()+(e??""))}),target:[(0,f.withFactory)({sid:"-c990l8",fn:()=>(0,_.h)({searchSource:ve,deviceSearchId:ye})}),ge]}],or:{sid:"-wuxa7i"}}),(0,f.sample)({and:[{clock:ge,fn:()=>({keys:["source","device_search_id"]}),target:W}],or:{sid:"-vszh9l"}}),(0,f.sample)({and:[{clock:z,filter:(0,f.withFactory)({sid:"-x1qniz",fn:()=>(0,v.x)(A,de)}),target:q}],or:{sid:"-vbe2a1"}});const be={hotelSearchParamsServiceStarted:ue,hotelsSearchPageOpened:pe},xe={hotelSearchParamsUpdatedByUser:fe},Se={$hotelsSearchParams:_e,$searchSource:ve,$deviceSearchId:ye,searchParamsReady:he},{hotelSearchParamsServiceStarted:we}=be,Ee=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/hotels/services/hotels_search_params/index.ts",lifecycle:{start:we},api:{inputs:xe,outputs:Se},attachTestApi:()=>{throw new Error("Test API is not available in production")}})},91163:function(e,t,a){"use strict";a.d(t,{j:function(){return l}});var i=a(30091),n=a(20611);const{createQueryParameterApi:r}=n.D.inputs,o={outputs:{locationIdQueryParam:r({name:"location_id",clientOnly:!0}),locationTypeQueryParam:r({name:"location_type",clientOnly:!0}),gateIdQueryParam:r({name:"gate_id",clientOnly:!0}),checkinQueryParam:r({name:"checkin",clientOnly:!1}),checkoutQueryParam:r({name:"checkout",clientOnly:!1}),adultsQueryParam:r({name:"adults",clientOnly:!1}),childrenQueryParam:r({name:"children",clientOnly:!1}),sourceQueryParam:r({name:"source",clientOnly:!0}),deviceSearchIdQueryParam:r({name:"device_search_id",clientOnly:!0}),searchIdQueryParam:r({name:"search_id",clientOnly:!0}),hotelsPositionQueryParam:r({name:"hotel_position",clientOnly:!0}),pricePerNightQueryParam:r({name:"price_per_night",clientOnly:!0}),utmSourceQueryParam:r({name:"utm_source",clientOnly:!0}),utmMediumQueryParam:r({name:"utm_medium",clientOnly:!0}),utmCampaignQueryParam:r({name:"utm_campaign",clientOnly:!0}),utmTermQueryParam:r({name:"utm_term",clientOnly:!0}),utmContentQueryParam:r({name:"utm_content",clientOnly:!0})}},{outputs:s}=o,l=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/hotels/services/query_params/index.ts",api:{outputs:s}})},94590:function(e,t,a){"use strict";let i,n,r,o,s,l,c,d,u,p,m,h,g,f;a.d(t,{ru:function(){return o},JV:function(){return l},MV:function(){return r},or:function(){return k},TS:function(){return P},fb:function(){return x},pj:function(){return $},Bh:function(){return d},tf:function(){return v},u7:function(){return b},$e:function(){return S},Nv:function(){return C},H_:function(){return h},Si:function(){return g},QK:function(){return f},bG:function(){return i},jy:function(){return n},tc:function(){return s},TA:function(){return m},CM:function(){return u},L9:function(){return c},eE:function(){return w},O4:function(){return E},z7:function(){return p},pP:function(){return _}}),function(e){e.BadRequest="BadRequest",e.PollingTimeout="PollingTimeout",e.Unknown="Unknown"}(i||(i={})),function(e){e.Initial="Initial",e.Started="Started",e.Loading="Loading",e.Finished="Finished",e.Empty="Empty",e.Error="Error",e.Expired="Expired"}(n||(n={})),function(e){e.Blue="BLUE",e.Purple="PURPLE",e.Yellow="YELLOW",e.Green="GREEN",e.Pink="PINK",e.Red="RED"}(r||(r={})),function(e){e.Forward="forward",e.Backward="backward"}(o||(o={})),function(e){e.Default="default",e.Alert="alert"}(s||(s={})),function(e){e.Blue="blue",e.Purple="purple",e.Yellow="yellow",e.Green="green",e.Pink="pink",e.Red="red"}(l||(l={})),function(e){e.Breakfast="BREAKFAST",e.Lunch="LUNCH",e.Dinner="DINNER",e.SomeMeal="SOME_MEAL",e.HalfBoard="HALF_BOARD",e.FullBoard="FULL_BOARD",e.AllInclusive="ALL_INCLUSIVE"}(c||(c={})),function(e){e.Mobile="mobile_web",e.Desktop="web"}(d||(d={})),function(e){e.None="none",e.Breakfast="breakfast",e.HalfBoard="halfboard",e.FullBoard="fullboard",e.Lunch="lunch",e.Dinner="dinner",e.SomeMeal="some_meal",e.AllInclusive="all_inclusive"}(u||(u={})),function(e){e.PriceButton="price_button",e.ChooseRoomButton="choose_room_button",e.Scrolling="scrolling",e.Tariff="tariff"}(p||(p={})),function(e){e.HotelInfoFailed="hotel_info_failed",e.HotelReviewsFailed="hotel_reviews_failed",e.HotelReviewLanguagesFailed="hotel_review_languages_failed"}(m||(m={})),function(e){e.Deeplink="deeplink",e.SearchForm="search_form",e.ExploreDirectionHotels="explore_direction_hotels",e.Guides="guides",e.FlightsResultsHotelBanner="flights_results_hotel_banner",e.HotelsResults="results",e.HotelsMap="map",e.HotelShare="hotel_share"}(h||(h={})),function(e){e.Deeplink="deeplink",e.SearchForm="search_form",e.HotelsResults="results"}(g||(g={})),function(e){e.Deeplink="deeplink",e.SearchForm="search_form",e.HotelsResults="results"}(f||(f={}));const _=["single_bed","bunk_bed","futon","sofa"],v=["double_bed","super_king_size_bed","king_size_bed"];let y,k,b,x,S,w,E,F,P,$,C;!function(e){e.Beds="beds",e.MealPlan="meal_plan",e.FreeCancellation="cancellation_info",e.NoDeposit="no_deposit"}(y||(y={})),function(e){e.Separate="separate",e.Double="double",e.All="all"}(k||(k={})),function(e){e.Dates="dates",e.Filters="filters"}(b||(b={})),function(e){e.FreeCancellation="free",e.PaidCancellation="paid",e.FullyPaidCancellation="paid_100p"}(x||(x={})),function(e){e.Warning="warning",e.Info="info"}(S||(S={})),function(e){e.Inited="INITED",e.Pending="PENDING",e.Finished="FINISHED",e.Failed="FAILED",e.Expired="EXPIRED"}(w||(w={})),function(e){e.Blue="BLUE",e.Purple="PURPLE",e.Yellow="YELLOW",e.Green="GREEN",e.Pink="PINK",e.Cosmic="COSMIC"}(E||(E={})),function(e){e.SoloTraveller="SOLO_TRAVELLER",e.YoungCouple="YOUNG_COUPLE",e.MatureCouple="MATURE_COUPLE",e.FamilyWithYoungChildren="FAMILY_WITH_YOUNG_CHILDREN",e.FamilyWithOlderChildren="FAMILY_WITH_OLDER_CHILDREN",e.WithFriends="WITH_FRIENDS",e.Group="GROUP",e.ReviewCategoryCouples="REVIEW_CATEGORY_COUPLES",e.ReviewCategoryFamilies="REVIEW_CATEGORY_FAMILIES",e.ReviewCategoryGroupOfFriends="REVIEW_CATEGORY_GROUP_OF_FRIENDS",e.ReviewCategoryBusinessTravellers="REVIEW_CATEGORY_BUSINESS_TRAVELLERS"}(F||(F={})),function(e){e.Single="SINGLE",e.Double="DOUBLE",e.KingSize="KING_SIZE",e.SuperKingSize="SUPER_KING_SIZE",e.Sofa="SOFA",e.Bunk="BUNK",e.Futon="FUTON",e.Multiple="MULTIPLE",e.Unknown="UNKNOWN"}(P||(P={})),function(e){e.FreeCancellation="FREE_CANCELLATION",e.PaidCancellation="PAID_CANCELLATION",e.Paid100pCancellation="PAID_100P_CANCELLATION"}($||($={})),function(e){e.Warning="WARNING",e.Info="INFO"}(C||(C={}))},49829:function(e,t,a){"use strict";a.d(t,{w:function(){return _e}});var i=a(98116),n=a(82097),r=a(72675),o=a(38032),s=a(79403),l=a(20611),c=a(30091),d=a(68346),u=a(39777),p=a(80945),m=a(76588),h=a(80472),g=a(62423),f=a(6560),_=a(35255),v=a(51862),y=a(64783),k=a(35529),b=a(71049);const x=(0,k.Literal)("available"),S=(0,k.Literal)("not_available"),w=(0,k.Record)({url:k.String,method:(0,k.Literal)("GET")}),E=(0,k.Record)({id:k.Number,name:k.String,logotype:(0,k.Record)({url:k.String}),description:k.String,state:(0,k.Union)(x,S),deeplink:w,title:k.String,offer_type:(0,k.Literal)("default"),rate:(0,k.Optional)(b.DI),default:(0,k.Record)({rate:b.DI,avg_waiting_time:(0,k.Optional)(k.String),max_waiting_time:(0,k.Optional)(k.String),detailed_description:k.String,additional_details:b.zf,button_text:k.String,additional_button_text:k.String})}),F=(0,k.Record)({id:k.Number,name:k.String,logotype:(0,k.Record)({url:k.String}),description:k.String,state:(0,k.Union)(x,S),deeplink:w,title:k.String,offer_type:(0,k.Literal)("pcr"),rate:(0,k.Optional)(b.DI),pcr:(0,k.Record)({price:b.gC,cashback_value:b.gC,details:(0,k.Array)(k.String),detailed_description:k.String,button_text:k.String,additional_button_text:k.String,how_it_works:(0,k.Record)({title:k.String,values:(0,k.Array)(k.String)}),subtitle:k.String,conditions:(0,k.Array)(k.String),benefits:(0,k.Record)({title:k.String,values:(0,k.Array)(k.String)}),max_waiting_time:(0,k.Optional)(k.String),avg_waiting_time:(0,k.Optional)(k.String),additional_details:b.zf})}),P=(0,k.Record)({id:k.Number,name:k.String,logotype:(0,k.Record)({url:k.String}),description:k.String,state:(0,k.Union)(x,S),deeplink:w,title:k.String,offer_type:(0,k.Literal)("booking_rocketmiles"),rate:(0,k.Optional)(b.DI),booking_rocketmiles:(0,k.Record)({rate:b.DI,avg_waiting_time:(0,k.Optional)(k.String),max_waiting_time:(0,k.Optional)(k.String),detailed_description:k.String,additional_details:b.zf,button_text:k.String,additional_button_text:k.String,offer_highlight_info:(0,k.Record)({value_markdown:b.BP,image:(0,k.Optional)((0,k.Record)({url:k.String}))})})}),$=(0,k.Union)(E,F,P),C=(0,k.Array)($),{$commonParams:I,$headersWithFallbackAuid:D}=f.s.outputs,R=(0,i.withFactory)({sid:"-w14bgr",fn:()=>(0,m.s5)({name:"cashback_offers_query",params:(0,i.withFactory)({sid:"e5onf",fn:()=>(0,m.t6)()}),request:{credentials:"include",method:"GET",url:(0,_.l)({endpoint:g.vG.CashbackOffers}),query:{source:I,fn:v.s},headers:{source:D,fn:(e,t)=>t}},response:{contract:(0,h.v)(C)}})});(0,i.withFactory)({sid:"-nwtxjm",fn:()=>(0,m.XD)(R,y.z)});var O=a(44074);const{mdToHtml:M}=p.r.inputs,A=async e=>{switch(e.offer_type){case"pcr":return(e=>({id:e.id,name:e.name,logoUrl:e.logotype.url,description:e.description,state:e.state,deeplink:e.deeplink,title:e.title,offerType:e.offer_type,rate:e.rate,pcr:{price:(0,O.zO)(e.pcr.price),cashbackValue:(0,O.zO)(e.pcr.cashback_value),details:e.pcr.details,detailedDescription:e.pcr.detailed_description,buttonText:e.pcr.button_text,additionalButtonText:e.pcr.additional_button_text,howItWorks:e.pcr.how_it_works,subtitle:e.pcr.subtitle,conditions:e.pcr.conditions,benefits:e.pcr.benefits,maxWaitingTime:e.pcr.max_waiting_time||null,avgWaitingTime:e.pcr.avg_waiting_time||null,additionalDetails:(0,O.bK)(e.pcr.additional_details)}}))(e);case"booking_rocketmiles":return(async e=>{const{booking_rocketmiles:t}=e;return{id:e.id,name:e.name,logoUrl:e.logotype.url,description:e.description,state:e.state,deeplink:e.deeplink,title:e.title,offerType:e.offer_type,rate:e.rate,bookingRocketmiles:{rate:t.rate,avgWaitingTime:t.avg_waiting_time||null,maxWaitingTime:t.max_waiting_time||null,detailedDescription:t.detailed_description,additionalDetails:(0,O.bK)(t.additional_details),buttonText:t.button_text,additionalButtonText:t.additional_button_text,badgeText:await M(t.offer_highlight_info.value_markdown),image:t.offer_highlight_info?.image?.url??null}}})(e);default:return(e=>({id:e.id,name:e.name,logoUrl:e.logotype.url,description:e.description,state:e.state,deeplink:e.deeplink,title:e.title,offerType:e.offer_type,rate:e.rate,default:{rate:e.default.rate,avgWaitingTime:e.default.avg_waiting_time||null,maxWaitingTime:e.default.max_waiting_time||null,detailedDescription:e.default.detailed_description,additionalDetails:(0,O.bK)(e.default.additional_details),buttonText:e.default.button_text,additionalButtonText:e.default.additional_button_text}}))(e)}},{getNormalizedDto:T}=p.r.inputs,B=R.$status,H=B.map((e=>({isIdle:"initial"===e,isProcessing:"pending"===e,isSuccess:"done"===e,isFail:"fail"===e}))),L=(0,i.createEvent)({sid:"lstkvz"}),{requestSuccessfullyCompleted:U,requestFailed:N,contractValidationFailed:z}=(0,u.E)(R);(0,i.sample)({and:[{clock:L,filter:Boolean,fn:e=>({tag:e}),target:R.start}],or:{sid:"-ozv4pe"}});const{received:G}=T((async e=>{const t=e.map(A);return await Promise.all(t)}),U);(0,i.sample)({and:[{clock:z,fn:e=>({name:"CashbackOffersDto validation error",errorMessage:e.validationErrors,errorType:e.errorType,explanation:e.explanation,data:e.response}),target:d.R.inputs.logContractError}],or:{sid:"-oef5kb"}});const j={inputs:{requested:L},outputs:{$state:B,$stateFlags:H,received:G,requestFailed:N},internals:{cashbackOffersQuery:R,stubs:{cashbackOffersDtoStub:[{id:1,name:"default offer",logotype:{url:"logotype url"},description:"description",state:"not_available",deeplink:{url:"deeplink url",method:"GET"},title:"title",offer_type:"default",rate:{type:"percent",value:5667},default:{rate:{type:"percent",value:5667},avg_waiting_time:"avg_waiting_time",max_waiting_time:"max_waiting_time",detailed_description:"detailed_description",additional_details:[{title:"additional_details 0",values:["additional_details value 01","additional_details value 02"]},{title:"additional_details 1",values:["additional_details value 11","additional_details value 12"]}],button_text:"button_text",additional_button_text:"additional_button_text"}},{id:29,name:"ostrovok offer",logotype:{url:"logotype url"},description:"description",state:"not_available",deeplink:{url:"deeplink url",method:"GET"},title:"title",offer_type:"default",rate:{type:"percent",value:5667},default:{rate:{type:"percent",value:5667},avg_waiting_time:"avg_waiting_time",max_waiting_time:"max_waiting_time",detailed_description:"detailed_description",additional_details:[{title:"additional_details 0",values:["additional_details value 01","additional_details value 02"]},{title:"additional_details 1",values:["additional_details value 11","additional_details value 12"]}],button_text:"button_text",additional_button_text:"additional_button_text"}},{id:1,name:"pcr offer",logotype:{url:"logotype url"},description:"description",state:"available",deeplink:{url:"deeplink url",method:"GET"},title:"title",offer_type:"pcr",pcr:{price:{currency_code:"currency_code price",value:123},cashback_value:{currency_code:"currency_code cashback_value",value:123},details:["123","1234"],detailed_description:"detailed_description",button_text:"button_text",additional_button_text:"additional_button_text",how_it_works:{title:"how_it_works title",values:["how_it_works value 1","how_it_works value 2"]},subtitle:"subtitle",conditions:["conditions 1","conditions 2"],benefits:{title:"benefits title",values:["benefits value 1","benefits value 2"]},max_waiting_time:"max_waiting_time",avg_waiting_time:"avg_waiting_time",additional_details:[{title:"additional_details 0",values:["additional_details value 01","additional_details value 02"]},{title:"additional_details 1",values:["additional_details value 11","additional_details value 12"]}]}},{id:2,name:"default offer",logotype:{url:"https://hermitage.aviasales.com/imgs/rs:fit:150:150/cHJlbWl1bS9sb2dvcy9Bdmlhc2FsZXM=.svg"},description:"description",state:"not_available",deeplink:{url:"deeplink url",method:"GET"},title:"title",offer_type:"booking_rocketmiles",booking_rocketmiles:{rate:{type:"percent",value:20},avg_waiting_time:"avg_waiting_time",max_waiting_time:"max_waiting_time",detailed_description:"detailed_description",additional_details:[{title:"additional_details 0",values:["additional_details value 01","additional_details value 02"]},{title:"additional_details 1",values:["additional_details value 11","additional_details value 12"]}],button_text:"button_text",additional_button_text:"additional_button_text",offer_highlight_info:{value_markdown:"   ** 20%**  ",image:{url:"https://img.wayaway.io/imgs/rs:fit:224:96/cHJlbWl1bS9idXJkX2xvZ29fbGlnaHQ=.svg"}}}}],cashbackOffersDataStub:[{id:1,name:"default offer",logoUrl:"logotype url",description:"description",state:"not_available",deeplink:{url:"deeplink url",method:"GET"},title:"title",offerType:"default",rate:{type:"percent",value:5667},default:{rate:{type:"percent",value:5667},avgWaitingTime:"avg_waiting_time",maxWaitingTime:"max_waiting_time",detailedDescription:"detailed_description",additionalDetails:[{title:"additional_details 0",values:["additional_details value 01","additional_details value 02"]},{title:"additional_details 1",values:["additional_details value 11","additional_details value 12"]}],buttonText:"button_text",additionalButtonText:"additional_button_text"}},{id:29,name:"ostrovok offer",logoUrl:"logotype url",description:"description",state:"not_available",deeplink:{url:"deeplink url",method:"GET"},title:"title",offerType:"default",rate:{type:"percent",value:5667},default:{rate:{type:"percent",value:5667},avgWaitingTime:"avg_waiting_time",maxWaitingTime:"max_waiting_time",detailedDescription:"detailed_description",additionalDetails:[{title:"additional_details 0",values:["additional_details value 01","additional_details value 02"]},{title:"additional_details 1",values:["additional_details value 11","additional_details value 12"]}],buttonText:"button_text",additionalButtonText:"additional_button_text"}},{id:1,name:"pcr offer",logoUrl:"logotype url",description:"description",state:"available",deeplink:{url:"deeplink url",method:"GET"},title:"title",offerType:"pcr",rate:void 0,pcr:{price:{currency:"currency_code price",value:123},cashbackValue:{currency:"currency_code cashback_value",value:123},details:["123","1234"],detailedDescription:"detailed_description",buttonText:"button_text",additionalButtonText:"additional_button_text",howItWorks:{title:"how_it_works title",values:["how_it_works value 1","how_it_works value 2"]},subtitle:"subtitle",conditions:["conditions 1","conditions 2"],benefits:{title:"benefits title",values:["benefits value 1","benefits value 2"]},maxWaitingTime:"max_waiting_time",avgWaitingTime:"avg_waiting_time",additionalDetails:[{title:"additional_details 0",values:["additional_details value 01","additional_details value 02"]},{title:"additional_details 1",values:["additional_details value 11","additional_details value 12"]}]}},{id:2,name:"default offer",logoUrl:"https://hermitage.aviasales.com/imgs/rs:fit:150:150/cHJlbWl1bS9sb2dvcy9Bdmlhc2FsZXM=.svg",description:"description",state:"not_available",deeplink:{url:"deeplink url",method:"GET"},title:"title",offerType:"booking_rocketmiles",rate:void 0,bookingRocketmiles:{rate:{type:"percent",value:20},avgWaitingTime:"avg_waiting_time",maxWaitingTime:"max_waiting_time",detailedDescription:"detailed_description",additionalDetails:[{title:"additional_details 0",values:["additional_details value 01","additional_details value 02"]},{title:"additional_details 1",values:["additional_details value 11","additional_details value 12"]}],buttonText:"button_text",additionalButtonText:"additional_button_text",badgeText:"<p>   <strong> 20%</strong>  </p>",image:"https://img.wayaway.io/imgs/rs:fit:224:96/cHJlbWl1bS9idXJkX2xvZ29fbGlnaHQ=.svg"}}]}}},V={...j.inputs},q={...j.outputs},W={query:j.internals.cashbackOffersQuery,stubs:{...j.internals.stubs}},Q=(0,c.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/premium/services/api_cashback_offers/index.ts",api:{outputs:q,inputs:V,internals:W}});var Z=a(68621),K=a(17563),Y=a(82203);const J={2:Y.SL.Booking,2002:Y.SL.Booking,3002:Y.SL.Booking,29:Y.SL.Ostrovok,106:Y.SL.Tvil,137:Y.SL.Klook,93:Y.SL.Hostelworlds},{$isAviasalesBrand:X}=s.U.outputs,{$origin:ee}=l.D.outputs,{received:te,requestFailed:ae,$state:ie}=Q.outputs,{requested:ne}=Q.inputs,{$premiumStatus:re,$isAnyPremium:oe}=Z.b.outputs,se=(0,i.withFactory)({sid:"gkcsu1",fn:()=>(0,n.f)(ie,"pending")}),le=(0,i.createEvent)({sid:"-azzndv"}),ce=(0,i.createStore)(null,{sid:"-hp1m2f"}).on(te,((e,t)=>(e=>e.reduce(((e,t)=>{const a=J[t.id];if(a){const i=t?.deeplink?.url??null;if(!i)return e;e&&(e[a]=(0,K.parseUrl)(i))}return e}),{}))(t))).reset(le),de=(0,i.createStore)(null,{sid:"-wlmtox"}).on(te,((e,t)=>(e=>{const t=e?.reduce(((e,t)=>{const a=J[t.id];if(a){const i=(t?.rate?.max_value||t?.rate?.value)??null;e&&(e[a]=i)}return e}),{});return t||null})(t))).reset(le),ue=(0,i.createStore)(null,{sid:"tsog8v"}).reset(le);(0,i.sample)({and:[{clock:te,source:{isAviasalesBrand:X,urlOrigin:ee},fn:({urlOrigin:e,isAviasalesBrand:t},a)=>((e,t,a)=>{const i=t?"/my/more":"/my/plus",n=a?.reduce(((t,a)=>{const n=J[a.id];if(n){const r=`${e}${i}?offer_id=${a.id}`;t&&(t[n]=r)}return t}),{});return n||null})(e,t,a),target:ue}],or:{sid:"-qsk007"}}),(0,i.sample)({and:[{clock:re.updates,filter:(0,i.withFactory)({sid:"-okvpn1",fn:()=>(0,r.x)((0,i.withFactory)({sid:"2qorp",fn:()=>(0,o.f)(ce)}),(0,i.withFactory)({sid:"3ahd2",fn:()=>(0,o.f)(se)}),oe)}),fn:()=>"hotels",target:ne}],or:{sid:"-pzewk2"}}),(0,i.sample)({and:[{clock:re.updates,filter:(0,i.withFactory)({sid:"-9fft0t",fn:()=>(0,r.x)(ce,(0,i.withFactory)({sid:"h1dl6p",fn:()=>(0,o.f)(oe)}))}),target:le}],or:{sid:"-phthki"}}),(0,i.sample)({and:[{clock:ae,target:le}],or:{sid:"-peiq0c"}});var pe,me=a(83781);!function(e){e.DeeplinksUpdated="service/helios/hotel_offers/deeplinks_updated",e.MaxRatesUpdated="service/helios/hotel_offers/max_rates_updated",e.RulesUrlsUpdated="service/helios/hotel_offers/rules_urls_updated"}(pe||(pe={}));const he=(0,me.Sy)((0,me.ZE)(pe.DeeplinksUpdated)),ge=(0,me.Sy)((0,me.ZE)(pe.MaxRatesUpdated)),fe=(0,me.Sy)((0,me.ZE)(pe.RulesUrlsUpdated));(0,i.sample)({and:[{clock:ce,target:he}],or:{sid:"-rl4j4q"}}),(0,i.sample)({and:[{clock:de,target:ge}],or:{sid:"-r6tvpc"}}),(0,i.sample)({and:[{clock:ue,target:fe}],or:{sid:"-r42wqj"}});const _e={outputs:{$premiumHotelPartnerDeeplinks:ce,$premiumHotelPartnerMaxRateValues:de,$premiumHotelPartnerRulesUrls:ue},internals:{invalidateCashbackOffers:le,updateDeeplinksFx:he,updateMaxRatesFx:ge,updateRulesUrlsFx:fe}}},44174:function(e){e.exports=function(e,t,a,i){for(var n=-1,r=null==e?0:e.length;++n<r;){var o=e[n];t(i,o,a(o),e)}return i}},81119:function(e,t,a){var i=a(89881);e.exports=function(e,t,a,n){return i(e,(function(e,i,r){t(n,e,a(e),r)})),n}},23933:function(e,t,a){var i=a(44239),n=a(37005);e.exports=function(e){return n(e)&&"[object RegExp]"==i(e)}},5076:function(e,t,a){var i=a(89881);e.exports=function(e,t){var a;return i(e,(function(e,i,n){return!(a=t(e,i,n))})),!!a}},55189:function(e,t,a){var i=a(44174),n=a(81119),r=a(67206),o=a(1469);e.exports=function(e,t){return function(a,s){var l=o(a)?i:n,c=t?t():{};return l(a,e,r(s,2),c)}}},16612:function(e,t,a){var i=a(77813),n=a(98612),r=a(65776),o=a(13218);e.exports=function(e,t,a){if(!o(a))return!1;var s=typeof t;return!!("number"==s?n(a)&&r(t,a.length):"string"==s&&t in a)&&i(a[t],e)}},58809:function(e,t,a){var i=a(92822)("keyBy",a(24350));i.placeholder=a(69306),e.exports=i},73918:function(e,t,a){var i=a(92822)("some",a(59704));i.placeholder=a(69306),e.exports=i},37977:function(e,t,a){var i=a(92822)("split",a(71640));i.placeholder=a(69306),e.exports=i},96347:function(e,t,a){var i=a(23933),n=a(7518),r=a(31167),o=r&&r.isRegExp,s=o?n(o):i;e.exports=s},24350:function(e,t,a){var i=a(89465),n=a(55189)((function(e,t,a){i(e,a,t)}));e.exports=n},66604:function(e,t,a){var i=a(89465),n=a(47816),r=a(67206);e.exports=function(e,t){var a={};return t=r(t,3),n(e,(function(e,n,r){i(a,n,t(e,n,r))})),a}},59704:function(e,t,a){var i=a(82908),n=a(67206),r=a(5076),o=a(1469),s=a(16612);e.exports=function(e,t,a){var l=o(e)?i:r;return a&&s(e,t,a)&&(t=void 0),l(e,n(t,3))}},71640:function(e,t,a){var i=a(80531),n=a(40180),r=a(62689),o=a(16612),s=a(96347),l=a(83140),c=a(79833);e.exports=function(e,t,a){return a&&"number"!=typeof a&&o(e,t,a)&&(t=a=void 0),(a=void 0===a?4294967295:a>>>0)?(e=c(e))&&("string"==typeof t||null!=t&&!s(t))&&!(t=i(t))&&r(e)?n(l(e),0,a):e.split(t,a):[]}},65752:function(e,t,a){"use strict";a.d(t,{SC:function(){return u},bU:function(){return p},pb:function(){return m}});var i=a(4190),n=a(98116),r=a(67294);function o(e){return function(t){const{stores:a,events:i,data:n,functions:o}=s(t.bind),c=s(t.hooks||{});return r.forwardRef(((s,d)=>{const u=e.useUnit(a,t.useUnitConfig),p=e.useUnit(i,t.useUnitConfig),m=l(o),h=Object.assign({ref:d},u,p,n,m,s),g=e.useUnit(c.events,t.useUnitConfig),f=l(c.functions);return r.useEffect((()=>{const e=Object.assign({},f,g);return e.mounted&&e.mounted(),()=>{e.unmounted&&e.unmounted()}}),[g,f]),r.createElement(t.view,h)}))}}function s(e){const t={},a={},i={},r={};for(const o in e){const s=e[o];n.is.event(s)||n.is.effect(s)?t[o]=s:n.is.store(s)?a[o]=s:"function"==typeof s?r[o]=s:i[o]=s}return{events:t,stores:a,data:i,functions:r}}function l(e){const t=(0,i.useProvidedScope)();return r.useMemo((()=>{const a={};for(const i in e){const r=e[i];a[i]=(0,n.scopeBind)(r,{scope:t||void 0,safe:!0})}return a}),[t,e])}const c=()=>null;function d(e,t){const a={}.hasOwnProperty;for(const i in e)a.call(e,i)&&t(i)}const u=o(i),p=(o(i),function(e){const t=o(e);return function(a){let i,n,o;"if"in a?(i=a.if.map((e=>e?"then":"else")),n={then:a.then,else:a.else},o=c):(i=a.source,n=a.cases,o=a.default??c);const s=a.bind??{};return t({bind:s,view:function(t){const s=e.useUnit(i,a.useUnitConfig),l=n[s]??o;return r.createElement(l,t)},hooks:a.hooks,useUnitConfig:a.useUnitConfig})}}(i)),m=function(e){const t=o(e);return function(a){const o=t({view:a.view,bind:a.bind?a.bind:{},hooks:a.hooks,useUnitConfig:a.useUnitConfig}),s={getKey:a.getKey,fn:(e,t)=>{const s=(0,i.useProvidedScope)(),l=r.useMemo((()=>{const i={};return a.mapItem?d(a.mapItem,(r=>{const o=(0,a.mapItem[r])(e,t);i[r]="function"==typeof o?(0,n.scopeBind)(o,{safe:!0,scope:s||void 0}):o})):d(e,(t=>{i[t]=e[t]})),i}),[e,t]);return r.createElement(o,l)}};return()=>e.useList(a.source,s)}}(i)}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/shared-cdfd1e898ac9704ca41cb4bfa47917fb08d8721c.1ab2c9dc2c4eaec41aab.min.js.map