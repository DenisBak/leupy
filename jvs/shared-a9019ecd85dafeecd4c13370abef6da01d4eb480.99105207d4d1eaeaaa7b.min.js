(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[10098],{61653:function(e,t,i){"use strict";i.d(t,{YU:function(){return h},A:function(){return r},qp:function(){return g}});var s=i(17563);const r=({searchId:e,proposalId:t,agentId:i,agentLabel:r,lang:a,resultsHostUrl:n,market:o,brand:c,isCharter:l,isAssisted:u,assistedFallback:d,marker:p,currency:m,passengers:f,priceValue:g,destination:_,departDateTimestamp:h,returnDateTimestamp:y})=>{const b={search_id:e,proposal_id:t,gate_id:i,gate_label:r,lang:a,results_url:n,market:o,brand:c,marker:d?void 0:p};return l&&(b.is_charter=!0),u?`/assisted?${(0,s.stringify)({...b,adults:f.adults,children:f.children,infants:f.infants,price_value:g,price_currency:m,departure_city:_.departureCity,departure_date:h,arrival_city:_.arrivalCity,return_date:y,fallback:d,request_source:"booking_redirect",assisted:!0})}`:`/click?${(0,s.stringify)({...b,fallback:window.location.href,gate_currency:m,request_source:"booking_redirect"})}`};var a=i(38779),n=i(37667),o=i.n(n),c=i(56580),l=i.n(c),u=i(44236),d=i.n(u);const p=l().convert({fixed:!1}),m=e=>(e=>o()("duration",e.flights))(e)+((e=>o()("duration",e.transfers))(e)||0),f=p(((e,t)=>{const i=[e],s=t.segments.map(m);try{for(let e=0;e<t.segments.length;e+=1){const r=t.segments[e];i.push(`${r.flights[0].localDepartureTimestamp}`),i.push(`${r.flights[r.flights.length-1].localArrivalTimestamp}`),i.push(`000000${s[e]}`.slice(-6));const a=[];for(const e of Array.from(r.flights))a.push(e.departureAirportIata),a.push(e.arrivalAirportIata);i.push(...d()(a))}}catch(e){}return[i.join(""),t.sign].join("_")}),((e,t)=>`${e}_${t.sign}`)),g=({agentLabel:e="",ticket:t,proposal:i,unifiedPrice:r,currencyRates:n,searchId:o="",marker:c,currentCurrency:l,utmMedium:u,utmCampaign:d,footprintStr:p,baseSearchUrl:m,expectedPriceSource:g="share",utmSource:_="ticket_sharing",requestSource:h="",preCheckedFilters:y})=>{const{protocol:b,port:x,hostname:v,pathname:k}=window.location,j=n[l]||1,S=r?Math.round(r/j):null;let w;const C=r?`_${r}`:"";if(p)w=`${p}_${t.sign}${C}`;else{const e=i?((e,t)=>{let i=e.segments[0].flights[0],s=0,r=0;for(let t=0;t<e.segments.length;t+=1){const a=e.segments[t];for(let e=0;e<a.flights.length;e+=1){const n=a.flights[e];i.duration<n.duration&&(i=n,s=t,r=e)}}return t[s][r].marketingCarrierDesignator.carrier})(t,i.flightTerms):(e=>{let t=e.segments[0].flights[0];for(let i=0;i<e.segments.length;i+=1){const s=e.segments[i];for(let e=0;e<s.flights.length;e+=1){const i=s.flights[e];t.duration<i.duration&&(t=i)}}return t.operatingCarrier})(t);w=`${f(e,t)}${C}`}const T=(0,s.stringify)({t:w,marker:c,search_date:(0,a.Z)(new Date,"ddMMyyyy"),search_label:e,expected_price:S,expected_price_uuid:o,expected_price_currency:l,expected_price_source:g,utm_source:_,utm_medium:u,utm_campaign:d,request_source:h,filter_stops:y?.direct||"",filter_baggage:y?.withBaggage||"",filter_transfers_without_visa:y?.noVisaAtTransfer||""},{skipEmptyString:!0,skipNull:!0});return m?`${b}//${v}${x?`:${x}`:""}/search${m}?${T}`:`${b}//${v}${x?`:${x}`:""}${k}?${T}`};var _=i(88300);const h=e=>{if(!e)return null;const{segments:t,tripClass:i,passengers:s}=e,r=(e=>e.map((e=>({origin:{iata:e.origin,name:e.origin_name,type:e.origin_type},destination:{iata:e.destination,name:e.destination_name,type:e.destination_type},date:new Date(e.date)}))))(t);return`/${(0,_.j)({tripClass:i,passengers:s,segments:r})}`}},81327:function(e,t,i){"use strict";i.d(t,{I:function(){return y}});var s=i(30091),r=i(98116),a=i(30040),n=i(47047),o=i(53788),c=i(10924),l=i(38387),u=i(20611),d=i(24002);const p={market:o.D.outputs.$market,isMobile:l.l.outputs.$isMobile,platform:d.t.outputs.platform,page:u.D.outputs.$pathname},m=(0,r.withFactory)({sid:"-lrm5tg",fn:()=>(0,n.s)((({category:e,payload:t})=>{const i=(0,r.createEvent)({sid:"g1uze8"}),s=c.I.inputs.createReporter({data:{category:e,service:a.t6.Usercom},payload:{...p,...t}});return s({clock:i,data:({data:e},{data:t})=>({...t,...e}),payload:({payload:e},{payload:t})=>({...t,...e})}),{report:s,sendEvent:i}}))}),f=(0,r.withFactory)({sid:"s3q5d7",fn:()=>(0,n.s)((e=>{const{sendEvent:t}=(0,r.withFactory)({sid:"-ybvkb1",fn:()=>(0,n.d)((()=>m({category:"general",payload:e})))});return{sendUsercomGeneralEvent:t}}))}),g=(0,r.withFactory)({sid:"-6ad35g",fn:()=>(0,n.s)((e=>{const{sendEvent:t,report:i}=(0,r.withFactory)({sid:"-4z2z60",fn:()=>(0,n.d)((()=>m({category:"profile",payload:e})))});return{usercomProfileReporter:i,sendUsercomProfileEvent:t}}))}),_=(0,r.withFactory)({sid:"-76cb6t",fn:()=>(0,n.s)((e=>{const{sendEvent:t}=(0,r.withFactory)({sid:"-qmgqdx",fn:()=>(0,n.d)((()=>m({category:"subscription",payload:e})))});return{sendUsercomSubscriptionEvent:t}}))}),h={createUsercomSupportReporter:(0,r.withFactory)({sid:"-4oxll7",fn:()=>(0,n.s)((e=>{const{sendEvent:t}=(0,r.withFactory)({sid:"2qbu25",fn:()=>(0,n.d)((()=>m({category:"support",payload:e})))});return{sendUsercomSupportEvent:t}}))}),createUsercomProfileReporter:g,createUsercomSubscriptionReporter:_,createUsercomGeneralReporter:f},y=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/usercom/services/analytics/index.ts",api:{outputs:h}})},91585:function(e,t,i){"use strict";i.d(t,{t:function(){return m}}),i(21703);var s=i(30091),r=i(98116),a=i(24926),n=i(96864),o=i(47420);const{$userSettings:c}=n.W.outputs,{$seatCount:l}=o.i.outputs,u=(0,r.createStore)(null,{sid:"-4qwnmr"}),d=(0,r.combine)({and:[c,u,(e,t)=>t??Boolean(e.use_price_per_passenger)],or:{sid:"-3wilf9"}}),p=(0,r.withFactory)({sid:"gvkm7l",fn:()=>(0,a.w)({filter:d,then:1,other:l})}),m=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/usercom/services/price_multiplier/index.ts",api:{outputs:{$aviaPriceMultiplier:p,$usePricePerPassenger:d}},attachTestApi:()=>{throw new Error("Test API is not available in production")}})},82036:function(e,t,i){"use strict";i.d(t,{m:function(){return ye}}),i(21703);var s=i(30091),r=i(98116),a=i(47047),n=i(29260),o=i(21247),c=i(15863),l=i(41832),u=i(43639),d=i(78364),p=i(67334),m=i(54428),f=i(77606),g=i.n(f);function _(e,t,i){if(g()(t)||!t[i])return null;const s=e/t[i];return Number(s.toFixed())}function h(e,t,i){return e?i("price_regular",{value:e,currency:t.toUpperCase()}):null}var y=i(35529);const b=(0,y.Record)({enabled:y.Boolean}),x=(0,r.createEvent)({sid:"-15rgze"}),v=(0,r.createEvent)({sid:"-tkkul1"}),k=(0,r.createEvent)({sid:"-fvvszt"}),j=(0,r.createEvent)({sid:"-ja1dw3"}),S=(0,r.withFactory)({sid:"-uzp2py",fn:()=>(0,n.m)({events:[k,m.O.outputs.authorized],reset:j})}),w=(0,r.createStore)(null,{sid:"-bivbmj"}).reset(j),C=(0,r.createStore)(null,{sid:"1h5o49"}).reset(j),{$enabled:T,turnOn:A,turnOff:E}=(0,r.withFactory)({sid:"qh1k38",fn:()=>(0,a.d)(c.qs,!1)}),{showLoginPopup:F}=(0,r.withFactory)({sid:"-uqx6gl",fn:()=>(0,a.d)(m.O.inputs.createLoginPopup,{loginSource:"login_popup",optionalAnalyticsData:{withEnticing:!0}})}),$=(0,r.withFactory)({sid:"-r308va",fn:()=>(0,a.d)((()=>d.f.inputs.createFlag({name:"usc-exp-webSubscriptionLoginFlow",contract:b,mapValue:({enabled:e})=>e,defaultValue:!1})))}).$value,D=(0,r.combine)({and:[l.y.outputs.$currencyRates,l.y.outputs.$currency,(e,t)=>_(63745,e,t)],or:{sid:"g9z3am"}}),N=(0,r.combine)({and:[l.y.outputs.$currencyRates,l.y.outputs.$currency,(e,t)=>_(5619,e,t)],or:{sid:"ty1cze"}}),O=(0,r.combine)({and:[D,l.y.outputs.$currency,u.J.outputs.$localize,h],or:{sid:"-hrbtq3"}}),R=(0,r.combine)({and:[N,l.y.outputs.$currency,u.J.outputs.$localize,h],or:{sid:"p5sxvu"}}),M=(0,r.combine)({and:[u.J.outputs.$localize,e=>e("ts_day_month",new Date("2024-11-08T00:00:00.000Z"))],or:{sid:"-yk6rq9"}});(0,r.sample)({and:[{clock:p.A.outputs.showSubscriptionLoginFlow,target:k}],or:{sid:"-ir7az5"}}),(0,r.sample)({and:[{clock:k,filter:$,target:[A,(0,r.withFactory)({sid:"djqcd5",fn:()=>(0,o.h)({targets:{type:w,source:C}})})]}],or:{sid:"-icwnjr"}}),(0,r.sample)({and:[{clock:j,target:E}],or:{sid:"-htnus4"}}),(0,r.sample)({and:[{clock:S,target:j}],or:{sid:"-hfd7cq"}}),(0,r.sample)({and:[{clock:v,target:F}],or:{sid:"-hcm8dx"}});const B={showWidget:k,hideWidget:j,authPopupOpened:v},P={userAuthorized:S,$ticketDate:M,$ticketPrice:D,$ticketDifferencePrice:N,$formattedTicketPrice:O,$formattedTicketDifferencePrice:R,$subscriptionType:w,$isPopupVisible:T,$isEnabled:$,$source:C};var q=i(65752),z=i(94184),Z=i.n(z),U=i(67294),I=i(28225),L=i(1156),W=i(39535),Q=i(85893);const V=(0,U.memo)((({className:e,onClick:t})=>{const{t:i}=(0,I.useTranslation)("service_subscription_login_flow");return(0,Q.jsx)(L.z,{className:Z()(e,"s___YrEzEMSQQSbfl1R45B5"),size:W.qE.M,onClick:t,autoFocus:!0,children:i("login")})}));V.displayName="LoginButton";var H=i(49963),G=i(44619);const J=({className:e,...t},i)=>(0,Q.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:i,style:{display:"inline-block"},...t,children:[(0,Q.jsx)("path",{d:"m7.443 16.549-3.557-5.875c-.199-.33-1.817.559-1.618.889l3.557 5.874 1.618-.888Z",fill:"url(#EmojiNinja__a)"}),(0,Q.jsx)("path",{opacity:.2,d:"M3.886 10.674c-.039-.068-.147-.085-.281-.064l-.973 1.556.298.49 1.095-1.753-.139-.229ZM3.363 13.372l.298.495 1.1-1.754-.299-.49-1.099 1.75Z",fill:"#fff"}),(0,Q.jsx)("path",{opacity:.3,d:"m4.25 11.273-1.9.024c-.086.1-.126.197-.082.265l.138.23 2.138-.028-.294-.491ZM2.844 12.512l.298.49 2.138-.028-.299-.49-2.137.028Z",fill:"#fff"}),(0,Q.jsx)("path",{opacity:.2,d:"m4.05 14.51.3.49 1.094-1.753-.294-.49-1.1 1.753Z",fill:"#fff"}),(0,Q.jsx)("path",{opacity:.3,d:"m3.532 13.65.298.49 2.138-.028-.299-.495-2.137.032Z",fill:"#fff"}),(0,Q.jsx)("path",{opacity:.2,d:"m4.739 15.644.298.49 1.095-1.748-.299-.491-1.094 1.749Z",fill:"#fff"}),(0,Q.jsx)("path",{opacity:.3,d:"m4.22 14.783.294.49 2.142-.027-.299-.49-2.137.027Z",fill:"#fff"}),(0,Q.jsx)("path",{opacity:.2,d:"m5.427 16.782.298.49L6.82 15.52l-.298-.49-1.095 1.753Z",fill:"#fff"}),(0,Q.jsx)("path",{opacity:.3,d:"m4.908 15.917.294.49 2.142-.027-.299-.49-2.137.027Z",fill:"#fff"}),(0,Q.jsx)("path",{d:"M20.04 17.513c-.886-.486-3.727-1.921-3.727-1.921H7.687s-2.841 1.435-3.726 1.92c-1.054.58-1.711 2.166-1.711 4.147 0 2.121 19.5 2.121 19.5 0 0-1.981-.657-3.567-1.71-4.146Z",fill:"url(#EmojiNinja__b)"}),(0,Q.jsx)("path",{d:"M7.756 16.067c.467-1.058 8.05-1.057 8.512 0C16.941 17.597 12 21.76 12 21.76s-4.92-4.163-4.243-5.693Z",fill:"url(#EmojiNinja__c)"}),(0,Q.jsx)("path",{d:"M16.164 15.528a.774.774 0 0 1-.514-.73v-1.583h-7.3V14.8c0 .328-.206.62-.514.73l-.149.063c0 1.696 2.209 2.86 4.313 2.86 2.104 0 4.313-1.164 4.313-2.86l-.15-.064Z",fill:"url(#EmojiNinja__d)"}),(0,Q.jsx)("path",{d:"M5.57 22.463s-.048-3.29-1.512-5.381a.213.213 0 0 1 .1-.328c.903-.362 4.192-1.905 4.192-1.905s.118 4.019 5.257 7.614H5.57Z",fill:"#2E3035"}),(0,Q.jsx)("path",{d:"M18.43 22.463s.048-3.29 1.512-5.381a.213.213 0 0 0-.1-.328c-.903-.363-4.192-1.91-4.192-1.91s-.118 4.024-5.257 7.62h8.036Z",fill:"url(#EmojiNinja__e)"}),(0,Q.jsx)("path",{d:"M7.245 6.975c-.709.698-.658 3.304.143 3.903 1.822 1.36 7.402 1.36 9.223 0 .802-.599.853-3.205.144-3.903-1.661-1.637-7.849-1.637-9.51 0Z",fill:"#FFC940"}),(0,Q.jsx)("path",{d:"M6.434 10.183s.075.658.789 2.775c.204.608 2.3 3.474 4.774 3.474s4.57-2.866 4.773-3.474c.714-2.117.789-2.775.789-2.775s.494-7.775-5.567-7.775c-6.06 0-5.558 7.775-5.558 7.775Zm5.567-3.932c3.973-.004 5.08 2.046 4.674 3.43-.444 1.654-3.562.455-4.674.455-1.112 0-4.23 1.2-4.674-.455-.407-1.384.701-3.434 4.674-3.43Z",fill:"#3D3F43"}),(0,Q.jsx)("path",{d:"M7.327 9.68c.22 1.836 5.052.954 5.052.954l-1.594.92 1.76.612-1.07.718.593.655-.27.466.344.365-.415.757.274.976c-2.474 0-4.238-2.533-4.442-3.14-.714-2.117-.788-2.776-.788-2.776s.548-.596.556-.506Z",fill:"url(#EmojiNinja__f)"}),(0,Q.jsx)("path",{d:"M12.001 6.25c2.893-.003 5.504 2.208 5.504 2.208-.25-2.29-1.291-4.58-5.504-4.58-4.213 0-5.255 2.29-5.5 4.58 0 0 2.607-2.211 5.5-2.207Z",fill:"url(#EmojiNinja__g)"}),(0,Q.jsx)("path",{d:"M12.001 3.161c-3.416 0-6.293 4.05-5.567 7.022.415-3.031 3.882-5.37 5.465-6.076a.245.245 0 0 1 .203 0c1.58.709 5.051 3.045 5.465 6.076.727-2.972-2.15-7.022-5.566-7.022Z",fill:"#9EA9B7"}),(0,Q.jsx)("path",{d:"M16.654 3.494C16.074 2.322 13.238.75 12.001.75c-1.237 0-4.072 1.572-4.653 2.744-.324.659-1.719 4.63-.914 6.689-.093-2.945 3.633-5.78 5.46-6.64a.246.246 0 0 1 .213 0c1.828.86 5.554 3.695 5.46 6.64.801-2.058-.59-6.03-.913-6.689Z",fill:"#3D3F43"}),(0,Q.jsx)("path",{d:"m11.56 1.989.528-.486-.348-.27L12 .87c-1.237 0-3.984 1.584-4.566 2.756-.324.659-1.806 4.497-1 6.555C6.339 7.18 10.216 3.961 12 3.162l-.768-.244.797-.482-.47-.447Z",fill:"url(#EmojiNinja__h)"}),(0,Q.jsx)("path",{d:"M15.798 7.61c-.8-.423-2.33-.444-2.9-.148-.122.056-.04.457.062.419.794-.314 2.075-.321 2.819.026.099.046.14-.238.019-.297ZM8.202 7.61c.8-.423 2.328-.444 2.9-.148.121.056.04.457-.062.419-.796-.314-2.075-.321-2.82.026-.098.046-.139-.238-.018-.297Z",fill:"#BB7C0A"}),(0,Q.jsx)("path",{d:"M11.222 9.05c.03.231-.128.505-.562.71-.276.131-.852.285-1.606-.034-.338-.142-.668-.585-.639-.831.41-.77 2.424-.883 2.807.155Z",fill:"#fff"}),(0,Q.jsx)("path",{d:"M9.856 8.245a.79.79 0 1 1 0 1.581.79.79 0 0 1 0-1.581Z",fill:"url(#EmojiNinja__i)"}),(0,Q.jsx)("path",{d:"M9.46 9.02c0 .547.791.547.791 0 0-.507-.791-.507-.791 0Z",fill:"#1A1626"}),(0,Q.jsx)("path",{d:"M9.34 8.798c0 .23.331.23.331 0 0-.211-.331-.211-.331 0Z",fill:"#AB968C"}),(0,Q.jsx)("path",{d:"M11.226 9.08c-.322-1.03-2.513-.878-2.81-.185.11-.887 2.536-1.122 2.81.185Z",fill:"#F0A429"}),(0,Q.jsx)("path",{d:"M12.778 9.05c-.03.231.127.505.562.71.276.131.85.285 1.605-.034.34-.142.67-.585.64-.831-.41-.77-2.425-.883-2.807.155Z",fill:"#fff"}),(0,Q.jsx)("path",{d:"M14.126 8.245a.79.79 0 1 1 .002 1.58.79.79 0 0 1-.002-1.58Z",fill:"url(#EmojiNinja__j)"}),(0,Q.jsx)("path",{d:"M13.731 9.02c0 .547.792.547.792 0 0-.507-.792-.507-.792 0Z",fill:"#1A1626"}),(0,Q.jsx)("path",{d:"M13.61 8.798c0 .23.333.23.333 0 0-.211-.332-.211-.332 0Z",fill:"#AB968C"}),(0,Q.jsx)("path",{d:"M12.774 9.08c.32-1.03 2.51-.882 2.81-.185-.111-.887-2.536-1.122-2.81.185Z",fill:"#F0A429"}),(0,Q.jsxs)("defs",{children:[(0,Q.jsxs)("linearGradient",{id:"EmojiNinja__a",x1:3.927,y1:14.436,x2:5.649,y2:13.442,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{stopColor:"#1A1626"}),(0,Q.jsx)("stop",{offset:.727,stopColor:"#4E5E67"})]}),(0,Q.jsxs)("linearGradient",{id:"EmojiNinja__b",x1:12,y1:23.25,x2:12,y2:15.592,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{offset:.135,stopColor:"#2E3035"}),(0,Q.jsx)("stop",{offset:1,stopColor:"#5A5C5F"})]}),(0,Q.jsxs)("linearGradient",{id:"EmojiNinja__c",x1:12.012,y1:21.76,x2:12.012,y2:15.274,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{stopColor:"#890405"}),(0,Q.jsx)("stop",{offset:.267,stopColor:"#9E090D"}),(0,Q.jsx)("stop",{offset:.817,stopColor:"#D51720"}),(0,Q.jsx)("stop",{offset:1,stopColor:"#E81C27"})]}),(0,Q.jsxs)("linearGradient",{id:"EmojiNinja__d",x1:12,y1:18.452,x2:12,y2:13.215,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{stopColor:"#404D54"}),(0,Q.jsx)("stop",{offset:.721,stopColor:"#1A1626"})]}),(0,Q.jsxs)("linearGradient",{id:"EmojiNinja__e",x1:15.188,y1:14.845,x2:15.188,y2:22.463,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{stopColor:"#8A8F94"}),(0,Q.jsx)("stop",{offset:1,stopColor:"#2E3035"})]}),(0,Q.jsxs)("linearGradient",{id:"EmojiNinja__f",x1:6.771,y1:12.887,x2:12.545,y2:12.887,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{stopColor:"#3D3F43"}),(0,Q.jsx)("stop",{offset:.727,stopColor:"#5A5C5F"})]}),(0,Q.jsxs)("linearGradient",{id:"EmojiNinja__g",x1:12.003,y1:8.458,x2:12.003,y2:3.879,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{stopColor:"#E81C27"}),(0,Q.jsx)("stop",{offset:.765,stopColor:"#890405"})]}),(0,Q.jsxs)("linearGradient",{id:"EmojiNinja__h",x1:6.198,y1:5.527,x2:12.088,y2:5.527,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{stopColor:"#3D3F43"}),(0,Q.jsx)("stop",{offset:.727,stopColor:"#5A5C5F"})]}),(0,Q.jsxs)("linearGradient",{id:"EmojiNinja__i",x1:9.855,y1:9.825,x2:9.855,y2:8.245,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{stopColor:"#A6694A"}),(0,Q.jsx)("stop",{offset:1,stopColor:"#4F2A1E"})]}),(0,Q.jsxs)("linearGradient",{id:"EmojiNinja__j",x1:14.126,y1:9.825,x2:14.126,y2:8.245,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{stopColor:"#A6694A"}),(0,Q.jsx)("stop",{offset:1,stopColor:"#4F2A1E"})]})]})]}),Y=(0,U.memo)((0,U.forwardRef)(J));Y.displayName="EmojiNinja";const K=({className:e,...t},i)=>(0,Q.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:i,style:{display:"inline-block"},...t,children:[(0,Q.jsxs)("g",{clipPath:"url(#EmojiMoneyWithWings__a)",children:[(0,Q.jsx)("path",{d:"M21.164 8.425c-2.12-1.937-14.688 3.12-19.71 6.153a60.911 60.911 0 0 1-.425 1.884c2.194 2.003 4.585 4.423 6.778 6.427 7.69-4.332 13.612-11.933 13.612-11.933-.105-.857-.128-1.658-.255-2.531Z",fill:"#529320"}),(0,Q.jsx)("path",{d:"M7.839 22.314a943.194 943.194 0 0 0-6.716-6.236s4.706 4.524 6.701 6.492c8.356-4.895 13.517-12.114 13.517-12.114s-6.406 8.11-13.502 11.858Z",fill:"#447A1B"}),(0,Q.jsx)("path",{d:"M7.87 21.742a691.59 691.59 0 0 0-6.619-6.103s3.754 3.63 6.605 6.355c8.433-4.87 13.415-12.122 13.415-12.122s-5.565 7.57-13.4 11.87Z",fill:"#447A1B"}),(0,Q.jsx)("path",{d:"M7.91 21.033c-2.822-2.564-6.518-5.931-6.518-5.931s3.713 3.55 6.502 6.205C16.245 16.634 21.21 9.171 21.21 9.171s-5.358 7.574-13.3 11.862Z",fill:"#447A1B"}),(0,Q.jsx)("path",{d:"m7.939 20.499-6.484-5.92c5.37-3.035 9.901-7.173 13.224-12.075l6.485 5.92c-3.323 4.904-7.855 9.04-13.225 12.075Z",fill:"#92C932"}),(0,Q.jsx)("path",{d:"M7.426 19.144 3.14 15.229l.263-.155c.289-.17.328-.491.091-.706l-.213-.197c4.32-2.657 8.041-6.055 10.952-10l.214.195a.51.51 0 0 0 .774-.084l.17-.24 4.288 3.914-.17.24a.673.673 0 0 0 .084.868c.07.066.142.131.214.195-2.91 3.945-6.633 7.344-10.953 10.003l-.214-.198c-.236-.214-.662-.247-.95-.075l-.263.155Zm-3.361-3.86 3.483 3.18c.444-.149.966-.114 1.36.102 3.954-2.508 7.39-5.646 10.139-9.258a1.36 1.36 0 0 1-.113-1.24L15.45 4.885c-.32.263-.754.306-1.12.116-2.748 3.611-6.184 6.75-10.139 9.258.208.334.162.731-.126 1.024Z",fill:"#529320"}),(0,Q.jsx)("path",{d:"M12.269 10.029c.576 0 1.086.198 1.515.59.636.581.83 1.254.561 1.946-.367.946-1.477 1.66-2.58 1.66-.635 0-1.23-.237-1.722-.686-.559-.51-.714-1.098-.462-1.748.383-.988 1.564-1.762 2.688-1.762Zm0-.563c-2.315 0-4.593 2.672-2.605 4.489.643.587 1.382.833 2.1.833 2.362 0 4.513-2.654 2.4-4.584a2.755 2.755 0 0 0-1.895-.738Z",fill:"#529320"}),(0,Q.jsx)("path",{d:"M8.16 17.489c-.645-.588.49-1.534 1.134-.945.694.634-.44 1.579-1.135.945ZM5.5 15.04c-.645-.589.49-1.535 1.133-.946.695.635-.439 1.58-1.133.946ZM17.007 9.703c-.812-.323-.084-1.608.726-1.285.875.348.147 1.634-.726 1.285ZM14.355 7.18c-.826-.282-.165-1.602.661-1.32.89.302.23 1.622-.66 1.32Z",fill:"#7AB51D"}),(0,Q.jsx)("path",{d:"M7.986 9.995s2.846 3.326 6.474 5.931c.972-.754 1.69-1.537 1.69-1.537-2.437-2.956-6.51-5.904-6.51-5.904-.77.671-1.654 1.51-1.654 1.51Z",fill:"#ECF1F5"}),(0,Q.jsx)("path",{d:"M14.46 15.927 7.986 9.995l-.399.339 6.457 5.944.416-.351ZM16.15 14.39l.385-.386-6.493-5.913-.402.394 6.51 5.904Z",fill:"#FFE12C"}),(0,Q.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.25 23.008c-2.432.59-3.536-.595-3.536-.595-1.99.945-3.528-.93-3.528-.93-4.134-.875-1.495-5.11-3.398-7.262 7.057-2.974 6.331 5.531 10.462 8.787Z",fill:"url(#EmojiMoneyWithWings__b)"}),(0,Q.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.039 18.952c1.914 3.49 4.355 4.447 6.211 4.056-3.269 1.11-5.134-1.836-6.211-4.056Z",fill:"#B3C2C6"}),(0,Q.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.98 17.778c.692 4.068 2.734 5.202 4.63 4.682-2.474 1.232-4.633-1.626-4.63-4.682Z",fill:"#B3C2C6"}),(0,Q.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.592 16.761c.014 2.788.619 4.082 2.566 4.717-2.68-.34-2.677-2.415-2.566-4.717Z",fill:"#B3C2C6"}),(0,Q.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.78 11.213c-2.153-1.903-6.39.733-7.263-3.4 0 0-1.874-1.537-.93-3.527 0 0-1.185-1.102-.595-3.536C4.248 4.882 12.752 4.157 9.78 11.213Z",fill:"url(#EmojiMoneyWithWings__c)"}),(0,Q.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.048 6.961C1.558 5.048.601 2.607.992.75c-1.11 3.27 1.837 5.133 4.056 6.211Z",fill:"#B3C2C6"}),(0,Q.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.22 9.02c-4.065-.692-5.2-2.734-4.681-4.63-1.23 2.474 1.626 4.633 4.682 4.63Z",fill:"#B3C2C6"}),(0,Q.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.24 10.41c-2.789-.016-4.083-.621-4.717-2.568.339 2.679 2.415 2.677 4.716 2.567Z",fill:"#B3C2C6"})]}),(0,Q.jsxs)("defs",{children:[(0,Q.jsxs)("linearGradient",{id:"EmojiMoneyWithWings__b",x1:12.788,y1:18.386,x2:23.25,y2:18.386,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{stopColor:"#ECF1F5"}),(0,Q.jsx)("stop",{offset:.413,stopColor:"#E9EEF3"}),(0,Q.jsx)("stop",{offset:.72,stopColor:"#E0E6EB"}),(0,Q.jsx)("stop",{offset:.993,stopColor:"#D0D8DD"}),(0,Q.jsx)("stop",{offset:1,stopColor:"#CFD8DD"})]}),(0,Q.jsxs)("linearGradient",{id:"EmojiMoneyWithWings__c",x1:.827,y1:5.981,x2:10.4,y2:5.981,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{stopColor:"#CFD8DD"}),(0,Q.jsx)("stop",{offset:.007,stopColor:"#D0D8DD"}),(0,Q.jsx)("stop",{offset:.28,stopColor:"#E0E6EB"}),(0,Q.jsx)("stop",{offset:.587,stopColor:"#E9EEF3"}),(0,Q.jsx)("stop",{offset:1,stopColor:"#ECF1F5"})]}),(0,Q.jsx)("clipPath",{id:"EmojiMoneyWithWings__a",children:(0,Q.jsx)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})]})]}),X=(0,U.memo)((0,U.forwardRef)(K));X.displayName="EmojiMoneyWithWings";const ee=({className:e,...t},i)=>(0,Q.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:i,style:{display:"inline-block"},...t,children:[(0,Q.jsx)("path",{d:"M21.997 2H2v20h19.997V2Z",fill:"#E6EBEF"}),(0,Q.jsx)("path",{d:"M22 21.834v-.814l-4.962-6.146-3.023 2.206-4.16-9.036-4.078 3.067L2.69 2.003h-.687v3.664l2.827 8.921 4.62-3.257 4.168 9.057 3.226-2.36 3.312 3.969H22v-.163Z",fill:"url(#EmojiGraph__a)"}),(0,Q.jsx)("defs",{children:(0,Q.jsxs)("linearGradient",{id:"EmojiGraph__a",x1:1.926,y1:1.926,x2:22.074,y2:21.775,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{stopColor:"#F5273C"}),(0,Q.jsx)("stop",{offset:.318,stopColor:"#E82499"}),(0,Q.jsx)("stop",{offset:.589,stopColor:"#2487FC"})]})})]}),te=(0,U.memo)((0,U.forwardRef)(ee));te.displayName="EmojiGraph";const ie=(0,U.memo)((({className:e,type:t})=>{const i=function(e){const{t:t}=(0,I.useTranslation)("service_subscription_login_flow");return e?[{label:t("ticket"===e?"benefits.ticket_price_change":"benefits.search_price_change"),icon:te},{label:t("benefits.free_and_save_money"),icon:X},{label:t("benefits.login_to_profile"),icon:Y}]:[]}(t);return g()(i)?null:(0,Q.jsx)("ul",{className:Z()("s__HEy4TPC4qxVWVubGQfSd",e),children:i.map(((e,t)=>(0,Q.jsxs)("li",{className:"s__PqQmJkVq5tyAh4NVbm4c",children:[(0,Q.jsx)("div",{className:"s__gVMv1T1oK1JqwRALq_i_",children:(0,U.createElement)(e.icon)}),(0,Q.jsx)(H.x,{type:G.y.Body2Regular,className:"s__MXuh_JypQsm8j2UP8Y9R",children:e.label})]},t)))})}));ie.displayName="BenefitList";const se=({className:e,...t},i)=>(0,Q.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:i,style:{display:"inline-block"},...t,children:[(0,Q.jsx)("path",{d:"M10.815 2.936c.053-.667.559-1.192 1.178-1.192.622 0 1.125.525 1.177 1.192h.923C14.036 1.718 13.12.75 12 .75s-2.036.968-2.096 2.186h.911Z",fill:"url(#EmojiBell__a)"}),(0,Q.jsx)("path",{d:"M18.023 8.381c0-4.286-3.012-5.883-6.023-5.883-3.011 0-6.022 1.593-6.022 5.883 0 8.7-4.478 7.594-4.478 11.966h21c0-4.372-4.477-3.266-4.477-11.966Z",fill:"url(#EmojiBell__b)"}),(0,Q.jsx)("path",{d:"M21.578 20.674c0 1.282-19.152 1.282-19.152 0-.003-1.789 19.151-1.789 19.151 0Z",fill:"url(#EmojiBell__c)"}),(0,Q.jsx)("path",{d:"M9.637 19.481a2.626 2.626 0 1 0 4.988 1.144c0-.409-.098-.795-.262-1.14H9.637v-.004Z",fill:"url(#EmojiBell__d)"}),(0,Q.jsx)("path",{d:"M1.5 20.407c0 .3.743.544 1.95.732-.649-.131-1.028-.285-1.028-.465 0-1.414 19.152-1.414 19.152 0 0 .18-.379.334-1.028.465 1.208-.188 1.95-.431 1.95-.732.004-1.75-20.996-1.75-20.996 0Z",fill:"url(#EmojiBell__e)"}),(0,Q.jsxs)("defs",{children:[(0,Q.jsxs)("linearGradient",{id:"EmojiBell__a",x1:12,y1:5.366,x2:12,y2:.75,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{stopColor:"#854500"}),(0,Q.jsx)("stop",{offset:.212,stopColor:"#A5630C"}),(0,Q.jsx)("stop",{offset:.572,stopColor:"#D6901E"}),(0,Q.jsx)("stop",{offset:.846,stopColor:"#F4AC2A"}),(0,Q.jsx)("stop",{offset:1,stopColor:"#FFB62E"})]}),(0,Q.jsxs)("radialGradient",{id:"EmojiBell__b",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(7.15574 0 0 38.2628 12 11.422)",children:[(0,Q.jsx)("stop",{stopColor:"#FFCF3D"}),(0,Q.jsx)("stop",{offset:.586,stopColor:"#ECA31A"}),(0,Q.jsx)("stop",{offset:1,stopColor:"#DE8100"})]}),(0,Q.jsxs)("linearGradient",{id:"EmojiBell__c",x1:2.423,y1:20.484,x2:21.577,y2:20.484,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{stopColor:"#4D2800"}),(0,Q.jsx)("stop",{offset:.036,stopColor:"#6B3E00"}),(0,Q.jsx)("stop",{offset:.108,stopColor:"#A26500"}),(0,Q.jsx)("stop",{offset:.171,stopColor:"#CA8100"}),(0,Q.jsx)("stop",{offset:.22,stopColor:"#E29300"}),(0,Q.jsx)("stop",{offset:.25,stopColor:"#EB9900"}),(0,Q.jsx)("stop",{offset:.5,stopColor:"#4D2800"}),(0,Q.jsx)("stop",{offset:.75,stopColor:"#EB9900"}),(0,Q.jsx)("stop",{offset:.78,stopColor:"#E29300"}),(0,Q.jsx)("stop",{offset:.829,stopColor:"#CA8100"}),(0,Q.jsx)("stop",{offset:.892,stopColor:"#A26500"}),(0,Q.jsx)("stop",{offset:.964,stopColor:"#6B3E00"}),(0,Q.jsx)("stop",{offset:1,stopColor:"#4D2800"})]}),(0,Q.jsxs)("radialGradient",{id:"EmojiBell__d",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(11.323 19.859) scale(3.34286)",children:[(0,Q.jsx)("stop",{stopColor:"#FFDB40"}),(0,Q.jsx)("stop",{offset:.506,stopColor:"#EEAF21"}),(0,Q.jsx)("stop",{offset:1,stopColor:"#DB8000"})]}),(0,Q.jsxs)("linearGradient",{id:"EmojiBell__e",x1:12,y1:21.138,x2:12,y2:19.094,gradientUnits:"userSpaceOnUse",children:[(0,Q.jsx)("stop",{stopColor:"#472500"}),(0,Q.jsx)("stop",{offset:.13,stopColor:"#512C00"}),(0,Q.jsx)("stop",{offset:.35,stopColor:"#6C3F00"}),(0,Q.jsx)("stop",{offset:.634,stopColor:"#975E00"}),(0,Q.jsx)("stop",{offset:.967,stopColor:"#D38900"}),(0,Q.jsx)("stop",{offset:1,stopColor:"#D98D00"})]})]})]}),re=(0,U.memo)((0,U.forwardRef)(se));re.displayName="EmojiBell";const ae=({className:e,...t},i)=>(0,Q.jsx)("svg",{viewBox:"0 0 16 16",width:16,height:16,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:i,style:{display:"inline-block"},...t,children:(0,Q.jsx)("path",{d:"M11.333 2H6.667L3.333 8.667h3.445L5 14h.667l7-8H8.333l3-4Z"})}),ne=(0,U.memo)((0,U.forwardRef)(ae));ne.displayName="Icon16CommonFlash";const oe=({className:e,ticketPrice:t,ticketPriceDifference:i,ticketDate:s})=>{const{t:r}=(0,I.useTranslation)("service_subscription_login_flow");return(0,Q.jsx)("div",{className:Z()("s__vncA2DVTmG33Q52o8xYs",e),children:(0,Q.jsxs)("div",{className:"s__mLUC2JAiKe_xZuLDDCYS",children:[(0,Q.jsx)(re,{className:"s__Nhu467PzCnWq8kP96tIF"}),(0,Q.jsxs)("div",{className:"s__JG0tjvNgbp3QhWcc3yeA",children:[(0,Q.jsx)(H.x,{type:G.y.Body3Bold,className:"s__apD2XUs63vRswy6Plbya",children:(0,Q.jsx)(I.Trans,{t:r,i18nKey:"notification.ticket_price_difference",values:{price:i},components:{icon:(0,Q.jsx)(ne,{className:"s__dbwf_sD195WIangxqKFP"})}})}),(0,Q.jsx)(H.x,{type:G.y.Body3Regular,children:r("notification.details_text",{date:s,price:t})})]})]})})};var ce=i(46531),le=i(5393);const ue=({className:e,visible:t,children:i,onClose:s})=>{const{t:r}=(0,I.useTranslation)("service_subscription_login_flow");return(0,Q.jsx)(ce.G,{visible:t,onClose:s,className:Z()("s__iSqEy4xEmM3XdQ12dSwc",e),width:480,noAutoFocus:!0,noHeader:!0,children:(0,Q.jsxs)("div",{className:"s__PtcCcvSGsaB9RfVkSEHx",children:[(0,Q.jsxs)("div",{className:"s__Bke9Xszv7ChJj8NbLvew",children:[(0,Q.jsx)(le.P,{className:"s__IRa9O7j_azhJ2FRX6tRt",onClick:s}),(0,Q.jsx)(H.x,{tag:"h2",className:"s__J12W4SDb86CVnHE5Y1c_",type:G.y.Title2Bold,transformOnMobile:!0,children:r("title")})]}),i]})})},de=(0,r.withFactory)({sid:"rod3j6",fn:()=>(0,q.SC)({view:V,bind:{onClick:B.authPopupOpened}})}),pe=(0,r.withFactory)({sid:"nkf0un",fn:()=>(0,q.SC)({view:oe,bind:{ticketPrice:P.$formattedTicketPrice,ticketPriceDifference:P.$formattedTicketDifferencePrice,ticketDate:P.$ticketDate}})}),me=(0,r.withFactory)({sid:"-gpmsdp",fn:()=>(0,q.SC)({view:ue,bind:{visible:P.$isPopupVisible,onClose:B.hideWidget}})}),fe=(0,r.withFactory)({sid:"76bd54",fn:()=>(0,q.SC)({view:ie,bind:{type:P.$subscriptionType}})});const ge={SubscriptionLoginPopupContainer:()=>(0,Q.jsx)(me,{children:(0,Q.jsxs)("div",{className:"s__APnJrSK2d7hkvJIYJ4db",children:[(0,Q.jsx)(pe,{}),(0,Q.jsx)(fe,{}),(0,Q.jsx)(de,{})]})})};var _e=i(81327);const{usercomProfileReporter:he}=(0,r.withFactory)({sid:"oa6c7d",fn:()=>(0,a.d)((()=>_e.I.outputs.createUsercomProfileReporter()))});he({clock:(0,r.sample)({and:[{clock:B.showWidget,source:P.$source,fn:function(e){return"popup.follow"===e?{source:"search"}:{source:e}}}],or:{sid:"-odfaoc"}}),data:{label:"login_enticing",action:"showed"},payload:(e,{payload:t})=>({...e,...t,userEvent:!0})});const ye=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/usercom/services/subscription_login_flow/index.ts",lifecycle:{start:x},api:{inputs:B,outputs:P,containers:ge},attachTestApi(){throw new Error("Test API not available in production")}})},3708:function(e,t,i){"use strict";i.d(t,{Ou:function(){return G.Ou},hq:function(){return Dt},Dw:function(){return Et},Dp:function(){return Nt},oF:function(){return G.oF},Vw:function(){return Ft},bD:function(){return $t},ib:function(){return oe},F6:function(){return fe},si:function(){return Ur},un:function(){return As},Yc:function(){return ye},aQ:function(){return he}});var s=i(98116),r=i(72675),a=i(41832),n=i(99186),o=i(96864),c=i(54428),l=i(37213);let u;!function(e){e.Success="success",e.Error="error"}(u||(u={}));var d=i(29260),p=i(80472),m=i(76588),f=i(35529);const g=(0,f.Record)({date:f.String,destination_city:f.String,destination_airport:f.String.nullable().optional(),origin_city:f.String,origin_airport:f.String.nullable().optional()}),_=(0,f.Record)({delta:f.Number.nullable(),updated_at:f.String.optional(),value:f.Number,sign:f.String.nullable().optional(),ticket_segments_key:f.String.nullable().optional()}),h=(0,f.Record)({origin:f.String,destination:f.String,date:f.String}),y=(0,f.Record)({segments:(0,f.Array)(h)}),b=(0,f.Record)({aircraft:f.String.optional(),arrival:f.String,arrival_date:f.String,arrival_time:f.String,delay:f.Number,departure:f.String,departure_date:f.String,departure_time:f.String,duration:f.Number,equipment:f.String.optional(),local_arrival_timestamp:f.Number,local_departure_timestamp:f.Number,number:f.String,operating_carrier:f.String,technical_stops:(0,f.Array)((0,f.Record)({airport_code:f.String})),trip_class:f.String.optional(),seats:f.Number.optional(),is_train:f.Boolean.optional(),is_bus:f.Boolean.optional(),is_boat:f.Boolean.optional()}),x=(0,f.Record)({id:f.String,actual:f.Boolean,baggage:f.Boolean,created_at:f.String,sign:f.String,trip_class:f.String,adults:f.Number,children:f.Number,infants:f.Number,price:(0,f.Record)({value:f.Number,delta:f.Number,updated_at:f.String.optional()}).nullable(),charter:f.Boolean,validating_carrier:f.String,updated_at:f.String,possibly_outdated:f.Boolean,notified_at:f.String.nullable(),segments:(0,f.Array)((0,f.Record)({flights:(0,f.Array)(b)})),direction_segments:(0,f.Array)(g)}),v=(0,f.Record)({message:f.String.optional(),info:(0,f.Record)({ticket_subscription:x})}),k=(0,f.Record)({id:f.String,actual:f.Boolean,baggage:f.Boolean,created_at:f.String,updated_at:f.String,notified_at:f.String.nullable(),trip_class:f.String,adults:f.Number,children:f.Number,infants:f.Number,flexibility:f.Number.nullable(),max_stops:f.Number.nullable(),price:_.nullable().optional(),segments:(0,f.Array)(g),search_info:y.optional()}),j=(0,f.Record)({message:f.String.optional(),info:(0,f.Record)({direction_subscription:k})}),S=(0,f.Record)({code:f.String,type:(0,f.Literal)("city")}),w=(0,f.Union)((0,f.Literal)("january"),(0,f.Literal)("february"),(0,f.Literal)("march"),(0,f.Literal)("april"),(0,f.Literal)("may"),(0,f.Literal)("june"),(0,f.Literal)("july"),(0,f.Literal)("august"),(0,f.Literal)("september"),(0,f.Literal)("october"),(0,f.Literal)("november"),(0,f.Literal)("december")),C=(0,f.Record)({min_days:f.Number,max_days:f.Number}),T=(0,f.Record)({id:f.String,one_way:f.Boolean,max_stops:f.Number.nullable(),baggage:f.Boolean,origin:S,destination:S,months:(0,f.Array)((0,f.Record)({code:w})),actual:f.Boolean,created_at:f.String,updated_at:f.String,search_info:y.optional(),price:_.nullable().optional(),durations_range:C.nullable().optional()}),A=(0,f.Record)({message:f.String.optional(),info:(0,f.Record)({flexible_subscription:T})}),E=(0,f.Record)({direction_subscriptions:(0,f.Array)(k),ticket_subscriptions:(0,f.Array)(x),flexible_subscriptions:(0,f.Array)(T)}),F=(0,f.Record)({info:(0,f.Record)({direction_subscription_ids:(0,f.Array)(f.String),ticket_subscription_ids:(0,f.Array)(f.String),flexible_subscription_ids:(0,f.Array)(f.String),error:f.String.Or(f.Boolean).optional(),success:f.Boolean.optional()}),message:f.String.optional()}),$=(0,f.Record)({message:f.String}),D=(0,f.Record)({message:f.String});var N=i(75381),O=i(57640),R=i(82525),M=i(2503),B=i(27897),P=i(2905);const q={[P.qb]:"/v6/web/aviasales",[P.R2]:"/v6/web/wayaway"},z=M.Y.outputs.$auid.map((e=>e?B.US.encode(e):e)),Z=(0,s.combine)({and:[{auid:z,baseHost:R.B.outputs.urlWithApiHost(N.Nv`${O.H.USER_SUBSCRIPTIONS_HOST}${q}`)},({auid:e,baseHost:t})=>({auid:e,baseHost:t})],or:{sid:"-tdciri"}});var U=i(79403),I=i(20611),L=i(53788);const W=(0,s.combine)({and:[{"X-Request-Brand":U.U.outputs.$brand,Authorization:c.O.outputs.$jwt.map((e=>e?`Bearer ${e}`:""))}],or:{sid:"xa8mxe"}}),Q=l.b.outputs.$marker.map((e=>e??"")),V=(0,s.combine)({and:[{marker:Q,auid:M.Y.outputs.$auid,host:I.D.outputs.$hostname,market:L.D.outputs.$market}],or:{sid:"g1hv42"}}),H=(0,s.combine)({and:[{marker:Q,currency:a.y.outputs.$currency,lang:n.l.outputs.$language,host:I.D.outputs.$hostname}],or:{sid:"lt6jsq"}});var G=i(92021),J=i(63954);const Y=(e,t)=>{if(e===G.Ou.Flexible){const{origin:e,destination:i}=t;return{originCity:e.code,originAirport:null,destinationCity:i.code,destinationAirport:null}}const{origin_city:i,origin_airport:s,destination_city:r,destination_airport:a}=t;return{originCity:i,originAirport:s,destinationCity:r,destinationAirport:a}},K={january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,november:10,december:11},X=e=>({delay:e.delay,duration:e.duration,arrivalAirport:e.arrival,arrivalDate:new Date(e.arrival_date),arrivalTime:e.arrival_time,departureAirport:e.departure,departureDate:new Date(e.departure_date),departureTime:e.departure_time}),ee=e=>{const t=e.reduce(((e,{flights:t})=>(t.forEach((t=>{e.add(t.operating_carrier)})),e)),new Set);return Array.from(t)},te=({id:e,sign:t,actual:i,baggage:s,created_at:r,price:a,segments:n,children:o,infants:c,adults:l,charter:u,direction_segments:d,trip_class:p,possibly_outdated:m,validating_carrier:f,updated_at:g})=>({id:e,validatingCarrier:f,charter:u,sign:t,actual:i,baggage:s,segments:n,tripClass:p,price:a,adults:l,children:o,infants:c,possiblyOutdated:m,directionSegments:d,type:G.Ou.Ticket,updatedAt:new Date(g),carriers:ee(n),createdAt:new Date(r),directions:Y(G.Ou.Ticket,d[0]),layoversToDirection:n[0]?.flights?n[0]?.flights.map(X):[],layoversWayBack:n[1]?.flights?n[1]?.flights.map(X):void 0}),ie=({id:e,actual:t,baggage:i,price:s,months:r,origin:a,destination:n,created_at:o,durations_range:c,max_stops:l,search_info:u,one_way:d,updated_at:p})=>{const m=((e,t)=>e.map((e=>((e,t)=>{const i=new J.m(new Date(e)),s=K[t.code],r=s<i.getMonth()?i.getYear()+1:i.getYear();return new J.m((new Date).setFullYear(r,s))})(t,e))).sort(((e,t)=>e.startDate.getTime()-t.startDate.getTime())))(r,o);return{id:e,actual:t,baggage:i,price:s,durationsRange:c,searchInfo:u,oneWay:d,maxStops:l,origin:a,destination:n,type:G.Ou.Flexible,createdAt:new Date(o),adults:1,children:0,infants:0,updatedAt:new Date(p),months:m,directions:Y(G.Ou.Flexible,{origin:a,destination:n})}},se=({id:e,actual:t,baggage:i,created_at:s,price:r,flexibility:a,children:n,infants:o,adults:c,segments:l,updated_at:u,trip_class:d,search_info:p,max_stops:m})=>({id:e,actual:t,baggage:i,price:r,adults:c,children:n,infants:o,segments:l,tripClass:d,flexibility:a,searchInfo:p,maxStops:m,updatedAt:new Date(u),createdAt:new Date(s),directions:Y(G.Ou.Direction,l[0]),type:G.Ou.Direction});var re=i(23446);const ae=e=>e?.city_code??e?.comment??e?.iata,ne=({price:e})=>e?{value:e}:null;function oe({tripClass:e,passengers:t,filters:i,price:s,directions:r,dates:a}){const{adults:n,children:o}=t,{datesFlexDay:c,directFlightsOnly:l,withLuggage:u}=i;return{adults:n,children:o,trip_class:e,infants:0,flexibility:c?1:0,max_stops:l?0:null,segments:le({directions:r,dates:a}),price:ne({price:s}),baggage:u}}function ce({origin:e,destination:t},i,s=!1){const r=ae(e),a=ae(t);return{date:(0,re.x)("yyyy-MM-dd",new Date(i)),origin_city:s?a:r,origin_airport:null,destination_city:s?r:a,destination_airport:null}}function le({dates:{from:e,to:t},directions:i}){const s=[];return e?(s.push(ce(i,e)),t&&s.push(ce(i,t,!0)),s):s}var ue=i(2437);const de=["january","february","march","april","may","june","july","august","september","october","november","december"],pe=(e,t)=>{if(e===G.Ou.Flexible){const{localizerToken:e,months:i,delimiter:s,count:r}=(e=>1===e.length?{months:[e[0]],delimiter:G.tJ.None,localizerToken:"ts_month_full",count:e.length}:e.length<4?{months:e,delimiter:G.tJ.Comma,localizerToken:"ts_month_short",count:e.length}:{months:[e[0],e[e.length-1]],delimiter:G.tJ.Ellipsis,localizerToken:"ts_month_short",count:e.length})(t);return{token:e,payload:i,extra:{delimiter:s,count:r}}}const i=(s=t)[1]?new ue.Xp({start:new Date(s[0].date),end:new Date(s[1].date)}):new Date(s[0].date);var s,r;return{token:(r=i,r instanceof ue.Xp?"interval_day_month_short_weekday":(new Date).getFullYear()!==r.getFullYear()?"ts_date_full":"ts_day_month_weekday"),payload:i}};function me(e){return e.map((e=>({code:de[e.getMonth()]})))}function fe({dates:e,filters:t,directions:i,price:s}){const{months:r,range:a}=e,{withLuggage:n,directFlightsOnly:o}=t,{origin:c,destination:l}=i,u=function({max:e,min:t}){return Boolean(t)&&Boolean(e)?{min_days:t,max_days:e}:null}(a);return{one_way:!u,max_stops:o?0:null,origin:{code:ae(c),type:"city"},destination:{code:ae(l),type:"city"},months:me(r),durations_range:u,price:ne({price:s}),baggage:n}}var ge=i(28225),_e=i(86523);const he=e=>{const t=(0,_e.d)(e?.token||"interval_date"),i=(0,_e.d)(e?.token||"interval_date"),{t:s}=(0,ge.useTranslation)("service_usercom_subscriptions");return e?"extra"in e?`${e.payload.map((e=>i(e.startDate))).join(e.extra.delimiter)} (${e.extra.count} ${s("months")})`:e.payload instanceof ue.Xp?t(e.payload):i(e.payload):""},ye=(e,t)=>pe(e,t);var be=i(74663);const xe="rub",ve=(0,s.createEvent)({sid:"cdrase"}),ke=(0,s.createEvent)({sid:"-l0n7bt"}),je=(0,s.createEvent)({sid:"g2j57x"}),Se=(0,s.withFactory)({sid:"r5z5s4",fn:()=>(0,m.s5)({name:"subscriptions_create_ticket",params:(0,s.withFactory)({sid:"-mzr2in",fn:()=>(0,m.t6)()}),request:{method:"POST",credentials:"include",url:{source:Z,fn:(e,t)=>`${t.baseHost}/ticket_subscriptions.json`},body:{source:V,fn:(e,t)=>({...t,ticket_subscription:e})},headers:{source:W,fn:(e,t)=>t}},response:{contract:(0,p.v)(v),mapData:({result:e})=>te(e.info.ticket_subscription)}})}),we=(0,s.withFactory)({sid:"c60ruo",fn:()=>(0,m.s5)({name:"subscriptions_create_direction",params:(0,s.withFactory)({sid:"kke5r9",fn:()=>(0,m.t6)()}),request:{method:"POST",credentials:"include",url:{source:Z,fn:(e,t)=>`${t.baseHost}/direction_subscriptions.json`},body:{source:V,fn:(e,t)=>({...t,direction_subscription:e})},headers:{source:W,fn:(e,t)=>t}},response:{contract:(0,p.v)(j),mapData:({result:e})=>({...se(e.info.direction_subscription),raw:e.info.direction_subscription})}})}),Ce=(0,s.withFactory)({sid:"-mjwvjt",fn:()=>(0,m.s5)({name:"subscriptions_create_flexible",params:(0,s.withFactory)({sid:"-5yhf5l",fn:()=>(0,m.t6)()}),request:{method:"POST",credentials:"include",url:{source:Z,fn:(e,t)=>`${t.baseHost}/flexible_subscriptions.json`},body:{source:V,fn:(e,t)=>({...t,flexible_subscription:e})},headers:{source:W,fn:(e,t)=>t}},response:{contract:(0,p.v)(A),mapData:({result:e})=>({...ie(e.info.flexible_subscription),raw:e.info.flexible_subscription})}})});(0,s.sample)({and:[{clock:ve,fn:({data:e})=>e,target:Se.start}],or:{sid:"3ex7m7"}}),(0,s.sample)({and:[{clock:ke,target:we.start}],or:{sid:"3i7z6d"}}),(0,s.sample)({and:[{clock:je,target:Ce.start}],or:{sid:"3wimlr"}});const Te=Se.$status,Ae=(0,s.withFactory)({sid:"-y97qdb",fn:()=>(0,d.m)([ve,Se.finished.success])}),Ee=(0,s.withFactory)({sid:"-9faxl8",fn:()=>(0,d.m)([ve,Se.finished.failure])}),Fe=(0,s.merge)([Se.finished.success,we.finished.success,Ce.finished.success],{sid:"-9en0my"}),$e=(0,s.merge)([Se.finished.failure,we.finished.failure,Ce.finished.failure],{sid:"-8n8dci"}),De={createTicketSubscription:ve,createTicketSubscriptionDone:Ae,createTicketSubscriptionFailed:Ee,createDirectionSubscription:ke,createFlexibleSubscription:je,createSubscriptionSucceed:Fe,createSubscriptionFailed:$e},Ne={$createTicketSubscriptionStatus:Te},Oe={createTicketQuery:Se,createDirectionQuery:we,createFlexibleQuery:Ce},Re=(0,s.createEvent)({sid:"lw1sbg"}),Me=(0,s.createEvent)({sid:"p7q6qt"}),Be=(0,s.createEvent)({sid:"lzifx9"}),Pe=(0,s.createEvent)({sid:"-qap5qc"}),qe=(0,s.createEvent)({sid:"-m63uo6"}),ze=(0,s.withFactory)({sid:"sh2nfh",fn:()=>(0,m.s5)({name:"subscriptions_delete",params:(0,s.withFactory)({sid:"-65w5wv",fn:()=>(0,m.t6)()}),request:{method:"DELETE",credentials:"include",url:{source:Z,fn:({type:e,id:t},i)=>`${i.baseHost}/subscribers/${i.auid}/${e}_subscriptions/${t}.json`},headers:{source:W,fn:(e,t)=>t}},response:{contract:(0,p.v)(D)}})}),Ze=(0,s.withFactory)({sid:"chknxe",fn:()=>(0,m._7)(ze,{mapParams:e=>({...e,type:G.Ou.Ticket})})}),Ue=(0,s.withFactory)({sid:"oeemcg",fn:()=>(0,m._7)(ze,{mapParams:e=>({...e,type:G.Ou.Direction})})}),Ie=(0,s.withFactory)({sid:"-legdgk",fn:()=>(0,m._7)(ze,{mapParams:e=>({...e,type:G.Ou.Flexible})})});(0,s.sample)({and:[{clock:Me,filter:({data:{type:e}})=>e===G.Ou.Ticket,fn:({data:e})=>e,target:Be}],or:{sid:"-sjibse"}}),(0,s.sample)({and:[{clock:Me,filter:({data:{type:e}})=>e===G.Ou.Direction,fn:({data:e})=>e,target:Pe}],or:{sid:"-s4436a"}}),(0,s.sample)({and:[{clock:Me,filter:({data:{type:e}})=>e===G.Ou.Flexible,fn:({data:e})=>e,target:qe}],or:{sid:"-s09j0r"}}),(0,s.sample)({and:[{clock:Be,target:Ze.start}],or:{sid:"-rkvaen"}}),(0,s.sample)({and:[{clock:Pe,target:Ue.start}],or:{sid:"jqmwn2"}}),(0,s.sample)({and:[{clock:qe,target:Ie.start}],or:{sid:"jtdvlv"}});const Le=Ze.$status,We=ze.finished.success,Qe=ze.finished.failure,Ve={subscriptionRemoved:(0,s.withFactory)({sid:"isktj9",fn:()=>(0,d.m)([Me,We])}),subscriptionRemoveFailed:(0,s.withFactory)({sid:"-8ii3at",fn:()=>(0,d.m)([Me,Qe])}),deleteSubscription:Me,deleteTicketSubscription:Be,deleteTicketSubscriptionBySign:Re,deleteDirectionSubscription:Pe,deleteFlexibleSubscription:qe},He={removeSubscriptionFailed:Qe,removeSubscriptionSucceed:We,$deleteTicketSubscriptionStatus:Le},Ge={deleteTicketQuery:Ze,deleteFlexibleQuery:Ie,deleteDirectionQuery:Ue},Je=(0,s.createEvent)({sid:"-7lf896"}),Ye=(0,s.withFactory)({sid:"lmh238",fn:()=>(0,m.s5)({name:"subscriptions_fetch_all",request:{method:"GET",credentials:"include",url:{source:Z,fn:(e,t)=>`${t.baseHost}/subscription_domain.json`},headers:{source:W,fn:(e,t)=>t}},response:{contract:(0,p.v)(E),mapData:({result:e})=>(e=>({ticketSubscriptions:e.ticket_subscriptions.map(te),flexibleSubscriptions:e.flexible_subscriptions.map(ie),directionSubscriptions:e.direction_subscriptions.map(se),raw:e}))(e)}})}),Ke=Ye.$status;(0,s.sample)({and:[{clock:Je,target:Ye.start}],or:{sid:"-kjitxl"}});const Xe={fetchAll:Je},et={$fetchAllSubscriptionsStatus:Ke},tt={fetchAllQuery:Ye},it=(0,s.createEvent)({sid:"2o2d6v"}),st=(0,s.withFactory)({sid:"-4f4d2g",fn:()=>(0,m.s5)({name:"subscriptions_actualize",request:{method:"PATCH",credentials:"include",url:{source:Z,fn:(e,t)=>`${t.baseHost}/subscribers/${t.auid}/actualize.json`},headers:{source:W,fn:(e,t)=>t},body:{source:H,fn:(e,t)=>({subscriber:t})}},response:{contract:(0,p.v)($)}})});(0,s.sample)({and:[{clock:it,target:st.start}],or:{sid:"-wqxlio"}});const rt={actualizeSubscriber:it},at={actualizeSubscriberQuery:st},nt=(0,s.createEvent)({sid:"-75z1db"}),ot=(0,s.withFactory)({sid:"65vc6p",fn:()=>(0,m.s5)({name:"subscriptions_remove_outdated",request:{method:"PATCH",credentials:"include",url:{source:Z,fn:(e,t)=>`${t.baseHost}/subscribers/${t.auid}/remove_outdated_subscriptions.json`},headers:{source:W,fn:(e,t)=>t}},response:{contract:(0,p.v)(F)}})});(0,s.sample)({and:[{clock:nt,target:ot.start}],or:{sid:"-ks1jkj"}});const ct=ot.finished.success,lt=ot.finished.failure,ut={inputs:{...De,...Ve,...Xe,...rt,removeOutdated:nt,queries:{...Oe,...Ge,...tt,...at,removeOutdatedQuery:ot}},outputs:{...Ne,...He,...et,$removeOutdatedStatus:ot.$status,removeOutdatedSubscriptionsSucceed:ct,removeOutdatedSubscriptionsFailed:lt}};var dt=i(80094),pt=i(78194),mt=i(43830),ft=i(85893);const gt=()=>(0,ft.jsx)(mt.Y,{className:"s__A_PqLjAmJEdFqIWRItcx"});var _t=i(4190),ht=i(6057),yt=i(74636),bt=i.n(yt),xt=i(74423),vt=i.n(xt),kt=(i(26699),i(21247)),jt=i(85349),St=i(27636),wt=i(30040),Ct=i(10924),Tt=i(38387);let At,Et,Ft,$t,Dt,Nt;!function(e){e.Applied="applied",e.Failed="failed",e.Removed="removed",e.RemovingFailed="removingfailed"}(At||(At={})),function(e){e.Alert="alert",e.Subscription="subscription",e.AddSubscriptionButton="add_subscription_button",e.RemoveSubscriptions="remove_any_subscription_button"}(Et||(Et={})),function(e){e.Showed="showed",e.Clicked="clicked"}(Ft||(Ft={})),function(e){e.Email="email"}($t||($t={})),function(e){e.Subscriptions="subscriptions",e.Suggestions="suggestions",e.Waiting="waiting",e.Explore="explore",e.Search="search",e.Ticket="ticket",e.TicketPreview="ticket_preview",e.PopupOneMore="popup_add",e.ComparisonWidget="comparison_widget"}(Dt||(Dt={})),function(e){e.Subscriptions="subscriptions",e.Search="search"}(Nt||(Nt={}));const Ot=Ct.I.inputs.createReporter({data:{category:Et.Subscription,service:wt.t6.Usercom},payload:{isMobile:Tt.l.outputs.$isMobile,searchId:o.W.internals.$searchId,market:L.D.outputs.$market}});var Rt=i(58809),Mt=i.n(Rt);const Bt=({store:e,key:t})=>({$keys:e.map((e=>e.map((e=>e[t])))),$collection:e.map((e=>Mt()(t,e)))});i(52262),i(24506);const Pt=new Date(0),qt=(e,t)=>{const i=t?-1:0;if(e.type===G.Ou.Flexible)return e.months?.at(i)?.startDate??Pt;if(e.type===G.Ou.Ticket){const s=e.segments.at(i)?.flights.at(i),r=t?s?.arrival_date:s?.departure_date,a=t?s?.arrival_time:s?.departure_time;return r&&a?new Date(`${r}T${a}`):Pt}const s=e.segments.at(i)?.date;return s?new Date(`${s}T00:00:00`):Pt},zt=(e,t)=>{const i=qt(e),s=qt(t);if(i.getTime()!==s.getTime())return i.getTime()-s.getTime();const r=qt(e,!0),a=qt(t,!0);return r.getTime()!==a.getTime()?r.getTime()-a.getTime():t.createdAt.getTime()!==e.createdAt.getTime()?e.createdAt.getTime()-t.createdAt.getTime():Number(e.id)-Number(t.id)},{deleteTicketQuery:Zt,deleteDirectionQuery:Ut,deleteFlexibleQuery:It,fetchAllQuery:Lt,createTicketQuery:Wt,createDirectionQuery:Qt,createFlexibleQuery:Vt,removeOutdatedQuery:Ht}=ut.inputs.queries,Gt=(0,s.createEvent)({sid:"-mw55gn"}),Jt=(0,s.createEvent)({sid:"q5owlr"}),Yt=(0,s.createEvent)({sid:"-irwv3b"}),Kt=(0,s.createEvent)({sid:"-mihuyy"}),Xt=(0,s.createEvent)({sid:"-2rce78"}),ei=(0,s.createEvent)({sid:"5tqwa1"}),ti=(0,s.createEvent)({sid:"vt3dv3"}),ii=(0,s.createEvent)({sid:"-lri2om"});(0,s.sample)({and:[{clock:Xt,fn:({data:e,source:t})=>({data:(e.children||0+e.infants||0)>0?{...e,children:0,infants:0,price:null,droppedChildren:!0}:e,source:t}),target:ut.inputs.createTicketSubscription}],or:{sid:"nmwjs7"}}),(0,s.sample)({and:[{clock:ei,target:ut.inputs.createDirectionSubscription}],or:{sid:"okfzz8"}}),(0,s.sample)({and:[{clock:ti,target:ut.inputs.createFlexibleSubscription}],or:{sid:"on6yy1"}}),(0,s.sample)({and:[{clock:Jt,target:ut.inputs.fetchAll}],or:{sid:"p1hmdf"}});const si=(0,s.createStore)(!1,{sid:"-so6grb"}).on(Gt,(()=>!0));(0,s.sample)({and:[{clock:Kt,target:ut.inputs.actualizeSubscriber}],or:{sid:"phzg69"}}),(0,s.sample)({and:[{clock:ii,target:Jt}],or:{sid:"pkqf52"}}),(0,s.sample)({and:[{clock:c.O.outputs.$isAuthorized,filter:Boolean,target:Jt}],or:{sid:"xfw75a"}});const ri=(0,s.createStore)([],{sid:"-mp6v0g"});ri.on(Wt.finished.success,((e,{result:t})=>[...e,t])).on(Zt.finished.success,((e,{params:t})=>e.filter((e=>e.id!==t.id))));const{$collection:ai,$keys:ni}=Bt({key:"sign",store:ri}),oi=(0,s.createStore)([],{sid:"kiuxq6"});oi.on(Qt.finished.success,((e,{result:t})=>[...e,t])).on(Ut.finished.success,((e,{params:t})=>e.filter((e=>e.id!==t.id))));const ci=(0,s.createStore)([],{sid:"n41xgp"});ci.on(Vt.finished.success,((e,{result:t})=>[...e,t])).on(It.finished.success,((e,{params:t})=>e.filter((e=>e.id!==t.id))));const[li,ui]=(0,s.withFactory)({sid:"-jg7rhz",fn:()=>(0,St.K)((0,s.combine)({and:[{ticket:ri,flexible:ci,direction:oi,currency:a.y.outputs.$currency,rates:a.y.outputs.$currencyRates},({ticket:e,direction:t,flexible:i,currency:s,rates:r})=>[...e,...t,...i].sort(zt).map((e=>((e,t,i)=>{const{price:s,type:r,adults:a,children:n,infants:o}=e;if(!s)return e;const c=(({type:e,passengers:t,priceValue:i})=>{if(e===G.Ou.Flexible)return i;const s=(e=>(e?.adults||0)+(e?.children||0)+(e?.infants||0))(t)||1;return Math.ceil(i/s)})({type:r,priceValue:s.value,passengers:{adults:a,children:n,infants:o}});let l=0;return s.delta&&(l=(0,be.z)(Math.abs(s.delta),xe,t,i).value,s.delta<0&&(l*=-1)),{...e,convertedPrice:{delta:l,price:(0,be.z)(s.value,xe,t,i).value,pricePerPassenger:(0,be.z)(c,xe,t,i).value}}})(e,s,r)))],or:{sid:"-jn4c3h"}}))}),{$collection:di,$keys:pi}=Bt({key:"id",store:li});(0,s.sample)({and:[{clock:Lt.finished.success,fn:({result:{ticketSubscriptions:e,directionSubscriptions:t,flexibleSubscriptions:i}})=>({ticketSubscriptions:e,directionSubscriptions:t,flexibleSubscriptions:i}),target:(0,s.withFactory)({sid:"dqsqfp",fn:()=>(0,kt.h)({ticketSubscriptions:ri,directionSubscriptions:oi,flexibleSubscriptions:ci})})}],or:{sid:"-xteo9n"}});const mi=(0,s.createEvent)({sid:"-lz527v"});(0,s.sample)({and:[{clock:mi,source:ai,filter:(e,{data:{sign:t}})=>bt()(t,e),fn:(e,{data:{sign:t},source:i})=>({data:{id:vt()([t,"id"],e),sign:vt()([t,"sign"],e),type:G.Ou.Ticket},source:i}),target:ut.inputs.deleteSubscription}],or:{sid:"-mvpzf3"}}),(0,s.sample)({and:[{clock:Ht.finished.success,source:{ticketSubscriptions:ri,directionSubscriptions:oi,flexibleSubscriptions:ci},fn:({ticketSubscriptions:e,directionSubscriptions:t,flexibleSubscriptions:i},{result:s})=>({ticketSubscriptions:e.filter((({id:e})=>!s.info.ticket_subscription_ids.includes(e))),directionSubscriptions:t.filter((({id:e})=>!s.info.direction_subscription_ids.includes(e))),flexibleSubscriptions:i.filter((({id:e})=>!s.info.flexible_subscription_ids.includes(e)))}),target:(0,s.withFactory)({sid:"-tvgytv",fn:()=>(0,kt.h)({ticketSubscriptions:ri,directionSubscriptions:oi,flexibleSubscriptions:ci})})}],or:{sid:"-ly6j82"}}),(0,s.withFactory)({sid:"-kihvg4",fn:()=>(0,jt.m)({clock:Yt,target:[ri,oi,ci]})});const fi={fetchAllSubscriptions:Jt,resetSubscriptions:Yt,actualizeSubscriptions:Kt,deleteTicketSubscription:mi,deleteAnySubscription:ii,createTicketSubscription:Xt,createDirectionSubscription:ei,convertToRub:({rates:e,currency:t,value:i,ceil:s})=>{if(!i)return null;const r=i*e[t];return s?Math.ceil(r):r}},gi={subscriptionsServiceStarted:Gt,$subscriptions:li,$subscriptionsCollection:di,$subscriptionsIds:pi,$ticketSubscriptionSignatures:ni,$ticketSubscriptionsCollectionBySign:ai,$ticketSubscriptions:ri,$directionSubscriptions:oi,$flexibleSubscriptions:ci,subscriptionReport:Ot,$isSubscriptionsServiceStarted:si},_i=e=>e?{value:e.value}:null,hi=e=>{const{baggage:t,price:i,adults:s,infants:r,children:a,directionSegments:n,segments:o,validatingCarrier:c,charter:l,tripClass:u,sign:d}=e;return{adults:s,children:a,infants:r,baggage:t,trip_class:u,segments:n,price:_i(i),ticket:{segments:o,validating_carrier:c,charter:l},sign:d}},yi=(0,s.createEvent)({sid:"-vxzsaf"}),bi=(0,s.withFactory)({sid:"zhys2g",fn:()=>(0,d.m)([ut.inputs.deleteSubscription,ut.outputs.removeSubscriptionSucceed])}),xi=(0,s.createStore)({},{sid:"-ccrkcf"});(0,s.sample)({and:[{clock:bi,source:{subscriptions:gi.$subscriptionsCollection,removedSubscriptions:xi},fn:({subscriptions:e,removedSubscriptions:t},[{data:{id:i}}])=>({...t,[i]:e[i]}),target:xi}],or:{sid:"yrr8fq"}});const vi=(0,s.createEvent)({sid:"-lcz7xr"});(0,s.sample)({and:[{clock:yi,source:xi,filter:(e,t)=>Boolean(e[t]),fn:(e,t)=>e[t],target:vi}],or:{sid:"-zbtdcd"}}),(0,s.sample)({and:[{clock:vi,filter:e=>e.type===G.Ou.Ticket,fn:e=>({source:"subscriptions",data:hi(e)}),target:ut.inputs.createTicketSubscription}],or:{sid:"-yvvc4w"}}),(0,s.sample)({and:[{clock:vi,filter:e=>e.type===G.Ou.Direction,fn:e=>(e=>{const{maxStops:t,tripClass:i,adults:s,children:r,infants:a,baggage:n,price:o,segments:c,flexibility:l}=e;return{price:_i(o),adults:s,children:r,infants:a,baggage:n,segments:c,flexibility:l,trip_class:i,max_stops:t}})(e),target:ut.inputs.createDirectionSubscription}],or:{sid:"-y0j2bb"}}),(0,s.sample)({and:[{clock:vi,filter:e=>e.type===G.Ou.Flexible,fn:e=>(e=>{const{baggage:t,maxStops:i,price:s,oneWay:r,origin:a,destination:n,months:o,durationsRange:c}=e;return{origin:a,destination:n,months:me(o),one_way:r,durations_range:c??null,price:_i(s),baggage:t,max_stops:i}})(e),target:ut.inputs.createFlexibleSubscription}],or:{sid:"-xixnbr"}});const ki={inputs:{restoreRemovedSubscription:yi}},ji=({subscriptionId:e})=>{const t=(0,_t.useUnit)(ki.inputs.restoreRemovedSubscription),{t:i}=(0,ge.useTranslation)("service_usercom_private_subscription_notifications");return(0,ft.jsx)(ht.P,{onClick:()=>t(e),children:i("success.remove.actionButtonLabel")})};var Si=i(67294);const wi=(0,s.createEvent)({sid:"wg9164"});(0,s.sample)({and:[{clock:wi,fn:()=>"/my/notifications",target:I.D.inputs.openNewTab}],or:{sid:"7dg67c"}});const Ci=()=>{const{t:e}=(0,ge.useTranslation)("service_usercom_subscriptions"),t=(0,_t.useUnit)({click:wi});return(0,ft.jsx)(ht.P,{onClick:t.click,children:e("notification.firstTimeCreated.action")})},Ti=(0,Si.memo)(Ci);var Ai=i(20381),Ei=i(88998),Fi=i(77657);const $i=()=>{const{t:e}=(0,ge.useTranslation)("service_usercom_subscriptions"),t=(0,_t.useUnit)({close:Ai.i.inputs.removeCurrentDialog});return(0,ft.jsx)("div",{className:"s__BdPsY9i_XCunKGDttk0w",children:(0,ft.jsxs)(Ei.A,{size:Fi.g.Mobile,children:[(0,ft.jsx)(Ei.A.Title,{children:e("popup.children.title")}),(0,ft.jsx)(Ei.A.Content,{children:e("popup.children.description")}),(0,ft.jsx)(Ei.A.Actions,{children:(0,ft.jsx)(Ei.A.Action,{onClick:t.close,children:e("popup.children.action")})})]})})},Di=(0,Si.memo)($i),Ni=(0,s.createEvent)({sid:"-zhlp5l"}),{$pending:Oi}=Ai.i.inputs.dialog({clock:Ni,customContent:Di}),Ri=()=>{const{t:e}=(0,ge.useTranslation)("service_usercom_subscriptions"),t=(0,_t.useUnit)({click:Ni});return(0,ft.jsx)(ht.P,{onClick:t.click,children:e("notification.ticketSubscriptionCreated.children.action")})},Mi=(0,Si.memo)(Ri),Bi=e=>e?e?.type===G.Ou.Direction?"flexibility"in e&&e.flexibility&&e.flexibility>0?".directionFlex":".direction":e?.type===G.Ou.Ticket?"baggage"in e?e.baggage?".ticketBaggage":".ticket":".default":e.type?`.${e.type}`:"":"",Pi=e=>e.result!==u.Success?null:()=>(0,ft.jsx)(ft.Fragment,{children:(0,ft.jsx)(ji,{id:e.data.id,subscriptionId:e.data.id})}),{notify:qi,hideNotification:zi}=dt.B.inputs,{restoreRemovedSubscription:Zi}=ki.inputs,{$t:Ui}=pt.J.outputs,Ii=(0,s.createEvent)({sid:"-kpxbbz"}),Li=(0,s.createEvent)({sid:"-w7vg0w"}),Wi=(0,s.createEvent)({sid:"-w0u1qi"}),Qi=(0,s.createEvent)({sid:"-c4rmh0"}),Vi=(0,s.createEvent)({sid:"3a8sd8"});(0,s.sample)({and:[{clock:Ii,fn:e=>{const{result:t}=e,i=t===u.Success;return"data"in e?{id:`${e.data.id}-remove-${t}`,icon:i?gt:"warning",message:`service_usercom_private_subscription_notifications:${t}.remove.message${Bi(e.data)}`,actions:Pi(e)}:{id:`remove-${t}`,icon:i?gt:"warning",message:`service_usercom_private_subscription_notifications:${t}.remove.message`,actions:Pi(e)}},target:Vi}],or:{sid:"-tahokr"}}),(0,s.sample)({and:[{clock:Qi,fn:e=>({id:"already-exists-create",icon:"success",message:`service_usercom_private_subscription_notifications:success.create.message${Bi({...e.data,type:G.Ou.Ticket,id:"409"})}`,actions:null}),target:Vi}],or:{sid:"-t76x0l"}}),(0,s.sample)({and:[{clock:Li,fn:()=>({id:"remove-outdated-succeed",icon:gt,message:"service_usercom_private_subscription_notifications:success.removeOutdated.message",actions:null}),target:Vi}],or:{sid:"-sscgzu"}}),qi({clock:Vi,id:{mapData:({id:e})=>e},autoClose:!0,message:{source:Ui,fn:({message:e},t)=>t(e)},icon:{mapData:({icon:e})=>e},actions:{mapData:({actions:e})=>e}}),(0,s.sample)({and:[{clock:Zi,fn:e=>`${e}-remove-success`,target:zi}],or:{sid:"-rt5n0q"}});const Hi={inputs:{showCreateNotification:Wi,showRemoveNotification:Ii,showRemoveAllNotificationSucceed:Li,showAlreadyExistsCreateNotification:Qi}};(0,s.sample)({and:[{clock:ut.outputs.removeSubscriptionSucceed,fn:({params:e})=>({data:e,result:u.Success}),target:Hi.inputs.showRemoveNotification}],or:{sid:"bm6k1h"}}),(0,s.sample)({and:[{clock:ut.outputs.removeOutdatedSubscriptionsSucceed,fn:()=>({result:u.Success}),target:Hi.inputs.showRemoveAllNotificationSucceed}],or:{sid:"c3rz11"}}),(0,s.sample)({and:[{clock:[ut.outputs.removeSubscriptionFailed,ut.outputs.removeOutdatedSubscriptionsFailed],fn:()=>({result:u.Error}),target:Hi.inputs.showRemoveNotification}],or:{sid:"cjq08i"}});var Gi=i(69430),Ji=i(94547);const Yi=(0,s.createDomain)("subscriptions",{sid:"57hkbi"});var Ki=i(47047),Xi=i(78364);const es=(0,s.withFactory)({sid:"s1nme0",fn:()=>(0,Ki.d)((()=>Xi.f.inputs.createFlag({name:"usc-feat-showSpecialToasts",contract:f.Boolean,defaultValue:!1})))}),ts=(0,Ji.Yu)("subscription_first_time_created",{adapter:Ji.j$.json({contract:f.Boolean})}),is=Yi.createEffect(ts.write,{sid:"-wopfpv"}),ss=Yi.createEffect(ts.remove,{sid:"-4sh5yj"}),rs=Yi.createEvent({sid:"s4vxcy"}),as=Yi.createEvent({sid:"kywgia"}),ns=Yi.createStore(ts.read()??!1,{sid:"1lgmks"}).on(is.done,((e,{params:t})=>t)).on(as,(()=>!1)),os=(0,s.sample)({and:[{clock:rs,source:{notificationWasShown:ns,showSpecialToastsFlagEnabled:es.$value},filter:({notificationWasShown:e,showSpecialToastsFlagEnabled:t},i)=>t&&!e&&i!==o.d.none,fn:(e,t)=>t}],or:{sid:"pfuzo7"}});(0,s.sample)({and:[{clock:os,fn:()=>!0,target:is}],or:{sid:"-b687l5"}}),(0,s.sample)({and:[{clock:as,target:ss}],or:{sid:"-ardrke"}}),dt.B.inputs.notify({clock:os,message:{source:pt.J.outputs.$t,fn:(e,t)=>t(`service_usercom_subscriptions:notification.firstTimeCreated.message.${e}`)},autoClose:!0,icon:Gi.C,actions:Ti});var cs=i(4579),ls=i(47480);const us=Yi.createEvent({sid:"bgin9u"}),ds=Yi.createStore(!1,{sid:"m8eili"}).on(us,((e,{dropChildren:t})=>t)),ps=(0,s.combine)({and:[{shouldDropChildren:ds,t:pt.J.outputs.$t},({shouldDropChildren:e,t:t})=>t("service_usercom_subscriptions:notification.ticketSubscriptionCreated.message",{additional:e?t("service_usercom_subscriptions:notification.ticketSubscriptionCreated.children.additionalMessage"):null})],or:{sid:"87p5hk"}});(0,s.sample)({and:[{clock:ut.inputs.createTicketSubscriptionDone,fn:([{data:e}])=>({dropChildren:e.droppedChildren??!1}),target:us}],or:{sid:"pggb1i"}}),(0,s.sample)({and:[{clock:ut.inputs.queries.createTicketQuery.finished.failure,filter:({error:e})=>"status"in e&&409===e.status,fn:({params:e})=>({data:e,result:u.Success}),target:Hi.inputs.showAlreadyExistsCreateNotification}],or:{sid:"pwec8z"}}),dt.B.inputs.notify({id:{mapData:()=>(0,ls.x0)()},clock:us,message:ps,autoClose:!0,icon:cs.D,actions:{source:ds,fn:(e,t)=>t?Mi:null}});const{$jwt:ms,loggedOut:fs}=c.O.outputs;(0,s.sample)({and:[{clock:fs,target:fi.resetSubscriptions}],or:{sid:"-yydrgn"}});const gs=(0,s.withFactory)({sid:"-j9q4gx",fn:()=>(0,r.x)(a.y.outputs.$currency,n.l.outputs.$language,l.b.outputs.$marker,c.O.outputs.$isAuthorized,ms)});(0,s.sample)({and:[{clock:[a.y.outputs.$currency.updates,n.l.outputs.$language.updates,l.b.outputs.$marker.updates,c.O.outputs.$isAuthorized],filter:gs,target:fi.actualizeSubscriptions}],or:{sid:"-yg8jvq"}}),(0,s.sample)({and:[{clock:[ut.inputs.queries.createDirectionQuery.finished.success,ut.inputs.queries.createFlexibleQuery.finished.success,ut.inputs.queries.createTicketQuery.finished.success],source:o.W.outputs.$notificationChannelType,target:rs}],or:{sid:"-xy3cat"}}),(0,s.sample)({and:[{clock:c.O.outputs.loggedOut,target:as}],or:{sid:"-xh1pwm"}});var _s=i(67334),hs=i(65740),ys=i(38032),bs=i(82036);const xs=(0,s.createEvent)({sid:"-ppgi3p"}),vs=(0,s.createEvent)({sid:"-1vthrt"}),ks=(0,s.createEvent)({sid:"-xl7bqr"}),js=(0,s.createEvent)({sid:"n5660e"}),Ss=(0,s.restore)(xs,null,{sid:"-4e13u2"}),ws=(0,s.createStore)(!1,{sid:"bharc4"}).on(js,(()=>!0)).reset(vs);(0,s.withFactory)({sid:"-1hufns",fn:()=>(0,hs.s)({source:xs,if:(0,s.withFactory)({sid:"-g7ay27",fn:()=>(0,r.x)((0,s.withFactory)({sid:"sbn08v",fn:()=>(0,ys.f)(c.O.outputs.$isAuthorized)}),bs.m.outputs.$isEnabled)}),then:ks,else:js})}),(0,s.sample)({and:[{clock:ks,fn:({eventData:e})=>({type:"search",source:e.popupShowedSource}),target:bs.m.inputs.showWidget}],or:{sid:"-1090o8"}}),(0,s.sample)({and:[{clock:(0,s.withFactory)({sid:"szuahp",fn:()=>(0,d.m)({events:[ks,bs.m.outputs.userAuthorized],reset:js})}),source:Ss,filter:(0,s.withFactory)({sid:"-cfcgg2",fn:()=>(0,r.x)(Ss,c.O.outputs.$isAuthorized)}),fn:e=>e,target:js}],or:{sid:"-j7ea1"}});const Cs={inputs:{openPriceAlertPopup:xs,closePriceAlertPopup:vs,showPriceAlertPopup:js},outputs:{$isPriceAlertPopupVisible:ws}};(0,s.sample)({and:[{clock:ut.outputs.$fetchAllSubscriptionsStatus.updates,source:ut.outputs.$fetchAllSubscriptionsStatus,target:_s.A.inputs.fetchSubscriptionsStatusFx}],or:{sid:"-in3ufr"}}),(0,s.sample)({and:[{clock:ut.inputs.queries.createDirectionQuery.finished.success,fn:({result:e})=>({isFlexSubscription:!1,subscription:e.raw}),target:_s.A.inputs.subscriptionCreatedFx}],or:{sid:"-ij9aa8"}}),(0,s.sample)({and:[{clock:ut.inputs.queries.createFlexibleQuery.finished.success,fn:({result:e})=>({isFlexSubscription:!0,subscription:e.raw}),target:_s.A.inputs.subscriptionCreatedFx}],or:{sid:"-i27nw1"}}),(0,s.sample)({and:[{source:ut.outputs.$createTicketSubscriptionStatus,target:_s.A.inputs.createTicketSubscriptionStatusFx}],or:{sid:"-hlpu37"}}),(0,s.sample)({and:[{source:ut.outputs.$deleteTicketSubscriptionStatus,target:_s.A.inputs.deleteTicketSubscriptionStatusFx}],or:{sid:"-h7f6nt"}}),(0,s.sample)({and:[{clock:gi.$ticketSubscriptionsCollectionBySign.updates,source:gi.$ticketSubscriptionsCollectionBySign,target:_s.A.inputs.ticketSubscriptionsCollectionChangedFx}],or:{sid:"-h4o7p0"}}),(0,s.sample)({and:[{clock:ut.inputs.queries.fetchAllQuery.finished.success,fn:({result:e})=>e.raw,target:_s.A.inputs.fetchedSubscriptions}],or:{sid:"-gptro9"}}),(0,s.sample)({and:[{clock:ut.inputs.queries.deleteDirectionQuery.finished.success,fn:({result:e})=>e,target:_s.A.inputs.deletedDirectionSubscription}],or:{sid:"-gmj043"}}),(0,s.sample)({and:[{clock:ut.inputs.queries.deleteFlexibleQuery.finished.success,fn:({result:e})=>e,target:_s.A.inputs.deletedDirectionSubscription}],or:{sid:"-g7ok3c"}}),(0,s.sample)({and:[{clock:ut.inputs.queries.deleteDirectionQuery.finished.failure,target:_s.A.inputs.deletedDirectionSubscription}],or:{sid:"-fsabh8"}}),(0,s.sample)({and:[{clock:ut.inputs.queries.deleteFlexibleQuery.finished.failure,target:_s.A.inputs.deletedFlexibleSubscription}],or:{sid:"-fpjcif"}}),(0,s.sample)({and:[{clock:_s.A.outputs.openPriceAlertPopupFromHelios,target:Cs.inputs.openPriceAlertPopup}],or:{sid:"-f9lbay"}}),(0,s.sample)({and:[{clock:_s.A.outputs.fetchSubscriptions,target:fi.fetchAllSubscriptions}],or:{sid:"-evanvk"}}),(0,s.sample)({and:[{clock:_s.A.outputs.createTicketSubscription,target:fi.createTicketSubscription}],or:{sid:"-esjowr"}}),(0,s.sample)({and:[{clock:_s.A.outputs.deleteTicketSubscription,target:fi.deleteTicketSubscription}],or:{sid:"-a21wt2"}}),(0,s.sample)({and:[{clock:_s.A.outputs.deleteDirectionSubscription,fn:({id:e})=>({type:G.Ou.Direction,id:e}),target:ut.inputs.deleteDirectionSubscription}],or:{sid:"-9zaxu9"}}),(0,s.sample)({and:[{clock:_s.A.outputs.deleteFlexibleSubscription,fn:({id:e})=>({type:G.Ou.Flexible,id:e}),target:ut.inputs.deleteFlexibleSubscription}],or:{sid:"-9kghti"}});const Ts=(e,t)=>{switch(e){case G.Ou.Direction:return t?"close_dates":"direct";case G.Ou.Flexible:return"flex";case G.Ou.Ticket:return"ticket";default:return"unknown"}},As=(0,s.createEvent)({sid:"b5u5sk"});Ot({clock:As,data:{label:Et.Subscription,action:At.Applied},payload:(e,{payload:t})=>({...t,...e})}),Ot({clock:ut.inputs.createTicketSubscriptionDone,data:{label:Et.Subscription,action:At.Applied},payload:([{source:e},{result:t}],{payload:i})=>({...i,source:e,priceAlertType:G.Ou.Ticket,minPrice:t.price?.value,subscriptionId:t.id})}),Ot({clock:ut.inputs.createTicketSubscriptionFailed,data:{label:Et.Subscription,action:At.Failed},payload:([{source:e}],{payload:t})=>({...t,source:e,priceAlertType:G.Ou.Ticket})}),Ot({clock:ut.inputs.subscriptionRemoved,data:{label:Et.Subscription,action:At.Removed},payload:([{source:e},{params:t}],{payload:i})=>({...i,source:e,subscriptionId:t.id,priceAlertType:Ts(t.type,t.flexibility)})}),Ot({clock:ut.inputs.subscriptionRemoveFailed,data:{label:Et.Subscription,action:At.RemovingFailed},payload:([{source:e},{params:t}],{payload:i})=>({...i,source:e,subscriptionId:t.id,priceAlertType:Ts(t.type,t.flexibility)})}),i(21703);var Es=i(78260);const{log:Fs}=(0,Es.cr)("usercom",{name:"service/subscriptions"}),{queries:$s}=ut.inputs,Ds=({error:e,params:t,queryName:i})=>{const s=`[subscriptions service] ${i} had failed (${e.explanation})`,r="status"in e&&e.status;return{msg:s,error:Error(s),extra:{params:t,status:r,message:e.explanation,validationError:"validationErrors"in e?e.validationErrors:void 0}}};Fs({level:"error",clock:[$s.actualizeSubscriberQuery.finished.failure.map((({error:e,params:t})=>Ds({error:e,params:t,queryName:"actualizeSubscriberQuery"}))),$s.fetchAllQuery.finished.failure.map((({error:e,params:t})=>Ds({error:e,params:t,queryName:"fetchAllQuery"}))),$s.createTicketQuery.finished.failure.map((({error:e,params:t})=>Ds({error:e,params:t,queryName:"createTicketQuery"}))),$s.createDirectionQuery.finished.failure.filterMap((({error:e,params:t})=>{if(409!==(e.status||e.response?.status))return Ds({error:e,params:t,queryName:"createDirectionQuery"})})),$s.createFlexibleQuery.finished.failure.filterMap((({error:e,params:t})=>{if(409!==(e.status||e.response?.status))return Ds({error:e,params:t,queryName:"createFlexibleQuery"})})),$s.deleteTicketQuery.finished.failure.map((({error:e,params:t})=>Ds({error:e,params:t,queryName:"deleteTicketQuery"}))),$s.deleteDirectionQuery.finished.failure.map((({error:e,params:t})=>Ds({error:e,params:t,queryName:"deleteDirectionQuery"}))),$s.deleteFlexibleQuery.finished.failure.map((({error:e,params:t})=>Ds({error:e,params:t,queryName:"deleteFlexibleQuery"}))),$s.removeOutdatedQuery.finished.failure.map((({error:e,params:t})=>Ds({error:e,params:t,queryName:"removeOutdatedQuery"})))]});var Ns=i(30091),Os=i(23588),Rs=i(63246);const Ms=(0,s.createEvent)({sid:"-jdzryw"}),Bs=(0,s.createEvent)({sid:"bb0493"}),Ps=(0,s.combine)({and:[{hasSubscription:gi.$subscriptions.map((e=>e.length>0)),isLogin:c.O.outputs.$isAuthorized},({hasSubscription:e,isLogin:t})=>({isLogin:t,hasSubscription:!!t&&e})],or:{sid:"ur57s2"}});(0,s.sample)({and:[{clock:_s.A.inputs.trackEntryPointShowFromHelios,target:Ms}],or:{sid:"qoyg1q"}}),(0,s.sample)({and:[{clock:_s.A.inputs.trackEntryPointClickFromHelios,target:Bs}],or:{sid:"qrpf0j"}}),(0,s.sample)({and:[{clock:Os.z.inputs.ticketSubscriptionClickedFx,source:gi.$ticketSubscriptionsCollectionBySign,fn:(e,t)=>({isCreate:!bt()(t,e),source:Dt.TicketPreview}),target:Bs}],or:{sid:"r602fx"}});const qs=(0,s.sample)({and:[{clock:Ms,source:Ps,filter:Rs.y.outputs.$isClient,fn:(e,t)=>({...e,...t})}],or:{sid:"-24txa9"}}),zs=(0,s.sample)({and:[{clock:Bs,source:Ps,filter:Rs.y.outputs.$isClient,fn:(e,t)=>({...e,...t})}],or:{sid:"-x6e8u6"}});Ot({clock:qs,data:{label:"entry_point",action:"showed"},payload:(e,{payload:t})=>({...e,...t})}),Ot({clock:zs,data:{label:"entry_point",action:"clicked"},payload:(e,{payload:t})=>({...e,...t})});const Zs={inputs:{trackSubscriptionEntryPointShow:Ms,trackSubscriptionEntryPointClick:Bs}},{createTicketSubscription:Us,deleteTicketSubscription:Is}=fi,{$ticketSubscriptions:Ls}=gi,{createTicketQuery:Ws,deleteTicketQuery:Qs}=ut.inputs.queries,Vs=(0,s.createDomain)("subscription_serp_proxy",{sid:"ok2nbz"}).createStore({},{sid:"bmi7zl"});(0,s.sample)({and:[{clock:[Us,Is],source:Vs,fn:(e,t)=>{const{sign:i}=t.data;return{...e,[i]:G.oF.Pending}},target:Vs}],or:{sid:"-e55k1k"}}),(0,s.sample)({and:[{clock:Ws.finished.success,source:Vs,fn:(e,{params:t})=>({...e,[t.sign]:G.oF.Applied}),target:Vs}],or:{sid:"-dmgjva"}}),(0,s.sample)({and:[{clock:Ws.finished.failure,source:Vs,fn:(e,{params:t})=>({...e,[t.sign]:G.oF.NonApplied}),target:Vs}],or:{sid:"-d5exh3"}}),(0,s.sample)({and:[{clock:Qs.finished.success,source:Vs,fn:(e,{params:t})=>({...e,[t.sign]:G.oF.NonApplied}),target:Vs}],or:{sid:"-codb2w"}}),(0,s.sample)({and:[{clock:Qs.finished.failure,source:Vs,fn:(e,{params:t})=>({...e,[t.sign]:G.oF.Applied}),target:Vs}],or:{sid:"-c7boop"}}),(0,s.sample)({and:[{clock:Ls,source:Vs,fn:(e,t)=>({...e,...t.reduce(((e,{sign:t})=>({...e,[t]:G.oF.Applied})),{})}),target:Vs}],or:{sid:"-bqa2ai"}});const Hs={$ticketSubscriptionStatuses:Vs},Gs=(0,s.withFactory)({sid:"szsm73",fn:()=>(0,Ki.d)((()=>Xi.f.inputs.createFlag({name:"avs-feat-subscription",contract:f.Boolean,defaultValue:!1})))});var Js=i(15458),Ys=i(91585),Ks=i(49963),Xs=i(44619),er=i(1156),tr=i(39535),ir=i(94760),sr="s__NkFuHQlpssSDh7sGVjG_",rr="s__rf2jVXzq9wLZ56Zrcb9o";const ar=({passengers:e,baggage:t,tripClass:i,pricePerPassenger:s,withoutLayovers:r})=>{const{t:a}=(0,ge.useTranslation)("service_usercom_subscriptions"),n=e.adults+e.children+e.infants,o=s&&1!==n;return(0,ft.jsx)("div",{className:"s__wnzldeW9_VT6_mdPTDA6",children:(0,ft.jsxs)("div",{className:"s__dOu1dJsNMtyCoV0D7mfV",children:[n>0&&(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)(Ks.x,{type:Xs.y.Body3Regular,className:sr,children:a("cardInfo.passengers")}),(0,ft.jsxs)(Ks.x,{type:Xs.y.Body3Regular,className:rr,children:[a("cardInfo."+(n===e.adults?"adultsCount":"passengersCount"),{count:n}),o&&` ${a("cardInfo.pricePerOne")}`]})]}),t&&(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)(Ks.x,{type:Xs.y.Body3Regular,className:sr,children:a("cardInfo.baggage")}),(0,ft.jsx)(Ks.x,{type:Xs.y.Body3Regular,className:rr,children:a("cardInfo.withBaggage")})]}),i&&(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)(Ks.x,{type:Xs.y.Body3Regular,className:sr,children:a("cardInfo.tripClass")}),(0,ft.jsx)(Ks.x,{type:Xs.y.Body3Regular,className:rr,children:(0,ft.jsx)(ir.s,{value:i})})]}),r&&(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)(Ks.x,{type:Xs.y.Body3Regular,className:sr,children:a("cardInfo.layovers")}),(0,ft.jsx)(Ks.x,{type:Xs.y.Body3Regular,className:rr,children:a("cardInfo.noLayovers")})]})]})})};var nr=i(34611),or=i(1945);const cr=({items:e=[]})=>0===e.length?null:(0,ft.jsx)("div",{className:"s__e23hXyfnGVv6XbcZ2CU9",children:e.reduce(((t,i,s)=>s<2?(t.push((0,ft.jsx)(nr.p,{size:or.R.Small,marketingCarrierIata:i,marketingCarrierName:i},`${i}-${s}`)),t):(2===s&&t.push((0,ft.jsx)(Ks.x,{className:"s__JfRCXhV11H6g2OwAbT7f",type:Xs.y.Body3Bold,children:"+"+(e.length-2)},`counter-${s}`)),t)),[])});var lr=i(49546),ur=i.n(lr),dr=i(94184),pr=i.n(dr),mr=i(38694),fr=i(6328),gr=i(99491),_r=i(34701),hr=i(87115);const yr=({className:e,...t},i)=>(0,ft.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:i,style:{display:"inline-block"},...t,children:(0,ft.jsx)("path",{d:"m8 10 4.5 2 .5-.5L8.5 4h-1L3 11.5l.5.5L8 10Z"})}),br=(0,Si.memo)((0,Si.forwardRef)(yr));br.displayName="Icon16ControlsDeltaArrowUp";const xr=e=>{const{lookingFor:t,price:i,delta:s=0,currency:r}=e,{t:a}=(0,ge.useTranslation)("service_usercom_subscriptions");if(i&&!t){const e=ur()(s)&&0!==s;return(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)(Ks.x,{type:Xs.y.Title2Bold,children:(0,ft.jsx)(mr.t,{value:i,currency:r})}),e&&(0,ft.jsxs)(_r.C,{className:"s__F9TgLrLzsoL3ajQVhH4I",priority:hr.Tt.Secondary,borderStyle:hr.Pk.Brick,color:s>0?hr.JV.Red:hr.JV.Green,children:[(0,ft.jsx)(_r.C.Icon,{children:(0,ft.jsx)(br,{className:pr()(s<0&&"s__velNb1UlQPr_CjSLf3gS")})}),(0,ft.jsx)(mr.t,{value:Math.abs(s),currency:r})]})]})}return t?(0,ft.jsxs)("div",{className:"s__EFSMHTplCogiMsqkhlmT",children:[(0,ft.jsx)(fr.$,{size:gr.Ey.S,inline:!0}),(0,ft.jsx)(Ks.x,{type:Xs.y.Title4Semi,children:a("price.lookingFor")})]}):(0,ft.jsx)(Ks.x,{type:Xs.y.Body1Bold,children:a("price.noTickets")})};var vr=i(23075),kr=i(80191),jr=i(66149),Sr="s__p87wRR2nrW6xM5z0w3QF",wr="s__ocZYJ2uBAamm9g6qiETO";const Cr=e=>{const{layovers:t}=e,i=t[0],s=t[t.length-1]||i,r=t.reduce(((e,t)=>e+t.duration+t.delay),0),a=(0,jr.DR)({durationMinutes:r,removeMinutesZeros:!0}),n=(0,_e.d)("ts_day_month_short_weekday");return(0,ft.jsxs)("div",{className:"s__eIVFdjtB1djRd9DcU5aq",children:[(0,ft.jsxs)("div",{className:"s__v2Aclz4rYlVSaN7KK3J8",children:[(0,ft.jsxs)(Ks.x,{type:Xs.y.Body3AllCaps,className:Sr,children:[i.departureTime," ",i.departureAirport]}),(0,ft.jsx)(Ks.x,{type:Xs.y.CaptionRegular,className:wr,children:n(i.departureDate)})]}),(0,ft.jsxs)("div",{className:"s__S_FkFMSpvB5R0ytvEOMo",children:[(0,ft.jsxs)("div",{className:"s__RDLez4abrzNsKhtUyhl1",children:[(0,ft.jsx)(kr.i,{}),(0,ft.jsx)(vr.a,{className:"s__TxkMVDAZVBa_t4OvqEWk"}),(0,ft.jsx)(kr.i,{})]}),(0,ft.jsx)(Ks.x,{type:Xs.y.CaptionRegular,className:"s__rB1VY9VKPwJN4iaIXkK7",children:a})]}),(0,ft.jsxs)("div",{className:"s__wZneL4huGqckwvqb0A5u",children:[(0,ft.jsxs)(Ks.x,{type:Xs.y.Body3AllCaps,className:Sr,children:[s.arrivalAirport," ",s.arrivalTime]}),(0,ft.jsx)(Ks.x,{type:Xs.y.CaptionRegular,className:wr,children:n(s.arrivalDate)})]})]})};const Tr=({baggage:e,carriers:t,date:i,suggestedDate:s,tripClass:r,type:a,flexibility:n,durationsRange:o,passengers:c,pricePerPassenger:l,layoversWayBack:u,layoversToDestination:d,currency:p,isOneWay:m,lookingFor:f,showPrice:g,price:_,priceDelta:h,ticketUrl:y,withoutLayovers:b,onRemove:x})=>{const{t:v}=(0,ge.useTranslation)("service_usercom_subscriptions"),k=(0,_t.useUnit)(U.U.outputs.$isWayAwayBrand),j=f||""===y,S=a===G.Ou.Flexible||a===G.Ou.Direction&&Boolean(n),w=(0,ft.jsxs)("div",{className:"s__xDIO9b7fJ4eK_sxE253x",children:[(0,ft.jsx)(xr,{lookingFor:j,price:_,delta:h,currency:p}),""!==y&&(0,ft.jsx)(er.z,{target:"_blank",className:"s__b6rKP1NQP1p3pDfXhnQg",mod:k?tr.Ly.Default:tr.Ly.Orange,href:y,children:v("card.viewTicket")}),S&&(0,ft.jsx)(Ks.x,{type:Xs.y.CaptionSemi,className:"s__POvmJFqlMgtJWq0Gmyyd",children:s})]});return(0,ft.jsxs)("div",{className:"s__Jepi57d1FNDrOmdh3k7M",children:[g&&w,(0,ft.jsxs)("div",{className:"s__WtpuWAlhjhgKTqdBkzTA",children:[(0,ft.jsxs)("div",{className:"s__i1k7nftCgsy0eP7hl1Sx",children:[(0,ft.jsx)(Ks.x,{className:"s__g1OWHmUvUIuFGnMwt7SA",type:Xs.y.Title4Bold,children:i}),(0,ft.jsx)(Ks.x,{className:"s__hafwuI4KyP1LQHcYxI9C",type:Xs.y.Title4Semi,children:a===G.Ou.Ticket?v("card.ticket"):a===G.Ou.Direction?n?v("card.flexibility"):"":!m&&o?v("card.tripDuration",{min:o.min_days,max:o.max_days}):v("card.oneWay")}),(0,ft.jsx)(er.z,{className:"s__WumCIvEFRoVhzvPKvAa7",size:tr.qE.XS,priority:tr.Ji.Secondary,mod:tr.Ly.Red,onClick:x,children:v("card.deleteSubscription")})]}),(0,ft.jsxs)("div",{className:"s__ltc6tRczilZJBBT3baAH",children:[(0,ft.jsx)(ar,{pricePerPassenger:l,passengers:c,baggage:e,tripClass:r,withoutLayovers:b}),t&&(0,ft.jsx)(cr,{items:t})]}),(0,ft.jsxs)("div",{className:"s__pEVFQ64UNYqePWM66ym3",children:[d&&d.length>0&&(0,ft.jsx)(Cr,{layovers:d}),u&&u.length>0&&(0,ft.jsx)(Cr,{layovers:u})]})]})]})};var Ar=i(88300),Er=i(61653);const Fr=e=>e.map((e=>({origin:{iata:"origin_city"in e?e.origin_city:e.origin},destination:{iata:"destination_city"in e?e.destination_city:e.destination},date:new Date(e.date)})));var $r=i(77349),Dr=i(3151);const Nr=({id:e})=>{const t=(0,_t.useStoreMap)({store:gi.$subscriptionsCollection,fn:t=>t[e],keys:[e],defaultValue:{}}),{pricePerPassenger:i,marker:s,currency:r}=(0,_t.useUnit)({pricePerPassenger:Ys.t.outputs.$usePricePerPassenger,marker:l.b.outputs.$marker,currency:a.y.outputs.$currency}),{actual:n,baggage:o,type:c,adults:u,children:d,infants:p,convertedPrice:m,updatedAt:f}=t,g=(0,_t.useUnit)({remove:ut.inputs.deleteSubscription}),_="tripClass"in t?t.tripClass:Js.s.Economy,h="carriers"in t?t.carriers:[],y="flexibility"in t?t.flexibility:void 0,b="searchInfo"in t?t.searchInfo:void 0,x="layoversToDirection"in t?t.layoversToDirection:void 0,v="layoversWayBack"in t?t.layoversWayBack:void 0,k="oneWay"in t&&t.oneWay,j="durationsRange"in t?t.durationsRange:void 0,S="maxStops"in t&&0===t.maxStops,w=he(ye(c,(e=>({[G.Ou.Ticket]:e.directionSegments,[G.Ou.Direction]:e.segments,[G.Ou.Flexible]:e.months}[e.type]))(t))),C=he((e=>{if(e?.segments[0]?.date)return pe(G.Ou.Direction,e.segments)})(b)),T=(({marker:e,currentCurrency:t,subscription:i})=>{const{actual:s,type:r,price:a,adults:n,children:o,infants:c}=i;if(!s)return"";let l;r!==G.Ou.Ticket&&(l=a?.ticket_segments_key??void 0);const u=(e=>e.type===G.Ou.Ticket?Fr(e.directionSegments):e.type===G.Ou.Direction?Fr(e.segments):e.searchInfo?Fr(e.searchInfo.segments):null)(i);if(!u)return"";const d="tripClass"in i?i.tripClass:Js.s.Economy,p=(0,Ar.j)({tripClass:d,passengers:{adults:n,children:o,infants:c},segments:u}),m=r===G.Ou.Ticket?i.sign:a?.sign;if(!a?.sign){const{protocol:e,port:t,hostname:i}=window.location;if(r===G.Ou.Direction)return`${e}//${i}${t?`:${t}`:""}/search/${p}`;if(r===G.Ou.Flexible)return`${e}//${i}${t?`:${t}`:""}?params=${p}`}const f={sign:m};return r===G.Ou.Ticket&&(f.segments=i.segments.map((e=>({...e,transfers:e.flights.map((e=>({duration:e.delay||0}))),flights:e.flights&&e.flights.map((e=>({...e,operatingCarrier:e.operating_carrier,localArrivalTimestamp:e.local_arrival_timestamp,localDepartureTimestamp:e.local_departure_timestamp,departureAirportIata:e.departure,arrivalAirportIata:e.arrival})))})))),(0,Er.qp)({marker:e,ticket:f,footprintStr:l,agentLabel:"",currentCurrency:t,currencyRates:{rub:1},baseSearchUrl:`/${p}`,unifiedPrice:a?a.value:0,expectedPriceSource:`${r}_subscription`,utmSource:"subscriptions",utmMedium:"personal_account",utmCampaign:`${r}_subscription`})})({subscription:t,currentCurrency:r,marker:s||"direct"}),A=c===G.Ou.Ticket||Boolean(t.price?.sign&&t.searchInfo),E=i?m?.pricePerPassenger:m?.price,F=A?m?.delta:void 0,$=!E&&!((e,t,i=new Date)=>{const s=(0,$r.Z)(t,e);return!(0,Dr.Z)(s,new Date)&&s.getTime()<i.getTime()})(3,f);return(0,ft.jsx)(Tr,{date:w,type:c,price:E,priceDelta:F,lookingFor:$,showPrice:n,baggage:o,carriers:h,isOneWay:k,ticketUrl:T,currency:r,tripClass:_,flexibility:!!y,suggestedDate:C,durationsRange:j,layoversWayBack:v,pricePerPassenger:i,layoversToDestination:x,passengers:{adults:u,children:d,infants:p},withoutLayovers:S,onRemove:()=>t.type===G.Ou.Ticket?g.remove({data:{id:e,type:c,baggage:o,flexibility:y,sign:t.sign},source:Dt.Subscriptions}):g.remove({data:{id:e,type:c,baggage:o,flexibility:y,sign:null},source:Dt.Subscriptions})})},Or={SubscriptionCardContainer:Si.memo(Nr)};var Rr=i(82672);const{matchPage:Mr,pages:Br}=Rr.$.outputs,Pr=(0,s.combine)({and:[{loggedIn:o.W.outputs.$userLoggedIn,subscriptionStatus:ut.outputs.$fetchAllSubscriptionsStatus},({loggedIn:e,subscriptionStatus:t})=>!e||["done","fail"].includes(t)],or:{sid:"6bdgxw"}}),qr=(0,s.withFactory)({sid:"tdstek",fn:()=>(0,r.x)(Mr(Br.SearchPage).$isOpen,c.O.outputs.$isInitialUserDataReceived,Gs.$value,gi.$isSubscriptionsServiceStarted,Pr)});(0,s.sample)({and:[{clock:[qr,o.W.outputs.$userLoggedIn,c.O.outputs.$isInitialUserDataReceived],filter:qr,fn:()=>({source:Dt.Search}),target:Zs.inputs.trackSubscriptionEntryPointShow}],or:{sid:"-gtwz6o"}});const zr={ONE_WAY:{id:"40474942",actual:!0,notification_required:!0,ticket_subscriptions_notification_required:!0,new_price_received:!1,trip_class:Js.s.Economy,adults:1,children:0,infants:0,flexibility:0,max_price:null,max_flight_duration:null,max_stops:null,baggage:!1,convenient:!1,brand:"AS",segments:[{origin_city:"MOW",origin_airport:null,destination_city:"PAR",destination_airport:null,date:"2022-08-19"}],notified_at:"2022-08-18T10:06:51+00:00",price:{value:55674,delta:3527,updated_at:"2022-08-18T11:52:34+00:00",sign:null,ticket_segments_key:null},history_prices:[],search_info:{segments:[{origin:"MOW",destination:"PAR",date:"2022-08-19"}]},created_at:"2022-08-05T14:33:51+00:00",updated_at:"2022-08-18T11:52:34+00:00"},ROUND_TRIP:{id:"40804234",actual:!0,notification_required:!0,ticket_subscriptions_notification_required:!0,new_price_received:!1,trip_class:Js.s.Economy,adults:1,children:0,infants:0,flexibility:0,max_price:null,max_flight_duration:null,max_stops:null,baggage:!1,convenient:!1,brand:"AS",segments:[{origin_city:"MOW",origin_airport:null,destination_city:"LED",destination_airport:null,date:"2022-09-24"},{origin_city:"LED",origin_airport:null,destination_city:"MOW",destination_airport:null,date:"2022-09-29"}],notified_at:null,price:{value:6820,delta:0,updated_at:"2022-08-18T12:29:44+00:00",sign:null,ticket_segments_key:null},history_prices:[],search_info:{segments:[{origin:"MOW",destination:"LED",date:"2022-09-24"},{origin:"LED",destination:"MOW",date:"2022-09-29"}]},created_at:"2022-08-18T12:29:45+00:00",updated_at:"2022-08-18T12:29:45+00:00"}},Zr={ONE_WAY:{actual:!0,id:"32576599",validating_carrier:"AA",charter:!1,baggage:!1,notified_at:null,trip_class:Js.s.Economy,adults:1,children:0,infants:0,brand:"AS",direction_segments:[{origin_city:"ACT",origin_airport:"ACT",destination_city:"NYC",destination_airport:"LGA",date:"2023-02-10"}],price:{value:17887,delta:0,updated_at:"2022-08-18T09:11:56+00:00"},segments:[{flights:[{arrival:"DFW",departure:"ACT",arrival_date:"2023-02-10",departure_date:"2023-02-10",arrival_time:"13:35",departure_time:"12:55",local_arrival_timestamp:1676036100,local_departure_timestamp:1676033700,number:"3091",operating_carrier:"AA",duration:40,technical_stops:[],lowcost:!1,equipment:"",delay:0,is_bus:!1,is_train:!1,is_boat:!1,is_helicopter:!1},{arrival:"LGA",departure:"DFW",arrival_date:"2023-02-10",departure_date:"2023-02-10",arrival_time:"18:40",departure_time:"14:25",local_arrival_timestamp:1676054400,local_departure_timestamp:1676039100,number:"1105",operating_carrier:"AA",duration:195,technical_stops:[],lowcost:!1,equipment:"738",delay:50,is_bus:!1,is_train:!1,is_boat:!1,is_helicopter:!1}],transfers:[{visa_rules:{required:!1},recheck_baggage:!1}]}],created_at:"2022-08-18T09:11:56+00:00",updated_at:"2022-08-18T09:11:56+00:00",sign:"a7e42c5bdbd1ad9ab175e7bff917ad7e",possibly_outdated:!1},ROUND_TRIP:{actual:!0,id:"32336353",validating_carrier:"TK",charter:!1,baggage:!1,notified_at:null,trip_class:Js.s.Economy,adults:1,children:0,infants:0,brand:"AS",direction_segments:[{origin_city:"MOW",origin_airport:"VKO",destination_city:"PMI",destination_airport:"PMI",date:"2022-09-14"},{origin_city:"PMI",origin_airport:"PMI",destination_city:"MOW",destination_airport:"VKO",date:"2022-10-03"}],price:{value:55129,delta:0,updated_at:"2022-08-05T09:50:04+00:00"},segments:[{flights:[{arrival:"ESB",departure:"VKO",arrival_date:"2022-09-14",departure_date:"2022-09-14",arrival_time:"08:25",departure_time:"04:05",local_arrival_timestamp:1663143900,local_departure_timestamp:1663128300,number:"7699",operating_carrier:"TK",duration:260,technical_stops:[],lowcost:!1,equipment:"73H",delay:0,is_bus:!1,is_train:!1,is_boat:!1,is_helicopter:!1},{arrival:"CGN",departure:"ESB",arrival_date:"2022-09-14",departure_date:"2022-09-14",arrival_time:"14:50",departure_time:"12:00",local_arrival_timestamp:1663167e3,local_departure_timestamp:1663156800,number:"7930",operating_carrier:"TK",duration:230,technical_stops:[],lowcost:!1,equipment:"7M8",delay:215,is_bus:!1,is_train:!1,is_boat:!1,is_helicopter:!1},{arrival:"PMI",departure:"CGN",arrival_date:"2022-09-14",departure_date:"2022-09-14",arrival_time:"23:45",departure_time:"21:30",local_arrival_timestamp:1663199100,local_departure_timestamp:1663191e3,number:"7212",operating_carrier:"FR",duration:135,technical_stops:[],lowcost:!1,equipment:"73H",delay:400,is_bus:!1,is_train:!1,is_boat:!1,is_helicopter:!1}],transfers:[{visa_rules:{required:!1},recheck_baggage:!1},{visa_rules:{required:!1},recheck_baggage:!0}]},{flights:[{arrival:"BCN",departure:"PMI",arrival_date:"2022-10-03",departure_date:"2022-10-03",arrival_time:"18:45",departure_time:"17:50",local_arrival_timestamp:1664822700,local_departure_timestamp:1664819400,number:"3923",operating_carrier:"VY",duration:55,technical_stops:[],lowcost:!1,equipment:"32A",delay:0,is_bus:!1,is_train:!1,is_boat:!1,is_helicopter:!1},{arrival:"BVA",departure:"BCN",arrival_date:"2022-10-04",departure_date:"2022-10-04",arrival_time:"08:20",departure_time:"06:30",local_arrival_timestamp:1664871600,local_departure_timestamp:1664865e3,number:"6374",operating_carrier:"FR",duration:110,technical_stops:[],lowcost:!1,equipment:"73H",delay:705,is_bus:!1,is_train:!1,is_boat:!1,is_helicopter:!1},{arrival:"ESB",departure:"CDG",arrival_date:"2022-10-04",departure_date:"2022-10-04",arrival_time:"18:10",departure_time:"13:15",local_arrival_timestamp:1664907e3,local_departure_timestamp:1664889300,number:"7767",operating_carrier:"TK",duration:235,technical_stops:[],lowcost:!1,equipment:"73H",delay:295,is_bus:!1,is_train:!1,is_boat:!1,is_helicopter:!1},{arrival:"VKO",departure:"ESB",arrival_date:"2022-10-05",departure_date:"2022-10-04",arrival_time:"03:10",departure_time:"22:40",local_arrival_timestamp:1664939400,local_departure_timestamp:1664923200,number:"7698",operating_carrier:"TK",duration:270,technical_stops:[],lowcost:!1,equipment:"73H",delay:270,is_bus:!1,is_train:!1,is_boat:!1,is_helicopter:!1}],transfers:[{visa_rules:{required:!1},recheck_baggage:!0},{visa_rules:{required:!1},recheck_baggage:!0},{visa_rules:{required:!1},recheck_baggage:!1}]}],created_at:"2022-08-05T09:50:04+00:00",updated_at:"2022-08-05T09:50:04+00:00",sign:"87a28e947aeb44d72a1ea78eff4e121d",possibly_outdated:!0}},Ur=(Object.values({ONE_MONTH:{id:"154357",one_way:!0,baggage:!1,brand:"AS",origin:{code:"ACT",type:"city"},max_price:null,max_flight_duration:null,max_stops:null,destination:{code:"NYC",type:"city"},months:[{code:"october"}],price:{value:17887,delta:0,updated_at:"2022-08-18T09:12:33+00:00",sign:null,ticket_segments_key:null},actual_until:"2022-10-31T23:59:59+00:00",actual:!0,created_at:"2022-08-18T09:12:34+00:00",updated_at:"2022-08-18T09:12:34+00:00"},THREE_MONTHS:{id:"154359",one_way:!0,baggage:!1,brand:"AS",origin:{code:"ACT",type:"city"},max_price:null,max_flight_duration:null,max_stops:null,destination:{code:"NYC",type:"city"},months:[{code:"december"},{code:"february"},{code:"january"}],price:{value:17887,delta:0,updated_at:"2022-08-18T09:12:59+00:00",sign:null,ticket_segments_key:null},actual_until:"2023-02-28T23:59:59+00:00",actual:!0,created_at:"2022-08-18T09:12:59+00:00",updated_at:"2022-08-18T09:12:59+00:00"},FIVE_MONTHS:{id:"154360",one_way:!0,baggage:!1,brand:"AS",origin:{code:"ACT",type:"city"},max_price:null,max_flight_duration:null,max_stops:null,destination:{code:"NYC",type:"city"},months:[{code:"april"},{code:"december"},{code:"january"},{code:"july"},{code:"march"}],price:{value:17887,delta:0,updated_at:"2022-08-18T09:13:10+00:00",sign:null,ticket_segments_key:null},actual_until:"2023-07-31T23:59:59+00:00",actual:!0,created_at:"2022-08-18T09:13:10+00:00",updated_at:"2022-08-18T09:13:10+00:00"},WITH_DURATION_RANGE:{id:"154361",one_way:!0,baggage:!1,brand:"AS",origin:{code:"ACT",type:"city"},max_price:null,max_flight_duration:null,max_stops:null,destination:{code:"NYC",type:"city"},months:[{code:"march"}],durations_range:{min_days:1,max_days:14},price:{value:17887,delta:0,updated_at:"2022-08-18T09:13:10+00:00",sign:null,ticket_segments_key:null},actual_until:"2023-07-31T23:59:59+00:00",actual:!0,created_at:"2022-08-18T09:13:10+00:00",updated_at:"2022-08-18T09:13:10+00:00"},OUTDATED_WITH_DURATION_RANGE:{id:"154360",one_way:!0,baggage:!1,brand:"AS",origin:{code:"ACT",type:"city"},max_price:null,max_flight_duration:null,max_stops:null,destination:{code:"NYC",type:"city"},months:[{code:"march"}],durations_range:{min_days:1,max_days:14},price:{value:17887,delta:0,updated_at:"2022-08-18T09:13:10+00:00",sign:null,ticket_segments_key:null},actual_until:"2023-07-31T23:59:59+00:00",actual:!1,created_at:"2022-08-18T09:13:10+00:00",updated_at:"2022-08-18T09:13:10+00:00"}}),Object.values(zr),Object.values(Zr),(0,Ns.G6)({lifecycle:{start:gi.subscriptionsServiceStarted},importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/usercom/services/subscriptions/index.ts",api:{inputs:{...fi,...ki.inputs,...Zs.inputs,...ut.inputs,...Cs.inputs},outputs:{...gi,...ut.outputs,...Cs.outputs,...Hs,flag:Gs},containers:Or}}))},92021:function(e,t,i){"use strict";let s,r,a;i.d(t,{tJ:function(){return r},Ou:function(){return s},oF:function(){return a}}),function(e){e.Direction="direction",e.Flexible="flexible",e.Ticket="ticket"}(s||(s={})),function(e){e.Comma=", ",e.Ellipsis="",e.None=""}(r||(r={})),function(e){e.Applied="applied",e.Pending="pending",e.NonApplied="nonApplied"}(a||(a={}))},52262:function(e,t,i){"use strict";var s=i(82109),r=i(47908),a=i(26244),n=i(19303),o=i(51223);s({target:"Array",proto:!0},{at:function(e){var t=r(this),i=a(t),s=n(e),o=s>=0?s:i+s;return o<0||o>=i?void 0:t[o]}}),o("at")},24506:function(e,t,i){"use strict";var s=i(82109),r=i(1702),a=i(84488),n=i(19303),o=i(41340),c=i(47293),l=r("".charAt);s({target:"String",proto:!0,forced:c((function(){return"\ud842"!=="".at(-2)}))},{at:function(e){var t=o(a(this)),i=t.length,s=n(e),r=s>=0?s:i+s;return r<0||r>=i?void 0:l(t,r)}})},3151:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});var s=i(69119),r=i(13882);function a(e,t){(0,r.Z)(2,arguments);var i=(0,s.Z)(e),a=(0,s.Z)(t);return i.getTime()===a.getTime()}},78565:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e,i){return null!=e&&t.call(e,i)}},67762:function(e){e.exports=function(e,t){for(var i,s=-1,r=e.length;++s<r;){var a=t(e[s]);void 0!==a&&(i=void 0===i?a:i+a)}return i}},74636:function(e,t,i){var s=i(92822)("has",i(18721));s.placeholder=i(69306),e.exports=s},49546:function(e,t,i){var s=i(92822)("isNumber",i(81763),i(69087));s.placeholder=i(69306),e.exports=s},56580:function(e,t,i){var s=i(92822)("memoize",i(88306));s.placeholder=i(69306),e.exports=s},37667:function(e,t,i){var s=i(92822)("sumBy",i(73303));s.placeholder=i(69306),e.exports=s},18721:function(e,t,i){var s=i(78565),r=i(222);e.exports=function(e,t){return null!=e&&r(e,t,s)}},73303:function(e,t,i){var s=i(67206),r=i(67762);e.exports=function(e,t){return e&&e.length?r(e,s(t,2)):0}},74663:function(e,t,i){"use strict";function s(e,t,i,s,r=!0){if(t===i)return{value:e,currency:t};let a=e/s[i];return r&&(a=Math.round(a)),{value:a,currency:i}}i.d(t,{z:function(){return s}})},69430:function(e,t,i){"use strict";i.d(t,{C:function(){return n}});var s=i(85893),r=i(67294);const a=({className:e,...t},i)=>(0,s.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:i,style:{display:"inline-block"},...t,children:(0,s.jsx)("path",{d:"M10.049 4.058a2 2 0 0 1 3.902 0A4.801 4.801 0 0 1 18 8.8v4.075l.47.265A3 3 0 0 1 20 15.754V17H4v-1.245a3 3 0 0 1 1.53-2.615l.47-.265V8.8a4.801 4.801 0 0 1 4.049-4.742ZM9.5 19a2.5 2.5 0 0 0 4.9 0H9.5Z"})}),n=(0,r.memo)((0,r.forwardRef)(a));n.displayName="Icon24ControlsBell"},23075:function(e,t,i){"use strict";i.d(t,{a:function(){return n}});var s=i(85893),r=i(67294);const a=({className:e,...t},i)=>(0,s.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:i,style:{display:"inline-block"},...t,children:(0,s.jsx)("path",{d:"M20 12c-.007-.805-1.136-1.389-2.492-1.389h-2.86c-.398 0-.547-.062-.781-.323l-4.77-5.04A.712.712 0 0 0 8.55 5h-.823c-.185 0-.291.158-.2.35l2.457 5.261-3.606.399-1.285-2.283c-.092-.172-.248-.248-.483-.248h-.305c-.184 0-.305.117-.305.296v6.45c0 .179.12.289.305.289h.305c.235 0 .39-.076.483-.24l1.285-2.284 3.606.399-2.456 5.26c-.092.186.014.351.199.351h.823c.213 0 .398-.09.547-.247l4.77-5.048c.234-.254.383-.316.78-.316h2.861c1.356 0 2.485-.591 2.492-1.389Z"})}),n=(0,r.memo)((0,r.forwardRef)(a));n.displayName="Icon24TransportAirport"},66149:function(e,t,i){"use strict";i.d(t,{Ek:function(){return o},DR:function(){return l}});var s=i(28225),r=i(67294),a=i(98681);const n=e=>{const t=Math.floor(e/60/24),i={days:t,hours:Math.floor(e/60-24*t),minutes:e%60},s=Math.floor(e/60);return 24===s&&(i.hours=s,i.days=0),i};var o;!function(e){e.Short="short",e.Full="full",e.RoundShort="round_short"}(o||(o={}));const c={[o.Short]:{day:"common.dateTime.withValues.durationShort.d",hour:"common.dateTime.withValues.durationShort.h",minute:"common.dateTime.withValues.durationShort.m"},[o.Full]:{day:"common.dateTime.withValues.durationFull.d",hour:"common.dateTime.withValues.durationFull.h",minute:"common.dateTime.withValues.durationFull.m"},[o.RoundShort]:{day:"",hour:"common.dateTime.withValues.durationRound.h",minute:"common.dateTime.withValues.durationRound.m"}},l=({durationMinutes:e,type:t=o.Short,removeMinutesZeros:i})=>{const{t:l,i18n:{language:u}}=(0,s.useTranslation)("uiKit");return(0,r.useMemo)((()=>(({durationMinutes:e,t:t,type:i=o.Short,removeMinutesZeros:s,language:r})=>{if(i===o.Short&&e<60)return t("common.dateTime.withValues.durationShortLong.m",{minutes:e});const{days:l,hours:u,minutes:d}=((e,t)=>{switch(t){case o.Full:case o.Short:return n(e);case o.RoundShort:return(e=>{const t={minutes:0,hours:0,days:0};if(e<60)return t.minutes=e,t;if(e<90)return t.hours=1,t;if(e<106)return t.hours=1.5,t;const i=e%60,s=Math.floor(e/60);return s>=8?(t.hours=Math.round(e/60),t):i>45?(t.hours=s+1,t):i<16?(t.hours=s,t):(t.hours=s+.5,t)})(e);default:return n(e)}})(e,i),p=c[i];let m="";if(l>0&&(m+=` ${t(p.day,{days:l})}`),u>0){const e=(0,a.yX)(u,r);m+=` ${t(p.hour,{hours:e})}`}if(s&&0===d)return m;switch(i){case o.Full:d>0&&(m+=` ${t(p.minute,{minutes:d})}`);break;case o.Short:m+=` ${t(p.minute,{minutes:(f=d,0===f?"00":f<10?`0${f}`:f)})}`;break;case o.RoundShort:m+=` ${t(p.minute,{minutes:d})}`}var f;return m})({durationMinutes:e,type:t,t:l,removeMinutesZeros:i,language:u})),[e,l,t,i,u])}}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/shared-a9019ecd85dafeecd4c13370abef6da01d4eb480.99105207d4d1eaeaaa7b.min.js.map