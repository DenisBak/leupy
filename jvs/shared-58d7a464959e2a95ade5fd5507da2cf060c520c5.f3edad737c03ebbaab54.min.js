"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[63112],{57790:function(e,t,r){r.d(t,{o:function(){return _}});var s=r(98116),i=r(47047),n=r(15863),a=r(42177),o=r(63246),c=r(4119),l=r(54428),d=r(24991),u=r(86042);const{$featuredOfferId:p,findOfferId:h,offersListReceived:m,$selectedOfferId:k}=d.C.outputs,{offerSelected:g}=d.C.inputs,{turnOn:f,turnOff:b,$enabled:x}=(0,s.withFactory)({sid:"-w3m7re",fn:()=>(0,i.d)(n.qs,!1)});(0,s.sample)({and:[{clock:a.X.inputs.entryPointInteracted,target:f}],or:{sid:"lrsdps"}}),(0,s.sample)({and:[{clock:b,target:a.X.inputs.resetEntryPoint}],or:{sid:"m7qex9"}}),(0,s.sample)({and:[{clock:f,filter:o.y.outputs.$isClient,fn:()=>({title:c.bW.MoreProductLanding}),target:u.A.inputs.sendUxFeedback}],or:{sid:"mahdw2"}}),(0,s.sample)({and:[{clock:l.O.outputs.loggedIn,filter:x,target:d.C.inputs.launch}],or:{sid:"n469xk"}}),(0,s.sample)({and:[{clock:m,source:{selectedOfferId:k,featuredOfferId:p},filter:x,fn:({selectedOfferId:e,featuredOfferId:t},r)=>h(e,t,r),target:g}],or:{sid:"nlrox4"}});const _={inputs:{showInproductPurchase:f,hideInproductPurchase:b},outputs:{$isInproductPurchaseVisible:x}}},21187:function(e,t,r){r.d(t,{b:function(){return $}});var s=r(30091),i=r(45997),n=r(98116),a=r(72675),o=r(38032),c=r(85349),l=r(47047),d=r(63246),u=r(15863),p=r(83781);const h=(0,p.V6)((0,p.ZE)("service/helios/assisted/open_gate_popup")),{$isClient:m}=d.y.outputs,{createFeedback:k,createDidYouBuyTicketFeedback:g,hideSuccessPopup:f}=i.M.outputs,b=(0,n.createStore)({clickId:null,searchId:null,gateId:null},{sid:"2w27zk"}),x=(0,n.createEvent)({sid:"pcfu8k"}),_=(0,n.createEvent)({sid:"590uh"}),w=(0,n.withFactory)({sid:"-ee0nva",fn:()=>(0,l.d)(g,{context:"serp_did_you_buy_ticket",start:_,$analyticsData:b})}),{questionAnswered:y}=w.outputs,{hideFeedback:v,showFeedback:C,manuallyHideFeedback:S}=w.inputs,E=y.map((({payload:e})=>({context:e.context}))),T=(0,n.withFactory)({sid:"-bsr47k",fn:()=>(0,l.d)(k,{start:E,$analyticsData:b})}),{hideFeedback:D,showFeedback:j,manuallyHideFeedback:P}=T.main.inputs,{$enabled:N,turnOn:L,turnOff:I}=((0,n.merge)([v,D],{sid:"4y88qh"}),(0,n.withFactory)({sid:"j2xope",fn:()=>(0,l.d)(u.qs,!1)})),{$enabled:F,turnOn:M}=(0,n.withFactory)({sid:"j4l2fr",fn:()=>(0,l.d)(u.qs,!1)}),O=(0,n.createEffect)((()=>{const e=(0,n.scopeBind)(x);void 0!==window&&window.addEventListener("message",(t=>{const{data:r,origin:s}=t,i=r?.str_click_id;s===window.location.origin&&i&&e(i)}))}),{sid:"lsiyib"});(0,n.sample)({and:[{clock:h,target:b}],or:{sid:"-b308xg"}}),(0,n.sample)({and:[{clock:h,filter:(0,n.withFactory)({sid:"-qs6pyg",fn:()=>(0,a.x)(m,(0,n.withFactory)({sid:"-f0j41o",fn:()=>(0,o.f)(F)}))}),target:[O,M]}],or:{sid:"-an27pz"}}),(0,n.withFactory)({sid:"-a6kdx5",fn:()=>(0,c.m)({clock:D,target:b})}),(0,n.sample)({and:[{clock:x,source:b,fn:(e,t)=>({...e,clickId:t}),target:[b,_]}],or:{sid:"-a1m8kw"}}),(0,n.sample)({and:[{clock:[C,j],target:L}],or:{sid:"-9m7zys"}}),(0,n.sample)({and:[{clock:[S,P,f],target:I}],or:{sid:"-97xcje"}});var R=r(85893);const{FeedbackContainer:U,DidYouBuyTicketContainer:B}=i.M.containers,$=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/px_feedback/services/gate_feedback/index.ts",api:{containers:{GateFeedbackContainer:()=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(B,{model:w}),(0,R.jsx)(U,{model:T})]})},outputs:{$isGateFeedbackVisible:N}}})},30871:function(e,t,r){r.d(t,{p:function(){return I}});var s=r(98116),i=r(30040),n=r(74423),a=r.n(n),o=r(94547),c=r(10924),l=r(68621),d=r(42177),u=r(4517);const p=(0,s.createDomain)("cashback_informer",{sid:"-vyeptd"}),{forwardToAnalytics:h}=c.I.inputs,m=(0,o.Yu)("informerSuspensionTime",{adapter:o.j$.number()}),k=p.createEffect((()=>{const e=Date.now();return m.write(e),e}),{sid:"qb761m"}),g=p.createEvent({sid:"p84923"}),f=p.createEvent({sid:"u35tf7"}),b=p.createEvent({sid:"8os9vq"}),x=l.b.outputs.$isAnyPremiumActive.map(Boolean),_=p.createStore(m.read(),{sid:"jgcakv"}),w=(0,s.combine)({and:[{informerCloseTimestamp:_,aviaCashbackFlag:u.r.outputs.$aviaCashbackFlag},({informerCloseTimestamp:e,aviaCashbackFlag:t})=>{const{informerSuspensionTime:r}=t;return null===e||Date.now()-e>=1e3*r}],or:{sid:"-ruf0an"}}),y=(0,s.combine)({and:[{isSuspensionTimeEnded:w,aviaCashbackFlag:u.r.outputs.$aviaCashbackFlag,hasPremiumSubscription:x},({isSuspensionTimeEnded:e,aviaCashbackFlag:t,hasPremiumSubscription:r})=>{const{informerPlacements:s,enabled:i}=t;return i&&e&&!r?s:[]}],or:{sid:"1qobw8"}});(0,s.sample)({and:[{clock:b,filter:e=>Boolean(a()(["informer",e],d.X.config.premiumCashbackPayloadLookup)),fn:e=>a()(["informer",e],d.X.config.premiumCashbackPayloadLookup),target:d.X.inputs.entryPointInteracted}],or:{sid:"uq32iw"}}),(0,s.sample)({and:[{clock:g,target:k}],or:{sid:"-h9h9vi"}}),(0,s.sample)({and:[{clock:k.doneData,target:_}],or:{sid:"-h6qawp"}}),h({from:f.map((e=>({source:e}))),data:{category:"search",label:"cashback_prop",action:"showed",service:i.t6.Serp},payload:{pageName:"serp",userEvent:!1,source:null}});const v={analyticsSent:f,premiumLandingShown:b,informerClosed:g},C={$visiblePlacements:y},S={inputs:v,outputs:C};r(26699);var E=r(67294),T=r(4190),D=r(97650),j=r(79403),P=r(4275),N=r(31401),L=r(85893);const I={containers:{CashbackInformerContainer:({placement:e,cashback:t,className:r})=>{const[s,i]=(0,E.useState)(!1),{brand:n,visiblePlacements:a,analyticsSentEvent:o,premiumLandingShownEvent:c,informerClosedEvent:l}=(0,T.useUnit)({brand:j.U.outputs.$brand,visiblePlacements:S.outputs.$visiblePlacements,analyticsSentEvent:S.inputs.analyticsSent,premiumLandingShownEvent:S.inputs.premiumLandingShown,informerClosedEvent:S.inputs.informerClosed}),[d,u]=(0,D.YD)({delay:1e3,threshold:1,triggerOnce:!0}),p=a.includes(e)&&!s;(0,E.useEffect)((()=>{u&&o(e)}),[u,o,e]);const h=(0,E.useCallback)((()=>{c(e)}),[e,c]),m=(0,E.useCallback)((()=>{l(),i(!0)}),[l]),k=(0,E.useMemo)((()=>({[N.g_.Ticket]:(0,L.jsx)(P.i2,{handleCloseClick:m,handleActionClick:h,cashback:t,variant:n}),[N.g_.Proposals]:(0,L.jsx)(P.EE,{handleActionClick:h,variant:n}),[N.g_.Results]:(0,L.jsx)(P.GT,{handleCloseClick:m,handleActionClick:h,variant:n}),[N.g_.Autosearch]:(0,L.jsx)(P.F4,{handleCloseClick:m,handleActionClick:h,variant:n}),[N.g_.BottomDrawer]:(0,L.jsx)(P.Gt,{handleActionClick:h,variant:n})}[e])),[e,t,m,h,n]);return p?(0,L.jsx)("div",{ref:d,className:r,children:k}):null}},inputs:v,outputs:C}},63308:function(e,t,r){r.d(t,{B:function(){return v}});var s=r(30091),i=r(98116),n=r(2568),a=r.n(n),o=r(17563),c=r(77313),l=r(27497),d=r(52112),u=r(28258);const p=(0,i.createDomain)("booking_redirect",{sid:"-x3sy70"}),h=p.createEvent({sid:"-iy3020"}),m=p.createEvent({sid:"-hnmq66"}),k=p.createEvent({sid:"o6e4nv"}),g=p.createEvent({sid:"-yds2z1"}),f=(0,i.createEffect)((({deeplink:e,deviceClickId:t})=>{const r=o.stringifyUrl({url:e,query:{device_click_id:t}});window.open(r,"_blank")}),{sid:"-70bxre"});(0,i.sample)({and:[{clock:h,source:{debugSettings:c.a.outputs.$debugSettings,isSearchExpired:l.N.outputs.$isSearchExpired},filter:({debugSettings:e},{event:t})=>Boolean(t.shiftKey&&e?.gateErrors),fn:(e,{proposalData:t})=>t.id,target:k}],or:{sid:"b2v0bg"}}),(0,i.sample)({and:[{clock:h,source:{isSearchExpired:l.N.outputs.$isSearchExpired,debugSettings:c.a.outputs.$debugSettings},filter:({isSearchExpired:e,debugSettings:t},{event:r})=>{const s=r.shiftKey&&t?.gateErrors;return e&&!s},target:m}],or:{sid:"by7a51"}}),(0,i.sample)({and:[{clock:h,source:{proposalCollection:d.o.outputs.$proposalCollection,searchSession:u.E.outputs.$searchSession,isSearchExpired:l.N.outputs.$isSearchExpired,debugSettings:c.a.outputs.$debugSettings},filter:({isSearchExpired:e,debugSettings:t},{event:r,ticketSign:s})=>{const i=r.shiftKey&&t?.gateErrors;return null!==s&&!e&&!i},fn:({proposalCollection:e,searchSession:t},{proposalData:r,event:s,ticketSign:i})=>{const n=i,o=t?.searchId,c=e[r.id],l=a()(o+n+Date.now());return{event:s,data:{proposal:{...c,deeplink:r.deeplink},eventType:r.source,ticketSign:n,proposalPosition:r.position,deviceClickId:l,skipRedirectEvent:!0,zone:r.zone}}},target:g}],or:{sid:"cj3gor"}}),(0,i.sample)({and:[{clock:g,fn:({data:e})=>{const{proposal:t,deviceClickId:r}=e;return{deeplink:t.deeplink,deviceClickId:r}},target:f}],or:{sid:"-6to08"}});const b={outputs:{handleUpdateResults:m,proposalDebugClicked:k,ticketBuyRedirected:g},inputs:{bookingClicked:h}};var x=r(23588);const{outputs:_}=b;(0,i.sample)({and:[{clock:_.handleUpdateResults,target:x.z.inputs.updateResultsFx}],or:{sid:"fri9r3"}}),(0,i.sample)({and:[{clock:_.ticketBuyRedirected,target:x.z.inputs.ticketBuyClickedFx}],or:{sid:"-c6taxt"}});const{outputs:w,inputs:y}=b,v=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp_ticket/services/booking_redirect/index.ts",api:{inputs:y,outputs:w}})},39102:function(e,t,r){r.d(t,{r:function(){return v}});var s=r(30091),i=r(67294),n=r(28225),a=r(4190),o=r(49963),c=r(44619),l=r(38694),d=r(30367),u=r(68621),p=r(98116),h=r(74423),m=r.n(h),k=r(42177),g=r(4517);const f=(0,p.createDomain)("cashback_label",{sid:"qdbb39"}).createEvent({sid:"-33pu8a"}),b=g.r.outputs.$aviaCashbackFlag.map((e=>e.enabled));(0,p.sample)({and:[{clock:f,filter:e=>Boolean(m()(["title",e],k.X.config.premiumCashbackPayloadLookup)),fn:e=>m()(["title",e],k.X.config.premiumCashbackPayloadLookup),target:k.X.inputs.entryPointInteracted}],or:{sid:"pxetz7"}});const x={premiumLandingShown:f},_={$isVisible:b};var w=r(85893);const y=(0,i.memo)((({price:e,currency:t,isCashbackAvailable:r=!1})=>{(0,n.useTranslation)("component_serp_cashback");const s=r?"cashbackBoldPrice":"cashback";return(0,w.jsx)(n.Trans,{ns:"component_serp_cashback",i18nKey:s,components:{b:(0,w.jsx)(o.x,{tag:"span",type:c.y.Body3Semi}),value:(0,w.jsx)(l.t,{currency:t,roundingMode:"floor",value:e})}})}));y.displayName="CashbackLabelText";const v=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp_ticket/services/cashback_label/index.ts",api:{containers:{CashbackLabelContainer:({className:e,cashback:t,placement:r})=>{const{isAnyPremiumActive:s,isVisible:n,premiumLandingShown:o}=(0,a.useUnit)({isAnyPremiumActive:u.b.outputs.$isAnyPremiumActive,isVisible:_.$isVisible,premiumLandingShown:x.premiumLandingShown}),c=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),o(r)}),[o,r]);if(!n)return null;const{value:l,currency:p}=t,h=s?void 0:c;return(0,w.jsx)(d.C,{className:e,isLocked:!s,onClick:h,children:(0,w.jsx)(y,{price:l,currency:p,isCashbackAvailable:s})})}}}})},65454:function(e,t,r){r.d(t,{FH:function(){return b},FU:function(){return g},_1:function(){return f}});var s=r(98116),i=r(4517),n=r(27497);const a=(0,s.createDomain)("different_carriers",{sid:"-eo1m9q"}),o=a.createEvent({sid:"-8wrpit"}),c=(0,s.createEvent)({sid:"-al8mbh"}),l=a.createEvent({sid:"2oyouy"}),d=(0,s.createStore)(!1,{sid:"bnngm2"}).on(c,(()=>!0)).reset(l),u=(0,s.createStore)(null,{sid:"43cifr"}).on(c,((e,t)=>t)).reset(l),p=a.createStore(null,{sid:"olr837"}).on(o,((e,t)=>t)).reset(l),h=p.map(Boolean),m=(0,s.combine)({and:[h,d,(e,t)=>e||t],or:{sid:"-hgxnpe"}});(0,s.sample)({and:[{clock:n.N.outputs.searchExpired,fn:()=>!1,target:d}],or:{sid:"-xx41i8"}});const k=i.r.outputs.$bletFlightInfoFlag.map((({enabled:e})=>e)),g={contentDataUpdated:o,popupClosed:l,differentCarriersPopupOpened:c},f={$contentData:p,$isVisible:m,$isBletFlightInfoFlagEnabled:k,$airlineInformer:u},b={inputs:g,outputs:f}},34747:function(e,t,r){r.d(t,{y:function(){return k}});var s=r(98116),i=r(13009),n=r(4449),a=r(94825),o=r(68557);(0,s.sample)({and:[{clock:o.d.outputs.chunksLoaded,filter:a._.$isDirectTicketsScheduleV3Enabled,fn:({data:e})=>e?.search?.ticket?.directFlightsSchedule??null,target:a.F.directScheduleUpdated}],or:{sid:"c80ecx"}}),(0,s.sample)({and:[{clock:i.O.inputs.shouldOpenTicketModal,filter:e=>Boolean(e.cheapestTicketSign),fn:({cheapestTicketSign:e})=>e,target:a.F.selectedTicketSignUpdated}],or:{sid:"cbuyig"}}),(0,s.sample)({and:[{clock:i.O.inputs.shouldOpenTicketModal,filter:e=>2===e.version,fn:({groupKey:e})=>e,target:o.d.inputs.currentGroupKeyUpdated}],or:{sid:"cr974k"}}),(0,s.sample)({and:[{clock:a._.$requiredTicketLoading,target:o.d.inputs.requiredTicketFromDirectScheduleFetchUpdated}],or:{sid:"d778c1"}}),(0,s.sample)({and:[{clock:a.F.unavailableTicketAccepted,fn:()=>"direct_schedule",target:n.X.inputs.ticketChangeHandlerSourceUpdated}],or:{sid:"dn59ji"}});var c=r(72675),l=r(21247),d=r(23588),u=r(72264),p=r(28258);(0,s.sample)({and:[{clock:a.F.directScheduleUpdated,target:d.z.inputs.ticketDirectScheduleUpdatedFx}],or:{sid:"t0vqdd"}}),(0,s.sample)({and:[{clock:a.F.directScheduleDataReset,fn:()=>null,target:d.z.inputs.ticketDirectScheduleUpdatedFx}],or:{sid:"t3mpc6"}}),(0,s.sample)({and:[{clock:p.E.outputs.chunksLoaded,source:a._.$selectedTicketSign,filter:(0,s.withFactory)({sid:"6lty33",fn:()=>(0,c.x)(a._.$selectedTicketSign,a._.$isDirectTicketsScheduleV3Enabled,a._.$requiredTicketLoading)}),target:d.z.inputs.directScheduleTicketUpdatedFx}],or:{sid:"tih5cx"}}),(0,s.sample)({and:[{clock:d.z.outputs.directScheduleTicketClicked,filter:a._.$isDirectTicketsScheduleV3Enabled,target:a.F.selectedTicketSignUpdated}],or:{sid:"u02kch"}}),(0,s.sample)({and:[{clock:a.F.selectedTicketSignUpdated,source:{isDirectTicketsScheduleV3Enabled:a._.$isDirectTicketsScheduleV3Enabled,selectedDirectFlight:i.O.outputs.$selectedDirectFlight},filter:({isDirectTicketsScheduleV3Enabled:e,selectedDirectFlight:t},r)=>e&&!(t?.cheapestTicketSign===r),fn:(e,t)=>({requiredTicketsAdded:{tickets:[t],forceUpdate:!0},requiredTicketFetchUpdated:!0}),target:(0,s.withFactory)({sid:"cvkut4",fn:()=>(0,l.h)({requiredTicketsAdded:u.L.inputs.requiredTicketsAdded,requiredTicketFetchUpdated:a.F.requiredTicketFetchUpdated})})}],or:{sid:"uex0d8"}}),(0,s.sample)({and:[{clock:a.F.selectedTicketSignUpdated,source:{isDirectTicketsScheduleV3Enabled:a._.$isDirectTicketsScheduleV3Enabled,selectedDirectFlight:i.O.outputs.$selectedDirectFlight},filter:({isDirectTicketsScheduleV3Enabled:e,selectedDirectFlight:t},r)=>e&&t?.cheapestTicketSign===r,fn:(e,t)=>t,target:d.z.inputs.directScheduleTicketUpdatedFx}],or:{sid:"venmxp"}}),(0,s.sample)({and:[{clock:i.O.inputs.shouldOpenTicketModal,filter:a._.$isDirectTicketsScheduleV3Enabled,fn:e=>e.cheapestTicketSign,target:d.z.inputs.directScheduleTicketUpdatedFx}],or:{sid:"wb3hy0"}}),(0,s.sample)({and:[{clock:[d.z.outputs.ticketPopupClosed,d.z.outputs.resetSearchResultsPage],filter:a._.$isDirectTicketsScheduleV3Enabled,target:[a.F.directScheduleDataReset,u.L.inputs.requiredTicketsReset]}],or:{sid:"wey23j"}}),(0,s.sample)({and:[{source:d.z.outputs.directScheduleTicketUnavailableClicked,filter:a._.$isDirectTicketsScheduleV3Enabled,target:a.F.selectedUnavailableTicketSignUpdated}],or:{sid:"wx39og"}}),(0,s.sample)({and:[{clock:d.z.outputs.directScheduleTicketClicked,fn:()=>"direct_schedule",target:n.X.inputs.ticketChangeHandlerSourceUpdated}],or:{sid:"-oefev9"}});var h=r(30091);const m={UnavailableTimeDialogContainer:r(85089).Q},k=(0,h.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp_ticket/services/direct_schedule/index.ts",api:{inputs:a.F,outputs:a._,containers:m}})},19603:function(e,t,r){r.d(t,{a:function(){return kt}});var s=r(30091),i=r(98116),n=r(23588),a=r(80472),o=r(76588),c=r(85349),l=r(38032),d=r(21247),u=r(27497),p=r(68557),h=r(55902),m=r(28258),k=r(54824),g=r(35529),f=r(70174);const b=(0,g.Union)((0,g.Literal)("VISA"),(0,g.Literal)("PEDESTRIAN_LUGGAGE"),(0,g.Literal)("DEPARTURE"),(0,g.Literal)("RESTRICTED"),(0,g.Literal)("MOON"),(0,g.Literal)("PEDESTRIAN_RUN"),(0,g.Literal)("AIRPORT_CHANGE")),x=(0,g.Union)((0,g.Literal)("DEFAULT"),(0,g.Literal)("TICKETS")),_=(0,g.Record)({title:g.String,textColor:f.n,textBackgroundColor:f.n,iconType:b,backgroundType:x}),w=(0,g.Record)({bold:g.Boolean.nullable(),italic:g.Boolean.nullable()}).nullable(),y=(0,g.Record)({currencyCode:g.String,value:g.Number}),v=(0,g.Record)({__typename:g.String,style:w,value:g.String}),C=(0,g.Record)({__typename:g.String,style:w,value:y}),S=(0,g.Record)({__typename:g.String,style:w,intValue:g.Number}),E=(0,g.Union)(v,C,S),T=(0,g.Record)({__typename:g.String,text:(0,g.Array)(E)}),D=(0,g.Union)((0,g.Literal)("CHECK"),(0,g.Literal)("ALLOWED"),(0,g.Literal)("WARNING")),j=(0,g.Record)({iconType:D,text:(0,g.Array)(E)}),P=(0,g.Record)({__typename:g.String,items:(0,g.Array)(j)}),N=(0,g.Union)(T,P),L=(0,g.Array)(N),I=(0,g.Union)((0,g.Literal)("WITHOUT_VISA"),(0,g.Literal)("WITHOUT_VIRTUAL_INTERLINES"),(0,g.Literal)("WITHOUT_RESTRICTIONS"),(0,g.Literal)("WITHOUT_NIGHT_TRANSFERS"),(0,g.Literal)("WITHOUT_SHORT_LAYOVER"),(0,g.Literal)("WITHOUT_AIRPORT_CHANGE")),F=(0,g.Record)({title:g.String,text:(0,g.Array)(E),buttonText:g.String,applyFilterName:I,minPriceAfterApplyFilter:y}),M=(0,g.Record)({header:_,content:L,footer:F}),O=(0,g.Record)({data:(0,g.Record)({search:(0,g.Record)({informerModalInfo:M}).nullable()}),errors:h.DY});let R,U;!function(e){e.Text="text",e.BulletList="bulletList"}(R||(R={})),function(e){e.Text="text",e.ShortPrice="shortPrice",e.Duration="duration"}(U||(U={}));const B=e=>({currency:e.currencyCode.toLowerCase(),value:e.value}),$=e=>{switch(e.__typename){case"ShortPriceFormattedText":return{type:U.ShortPrice,style:e.style,value:B(e.value)};case"DurationFormattedText":return{type:U.Duration,style:e.style,value:e.intValue};default:return{type:U.Text,style:e.style,value:e.value}}},A=e=>{const{text:t,iconType:r}=e;return{iconType:r,text:t.map($)}},V=e=>"TicketInformerContentBulletList"===e.__typename?(e=>{const{items:t}=e;return{type:R.BulletList,items:t.map(A)}})(e):(e=>{const{text:t}=e;return{type:R.Text,text:t.map($)}})(e);var H=r(54801);const q=(0,i.createEvent)({sid:"zcp0kt"}),z=(0,i.createEvent)({sid:"rh6720"}),W=(0,i.createEvent)({sid:"-wntdov"}),G=(0,i.createEvent)({sid:"-vpe3qw"}),X=(0,i.createEvent)({sid:"fnuvl8"}),K=(0,i.createEvent)({sid:"rju337"}),Y=(0,i.createEvent)({sid:"3qgl3d"}),Q=(0,i.createStore)(!1,{sid:"kv0qne"}),Z=(0,i.createStore)(null,{sid:"-k4728v"}),J=(0,i.createStore)(null,{sid:"-w17ugh"}),ee=(0,i.createStore)(null,{sid:"dkg1sq"}),te=(0,i.createStore)(null,{sid:"wqulvh"}),re=(0,i.createStore)(!1,{sid:"-n8axkd"}),se=(0,i.withFactory)({sid:"-5vfd4i",fn:()=>(0,k.$)({name:"Blet-Informer",params:(0,i.withFactory)({sid:"a1o4hw",fn:()=>(0,o.t6)()}),graphQL:{query:"query GetTicketInformerModal(\n    $searchId: String!,\n    $locale: Language!,\n    $filters: FiltersStateInput,\n    $informerModalId: String!,\n    $signature: String!,\n  ){\n  search(\n    searchId: $searchId,\n    locale: $locale,\n    filters: $filters,\n  ) {\n    informerModalInfo(informerModalId: $informerModalId, ticketSign: $signature) {\n      header {\n        title\n        textColor {\n          light\n          dark\n        }\n        textBackgroundColor {\n          light\n          dark\n        }\n        iconType\n        backgroundType\n      }\n      content {\n        __typename\n        ... on TicketInformerContentText {\n          text {\n            __typename\n            style {\n              bold\n              italic\n            }\n            ... on SimpleFormattedText {\n              value\n            }\n            ... on ShortPriceFormattedText {\n              value {\n                currencyCode\n                value\n              }\n            }\n            ... on DurationFormattedText {\n              intValue: value \n            }\n          }\n        }\n        ... on TicketInformerContentBulletList {\n          items {\n            iconType\n            text {\n              __typename\n              style {\n                bold\n                italic\n              }\n              ... on SimpleFormattedText {\n                value\n              }\n              ... on ShortPriceFormattedText {\n                value {\n                  currencyCode\n                  value\n                }\n              }\n              ... on DurationFormattedText {\n                intValue: value \n              }\n            }\n          }\n        }\n      }\n      footer {\n        title\n        text {\n          __typename\n          style {\n            bold\n            italic\n          }\n          ... on SimpleFormattedText {\n            value\n          }\n          ... on ShortPriceFormattedText {\n            value {\n              currencyCode\n              value\n            }\n          }\n          ... on DurationFormattedText {\n            intValue: value \n          }\n        }\n        buttonText\n        applyFilterName\n        minPriceAfterApplyFilter {\n          currencyCode\n          value\n        }\n      }\n    }\n  }\n}",variables:e=>e},request:{url:p.d.outputs.$url},response:{contract:(0,a.v)(O)},abort:K})});(0,i.sample)({and:[{clock:q,fn:()=>!0,target:Q}],or:{sid:"-7io2o7"}}),(0,i.withFactory)({sid:"-7fdb41",fn:()=>(0,c.m)({clock:K,target:re})}),(0,i.withFactory)({sid:"-712non",fn:()=>(0,c.m)({clock:[K,z],target:[Z,J,ee,Q]})}),(0,i.sample)({and:[{clock:G,filter:(0,i.withFactory)({sid:"p7h2x",fn:()=>(0,l.f)(u.N.outputs.$isSearchExpired)}),fn:()=>!0,target:re}],or:{sid:"-6k11ag"}}),(0,i.sample)({and:[{clock:u.N.outputs.searchExpired,target:K}],or:{sid:"-64msoc"}}),(0,i.sample)({and:[{clock:G,filter:u.N.outputs.$isSearchExpired,target:X}],or:{sid:"-61vtpj"}}),(0,i.sample)({and:[{clock:G,target:te}],or:{sid:"-nnwap3"}}),(0,i.sample)({and:[{clock:G,target:Y}],or:{sid:"-nl5bqa"}});const ie=(0,i.combine)({and:[{isPending:se.$pending,header:Z,content:J},({isPending:e,header:t,content:r})=>e&&!(t||r)],or:{sid:"simx20"}});(0,i.sample)({and:[{clock:Y,source:{informerModalId:te,variables:p.d.outputs.$variables},fn:({variables:e,informerModalId:t})=>({...e,informerModalId:t}),target:se.start}],or:{sid:"-mqcui2"}}),(0,i.sample)({and:[{clock:[m.E.outputs.chunksLoaded,z],filter:re,target:Y}],or:{sid:"-m6k952"}}),(0,i.sample)({and:[{clock:se.finished.failure,filter:o.eE,fn:({error:e})=>({errors:[{type:h.PB.UserOffline,message:`${e?.explanation||""}`}],error:e}),target:q}],or:{sid:"-lrpt4b"}}),(0,i.sample)({and:[{clock:se.finished.failure,filter:o.QO,fn:({error:e})=>({errors:[{type:h.PB.ParseError,message:`${e?.explanation||""}`}],error:e}),target:q}],or:{sid:"-l6tmkl"}}),(0,i.sample)({and:[{clock:se.finished.failure,filter:e=>!(0,i.withFactory)({sid:"-hgh252",fn:()=>(0,o.eE)(e)})&&!(0,i.withFactory)({sid:"-hgh0ii",fn:()=>(0,o.QO)(e)}),fn:({error:e})=>{const t=e?.response?.errors?.[0],r=t?.message||"",s=h.PB.SystemError,i=t?.path,n=e?.status;return{errors:[{type:s,message:r}],path:i,status:n,error:e}},target:q}],or:{sid:"-kadrka"}}),(0,i.sample)({and:[{clock:se.finished.success,filter:({result:e})=>!e?.data?.search?.informerModalInfo,fn:()=>!0,target:Q}],or:{sid:"-901t2f"}}),(0,i.sample)({and:[{clock:se.finished.success,filter:({result:e})=>Boolean(e.errors?.length),fn:({result:e})=>({status:200,errors:(e.errors||[]).map((e=>{const t=e.extensions?.errorType||"";return{type:(0,H.FP)(t)?t:h.PB.Unknown,message:e.message||""}}))}),target:q}],or:{sid:"-8w78ww"}}),(0,i.sample)({and:[{clock:se.finished.success,filter:({result:e})=>Boolean(e?.data?.search?.informerModalInfo),fn:({result:e})=>{const{header:t,content:r,footer:s}=e.data.search.informerModalInfo;return{informerModalHeader:(a=t,{title:a.title,textColor:a.textColor,textBackgroundColor:a.textBackgroundColor,backgroundType:a.backgroundType,iconType:a.iconType}),informerModalContent:(n=r,n.map(V)),informerModalFooter:(i=s,i?{title:i.title,text:i.text.map($),buttonText:i.buttonText,applyFilterName:i.applyFilterName,minPriceAfterApplyFilter:B(i.minPriceAfterApplyFilter)}:null),informerModalHasError:!1};var i,n,a},target:(0,i.withFactory)({sid:"jftrfq",fn:()=>(0,d.h)({informerModalHeader:Z,informerModalContent:J,informerModalFooter:ee,informerModalHasError:Q})})}],or:{sid:"-7xk7j5"}});const ne={outputs:{$isInformerModalOpen:re,$informerModalHasError:Q,$informerModalHeader:Z,$informerModalContent:J,$informerModalFooter:ee,$isLoading:ie,informerModalOpenedOnExpire:X,searchFailed:q},inputs:{informerModalOpened:G,informerModalClosed:K,retryInformerRequest:z},internals:{analyticsSent:W,fetchBletInformerQuery:se}},{inputs:ae}=ne;(0,i.sample)({and:[{clock:n.z.outputs.resetSearchResultsPage,target:ae.informerModalClosed}],or:{sid:"iljvxb"}}),r(21703);var oe=r(78260),ce=r(4449);const le=(0,oe.cr)("serp-ticket",{name:"api-blet-informer-modal"});(0,i.sample)({and:[{clock:ne.outputs.searchFailed,source:{variables:ce.X.outputs.$variables},fn:({variables:e},{path:t,error:r,errors:s})=>{const i=s?.[0]?.type,n=s?.[0]?.message,a=i===h.PB.SystemError?r?.errorType:i;return{msg:`Blet-Api-Informer-Modal-Error: ${a}`,label:`Blet-Api-Informer-Modal-Error: ${a}`,error:new Error(JSON.stringify({message:n,path:t})),extra:{error:r,searchId:e.searchId}}},target:le.sendErrorLog}],or:{sid:"-hn8kdp"}});var de=r(4190),ue=r(89421),pe=r(47166),he=r.n(pe),me=r(6328),ke=r(99491),ge=r(46531),fe=r(9071),be=r(5393),xe=r(57729),_e=r(67294),we=r(92968),ye=r(50985),ve=r(39510),Ce=r(88831),Se=r(17472),Ee=r(83104),Te=r(21262),De=r(76323),je=r(36388),Pe=r.p+"ab039abb0cb5efe7d8cf.svg",Ne=r.p+"c2742497061576d83a1a.svg",Le=r.p+"3523b1f406fec80c8ae0.svg",Ie=r.p+"5a9c34cee1ad199bd159.svg";let Fe,Me;!function(e){e.Visa="VISA",e.PedestrianLuggage="PEDESTRIAN_LUGGAGE",e.Departure="DEPARTURE",e.Restricted="RESTRICTED",e.Moon="MOON",e.PedestrianRun="PEDESTRIAN_RUN",e.AirportChange="AIRPORT_CHANGE"}(Fe||(Fe={})),function(e){e.Default="DEFAULT",e.Tickets="TICKETS"}(Me||(Me={}));var Oe=r(85893);const Re=he().bind({root:"s__OGKM8uPC5DMob6laNjyu","icon-wrapper":"s__zMx_Pc6P3jrFcQLzRKld",icon:"s__yCSfW5IHbhm4_Og85PsW","title-wrapper":"s__h1PAiVbawnG1_pmVsvNG",title:"s__n4wHpIOwLCOQlYJx7izA",title_large:"s__MxWDru9efnAwyZaXDHbv"}),Ue={[Me.Default]:{dark:Pe,light:Ne},[Me.Tickets]:{dark:Le,light:Ie}},Be={[Fe.Visa]:we.N,[Fe.PedestrianLuggage]:ye.t,[Fe.Departure]:ve.l,[Fe.Restricted]:Ce.W,[Fe.Moon]:Se.y,[Fe.PedestrianRun]:Ee.x,[Fe.AirportChange]:Te.D},$e=({textBackgroundColor:e,textColor:t,title:r,iconType:s,isNightMode:i=!1,backgroundType:n})=>{const a=Be[s]??ve.l,o=r.length>=15,c=i?e.dark:e.light,l=i?t.dark:t.light,d=(0,_e.useMemo)((()=>{const e=Ue[n]??Ue[Me.Default];return{backgroundImage:`url(${i?e.dark:e.light})`}}),[i,n]);return(0,Oe.jsxs)("div",{className:Re("root"),style:d,children:[(0,Oe.jsx)("div",{style:{backgroundColor:c},className:Re("icon-wrapper"),children:(0,Oe.jsx)(a,{className:Re("icon"),fill:l})}),(0,Oe.jsx)(De.X,{type:je.l.Title2Bold,className:Re("title-wrapper"),children:(0,Oe.jsx)("span",{className:Re("title",{title_large:o}),style:{color:l,backgroundColor:c},children:r})})]})};var Ae=r(44619),Ve=r(86523),He=r(49963),qe=r(37254),ze=r(2437);const We=({text:e,className:t,shortPriceClassName:r,textType:s=Ae.y.Body1Paragraph})=>{const i=(0,Ve.d)("duration");return(0,Oe.jsx)(He.x,{type:s,className:t,children:e.map((({type:e,value:t,style:s},n)=>{let a="";return e===U.Text&&(a=t),e===U.ShortPrice&&(a=(0,Oe.jsx)(qe.X,{className:r,currency:t.currency,value:t.value})),e===U.Duration&&(a=i(ze.nL.fromMs(t))),s?.bold&&(a=(0,Oe.jsx)("b",{children:a})),s?.italic&&(a=(0,Oe.jsx)("i",{children:a})),(0,Oe.jsx)(_e.Fragment,{children:a},n)}))})},Ge=({className:e,...t},r)=>(0,Oe.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":!0,className:e,"data-test-id":"icon",ref:r,style:{display:"inline-block"},...t,children:(0,Oe.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm-.47-3.97 4.5-4.5-1.06-1.06L7 9.44 5.03 7.47 3.97 8.53l2.5 2.5h1.06Z"})}),Xe=(0,_e.memo)((0,_e.forwardRef)(Ge));Xe.displayName="Icon16CommonAllowed";var Ke=r(41559),Ye=r(55170);let Qe;!function(e){e.Check="CHECK",e.Allowed="ALLOWED",e.Warning="WARNING"}(Qe||(Qe={}));const Ze=he().bind({"bullet-list":"s__tY9dBs1jYdawHXwKSvO2","list-item":"s___pgLfK2PaU1CbWiqWPhQ",icon:"s__Zexie0OSapGdf2ToJdK1","text-list-item":"s__vs1fBw6Ptm4CgWTHkDMN"}),Je={[Qe.Allowed]:Xe,[Qe.Check]:Ke.g,[Qe.Warning]:Ye.W},et=({items:e,className:t})=>(0,Oe.jsx)("div",{className:t,children:(0,Oe.jsx)("ul",{className:Ze("bullet-list"),children:e.map((({text:e,iconType:t},r)=>{const s=Je[t]||Je[Qe.Check];return(0,Oe.jsxs)("li",{className:Ze("list-item"),children:[(0,Oe.jsx)(s,{className:Ze("icon")}),(0,Oe.jsx)(We,{text:e,className:Ze("text-list-item")})]},r)}))})}),tt=he().bind({root:"s__qLQLn0db_9x1wkwV7gEJ","root_with-footer":"s__vrHCAHB8_Fp8_ZW1mY_e","content-wrapper":"s__aYGF7Nb802JcDpFSQ0gk",block:"s__rBNmx4TL2GNJ6zLSZW0w"}),rt=e=>e.type===R.Text?(0,Oe.jsx)(We,{text:e.text,className:tt("block")}):e.type===R.BulletList?(0,Oe.jsx)(et,{items:e.items,className:tt("block")}):null,st=({items:e,hasFooter:t})=>(0,Oe.jsx)("div",{className:tt("root",{"root_with-footer":t}),children:(0,Oe.jsx)("div",{className:tt("content-wrapper"),children:e.map(((e,t)=>(0,Oe.jsx)(rt,{...e},t)))})});var it=r(1156);const nt=he().bind({root:"s__y9Z2S7AzxwB3QS_KHm6h",content:"s__KLkue9S_0K1fTcHN6DRR",text:"s__oxZEGGPu6EE9svMTKGMB","divider-wrapper":"s__uQKJWLSQ5RjRHIQKi_er",divider:"s__FwEYfyth2dcCcrAf2jzr",footer:"s__pk71JkpFs4gYtYCjYTV6",button:"s__DnqQ0ko9Y7geIeEH7b_W",price:"s__PtwQC7zhvdLmkrQUM_rx"}),at=({title:e,text:t,buttonText:r,applyFilterName:s,minPriceAfterApplyFilter:i,onClickApplyFilter:n,isExpired:a=!1})=>{const o=(0,_e.useCallback)((()=>{n({applyFilterName:s,minPriceAfterApplyFilter:i})}),[s,i,n]);return(0,Oe.jsxs)("div",{className:nt("root"),children:[(0,Oe.jsxs)("div",{className:nt("content"),children:[(0,Oe.jsx)(He.x,{type:Ae.y.Body1Bold,children:e}),(0,Oe.jsx)(We,{text:t,textType:Ae.y.Body2Regular,className:nt("text"),shortPriceClassName:nt("price")})]}),(0,Oe.jsx)("div",{className:nt("divider-wrapper"),children:(0,Oe.jsx)("div",{className:nt("divider")})}),(0,Oe.jsx)("div",{className:nt("footer"),children:(0,Oe.jsx)(it.z,{disabled:a,onClick:o,className:nt("button"),inline:!0,children:r})})]})},ot=he().bind({"loading-or-error-wrapper":"s__VE1WoTCjIircmGr5mSg4"}),ct=e=>{const{isNightMode:t,footer:r,header:s,content:i,isLoading:n,isExpired:a,hasError:o,onUpdateClick:c,onClickApplyFilter:l}=e;return n?(0,Oe.jsx)("div",{className:ot("loading-or-error-wrapper"),children:(0,Oe.jsx)(me.$,{size:ke.Ey.L})}):!o&&s&&i?(0,Oe.jsxs)(Oe.Fragment,{children:[(0,Oe.jsx)($e,{...s,isNightMode:t}),(0,Oe.jsx)(st,{items:i,hasFooter:Boolean(r)}),r&&l&&(0,Oe.jsx)(at,{...r,isExpired:a,onClickApplyFilter:l})]}):(0,Oe.jsx)(xe.t,{className:ot("loading-or-error-wrapper"),onActionButtonClick:c})},lt=e=>{const{isOpen:t,onClose:r}=e;return(0,Oe.jsxs)(ge.G,{theme:"gray",width:480,visible:t,onClose:r,children:[(0,Oe.jsx)(ge.G.Navigation,{children:(0,Oe.jsx)(fe.w.RightAccessory,{children:(0,Oe.jsx)(be.P,{onClick:r})})}),(0,Oe.jsx)(ct,{...e})]})},{outputs:dt,inputs:ut}=ne,{inputs:pt,outputs:ht,internals:mt}=ne,kt=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp_ticket/services/informer_modal/index.ts",api:{inputs:pt,outputs:ht,internals:mt,containers:{BletInformerContainer:()=>{const{isOpen:e,informerModalClosedEvent:t,retryInformerRequestEvent:r,isLoading:s,informerModalHasError:i,informerModalHeader:n,informerModalContent:a,informerModalFooter:o,isSearchExpired:c,isNight:l}=(0,de.useUnit)({isOpen:dt.$isInformerModalOpen,informerModalClosedEvent:ut.informerModalClosed,retryInformerRequestEvent:ut.retryInformerRequest,isLoading:dt.$isLoading,informerModalHasError:dt.$informerModalHasError,informerModalHeader:dt.$informerModalHeader,informerModalContent:dt.$informerModalContent,informerModalFooter:dt.$informerModalFooter,isSearchExpired:u.N.outputs.$isSearchExpired,isNight:ue.H.outputs.$isNight});return(0,Oe.jsx)(lt,{isOpen:e,onClose:t,header:n,content:a,footer:o,isNightMode:l,isLoading:s,isExpired:c,hasError:i,onUpdateClick:r,onClickApplyFilter:e=>{console.log({payload:e})}})}}}})},72655:function(e,t,r){let s;r.d(t,{R:function(){return s}}),function(e){e.StickyDrawer="STICKY_DRAWER",e.DrawerWidget="DRAWER_WIDGET",e.Proposal="PROPOSAL"}(s||(s={}))},74169:function(e,t,r){r.d(t,{j:function(){return le}});var s=r(30091),i=r(98116),n=r(4449),a=r(13009),o=r(28258),c=r(27497),l=r(38352),d=r(27183),u=r.n(d),p=r(76586);(0,i.sample)({and:[{clock:n.X.outputs.searchFailed,filter:c.N.outputs.$isSearchFinished,fn:()=>!0,target:[p.FU.resetProposals,p.FU.drawerErrorUpdated]}],or:{sid:"9t8nf"}}),(0,i.sample)({and:[{clock:p.FU.retryDrawerRequest,target:n.X.inputs.fetchBletApi}],or:{sid:"quv1m"}}),(0,i.sample)({and:[{clock:[n.X.inputs.fetchBletApi,a.O.inputs.selectedTicketSignUpdated,n.X.inputs.ticketSearchHasBaggageUpdated,n.X.inputs.currentFareKeyUpdated],target:p.FU.resetError}],or:{sid:"1kjr34"}}),(0,i.sample)({and:[{clock:o.E.inputs.startSearch,source:{searchParams:l.s.outputs.$searchParams},fn:({searchParams:e})=>{if(!e?.passengers)return 1;const{adults:t,infants:r,children:s}=e.passengers;return t+r+s},target:p.FU.passengersCountUpdated}],or:{sid:"21ldhb"}}),(0,i.sample)({and:[{clock:n.X.outputs.chunksLoaded,fn:e=>u()("",["data","search","ticket","firstOperatingCarrier","carrier"],e),target:p.FU.firstOperatingCarrierUpdated}],or:{sid:"2mhk11"}}),(0,i.sample)({and:[{clock:n.X.outputs.chunksLoaded,fn:e=>e.data.search?.ticket.headerInfo??null,target:p.FU.ticketHeaderDataUpdated}],or:{sid:"31c01s"}}),r(26699);var h=r(67294),m=r(4190),k=r(28225),g=r(59051),f=r.n(g),b=r(85893),x=r(47166),_=r(94184),w=r(45338),y=r(73935),v=r(62221),C=r(37737),S=r(83117),E=r(25777),T=r(54844);const D=({isLoading:e})=>{const{progress:t}=(0,S.I)();return e?(0,b.jsx)("div",{className:_("s__PencPOutWcPD_QZ3GBFp"),children:(0,b.jsx)(E.k,{className:_("s__W77jv9os6uxBrLBNCAQC"),definition:T.g.Determinate,progress:t})}):null};const j=({isLoading:e})=>(0,b.jsx)("div",{className:_("s__i6McM1SW3i859xuj9971"),children:(0,b.jsx)(D,{isLoading:e})}),P=32,N=e=>e.clientHeight-P;var L=r(67170);const I=(0,r(22467).I)({key:"drawer",getNode:()=>document.createElement("div")}),F=(0,h.memo)((({className:e,customDrawerRef:t,visible:r,initialHeight:s=0,children:i,isLoading:n})=>{const{isClient:a}=(0,C.H)(),o=I(),[c,l]=(0,h.useState)(!1),[d,u]=(0,h.useState)(!1),[p,m]=(0,h.useState)(!1),[k,g]=(0,h.useState)(0),[f,x]=(0,h.useState)(!1),[S,E]=(0,h.useState)(!1),[T,D]=(0,h.useState)(!1),{ref:F,height:M,isAlreadyRendered:O,width:R}=(0,v.y)(d),U=(0,h.useRef)(!1),B=(0,h.useRef)(0),$=(0,h.useRef)(null),A=(0,h.useRef)(0),V=(0,h.useRef)(!0),H=(0,h.useRef)(),q=(0,h.useRef)(null),z=t||q,W=(0,h.useCallback)((e=>{const t=z.current;if(t){t.style.transform=(e=>`translateY(-${e}px)`)(e);let r=B.current-e>=0?0:(e-B.current)/(t.clientHeight-B.current);e===t.clientHeight&&(r=1),g(r)}}),[z,B]),G=(0,h.useCallback)((({deltaY:e,dir:t})=>{if("Down"!==t&&"Up"!==t)return;const r=-e,s=z.current,i=F.current;if(s&&i){const e=N(s),t=e===B.current;if(!c&&t&&r>0)return void E(!0);if(l(!0),U.current&&r>0)return;if(!U.current&&B.current+r>e)return;const i=T?P:0,n=U.current?e+r:B.current+r+i;W(n)}}),[c,z,F,B,W,T]),X=(0,h.useCallback)((()=>{const e=z.current,t=F.current;if(e&&t){const t=N(e);W(t),U.current=!0,x(!0),l(!1)}}),[z,F,W]),K=(0,h.useCallback)((()=>{const e=z.current,t=H.current;e&&t&&(W(T?B.current+P:B.current),x(!1),U.current=!1,t.scrollTo({top:0,behavior:"smooth"}),l(!1))}),[z,H,W,B,T]),Y=(0,h.useCallback)((()=>{S?E(!1):X()}),[X,S]),Q={onSwiping:G,onSwipedUp:Y,onSwipedDown:K,trackMouse:!0,trackTouch:!0,delta:10},Z=(e,t)=>{0===A.current&&e.first&&(V.current=!0),V.current&&t(e)},J={onSwiping:e=>Z(e,G),onSwipedUp:e=>Z(e,Y),onSwipedDown:e=>Z(e,K),trackMouse:!0,trackTouch:!0,delta:10},ee=(0,w.QS)(Q),te=(0,w.QS)(J);(0,h.useEffect)((()=>{u(r&&a)}),[r,a]),(0,h.useEffect)((()=>{const e=e=>{A.current=H?.current?.scrollTop||0,A.current>0&&(V.current=!1),U.current||e.preventDefault()},t=H?.current;return t?.addEventListener("wheel",e),t?.addEventListener("touchmove",e),()=>{t?.removeEventListener("wheel",e),t?.removeEventListener("touchmove",e)}}),[a]),(0,h.useEffect)((()=>{const e=z.current,t=F.current;if(t&&e&&p){const r=N(e),i=t.clientHeight;if(B.current=s>i?i:s,!U.current&&!c){const e=T?P:0;W(B.current+e)}U.current&&!c&&W(r)}}),[s,F,z,p,c,W,T]);const re=(0,h.useMemo)((()=>c&&0!==k||f||U.current),[c,f,k,U]);(0,h.useEffect)((()=>{if(!O)return;const e=$.current,t=R===e;$.current=R;const r=z.current;if(!t&&null!==e&&r){const e=N(r);B.current=s>e?e:s,z.current.style.transitionDuration="0s",U.current||s>e?X():K(),z.current.style.transitionDuration="0.3s"}}),[R,O,z,K,X,M,s]);const se={onSwiping:e=>{const t=z.current;if(!t)return;const r=document.getElementsByClassName(L.U)[0],s=N(t),{scrollHeight:i,offsetHeight:n}=r;if(i===n){const t=e.deltaY>0;if(t&&T&&(W(B.current),D(!1)),!t&&!T){const e=B.current+P;W(s>=e?e:s),D(!0)}}},trackMouse:!0,trackTouch:!0},ie=(0,w.QS)(se);return(0,h.useEffect)((()=>{const e=document.getElementsByClassName(L.U)[0],t=()=>{const t=z.current;if(!t)return;const r=N(t),{scrollHeight:s,offsetHeight:i,scrollTop:n}=e;if(s!==i){const e=s-i-n<=1;if(!e&&T&&(W(B.current),D(!1)),e&&!T){const e=B.current+P;W(r>=e?e:r),D(!0)}}};return e?.addEventListener("scroll",t),ie.ref(e),()=>{e?.removeEventListener("scroll",t)}}),[ie,z,T,W]),(0,h.useEffect)((()=>{n||(U.current?X():K())}),[n,X,K]),o&&r?(0,y.createPortal)((0,b.jsxs)("div",{ref:F,className:_("s__C_KQaq88OMevuUhIdn7b","s__mboTjrjXLWtPkU6sn3SW",{s__BJGaa530re3pLN3OeQ6w:re}),children:[(0,b.jsx)("div",{className:_("s__z_36oxjTWCpMAAgpEY5T"),onClick:K}),(0,b.jsxs)("div",{ref:z,className:_("s__Xdc8E6VXWLe5FH05iMRg",e),children:[(0,b.jsx)("div",{className:_("s__ofg4cMnnLJVvPCH6LvSf"),...ee,ref:e=>{ee.ref(e),m(!0)},children:(0,b.jsx)(j,{})}),(0,b.jsx)("div",{className:_("s__E5AXkxonxaL7JbJjjUaI"),...te,ref:e=>{te.ref(e),H.current=e},children:i})]})]}),o):null}));F.displayName="BottomDrawer";var M={"mobile-content":"s__wQJkz30gj53cpw337DzZ","desktop-drawer":"s__XVsOzWmcI_x8Q5pjInae","desktop-drawer_with-cashback-informer":"s__n5lxzG_ubOuyKQgP2wO1","sticky-drawer":"s__yqiwItDmnQ4rUcMz7WnR","sticky-drawer-header":"s__SIedwxeTdoRkRRGSgoQh","sticky-drawer-subtitle":"s__KSahlfULZhCeH_DqSJX6","sticky-drawer-breakpoint":"s__LkCvV3zvgbSiZipRsiFw","sticky-drawer-slot":"s__e1nletgIPyAFv58Itlx9","sticky-drawer-wrapper":"s__ns2MvX4kipFQ5Hp6HnZk","with-animation":"s__LuI2DoTeOc78XZ_hjZVO",sticky:"s__r5aeu4Kq6O_ILnxsR0yO",skeleton:"s__R8lARz9kEtPKcF1325zu",layout:"s__au6Te5XmS0c8LtYW5O8s","sticky-drawer-content":"s__q1dDLpLLEu8tvGHnYorB","sticky-content":"s__omzDvB2KwwyXkSwVAIoa"},O=r(59191),R=r(49963),U=r(44619),B=r(80871);const $=x.bind({root:"s__tKeW1pq49fHU0VelR_ll",disabled:"s__BAMhTXIqDrvYdd1gjS27",icon:"s__sQpkOp5qypEnPossvwna"}),A=(0,h.memo)((({text:e,onClick:t,disabled:r})=>(0,b.jsxs)("div",{className:$("root",{disabled:r}),onClick:()=>{r||t()},children:[(0,b.jsx)(R.x,{type:U.y.Body1Semi,className:$("text"),children:e}),(0,b.jsx)(B.i,{className:$("icon")})]})));A.displayName="ShowMoreButton";const V=x.bind({passengers:"s__mRX_3BqncP442mzXYkbg"}),H=(0,h.forwardRef)((({proposals:e,isExpired:t,isLoading:r,getCashbackTitle:s,onShowMoreClick:i,onProposalClick:n,showMoreButtonText:a,firstOperatingCarrier:o,proposalListRef:c=null,className:l,passengersCountText:d,ticketPrice:u,onUpdateClick:p,onProposalInView:h,hasError:m,onErrorClick:k,isDisabled:g,isShowMoreButtonDisabled:f,cashbackInformerSlot:x,isSmallButton:_,isStickyDrawer:w},y)=>(0,b.jsxs)("div",{ref:y,className:l,children:[d&&(0,b.jsx)(R.x,{type:U.y.Body1Semi,className:V("passengers"),children:d}),(0,b.jsx)(O.t,{proposalListRef:c,proposals:e,isLoading:r,isExpired:t,getCashbackTitle:s,onProposalClick:n,firstOperatingCarrier:o,ticketPrice:u,onUpdateClick:p,onProposalInView:h,hasError:m,onErrorClick:k,isDisabled:g,isSmallButton:_,isStickyDrawer:w}),a&&(0,b.jsx)(A,{text:a,onClick:i,disabled:f}),x]})));H.displayName="DrawerContent";const q=x.bind(M),z=(0,h.forwardRef)((({proposals:e,isExpired:t,isLoading:r,hasError:s=!1,getCashbackTitle:i,onShowMoreClick:n,onProposalClick:a,onErrorClick:o,showMoreButtonText:c,firstOperatingCarrier:l,passengersCountText:d,ticketPrice:u,onUpdateClick:p,onProposalInView:m,isDisabled:k,isShowMoreButtonDisabled:g,cashbackInformerSlot:f},x)=>{const _=(0,h.useRef)(null),w=(0,h.useRef)(null),y=(0,h.useMemo)((()=>d?132:90),[d]);return(0,b.jsx)(F,{visible:!0,isLoading:r,customDrawerRef:w,initialHeight:y,children:(0,b.jsx)(H,{ref:x,proposals:e,onShowMoreClick:n,getCashbackTitle:i,onProposalClick:a,firstOperatingCarrier:l,proposalListRef:_,isLoading:r,isExpired:t,showMoreButtonText:c,className:q("mobile-content"),passengersCountText:d,ticketPrice:u,onUpdateClick:p,onProposalInView:m,hasError:s,onErrorClick:o,isDisabled:k,isShowMoreButtonDisabled:g,cashbackInformerSlot:f})})}));z.displayName="MobileDrawer";const W=x.bind(M),G=(0,h.forwardRef)((({proposals:e,isExpired:t,isLoading:r,hasError:s=!1,getCashbackTitle:i,cashbackInformerSlot:n,onShowMoreClick:a,onProposalClick:o,onErrorClick:c,showMoreButtonText:l,firstOperatingCarrier:d,passengersCountText:u,ticketPrice:p,onUpdateClick:h,onProposalInView:m,isDisabled:k,isShowMoreButtonDisabled:g},f)=>(0,b.jsx)("div",{className:W("desktop-drawer",{"desktop-drawer_with-cashback-informer":null!==n}),children:(0,b.jsx)(H,{ref:f,proposals:e,isLoading:r,isExpired:t,showMoreButtonText:l,onShowMoreClick:a,onProposalClick:o,onProposalInView:m,onErrorClick:c,onUpdateClick:h,hasError:s,passengersCountText:u,ticketPrice:p,getCashbackTitle:i,firstOperatingCarrier:d,isDisabled:k,isShowMoreButtonDisabled:g,cashbackInformerSlot:n})})));G.displayName="DesktopDrawer";const X=x.bind(M),K=(0,h.forwardRef)((({proposals:e,isExpired:t,isLoading:r,isSkeleton:s,stickyTitle:i,stickySubtitle:n,stickyVisibleProposals:a=1,hasError:o=!1,cashbackInformerSlot:c,showMoreButtonText:l,firstOperatingCarrier:d,ticketPrice:u,isDisabled:p,isShowMoreButtonDisabled:m,getCashbackTitle:k,onShowMoreClick:g,onProposalClick:f,onErrorClick:x,onUpdateClick:_,onProposalInView:w,getIsStickyDrawer:y},v)=>{const C=(0,h.useRef)(!1),S=(0,h.useRef)(null),[E,T]=(0,h.useState)(!1),D=s||0===a,j=!E&&0!==a,P=(0,h.useMemo)((()=>{const e=8+88*a;return{breakPoint:{height:`${e}px`},content:{top:`calc(100% - ${e}px)`}}}),[a]);return(0,h.useEffect)((()=>{if(D)return;let e=!1;const t=S.current,r=new IntersectionObserver((t=>{T(t[0].isIntersecting),e?C.current=!0:e=!0}),{threshold:1});return t&&r.observe(t),()=>{C.current=!1,t&&r.unobserve(t)}}),[D]),(0,h.useEffect)((()=>(y&&y(j),()=>{y&&y(!1)})),[j,y]),(0,b.jsxs)("div",{className:X("sticky-drawer"),children:[(0,b.jsxs)("div",{className:X("sticky-drawer-header"),children:[s?null:(0,b.jsxs)(b.Fragment,{children:[i?(0,b.jsx)(R.x,{type:U.y.Body1Bold,children:i}):null,(0,b.jsx)(R.x,{type:U.y.Body3Regular,className:X("sticky-drawer-subtitle"),children:n})]}),(0,b.jsx)("div",{ref:S,className:X("sticky-drawer-breakpoint"),style:P.breakPoint})]}),(0,b.jsxs)("div",{className:X("sticky-drawer-slot"),children:[(0,b.jsx)("div",{className:X("sticky-drawer-wrapper","layout"),children:(0,b.jsx)("div",{className:X("sticky-drawer-content"),children:(0,b.jsx)(H,{className:X("sticky-content"),proposals:e,isLoading:r,isExpired:t,showMoreButtonText:l,onShowMoreClick:g,onProposalClick:f,onProposalInView:w,onErrorClick:x,onUpdateClick:_,hasError:o,ticketPrice:u,getCashbackTitle:k,firstOperatingCarrier:d,isDisabled:p,isShowMoreButtonDisabled:m,cashbackInformerSlot:c,isSmallButton:!0,isStickyDrawer:!1})})}),(0,b.jsx)("div",{className:X("sticky-drawer-wrapper",{"with-animation":!s&&C.current,sticky:s||j}),style:j?P.content:void 0,children:(0,b.jsx)("div",{className:X("sticky-drawer-content",{"with-animation":!s&&C.current,sticky:s||j}),children:(0,b.jsx)(H,{ref:v,className:X("sticky-content"),proposals:e,isLoading:r,isExpired:t,showMoreButtonText:l,onShowMoreClick:g,onProposalClick:f,onProposalInView:w,onErrorClick:x,onUpdateClick:_,hasError:o,ticketPrice:u,getCashbackTitle:k,firstOperatingCarrier:d,isDisabled:p,isShowMoreButtonDisabled:m,cashbackInformerSlot:c,isSmallButton:!j,isStickyDrawer:j})})})]})]})}));K.displayName="StickyDrawer";const Y=(0,h.forwardRef)((({type:e,...t},r)=>"sticky"===e?(0,b.jsx)(K,{ref:r,...t}):"mobile"===e?(0,b.jsx)(z,{ref:r,...t}):(0,b.jsx)(G,{ref:r,...t})));Y.displayName="TicketDrawer";var Q=r(38387),Z=r(31401),J=r(30871),ee=r(39102),te=r(34747),re=r(21247),se=r(31438),ie=r(23588);(0,i.sample)({and:[{clock:[ie.z.outputs.ticketPopupClosed,ie.z.outputs.resetSearchResultsPage],target:p.FU.ticketDataReset}],or:{sid:"gx6mq9"}}),(0,i.withFactory)({sid:"h1kzh5",fn:()=>(0,re.h)({source:ie.z.outputs.ticketPopupOpen,targets:{signature:p.FU.ticketSignUpdated,price:p.FU.ticketPriceFromResultsUpdated}})}),(0,i.sample)({and:[{clock:ie.z.outputs.ticketPopupOpen,source:c.N.outputs.$searchStatus,filter:e=>e===se.S.Expired,target:p.FU.resetProposals}],or:{sid:"hhj0om"}}),(0,i.sample)({and:[{clock:ie.z.outputs.popupsFromTicketOpen,target:p.FU.popupsFromTicketOpen}],or:{sid:"hwx9aq"}}),(0,i.sample)({and:[{clock:[ie.z.outputs.popupsFromTicketClose,ie.z.outputs.resetSearchResultsPage],target:p.FU.popupsFromTicketClose}],or:{sid:"hzo89j"}}),(0,i.sample)({and:[{clock:p.FU.handleUpdateResultsClicked,target:ie.z.inputs.updateResultsFx}],or:{sid:"ifm9h0"}});const{CashbackInformerContainer:ne}=J.p.containers,{CashbackLabelContainer:ae}=ee.r.containers,{CashbackInformerContainer:oe}=J.p.containers,{CashbackLabelContainer:ce}=ee.r.containers,le=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp_ticket/services/ticket_drawer/index.ts",api:{inputs:p.FU,outputs:p._1,containers:{TicketDrawerContainer:()=>{const{t:e}=(0,k.useTranslation)("component_serp_bottom_drawer"),t=(0,h.useRef)(null),{drawerProposals:r,isLoading:s,areTicketActionItemsBlocked:i,isDesktop:a,isSearchExpired:o,passengersCount:l,ticketPriceFromResults:d,firstOperatingCarrier:u,hasError:g,visiblePlacements:x,isDirectSearchLoading:_,drawerWidgetHeader:w,drawerProposalsButtonText:y,requiredTicketLoading:v,stickyDrawerProposalsShowAmount:C}=(0,m.useUnit)({stickyDrawerProposalsShowAmount:p._1.$stickyDrawerProposalsShowAmount,drawerProposals:p._1.$drawerProposals,isLoading:n.X.outputs.$isLoading,areTicketActionItemsBlocked:n.X.outputs.$areTicketChangeHandlersBlocked,isDesktop:Q.l.outputs.$isDesktop,isSearchExpired:c.N.outputs.$isSearchExpired,passengersCount:p._1.$passengersCount,ticketPriceFromResults:p._1.$ticketPriceFromResults,firstOperatingCarrier:p._1.$firstOperatingCarrier,hasError:p._1.$hasError,visiblePlacements:J.p.outputs.$visiblePlacements,isDirectSearchLoading:n.X.outputs.$requiredTicketFromDirectScheduleLoading,requiredTicketLoading:te.y.outputs.$requiredTicketLoading,drawerProposalsButtonText:p._1.$drawerProposalsButtonText,drawerWidgetHeader:p._1.$drawerWidgetHeader}),{handleBuyClick:S,handleShowMoreClick:E,handleUpdateResultsClick:T,handleProposalInView:D,retryDrawerRequest:j,isDrawerInViewPortChanged:P,isStickyDrawerChanged:N}=(0,m.useUnit)({handleBuyClick:p.FU.handleBuyClicked,handleShowMoreClick:p.FU.handleShowMoreClicked,handleUpdateResultsClick:p.FU.handleUpdateResultsClicked,handleProposalInView:p.FU.handleProposalInView,retryDrawerRequest:p.FU.retryDrawerRequest,isDrawerInViewPortChanged:p.FU.isDrawerInViewPortChanged,isStickyDrawerChanged:p.FU.isStickyDrawerChanged}),L=_||s||v,I=i||o,F=(0,h.useCallback)(((e,t,r)=>{S({event:e,proposal:t,zone:r})}),[S]),M=(0,h.useMemo)((()=>{const e=x.includes(Z.g_.BottomDrawer);return r.some((({cashback:e})=>!f()(e)&&e>=1))&&e?(0,b.jsx)(ne,{placement:Z.g_.BottomDrawer}):null}),[x,r]),O=(0,h.useMemo)((()=>{if(!o)return y?.length?y:void 0}),[o,y]);(0,h.useEffect)((()=>{const e=t.current,r=new IntersectionObserver((e=>{P(e[0].isIntersecting)}),{threshold:1});return e&&r.observe(e),()=>{e&&r.unobserve(e)}}),[P]);const R=l>1?e("passengersCount",{count:l}):"";if(null===d)return null;const U=a?"desktop":"sticky",B=Math.min(C,r.length);return(0,b.jsx)(Y,{ref:t,type:U,proposals:r,onShowMoreClick:E,getCashbackTitle:e=>null!==e&&e.value>=1?(0,b.jsx)(ae,{cashback:e,placement:Z.g_.BottomDrawer}):null,onProposalClick:F,firstOperatingCarrier:u,ticketPrice:d??void 0,onUpdateClick:T,isLoading:L,isExpired:o,showMoreButtonText:O,onProposalInView:D,onErrorClick:j,hasError:g,passengersCountText:R,cashbackInformerSlot:M,isShowMoreButtonDisabled:I,stickyTitle:w?.title,stickySubtitle:w?.subTitle,stickyVisibleProposals:B,getIsStickyDrawer:N})},TicketDrawerOldContainer:({type:e})=>{const{t:t}=(0,k.useTranslation)("component_serp_bottom_drawer"),r=(0,h.useRef)(null),{drawerProposals:s,isLoading:i,areTicketActionItemsBlocked:a,isVisibleMobileDrawer:o,isVisibleDesktopDrawer:l,isSearchExpired:d,passengersCount:u,ticketPriceFromResults:g,firstOperatingCarrier:x,hasError:_,visiblePlacements:w,isDirectSearchLoading:y,drawerProposalsButtonText:v,requiredTicketLoading:C}=(0,m.useUnit)({drawerProposals:p._1.$drawerProposals,isLoading:n.X.outputs.$isLoading,areTicketActionItemsBlocked:n.X.outputs.$areTicketChangeHandlersBlocked,isVisibleMobileDrawer:p._1.$isVisibleMobileDrawer,isVisibleDesktopDrawer:p._1.$isVisibleDesktopDrawer,isSearchExpired:c.N.outputs.$isSearchExpired,passengersCount:p._1.$passengersCount,ticketPriceFromResults:p._1.$ticketPriceFromResults,firstOperatingCarrier:p._1.$firstOperatingCarrier,hasError:p._1.$hasError,visiblePlacements:J.p.outputs.$visiblePlacements,isDirectSearchLoading:n.X.outputs.$requiredTicketFromDirectScheduleLoading,requiredTicketLoading:te.y.outputs.$requiredTicketLoading,drawerProposalsButtonText:p._1.$drawerProposalsButtonText}),{handleBuyClick:S,handleShowMoreClick:E,handleUpdateResultsClick:T,handleProposalInView:D,retryDrawerRequest:j,isDrawerInViewPortChanged:P}=(0,m.useUnit)({handleBuyClick:p.FU.handleBuyClicked,handleShowMoreClick:p.FU.handleShowMoreClicked,handleUpdateResultsClick:p.FU.handleUpdateResultsClicked,handleProposalInView:p.FU.handleProposalInView,retryDrawerRequest:p.FU.retryDrawerRequest,isDrawerInViewPortChanged:p.FU.isDrawerInViewPortChanged}),N=y||i||C,L=a||d,I=(0,h.useCallback)(((e,t)=>{S({event:e,proposal:t})}),[S]),F=(0,h.useMemo)((()=>{const e=w.includes(Z.g_.BottomDrawer);return s.some((({cashback:e})=>!f()(e)&&e>=1))&&e?(0,b.jsx)(oe,{placement:Z.g_.BottomDrawer}):null}),[w,s]),M=(0,h.useMemo)((()=>{if(!d)return v?.length?v:void 0}),[d,v]);(0,h.useEffect)((()=>{const e=r.current,t=new IntersectionObserver((e=>{P(e[0].isIntersecting)}),{threshold:1});return e&&t.observe(e),()=>{e&&t.unobserve(e)}}),[P]);const O=u>1?t("passengersCount",{count:u}):"";if(null===g&&"skeleton"!==e)return null;if("desktop"===e&&!l)return null;if("mobile"===e&&!o)return null;const R="skeleton"===e?"mobile":e;return"skeleton"===e&&o&&null!==g?null:(0,b.jsx)(Y,{ref:r,proposals:s,onShowMoreClick:E,getCashbackTitle:e=>null!==e&&e.value>=1?(0,b.jsx)(ce,{cashback:e,placement:Z.g_.BottomDrawer}):null,onProposalClick:I,firstOperatingCarrier:x,ticketPrice:g??void 0,onUpdateClick:T,type:R,isLoading:N,isExpired:d,showMoreButtonText:M,onProposalInView:D,onErrorClick:j,hasError:_,passengersCountText:O,cashbackInformerSlot:F,isShowMoreButtonDisabled:L})}}}})},76586:function(e,t,r){r.d(t,{FU:function(){return Ne},_1:function(){return Le},hO:function(){return Ie}});var s=r(98116),i=r(54448),n=r(47047),a=r(4449),o=r(37213),c=r(99186),l=r(79403),d=r(53788),u=r(28258),p=r(57790),h=r(38387),m=r(3708),k=r(61330),g=r(15863),f=r(4517),b=r(2256),x=r(65454),_=r(41832),w=r(28398),y=r(38352),v=r(61653),C=r(2845),S=r(34747),E=r(72655),T=r(63308),D=r(89677),j=r(21187),P=r(19603),N=r(27183),L=r.n(N),I=r(83049),F=r.n(I);const M=(0,s.createEvent)({sid:"pzf6sw"}),O=(0,s.createEvent)({sid:"yl51dx"}),R=(0,s.createEvent)({sid:"-5izjnz"}),U=(0,s.createEvent)({sid:"5khpfj"}),B=(0,s.createEvent)({sid:"-yevg0u"}),$=(0,s.createEvent)({sid:"-iai4h0"}),A=(0,s.createEvent)({sid:"esoitp"}),V=(0,s.createEvent)({sid:"-5xpa5h"}),H=(0,s.createEvent)({sid:"-d9nd0k"}),q=(0,s.createEvent)({sid:"g9ucne"}),z=(0,s.createEvent)({sid:"uxkdxe"}),W=(0,s.createEvent)({sid:"-9wbf39"}),G=(0,s.createEvent)({sid:"g3y47l"}),X=(0,s.createEvent)({sid:"yson4v"}),K=(0,s.createEvent)({sid:"-appdko"}),Y=(0,s.createEvent)({sid:"-prn20r"}),Q=(0,s.createEvent)({sid:"z4hez7"}),Z=(0,s.createEvent)({sid:"7cz7zn"}),J=(0,s.createEvent)({sid:"-p7dpoh"}),ee=(0,s.createEvent)({sid:"9np7my"}),te=(0,s.createEvent)({sid:"ptrigh"}),re=(0,s.createEvent)({sid:"juxa9e"}),se=(0,s.createEvent)({sid:"4hsdol"}),ie=(0,s.createEvent)({sid:"-52nggk"}),ne=(0,s.createEvent)({sid:"j9ry7h"}),ae=(0,s.createStore)(null,{sid:"-29byl2"}).on(O,((e,t)=>t)).reset(X),oe=(0,s.createStore)([],{sid:"jqfrh"}).on(R,((e,t)=>t)).reset([X,Y]),ce=(0,s.createStore)(null,{sid:"-9tnzis"}).on(V,((e,t)=>t)).reset([X,Y]),le=(0,s.createStore)(null,{sid:"-6n2r1q"}).on(A,((e,t)=>t)).reset([X,Y]),de=(0,s.createStore)([],{sid:"a78r1v"}).on(U,((e,t)=>t)).reset([X,Y]),ue=(0,s.createStore)(0,{sid:"-udc5zl"}).on(B,((e,t)=>t)).reset([X,Y]),pe=(0,s.createStore)("",{sid:"xow4uy"}).on(H,((e,t)=>t)).reset([X]),he=(0,s.createStore)(null,{sid:"dd7f19"}).on(K,((e,t)=>t)).reset(X),me=(0,s.createStore)(0,{sid:"-y3t5kc"}).on(Z,((e,t)=>t)),ke=(0,s.createStore)(0,{sid:"-dc2ghx"}).on($,((e,t)=>t)),ge=(0,s.createStore)(null,{sid:"-pi5kfr"}).on(se,((e,t)=>t)).reset(X),fe=(0,s.createStore)(!1,{sid:"-8uqffc"}).on(ee,(()=>!0)).reset(te),be=(0,s.createStore)(!1,{sid:"u44egh"}).on(q,((e,t)=>t)).reset([X,W]),xe=(0,s.createStore)(!1,{sid:"-tdffne"}).on(ie,((e,t)=>t)).reset([X,Y]),_e=(0,s.createStore)(!1,{sid:"-aff4b5"}).on(ne,((e,t)=>t)).reset([X,Y]),we=f.r.outputs.$drawerAsWidgetFlag.map((({enabled:e})=>e)),ye=(0,s.combine)({and:[[c.l.outputs.$language,l.U.outputs.$brand,d.D.outputs.$market,u.E.outputs.$searchSession,_.y.outputs.$currencyRates,o.b.outputs.$marker,y.s.outputs.$searchParams],([e,t,r,s,i,n,a])=>{const{searchId:o,resultsHostUrl:c}=s||{};return{lang:e,brand:t,market:r,searchId:o,resultsHostUrl:c,currencyRates:i,marker:n,baseSearchUrl:(0,v.YU)(a)}}],or:{sid:"-5b7f7c"}}),{$enabled:ve,turnOn:Ce,turnOff:Se}=(0,s.withFactory)({sid:"qf594a",fn:()=>(0,n.d)(g.qs,!1)}),Ee=(0,s.createStore)(!1,{sid:"2ttbju"}).on(J,((e,t)=>t)),Te=D.K.outputs.$fareInformerType.map((e=>null!==e)),De=(0,s.withFactory)({sid:"763vyj",fn:()=>(0,i.or)(k.Y.outputs.$isModalVisible,m.si.outputs.$isPriceAlertPopupVisible,p.o.outputs.$isInproductPurchaseVisible,b.O.outputs.$isTransferInfoModalVisible,x.FH.outputs.$isVisible,S.y.outputs.$isUnavailableTimeDialogVisible,ve,Ee,P.a.outputs.$isInformerModalOpen,fe,w.d.outputs.$isTicketSharingPopupOpened,C.a.outputs.$isPopupVisible,D.K.outputs.$isFaresModalVisible,j.b.outputs.$isGateFeedbackVisible,Te)}),je=(0,s.combine)({and:[we,h.l.outputs.$isTablet,h.l.outputs.$isMobile,De,(e,t,r,s)=>!e&&(t||r)&&!s],or:{sid:"-91j6wx"}}),Pe=h.l.outputs.$isDesktop.map((e=>e));(0,s.sample)({and:[{clock:a.X.outputs.chunksLoaded,fn:e=>{const t=L()([],["data","search","ticket","proposals"],e);return F()((e=>e.agent.id),t).length},target:B}],or:{sid:"-wqpu2o"}}),(0,s.sample)({and:[{clock:M,source:{ticketSign:ae,isStickyDrawer:_e,isDrawerInViewPort:xe,isVisibleDesktopDrawer:Pe,isDrawerAsWidgetFlagEnabled:we},fn:({ticketSign:e,isStickyDrawer:t,isDrawerInViewPort:r,isVisibleDesktopDrawer:s,isDrawerAsWidgetFlagEnabled:i},{proposal:n,event:a,zone:o})=>({event:a,ticketSign:e,proposalData:{id:n.id,deeplink:n.deeplink,position:n.position,source:s||!i||!t&&r?E.R.DrawerWidget:E.R.StickyDrawer,zone:o}}),target:T.B.inputs.bookingClicked}],or:{sid:"-wnf2ii"}});const Ne={drawerProposalsUpdated:R,drawerWidgetHeaderUpdated:V,drawerProposalsButtonTextUpdated:A,bletProposalsUpdated:U,handleBuyClicked:M,ticketSignUpdated:O,handleShowMoreClicked:G,popupsFromTicketOpen:Ce,popupsFromTicketClose:Se,ticketDataReset:X,ticketPriceFromResultsUpdated:K,resetProposals:Y,handleUpdateResultsClicked:Q,retryDrawerRequest:z,resetError:W,drawerErrorUpdated:q,passengersCountUpdated:Z,firstOperatingCarrierUpdated:H,flightInfoModalVisibleChanged:J,proposalModalClosed:te,proposalModalOpened:ee,handleProposalInView:re,ticketHeaderDataUpdated:se,isDrawerInViewPortChanged:ie,stickyDrawerProposalsShowAmountChanged:$,isStickyDrawerChanged:ne},Le={$drawerProposals:oe,$drawerProposalsButtonText:le,$bletProposals:de,$commonDeeplinkParams:ye,$allProposalsLength:ue,$isVisibleMobileDrawer:je,$isVisibleDesktopDrawer:Pe,$passengersCount:me,$ticketPriceFromResults:he,$firstOperatingCarrier:pe,$hasError:be,$ticketHeaderData:ge,$drawerWidgetHeader:ce,$isDrawerInViewPort:xe,$stickyDrawerProposalsShowAmount:ke,$isStickyDrawer:_e},Ie={outputs:Le,inputs:Ne}},45338:function(e,t,r){r.d(t,{QS:function(){return l}});var s=r(67294);const i={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},n={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},a="mousemove",o="mouseup";function c(e,t){if(0===t)return e;const r=Math.PI/180*t;return[e[0]*Math.cos(r)+e[1]*Math.sin(r),e[1]*Math.cos(r)-e[0]*Math.sin(r)]}function l(e){const{trackMouse:t}=e,r=s.useRef(Object.assign({},n)),l=s.useRef(Object.assign({},i)),d=s.useRef(Object.assign({},l.current));let u;for(u in d.current=Object.assign({},l.current),l.current=Object.assign(Object.assign({},i),e),i)void 0===l.current[u]&&(l.current[u]=i[u]);const[p,h]=s.useMemo((()=>function(e,t){const r=t=>{const r="touches"in t;r&&t.touches.length>1||e(((e,i)=>{i.trackMouse&&!r&&(document.addEventListener(a,s),document.addEventListener(o,d));const{clientX:l,clientY:u}=r?t.touches[0]:t,p=c([l,u],i.rotationAngle);return i.onTouchStartOrOnMouseDown&&i.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},e),n),{initial:p.slice(),xy:p,start:t.timeStamp||0})}))},s=t=>{e(((e,r)=>{const s="touches"in t;if(s&&t.touches.length>1)return e;if(t.timeStamp-e.start>r.swipeDuration)return e.swiping?Object.assign(Object.assign({},e),{swiping:!1}):e;const{clientX:n,clientY:a}=s?t.touches[0]:t,[o,l]=c([n,a],r.rotationAngle),d=o-e.xy[0],u=l-e.xy[1],p=Math.abs(d),h=Math.abs(u),m=(t.timeStamp||0)-e.start,k=Math.sqrt(p*p+h*h)/(m||1),g=[d/(m||1),u/(m||1)],f=function(e,t,r,s){return e>t?r>0?"Right":"Left":s>0?"Down":"Up"}(p,h,d,u),b="number"==typeof r.delta?r.delta:r.delta[f.toLowerCase()]||i.delta;if(p<b&&h<b&&!e.swiping)return e;const x={absX:p,absY:h,deltaX:d,deltaY:u,dir:f,event:t,first:e.first,initial:e.initial,velocity:k,vxvy:g};x.first&&r.onSwipeStart&&r.onSwipeStart(x),r.onSwiping&&r.onSwiping(x);let _=!1;return(r.onSwiping||r.onSwiped||r[`onSwiped${f}`])&&(_=!0),_&&r.preventScrollOnSwipe&&r.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},e),{first:!1,eventData:x,swiping:!0})}))},l=t=>{e(((e,r)=>{let s;if(e.swiping&&e.eventData){if(t.timeStamp-e.start<r.swipeDuration){s=Object.assign(Object.assign({},e.eventData),{event:t}),r.onSwiped&&r.onSwiped(s);const i=r[`onSwiped${s.dir}`];i&&i(s)}}else r.onTap&&r.onTap({event:t});return r.onTouchEndOrOnMouseUp&&r.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},e),n),{eventData:s})}))},d=e=>{document.removeEventListener(a,s),document.removeEventListener(o,d),l(e)},u=(e,t)=>{let n=()=>{};if(e&&e.addEventListener){const a=Object.assign(Object.assign({},i.touchEventOptions),t.touchEventOptions),o=[["touchstart",r,a],["touchmove",s,Object.assign(Object.assign({},a),t.preventScrollOnSwipe?{passive:!1}:{})],["touchend",l,a]];o.forEach((([t,r,s])=>e.addEventListener(t,r,s))),n=()=>o.forEach((([t,r])=>e.removeEventListener(t,r)))}return n},p={ref:t=>{null!==t&&e(((e,r)=>{if(e.el===t)return e;const s={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),s.cleanUpTouch=void 0),r.trackTouch&&t&&(s.cleanUpTouch=u(t,r)),Object.assign(Object.assign(Object.assign({},e),{el:t}),s)}))}};return t.trackMouse&&(p.onMouseDown=r),[p,u]}((e=>r.current=e(r.current,l.current)),{trackMouse:t})),[t]);return r.current=function(e,t,r,s){return t.trackTouch&&e.el?e.cleanUpTouch?t.preventScrollOnSwipe!==r.preventScrollOnSwipe||t.touchEventOptions.passive!==r.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:s(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:s(e.el,t)}):(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0}))}(r.current,l.current,d.current,h),p}},92968:function(e,t,r){r.d(t,{N:function(){return a}});var s=r(85893),i=r(67294);const n=({className:e,...t},r)=>(0,s.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:r,style:{display:"inline-block"},...t,children:(0,s.jsx)("path",{d:"M7.2 4C6.54 4 6 4.553 6 5.23v13.54c0 .677.54 1.23 1.2 1.23h9.6c.66 0 1.2-.553 1.2-1.23V5.23C18 4.554 17.46 4 16.8 4H7.2ZM12 6.462c1.98 0 3.6 1.66 3.6 3.692 0 2.031-1.62 3.692-3.6 3.692s-3.6-1.66-3.6-3.692c0-2.031 1.62-3.692 3.6-3.692Zm-.356.807c-.42.308-.837 1.224-.957 2.577h.957V7.27Zm.656 0v2.52h.956c-.06-1.294-.476-2.212-.956-2.52Zm-1.688.231c-.839.43-1.436 1.3-1.556 2.346h.957c.06-.923.239-1.73.6-2.346Zm2.775 0c.361.615.54 1.423.6 2.346h.957c-.12-1.046-.717-1.916-1.557-2.346Zm-4.33 2.961c.119 1.046.716 1.854 1.556 2.347-.361-.616-.54-1.423-.6-2.347h-.957Zm4.93 0c-.06.924-.3 1.794-.6 2.347.84-.43 1.437-1.3 1.557-2.347h-.957Zm-3.243.058c.06 1.293.476 2.212.956 2.52v-2.52h-.956Zm1.556 0v2.52c.42-.308.895-1.226.956-2.52H12.3Zm-3.9 6.404h7.2v1.23H8.4v-1.23Z"})}),a=(0,i.memo)((0,i.forwardRef)(n));a.displayName="Icon24RestrictionsVisa"},83117:function(e,t,r){r.d(t,{I:function(){return i}});var s=r(67294);const i=({fromProgress:e=15,toProgress:t=85,duration:r=30,step:i}={})=>{const{canStartNewInterval:n,startNewInterval:a}=(e=>{const[t,r]=(0,s.useState)(e);return{canStartNewInterval:t,startNewInterval:()=>r(Math.random())}})(e),[o,c]=(0,s.useState)(e),l=(0,s.useRef)(),d=1e3*r,u=i??d/t,p=(t-e)/(d/u),h=()=>{clearInterval(l.current),l.current=null};(0,s.useEffect)((()=>{if(l.current)return;let e=0,r=o;l.current=setInterval((()=>{e>=d||r>=t?h():(e+=u,r+=p,c(r))}),u)}),[n]);const m=(0,s.useCallback)((()=>{c(100),h()}),[]),k=(0,s.useCallback)((()=>{a(),c(e),h()}),[e]),g=(0,s.useCallback)((()=>{h()}),[]),f=(0,s.useCallback)((()=>{l.current||a()}),[]);return{progress:o,onFinish:m,onReset:k,onStop:g,onContinue:f}}},25777:function(e,t,r){r.d(t,{k:function(){return c}});var s=r(85893),i=r(67294),n=r(94184),a=r(54844),o={variables:"s__A_RowF_6k9EaC_ZWMPVA",progressBar:"s__MGj9xlgK7ZL0DnEsSidX",base:"s__xdSLhlQ8suVnO97y15lR",progress:"s__oJ6t5JdhUTbYWlhQHjtT",zeroHeight:"s__v2uWDNTVSjPKP7aI_VuQ",determinate:"s__QESKGAdk6wWiWSi4lzPF",indeterminate:"s__ZS2FgQDXN7KhYNDyAJZg",onLight:"s__EBrUorgjjv6cdzlqZpLr",onBright:"s__eO31yrgcn8wWgu2_mvWe",onDark:"s__pGfNDLCBGgc8PLXZEh0w"};const c=(0,i.forwardRef)(((e,t)=>{const{className:r,mod:i=a.Z.OnLight,definition:c,showBackground:l=!0,zeroHeight:d=!1}=e;let u=0;const p={};return e.definition===a.g.Determinate&&(u=e.progress??0,u=Math.min(u,100),u=Math.max(u,0),p.width=`${u}%`),(0,s.jsxs)("div",{ref:t,className:n(o.variables,o.progressBar,o[i],{[o.zeroHeight]:d},r),children:[l&&(0,s.jsx)("div",{className:o.base}),(0,s.jsx)("div",{className:n(o.progress,o[c]),style:p,"data-progress":u})]})}));c.displayName="ProgressBar"},54844:function(e,t,r){var s,i;r.d(t,{Z:function(){return s},g:function(){return i}}),function(e){e.OnLight="onLight",e.OnDark="onDark",e.OnBright="onBright"}(s||(s={})),function(e){e.Determinate="determinate",e.Indeterminate="indeterminate"}(i||(i={}))},67170:function(e,t,r){r.d(t,{U:function(){return T}});var s=r(85893),i=r(67294),n=r(94184),a=r(73935),o=r(37723),c=r(58509),l=r(19959),d=r(67192),u=r(11393),p=r(83557);const h=({title:e,onClose:t,noBottomPadding:r})=>{console.warn("Компонент ModalHeader deprecated. Переходите на готовый пресет для модалок с новым Header");const i=Boolean(e);return(0,s.jsxs)("div",{className:n("s__ZqpbFiwThTG4aBIIPozZ",{s__v6mfJLEqzBsrW8EZ4w26:i,s__eB_2UzDg7IAiqT1vadSa:r}),children:[e&&(0,s.jsx)("h3",{className:"s__mZUtm2NbpeMlq253zlOT",children:e}),t&&(0,s.jsx)("button",{className:"s__WVNhYp8xVOe7sLYDqHM_",onClick:t,children:(0,s.jsx)(p.Z,{className:"s__sL5tlYUsGGDrA8KwoGql"})})]})},m=(0,i.memo)(h);var k,g;!function(e){e.Up="up",e.Down="down",e.Left="left",e.Right="right",e.Fade="fade"}(k||(k={})),function(e){e.Small="small",e.Medium="medium"}(g||(g={}));var f={padding:"20px",variables:"s__LEASZNJDHY1zL0LrG9eM",modal:"s__ejwP1TJgSLTy8dfOIgdl",enterActive:"s__l3u5xoB3mT1DqP024Uhx",enterDone:"s__ZtY7YXnygaZz3EigW2FJ",exit:"s__EjslJQ2m9xggfeXmS83I",shadowed:"s__Bs9k92g7t5wQQ6Az8Uey",wrapper:"s__IrNeiwBLWgarHeDpmNZa",paddingWrapper:"s__e63aWqyp_ywq4of4EYpM",window:"s__ovKltoMelwTzdG_seEAX",content:"s__Q4XVQEJotRL6B8Jez8XH",header:"s__saoZysBb1cu8D7BqCRjt",footer:"s__AzK6MUH2sxKamwLtRRV4",withInnerPaddings:"s__dYGCEGYqeb_EjrnodpDW",withEmptyDefaultHeader:"s__CjQU7MR4LeekDUlT815U",sticky:"s__qbqlX6iLgLdTUBpK5cvd",modalOverflowHidden:"s___CJGd2ySobma_vPC8BVn",small:"s__hlM121vqpefzeoNf0EAS",medium:"s__UStiGgfHwZPrdlRj6SP5",up:"s__OkDFuJIZKmHDh9WvAOvT",down:"s__nWeZqmCC0kcKYdtluFau",left:"s__iwKkAH_2RQu2nmAfzT08",right:"s__EE5rfHb2twc0DxOarhHc",fade:"s__QR0o1Ceu6qQcsno99aw4"};const b="js-open",x={enterActive:f.enterActive,enterDone:n(f.enterDone,b),exit:f.exit};class _ extends i.Component{constructor(...e){super(...e),this.state={mounted:!1},this.id=(0,l.h)(),this.modalRef=i.createRef(),this.windowRef=i.createRef(),this.isEnterTransitionDone=!1,this.animationTimeout=this.props.animationCancelling?0:500,this.container=(0,u.V8)(),this.hasDefaultHeader=()=>"string"==typeof this.props.header||!this.props.header,this.hasEmptyDefaultHeader=()=>!this.props.hideHeader&&this.hasDefaultHeader()&&!this.props.header,this.renderHeaderContent=()=>{const{onClose:e,header:t,withInnerPaddings:r}=this.props;return this.hasDefaultHeader()?(0,s.jsx)(m,{title:t,onClose:e,noBottomPadding:r}):t},this.setFixedBackgroundContent=()=>this.fixedBackgroundContent("add"),this.unsetFixedBackgroundContent=()=>{this.container&&!this.container.querySelector(".js-open")&&this.fixedBackgroundContent("remove")},this.handleClick=e=>{e.stopPropagation(),this.isEnterTransitionDone&&this.isTopVisibleModal()&&(this.windowRef.current?.contains(e.target)||this.props.onClose&&(0,d.B)(this.animationTimeout,this.props.onClose))},this.handleKeyDown=e=>{this.isTopVisibleModal()&&"Escape"===e.key&&this.props.onClose&&(0,d.B)(this.animationTimeout,this.props.onClose)},this.onEnterTransitionStart=()=>{this.props.onEnterTransitionStart&&this.props.onEnterTransitionStart()},this.onEnterTransitionEnd=()=>{this.setFixedBackgroundContent(),this.isEnterTransitionDone=!0,this.props.onEntered&&this.props.onEntered(this.modalRef),this.props.onEnterTransitionEnd&&this.props.onEnterTransitionEnd()},this.onExitTransitionStart=()=>{this.unsetFixedBackgroundContent(),this.isEnterTransitionDone=!1,this.props.onExitTransitionStart&&this.props.onExitTransitionStart()},this.onExitTransitionEnd=()=>{this.props.onExitTransitionEnd&&this.props.onExitTransitionEnd()}}isTopVisibleModal(){return(0,u.pI)(this.id)}componentDidMount(){this.container=(0,u.V8)(),this.setState({mounted:!0})}componentDidUpdate(e){this.modalRef.current&&e.visible!==this.props.visible&&(this.props.onVisibilityChange&&this.props.onVisibilityChange(this.props.visible),this.props.visible?(0,c.Qp)(this.modalRef.current,{allowTouchMove:(0,u.rU)(this.modalRef.current)}):(0,c.tG)(this.modalRef.current),window.addEventListener("keydown",this.handleKeyDown))}componentWillUnmount(){this.modalRef.current&&(this.modalRef.current.classList.remove(b),(0,c.tG)(this.modalRef.current)),this.unsetFixedBackgroundContent(),window.removeEventListener("keydown",this.handleKeyDown)}render(){if(!(0,u.V8)()||!this.state.mounted)return null;const{className:e,footer:t,children:r,fixedFooter:i,fixedHeader:c,visible:l,animationType:d,animationCancelling:p,width:h,withInnerPaddings:m,hideHeader:k,paddingClassName:g,headerClassName:b,contentClassName:_,onScroll:w,wrapperClassName:y,rootClassName:v,testId:C}=this.props,S=p?void 0:f[d],E=(0,u.Ik)(this.id);return(0,a.createPortal)((0,s.jsx)(o.Z,{classNames:x,timeout:{exit:this.animationTimeout},appear:l,in:l,onEnter:this.onEnterTransitionStart,onEntered:this.onEnterTransitionEnd,onExit:this.onExitTransitionStart,onExited:this.onExitTransitionEnd,mountOnEnter:!0,unmountOnExit:!0,nodeRef:this.modalRef,children:(0,s.jsx)("div",{ref:this.modalRef,className:n(f.variables,f.modal,S,v,{[x.enterDone]:l&&this.isEnterTransitionDone,[f.shadowed]:!0}),onClick:this.handleClick,"data-test-id":C??"modal",onScroll:w,...E,children:(0,s.jsx)("div",{className:n(f.wrapper,y,{[f[h]]:Boolean(h)}),children:(0,s.jsx)("div",{className:n(f.paddingWrapper,g),children:(0,s.jsxs)("div",{ref:this.windowRef,className:n(f.window,e),children:[!k&&(0,s.jsx)("div",{className:n(f.header,b,{[f.sticky]:c}),children:this.renderHeaderContent()}),r&&(0,s.jsx)("div",{className:n(f.content,_,{[f.withInnerPaddings]:m,[f.withEmptyDefaultHeader]:m&&this.hasEmptyDefaultHeader()}),children:r}),t&&(0,s.jsx)("div",{className:n(f.footer,{[f.sticky]:i}),children:t})]})})})})}),(0,u.V8)())}fixedBackgroundContent(e){try{document.getElementsByTagName("html")[0].classList[e](this.props.overflowClassName)}catch(e){}}}_.defaultProps={overflowClassName:f.modalOverflowHidden,animationType:k.Down,fixedHeader:!0,fixedFooter:!0};var w=r(51057),y=r(86064),v=r(85394),C={variables:"s__Bv_jy4pOFPPYu_3BiHK1","ticket-modal-bg-grey":"s__MWcmZw9dLpBB0HoHTe7g",root:"s__OgZKBM1GxJ5Aa1VNvrsH",paddingWrapper:"s__lNl2KRdWiG4GmRILlULy",body:"s__sl6SnnZuwXb428mOmbnf",main:"s__REOAxIyjvX5Aq5H7eQc7",content:"s__qJrRN5IsVy_jrw4ts6Ek"},S=r(45338),E=function(e){const{children:t,className:r,style:i,...n}=e,a=(0,S.QS)(n);return(0,s.jsx)("div",{...a,style:i,className:r,children:t})};const T="TICKET_MAIN_MODAL_CLASSNAME";(0,i.memo)((e=>{const t=!!(0,v.c)(w.AV)?.is([y.L.Mobile,y.L.MobileLandscape]),r=(0,i.useMemo)((()=>"content"===e.type?k.Up:t?k.Right:k.Up),[e.type,t]);return(0,s.jsx)(_,{...e.modal,className:n(C.variables,C.root,C[e.type],e.className,{[C["ticket-modal-bg-grey"]]:e.isBackgroundGrey}),rootClassName:n(C.variables,T),paddingClassName:C.paddingWrapper,header:e.header,footer:e.footer,fixedFooter:e.fixedFooter,animationType:r,children:(0,s.jsx)(E,{className:C.body,delta:50,onSwipedRight:e.modal.onClose,children:e.children})})})).displayName="TicketModal"},59191:function(e,t,r){r.d(t,{t:function(){return B}});var s=r(85893),i=r(67294),n=r(94184),a=r(28225),o=r(47166),c=r(97650),l=r(44619),d=r(49963),u=r(95877);const p=o.bind({wrapper:"s__ykmf54yQ7GtXCpK7A4ct",content:"s__YabOnYPildD62njpkVJ3","root-wrapper":"s__frzv4Fn_7nWrzcBOYgEW","root-wrapper_hidden":"s__Xl_vmpsny21pjdETx_XJ",root:"s__QwAAiOWxxE2P4LzGyW8Y","left-fill-helper":"s__Oi2lkg6Nz55H4DTMzXhA","icon-wrapper":"s__MO6Drzc9X3FjvCTKYzzc","informer-icon":"s__OAGCTwoXs7o0fIUDv8sH"}),h=({text:e,color:t,backgroundColor:r,iconUrl:n,isStickyDrawer:a,isStickyDrawerVisible:o})=>{const c=(0,i.useRef)(null),[h,m]=(0,i.useState)(),{startText:k,endText:g}=((e,t)=>{if(!t)return{startText:"",endText:""};if(!e)return{startText:t,endText:""};const r=t.split(" "),s=r.pop()||"";return{startText:`${r.join(" ")} `,endText:s}})(Boolean(n),e),f=a&&!o;return(0,i.useEffect)((()=>{c.current&&m({height:`${c.current.scrollHeight}px`})}),[]),(0,s.jsx)("div",{ref:c,style:f?void 0:h,className:p("root-wrapper",{"root-wrapper_hidden":f}),children:(0,s.jsxs)("div",{className:p("root"),children:[(0,s.jsxs)(d.x,{tag:"span",type:l.y.Body3Regular,className:p("content"),style:{color:t,backgroundColor:r},children:[k,Boolean(n)&&(0,s.jsxs)("span",{className:p("icon-wrapper"),children:[g,u.Xz,(0,s.jsx)("img",{src:n,className:p("informer-icon"),alt:"informer-icon"})]})]}),(0,s.jsx)("div",{style:{backgroundColor:r},className:p("left-fill-helper")})]})})},m=({informers:e,isStickyDrawer:t})=>(0,s.jsx)("div",{className:p("wrapper"),children:e.map((({text:e,color:r,backgroundColor:i,iconUrl:n,isStickyDrawerVisible:a})=>(0,s.jsx)(h,{text:e,color:r,backgroundColor:i,iconUrl:n,isStickyDrawer:t,isStickyDrawerVisible:a},e)))}),k=o.bind({"cashback-wrapper":"s__3gRPlL9fRMe2TwGJKjco","cashback-wrapper_hidden":"s__D3Gvv_8PM8OFBF_zbCyR",cashback:"s__hHeTAOlzetCtFZ3jFUpL"}),g=(0,i.memo)((({isVisible:e,children:t})=>{const r=(0,i.useRef)(null),[n,a]=(0,i.useState)();return(0,i.useEffect)((()=>{r.current&&a({height:`${r.current.scrollHeight}px`})}),[]),(0,s.jsx)("div",{ref:r,className:k("cashback-wrapper",{"cashback-wrapper_hidden":!e}),style:e?n:void 0,children:(0,s.jsx)("div",{className:k("cashback"),children:t})})}));g.displayName="ProposalCashback";const f=o.bind({variables:"s__nuhEuIMiYfQoToRFF4Hp",root:"s__KS_xESz3fkO6BTG2NfsL","is-hoverable":"s__O4Ry_w4jJVRyKOcVFs_C",logo:"s__I0SdF9cZQxI2Z5M8XP9G",proposal:"s__DKsLppGtAT_GJqW_XTAw",gate_info:"s__fIhQbyAnKzWB7_sjgVWz",texts:"s__BipcmyCNXnGtPje87t0P",cashback:"s__JBzXct6rgm7bR71OnbQw",button:"s__iQwWjJy37lD0SwIjgRx5",small:"s__VNGPOG6ySAStRjEmozYz","expired-text":"s__SvLMRGyXIbvbim7koLUv","type-title-icon":"s__yn3r5SrIKYl8Ugb6bShT","icon-wrapper":"s__oqmasXoN8MGe8PaYoqyB","loading-subtitle":"s__SnIlPM1tzDcjGXYTZljY","subtitle-flare":"s__Y3m0Uk7Emb12T9Etjvy1"}),b=(0,i.memo)((({className:e,title:t,text:r,logoSlot:n,buttonSlot:a,cashbackTitleSlot:o,isExpired:u,isLoading:p,onProposalInView:h,titleTextType:k=l.y.Body1Semi,metaInfo:b,onClick:x,informers:_,isHoverable:w=!0,isSmallButtonSlot:y,isStickyDrawer:v})=>{const C=(0,i.useRef)(),S=(0,i.useRef)(!1);(0,i.useEffect)((()=>()=>{C.current&&clearTimeout(C.current)}),[]);const E=(0,i.useCallback)((()=>{C.current&&clearTimeout(C.current)}),[]);return(0,s.jsxs)("div",{className:f("variables","root",e,{"is-hoverable":w}),onClick:x,"data-metainfo":b,children:[(0,s.jsxs)(c.df,{className:f("proposal"),onChange:e=>{!S.current&&h&&(e?C.current=setTimeout((()=>{h(),S.current=!0}),1e3):E())},children:[(0,s.jsxs)("div",{className:f("gate_info"),children:[(0,s.jsx)("div",{className:f("logo"),children:n}),(0,s.jsxs)("div",{className:f("texts"),children:[(0,s.jsx)(d.x,{type:k,truncateMode:l.k.SingleLine,className:f({"expired-text":u}),children:t}),(0,s.jsx)(d.x,{type:l.y.Body3Regular,className:f({"loading-subtitle":p}),truncateMode:l.k.SingleLine,children:r||""})]})]}),(0,s.jsx)("div",{className:f("button",{small:y}),children:a})]}),_&&Boolean(_?.length)&&(0,s.jsx)(m,{informers:_,isStickyDrawer:v}),o&&(0,s.jsx)(g,{isVisible:!v,children:o})]})}));b.displayName="ProposalCard";var x=r(55057),_=r(78590);const w=(0,i.memo)((({className:e,agentImageUrl:t})=>{const{hasLoaded:r}=(0,_.u)(t??"");return t&&r?(0,s.jsx)("img",{className:n(e,"s__rsD_ayQZMxXSyl_I4G0Y"),src:t,alt:""}):(0,s.jsx)(x.q,{className:n(e,"s__usUyItpt_5QC2WMgHjca")})}));w.displayName="ProposalCardLogo";const y="FIRST_PROPOSAL";var v=r(24530),C=r(1156),S=r(39535);const E=o.bind({button:"s__DAL_jtNhq4q3XICy8jGQ"}),T=(0,i.memo)((({textSlot:e,onClick:t=v,disabled:r=!1,isLoading:n})=>{const a=(0,i.useCallback)((e=>{t&&(e.stopPropagation(),t())}),[t]);return(0,s.jsx)(C.z,{mod:S.Ly.Orange,priority:S.Ji.Primary,onClick:a,className:E("button"),disabled:r,shape:S.jL.Round,progress:n,children:(0,s.jsx)(d.x,{type:l.y.Body2Semi,children:e})})}));T.displayName="DefaultCardButton";const D=(0,i.memo)((({onErrorClick:e,isModalProposal:t=!1})=>{const{t:r}=(0,a.useTranslation)("uiKit");return(0,s.jsx)(b,{className:n(y,"s__xAKExa6Glb4V4KMEhWsM",{s__VH2XObrfMGPoVFzeA9hg:t}),logoSlot:(0,s.jsx)(w,{}),title:r("versus_drawer.states.error.title"),titleTextType:l.y.Body2Semi,onClick:e,buttonSlot:e&&(0,s.jsx)(T,{textSlot:r("versus_drawer.states.error.button"),onClick:e})})}));D.displayName="ExpiredCard";var j=r(86523);const P=(0,i.memo)((({price:e,onUpdateClick:t,isModalProposal:r=!1})=>{const{t:i}=(0,a.useTranslation)("uiKit"),o=(0,j.d)("price_short",{value:e.value,currency:e.currency.toUpperCase()});return(0,s.jsx)(b,{className:n(y,"s__D4aSDZCZKWCYwtDcDbr8",{s__svF1IDVOOXbBq3YGKBl0:r}),logoSlot:(0,s.jsx)(w,{}),title:o,text:i("versus_drawer.states.expired.text"),onClick:t,buttonSlot:(0,s.jsx)(T,{textSlot:i("buy_button.update"),onClick:t}),titleTextType:l.y.Title4Bold,isExpired:!0})}));P.displayName="ExpiredCard";const N=(0,i.memo)((({shouldShowUpdateText:e,customBtnText:t})=>{const{t:r}=(0,a.useTranslation)("uiKit");return e?(0,s.jsx)(d.x,{type:l.y.Body2Semi,children:r("buy_button.update")}):t?(0,s.jsx)(d.x,{type:l.y.Body2Semi,children:t}):(0,s.jsx)(d.x,{type:l.y.Body2Semi,children:r("buy_button.buy")})}));N.displayName="BuyButtonContent";const L=o.bind({root:"s__NIcN6pqVEFvcWl2KuaXj",disabled:"s__CWNOXGsEru37HL9dp_Mn"}),I=(0,i.memo)((({proposal:e,shouldShowUpdateText:t=!1,onClick:r,customBtnText:n,className:a,metaInfo:o,disabled:c,isLoading:l,enabledOnProgress:d})=>{const u=e.isPrimaryButton?{mod:S.Ly.Orange,priority:S.Ji.Primary}:{mod:S.Ly.Default,priority:S.Ji.Secondary},p=(0,i.useCallback)((e=>{r&&(e.stopPropagation(),r(e))}),[r]);return(0,s.jsx)(C.z,{onClick:p,"data-metainfo":o,className:L("root",a),disabled:c,shape:S.jL.Round,progress:l,enabledOnProgress:d,...u,children:(0,s.jsx)(N,{shouldShowUpdateText:t,customBtnText:n})})}));I.displayName="BuyButton";var F={root:"s__Do7geIjnknqsSlRCiKXB","is-modal-root":"s__nbmyLEHhY2cYAYJ7iRhQ",proposal:"s__e71W6W_Vfk77AAB4LMGv","is-modal-proposal":"s__FhXaf9fuD6rmONvmbL8D","buy-button":"s__gdYTKEsmdVMuoVY7gs1m",small:"s__qOggDlUSB5DVNP1BOC01"};const M=o.bind(F),O=(0,i.memo)((({className:e,isExpired:t,isLoading:r,getCashbackTitle:n,onClick:o,proposal:c,firstOperatingCarrier:d,onProposalInView:u,isDisabled:p,isSmallButton:h,isStickyDrawer:m})=>{const{t:k}=(0,a.useTranslation)("uiKit"),g=(0,i.useCallback)((e=>{o&&o(e,c,"info_zone")}),[o,c]),f=(0,i.useCallback)((e=>{o&&o(e,c,"button_zone")}),[o,c]),{cashback:x,agentLabel:_,price:y,currency:v,typeTitle:C,agentImageUrl:S,informers:E}=c,T=(0,j.d)("price_short",{value:y,currency:v.toUpperCase()}),D=n((0,i.useMemo)((()=>x&&v?{value:x,currency:v}:null),[x,v])),{title:P,text:N}=(({translation:e,agentLabel:t,shortPrice:r,isLoading:s,isExpired:i,typeTitle:n})=>i?{title:r,text:e("versus_drawer.states.expired.text")}:s?{title:r,text:e("versus_drawer.states.loading.find",{agentLabel:t})}:{title:r,text:n})({translation:k,agentLabel:_,shortPrice:T,isLoading:r,isExpired:t,typeTitle:C}),L=(0,i.useCallback)((()=>{u&&u(c)}),[u,c]),F=(0,i.useMemo)((()=>JSON.stringify({price_rub:c.price,gate_id:c.agentId,gate:c.agentLabel,first_operating_carrier:d})),[d,c]);return(0,s.jsx)(b,{className:e,title:P,text:N,logoSlot:(0,s.jsx)(w,{agentImageUrl:S}),buttonSlot:(0,s.jsx)(I,{className:M("buy-button",{small:h}),shouldShowUpdateText:t,proposal:c,disabled:p,onClick:f,isLoading:r,enabledOnProgress:!0}),isSmallButtonSlot:h,cashbackTitleSlot:D,isExpired:t,isLoading:r,onProposalInView:L,metaInfo:F,onClick:g,titleTextType:l.y.Title4Bold,informers:E,isStickyDrawer:m})}));O.displayName="Proposal";const R=({price:e})=>{const t=(0,j.d)("price_short",{value:e.value,currency:e.currency.toUpperCase()});return(0,s.jsx)("span",{children:t})},U=(0,i.memo)((({ticketPrice:e,isModalProposal:t=!1})=>{const{t:r}=(0,a.useTranslation)("uiKit"),i=e?(0,s.jsx)(R,{price:e}):r("versus_drawer.states.loading.button");return(0,s.jsx)(b,{className:n(y,"s__BRe8FYhL3QjtK8W2CwOs",{s__CZdfKw0oPhiehxenZ4Oq:t}),logoSlot:(0,s.jsx)(w,{}),title:r("versus_drawer.states.loading.title"),isHoverable:!1,buttonSlot:(0,s.jsx)(T,{disabled:!0,textSlot:i,isLoading:!0})})}));U.displayName="LoadingCard";const B=(0,i.memo)((({className:e,isSmallButton:t,isModal:r,proposals:i,isExpired:a,isLoading:o,hasError:c=!1,proposalListRef:l,getCashbackTitle:d,onProposalClick:u,onErrorClick:p,firstOperatingCarrier:h,ticketPrice:m,onUpdateClick:k,onProposalInView:g,isDisabled:f,isStickyDrawer:b})=>c?(0,s.jsx)("div",{className:n(e,F.root),children:(0,s.jsx)(D,{onErrorClick:p})}):0===i.length&&a&&m?(0,s.jsx)("div",{ref:l,className:n(e,F.root),children:(0,s.jsx)(P,{onUpdateClick:k,price:m})}):0!==i.length&&m?(0,s.jsx)("div",{ref:l,className:n(e,F.root,{[F["is-modal-root"]]:r}),children:i.map(((e,i)=>{const c=(e=>0===e?y:1===e?"SECOND_PROPOSAL":void 0)(i),{id:l,position:p}=e,m=`${l}${p}`;return(0,s.jsx)(O,{className:n(F.proposal,c,{[F["is-modal-proposal"]]:r}),isExpired:a,isLoading:o,getCashbackTitle:d,onClick:u,proposal:e,firstOperatingCarrier:h,onProposalInView:g,isDisabled:f,isSmallButton:t,isStickyDrawer:b},m)}))}):(0,s.jsx)("div",{ref:l,className:n(e,F.root),children:(0,s.jsx)(U,{ticketPrice:m})})));B.displayName="ProposalList"}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/shared-58d7a464959e2a95ade5fd5507da2cf060c520c5.f3edad737c03ebbaab54.min.js.map