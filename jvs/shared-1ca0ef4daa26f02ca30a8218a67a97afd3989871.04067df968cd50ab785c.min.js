"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[51443],{86042:function(e,t,r){r.d(t,{A:function(){return n}});var o=r(98116),s=r(30091);const a=(0,o.createEffect)((({title:e,props:t})=>{window&&(t&&UXS?.addProperties(t),UXS?.sendEvent(e))}),{sid:"7scn0r"}),i=(0,o.createEvent)({sid:"nl6izj"});(0,o.sample)({and:[{clock:i,target:a}],or:{sid:"-q8ysh0"}});const n=(0,s.Yn)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/platform/services/ux_feedback/index.ts",api:{inputs:{sendUxFeedback:i}}})},90309:function(e,t,r){r.d(t,{x:function(){return h}});var o=r(30091),s=r(98116),a=r(62423),i=r(51456),n=r(47956);const l=(0,s.createStore)(!1,{sid:"-vtusq0"}),{openGuidesPaywallModal:c,closeGuidesPaywallModal:d}=(0,s.createApi)({and:[l,{openGuidesPaywallModal:(e,t)=>!0,closeGuidesPaywallModal:()=>!1}],or:{sid:"-1g39uv"}}),u=(0,s.createEvent)({sid:"-mwg93c"}),p=(0,s.createEvent)({sid:"-gtoo5"}),m=(0,s.restore)(p,a.N9.PaywallTrap,{sid:"n292oq"});(0,s.sample)({and:[{clock:c,source:{tabs:i.mH.outputs.$tabs,source:n.I.outputs.$trapSource},fn:({tabs:e,source:t},r)=>{const o=e?.find((({id:e})=>r.tab===e))?.type;return{...r,tab:o,source:t}},target:u}],or:{sid:"-oop5r8"}});const y={openGuidesPaywallModal:c,closeGuidesPaywallModal:d,paywallOpenedAnalytics:u,setPaywallEntrypoint:p},g={$isPaywallOpened:l,$paywallEntrypoint:m},h=(0,o.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/guides_paywall/index.ts",api:{inputs:y,outputs:g}})},71457:function(e,t,r){r.d(t,{U5:function(){return M},A_:function(){return Fe}});var o=r(30091),s=(r(21703),r(98116)),a=r(76588),i=r(80472),n=r(54448),l=r(51717),c=r(27636),d=r(78260),u=r(8661),p=r(41832),m=r(47956),y=r(82214),g=r(87007),h=r(35529),f=r(2885);const _=(0,h.Record)({link:h.String,type:h.String}),v=(0,h.Record)({title:h.String,is_primary:h.Boolean,icon:f.pC.optional()}),P=v.extend({hotel_id:h.String,gate_id:h.String,adults:h.Number,children:(0,h.Array)(h.Number),checkin:h.String,checkout:h.String}),b=v.extend({url:h.String}),E=(0,h.Record)({content:(0,h.Record)({favorite:(0,h.Record)({text:h.String}),not_favorite:(0,h.Record)({text:h.String})})}),k=(0,h.Record)({type:(0,h.Literal)("book_hotel"),payload:P}),x=(0,h.Record)({type:(0,h.Literal)("discover"),payload:v}),S=(0,h.Record)({type:(0,h.Literal)("show_in_map"),payload:v}),$=(0,h.Record)({type:(0,h.Literal)("main"),payload:v}),w=(0,h.Record)({type:(0,h.Literal)("all_hotels"),payload:v}),L=(0,h.Record)({type:(0,h.Literal)("book_hotel_external"),payload:b}),j=(0,h.Record)({type:(0,h.Literal)("favorite"),payload:E}),C=(0,h.Union)(k,x,S,$,w,L,j),R=(0,h.Array)(C),I=(0,h.Record)({url:h.String,description:(0,h.Record)({text:h.String,expanded:h.String.optional()}).optional()}),A=(0,h.Record)({type:(0,h.Literal)("image_gallery"),block:(0,h.Record)({images:(0,h.Array)(I)})}),O=(0,h.Record)({type:(0,h.Literal)("title"),block:(0,h.Record)({title:h.String})}),D=(0,h.Record)({type:(0,h.Literal)("description"),block:(0,h.Record)({description:h.String})}),T=(0,h.Record)({type:(0,h.Literal)("advice"),block:(0,h.Record)({title:h.String,text:h.String,provider:f.zq})}),F=(0,h.Record)({type:(0,h.Literal)("restrictions"),block:(0,h.Record)({restriction:f.xE})}),N=(0,h.Record)({type:(0,h.Literal)("tags"),block:(0,h.Record)({tags:(0,h.Array)(h.String),badges:(0,h.Array)(f.dX).optional()})});let M;!function(e){e.INSTAGRAM="instagram",e.BROWSER="browser",e.BROWSER_EXTERNAL="browser_external",e.MAP="map"}(M||(M={}));const B=(0,h.Union)((0,h.Literal)(M.BROWSER),(0,h.Literal)(M.BROWSER_EXTERNAL),(0,h.Literal)(M.INSTAGRAM),(0,h.Literal)(M.MAP)),z=(0,h.Record)({type:B,coordinates:f.i2.optional(),icon:f.pC.optional(),links:(0,h.Array)(_).optional(),subtitle:h.String.optional(),title:h.String,url:h.String.optional()}),G=(0,h.Record)({type:(0,h.Literal)("buttons"),block:(0,h.Record)({buttons:(0,h.Array)(z)})}),U=(0,h.Record)({header:h.String,places:(0,h.Array)(f.Bv),group_id:h.Number}),H=(0,h.Record)({type:(0,h.Literal)("poi_carousel"),block:U}),q=(0,h.Record)({type:(0,h.Literal)("bullets"),block:f.DL}),V=(0,h.Record)({text:h.String,header:h.String,emoji:f.pC}),Q=(0,h.Record)({type:(0,h.Literal)("bullet_with_header"),block:(0,h.Record)({bullet:V})}),Y=(0,h.Record)({type:(0,h.Literal)("landmark"),block:(0,h.Record)({landmark:h.String})}),W=(0,h.Record)({id:h.String,group_id:h.Number,title:h.String,subtitle:h.String,image_url:h.String,premium:f.UH,open_type:f.vu,favorite:(0,h.Record)({icon:f.pC,is_favorite:h.Boolean}).optional(),browser_url:h.String.optional()}),J=(0,h.Record)({type:(0,h.Literal)("places_list"),block:(0,h.Record)({header:h.String,items:(0,h.Array)(W)})}),Z=(0,h.Record)({id:h.String,icon:f.pC,title:h.String,map_place:(0,h.Record)({coordinates:f.i2,links:(0,h.Array)(_)})}),X=(0,h.Record)({type:(0,h.Literal)("points_list"),block:(0,h.Record)({header:h.String,items:(0,h.Array)(Z)})}),K=(0,h.Record)({id:h.String,title:h.String,subtitle:h.String.optional(),price:f.ti.optional(),image_url:h.String,badge:f.dX}),ee=K.extend({type:(0,h.Literal)("place")}),te=K.extend({type:(0,h.Literal)("external"),link:h.String,link_v2:h.String.optional()}),re=(0,h.Union)(ee,te),oe=(0,h.Record)({type:(0,h.Literal)("places_carousel"),block:(0,h.Record)({header:h.String,items:(0,h.Array)(re)})}),se=(0,h.Union)(A,O,D,T,F,N,G,H,q,Q,Y,J,X,oe),ae=(0,h.Record)({trap_id:h.Number,content_id:h.String.optional(),content_name:h.String.optional(),origin:h.String.optional(),destination:h.String.optional(),depart_date:h.String.optional(),return_date:h.String.optional(),tab:h.String.optional(),tab_id:h.Number.optional(),original_tab_id:h.Number.optional()}),ie=(0,h.Record)({share_link:h.String.optional()}),ne=(0,h.Record)({is_favorite:h.Boolean,onboarding:(0,h.Record)({title:h.String,button_text:h.String,icon:f.pC})}),le=(0,h.Record)({city_map_ark_id:h.String,iata:h.String.optional(),city_map_title:h.String,action_buttons:R.optional(),favorite:ne.optional(),group_type:h.String,group_id:h.Number,original_group_id:h.Number.optional(),blocks:(0,h.Array)(se),analytics:ae,share_info:ie});var ce=r(44904),de=r(28257);const{$apiPrefix:ue,$defaultQuery:pe,$defaultHeaders:me}=u.D.outputs,ye=(0,d.cr)("guides",{name:"travel_map_poi",samplingRate:.3}),ge=(0,s.withFactory)({sid:"-e47nxn",fn:()=>(0,a.s5)({name:"guides_poi_blocks",params:(0,s.withFactory)({sid:"ssezni",fn:()=>(0,a.t6)()}),enabled:(0,s.combine)({and:[{poi:y.l.outputs.$poi,currency:p.y.outputs.$currency},({poi:e,currency:t})=>Boolean(e)&&Boolean(t)],or:{sid:"ohlylz"}}),request:{method:"GET",url:(0,s.combine)({and:[{apiPrefix:ue,poi:y.l.outputs.$poi},({apiPrefix:e,poi:t})=>`${e}/v3/blocks/${t}`],or:{sid:"gvxdkq"}}),query:{source:(0,s.combine)({and:[{defaultQuery:pe,currency:p.y.outputs.$currency,group_id:y.l.outputs.$layer,searchHotelParams:g.$o.outputs.$searchHotelParams,source:m.I.outputs.$poiQueryOpenSource},({defaultQuery:e,currency:t,group_id:r,searchHotelParams:o,source:s})=>{const a={...e,...o,source:s,currency:t};return null!==r&&(a.group_id=r),a}],or:{sid:"-1xobe5"}}),fn:(e,t)=>{const r=t;return e?.minPrice&&(r["source_context.min_price"]=e.minPrice.value),r}},headers:me},response:{contract:(0,i.v)(le)}})}),{$data:he,$error:fe,reset:_e,finished:{failure:ve}}=ge,Pe=ge.start,be=(0,s.withFactory)({sid:"b5dou",fn:()=>(0,n.or)(ge.$idle,ge.$pending)}),[Ee,ke]=(0,s.withFactory)({sid:"udsthw",fn:()=>(0,c.K)(he)}),{$actionButtons:xe,$isDistrictData:Se,$cityMapTitle:$e,$poiAnalytics:we,$groupId:Le,$originalGroupId:je,$favoriteOnboarding:Ce,$favorite:Re,$shareLink:Ie}=(0,s.withFactory)({sid:"cxv6l1",fn:()=>(0,l.X)({source:Ee,shape:{$actionButtons:e=>e?.action_buttons??null,$isDistrictData:e=>"districts"===e?.group_type,$cityMapTitle:e=>e?.city_map_title??null,$poiAnalytics:e=>e?.analytics??null,$groupId:e=>e?.group_id??null,$originalGroupId:e=>e?.original_group_id??null,$favoriteOnboarding:e=>e?.favorite?.onboarding??null,$favorite:e=>e?.favorite??null,$shareLink:e=>e?.share_info.share_link??null}})}),Ae=xe.map((e=>{if(!e)return null;return e.find((e=>"favorite"===e.type))||null}));(0,s.sample)({and:[{source:ve,filter:a.QO,fn:()=>new Error("travel_map_poi contract validation failed"),target:ye.sendErrorLog}],or:{sid:"f6dc8s"}}),(0,s.sample)({and:[{clock:[y.l.outputs.$poi.updates,p.y.outputs.$currency.updates],target:_e}],or:{sid:"fa7web"}}),(0,s.sample)({and:[{clock:y.l.outputs.$poi,filter:e=>!e,target:_e}],or:{sid:"fq5xls"}}),(0,s.sample)({and:[{source:fe,filter:e=>{const t=e?.status;return 404===t},target:[de.u.inputs.show,ce.Y.inputs.close]}],or:{sid:"g50dmj"}});const Oe={fetch:Pe,reset:_e},De={$data:Ee,$isLoading:be,$error:fe,$isDistrictData:Se,$actionButtons:xe,$cityMapTitle:$e,$poiAnalytics:we,$favoriteButton:Ae,$favorite:Re,$favoriteOnboarding:Ce,$groupId:Le,$shareLink:Ie,$originalGroupId:je},Te={mapPoiQuery:ge,$dataOverride:ke},Fe=(0,o.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/guides_poi_blocks_query/index.ts",api:{inputs:Oe,outputs:De,internals:Te}})},59700:function(e,t,r){r.d(t,{O:function(){return q}});var o=r(98116),s=r(51717),a=r(48695),i=r(30091),n=r(94547),l=r(15863),c=r(54428),d=r(38387),u=r(35529);const p=(0,u.Record)({guideId:u.String.nullable(),path:u.String.nullable(),place_opened_timestamp:u.String});var m=r(77802);const y=e=>{if(e?.path){const t=new URLSearchParams(e.path),r=t.get(m.Fx)??null,o=t.get(m.Ac)??null,s=t.get(m.aJ)??"",a=Number(t.get(m.Uf)),{lon:i,lat:n}=(0,m.wO)(s)??{};return{place:o,guideId:e.guideId??null,group:r?Number(r):null,place_opened_timestamp:Number(e.place_opened_timestamp),lon:i??null,lat:n??null,zoom:Number.isNaN(a)?null:a}}return null},g=(e,{lat:t,lon:r,zoom:o})=>e.replace("{latlon}",(0,m.Q)(t,r)).replace("{zoom}",`${o}`);var h=r(82214),f=r(95628),_=r(99935),v=r(71457),P=r(44904),b=r(73472),E=r(47956);const{setLayer:k,setPoi:x}=h.l.inputs,{$group:S}=h.l.outputs,{$guideId:$}=f.R.outputs,{$data:w,$mapLoaded:L}=_.s.outputs,{$data:j}=v.A_.outputs,{$isOpened:C}=P.Y.outputs,{setMapParams:R}=m.aj.inputs,{$isOpen:I}=b._.outputs,{open:A}=E.I.inputs,{$isMobile:O}=d.l.outputs,D=(0,o.createEvent)({sid:"-x6ohj6"}),T=(0,n.Yu)("guides_recently_watched_place",{adapter:n.j$.json({contract:p.nullable()})}),F=(0,o.createEffect)(T.write,{sid:"-hcw4ux"}),N=(0,o.createStore)(y(T.read()),{sid:"-28awf5"}).on(F.done,((e,{params:t})=>y(t))),{$isTimeExpired:M,$isDuringLastDayOpened:B,$recentlyViewedPlaceId:z}=(0,o.withFactory)({sid:"s38ete",fn:()=>(0,s.X)({source:N,shape:{$isTimeExpired:e=>!e?.place_opened_timestamp||Date.now()-e.place_opened_timestamp>6048e5,$isDuringLastDayOpened:e=>!!e?.place_opened_timestamp&&Date.now()-e.place_opened_timestamp<864e5,$recentlyViewedPlaceId:e=>e?.guideId}})}),G=(0,o.combine)({and:[{isGuidesPage:I,guideId:$,isDuringLastDayOpened:B,recentlyViewedPlaceId:z,recentlyViewedPlace:N},({isGuidesPage:e,guideId:t,isDuringLastDayOpened:r,recentlyViewedPlaceId:o,recentlyViewedPlace:s})=>{const{lat:a,lon:i,zoom:n}=s??{};return e&&r&&t===o&&a&&i&&n?{latitude:a,longitude:i,zoom:n}:null}],or:{sid:"-tv02f5"}}),U=(0,o.withFactory)({sid:"eei018",fn:()=>(0,a.C)({source:G,clock:A})});(0,o.sample)({and:[{clock:c.O.inputs.logout,fn:()=>null,target:D}],or:{sid:"-yjhfya"}});const H=(0,o.combine)({and:[{group:S,mapStyles:w,mapLoaded:L},({group:e,mapStyles:t,mapLoaded:r})=>e&&t&&r],or:{sid:"-nxyh6p"}});(0,o.sample)({and:[{clock:[(0,o.withFactory)({sid:"-sluhwu",fn:()=>(0,l.CJ)({clock:k,until:H.map(Boolean)})}),(0,o.withFactory)({sid:"-s83n2t",fn:()=>(0,l.CJ)({clock:x,until:j.map(Boolean)})})],source:{guideId:$,selectedGroup:S,selectedPlace:j,isPoiDetailsOpened:C},fn:({guideId:e,selectedGroup:t,selectedPlace:r,isPoiDetailsOpened:o})=>o?{guideId:e,path:r?.share_info.share_link??null,place_opened_timestamp:String(Date.now())}:{guideId:e,path:t?.share_link??null,place_opened_timestamp:String(Date.now())},target:D}],or:{sid:"-xzoula"}}),(0,o.sample)({and:[{clock:R,source:{guideId:$,selectedGroup:S,selectedPlace:j,isPoiDetailsOpened:C,isMobile:O},filter:({selectedGroup:e,selectedPlace:t})=>Boolean(e?.share_link)||Boolean(t?.share_info.share_link),fn:({guideId:e,selectedGroup:t,selectedPlace:r,isMobile:o},s)=>{const a=((e,t)=>t||!e?e:`${e}&${m.Uf}={zoom}&${m.aJ}={latlon}`)(r?.share_info.share_link,o)??t?.share_link??"";return{guideId:e,path:g(a,s),place_opened_timestamp:String(Date.now())}},target:D}],or:{sid:"-w69bzb"}}),(0,o.sample)({and:[{clock:D,target:F}],or:{sid:"-l6dgrb"}});const q=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/guides_recently_viewed_place/index.ts",api:{inputs:{setRecentlyViewedPlace:D},outputs:{$recentlyViewedPlace:N,$isTimeExpired:M,$isDuringLastDayOpened:B,$recentlyViewedPlaceId:z,$recentlyViewedMapState:U}}})},99935:function(e,t,r){r.d(t,{s:function(){return v}});var o=r(98116),s=r(29260),a=r(89101),i=r(47956),n=r(51456),l=r(95628),c=r(30091);const{createMapStyle:d}=a.B.inputs,{$isGuidesModalOpened:u}=i.I.outputs,{$data:p}=n.mH.outputs,m=(0,o.createEvent)({sid:"5f6xa1"}),{$data:y}=d({$directionMapShowed:(0,o.createStore)(!1,{sid:"nzf7u9"}),readyToFetchMapStyle:m,$placeData:p}),g=(0,o.createEvent)({sid:"-dxxtoo"}),h=(0,o.restore)(g,!1,{sid:"-hxyfio"}),f=(0,o.combine)({and:[{travelMapData:p,guideId:l.R.outputs.$guideId},({travelMapData:e,guideId:t})=>t?e?.polygons_geo_json??null:null],or:{sid:"-l2qs6h"}}),_=(0,o.withFactory)({sid:"-7mvg9n",fn:()=>(0,s.m)({urlUpdated:f.updates,isGuidesModalOpened:u.updates})});(0,o.sample)({and:[{clock:_,filter:({urlUpdated:e,isGuidesModalOpened:t})=>Boolean(e)&&t,target:m}],or:{sid:"e807xv"}});const v=(0,c.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/modal_map_styles/index.ts",api:{outputs:{$data:y,$mapLoaded:h},inputs:{setMapLoaded:g}}})},19648:function(e,t,r){r.d(t,{E:function(){return c}});var o=r.p+"95d97951b95852d30fe5.png",s=r.p+"f1cbd5392acb40b95d96.png",a=r.p+"599fc5ab3beb33e42c08.png",i=r.p+"314c151041cc07a16eda.png",n=r(63281),l=r(85893);const c=()=>(0,l.jsxs)("div",{className:n.Z.background,children:[(0,l.jsx)("div",{className:n.Z.rightTopBubble}),(0,l.jsx)("div",{className:n.Z.leftBottomBubble}),(0,l.jsx)("img",{alt:"",className:n.Z.confetti,src:o,srcSet:`${s} 2x`}),(0,l.jsx)("img",{alt:"",className:n.Z.confetti,src:a,srcSet:`${i} 2x`})]})},92172:function(e,t,r){r.d(t,{f:function(){return c}});var o=r(40684),s=r(67294),a=r(63281),i=r(19648),n=r(85893);const l=(0,o.default)({resolved:{},chunkName:()=>"animated_background",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:async()=>Promise.all([r.e(94043),r.e(23919),r.e(44627)]).then(r.bind(r,22557)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return r(t)},resolve:()=>22557}),c=()=>(0,n.jsxs)("div",{className:a.Z.background,children:[(0,n.jsx)("div",{className:a.Z.rightTopBubble}),(0,n.jsx)("div",{className:a.Z.leftBottomBubble}),(0,n.jsx)(s.Suspense,{fallback:(0,n.jsx)(i.E,{}),children:(0,n.jsx)(l,{})})]})},10604:function(e,t,r){r.d(t,{L:function(){return sr}});var o=r(30091),s=(r(21703),r(98116)),a=r(76588),i=r(80472),n=r(99763),l=r(17563),c=r(47047),d=r(27636),u=r(78260),p=r(41832),m=r(8661),y=r(96864),g=r(54428),h=r(78194),f=r(31087);const _=(0,s.createStore)(f.Hc.Loading,{sid:"-9gyk6e"}),v={inputs:(0,s.createApi)({and:[_,{goToLoading:()=>f.Hc.Loading,goToPurchaseSuccess:()=>f.Hc.PurchaseSuccess,goToPurchaseError:()=>f.Hc.PurchaseError,goToPurchaseResult:()=>f.Hc.PurchaseError,goToGeneralError:()=>f.Hc.GeneralError,goToCheckout:()=>f.Hc.Checkout,goToPaymentProvider:()=>f.Hc.PaymentProvider}],or:{sid:"867f5x"}}),outputs:{$screen:_,successPaymentClicked:(0,s.createEvent)({sid:"mevmb3"})}},P=(0,s.createStore)(!1,{sid:"-7x2ep3"}),{openProductPurchase:b,hideProductPurchase:E}=(0,s.createApi)({and:[P,{openProductPurchase:()=>!0,hideProductPurchase:()=>!1}],or:{sid:"w0wvii"}}),k=(0,s.createEvent)({sid:"qntvay"});(0,s.sample)({and:[{clock:k,target:b}],or:{sid:"u9vrh5"}});const x={inputs:{showProductPurchase:k,hideProductPurchase:E},outputs:{$isProductPurchaseVisible:P}};var S=r(35529),$=r(2885);const w=(0,S.Record)({value:S.Number,formatted:S.String,currency:S.String});let L;!function(e){e.INAPP="inapp",e.CARD="card",e.SBP="sbp"}(L||(L={}));const j=(0,S.Record)({type:S.String,title:S.String,icon:$.pC,merchant_url:S.String.optional()}),C=(0,S.Record)({id:S.String,description:S.String,title:S.String,apple_product_id:S.String.optional(),price:w,image_url:S.String}),R=(0,S.Record)({text:S.String,price:S.String}),I=(0,S.Record)({applied:S.Boolean,count:S.Number,discount_type:S.String,discount_value:S.Number,error:S.String,product_id:S.String,promo_code:S.String,restrictions:(0,S.Array)(S.String)}),A=(0,S.Record)({title:S.String,subtitle:S.String,applied:S.Boolean,apply_button_text:S.String,error_message:S.String.optional(),analytics:I.Or((0,S.Record)({}))}),O=(0,S.Record)({product:C,payment_methods:(0,S.Array)(j),disclaimer:S.String,logos:(0,S.Array)($.pC),price_summary:(0,S.Array)(R).optional(),promo_code:A.optional()}),{showLoginPopup:D}=(0,s.withFactory)({sid:"z9d5vi",fn:()=>(0,c.d)(g.O.inputs.createLoginPopup,{loginSource:"login_popup"})}),{$t:T}=h.J.outputs,F=(0,u.cr)("guides",{name:"product_checkout"}),N=(0,s.createEvent)({sid:"-9gl5kq"}),M=(0,s.createEvent)({sid:"mom9nb"}),B=(0,s.restore)(M,null,{sid:"sj6v2n"}),z=(0,s.createStore)(null,{sid:"-u5g9gm"}),G=(0,s.createStore)(null,{sid:"v0v0zr"}),[U,H]=(0,s.withFactory)({sid:"-8s6dcq",fn:()=>(0,d.K)(G.map((e=>e?.promo_code?.analytics||null)))}),q=(0,s.createEvent)({sid:"-ugkptv"}),V=(0,s.createEvent)({sid:"7ikt7"}),Q=(0,s.restore)(V,null,{sid:"-o8jkn2"}),Y=(0,s.createStore)(null,{sid:"-yck1ba"});G.reset(x.inputs.hideProductPurchase);const W=(0,s.combine)({and:[{currency:p.y.outputs.$currency,defaultQuery:m.D.outputs.$defaultQuery},({currency:e,defaultQuery:t})=>({currency:e,...t})],or:{sid:"-um8fwa"}}),{$data:J,start:Z,$error:X,$pending:K,finished:ee,__:te}=(0,s.withFactory)({sid:"qf1pry",fn:()=>(0,a.s5)({params:(0,s.withFactory)({sid:"pbgmsd",fn:()=>(0,a.t6)()}),request:{method:"POST",url:(0,s.combine)({and:[{apiPrefix:m.D.outputs.$paymentApiPrefix,productId:B},({apiPrefix:e,productId:t})=>`${e}/checkout/${t}`],or:{sid:"-6hyo8f"}}),query:{source:W,fn:(e,t)=>(0,l.stringify)({...t,promo_code:e||void 0})},headers:m.D.outputs.$defaultHeaders},response:{contract:(0,i.v)(O),mapData:({result:e})=>{const t=e.payment_methods.filter((e=>e.type===L.SBP||e.type===L.CARD));return{...e,payment_methods:t}}}})}),[re,oe]=(0,s.withFactory)({sid:"-uv6r5x",fn:()=>(0,d.K)(J)});(0,s.sample)({and:[{clock:[re.updates,Q.updates],source:{currentPaymentType:Q,data:re},filter:({currentPaymentType:e})=>Boolean(e),fn:({currentPaymentType:e,data:t})=>t?.payment_methods.find((t=>t.type===e))?.merchant_url??null,target:Y}],or:{sid:"-k68w8t"}}),(0,s.sample)({and:[{source:(0,s.withFactory)({sid:"-6gnc8t",fn:()=>(0,n.I)(G)}),target:z}],or:{sid:"-jp79um"}}),(0,s.sample)({and:[{clock:v.inputs.goToCheckout,source:B,filter:Boolean,target:Z.prepend((()=>{}))}],or:{sid:"-jmgavt"}}),(0,s.sample)({and:[{clock:x.inputs.showProductPurchase,source:{isModalVisible:x.outputs.$isProductPurchaseVisible},filter:({isModalVisible:e})=>e,target:v.inputs.goToCheckout}],or:{sid:"-j7229p"}}),(0,s.sample)({and:[{clock:ee.failure,filter:(0,s.withFactory)({sid:"-duw5nk",fn:()=>(0,a.Bh)(303)}),target:v.inputs.goToLoading}],or:{sid:"-iqk8gv"}}),(0,s.sample)({and:[{clock:re,target:G}],or:{sid:"-in9gwp"}}),(0,s.sample)({and:[{clock:q,source:z,filter:Boolean,target:G}],or:{sid:"-i8ythb"}}),(0,s.sample)({and:[{source:ee.failure,filter:a.QO,fn:()=>new Error("product_checkout contract validation failed"),target:F.sendErrorLog}],or:{sid:"-htkkv7"}}),(0,s.sample)({and:[{source:ee.failure,filter:e=>(0,s.withFactory)({sid:"rt2ls9",fn:()=>(0,a.D3)(e)})&&!(0,s.withFactory)({sid:"rt2nbd",fn:()=>(0,a.Bh)(303)})(e),fn:e=>{const{response:t,status:r}=e?.error;return t?new Error(`product_checkout request failed ${r}: ${JSON.stringify(t)}`):new Error(`product_checkout request failed ${r}`)},target:F.sendErrorLog}],or:{sid:"-hpq0po"}}),(0,s.sample)({and:[{clock:V,source:y.W.outputs.$userLoggedIn,filter:e=>e,target:v.inputs.goToPaymentProvider}],or:{sid:"-gsqd40"}}),(0,s.sample)({and:[{clock:V,source:{userLoggedIn:y.W.outputs.$userLoggedIn,t:T},filter:({userLoggedIn:e})=>!e,fn:({t:e})=>({title:e("service_guides_login_dialog:title"),subtitle:e("service_guides_login_dialog:subtitle")}),target:D}],or:{sid:"-6fe27t"}});const se={outputs:{$checkoutData:G,$checkoutDataPending:K,$merchantUrl:Y,$checkoutDataError:X,$productId:B,$originalCheckoutData:z,$promocodeAnalytics:U,$data:re},inputs:{onPaymentClicked:V,showAuthDialog:N,fetchCheckoutData:Z,setProductId:M,setOriginalCheckoutData:q},internals:{executeFx:te.executeFx,$promocodeAnalyticsOverride:H,$dataOverride:oe}};var ae=r(59399),ie=r(54236);let ne;!function(e){e.SUCCESS="success",e.PROCESSING="processing",e.ERROR="error"}(ne||(ne={}));const le=(0,S.Union)((0,S.Literal)(ne.SUCCESS),(0,S.Literal)(ne.PROCESSING),(0,S.Literal)(ne.ERROR)),ce=(0,S.Record)({status:le,title:S.String,subtitle:S.String,image_url:S.String.optional(),button_success_text:S.String.optional(),external_error:S.String.optional()}),{$defaultHeaders:de}=m.D.outputs,{$productId:ue}=se.outputs,pe=(0,s.createEvent)({sid:"-bott5s"}),me=(0,s.createStore)(2e4,{sid:"7cfbf5"}),ye=(0,u.cr)("guides",{name:"purchase_result"}),ge=(0,s.withFactory)({sid:"34pzip",fn:()=>(0,a.s5)({name:"guides_purchase_result",request:{method:"GET",url:{source:(0,s.combine)({and:[{apiPrefix:m.D.outputs.$paymentApiPrefix,productId:ue}],or:{sid:"7d238y"}}),fn:(e,{apiPrefix:t,productId:r})=>`${t}/products/${r}/status`},query:(0,s.combine)({and:[{locale:ie.z.outputs.$localeDeprecated},({locale:e})=>({locale:e})],or:{sid:"-z593x6"}}),headers:de},response:{contract:(0,i.v)(ce)},concurrency:{abort:pe}})}),{$data:he,$pending:fe,$error:_e,start:ve,finished:{failure:Pe}}=ge,[be,Ee]=(0,s.withFactory)({sid:"-5msu8h",fn:()=>(0,d.K)(he)}),[ke,xe]=(0,s.withFactory)({sid:"-3qmc3w",fn:()=>(0,d.K)(_e)});(0,s.withFactory)({sid:"-phzp7g",fn:()=>(0,ae.g)({source:ve,timeout:me,target:pe})}),(0,s.sample)({and:[{clock:v.inputs.goToPurchaseResult,target:v.inputs.goToLoading}],or:{sid:"-peoxna"}}),(0,s.sample)({and:[{clock:v.inputs.goToPurchaseResult,source:se.outputs.$productId,filter:e=>Boolean(e),target:ve}],or:{sid:"-p0ea7w"}});const Se=(0,s.sample)({and:[{clock:be,filter:e=>Boolean(e)&&e?.status===ne.SUCCESS}],or:{sid:"hk8jst"}});(0,s.sample)({and:[{clock:Se,target:v.inputs.goToPurchaseSuccess}],or:{sid:"tw9101"}}),(0,s.sample)({and:[{source:be,filter:e=>Boolean(e)&&e?.status!==ne.SUCCESS,target:v.inputs.goToPurchaseError}],or:{sid:"uajoff"}}),(0,s.sample)({and:[{source:ke,filter:e=>Boolean(e),target:v.inputs.goToPurchaseError}],or:{sid:"us53ez"}});const $e=ke.map((e=>(0,s.withFactory)({sid:"nrnive",fn:()=>(0,a.eE)({error:e})})));(0,s.sample)({and:[{source:Pe,filter:a.QO,fn:()=>new Error("purchase_result contract validation failed"),target:ye.sendErrorLog}],or:{sid:"v96pt6"}}),(0,s.sample)({and:[{source:Pe,filter:a.D3,fn:e=>{const{response:t,status:r}=e?.error;return t?new Error(`purchase_result request failed ${r}: ${JSON.stringify(t)}`):new Error(`purchase_result request failed ${r}`)},target:ye.sendErrorLog}],or:{sid:"vokyfa"}});const we={outputs:{$purchaseResultData:be,$purchaseResultError:ke,$purchaseResultPending:fe,$isResultNetworkError:$e,purchaseSucceded:Se},inputs:{purchaseResultFetch:ve},internals:{purchaseResultQuery:ge,$timeout:me,$purchaseResultErrorOverride:xe,$purchaseResultDataOverride:Ee}};var Le=r(15863),je=r(30040),Ce=r(10924),Re=r(39018);const{createReporter:Ie}=Ce.I.inputs,{sendEvent:Ae}=Re.n.inputs,Oe=(0,s.createEvent)({sid:"-h5tf3j"}),De=(0,s.createEvent)({sid:"i02avo"}),Te=(0,s.createEvent)({sid:"up1t1z"}),Fe=(0,s.createEvent)({sid:"-e61vfx"}),Ne=(0,s.createEvent)({sid:"w8z4a3"}),Me=(0,s.createEvent)({sid:"-w8qnja"}),Be=(0,s.createEvent)({sid:"oh8ele"}),ze=Ie({data:{service:je.t6.Guides,category:"product_payment"},payload:{product_id:se.outputs.$productId,price:se.outputs.$checkoutData.map((e=>e?.product.price.value??null)),currency:se.outputs.$checkoutData.map((e=>e?.product.price.currency??null)),promocodeAnalytics:se.outputs.$promocodeAnalytics}});ze({clock:Oe,data:{action:"opened",label:"screen"},payload:{userEvent:!1}}),ze({clock:De,data:{action:"clicked",label:"payment_method"},payload:(e,{payload:t})=>({...t,method:e,userEvent:!0})}),(0,s.sample)({and:[{source:De,fn:e=>({type:`koroche_push_buy_with_${e}`}),target:Ae}],or:{sid:"-p6z0fr"}}),ze({clock:Te,data:{action:"showed",label:"success"},payload:(e,{payload:t})=>({product_id:t.product_id,applied_info:t.promocodeAnalytics.applied?t.promocodeAnalytics:null,userEvent:!1})}),ze({clock:(0,s.sample)({and:[{clock:Fe,source:{isNetworkError:we.outputs.$isResultNetworkError,resultError:we.outputs.$purchaseResultError,resultData:we.outputs.$purchaseResultData},fn:({isNetworkError:e,resultError:t,resultData:r})=>{let o={};var s;return e?o.type="connection":r?(o.type="payment",o.message=r.external_error):o={code:(s=t)?.response?.error?.code,message:s?.response?.error?.message,type:"payment"},o}}],or:{sid:"7weg4t"}}),data:{action:"showed",label:"error"},payload:(e,{payload:t})=>({...e,product_id:t.product_id,applied_info:t.promocodeAnalytics.applied?t.promocodeAnalytics:null,userEvent:!1})}),ze({clock:(0,s.sample)({and:[{clock:Ne,source:se.outputs.$productId}],or:{sid:"-eyi7wy"}}),data:{action:"clicked",label:"promocode"},payload:(e,{payload:{product_id:t}})=>({product_id:t,userEvent:!0})}),ze({clock:(0,s.sample)({and:[{clock:(0,s.withFactory)({sid:"-jjb1g3",fn:()=>(0,Le.CJ)({clock:Me,until:se.outputs.$promocodeAnalytics.map((e=>!!e&&Object.keys(e).length>0))})}),source:se.outputs.$promocodeAnalytics}],or:{sid:"-ee5tyl"}}),data:{action:"entered",label:"promocode"},payload:e=>({...e,userEvent:!0})}),ze({clock:(0,s.sample)({and:[{clock:Be,source:se.outputs.$data.map((e=>e?.promo_code?.analytics||null)),filter:Boolean}],or:{sid:"-d2vixj"}}),data:{action:"removed",label:"promocode"},payload:e=>({...e,userEvent:!0})});const Ge={inputs:{paymentScreenOpened:Oe,paymentMethodClicked:De,successScreenShown:Te,errorScreenShown:Fe,promocodeClicked:Ne,promocodeRemoved:Be,promocodeEntered:Me}},{translated:Ue}=h.J.outputs,{$enabled:He,toggle:qe,turnOff:Ve}=(0,s.withFactory)({sid:"wa147",fn:()=>(0,c.d)(Le.qs,!1)}),Qe=(0,s.createStore)("",{sid:"s2bloq"}),Ye=(0,s.createStore)(null,{sid:"ul454x"}),We=(0,s.createEvent)({sid:"beotr9"}),Je=(0,s.createEvent)({sid:"-vlnc4a"}),{setPromocode:Ze}=(0,s.createApi)({and:[Qe,{setPromocode:(e,t)=>t}],or:{sid:"-cc9pvo"}}),Xe=(0,s.createEvent)({sid:"2mhmxg"});(0,s.split)({and:[{clock:We,source:Qe,match:{emptyPromocodeError:e=>""===e},cases:{emptyPromocodeError:Xe,__:se.inputs.fetchCheckoutData}}],or:{sid:"-kxf427"}}),(0,s.sample)({and:[{clock:Xe,source:Ue("widget_guides_product_purchase:promocode.emptyPromocodeError"),target:Ye}],or:{sid:"-k3q80p"}}),(0,s.sample)({and:[{source:se.outputs.$checkoutData,fn:e=>e?.promo_code?.error_message??null,target:Ye}],or:{sid:"-k0fggj"}}),(0,s.sample)({and:[{clock:Je,target:[se.inputs.setOriginalCheckoutData,Ze.prepend((()=>""))]}],or:{sid:"-jll0fs"}}),(0,s.sample)({and:[{clock:x.inputs.hideProductPurchase,fn:()=>"",target:Ze}],or:{sid:"-j5mz8b"}}),(0,s.sample)({and:[{clock:x.inputs.hideProductPurchase,target:Ve}],or:{sid:"-j2c7o5"}}),(0,s.sample)({and:[{clock:qe,source:He,filter:Boolean,target:Ge.inputs.promocodeClicked}],or:{sid:"-io1k8r"}}),(0,s.sample)({and:[{clock:Je,target:Ge.inputs.promocodeRemoved}],or:{sid:"-ik7038"}}),(0,s.sample)({and:[{clock:We,target:Ge.inputs.promocodeEntered}],or:{sid:"-i5wcnu"}});const Ke={outputs:{$opened:He,$promocode:Qe,$validationError:Ye},inputs:{toggle:qe,setPromocode:Ze,applyPromocode:We,removeAppliedPromocode:Je}};var et=r(97608),tt=r(9071),rt=r(5393),ot=r(4190),st=r(28225),at=r(67294),it=r(94184),nt=r.n(it),lt=r(50308),ct=r.n(lt),dt="s__GPOvVEMhyir0ocRF2uzd",ut=r(49963),pt=r(44619),mt=r(38694),yt=r(80871),gt=r(4407),ht=r(1156),ft=r(39535),_t=r(51585),vt={hidden:"s__nO9Z__puwk7_6emkWoOY",summary:"s__qe4hmyCRAnLVlGIWKln1",image:"s__UBfLijHbJ9uQPXSANg8A",content:"s__o1xRBv2NeYnVqDtdLmfV",title:"s__KI1b43pcR5Hy51AYEW6k",description:"s__EWbZzb35gxUeB4wcmHV4",paymentTitle:"s__aXBE_JWO02OXdZgAPYFh",block:"s__prqrfxMKf6mRMZO_ey2t",item:"s__Qs8IKa_sDumZ0Mp6nJDE",text:"s__OGgnM0_igOzzEKaNUwg2",icon:"s__kuibHFW1ltac8ebyrhig",primaryButton:"s__Dl5ebxjwJKYlSh4_LVAW",disclosure:"s__WEhQqMhi1afUoyqVCyrp",disclaimer:"s__dhvOjm0_DX9FXfre626m",purchaseLogo:"s__kIGYcD2bOdpwSWJJS9Ah",priceSummary:"s__yGoMSaePHSQRnowPw1FG",priceItem:"s__QQIjBdFzuM3akzwLdoVa"},Pt=r(85893);const bt=({className:e,testId:t,children:r})=>r?(0,Pt.jsx)("div",{"data-test-id":t,className:nt()("s__xsf5i3n5nAebqNYS0mlh",e),children:r}):null;var Et=r(97405);const kt=({url:e,onLoad:t,onError:r})=>{const{isImageLoaded:o,onImageLoad:s}=(0,Et.h3)(e);(0,at.useEffect)((()=>{o&&t(e)}),[o,t,e]);const a=(0,at.useCallback)((()=>{r(e)}),[e,r]);return(0,Pt.jsx)("img",{src:e,alt:"",onLoad:s,onError:a})};var xt="s__kvYF0GjL9n3UtdE72BwH";const St=({className:e})=>(0,Pt.jsx)("div",{className:nt()("s__b7ycuAiDtiqQko1uBwWK",e)}),$t=()=>{const e=new Array(4).fill(null);return(0,Pt.jsxs)(Pt.Fragment,{children:[(0,Pt.jsxs)(bt,{className:"s__b2hwhJsqCWZeFrxoidQq",children:[(0,Pt.jsx)(St,{className:"s__hb3qodNGdmH7az12GIvz"}),(0,Pt.jsxs)("div",{children:[(0,Pt.jsx)(St,{className:xt}),(0,Pt.jsx)(St,{className:xt}),(0,Pt.jsx)(St,{className:xt})]})]}),(0,Pt.jsxs)(bt,{className:"s__ry1136K7LKDCuSXt0Joo",children:[(0,Pt.jsx)(St,{className:"s__rupNwzYveYAupymWjj5T"}),e.map(((e,t)=>(0,Pt.jsx)(St,{className:"s__uHxLRjSlPNfsvrvW2pdm"},t)))]})]})};var wt=r(14711),Lt=r(45311),jt=r(16097),Ct=r(43830),Rt=r(92593),It=r(24352),At={header:"s__UiW4KOPwowwYyfzuDNHA",headerOpened:"s__I1oWCuYdUScHiakpO6Pi",headerLeftSideContent:"s__cbmkIuavUp3_f0KePRlE",headerDropdownIcon:"s__fJ1wz9yP6HghVTU4xpyB",headerDropdownIconOpened:"s__wraOZY0pHRRw_jE1JlcC",headerLabel:"s__A0D68C75ziin1mH8kr9B",content:"s__fuPAy74oOAN9AQiSmwTV",appliedPromocodeLabelContent:"s__AxJWo1_dOgV1v9B2JXU8",appliedPromocodeLabel:"s__GLuMwBp7Sfir4pYgogwv",appliedPromocodeLabelInfo:"s__yzCNA6rvty4ZBUfzRfGS",appliedPromocodeRemoveIconWrap:"s__WVb6vsv3ew37GCgs4DnM",appliedPromocodeRemoveIcon:"s__g5qEANAnrSRVI_xe_8qo",appliedPromocodeHeader:"s__wFXsTkyjt7Bq10hUqGhS",icon:"s__f9pPpPFM_tilB55wPCWQ"};const Ot=()=>{const{opened:e,promocode:t,validationError:r,checkoutData:o,checkoutPending:s,setPromocode:a,toggle:i,applyPromocode:n,removePromocode:l}=(0,ot.useUnit)({toggle:Ke.inputs.toggle,opened:Ke.outputs.$opened,promocode:Ke.outputs.$promocode,setPromocode:Ke.inputs.setPromocode,applyPromocode:Ke.inputs.applyPromocode,validationError:Ke.outputs.$validationError,checkoutData:se.outputs.$checkoutData,checkoutPending:se.outputs.$checkoutDataPending,removePromocode:Ke.inputs.removeAppliedPromocode});return(0,Pt.jsxs)("div",{children:[!o?.promo_code?.applied&&(0,Pt.jsxs)(Pt.Fragment,{children:[(0,Pt.jsx)(wt.p,{testId:"promocode-block",preventHoverState:!0,onClick:i,leftSideContent:(0,Pt.jsxs)("div",{className:At.headerLeftSideContent,children:[(0,Pt.jsx)(Lt.D,{}),(0,Pt.jsx)(ut.x,{type:pt.y.Body2Regular,className:At.headerLabel,children:o?.promo_code?.title})]}),rightSideContent:(0,Pt.jsx)(jt.V,{className:At.icon}),rightSideClassName:nt()(At.headerDropdownIcon,e&&At.headerDropdownIconOpened),className:nt()(At.header,e&&At.headerOpened)}),e&&(0,Pt.jsxs)("div",{className:At.content,children:[(0,Pt.jsx)(Rt.I,{testId:"promocode-field",autoFocus:!0,size:It.f.S,id:"promocode",className:At.input,error:r||void 0,value:t,onChange:e=>a(e.currentTarget.value)}),(0,Pt.jsx)(ut.x,{type:pt.y.Body3Regular,children:o?.promo_code?.subtitle}),(0,Pt.jsx)(ht.z,{testId:"apply-promocode-button",size:ft.qE.S,onClick:n,progress:Boolean(s),children:o?.promo_code?.apply_button_text})]})]}),o?.promo_code?.applied&&(0,Pt.jsx)("div",{children:(0,Pt.jsx)(wt.p,{testId:"applied-promocode-block",preventHoverState:!0,onClick:i,cellType:"title",leftSideContent:(0,Pt.jsx)(Lt.D,{}),labelClassName:At.appliedPromocodeLabel,rightSideContent:(0,Pt.jsx)("div",{className:At.appliedPromocodeRemoveIconWrap,onClick:l,children:(0,Pt.jsx)(Ct.Y,{})}),rightSideClassName:At.appliedPromocodeRemoveIcon,labelContent:(0,Pt.jsxs)("div",{className:At.appliedPromocodeLabelContent,children:[(0,Pt.jsx)(ut.x,{testId:"title",type:pt.y.Body2Regular,children:o?.promo_code?.title}),(0,Pt.jsx)(ut.x,{testId:"subtitle",type:pt.y.Body3Regular,className:At.appliedPromocodeLabelInfo,children:o?.promo_code?.subtitle})]}),className:nt()(At.header,At.appliedPromocodeHeader)})})]})},Dt=({onLogoLoad:e,onLogoError:t,loading:r})=>{const{data:o,paymentMethodClicked:s,onPaymentClicked:a}=(0,ot.useUnit)({data:se.outputs.$checkoutData,onPaymentClicked:se.inputs.onPaymentClicked,paymentMethodClicked:Ge.inputs.paymentMethodClicked}),{t:i}=(0,st.useTranslation)("widget_guides_product_purchase");if(!o)return null;const{product:n,payment_methods:l,disclaimer:c,logos:d}=o,u=1===l.length;return(0,Pt.jsxs)(Pt.Fragment,{children:[(0,Pt.jsxs)("div",{className:nt()(r&&vt.hidden),children:[(0,Pt.jsxs)(bt,{className:vt.summary,children:[(0,Pt.jsx)(gt.E,{className:vt.image,alt:"",srcTemplate:n.image_url,width:120,height:120,lazy:!1,draggable:!0}),(0,Pt.jsxs)("div",{className:vt.content,children:[(0,Pt.jsxs)("div",{children:[(0,Pt.jsx)(ut.x,{className:vt.title,type:pt.y.Body3Regular,tag:"h2",children:n.title}),(0,Pt.jsx)(ut.x,{className:vt.description,type:pt.y.Body2Semi,tag:"h3",children:n.description})]}),(0,Pt.jsx)(ut.x,{className:vt.price,type:pt.y.Title3Semi,tag:"span",children:(0,Pt.jsx)(mt.t,{value:n.price.value,currency:n.price.currency.toLowerCase()})})]})]}),o.price_summary&&(0,Pt.jsx)(bt,{className:vt.priceSummary,testId:"price-summary-block",children:o.price_summary.map(((e,t)=>{const r=t===o.price_summary.length-1?pt.y.Body2Bold:pt.y.Body2Regular;return(0,Pt.jsxs)("div",{className:vt.priceItem,children:[(0,Pt.jsx)(ut.x,{testId:"title",type:r,children:e.text}),(0,Pt.jsx)(ut.x,{testId:"price",type:r,children:e.price})]},t)}))}),o.promo_code&&(0,Pt.jsx)(bt,{children:(0,Pt.jsx)(Ot,{})}),(0,Pt.jsxs)(bt,{children:[!u&&(0,Pt.jsx)(ut.x,{className:vt.paymentTitle,type:pt.y.Body1Semi,tag:"h2",children:i("purchaseScreen.paymentTitle")}),l.map((e=>(0,Pt.jsxs)(ht.z,{testId:`payment-method-${e.type}-button`,type:ft.Ji.Primary,className:nt()(vt.block,u&&vt.primaryButton),onClick:()=>{a(e.type),s(e.type)},children:[(0,Pt.jsxs)("div",{className:vt.item,children:[(0,Pt.jsx)("img",{className:vt.icon,src:e.icon.svg,alt:""}),(0,Pt.jsx)(ut.x,{className:vt.text,type:u?pt.y.Body1Semi:pt.y.Body2Semi,children:e.title})]}),!u&&(0,Pt.jsx)(yt.i,{className:vt.disclosure})]},e.type)))]}),(0,Pt.jsx)(bt,{className:vt.disclaimer,children:(0,Pt.jsx)(_t.J,{className:vt.text,type:pt.y.Body3Regular,tag:"p",children:c})}),(0,Pt.jsx)(bt,{className:vt.purchaseLogo,children:d.map((r=>(0,Pt.jsx)(kt,{url:r.svg,onLoad:e,onError:t},r.svg)))})]}),r&&(0,Pt.jsx)($t,{})]})};var Tt=r(88998),Ft=r(77657),Nt=r(10001),Mt=r(38387);const Bt=()=>{const{isMobile:e,fetch:t}=(0,ot.useUnit)({isMobile:Mt.l.outputs.$isMobile,fetch:se.inputs.fetchCheckoutData}),{t:r}=(0,st.useTranslation)("widget_guides_product_purchase");return(0,Pt.jsxs)(Tt.A,{size:e?Ft.g.Mobile:Ft.g.Desktop,children:[(0,Pt.jsx)(Tt.A.Icon,{mod:Nt.i.Warning}),(0,Pt.jsx)(Tt.A.Actions,{children:(0,Pt.jsx)(Tt.A.Action,{onClick:()=>t(),children:r("networkError.button")})})]})};var zt=r(6328),Gt=r(99491);const Ut="guides_payment_provider_iframe",Ht=({url:e,iframeRef:t})=>{const{isMobile:r}=(0,ot.useUnit)({isMobile:Mt.l.outputs.$isMobile}),{t:o}=(0,st.useTranslation)("widget_guides_product_purchase"),[s,a]=(0,at.useState)("pending");return(0,Pt.jsxs)(Et.SV,{children:["pending"===s&&(0,Pt.jsx)(zt.$,{size:Gt.Ey.L,mod:Gt.IQ.OnLight,priority:Gt.Ly.Primary}),"error"===s&&(0,Pt.jsxs)(Tt.A,{size:r?Ft.g.Mobile:Ft.g.Desktop,children:[(0,Pt.jsx)(Tt.A.Icon,{mod:Nt.i.Warning}),(0,Pt.jsx)(Tt.A.Actions,{children:t&&(0,Pt.jsx)(Tt.A.Action,{onClick:()=>{t&&(a("pending"),t.current?.contentWindow?.location.reload())},children:o("networkError.button")})})]}),(0,Pt.jsx)("iframe",{"data-test-id":Ut,id:Ut,className:nt()("s__xBceXXi2kFcdDGxsPubq","success"!==s&&"s__dc7LijbvpzPQNoOz1mIH"),ref:t,src:e,onLoad:()=>{a("success")},onError:()=>{a("error")}})]})},qt=()=>{const{isLoading:e,isError:t,data:r,paymentScreenOpened:o}=(0,ot.useUnit)({isLoading:se.outputs.$checkoutDataPending,isError:se.outputs.$checkoutDataError,data:se.outputs.$checkoutData,paymentScreenOpened:Ge.inputs.paymentScreenOpened}),{isAllLogosLoaded:s,isLogoLoadingError:a,onLogoLoaded:i,onLogoLoadingError:n}=(e=>{const[t,r]=(0,at.useState)({});(0,at.useEffect)((()=>{if(e&&0===Object.keys(t).length){const o=e.logos.reduce(((e,r)=>(t[e.svg]||(e[r.svg]="pending"),e)),{});r(o)}}),[e,t]);const o=(0,at.useCallback)((e=>{r((t=>({...t,[e]:"error"})))}),[]),s=(0,at.useCallback)((e=>{r((t=>({...t,[e]:"success"})))}),[]);return{isAllLogosLoaded:Object.keys(t).length&&Object.values(t).every((e=>"success"===e)),isLogoLoadingError:Object.values(t).some((e=>"error"===e)),onLogoLoaded:s,onLogoLoadingError:o}})(r);return(0,at.useEffect)((()=>{r&&s&&o()}),[o,s,r]),t||a?(0,Pt.jsx)("div",{className:"s__x21S1vTCdWd5IDo2sWjE",children:(0,Pt.jsx)(Bt,{})}):e&&!r?(0,Pt.jsx)("div",{className:dt,children:(0,Pt.jsx)($t,{})}):(0,Pt.jsx)("div",{className:dt,children:(0,Pt.jsx)(Dt,{loading:!s,onLogoError:n,onLogoLoad:i})})},Vt=()=>{const e=(0,at.useRef)(null),{goToPurchaseResult:t,merchantUrl:r}=(0,ot.useUnit)({goToPurchaseResult:v.inputs.goToPurchaseResult,merchantUrl:se.outputs.$merchantUrl});return(0,at.useEffect)((()=>{const r=r=>{const o=e.current?.contentWindow,s=o===r.source,a="success"===r.data;s&&a&&t()};return window.addEventListener("message",r),()=>window.removeEventListener("message",r)}),[t]),r?(0,Pt.jsx)(Ht,{iframeRef:e,url:r}):null},Qt=()=>(0,Pt.jsx)(zt.$,{size:Gt.Ey.L,mod:Gt.IQ.OnLight,priority:Gt.Ly.Primary});var Yt,Wt;function Jt(){return Jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Jt.apply(this,arguments)}var Zt=function(e){return at.createElement("svg",Jt({width:97,height:97,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Yt||(Yt=at.createElement("g",{clipPath:"url(#partying_face_svg__clip0_432_34622)"},at.createElement("path",{d:"M48.5 12.5c23.19 0 42 18.795 42 42 0 23.19-18.81 42-42 42s-42-18.81-42-42c0-23.205 18.81-42 42-42z",fill:"url(#partying_face_svg__paint0_linear_432_34622)"}),at.createElement("path",{d:"M25.73 52.055c5.985-7.725 10.155-7.725 16.14 0 .9 1.17 2.76.3 2.37-.84-5.07-14.94-15.81-14.94-20.896 0-.375 1.14 1.47 2.01 2.386.84zM55.13 52.055c5.985-7.725 10.155-7.725 16.14 0 .915 1.17 2.76.3 2.37-.84-5.07-14.94-15.81-14.94-20.895 0-.375 1.14 1.47 2.01 2.385.84z",fill:"#1A1626"}),at.createElement("path",{d:"M71.766 52.79c-8.34 0-15.09 6.765-15.09 15.09 0 8.34 6.765 15.09 15.09 15.09 8.34 0 15.09-6.75 15.09-15.09.015-8.325-6.75-15.09-15.09-15.09z",fill:"url(#partying_face_svg__paint1_radial_432_34622)"}),at.createElement("path",{d:"M25.625 52.79c-8.34 0-15.09 6.765-15.09 15.09 0 8.34 6.765 15.09 15.09 15.09 8.34 0 15.09-6.75 15.09-15.09 0-8.325-6.75-15.09-15.09-15.09z",fill:"url(#partying_face_svg__paint2_radial_432_34622)"}),at.createElement("path",{d:"M82.984 82.31s2.58-3.96 5.64-8.175c2.31-3.18 9.495 1.545 7.545 7.425-1.11 3.36-4.185 11.94-11.01 8.82-1.38-2.61.12-3.72-2.175-8.07z",fill:"#A6E639"}),at.createElement("path",{d:"M80.765 88.115C70.55 84.2 57.275 79.1 55.79 78.56c-.885-.315.15-6.15 1.53-5.685 1.77.585 14.91 5.175 24.99 8.715l-1.545 6.525z",fill:"#75D6FF"}),at.createElement("path",{opacity:.5,d:"M59.42 79.925c-1.485-.555-2.61-.99-3.225-1.215 1.89-1.425 3.765-2.85 5.655-4.275.99.345 2.1.735 3.315 1.155-1.935 1.44-3.84 2.895-5.745 4.335zM66.92 82.805c-1.2-.465-2.34-.9-3.42-1.305l5.85-4.41c1.14.39 2.325.825 3.525 1.23l-5.955 4.485zM74.345 85.64c-.675-.255-2.73-1.035-3.39-1.29l6.09-4.605c.69.24 2.61.915 3.285 1.155l-5.985 4.74z",fill:"#0FB4D4"}),at.createElement("path",{d:"M79.82 87.98c-.735-.3.705-7.275 1.485-7.035.525.165 4.26 1.365 4.26 1.365l-.285 7.98c.015 0-5.055-2.145-5.46-2.31z",fill:"#7AB51D"}),at.createElement("path",{d:"M91.234 89.09c3.96-2.85-3.78-11.55-7.665-7.68-3.015 3.015 3.315 10.815 7.665 7.68z",fill:"#7AB51D"}),at.createElement("path",{d:"M89.54 88.205c2.94-2.115-2.82-8.58-5.7-5.7-2.235 2.235 2.46 8.04 5.7 5.7z",fill:"#529320"}),at.createElement("path",{d:"M87.876 87.47c1.844-1.32-1.755-5.37-3.556-3.57-1.41 1.395 1.53 5.025 3.556 3.57z",fill:"#297124"}),at.createElement("path",{d:"M57.215 78.83c-1.395-1.965-.195-4.725 1.47-5.085 1.26-.285 2.295-2.58.795-4.89-1.695-2.595-6.45-1.455-9.21-6.405-.765 5.76 5.79 6.69 6.105 8.325.33 1.725-1.98 2.235-2.595 4.005-.45 1.275 1.26 4.305-.36 5.07-1.515.72-7.035-2.04-9.795 3.075 5.13-2.4 8.265.99 11.22.18 3.765-1.005 2.82-3.645 2.37-4.275z",fill:"#1A1626"}),at.createElement("path",{d:"M14.644.5l-2.4 33.96c1.95 2.985 38.34-18.18 36.39-21.165L14.644.5z",fill:"url(#partying_face_svg__paint3_linear_432_34622)"}),at.createElement("path",{d:"M14.645.5l-.555 7.86s3.93-1.665 6.18-5.745L14.645.5z",fill:"url(#partying_face_svg__paint4_linear_432_34622)"}),at.createElement("path",{d:"M37.79 9.215c-11.026 14.115-25.44 23.76-25.44 23.76l-.106 1.485c.63.96 4.8-.57 10.11-3.195 0 0 12.585-6.525 21.3-19.86l-5.865-2.19z",fill:"url(#partying_face_svg__paint5_linear_432_34622)"}),at.createElement("path",{d:"M26.06 4.79c-6.315 8.505-12.555 11.79-12.555 11.79l-.585 8.235s11.385-6.525 19.005-17.82L26.06 4.79z",fill:"url(#partying_face_svg__paint6_linear_432_34622)"}),at.createElement("path",{d:"M7.325 68.21l1.56-2.61s-3.57-1.53-5.055-2.805c5.235-2.16 8.61-2.475 3.69-7.905 10.14 1.71 5.49-3.345 1.905-8.265 2.475-.135 2.145-.45 2.385-2.925-8.46-.585-5.07 4.575-1.59 8.625-7.77-1.26-6.93 1.41-3.375 6.645C3.785 59.645.47 61.265.5 63.11c.045 2.1 6.825 5.1 6.825 5.1z",fill:"#E81C27"}),at.createElement("path",{d:"M70.744 11.51l9.765 1.71-3.915-9.72-5.85 8.01z",fill:"#E635DE"}),at.createElement("path",{d:"M13.324 69.8l7.53.42-3.825-6.975-3.705 6.555z",fill:"#A6E639"}),at.createElement("path",{d:"M81.98 23.6l3.63 6.255 6.136-3.825-3.63-6.255L81.98 23.6z",fill:"#E81C27"}),at.createElement("path",{d:"M55.7 23.93l5.31 4.845 2.49-6.75-5.31-4.86-2.49 6.765z",fill:"#0FB4D4"}),at.createElement("path",{d:"M11.21 83.18l3.06 7.11 6.586-4.08-3.075-7.11-6.57 4.08z",fill:"#E635DE"}),at.createElement("path",{d:"M2.48 22.97c0 5.355 8.025 5.355 8.025 0 .015-5.355-8.025-5.355-8.025 0z",fill:"#A6E639"}),at.createElement("path",{d:"M82.79 45.935c0 5.355 8.024 5.355 8.024 0 .015-5.355-8.025-5.355-8.025 0z",fill:"#0FB4D4"}))),Wt||(Wt=at.createElement("defs",null,at.createElement("linearGradient",{id:"partying_face_svg__paint0_linear_432_34622",x1:48.5,y1:96.5,x2:48.5,y2:12.502,gradientUnits:"userSpaceOnUse"},at.createElement("stop",{stopColor:"#FF9500"}),at.createElement("stop",{offset:.192,stopColor:"#FFAD00"}),at.createElement("stop",{offset:.545,stopColor:"#FFD500"}),at.createElement("stop",{offset:.827,stopColor:"#FFED00"}),at.createElement("stop",{offset:1,stopColor:"#FFF600"})),at.createElement("linearGradient",{id:"partying_face_svg__paint3_linear_432_34622",x1:41.386,y1:3.11,x2:7.224,y2:27.407,gradientUnits:"userSpaceOnUse"},at.createElement("stop",{offset:.115,stopColor:"#75D6FF"}),at.createElement("stop",{offset:.281,stopColor:"#71D2FB"}),at.createElement("stop",{offset:.462,stopColor:"#64C5EE"}),at.createElement("stop",{offset:.648,stopColor:"#4EB0DA"}),at.createElement("stop",{offset:.838,stopColor:"#3093BD"}),at.createElement("stop",{offset:1,stopColor:"#10749E"})),at.createElement("linearGradient",{id:"partying_face_svg__paint4_linear_432_34622",x1:19.524,y1:1.551,x2:12.709,y2:6.398,gradientUnits:"userSpaceOnUse"},at.createElement("stop",{offset:.176,stopColor:"#E84D88"}),at.createElement("stop",{offset:.359,stopColor:"#E34883"}),at.createElement("stop",{offset:.588,stopColor:"#D53874"}),at.createElement("stop",{offset:.842,stopColor:"#BF1F5B"}),at.createElement("stop",{offset:1,stopColor:"#AD0B48"})),at.createElement("linearGradient",{id:"partying_face_svg__paint5_linear_432_34622",x1:44.243,y1:12.252,x2:12.502,y2:34.828,gradientUnits:"userSpaceOnUse"},at.createElement("stop",{offset:.176,stopColor:"#E84D88"}),at.createElement("stop",{offset:.359,stopColor:"#E34883"}),at.createElement("stop",{offset:.588,stopColor:"#D53874"}),at.createElement("stop",{offset:.842,stopColor:"#BF1F5B"}),at.createElement("stop",{offset:1,stopColor:"#AD0B48"})),at.createElement("linearGradient",{id:"partying_face_svg__paint6_linear_432_34622",x1:32.331,y1:7.576,x2:11.297,y2:22.536,gradientUnits:"userSpaceOnUse"},at.createElement("stop",{offset:.176,stopColor:"#E84D88"}),at.createElement("stop",{offset:.359,stopColor:"#E34883"}),at.createElement("stop",{offset:.588,stopColor:"#D53874"}),at.createElement("stop",{offset:.842,stopColor:"#BF1F5B"}),at.createElement("stop",{offset:1,stopColor:"#AD0B48"})),at.createElement("radialGradient",{id:"partying_face_svg__paint1_radial_432_34622",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(180 35.884 33.946) scale(15.0963)"},at.createElement("stop",{stopColor:"#FF6399",stopOpacity:.55}),at.createElement("stop",{offset:.202,stopColor:"#FF6596",stopOpacity:.439}),at.createElement("stop",{offset:.365,stopColor:"#FF6C8C",stopOpacity:.349}),at.createElement("stop",{offset:.513,stopColor:"#FF767B",stopOpacity:.268}),at.createElement("stop",{offset:.654,stopColor:"#FF8663",stopOpacity:.19}),at.createElement("stop",{offset:.789,stopColor:"#FF9A44",stopOpacity:.116}),at.createElement("stop",{offset:.917,stopColor:"#FFB21F",stopOpacity:.045}),at.createElement("stop",{offset:1,stopColor:"#FFC403",stopOpacity:0})),at.createElement("radialGradient",{id:"partying_face_svg__paint2_radial_432_34622",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(180 12.813 33.946) scale(15.0967)"},at.createElement("stop",{stopColor:"#FF6399",stopOpacity:.55}),at.createElement("stop",{offset:.202,stopColor:"#FF6596",stopOpacity:.439}),at.createElement("stop",{offset:.365,stopColor:"#FF6C8C",stopOpacity:.349}),at.createElement("stop",{offset:.513,stopColor:"#FF767B",stopOpacity:.268}),at.createElement("stop",{offset:.654,stopColor:"#FF8663",stopOpacity:.19}),at.createElement("stop",{offset:.789,stopColor:"#FF9A44",stopOpacity:.116}),at.createElement("stop",{offset:.917,stopColor:"#FFB21F",stopOpacity:.045}),at.createElement("stop",{offset:1,stopColor:"#FFC403",stopOpacity:0})),at.createElement("clipPath",{id:"partying_face_svg__clip0_432_34622"},at.createElement("path",{fill:"#fff",transform:"translate(.5 .5)",d:"M0 0h96v96H0z"})))))};const Xt=({title:e,subtitle:t,buttonText:r,imageUrl:o})=>{const{successPaymentClicked:s}=(0,ot.useUnit)({successPaymentClicked:v.outputs.successPaymentClicked});return(0,Pt.jsxs)("div",{className:"s__rxZY8FAJc8TFP4R6z99x",children:[(0,Pt.jsx)("div",{children:o?(0,Pt.jsx)(gt.E,{className:"s__c34mueVhjRZDpgGOm01f",alt:"",srcTemplate:o,width:100,height:100,draggable:!0}):(0,Pt.jsx)(Zt,{})}),(0,Pt.jsx)(ut.x,{tag:"h2",className:"s__AhgwxSQmTmixTvNoxHrX",type:pt.y.Title3Semi,children:e}),(0,Pt.jsx)(ut.x,{tag:"p",className:"s__yqa26Zhz_AfQOtMc4bGx",type:pt.y.Body1Paragraph,children:t}),r&&(0,Pt.jsx)(ht.z,{testId:"success-payment-button",className:"s__a23ZYuz_tiOXsS74MSYR",priority:ft.Ji.Primary,size:ft.qE.M,onClick:s,children:r})]})};var Kt=r(2793);const er=({title:e,subtitle:t,buttonText:r,onButtonClick:o})=>(0,Pt.jsxs)("div",{className:"s__QtCjW4PAGiWQkJgnYqmW",children:[(0,Pt.jsx)("div",{className:"s__C0n_t5NhhUfnZHThpFiw",children:(0,Pt.jsx)(Kt.Icon24ColorWarning,{className:"s__FTNLbykJUpUZ1ziez9A2"})}),(0,Pt.jsx)(ut.x,{tag:"h3",className:"s__vaHm1bTSfERjuR8Da0oO",type:pt.y.Title2Bold,children:e}),(0,Pt.jsx)(ut.x,{tag:"p",className:"s__QsINdZnM1lShaATLzNO8",type:pt.y.Body1Paragraph,children:t}),r&&(0,Pt.jsx)(ht.z,{className:"s__aiDQkFQFKvRQGSWVWvrH",priority:ft.Ji.Primary,size:ft.qE.M,onClick:o,children:r})]}),tr=()=>{const{purchaseResultData:e,purchaseResultError:t,isResultNetworkError:r,retryResult:o,goToCheckout:s,successScreenShown:a,errorScreenShown:i}=(0,ot.useUnit)({purchaseResultData:we.outputs.$purchaseResultData,purchaseResultError:we.outputs.$purchaseResultError,isResultNetworkError:we.outputs.$isResultNetworkError,retryResult:we.inputs.purchaseResultFetch,goToCheckout:v.inputs.goToCheckout,successScreenShown:Ge.inputs.successScreenShown,errorScreenShown:Ge.inputs.errorScreenShown}),{t:n}=(0,st.useTranslation)("widget_guides_product_purchase");return(0,at.useEffect)((()=>{e?.status===ne.SUCCESS?a():i()}),[a,i,e]),r?(0,Pt.jsx)(er,{title:n("networkError.title"),subtitle:n("networkError.subtitle"),buttonText:n("networkError.button"),onButtonClick:()=>o()}):t||!e?(0,Pt.jsx)(er,{title:n("purchaseResultScreen.defaultErrorTitle"),subtitle:n("purchaseResultScreen.defaultErrorSubtitle")}):e.status===ne.SUCCESS?(0,Pt.jsx)(Xt,{title:e.title,subtitle:e.subtitle,imageUrl:e.image_url,buttonText:e.button_success_text}):(0,Pt.jsx)(er,{title:e.title,subtitle:e.subtitle,imageUrl:e.image_url,buttonText:e.button_success_text,onButtonClick:e.status===ne.ERROR?s:void 0})};var rr=r(92172);L.CARD,L.SBP;const or={outputs:{...x.outputs,...v.outputs,...se.outputs,...we.outputs,...Ke.outputs},inputs:{...x.inputs,...v.inputs,...se.inputs},containers:{ProductPurchase:()=>{const{isVisible:e,closeModal:t,currentScreen:r}=(0,ot.useUnit)({isVisible:x.outputs.$isProductPurchaseVisible,closeModal:x.inputs.hideProductPurchase,currentScreen:v.outputs.$screen}),{t:o}=(0,st.useTranslation)("widget_guides_product_purchase"),s=(0,at.useMemo)((()=>{switch(r){case f.Hc.Loading:return(0,Pt.jsx)(Qt,{});case f.Hc.Checkout:return(0,Pt.jsx)(qt,{});case f.Hc.PaymentProvider:return(0,Pt.jsx)(Vt,{});case f.Hc.PurchaseSuccess:case f.Hc.PurchaseError:return(0,Pt.jsx)(tr,{});default:return null}}),[r]),a=(0,at.useMemo)((()=>r===f.Hc.PurchaseSuccess?(0,Pt.jsx)(tt.w,{transparent:!0,shadow:!1,children:(0,Pt.jsx)(tt.w.RightAccessory,{children:(0,Pt.jsx)(rt.P,{onClick:t})})}):(0,Pt.jsxs)(tt.w,{transparent:!0,children:[(0,Pt.jsx)(tt.w.Title,{title:o("screenTitle")}),(0,Pt.jsx)(tt.w.RightAccessory,{children:(0,Pt.jsx)(rt.P,{onClick:t})})]})),[t,r,o]);return(0,Pt.jsxs)(et.u,{className:nt()("s__SAVY1YmpOGXVbDLeC9gc",r===f.Hc.PurchaseSuccess&&"s__WoCznbpZMn2fFXUZl9Fr"),visible:e,onClose:r===f.Hc.PaymentProvider?ct():t,noHeader:!0,children:[(0,Pt.jsx)(Pt.Fragment,{children:a}),r===f.Hc.PurchaseSuccess&&(0,Pt.jsx)(rr.f,{}),(0,Pt.jsx)("div",{className:"s__gfNU_xvLDZFb9_Bne3Aq",children:s})]})}}},sr=(0,o.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/product_purchase/index.ts",api:or})},87007:function(e,t,r){r.d(t,{h0:function(){return _.h},wB:function(){return p.wB},$o:function(){return v}});var o=r(30091),s=r(98116),a=r(29893),i=r.n(a),n=r(59051),l=r.n(n),c=r(14210),d=r(20611),u=r(47420),p=r(14573);const m=(0,s.createEvent)({sid:"5z8nrh"}),y=(0,s.createStore)(null,{sid:"-dt1r9n"}),g=(0,s.createStore)(null,{sid:"br7my2"}),h=(0,s.combine)({and:[{hotelDeepLink:y,isHotelsEnabled:c.qF.outputs.$isHotelsEnabled},({hotelDeepLink:e,isHotelsEnabled:t})=>!(!t||!e)&&(0,p.q2)(e)],or:{sid:"-kza2lc"}});(0,s.sample)({and:[{clock:y.updates,source:{searchParams:d.D.outputs.$searchParams,shouldHotelsModalOpen:h,entrypoint:g},filter:({shouldHotelsModalOpen:e})=>Boolean(e),fn:({searchParams:e,entrypoint:t},r)=>{const o=new URL(r);o.searchParams.set("source",t);const s=`${e.toString()}&${o.searchParams.toString()}`,a=new URLSearchParams(s);return{pathname:o.pathname,search:a,type:"push"}},target:d.D.inputs.navigateTo}],or:{sid:"-q5dscw"}}),(0,s.sample)({and:[{clock:m,fn:({entrypoint:e})=>e,target:g}],or:{sid:"-p7uc5v"}}),(0,s.sample)({and:[{clock:m,fn:({search_hotel_link_v2:e})=>e,target:y}],or:{sid:"-oszw54"}});const f={inputs:{hotelClicked:m},outputs:{$searchHotelParams:(0,s.combine)({and:[{departDate:u.i.outputs.exact.$departDate,returnDate:u.i.outputs.exact.$returnDate,passengers:u.i.outputs.$passengers,origin:u.i.outputs.$origin},({departDate:e,returnDate:t,passengers:r,origin:o})=>{const{period:s,...a}=(0,p.hM)(e??void 0,t??void 0)??{},n={adults:r.adults,children:r.children,infants:r.infants,period:s?.toLowerCase(),origin:o?.iata,...a};return i()(l())(n)}],or:{sid:"z9lg4l"}})},internal:{$hotelDeepLink:y,$hotelEntrypoint:g}};var _=r(50255);const v=(0,o.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/travel_map_hotel/index.ts",api:f})},50255:function(e,t,r){let o,s;r.d(t,{g:function(){return o},h:function(){return s}}),function(e){e.EXACT="EXACT",e.FLEXIBLE="FLEXIBLE",e.RANGES="FLEXIBLE_DATES",e.PERIOD="TRIP_PERIOD"}(o||(o={})),function(e){e.direction_screen="direction_screen",e.poi="poi",e.district="district"}(s||(s={}))},14573:function(e,t,r){r.d(t,{hM:function(){return l},q2:function(){return i},wB:function(){return n}});var o=r(95219),s=r(50255);const a=/\/hotels\/(\d+)/,i=e=>a.test(e),n=e=>e.match(a)?.[1];function l(e,t){return e?{period:s.g.EXACT,depart_date:(0,o.cM)(e),one_way:`${!t}`,return_date:t&&(0,o.cM)(t)}:null}},82214:function(e,t,r){r.d(t,{l:function(){return ke}});var o=r(30091),s=r(98116),a=r(51717),i=r(51456);const n=(0,s.createEvent)({sid:"8u1lgf"}),l=(0,s.createEvent)({sid:"-t7moea"}),c=(0,s.createEvent)({sid:"-k98orp"}),d=(0,s.createEvent)({sid:"pejy4d"}),u=(0,s.createEvent)({sid:"vrydv6"}),p=(0,s.createEvent)({sid:"-4y6ad3"}),m=(0,s.createEvent)({sid:"n2b009"}),y=(0,s.createEvent)({sid:"w0yytg"}),g=(0,s.createEvent)({sid:"-7ba7iy"}),h=(0,s.createEvent)({sid:"f89naw"}),f=(0,s.createStore)(null,{sid:"13mlr7"}),_=(0,s.createStore)(null,{sid:"-pxpve5"}),v=(0,s.createStore)(null,{sid:"-lwiurw"}),P=(0,s.createStore)(null,{sid:"dxt0y7"}),b=(0,s.createStore)(null,{sid:"-n3gfh5"}),E=(0,s.createStore)(null,{sid:"-exjgpj"}),k=(0,s.createStore)(null,{sid:"-slrd6w"}),{resetPoi:x,setValidPoi:S}=(0,s.createApi)({and:[b,{resetPoi:()=>null,setValidPoi:(e,t)=>t.poi}],or:{sid:"-ktc8jv"}}),{setPoi:$}=(0,s.createApi)({and:[E,{setPoi:(e,t)=>t}],or:{sid:"-ix5sc6"}}),{setPremiumPoi:w}=(0,s.createApi)({and:[k,{setPremiumPoi:(e,t)=>t.poi}],or:{sid:"-hi0whh"}}),L=(0,s.createEvent)({sid:"hobkgq"}),j=(0,s.createEvent)({sid:"-mqmpqr"}),C=(0,s.createEvent)({sid:"-m6t8jg"}),R=(0,s.createEvent)({sid:"r8npln"}),I=(0,s.createEvent)({sid:"i56nfv"}),A=(0,s.restore)(R,null,{sid:"z7nfjt"}).reset(I),O=(0,s.combine)({and:[{groups:i.mH.outputs.$tabs,groupId:f},({groupId:e,groups:t})=>null!==e&&t?t.find((({id:t})=>t===e))??null:null],or:{sid:"-gli24m"}}),{$isHotelsGroup:D,$isDistrictsGroup:T,$isRoutesGroup:F,$isFavoriteGroup:N}=(0,s.withFactory)({sid:"-13r7oc",fn:()=>(0,a.X)({source:O,shape:{$isHotelsGroup:e=>e?.type===i.NT,$isDistrictsGroup:e=>e?.type===i.OR,$isRoutesGroup:e=>e?.type===i.RR,$isFavoriteGroup:e=>e?.type===i.jQ}})}),M=(0,s.combine)({and:[b,i.mH.outputs.$flatPinsWithImage,(e,t)=>null===e?null:t.find((t=>t.id===e))??null],or:{sid:"-m5yu1q"}}),B=O.map((e=>e?.type??null)),z=O.map((e=>e?.banner??null)),G={$layerToCheck:_,setPremiumLayer:u,$premiumLayer:v,setValidLayer:c,tryToSetLayer:m,setHiddenLayer:p,checkIfPaywallIsEnabled:y,setLayerImmediately:l,showedPremiumLayerAfterPayment:g,setValidPoi:S,tryToSetPoi:L,$poiToCheck:E,checkPoi:j,$premiumPoi:k,setPremiumPoi:w,checkIfPaywallIsEnabledForPoi:C},U={resetPoi:x,setLayer:n,setPoi:$,setPlaceAlert:R,resetPlaceAlert:I,setDefaultLayer:d},H={$layerType:B,$layer:f,$hiddenLayer:P,$poi:b,$placeAlert:A,$banner:z,layerInited:h,$group:O,$pin:M,$isHotelsGroup:D,$isDistrictsGroup:T,$isRoutesGroup:F,$isFavoriteGroup:N};var q=r(77802),V=r(47420),Q=r(28257),Y=r(90309),W=r(47956),J=r(69594),Z=r(62423),X=r(57790),K=r(14210),ee=r(31087),te=r(44904),re=r(73472),oe=r(68621),se=r(15863),ae=r(21279);const ie=()=>{const e=(0,s.createEvent)({sid:"-6iqczd"}),t=(0,s.createEvent)({sid:"-my3e27"});return{renewExpiredPremium:ae.k.inputs.paywalledScenario({scenario:Z.n$.GuidesMapExpiredPremium,success:e,failure:t}),expiredPremiumRenewCompleted:e,expiredPremiumRenewFailed:t}},{renewExpiredPremium:ne,expiredPremiumRenewFailed:le,expiredPremiumRenewCompleted:ce}=ie();H.$layer.reset([W.I.outputs.guidesContentClosed,re._.outputs.closed,le]),H.$hiddenLayer.reset([W.I.outputs.guidesContentClosed,re._.outputs.closed]),G.$premiumLayer.reset([G.setValidLayer,re._.outputs.closed]),G.$layerToCheck.reset([W.I.outputs.guidesContentClosed,Y.x.inputs.closeGuidesPaywallModal,X.o.inputs.hideInproductPurchase,re._.outputs.closed,U.setDefaultLayer]),(0,s.sample)({and:[{clock:(0,s.withFactory)({sid:"f2j003",fn:()=>(0,se.CJ)({clock:U.setDefaultLayer,until:i.mH.outputs.$tabs.map(Boolean)})}),source:i.mH.outputs.$tabs,fn:e=>e?.find((e=>e.premium.type===ee.cy.FREE&&e.premium.availability===ee.oY.AVAILABLE&&e.places.length>0))?.id??null,target:H.$layer}],or:{sid:"-fwa6pz"}}),(0,s.sample)({and:[{clock:W.I.inputs.open,source:H.$layer,fn:(e,t)=>t.layer??e,target:U.setLayer}],or:{sid:"-eyqqiy"}}),(0,s.sample)({and:[{clock:q.aj.outputs.$layerQuery,source:H.$layer,filter:(e,t)=>e!==t,fn:(e,t)=>t,target:U.setLayer}],or:{sid:"-euw6df"}}),(0,s.sample)({and:[{clock:te.Y.inputs.open,source:H.$layer,fn:(e,t)=>t.layer??e,target:U.setLayer}],or:{sid:"-eey55y"}}),(0,s.sample)({and:[{clock:U.setLayer,filter:e=>null!==e,target:G.$layerToCheck}],or:{sid:"-dzjwju"}}),(0,s.sample)({and:[{clock:U.setLayer,filter:e=>null===e,target:U.setDefaultLayer}],or:{sid:"-dw94zo"}});const de=(0,s.combine)({and:[G.$layerToCheck,i.mH.outputs.$tabs,(e,t)=>t&&null!==e?t?.find((t=>t.type===e||t.id===e))?.id??1/0:null],or:{sid:"2w6xzg"}}),ue=(0,s.createEvent)({sid:"-lzpyyu"});(0,s.sample)({and:[{source:de,filter:e=>null!==e,fn:e=>e,target:ue}],or:{sid:"guldo8"}}),(0,s.sample)({and:[{clock:ue,source:{tabs:i.mH.outputs.$tabs,premiumTabs:i.mH.outputs.$premiumTabs,hiddenTabs:i.mH.outputs.$hiddenTabs,isPaywallEnabled:K.qF.outputs.$isPaywallEnabled,prevLayer:(0,s.withFactory)({sid:"-tmri8j",fn:()=>(0,J.X)(H.$layer)})},fn:({tabs:e,premiumTabs:t,hiddenTabs:r,isPaywallEnabled:o,prevLayer:s},a)=>({layer:a,tabs:e,premiumTabs:t,hiddenTabs:r,isPaywallEnabled:o,prevLayer:s}),target:G.tryToSetLayer}],or:{sid:"h9zmac"}}),(0,s.split)({and:[{source:G.tryToSetLayer,match:{notFound:({layer:e,tabs:t})=>Boolean(t?.every((({id:t})=>t!==e))),isPaywalledLayer:({layer:e,premiumTabs:t})=>{const r=t?.find((({id:t})=>t===e));return!!r&&r.premium?.availability===ee.oY.PAYWALLED},isHiddenLayer:({layer:e,hiddenTabs:t})=>Boolean(t?.some((({id:t})=>t===e)))},cases:{isPaywalledLayer:G.checkIfPaywallIsEnabled,notFound:[q.aj.inputs.removeMapParams,U.setDefaultLayer],isHiddenLayer:[G.setHiddenLayer,G.setValidLayer],__:G.setValidLayer}}],or:{sid:"i9q8ut"}}),(0,s.split)({and:[{source:(0,s.sample)({and:[{clock:G.checkIfPaywallIsEnabled,source:oe.b.outputs.$isPremiumExpired,fn:(e,t)=>({...t,isPremiumExpired:e})}],or:{sid:"-fajklc"}}),match:{isEnabled:({isPremiumExpired:e,isPaywallEnabled:t})=>t&&!e,isExpiredPremium:({isPremiumExpired:e})=>e},cases:{isEnabled:[Y.x.inputs.setPaywallEntrypoint.prepend((()=>Z.N9.PaywallTrap)),Y.x.inputs.openGuidesPaywallModal.prepend((({layer:e})=>({tab:e}))),G.setPremiumLayer],isExpiredPremium:[ne,G.setPremiumLayer],__:U.setDefaultLayer}}],or:{sid:"jn7q9b"}}),(0,s.sample)({and:[{clock:le,target:U.setDefaultLayer}],or:{sid:"v0ugbc"}}),(0,s.sample)({and:[{source:G.setValidLayer,fn:e=>e.layer,target:H.$layer}],or:{sid:"v3lfa5"}}),(0,s.sample)({and:[{source:G.setPremiumLayer,fn:e=>e.layer,target:G.$premiumLayer}],or:{sid:"vifvaw"}}),(0,s.sample)({and:[{source:G.setHiddenLayer,fn:e=>e.layer,target:H.$hiddenLayer}],or:{sid:"vlqmv2"}}),(0,s.sample)({and:[{clock:[X.o.outputs.$isInproductPurchaseVisible],source:{clickedPremiumTab:G.$premiumLayer,tabs:i.mH.outputs.$tabs},filter:({clickedPremiumTab:e,tabs:t},r)=>{const o=t?.find((({id:t})=>t===e));return o?.premium?.availability===ee.oY.AVAILABLE&&!r},target:[G.showedPremiumLayerAfterPayment,Q.u.inputs.hide]}],or:{sid:"w14vh6"}}),(0,s.sample)({and:[{clock:ce,source:{clickedPremiumTab:G.$premiumLayer,tabs:i.mH.outputs.$tabs},filter:({clickedPremiumTab:e,tabs:t})=>{const r=t?.find((({id:t})=>t===e));return r?.premium?.availability===ee.oY.AVAILABLE},target:G.showedPremiumLayerAfterPayment}],or:{sid:"wyobo7"}}),(0,s.sample)({and:[{clock:G.showedPremiumLayerAfterPayment,source:G.$premiumLayer,filter:e=>null!==e,target:U.setLayer}],or:{sid:"xhx4fu"}}),(0,s.sample)({and:[{source:G.setLayerImmediately,target:H.$layer}],or:{sid:"xxbd1y"}}),(0,s.sample)({and:[{source:H.$layer,filter:e=>null!==e,target:H.layerInited}],or:{sid:"ybm0hc"}}),(0,s.sample)({and:[{clock:[Y.x.outputs.$isPaywallOpened.updates,X.o.outputs.$isInproductPurchaseVisible.updates],source:{guidesPaywallOpened:Y.x.outputs.$isPaywallOpened,premiumPaywallOpened:X.o.outputs.$isInproductPurchaseVisible,layer:H.$layer},filter:({guidesPaywallOpened:e,premiumPaywallOpened:t,layer:r})=>!e&&!t&&null===r,target:U.setDefaultLayer}],or:{sid:"yfgkmv"}});var pe=r(65740),me=r(95628),ye=r(42177),ge=r(10604),he=r(91285);function fe(e,t,r){const o=(0,he.Oh)(e,r)?.places;return o&&(0,he.xd)(o).find((e=>e.id===t))||null}const{renewExpiredPremium:_e,expiredPremiumRenewCompleted:ve,expiredPremiumRenewFailed:Pe}=ie();G.$poiToCheck.reset([Q.u.inputs.show,Y.x.inputs.closeGuidesPaywallModal,X.o.inputs.hideInproductPurchase,te.Y.inputs.close,Pe,ge.L.inputs.showProductPurchase]),H.$poi.reset([te.Y.inputs.close]),G.$premiumPoi.reset([G.setValidPoi]);const be=(0,s.combine)({and:[H.$layer,G.$poiToCheck,te.Y.outputs.$openingParams,(e,t,r)=>r?.withoutMap||null!==e?t:null],or:{sid:"lduyo7"}});(0,s.sample)({and:[{clock:be,source:{tabs:i.mH.outputs.$tabs,layer:H.$layer,isPaywallEnabled:K.qF.outputs.$isPaywallEnabled,openType:te.Y.outputs.$openingParams.map((e=>e?.openType??ee.B8.POI))},fn:({tabs:e,layer:t,isPaywallEnabled:r,openType:o},s)=>({poi:s,tabs:e,layer:t,isPaywallEnabled:r,openType:o}),target:G.tryToSetPoi}],or:{sid:"nu8o5v"}}),(0,s.withFactory)({sid:"-5nw5r0",fn:()=>(0,pe.s)({source:G.tryToSetPoi,if:({poi:e})=>null===e,then:U.resetPoi,else:G.checkPoi})}),(0,s.sample)({and:[{clock:te.Y.inputs.close,target:U.resetPoi}],or:{sid:"-58hx4w"}});const Ee=(0,s.createEvent)({sid:"k57rfq"});(0,s.sample)({and:[{clock:Ee,source:{openSource:W.I.outputs.$trapSource,poiOpenSource:W.I.outputs.$poiOpenSource,poiQueryOpenSource:W.I.outputs.$poiQueryOpenSource,mapOpenSource:W.I.outputs.$mapOpenSource},fn:(e,{tabs:t,poi:r,layer:o})=>{const s=fe(t,r,o);let a=null;return s?.premium.availability===ee.oY.AVAILABLE&&(a=s.coordinates),{...e,layer:o,center:a}},target:W.I.inputs.open}],or:{sid:"-4t3ois"}}),(0,s.split)({and:[{source:G.checkPoi,match:{isPaywalledPoi:({poi:e,layer:t,tabs:r})=>!(!r||null===t||!e)&&fe(r,e,t)?.premium.availability===ee.oY.PAYWALLED,shouldGoToCheckout:({poi:e,layer:t,tabs:r,openType:o})=>!(!r||null===t||!e)&&((0,he.mb)(r,e)?.premium.availability===ee.oY.CHECKOUT&&o===ee.B8.POI),shouldOpenMap:({openType:e})=>e===ee.B8.MAP},cases:{isPaywalledPoi:[G.checkIfPaywallIsEnabledForPoi,te.Y.inputs.close],shouldGoToCheckout:[ge.L.inputs.setProductId.prepend((({poi:e,layer:t,tabs:r})=>r&&null!==t&&e&&(0,he.mb)(r,e).productId||null)),te.Y.inputs.close,ge.L.inputs.showProductPurchase],shouldOpenMap:[te.Y.inputs.close,Ee],__:G.setValidPoi}}],or:{sid:"-3ugn51"}}),(0,s.split)({and:[{source:(0,s.sample)({and:[{clock:G.checkIfPaywallIsEnabledForPoi,source:oe.b.outputs.$isPremiumExpired,fn:(e,t)=>({...t,isPremiumExpired:e})}],or:{sid:"atikex"}}),match:{isPremiumExpired:({isPremiumExpired:e})=>e,isEnabled:({isPaywallEnabled:e,isPremiumExpired:t})=>e&&!t},cases:{isPremiumExpired:[_e,G.setPremiumPoi],isEnabled:[ye.X.inputs.entryPointInteracted.prepend((()=>Z.N9.PaywallTrapPoi)),G.setPremiumPoi],__:Q.u.inputs.show}}],or:{sid:"-1h8j62"}}),(0,s.sample)({and:[{source:W.I.inputs.open,fn:({poi:e})=>e||null,target:U.setPoi}],or:{sid:"9gg5oi"}}),(0,s.sample)({and:[{source:te.Y.inputs.open,fn:({poi:e})=>e,target:U.setPoi}],or:{sid:"9valp9"}}),(0,s.sample)({and:[{clock:q.aj.outputs.$poiQuery,target:U.setPoi}],or:{sid:"9z55us"}}),(0,s.sample)({and:[{clock:X.o.outputs.$isInproductPurchaseVisible,source:{clickedPremiumPoi:G.$premiumPoi,layer:H.$layer,tabs:i.mH.outputs.$tabs},filter:({clickedPremiumPoi:e,layer:t,tabs:r},o)=>{if(!r||null===t||!e)return!1;const s=fe(r,e,t)?.premium.availability===ee.oY.AVAILABLE;return Boolean(e)&&s&&!o},target:[G.showedPremiumLayerAfterPayment,Q.u.inputs.hide]}],or:{sid:"adzlvj"}}),(0,s.sample)({and:[{clock:ve,source:{clickedPremiumPoi:G.$premiumPoi,layer:H.$layer,tabs:i.mH.outputs.$tabs},filter:({clickedPremiumPoi:e,layer:t,tabs:r})=>{if(!r||null===t||!e)return!1;const o=fe(r,e,t)?.premium.availability===ee.oY.AVAILABLE;return Boolean(e)&&o},target:[G.showedPremiumLayerAfterPayment,Q.u.inputs.hide]}],or:{sid:"bettmq"}}),(0,s.sample)({and:[{clock:G.showedPremiumLayerAfterPayment,source:{poi:G.$premiumPoi,layer:H.$layer,guideId:me.R.outputs.$guideId,openSource:W.I.outputs.$trapSource,poiQueryOpenSource:W.I.outputs.$poiQueryOpenSource},filter:({poi:e})=>Boolean(e),fn:({poi:e,layer:t,guideId:r,openSource:o,poiQueryOpenSource:s})=>({poi:e,layer:t,guideId:r,openSource:o,poiQueryOpenSource:s||void 0}),target:te.Y.inputs.open}],or:{sid:"cr7pui"}}),(0,s.sample)({and:[{source:{poi:H.$poi},filter:({poi:e})=>null===e,target:te.Y.inputs.close}],or:{sid:"nowep2"}}),H.$placeAlert.reset([W.I.outputs.guidesContentClosed,te.Y.inputs.close,re._.outputs.closed]),(0,s.sample)({and:[{source:{poi:H.$poi},filter:({poi:e})=>null!==e,target:U.resetPlaceAlert}],or:{sid:"168jtf"}}),(0,s.sample)({and:[{clock:H.$layer.updates,target:U.resetPlaceAlert}],or:{sid:"1m6l0w"}}),(0,s.sample)({and:[{clock:[H.$layer.updates,H.$poi.updates],source:{poi:H.$poi,poiQuery:q.aj.outputs.$poiQuery,origin:V.i.outputs.$origin,layerQuery:q.aj.outputs.$layerQuery,isModalOpened:W.I.outputs.$isGuidesModalOpened,openedFrom:W.I.outputs.$trapSource,layerType:H.$layerType,layerId:H.$layer},filter:({layerId:e,layerQuery:t,poi:r,poiQuery:o,isModalOpened:s})=>r?r!==o&&s:null!==e&&e!==t&&s,fn:({layerType:e,layerId:t,origin:r,poi:o})=>({originIata:r?r.iata:null,layer:e,layerId:t,poi:o,isCitiesView:!1}),target:q.aj.inputs.setTravelMapModalPath}],or:{sid:"8pyisg"}}),(0,s.sample)({and:[{clock:Y.x.inputs.closeGuidesPaywallModal,target:Q.u.inputs.hide}],or:{sid:"aje1ef"}});const ke=(0,o.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/travel_map_selected/index.ts",api:{inputs:U,outputs:H,internals:G}})},89101:function(e,t,r){r.d(t,{B:function(){return p}});var o=r(30091),s=r(98116),a=r(76588),i=r(80472),n=r(89421),l=r(35529);const c=l.Unknown,d=l.Unknown,u={inputs:{createMapStyle:function({$directionMapShowed:e,readyToFetchMapStyle:t,$placeData:r}){const o=(0,s.withFactory)({sid:"-s980zw",fn:()=>(0,a.s5)({name:"guides_map_styles",params:(0,s.withFactory)({sid:"1zs0kg",fn:()=>(0,a.t6)()}),request:{method:"GET",url:({url:e})=>e},response:{contract:(0,i.v)(c)}})}),l=(0,s.withFactory)({sid:"-6a83v",fn:()=>(0,a.s5)({name:"guides_map_polygons",params:(0,s.withFactory)({sid:"ikcsd9",fn:()=>(0,a.t6)()}),request:{method:"GET",url:({url:e})=>e},response:{contract:(0,i.v)(d)}})}),{$data:u,start:p,reset:m}=l,{$data:y,start:g,reset:h}=o,f=(0,s.createEvent)({sid:"au66at"}),_=(0,s.restore)(f,null,{sid:"zd58x0"}),v=(0,s.createEvent)({sid:"gyeg1l"});(0,s.sample)({and:[{clock:t,source:{theme:n.H.outputs.$theme,placeData:r,directionMapShowed:e},filter:({placeData:e})=>Boolean(e),fn:({placeData:e,theme:t,directionMapShowed:r})=>((e,t,r)=>{const o=e.replace("{theme}",t||"light"),s=new URL(o);return r&&s.searchParams.set("source","direction_screen"),s.toString()})(e.polygons_geo_json,t,r),target:f}],or:{sid:"-hgkgtf"}});const P=(0,s.combine)({and:[y,u,r,(e,t,r)=>{if(!e||!t||!r)return null;const o=e,s=t,a=r.polygons_source_id,i={type:"geojson",data:s};return{style:{...o,layers:[],sources:{...o.sources,[a]:i}},layers:o.layers,polygonsSource:s}}],or:{sid:"-exijs4"}}),b=(0,s.combine)({and:[r,y,(e,t)=>{if(!e||!t)return null;const{sources:r={}}=t;return r[e.polygons_source_id].data}],or:{sid:"r1s0kt"}});return(0,s.sample)({and:[{clock:b.updates,filter:Boolean,fn:e=>({url:e}),target:p}],or:{sid:"oblz04"}}),(0,s.sample)({and:[{clock:f,source:_,filter:Boolean,fn:e=>({url:e}),target:g}],or:{sid:"or07m8"}}),(0,s.sample)({and:[{clock:v,target:[m,h]}],or:{sid:"p6y8tp"}}),{$data:P,mapStyleQuery:o,polygonsQuery:l,reset:v}}}},p=(0,o.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/travel_map_style/index.ts",api:u})},28257:function(e,t,r){r.d(t,{u:function(){return p}});var o=r(30091),s=r(98116),a=r(47047),i=r(15863);const{$enabled:n,turnOn:l,turnOff:c}=(0,s.withFactory)({sid:"-8k7nzl",fn:()=>(0,a.d)(i.qs,!1)}),d={show:l,hide:c},u={$shown:n},p=(0,o.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/wrong_map_params_alert/index.ts",api:{inputs:d,outputs:u}})},57790:function(e,t,r){r.d(t,{o:function(){return P}});var o=r(98116),s=r(47047),a=r(15863),i=r(42177),n=r(63246),l=r(4119),c=r(54428),d=r(24991),u=r(86042);const{$featuredOfferId:p,findOfferId:m,offersListReceived:y,$selectedOfferId:g}=d.C.outputs,{offerSelected:h}=d.C.inputs,{turnOn:f,turnOff:_,$enabled:v}=(0,o.withFactory)({sid:"-w3m7re",fn:()=>(0,s.d)(a.qs,!1)});(0,o.sample)({and:[{clock:i.X.inputs.entryPointInteracted,target:f}],or:{sid:"lrsdps"}}),(0,o.sample)({and:[{clock:_,target:i.X.inputs.resetEntryPoint}],or:{sid:"m7qex9"}}),(0,o.sample)({and:[{clock:f,filter:n.y.outputs.$isClient,fn:()=>({title:l.bW.MoreProductLanding}),target:u.A.inputs.sendUxFeedback}],or:{sid:"mahdw2"}}),(0,o.sample)({and:[{clock:c.O.outputs.loggedIn,filter:v,target:d.C.inputs.launch}],or:{sid:"n469xk"}}),(0,o.sample)({and:[{clock:y,source:{selectedOfferId:g,featuredOfferId:p},filter:v,fn:({selectedOfferId:e,featuredOfferId:t},r)=>m(e,t,r),target:h}],or:{sid:"nlrox4"}});const P={inputs:{showInproductPurchase:f,hideInproductPurchase:_},outputs:{$isInproductPurchaseVisible:v}}},63281:function(e,t){t.Z={background:"s__q5LKcKiISmmsDNGQKY6c",confetti:"s__icQEGSImgS95HL1jk1f5",rightTopBubble:"s__fzdGIeMGDe5qGDyYSpRy",leftBottomBubble:"s__ZFGMMc7BOigFeuEkdDTk"}},14711:function(e,t,r){r.d(t,{p:function(){return p}});var o=r(85893),s=r(67294),a=r(94184),i=r(49963),n=r(44619),l=r(80191),c={tableCell:"s__M8njCacQJr_0KjtoyqEm",title:"s__kXMpHHdQh1NAdSEJiEUG",subtitle:"s__faKUT1c57DUMAmin3_As",content:"s__VHwLO_1h1D8c4cv_JGWL",cell:"s__grHlAhVTfBCndz4ItejZ",divider:"s__pvf0en6SeuMDnP2Uqzmz",preventHoverState:"s__RZJWzinGGTO4JIML0D5p",disabled:"s__uzrNgEpV8STrAVOwTRBy",leftSide:"s__KYlUOiUmifA_PPy3ojKe",rightSideAddition:"s__deCdu79vljV5JF3Sdfhe",rightSide:"s__SOYvTQoRs13_JlgZbl34",label:"s__eDxmSopi3L7qKM3pMOuB",mainText:"s__LI48T8KqYO4pUNnzOE9w",subText:"s__JGVZ5ZvZMdieHitZnRZZ"};r(19959);const d=e=>{switch(e){case"title":return n.y.Title3Bold;case"subtitle":return n.y.Body1Bold;default:return n.y.Body1Regular}},u=({cellType:e="cell",mainText:t,subText:r,mainTextTruncateMode:u,subTextTruncateMode:p,renderAs:m="div",hideRightSideAddition:y=!1,preventHoverState:g=!1,className:h,leftSideClassName:f,labelClassName:_,rightSideAdditionClassName:v,rightSideClassName:P,leftSideContent:b,labelContent:E,rightSideAdditionContent:k,rightSideContent:x,testId:S,...$},w)=>{const L="subtitle"!==e,j=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.i,{className:c.divider}),(0,o.jsxs)("div",{className:c.content,children:[L&&(0,o.jsx)("div",{className:a(c.leftSide,f),children:b}),(0,o.jsx)("div",{className:a(c.label,_),children:E??(0,o.jsxs)(o.Fragment,{children:[t&&(0,o.jsx)(i.x,{type:d(e),transformOnMobile:!0,className:c.mainText,truncateMode:u,children:t}),r&&(0,o.jsx)(i.x,{type:n.y.Body3Regular,className:c.subText,truncateMode:p,children:r})]})}),!y&&L&&(0,o.jsx)("div",{className:a(c.rightSideAddition,v),children:k}),L&&(0,o.jsx)("div",{className:a(c.rightSide,P),children:x})]})]});return s.createElement(m,{"data-test-id":S,className:a(c.tableCell,c[e],{[c.preventHoverState]:g,[c.disabled]:$.disabled},h),ref:w,...$},j)},p=(0,s.memo)((0,s.forwardRef)(u))},99763:function(e,t,r){r.d(t,{I:function(){return s}});var o=r(98116);function s(e){var t,r;o.is.unit(e)?t=e:({source:t,reset:r}=e);var s=(0,o.createStore)(!0,{name:"$canTrigger",sid:"ys2jl0"}),a=(0,o.sample)({and:[{source:t,filter:s}],or:{name:"trigger",sid:"e3xto3"}});return s.on(a,(()=>!1)),r&&s.reset(r),a}},69594:function(e,t,r){r.d(t,{X:function(){return s}});var o=r(98116);function s(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var[s]=t,a=t.length<2?null:t[1];if(!o.is.store(s,{sid:"mzq5dc"}))throw Error("previous first argument should be a store");var i=(0,o.createStore)(a,{and:{serialize:"ignore",skipVoid:!1},name:"$prevValue",sid:"e05yob"}),n=s.graphite;return n.seq.push(o.step.compute({fn:(e,t,r)=>((0,o.launch)({target:i,params:r.a,defer:!0}),e)})),i}}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/shared-1ca0ef4daa26f02ca30a8218a67a97afd3989871.04067df968cd50ab785c.min.js.map