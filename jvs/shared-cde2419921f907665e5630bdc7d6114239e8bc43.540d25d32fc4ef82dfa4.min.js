"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8767],{12566:function(e,t,r){r.d(t,{Bb:function(){return l},EV:function(){return a},Kn:function(){return s},pA:function(){return o},qL:function(){return c}});var i=r(35529),n=r(45711);const s=(0,i.Record)({iata:i.String,translations:(0,i.Dictionary)(n.Cu,i.String)}),a=s,o=(0,i.Record)({city:s}),c=s,l=(0,i.Intersect)((0,i.Record)({city:s.nullable()}),s)},47530:function(e,t,r){r.d(t,{g8:function(){return a},gh:function(){return s},nE:function(){return o},nG:function(){return i},p4:function(){return n}});const i=(e,t)=>({iata:e.iata,name:e.translations[t]??e.translations.en}),n=(e,t)=>e.map((e=>i(e,t))),s=(e,t)=>e.map((({city:e})=>i(e,t))),a=(e,t)=>e.map((e=>({airlineId:e.iata,name:e.translations[t]??e.translations.en}))),o=(e,t)=>e.map((e=>({...i(e,t),cityIata:e?.city?.iata,cityName:e?.city?.translations[t]??e?.city?.translations.en})))},73684:function(e,t,r){r.d(t,{R9:function(){return m},u1:function(){return _},vc:function(){return b},X6:function(){return v},yy:function(){return y},Nf:function(){return h},Tk:function(){return x},W3:function(){return a},be:function(){return s},ld:function(){return n},Kn:function(){return o},Hx:function(){return c},pd:function(){return D},U7:function(){return E},Pe:function(){return i}});const i="\nfragment priceFields on Price {\n  depart_date\n  return_date\n  value\n  cashback\n  found_at\n  signature\n  ticket_link\n  currency\n  provider\n  segments {\n    transfers {\n      duration_seconds\n      country_code\n      visa_required\n      night_transfer\n      at\n      to\n      tags\n    }\n    flight_legs {\n      origin\n      destination\n      local_depart_date\n      local_depart_time\n      local_arrival_date\n      local_arrival_time\n      flight_number\n      operating_carrier\n      aircraft_code\n      technical_stops\n      equipment_type\n      duration_seconds\n    }\n  }\n}\n",n="\nfragment citiesFields on CityInfo {\n  city {\n    iata\n    translations(filters: {locales: $locales})\n  }\n}",s="\nfragment airportsFields on Airport {\n  iata\n  translations(filters: {locales: $locales})\n  city {\n    iata\n    translations(filters: {locales: $locales})\n  }\n}",a="\nfragment airlinesFields on Airline {\n  iata\n  translations(filters: {locales: $locales})\n}",o="\nfragment countriesFields on Country {\n  iata\n  translations(filters: {locales: $locales})\n}",c="\nfragment locationMainPageFields on LocationMainPageV2 {\n  main_tag(filters: {locales: $locales})\n  min_price {\n    value\n    currency\n  }\n  entity {\n    iata\n    name(filters: {locales: $locales})\n    type\n    ark_id\n    slug\n  }\n  content {\n    __typename\n    ... on POIContent {\n      ark_id\n      poi_id\n      tabs_entities {\n        id\n      }\n      description(filters: {locales: $locales})\n      images {\n        image_url\n      }\n      start_date\n    }\n    ... on NationalParkContent {\n      ark_id\n      description(filters: {locales: $locales})\n      images_urls\n    }\n    ... on CityContent {\n      ark_id\n      images_urls\n    }\n    ... on IslandContent {\n      ark_id\n      images_urls\n    }\n    ... on RegionContent {\n      ark_id\n      images_urls\n    }\n    ... on CountryContent {\n      ark_id\n      images_urls\n    }\n  }\n}";var l=r(35529),u=r(12566);const d=(0,l.Record)({duration_seconds:l.Number,country_code:l.String,visa_required:l.Boolean,night_transfer:l.Boolean,at:l.String,to:l.String,tags:(0,l.Array)(l.String)}),p=(0,l.Record)({origin:l.String,destination:l.String,local_depart_date:l.String,local_depart_time:l.String,local_arrival_date:l.String,local_arrival_time:l.String,flight_number:l.String,operating_carrier:l.String,aircraft_code:l.String,technical_stops:(0,l.Array)(l.String),equipment_type:l.String,duration_seconds:l.Number}),g=(0,l.Record)({transfers:(0,l.Array)(d),flight_legs:(0,l.Array)(p)}),f=(0,l.Union)((0,l.Literal)("ORGANIC"),(0,l.Literal)("EXTERNAL"),(0,l.Literal)("PREDICTED")),h=(0,l.Record)({depart_date:l.String,return_date:l.String.nullable(),value:l.Number,cashback:l.Number,found_at:l.Number,signature:l.String,ticket_link:l.String,currency:l.String,segments:(0,l.Array)(g),provider:f}),m=(0,l.Record)({value:l.Number,currency:l.String}),_=(0,l.Record)({value:l.Number}),b=u.qL,y=u.pA,v=u.Bb,x=(0,l.Record)({cities:(0,l.Array)(y),airlines:(0,l.Array)(b),airports:(0,l.Array)(v)});var S=r(24350),$=r.n(S),w=r(47530);const k=(e,t)=>{const r=(0,w.gh)(e,t);return $()(r,"iata")},C=(e,t)=>{const r=(0,w.g8)(e,t);return $()(r,"airlineId")},F=(e,t)=>{const r=(0,w.nE)(e,t);return $()(r,"iata")},D=(e,t)=>({cities:k(e.cities,t),airlines:C(e.airlines,t),airports:F(e.airports,t)});var P=r(45578),j=r.n(P),A=(r(52262),r(24506),r(26699),r(14840));function E({price:e,oldPrice:t,priceMultiplier:r=1}){const i=e.segments.map((e=>({flights:e.flight_legs.map(((t,r)=>{const i=e.transfers[r-1]?Math.round(e.transfers[r-1].duration_seconds/60):0,n=(0,A.x8)((0,A.wG)(t.local_arrival_date,t.local_arrival_time)),s=(0,A.x8)((0,A.wG)(t.local_depart_date,t.local_depart_time));return{arrivalAirportIata:t.destination,arrivalDate:t.local_arrival_date,arrivalTime:t.local_arrival_time,localArrivalTimestamp:n,departureAirportIata:t.origin,departureDate:t.local_depart_date,departureTime:t.local_depart_time,localDepartureTimestamp:s,delay:i,duration:t.duration_seconds/60,airlineId:t.operating_carrier,equipment:t.aircraft_code,number:t.flight_number,operatingCarrier:t.operating_carrier,technicalStops:(a=t.technical_stops,a.map((e=>({airportCode:e})))),transport:t.equipment_type,signature:`${n}:${s}:${t.origin}:${t.destination}`,aircraft:t.aircraft_code,departureTimestamp:0,arrivalTimestamp:0};var a})),transfers:e.transfers.map((e=>({arrivalAirport:e.at,arrivalAirline:"",cityCode:e.to,countryCode:e.country_code,departureAirport:e.to,departureAirline:"",duration:Math.round(e.duration_seconds/60),recheckBaggage:e.tags.includes("recheck_baggage"),tags:e.tags,visaRules:{required:e.visa_required},nightTransfer:e.night_transfer})))}))),n=e.segments.map((e=>j()(e.flight_legs.map((e=>({airlineId:e.operating_carrier,transportType:e.equipment_type}))),"airlineId")));return{id:B(e),signature:e.signature,value:e.value*r,currency:e.currency,cashback:e.cashback*r,ticketLink:e.ticket_link,oldPrice:t?.value??null,departDate:(0,A.sG)(e.depart_date)??new Date,returnDate:(0,A.sG)(e.return_date),foundAt:1e3*e.found_at,carriers:n,segments:i}}function B(e){return[e.signature,e.found_at,e.value].filter(Boolean).join("")}},75241:function(e,t,r){r.d(t,{fi:function(){return a},fo:function(){return o}});var i=r(88300),n=r(61653);function s({price:e,currencyRates:t,currency:r,tripClass:s,passengers:a,params:o}){const c=function({url:e,tripClass:t,passengers:r}){const[n]=e.split("?"),s=(0,i.E)(n);return s?`/${(0,i.j)({segments:s.segments,tripClass:t??s.tripClass,passengers:r??s.passengers})}`:n}({url:e.ticketLink,tripClass:s,passengers:a}),[l,u]=e.ticketLink.split("?"),d=new URLSearchParams(u),p={id:e.id,segments:e.segments,carriers:e.carriers.flat().map((e=>e.airlineId)),sign:e.signature,tags:[]},g=t[r]||1,f=e.value*g;return(0,n.qp)({ticket:p,baseSearchUrl:c,unifiedPrice:f,marker:"",currentCurrency:r,currencyRates:t,searchId:d.get("expected_price_uuid")??void 0,expectedPriceSource:o?.expectedPriceSource??d.get("expected_price_source")??"",requestSource:o?.requestSource??d.get("request_source")??"",utmSource:d.get("utm_source")??"",preCheckedFilters:o?.filters??{}})}function a({priceLink:e,params:t}){const[r,i]=e.split("?"),n=new URLSearchParams(i);return t?.requestSource&&n.set("request_source",t.requestSource),t?.expectedPriceSource&&n.set("expected_price_source",t.expectedPriceSource),`/search${r}?${n.toString()}`}function o({price:e,passengers:t,tripClass:r,currency:i,currencyRates:n,params:a}){return{...e,value:e.value,ticketLink:s({price:{...e,value:e.value},passengers:t,tripClass:r,currency:i,currencyRates:n,params:a})}}},85513:function(e,t,r){r.d(t,{j:function(){return He}});var i=r(98116),n=r(65752),s=r(30091);const a=(0,i.createEvent)({sid:"-u05mbm"}),o=(0,i.createEvent)({sid:"iimk06"}),c=(0,i.createEvent)({sid:"-bkjaju"}),l=(0,i.createEvent)({sid:"-xl20dl"});var u=r(54448),d=r(72675),p=r(38032),g=r(82097),f=r(27636),h=r(63246),m=r(82672),_=r(11763),b=r(47420),y=r(43175),v=r(87722),x=r(82203),S=r(41520),$=r(38387),w=r(27497);const{matchPage:k,pages:C}=m.$.outputs,{$exploreFlowEnabled:F}=S.l.outputs,{$origin:D,$destination:P,$dateCase:j,$isSimpleSearch:A,$emptyDates:E,$isEconomy:B}=b.i.outputs,{$isAviaFormActive:N}=_.B.outputs,{$isClient:q}=h.y.outputs,{$isSearchInited:V}=w.N.outputs,{$isMobile:O}=$.l.outputs,{$autosearchEnabled:M}=y.J.outputs,[R,T]=(0,i.withFactory)({sid:"-bzjjnm",fn:()=>(0,f.K)((0,i.withFactory)({sid:"-fg6epn",fn:()=>(0,u.or)((0,i.withFactory)({sid:"-ffmm2k",fn:()=>(0,d.x)(q,(0,i.withFactory)({sid:"-f2zcdj",fn:()=>(0,u.or)(k(C.MainPage).$isOpen,k(C.SearchPage).$isOpen)}),(0,i.combine)({and:[D,P,v.bx],or:{sid:"-f0s603"}}),(0,i.withFactory)({sid:"-f08deq",fn:()=>(0,p.f)((0,i.withFactory)({sid:"w0ko03",fn:()=>(0,g.f)(j,x.M4.Weekends)}))}),N,A)}),k(C.MapPage).$isOpen)}))}),[I,L]=(0,i.withFactory)({sid:"-ao98ku",fn:()=>(0,f.K)((0,i.withFactory)({sid:"-e4w3qb",fn:()=>(0,d.x)(R,M,O,(0,i.withFactory)({sid:"-e2oxb5",fn:()=>(0,p.f)(E)}),(0,i.withFactory)({sid:"-e254ps",fn:()=>(0,p.f)(V)}),(0,i.withFactory)({sid:"-e1lc4f",fn:()=>(0,d.x)((0,i.withFactory)({sid:"-e1lc0z",fn:()=>(0,u.or)((0,i.withFactory)({sid:"-96p75n",fn:()=>(0,g.f)(j,x.M4.Exact)}),(0,i.withFactory)({sid:"-96p4se",fn:()=>(0,g.f)(j,null)}))}))}))}))}),H=(0,i.withFactory)({sid:"-r03xoi",fn:()=>(0,d.x)(F,(0,i.withFactory)({sid:"-dmqw5e",fn:()=>(0,p.f)(I)}),B)}),z=(0,i.createStore)(!1,{sid:"-6vslrs"}),U=(0,i.createEvent)({sid:"-ises12"});(0,i.sample)({and:[{clock:U,source:(0,i.withFactory)({sid:"79bg8h",fn:()=>(0,p.f)(z)}),fn:e=>({filters:{withBaggage:e},type:"push"}),target:a}],or:{sid:"76mp9v"}}),z.on(c,((e,t)=>t.withBaggage)).reset(l);const G=(0,i.createStore)(!1,{sid:"p92n5i"}),W=(0,i.createEvent)({sid:"nf8r45"});(0,i.sample)({and:[{clock:W,source:(0,i.withFactory)({sid:"-igy35d",fn:()=>(0,p.f)(G)}),fn:e=>({filters:{direct:e},type:"push"}),target:a}],or:{sid:"in02c5"}}),G.on(c,((e,t)=>t.direct)).reset(l);const J=(0,i.createStore)(!1,{sid:"-3cp56h"}),K=(0,i.createEvent)({sid:"-g10rje"});(0,i.sample)({and:[{clock:K,source:{directValue:G,withoutVisaTransfersValue:(0,i.withFactory)({sid:"kuly90",fn:()=>(0,p.f)(J)})},fn:({directValue:e,withoutVisaTransfersValue:t})=>({filters:{noVisaAtTransfer:!e&&t},type:"push"}),target:a}],or:{sid:"6dwq52"}}),J.on(c,((e,t)=>!t.direct&&t.noVisaAtTransfer)).reset(l);const X=G,Q=(0,i.combine)({and:[{direct:G,noVisaAtTransfer:J,withBaggage:z}],or:{sid:"tlhbt8"}});var Y=r(25387),Z=r.n(Y),ee=r(76830),te=r(20611),re=r(76262),ie=r.n(re),ne=r(17563);let se;function ae(e,t){const r=ie()([se.Direct,se.WithoutVisa,se.Baggage],e);return(0,ne.stringifyUrl)({url:"",query:{...r,...t}})}!function(e){e.Direct="filter_stops",e.Baggage="filter_baggage",e.WithoutVisa="filter_transfers_without_visa"}(se||(se={}));var oe=r(89935),ce=r.n(oe),le=r(46898),ue=r.n(le);const de=ce()(((e,t)=>e.direct?{...t,[se.Direct]:!0}:t)),pe=ce()(((e,t)=>e.withBaggage?{...t,[se.Baggage]:!0}:t)),ge=ce()(((e,t)=>e.direct||!e.noVisaAtTransfer?t:{...t,[se.WithoutVisa]:!0}));function fe(e){return ue()([de(e),pe(e),ge(e)])({})}const he=ce()(((e,t)=>{let r;return r=se.Direct in e&&e.filter_stops,{...t,direct:r}})),me=ce()(((e,t)=>{let r;return r=se.Baggage in e&&e.filter_baggage,{...t,withBaggage:r}})),_e=ce()(((e,t)=>{let r;return r=!e.filter_stops&&se.WithoutVisa in e&&e.filter_transfers_without_visa,{...t,noVisaAtTransfer:r}})),be=ce()(((e,t)=>({...t,direct:"0"===e?.transfersCount?.[0]}))),ye=ce()(((e,t)=>({...t,withBaggage:Boolean(e?.baggage)}))),ve=ce()(((e,t)=>({...t,noVisaAtTransfer:Boolean(e?.withoutVisa)}))),xe=(0,i.createEvent)({sid:"e32y82"}),{matchPage:Se,pages:$e}=m.$.outputs,{$searchParamsPlain:we,$href:ke}=te.D.outputs,{removeQueryParams:Ce,navigateTo:Fe,createQueryParameterApi:De}=te.D.inputs,Pe=(0,i.combine)({and:[Q,fe],or:{sid:"r8ulg2"}}),je=De({name:"filter_stops",clientOnly:!1}),Ae=De({name:"filter_baggage",clientOnly:!1}),Ee=De({name:"filter_transfers_without_visa",clientOnly:!1}),Be=(0,i.combine)({and:[{direct:je.$value,baggage:Ae.$value,withoutVisa:Ee.$value},({direct:e,baggage:t,withoutVisa:r})=>{const i={};return e&&(i[se.Direct]=!0),t&&(i[se.Baggage]=!0),r&&!i[se.Direct]&&(i[se.WithoutVisa]=!0),i}],or:{sid:"b7w3xw"}}),Ne=(0,i.withFactory)({sid:"64ffoh",fn:()=>(0,ee.D)({source:(0,i.sample)({and:[{clock:[xe,ke.updates,R.updates]}],or:{sid:"8x2tfz"}}),timeout:0,name:"debounce: explore filters reset"})});(0,i.sample)({and:[{clock:Ne,filter:(0,i.withFactory)({sid:"-e3niz7",fn:()=>(0,d.x)((0,i.withFactory)({sid:"-z1pb85",fn:()=>(0,u.or)((0,i.withFactory)({sid:"-z1pb5k",fn:()=>(0,p.f)(H)}),(0,i.withFactory)({sid:"-l03w3n",fn:()=>(0,p.f)(R)}))}),(0,i.combine)({and:[Be,e=>Object.keys(e).length>0],or:{sid:"-z15ims"}}),(0,i.withFactory)({sid:"1tppa4",fn:()=>(0,p.f)(Se($e.SearchPage).$isOpen)}))}),target:[l,Ce.prepend((()=>({keys:[se.Baggage,se.Direct,se.WithoutVisa]})))]}],or:{sid:"1vjjjo"}}),(0,i.sample)({and:[{clock:a,source:{exploreFilters:Q,searchParams:we},filter:(0,i.withFactory)({sid:"ux1j6k",fn:()=>(0,d.x)(H,R)}),fn:({exploreFilters:e,searchParams:t},{filters:r,type:i})=>{const n=fe({...e,...r});return{search:new URLSearchParams(ae(t,n)),type:i}},target:Fe}],or:{sid:"bxgv18"}}),(0,i.sample)({and:[{clock:[xe,Be.updates],filter:(0,i.withFactory)({sid:"-ar9yci",fn:()=>(0,d.x)(H,R,(0,i.withFactory)({sid:"3s3d8c",fn:()=>(0,p.f)((0,i.combine)({and:[Pe,Be,Z()],or:{sid:"3sn5vf"}}))}))}),target:o}],or:{sid:"d9aynn"}}),(0,i.sample)({and:[{clock:o,source:Be,fn:function(e){return ue()([he(e),me(e),_e(e)])({})},target:c}],or:{sid:"drg68k"}});var qe=r(5016),Ve=r(23588);(0,i.sample)({and:[{clock:qe.j.outputs.$filtersState.updates,source:{exploreFiltes:Q,exploreFiltersFromSerp:(0,i.combine)({and:[qe.j.outputs.$filtersState,function(e={}){return ue()([be(e),ye(e),ve(e)])({})}],or:{sid:"-sly9ry"}}),page:m.$.outputs.$page},filter:({exploreFiltes:e,exploreFiltersFromSerp:t,page:r})=>!Z()(e,t)&&"search"!==r?.type,fn:({exploreFiltersFromSerp:e})=>({filters:e,type:"replace"}),target:a}],or:{sid:"-pgi1fo"}}),(0,i.sample)({and:[{source:Q.updates,fn:e=>({baggage:e.withBaggage,transfersCount:e.direct?["0"]:[],withoutVisa:e.noVisaAtTransfer}),target:Ve.z.inputs.exploreFiltersShouldChangeFx}],or:{sid:"-oiyl8n"}}),(0,i.sample)({and:[{clock:Ve.z.outputs.filtersRelaxed,target:l}],or:{sid:"-o1wyug"}});var Oe=r(28225),Me=r(31496),Re=r(85893);const Te=({isSelected:e,onChange:t})=>{const{t:r}=(0,Oe.useTranslation)("service_explore");return(0,Re.jsx)(Me.m,{isActive:!1,isDisabled:!1,isSelected:e,onChange:t,children:r("filters.direct.label")})},Ie=({isSelected:e,isDisabled:t,onChange:r})=>{const{t:i}=(0,Oe.useTranslation)("service_explore");return(0,Re.jsx)(Me.m,{isActive:!1,isSelected:e,isDisabled:t,onChange:r,children:i("filters.withoutVisaTransfers.label")})},Le=({isSelected:e,onChange:t})=>{const{t:r}=(0,Oe.useTranslation)("service_explore");return(0,Re.jsx)(Me.m,{isActive:!1,isDisabled:!1,isSelected:e,onChange:t,children:r("filters.withBaggage.label")})},He=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/feat-filters-data_filters/index.ts",lifecycle:{start:xe},api:{outputs:{$exploreFilters:Q,$baggageValue:z,$directValue:G,$withoutVisaTransfersValue:J,$isFiltersServiceEnabled:H,$isFiltersServiceValidContext:R,$isSerpHorizontalFiltersShown:I},inputs:{pushFiltersToUrl:a,directTouched:W},containers:{WithBaggageFilter:(0,i.withFactory)({sid:"-jt8l3s",fn:()=>(0,n.SC)({view:Le,bind:{isSelected:z,onChange:U}})}),DirectFilter:(0,i.withFactory)({sid:"wp20f9",fn:()=>(0,n.SC)({view:Te,bind:{isSelected:G,onChange:W}})}),WithoutVisaTransfersFilter:(0,i.withFactory)({sid:"-ax3r5k",fn:()=>(0,n.SC)({view:Ie,bind:{isSelected:J,isDisabled:X,onChange:K}})})},internals:{changeExploreFilters:c}}})},94537:function(e,t,r){r.d(t,{G:function(){return xe}});var i=r(30091),n=r(98116),s=r(72675),a=r(38032),o=r(51717),c=r(31409),l=r(76588),u=r(47047),d=r(8681),p=r(99186),g=r(41832),f=r(79403),h=r(53788),m=r(85513),_=r(47420),b=r(24943),y=r(41520),v=r(43175),x=r(87722),S=r(82203),$=r(75241),w=r(78260),k=r(91585),C=r(73684);const F=`\nquery GetBestPricesV2(\n  $input: BestPricesV2Input!\n  $brand: Brand!\n  $locales: [String!]\n) {\n  best_prices_v2(\n    input: $input\n    brand: $brand\n  ) {\n    cheapest {\n      ...priceFields        \n    }\n    cheapest_direct {\n      ...priceFields        \n    }\n    cheapest_convenient {\n      ...priceFields\n    }\n    places {\n      cities {\n        ...citiesFields\n      }\n      airlines {\n        ...airlinesFields\n      }\n      airports {\n        ...airportsFields\n      }\n    }\n  }\n}\n${C.Pe}\n${C.W3}\n${C.ld}\n${C.be}\n`;var D=r(35529);const P=(0,D.Record)({best_prices_v2:(0,D.Record)({cheapest:C.Nf.nullable(),cheapest_direct:C.Nf.nullable(),cheapest_convenient:C.Nf.nullable(),places:C.Tk})});function j(e,{filters:t,language:r,priceMultiplier:i=1}){const{best_prices_v2:n}=e,s=n.cheapest?(0,C.U7)({price:n.cheapest,priceMultiplier:i}):null,a=n.cheapest_convenient?(0,C.U7)({price:n.cheapest_convenient,priceMultiplier:i}):null,o=n.cheapest_direct?(0,C.U7)({price:n.cheapest_direct,priceMultiplier:i}):null,c=(0,C.pd)(n.places,r);return t.direct?{cheapestDirect:o,cheapest:null,cheapestConvenient:null,places:c}:{...A(s,a,o),places:c}}function A(e,t,r){return e?.value===t?.value&&e?.value===r?.value?{cheapest:e,cheapestConvenient:null,cheapestDirect:null}:e?.value===r?.value?{cheapest:e,cheapestConvenient:t,cheapestDirect:null}:e?.value===t?.value||t?.value===r?.value?{cheapest:e,cheapestConvenient:null,cheapestDirect:r}:{cheapest:e,cheapestConvenient:t,cheapestDirect:r}}const{$brand:E}=f.U.outputs,{$language:B}=p.l.outputs,{$currency:N,$currencyRates:q}=g.y.outputs,{$market:V}=h.D.outputs,{$ariadneDates:O,$origin:M,$destination:R,$isOneWay:T,exact:I,$isEconomy:L,$passengers:H,$tripClass:z}=_.i.outputs,{$withoutVisaTransfersValue:U,$baggageValue:G,$directValue:W,$exploreFilters:J}=m.j.outputs,{exactPricesResultsScreen:K}=b.q.outputs,{$exploreFlowEnabled:X}=y.l.outputs,{$autosearchEnabled:Q}=v.J.outputs,{$aviaPriceMultiplier:Y}=k.t.outputs,{createAriadneQuery:Z}=d.a.inputs,ee=(0,n.combine)({and:[{brand:E,locales:(0,n.combine)({and:[B,e=>[e]],or:{sid:"-fxp6h2"}}),input:(0,n.combine)({and:[{currency:N,dates:O,origin:(0,n.combine)({and:[M,x.Mo],or:{sid:"-u7lk7h"}}),destination:(0,n.combine)({and:[R,x.Mo],or:{sid:"-c1uhx7"}}),one_way:T,market:V,filters:(0,n.combine)({and:[{no_visa_at_transfer:U,with_baggage:G,direct:W}],or:{sid:"-kqeuxz"}})}],or:{sid:"-y44s9z"}})}],or:{sid:"-sdjlae"}}),te=(0,n.withFactory)({sid:"hq36fu",fn:()=>(0,s.x)(X,L,(0,n.withFactory)({sid:"-7zezeu",fn:()=>(0,a.f)(Q)}),K.$active)}),re=(0,n.withFactory)({sid:"-h08z3v",fn:()=>(0,u.d)((()=>Z({initialData:{cheapest:null,cheapestDirect:null,cheapestConvenient:null,places:{cities:{},airports:{},airlines:{}}},graphQL:{query:F,operationName:"best_prices_v2",variables:{source:ee,fn:(e,t)=>t}},enabled:te,contract:P,mapData:{source:(0,n.combine)({and:[{language:B,filters:J,priceMultiplier:Y}],or:{sid:"h5ikaq"}}),fn:j}})))});(0,n.withFactory)({sid:"vdknvj",fn:()=>(0,l.Np)(re,{automatically:!0,triggers:[Y.updates]})});const{$cheapest:ie,$cheapestConvenient:ne,$cheapestDirect:se,$bestPricesPlaces:ae}=(0,n.withFactory)({sid:"-rxsgpe",fn:()=>(0,o.X)({source:re.$data,shape:{$cheapest:e=>e.cheapest,$cheapestDirect:e=>e.cheapestDirect,$cheapestConvenient:e=>e.cheapestConvenient,$bestPricesPlaces:e=>e.places}})}),oe=(0,n.withFactory)({sid:"58rumu",fn:()=>(0,c.y)({stores:[ie,se,ne],predicate:null})}),ce=(0,n.withFactory)({sid:"-xyb0l6",fn:()=>(0,a.f)(I.$isActive)}),le=(0,n.combine)({and:[{price:ie,badge:"cheapest",tripClass:z,currency:N,passengers:H,currencyRates:q},({price:e,badge:t,...r})=>e?{...(0,$.fo)({price:e,params:{requestSource:S.MJ.BestPrices,expectedPriceSource:S.fN.BestPrices},...r}),badge:t}:null],or:{sid:"5hfiqm"}}),ue=(0,n.combine)({and:[{price:se,badge:"cheapestDirect",tripClass:z,currency:N,passengers:H,currencyRates:q},({price:e,badge:t,...r})=>e?{...(0,$.fo)({price:e,params:{requestSource:S.MJ.BestPrices},...r}),badge:t}:null],or:{sid:"ovx8ms"}}),de=(0,n.combine)({and:[{price:ne,badge:"cheapestConvenient",tripClass:z,currency:N,passengers:H,currencyRates:q},({price:e,badge:t,...r})=>e?{...(0,$.fo)({price:e,params:{requestSource:S.MJ.BestPrices},...r}),badge:t}:null],or:{sid:"s4fvwg"}}),pe=re.__.executeFx,ge=(0,w.cr)("explore",{name:"best_prices"});(0,n.sample)({and:[{clock:re.finished.failure,fn:({error:e})=>({msg:"Failed to load best prices in prices widget",extra:e}),target:ge.sendWarningLog}],or:{sid:"-o1lnoj"}});var fe=r(54448);const he=te,me=(0,n.withFactory)({sid:"dtnn6l",fn:()=>(0,fe.or)(re.$pending,re.$idle,re.$stale)}),_e=re.$failed,be=re.$succeeded,ye=(0,n.withFactory)({sid:"-hub367",fn:()=>(0,s.x)((0,n.withFactory)({sid:"-3oeyr7",fn:()=>(0,s.x)(be,oe)}),(0,n.withFactory)({sid:"-3nv65u",fn:()=>(0,a.f)(me)}),(0,n.withFactory)({sid:"-3nbdkh",fn:()=>(0,a.f)(_e)}))}),ve=(0,n.withFactory)({sid:"-ayafcb",fn:()=>(0,s.x)((0,n.withFactory)({sid:"-38gxjq",fn:()=>(0,a.f)(oe)}),(0,n.withFactory)({sid:"-37x4yd",fn:()=>(0,a.f)(me)}),(0,n.withFactory)({sid:"-37dcd0",fn:()=>(0,a.f)(_e)}))}),xe=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/prices/index.ts",api:{outputs:{bestPrices:{$isVisible:he,query:re,$hasData:ve,$isEmpty:ye,$isLoading:me,$isFailed:_e,$withDates:ce,$cheapestPrice:le,$cheapestConvenientPrice:de,$cheapestDirectPrice:ue,$places:ae}},internals:{bestPrices:{queryExecuteFx:pe}}}})},94408:function(e,t,r){r.d(t,{Q:function(){return fe}});var i={};r.r(i),r.d(i,{DesktopButtonContainer:function(){return X},DesktopWideButtonContainer:function(){return Z},MobileButtonContainer:function(){return U}});var n=r(30091),s=r(4190),a=r(3708),o=r(98116),c=r(65752),l=r(65740),u=r(96864),d=r(54428),p=r(85513),g=r(47420);const f={outputs:{$subscriptionSearchDataForPA:(0,o.combine)({and:[{tripClass:g.i.outputs.$tripClass,filters:p.j.outputs.$exploreFilters,dates:g.i.outputs.$dates,origin:g.i.outputs.$origin,destination:g.i.outputs.$destination,adults:g.i.outputs.adults.$count},({tripClass:e,adults:t,origin:r,destination:i,filters:n,dates:s})=>({tripClass:e,passengers:{adults:t,children:0,infants:0},price:null,origin:r,destination:i,baggage:Boolean(n.withBaggage),directOnly:Boolean(n.direct),departureDate:s.exact.departDate,returnDate:s.exact.returnDate})],or:{sid:"-x7z1dc"}})}};var h=r(23446);const m=(0,o.combine)({and:[{passengers:g.i.outputs.$passengers,tripClass:g.i.outputs.$tripClass,directionSegments:g.i.outputs.$directionSegments,dateSegments:g.i.outputs.exact.$segments}],or:{sid:"-4dh317"}}),_=(0,o.createStore)(null,{sid:"-xyl2vx"}),b=(0,o.createStore)(!1,{sid:"-s48977"}).on(_.updates,((e,t)=>Boolean(t)));(0,o.sample)({and:[{clock:[m.updates,a.si.outputs.$directionSubscriptions.updates],source:{directionSubscriptions:a.si.outputs.$directionSubscriptions,formState:m},fn:({directionSubscriptions:e,formState:t})=>((e,t)=>t.find((t=>{const r=e.directionSegments.length===t.segments.length,i=t.tripClass===e.tripClass,n=t.adults===e.passengers.adults;return!!(r&&i&&n)&&t.segments.every(((t,r)=>{const{origin:i,destination:n}=e.directionSegments[r],s=e.dateSegments[r];if(!s)return!1;const a=t.origin_airport?t.origin_airport===i?.iata:t.origin_city===i?.cityIata,o=t.destination_airport?t.destination_airport===n?.iata:t.destination_city===n?.cityIata,c=(0,h.x)("yyyy-MM-dd",s);return a&&o&&c===t.date}))})))(t,e)??null,target:_}],or:{sid:"-vr85tk"}});const y={outputs:{$duplicateSubscription:_,$subscriptionAlreadyExists:b}},v=(0,o.createEvent)({sid:"yeref0"}),x=(0,o.createEvent)({sid:"-7fyowl"}),S=(0,o.createEvent)({sid:"-k7t4rh"});(0,o.withFactory)({sid:"3ur8wl",fn:()=>(0,l.s)({source:S,if:y.outputs.$subscriptionAlreadyExists,then:x,else:v})}),(0,o.sample)({and:[{clock:v,fn:e=>({isCreate:!0,source:e}),target:a.si.inputs.trackSubscriptionEntryPointClick}],or:{sid:"4a5hip"}}),(0,o.sample)({and:[{clock:x,fn:e=>({isCreate:!1,source:e}),target:a.si.inputs.trackSubscriptionEntryPointClick}],or:{sid:"4ozxjg"}}),(0,o.sample)({and:[{clock:v,source:{searchData:f.outputs.$subscriptionSearchDataForPA,loginSource:d.O.outputs.$loginSource,searchId:u.W.internals.$searchId},fn:({searchData:e,loginSource:t,searchId:r},i)=>({searchData:e,eventData:{searchId:r??"",loginSource:t??"",pageName:"explore",popupShowedSource:i}}),target:a.si.inputs.openPriceAlertPopup}],or:{sid:"4sap3m"}}),(0,o.sample)({and:[{clock:x,source:y.outputs.$duplicateSubscription,fn:(e,t)=>{const{id:r,type:i,baggage:n,flexibility:s}=e;return{source:t,data:{type:i,id:r,baggage:n,flexibility:s,sign:null}}},target:a.si.inputs.deleteSubscription}],or:{sid:"5qdxw0"}});const $={inputs:{toggleSubscription:S}};var w=r(47047),k=r(15863);const{$enabled:C,turnOn:F,turnOff:D}=(0,o.withFactory)({sid:"-uyhaw2",fn:()=>(0,w.d)(k.qs,!1)}),P={$isHovered:C,mouseOver:F,mouseOut:D};var j=r(94184),A=r.n(j),E=r(67294),B=r(28225),N=r(14711),q=r(49963),V=r(44619),O=r(1156),M=r(39535),R=r(69430),T=r(41559),I=r(43830),L="s__kDBKqSQ50e2IkigOEuXq",H=r(85893);const z=({className:e,isHovered:t,mouseOut:r,mouseOver:i,handleClick:n,alreadySubscribed:s})=>{const{t:a}=(0,B.useTranslation)("service_usercom_private_subscription_button",{keyPrefix:"mobile"}),o=(0,E.useMemo)((()=>s?t?(0,H.jsx)(I.Y,{className:L}):(0,H.jsx)(T.g,{}):(0,H.jsx)(O.z,{size:M.qE.XS,priority:M.Ji.Primary,inline:!0,children:a("button.create")})),[s,a,t]),c=t&&s,l=c?L:void 0,u=(0,H.jsx)(q.x,{type:V.y.Body2Semi,children:a("text."+(c?"unsubscribe":"subscribe"))});return(0,H.jsx)("div",{className:A()("s__LvuVCkDvB4ib3fXdJXVH",e),children:(0,H.jsx)(N.p,{onClick:n,onMouseOver:i,onMouseOut:r,leftSideContent:(0,H.jsx)(R.C,{className:"s__rtAoCSHubZGKnhKVpMwA"}),labelContent:u,labelClassName:l,rightSideContent:o})})},U=(0,o.withFactory)({sid:"4rje5a",fn:()=>(0,c.SC)({view:z,bind:{alreadySubscribed:y.outputs.$subscriptionAlreadyExists,isHovered:P.$isHovered,mouseOver:P.mouseOver,mouseOut:P.mouseOut,handleClick:$.inputs.toggleSubscription.prepend((()=>a.hq.Explore))}})});var G=r(5070),W=r(55464),J="s__IGY_CRtZ_MaGAHbTbwmA";const K=(0,E.forwardRef)((({className:e,isHovered:t,mouseOver:r,mouseOut:i,alreadySubscribed:n,handleClick:s},a)=>{const{t:o}=(0,B.useTranslation)("service_usercom_private_subscription_button",{keyPrefix:"desktop"}),c=(0,E.useMemo)((()=>o(n?t?"text.unsubscribe":"text.alreadySubscribed":"text.subscribe")),[t,n,o]),l=(0,H.jsx)(q.x,{type:V.y.Body3Semi,className:"s__LFmuJ9jjlVTH7N6HPOA5",children:o("tooltip")}),u=(0,H.jsx)("div",{role:"button",ref:a,className:A()("s__EAyTKgX3GM_p95lOJQw5",e,{s__lXI6hZnVBn0lHCmuGe35:t,s__fgUxpNA57TU31whwR6Za:n}),onMouseOver:r,onMouseOut:i,onClick:s,children:(0,H.jsxs)("div",{className:"s__oPHfvgI1HBTn0xFx1CJn",children:[n?(0,H.jsx)(R.C,{className:J}):(0,H.jsx)(W.G,{className:J}),(0,H.jsx)("div",{className:"s__VaUj3UZ4oosuGTtnkCdD",children:(0,H.jsx)(q.x,{type:V.y.Body3Semi,children:c})})]})});return n?u:(0,H.jsx)(G.u,{content:l,delay:200,placement:"top",fallbackPlacements:["top-start"],children:u})}));K.displayName="DesktopButtonView";const X=(0,o.withFactory)({sid:"-grb0d1",fn:()=>(0,c.SC)({view:K,bind:{alreadySubscribed:y.outputs.$subscriptionAlreadyExists,isHovered:P.$isHovered,mouseOver:P.mouseOver,mouseOut:P.mouseOut,handleClick:$.inputs.toggleSubscription.prepend((()=>a.hq.Explore))}})});var Q={wrapper:"s__xTiwNbbHaUmi9o2hyso2",button:"s__IDZ6K1u9ayxy22Wgbcl9",bordered:"s__EvQR3l_ic4AN80GbgJau",icon:"s__KzbYBbNfDvs9M4Hqt6FR"};const Y=(0,E.forwardRef)((({className:e,mouseOut:t,mouseOver:r,isHovered:i,alreadySubscribed:n,handleClick:s},a)=>{const{t:o}=(0,B.useTranslation)("service_usercom_private_subscription_button",{keyPrefix:"desktop"}),c=(0,E.useMemo)((()=>o(n?i?"text.unsubscribe":"text.alreadySubscribed":"text.subscribe")),[i,n,o]),l=(0,E.useMemo)((()=>n&&i?M.Ly.Red:M.Ly.Default),[n,i]),u=(0,E.useMemo)((()=>i&&!n?M.Ji.Primary:M.Ji.Tertiary),[n,i]),d=(0,H.jsx)(q.x,{type:V.y.Body3Semi,className:Q.tooltipContent,children:o("tooltip")}),p=(0,H.jsx)("div",{className:A()(Q.wrapper,{[Q.bordered]:n}),children:(0,H.jsxs)(O.z,{ref:a,className:A()(Q.button,e),onMouseOver:r,onMouseOut:t,size:M.qE.Custom,onClick:s,priority:u,mod:l,children:[(0,H.jsx)(O.z.Icon,{children:(0,H.jsx)(R.C,{className:A()(Q.icon)})}),c]})});return n?p:(0,H.jsx)(G.u,{content:d,delay:200,placement:"top",fallbackPlacements:["top-start"],children:p})}));Y.displayName="DesktopWideButtonView";const Z=(0,o.withFactory)({sid:"ezjllx",fn:()=>(0,c.SC)({view:Y,bind:{alreadySubscribed:y.outputs.$subscriptionAlreadyExists,isHovered:P.$isHovered,mouseOver:P.mouseOver,mouseOut:P.mouseOut,handleClick:$.inputs.toggleSubscription.prepend((()=>a.hq.Search))}})}),ee=(0,n.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/usercom_private/services/subscription_button/index.ts",api:{inputs:{...$.inputs},outputs:{...y.outputs},containers:i}});var te=r(24943),re=r(94537),ie=r(52112),ne=r(35529),se=r(78364);const ae={outputs:{$withExploreButton:(0,o.withFactory)({sid:"-m5jhzk",fn:()=>(0,w.d)((()=>se.f.inputs.createFlag({name:"usc-exp-priceAlertSubscriptionOnExplore",contract:ne.String,mapValue:e=>"treatment"===e,defaultValue:!1})))}).$value}},oe=(0,o.combine)({and:[{isExploreButtonEnabled:ae.outputs.$withExploreButton,isExactPricesResultsScreen:te.q.outputs.exactPricesResultsScreen.$active,hasPrices:re.G.outputs.bestPrices.$hasData,ticketsCount:ie.o.outputs.$allTicketCount,isSubscriptionsAvailable:a.si.outputs.flag.$value},e=>e.isExploreButtonEnabled&&e.isSubscriptionsAvailable&&e.isExactPricesResultsScreen&&(e.hasPrices||e.ticketsCount>0)],or:{sid:"-12l118"}});(0,o.sample)({and:[{clock:oe,filter:Boolean,fn:()=>({source:a.hq.Explore}),target:a.si.inputs.trackSubscriptionEntryPointShow}],or:{sid:"758zy5"}});const ce={outputs:{$shouldShowSubscriptionButton:oe}};const{DesktopButtonContainer:le,MobileButtonContainer:ue}=ee.containers;var de=r(97405),pe={layout:"s__mk9HDbsuvsYrNhPaXxHm",left:"s__dXvNWHeMM37cMEJg7YeW",content:"s__hR03agJJKfVofR3x32IH",bottom:"s__sGEFYabUAFoPS175gJ2L"};const ge=({children:e})=>(0,H.jsx)("section",{className:pe.layout,children:e});ge.LeftSide=({children:e,withAnimation:t=!0})=>(0,H.jsx)("div",{className:pe.left,children:(0,H.jsx)(de.fw,{in:!0,name:"fade",appear:t,children:e})}),ge.RightSide=({children:e})=>(0,H.jsx)("div",{className:pe.right,children:e}),ge.Content=({children:e})=>(0,H.jsx)("div",{className:pe.content,children:e}),ge.Bottom=({children:e,withAnimation:t=!0})=>(0,H.jsx)("div",{className:pe.bottom,children:(0,H.jsx)(de.fw,{in:!0,name:"fade",appear:t,children:e})});const fe=(0,n.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/usercom/services/explore_subscriptions/index.ts",api:{outputs:{...ce.outputs},containers:{SubscriptionButton:()=>(0,s.useUnit)({shouldShowButton:ce.outputs.$shouldShowSubscriptionButton}).shouldShowButton?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(le,{className:"s__E3Sq0Q6F4eQ6hZhFDGJ8",source:a.hq.Explore}),(0,H.jsx)(ue,{className:"s__Br4gfvw3PLqXWYpLEnRA",source:a.hq.Explore})]}):null,SubscriptionsLayout:ge}}})},31496:function(e,t,r){r.d(t,{m:function(){return c}});var i=r(85893),n=r(67294),s=r(94184),a=r(3745),o=r(1552);const c=(0,n.forwardRef)(((e,t)=>{const{onChange:r}=e,c=(0,n.useCallback)((e=>{e.preventDefault(),r()}),[r]);return(0,i.jsx)(o.A,{ref:t,...e,onClick:c,rightElement:(0,i.jsx)("div",{className:s("s__INK5MvWpH3PTkD1vbwuy"),children:(0,i.jsx)(a.r,{tabIndex:-1,size:"small",onChange:c,checked:e.isSelected,disabled:e.isDisabled})})})}));c.displayName="ChipSwitch"}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/shared-cde2419921f907665e5630bdc7d6114239e8bc43.540d25d32fc4ef82dfa4.min.js.map