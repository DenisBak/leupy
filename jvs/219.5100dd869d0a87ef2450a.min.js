"use strict";(self.webpackChunkhelios=self.webpackChunkhelios||[]).push([[219],{31604:function(e,t,r){var n=r(64417),a=r(70297).includes,o=r(4233),i=r(29862);n({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},98116:function(e,t,r){function n(e,t){for(let r in e)t(e[r],r)}function a(e,t){e.forEach(t)}function o(e,t){if(!e)throw Error(t)}function i({node:e=[],from:t,source:r,parent:n=t||r,to:o,target:i,child:l=o||i,scope:s={},meta:f={},family:u={type:"regular"},regional:c}={}){let d=le(n),p=le(u.links),m=le(u.owners),h=[];a(e,(e=>e&&X(h,e)));let g={id:re(),seq:h,next:le(l),meta:f,scope:s,family:{type:u.type||"crosslink",links:p,owners:m}};return a(p,(e=>X(M(e),g))),a(m,(e=>X(I(e),g))),a(d,(e=>X(e.next,g))),c&&ne&&ie(P(ne),[g]),g}function l(e,t,r){let n=Le,o=null,i=Oe;if(e.target&&(t=e.params,r=e.defer,n="page"in e?e.page:n,e.stack&&(o=e.stack),i=R(e)||i,e=e.target),i&&Oe&&i!==Oe&&(Oe=null),Array.isArray(e))for(let r=0;r<e.length;r++)De("pure",n,z(e[r]),o,t[r],i);else De("pure",n,z(e),o,t,i);if(r&&!Te)return;let l,s,f,u,c,d,p={isRoot:Te,currentPage:Le,scope:Oe,isWatch:We,isPure:Be};Te=0;e:for(;u=Pe();){let{idx:e,stack:t,type:r}=u;f=t.node,Le=c=t.page,Oe=R(t),c?d=c.reg:Oe&&(d=Oe.reg);let n=!!c,o=!!Oe,i={fail:0,scope:f.scope};l=s=0;for(let a=e;a<f.seq.length&&!l;a++){let u=f.seq[a];if(u.order){let{priority:n,barrierID:o}=u.order,i=o?c?`${c.fullID}_${o}`:o:0;if(a!==e||r!==n){o?Ee.has(i)||(Ee.add(i),Fe(a,t,n,o)):Fe(a,t,n);continue e}o&&Ee.delete(i)}switch(u.type){case"mov":{let e,r=u.data;switch(r.from){case j:e=P(t);break;case"a":case"b":e=t[r.from];break;case"value":e=r.store;break;case"store":if(d&&!d[r.store.id])if(n){let e=Ge(c,r.store.id);t.page=c=e,e?d=e.reg:o?(Ke(Oe,r.store,0,1,r.softRead),d=Oe.reg):d=void 0}else o&&Ke(Oe,r.store,0,1,r.softRead);e=Ne(d&&d[r.store.id]||r.store)}switch(r.to){case j:t.value=e;break;case"a":case"b":t[r.to]=e;break;case"store":He(c,Oe,f,r.target).current=e}break}case"compute":let e=u.data;if(e.fn){We="watch"===E(f,"op"),Be=e.pure;let r=e.safe?(0,e.fn)(P(t),i.scope,t):Qe(i,e.fn,t);e.filter?s=!r:t.value=r,We=p.isWatch,Be=p.isPure}}l=i.fail||s}if(!l){let e=P(t),r=R(t);if(a(f.next,(n=>{De("child",c,n,t,e,r)})),r){E(f,"needFxCounter")&&De("child",c,r.fxCount,t,e,r),E(f,"storeChange")&&De("child",c,r.storeChange,t,e,r),E(f,"warnSerialize")&&De("child",c,r.warnSerializeNode,t,e,r);let n=r.additionalLinks[f.id];n&&a(n,(n=>{De("child",c,n,t,e,r)}))}}}Te=p.isRoot,Le=p.currentPage,Oe=R(p)}function s(e,t="combine"){let r=t+"(",a="",o=0;return n(e,(e=>{o<25&&(null!=e&&(r+=a,r+=W(e)?T(e).fullName:e.toString()),o+=1,a=", ")})),r+")"}function f(e,t){let r,n,a=e;if(t){let a=T(t);0===e.length?(r=a.path,n=a.fullName):(r=a.path.concat([e]),n=0===a.fullName.length?e:a.fullName+"/"+e)}else r=0===e.length?[]:[e],n=e;return{shortName:a,fullName:n,path:r}}function u(e,t){let r=t?e:e[0];ce(r);let n=r.or,a=r.and;if(a){let r=t?a:a[0];if(se(r)&&"and"in r){let r=u(a,t);e=r[0],n={...n,...r[1]}}else e=a}return[e,n]}function c(e,...t){let r=ae();if(r){let n=r.handlers[e];if(n)return n(r,...t)}}function d(e,t){let r=Xe({or:t,and:"string"==typeof e?{name:e}:e}),n=(e,...t)=>(Y(!E(n,"derived"),"call of derived event","createEvent"),Y(!Be,"unit call from pure function","operators like sample"),Le?((e,t,r,n)=>{let a=Le,o=null;if(t)for(o=Le;o&&o.template!==t;)o=F(o);Ue(o);let i=e.create(r,n);return Ue(a),i})(n,a,e,t):n.create(e,t)),a=ae(),o=Object.assign(n,{graphite:i({meta:lt("event",n,r),regional:1}),create:e=>(l({target:n,params:e,scope:Oe}),e),watch:e=>ot(n,e),map:e=>st(n,N,e,[Ae()]),filter:e=>st(n,"filter",e.fn?e:e.fn,[Ae(ye,1)]),filterMap:e=>st(n,"filterMap",e,[Ae(),$e((e=>!ue(e)),1)]),prepend(e){let t=d("* → "+n.shortName,{parent:F(n)});return c("eventPrepend",z(t)),nt(t,n,[Ae()],"prepend",e),it(n,t),t}});return null!=r&&r.domain&&r.domain.hooks.event(o),o}function p(e,t){let r=Xe(t),n=qe(e),s=d({named:"updates",derived:1});c("storeBase",n);let f=n.id,u={subscribers:new Map,updates:s,defaultState:e,stateRef:n,getState(){let e,t=n;if(Le){let t=Le;for(;t&&!t.reg[f];)t=F(t);t&&(e=t)}return!e&&Oe&&(Ke(Oe,n,1),e=Oe),e&&(t=e.reg[f]),Ne(t)},setState:e=>l({target:u,params:e,defer:1,scope:Oe}),reset:(...e)=>(a(e,(e=>u.on(e,(()=>u.defaultState)))),u),on:(e,t)=>(pe(e,".on","first argument"),o(fe(t),"second argument should be a function"),Y(!E(u,"derived"),".on in derived store","createStore"),a(Array.isArray(e)?e:[e],(e=>{u.off(e),D(u).set(e,rt(ft(e,u,"on",ge,t)))})),u),off(e){let t=D(u).get(e);return t&&(t(),D(u).delete(e)),u},map(e,t){let r,a;se(e)&&(r=e,e=e.fn),Y(ue(t),"second argument of store.map","updateFilter");let o=u.getState();ae()?a=null:ue(o)||(a=e(o,t));let i=p(a,{name:`${u.shortName} → *`,derived:1,and:r}),l=ft(u,i,N,he,e);return je(_(i),{type:N,fn:e,from:n}),_(i).noInit=1,c("storeMap",n,l),i},watch(e,t){if(!t||!W(e)){let t=ot(u,e);return c("storeWatch",n,e)||e(u.getState()),t}return o(fe(t),"second argument should be a function"),e.watch((e=>t(u.getState(),e)))}},m=lt("store",u,r),h=u.defaultConfig.updateFilter;u.graphite=i({scope:{state:n,fn:h},node:[$e(((e,t,r)=>(r.scope&&!r.scope.reg[n.id]&&(r.b=1),e))),xe(n),$e(((e,t,{a:r,b:n})=>!ue(e)&&(e!==r||n)),1),h&&Ae(he,1),ke({from:j,target:n})],child:s,meta:m,regional:1});let g=E(u,"serialize"),y=E(u,"derived"),b="ignore"===g,v=!g||b?0:g,k=E(u,"sid");return k&&(b||O(u,"storeChange",1),n.sid=k,v&&(n.meta={...null==n?void 0:n.meta,serialize:v})),k||b||y||O(u,"warnSerialize",1),o(y||!ue(e),"current state can't be undefined, use null instead"),ie(u,[s]),null!=r&&r.domain&&r.domain.hooks.store(u),y||(u.reinit=d(),u.reset(u.reinit)),u}function m(...e){let t,r,n;[e,n]=u(e);let a,i,l,s=e[e.length-1];if(fe(s)?(r=e.slice(0,-1),t=s):r=e,1===r.length){let e=r[0];L(e)||(a=e,i=1)}if(!i&&(a=r,t)){l=1;let e=t;t=t=>e(...t)}return o(se(a),"shape should be an object"),ut(Array.isArray(a),!l,a,n,t)}function h(){let e={};return e.req=new Promise(((t,r)=>{e.rs=t,e.rj=r})),e.req.catch((()=>{})),e}function g(e,t){let r=Xe(fe(e)?{handler:e}:e,t),n=d(fe(e)?{handler:e}:e,t),a=z(n);O(a,"op",n.kind="effect"),n.use=e=>(o(fe(e),".use argument should be a function"),g.scope.handler=e,n),n.use.getCurrent=()=>g.scope.handler;let s=n.finally=d({named:"finally",derived:1}),f=n.done=s.filterMap({named:"done",fn({status:e,params:t,result:r}){if("done"===e)return{params:t,result:r}}}),u=n.fail=s.filterMap({named:"fail",fn({status:e,params:t,error:r}){if("fail"===e)return{params:t,error:r}}}),c=n.doneData=f.map({named:"doneData",fn:({result:e})=>e}),m=n.failData=u.map({named:"failData",fn:({error:e})=>e}),g=i({scope:{handlerId:E(a,"sid"),handler:n.defaultConfig.handler||(()=>o(0,`no handler used in ${n.getType()}`))},node:[$e(((e,t,r)=>{let n=t,a=n.handler;if(R(r)){let e=R(r).handlers[n.handlerId];e&&(a=e)}return e.handler=a,e}),0,1),$e((({params:e,req:t,handler:r,args:n=[e]},a,o)=>{let i=dt(o),l=pt(e,t,1,s,o,i),f=pt(e,t,0,s,o,i),[u,c]=ct(r,f,n);u&&(se(c)&&fe(c.then)?c.then(l,f):l(c))}),0,1)],meta:{op:"fx",fx:"runner"}});a.scope.runner=g,X(a.seq,$e(((e,{runner:t},r)=>{let n=F(r)?{params:e,req:{rs(e){},rj(e){}}}:e;return l({target:t,params:n,defer:1,scope:R(r)}),n.params}),0,1)),n.create=e=>{let t=h(),r={params:e,req:t};if(Oe){if(!We){let e=Oe;t.req.finally((()=>{Ve(e)})).catch((()=>{}))}l({target:n,params:r,scope:Oe})}else l(n,r);return t.req};let y=n.inFlight=p(0,{serialize:"ignore"}).on(n,(e=>e+1)).on(s,(e=>e-1)).map({fn:e=>e,named:"inFlight"});O(s,"needFxCounter","dec"),O(n,"needFxCounter",1);let b=n.pending=y.map({fn:e=>e>0,named:"pending"});return ie(n,[s,f,u,c,m,b,y]),null!=r&&r.domain&&r.domain.hooks.effect(n),n}function y(e){let t;[e,t]=u(e,1);let{source:r,effect:n,mapParams:a}=e,o=g(e,t);O(o,"attached",1);let i,{runner:s}=z(o).scope,c=$e(((e,t,n)=>{let i,{params:s,req:f,handler:u}=e,c=o.finally,d=dt(n),p=pt(s,f,0,c,n,d),m=n.a,h=U(u),g=1;if(a?[g,i]=ct(a,p,[s,m]):i=r&&h?m:s,g){if(!h)return e.args=[m,i],1;l({target:u,params:{params:i,req:{rs:pt(s,f,1,c,n,d),rj:p}},page:n.page,defer:1})}}),1,1);if(r){let e;L(r)?(e=r,ie(e,[o])):(e=m(r),ie(o,[e])),i=[xe(_(e)),c]}else i=[c];s.seq.splice(1,0,...i),o.use(n);let d=F(n);return d&&(Object.assign(T(o),f(o.shortName,d)),o.defaultConfig.parent=d),it(n,o,"effect"),o}function b(...e){let[[t,r],a]=u(e),o={};return n(r,((e,r)=>{let n=o[r]=d(r,{parent:F(t),config:a});t.on(n,e),it(t,n)})),o}function v(e,t){let r=Xe({or:t,and:"string"==typeof e?{name:e}:e}),o=i({family:{type:"domain"},regional:1,parent:(null==r?void 0:r.domain)||(null==r?void 0:r.parent)}),s={history:{},graphite:o,hooks:{}};o.meta=lt("domain",s,{parent:(null==r?void 0:r.domain)||(null==r?void 0:r.parent),or:r}),n({Event:d,Effect:g,Store:p,Domain:v},((e,t)=>{let r=t.toLowerCase(),n=d({named:`on${t}`});s.hooks[r]=n;let o=new Set;s.history[`${r}s`]=o,n.create=e=>(l(n,e),e),X(z(n).seq,$e(((e,t,r)=>(r.scope=null,e)))),n.watch((e=>{ie(s,[e]),o.add(e),e.ownerSet||(e.ownerSet=o),F(e)||(e.parent=s)})),ie(s,[n]),s[`onCreate${t}`]=e=>(a(o,e),n.watch(e)),s[`create${t}`]=s[r]=(t,r)=>{let a=Xe({and:r,or:t});return null!=a&&a.domain?e(t,r):n(e(t,{parent:s,or:a}))}}));let f=F(s);return f&&n(s.hooks,((e,t)=>nt(e,f.hooks[t]))),null!=r&&r.domain&&r.domain.hooks.domain(s),s}function k(e,t){pe(e,"merge","first argument");let r=d({name:s(e,"merge"),derived:1,and:t});return nt(e,r,[],"merge"),r}function w(e,t){let r=0;return a(ht,(n=>{n in e&&(o(null!=e[n],gt(t,n)),r=1)})),r}function S(...e){let t,r,n,a,[[o,i,l],s]=u(e),f=1;return ue(i)&&se(o)&&w(o,"sample")&&(i=o.clock,l=o.fn,f=!o.greedy,a=o.filter,t=o.target,r=o.name,n=o.sid,o=o.source),yt("sample",i,o,a,t,l,r,s,f,1,0,n)}function $(...e){let[[t,r],n]=u(e);return r||(r=t,t=r.source),w(r,"guard"),yt("guard",r.clock,t,r.filter,r.target,null,r.name,n,!r.greedy,0,1)}function x(e,t,r){if(L(e))return Y(0,"restore($store)"),e;if(V(e)||U(e)){let n=F(e),a=p(t,{parent:n,name:e.shortName,and:r});return nt(U(e)?e.doneData:e,a),n&&n.hooks.store(a),a}let a=Array.isArray(e)?[]:{};return n(e,((e,t)=>a[t]=L(e)?e:p(e,{name:t}))),a}function A(...e){let t,r,a="split",[[l,s],f]=u(e),p=!s;p&&(t=l.cases,s=l.match,r=l.clock,l=l.source);let m=L(s),h=!W(s)&&fe(s),g=!m&&!h&&se(s);t||(t={}),p?n(t,((e,t)=>me(a,e,`cases.${t}`))):(o(g,"match should be an object"),n(s,((e,r)=>t[r]=d({derived:1,and:f}))),t.__=d({derived:1,and:f}));let y,b=new Set([].concat(l,r||[],Object.values(t))),v=Object.keys(m||h?t:s);if(m||h)m&&b.add(s),y=[m&&xe(_(s),0,1),we({safe:m,filter:1,pure:!m,fn(e,t,r){let n=String(m?r.a:s(e));kt(t,K(v,n)?n:"__",e,r)}})];else if(g){let e=qe({});e.type="shape";let t,r=[];n(s,((n,a)=>{if(W(n)){t=1,X(r,a),b.add(n);let o=nt(n,[],[xe(e),$e(((e,t,{a:r})=>r[a]=e))]);if(L(n)){e.current[a]=n.getState();let t=_(n);je(e,{from:t,field:a,type:"field"}),c("splitMatchStore",t,o)}}})),t&&c("splitBase",e),y=[t&&xe(e,0,1),Ae(((e,t,n)=>{for(let a=0;a<v.length;a++){let o=v[a];if(K(r,o)?n.a[o]:s[o](e))return void kt(t,o,e,n)}kt(t,"__",e,n)}),1)]}else o(0,"expect match to be unit, function or object");let k=i({meta:{op:a},parent:r?[]:l,scope:t,node:y,family:{owners:Array.from(b)},regional:1});if(r&&yt(a,r,l,null,k,null,a,f,0,0,0),!p)return t}function C(e,{scope:t,safe:r}={}){o(t||Oe||r,"scopeBind cannot be called outside of forked .watch");let n=t||Oe;return U(e)?t=>{let r=h();return l({target:e,params:{params:t,req:r},scope:n}),r.req}:t=>(l({target:e,params:t,scope:n}),t)}r.d(t,{$e:function(){return m},Fj:function(){return v},GW:function(){return g},LC:function(){return b},MT:function(){return p},Nb:function(){return Ce},PO:function(){return tt},UP:function(){return S},Vl:function(){return A},WC:function(){return C},dS:function(){return i},eH:function(){return at},is:function(){return J},lo:function(){return $},nu:function(){return x},uP:function(){return l},ub:function(){return y},yM:function(){return d}});let q="undefined"!=typeof Symbol&&Symbol.observable||"@@observable",N="map",j="stack",z=e=>e.graphite||e,M=e=>e.family.owners,I=e=>e.family.links,_=e=>e.stateRef,P=e=>e.value,D=e=>e.subscribers,F=e=>e.parent,R=e=>e.scope,E=(e,t)=>z(e).meta[t],O=(e,t,r)=>z(e).meta[t]=r,T=e=>e.compositeName,W=e=>(fe(e)||se(e))&&"kind"in e;const B=e=>t=>W(t)&&t.kind===e;let L=B("store"),V=B("event"),U=B("effect"),G=B("domain"),H=B("scope");var J={__proto__:null,unit:W,store:L,event:V,effect:U,domain:G,scope:H,attached:e=>U(e)&&1==E(e,"attached")};let K=(e,t)=>e.includes(t),Q=(e,t)=>{let r=e.indexOf(t);-1!==r&&e.splice(r,1)},X=(e,t)=>e.push(t),Y=(e,t,r)=>!e&&console.error(`${t} is deprecated${r?`, use ${r} instead`:""}`);const Z=()=>{let e=0;return()=>""+ ++e};let ee=Z(),te=Z(),re=Z(),ne=null,ae=()=>ne&&ne.template,oe=e=>(e&&ne&&ne.sidRoot&&(e=`${ne.sidRoot}|${e}`),e),ie=(e,t)=>{let r=z(e);a(t,(e=>{let t=z(e);"domain"!==r.family.type&&(t.family.type="crosslink"),X(M(t),r),X(I(r),t)}))},le=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(z),se=e=>"object"==typeof e&&null!==e,fe=e=>"function"==typeof e,ue=e=>void 0===e,ce=e=>o(se(e)||fe(e),"expect first argument be an object");const de=(e,t,r,n)=>o(!(!se(e)&&!fe(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${n}`);let pe=(e,t,r)=>{Array.isArray(e)?a(e,((e,n)=>de(e,t,`${n} item of ${r}`,""))):de(e,t,r," or array of units")},me=(e,t,r="target")=>a(le(t),(t=>Y(!E(t,"derived"),`${e}: derived unit in "${r}"`,"createEvent/createStore"))),he=(e,{fn:t},{a:r})=>t(e,r),ge=(e,{fn:t},{a:r})=>t(r,e),ye=(e,{fn:t})=>t(e);const be=(e,t,r,n)=>{let a={id:te(),type:e,data:t};return r&&(a.order={priority:r},n&&(a.order.barrierID=++ve)),a};let ve=0,ke=({from:e="store",store:t,target:r,to:n=(r?"store":j),batch:a,priority:o})=>be("mov",{from:e,store:t,to:n,target:r},o,a),we=({fn:e,batch:t,priority:r,safe:n=0,filter:a=0,pure:o=0})=>be("compute",{fn:e,safe:n,filter:a,pure:o},r,t),Se=({fn:e})=>we({fn:e,priority:"effect"}),$e=(e,t,r)=>we({fn:e,safe:1,filter:t,priority:r&&"effect"}),xe=(e,t,r)=>ke({store:e,to:t?j:"a",priority:r&&"sampler",batch:1}),Ae=(e=ye,t)=>we({fn:e,pure:1,filter:t}),Ce={mov:ke,compute:we,filter:({fn:e,pure:t})=>we({fn:e,filter:1,pure:t}),run:Se},qe=e=>({id:te(),current:e}),Ne=({current:e})=>e,je=(e,t)=>{e.before||(e.before=[]),X(e.before,t)},ze=null;const Me=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||Re(e.v.type)>Re(t.v.type))&&(r=e,e=t,t=r),r=Me(e.r,t),e.r=e.l,e.l=r,e},Ie=[];let _e=0;for(;_e<6;)X(Ie,{first:null,last:null,size:0}),_e+=1;const Pe=()=>{for(let e=0;e<6;e++){let t=Ie[e];if(t.size>0){if(3===e||4===e){t.size-=1;let e=ze.v;return ze=Me(ze.l,ze.r),e}1===t.size&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},De=(e,t,r,n,a,o)=>Fe(0,{a:null,b:null,node:r,parent:n,value:a,page:t,scope:o},e),Fe=(e,t,r,n=0)=>{let a=Re(r),o=Ie[a],i={v:{idx:e,stack:t,type:r,id:n},l:null,r:null};3===a||4===a?ze=Me(ze,i):(0===o.size?o.first=i:o.last.r=i,o.last=i),o.size+=1},Re=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},Ee=new Set;let Oe,Te=1,We=0,Be=0,Le=null,Ve=e=>{Oe=e},Ue=e=>{Le=e};const Ge=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=F(e);if(e)return e}return null};let He=(e,t,r,n,a)=>{let o=Ge(e,n.id);return o?o.reg[n.id]:t?(Ke(t,n,a),t.reg[n.id]):n};const Je=e=>e;let Ke=(e,t,r,n,o)=>{var i;let l=e.reg,s=t.sid,f=null==t||null===(i=t.meta)||void 0===i?void 0:i.serialize;if(l[t.id])return;let u={id:t.id,current:t.current,meta:t.meta};if(s&&s in e.sidValuesMap&&!(s in e.sidIdMap))u.current=(e.fromSerialize&&"ignore"!==f&&(null==f?void 0:f.read)||Je)(e.sidValuesMap[s]);else if(t.before&&!o){let o=0,i=r||!t.noInit||n;a(t.before,(t=>{switch(t.type){case N:{let a=t.from;if(a||t.fn){a&&Ke(e,a,r,n);let o=a&&l[a.id].current;i&&(u.current=t.fn?t.fn(o):o)}break}case"field":o||(o=1,u.current=Array.isArray(u.current)?[...u.current]:{...u.current}),Ke(e,t.from,r,n),i&&(u.current[t.field]=l[l[t.from.id].id].current)}}))}s&&(e.sidIdMap[s]=t.id),l[t.id]=u};const Qe=(e,t,r)=>{try{return t(P(r),e.scope,r)}catch(t){console.error(t),e.fail=1}};let Xe=(e,t={})=>(se(e)&&(Xe(e.or,t),n(e,((e,r)=>{ue(e)||"or"===r||"and"===r||(t[r]=e)})),Xe(e.and,t)),t);const Ye=(e,t)=>{Q(e.next,t),Q(M(e),t),Q(I(e),t)},Ze=(e,t,r)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let a=I(e);for(;n=a.pop();)Ye(n,e),(t||r&&"sample"!==E(e,"op")||"crosslink"===n.family.type)&&Ze(n,t,"on"!==E(n,"op")&&r);for(a=M(e);n=a.pop();)Ye(n,e),r&&"crosslink"===n.family.type&&Ze(n,t,"on"!==E(n,"op")&&r)},et=e=>e.clear();let tt=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),L(e))et(D(e));else if(G(e)){r=1;let t=e.history;et(t.events),et(t.effects),et(t.stores),et(t.domains)}Ze(z(e),!!t,r)},rt=e=>{let t=()=>tt(e);return t.unsubscribe=t,t},nt=(e,t,r,n,a)=>i({node:r,parent:e,child:t,scope:{fn:a},meta:{op:n},family:{owners:[e,t],links:t},regional:1}),at=e=>{let t="forward",[{from:r,to:n},a]=u(e,1);return pe(r,t,'"from"'),pe(n,t,'"to"'),me(t,n,"to"),rt(i({parent:r,child:n,meta:{op:t,config:a},family:{},regional:1}))},ot=(e,t)=>(o(fe(t),".watch argument should be a function"),rt(i({scope:{fn:t},node:[Se({fn:ye})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),it=(e,t,r="event")=>{F(e)&&F(e).hooks[r](t)},lt=(e,t,r)=>{let n=Xe(r),a="domain"===e,o=ee(),{sid:i=null,named:l=null,domain:s=null,parent:u=s}=n,c=l||n.name||(a?"":o),d=f(c,u),p={op:t.kind=e,name:t.shortName=c,sid:t.sid=oe(i),named:l,unitId:t.id=o,serialize:n.serialize,derived:n.derived,config:n};if(t.parent=u,t.compositeName=d,t.defaultConfig=n,t.thru=e=>(Y(0,"thru","js pipe"),e(t)),t.getType=()=>d.fullName,!a){t.subscribe=e=>(ce(e),t.watch(fe(e)?e:t=>e.next&&e.next(t))),t[q]=()=>t;let e=ae();e&&(p.nativeTemplate=e)}return p};const st=(e,t,r,n)=>{let a;se(r)&&(a=r,r=r.fn);let o=d({name:`${e.shortName} → *`,derived:1,and:a});return nt(e,o,n,t,r),o},ft=(e,t,r,n,a)=>{let o=_(t),i=ke({store:o,to:"a",priority:"read"});r===N&&(i.data.softRead=1);let l=[i,Ae(n)];return c("storeOnMap",o,l,L(e)&&_(e)),nt(e,t,l,r,a)},ut=(e,t,r,a,i)=>{let l=e?e=>[...e]:e=>({...e}),f=e?[]:{},u=l(f),d=qe(u),m=qe(1);d.type=e?"list":"shape",d.noInit=1,c("combineBase",d,m);let h=p(u,{name:s(r),derived:1,and:a}),g=_(h);g.noInit=1,O(h,"isCombine",1);let y=xe(d);y.order={priority:"barrier"};let b=[$e(((e,t,r)=>(r.scope&&!r.scope.reg[d.id]&&(r.c=1),e))),y,ke({store:m,to:"b"}),$e(((e,{key:r},n)=>{if(n.c||e!==n.a[r])return t&&n.b&&(n.a=l(n.a)),n.a[r]=e,1}),1),ke({from:"a",target:d}),ke({from:"value",store:0,target:m}),ke({from:"value",store:1,target:m,priority:"barrier",batch:1}),xe(d,1),i&&Ae()];return n(r,((e,t)=>{if(!L(e))return o(!W(e)&&!ue(e),`combine expects a store in a field ${t}`),void(u[t]=f[t]=e);f[t]=e.defaultState,u[t]=e.getState();let r=nt(e,h,b,"combine",i);r.scope.key=t;let n=_(e);je(d,{type:"field",field:t,from:n}),c("combineField",n,r)})),h.defaultShape=r,je(g,{type:N,from:d,fn:i}),ae()||(h.defaultState=i?g.current=i(u):f),h};let ct=(e,t,r)=>{try{return[1,e(...r)]}catch(e){return t(e),[0,null]}},dt=e=>{let t=R(e),r={ref:t};return t&&X(t.activeEffects,r),r},pt=(e,t,r,n,a,o)=>i=>{o.ref&&Q(o.ref.activeEffects,o),l({target:[n,mt],params:[r?{status:"done",params:e,result:i}:{status:"fail",params:e,error:i},{value:i,fn:r?t.rs:t.rj}],defer:1,page:a.page,scope:o.ref})};const mt=i({node:[Se({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}}),ht=["source","clock","target"],gt=(e,t)=>e+`: ${t} should be defined`;let yt=(e,t,r,n,a,i,l,s,f,u,h,g)=>{let y=!!a;o(!ue(r)||!ue(t),gt(e,"either source or clock"));let b=0;ue(r)?b=1:W(r)||(r=m(r)),ue(t)?t=r:(pe(t,e,"clock"),Array.isArray(t)&&(t=k(t))),b&&(r=t),s||l||(l=r.shortName);let v="none";(h||n)&&(W(n)?v="unit":(o(fe(n),"`filter` should be function or unit"),v="fn")),a?(pe(a,e,"target"),me(e,a)):"none"===v&&u&&L(r)&&L(t)?a=p(i?i(Ne(_(r)),Ne(_(t))):Ne(_(r)),{name:l,sid:g,or:s}):(a=d({name:l,derived:1,or:s}),c("sampleTarget",z(a)));let w=qe(),S=[];if("unit"===v){let[r,o]=vt(n,a,t,w,e);S=[...bt(o),...bt(r)]}let[$,x]=vt(r,a,t,w,e),A=nt(t,a,[c("sampleSourceLoader"),ke({from:j,target:w}),...bt(x),xe($,1,f),...S,xe(w),"fn"===v&&Ae(((e,t,{a:r})=>n(e,r)),1),i&&Ae(he),c("sampleSourceUpward",y)],e,i);return ie(r,[A]),Object.assign(A.meta,s,{joint:1}),a};const bt=e=>[xe(e),$e(((e,t,{a:r})=>r),1)],vt=(e,t,r,n,a)=>{let o=L(e),l=o?_(e):qe(),s=qe(o);return o||i({parent:e,node:[ke({from:j,target:l}),ke({from:"value",store:1,target:s})],family:{owners:[e,t,r],links:t},meta:{op:a},regional:1}),c("sampleSource",s,l,n),[l,s]},kt=(e,t,r,n)=>{let a=e[t];a&&l({target:a,params:Array.isArray(a)?a.map((()=>r)):r,defer:1,stack:n})}}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/helios-source-maps/helios-assets/helios/219.5100dd869d0a87ef2450a.min.js.map