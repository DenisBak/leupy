"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[72066],{85513:function(e,t,r){r.d(t,{j:function(){return qe}});var a=r(98116),n=r(65752),s=r(30091);const i=(0,a.createEvent)({sid:"-u05mbm"}),c=(0,a.createEvent)({sid:"iimk06"}),o=(0,a.createEvent)({sid:"-bkjaju"}),l=(0,a.createEvent)({sid:"-xl20dl"});var d=r(54448),u=r(72675),p=r(38032),h=r(82097),f=r(27636),m=r(63246),g=r(82672),b=r(11763),y=r(47420),w=r(43175),v=r(87722),_=r(82203),x=r(41520),k=r(38387),j=r(27497);const{matchPage:D,pages:$}=g.$.outputs,{$exploreFlowEnabled:C}=x.l.outputs,{$origin:F,$destination:S,$dateCase:T,$isSimpleSearch:B,$emptyDates:N,$isEconomy:E}=y.i.outputs,{$isAviaFormActive:V}=b.B.outputs,{$isClient:R}=m.y.outputs,{$isSearchInited:M}=j.N.outputs,{$isMobile:P}=k.l.outputs,{$autosearchEnabled:A}=w.J.outputs,[z,W]=(0,a.withFactory)({sid:"-bzjjnm",fn:()=>(0,f.K)((0,a.withFactory)({sid:"-fg6epn",fn:()=>(0,d.or)((0,a.withFactory)({sid:"-ffmm2k",fn:()=>(0,u.x)(R,(0,a.withFactory)({sid:"-f2zcdj",fn:()=>(0,d.or)(D($.MainPage).$isOpen,D($.SearchPage).$isOpen)}),(0,a.combine)({and:[F,S,v.bx],or:{sid:"-f0s603"}}),(0,a.withFactory)({sid:"-f08deq",fn:()=>(0,p.f)((0,a.withFactory)({sid:"w0ko03",fn:()=>(0,h.f)(T,_.M4.Weekends)}))}),V,B)}),D($.MapPage).$isOpen)}))}),[Z,O]=(0,a.withFactory)({sid:"-ao98ku",fn:()=>(0,f.K)((0,a.withFactory)({sid:"-e4w3qb",fn:()=>(0,u.x)(z,A,P,(0,a.withFactory)({sid:"-e2oxb5",fn:()=>(0,p.f)(N)}),(0,a.withFactory)({sid:"-e254ps",fn:()=>(0,p.f)(M)}),(0,a.withFactory)({sid:"-e1lc4f",fn:()=>(0,u.x)((0,a.withFactory)({sid:"-e1lc0z",fn:()=>(0,d.or)((0,a.withFactory)({sid:"-96p75n",fn:()=>(0,h.f)(T,_.M4.Exact)}),(0,a.withFactory)({sid:"-96p4se",fn:()=>(0,h.f)(T,null)}))}))}))}))}),q=(0,a.withFactory)({sid:"-r03xoi",fn:()=>(0,u.x)(C,(0,a.withFactory)({sid:"-dmqw5e",fn:()=>(0,p.f)(Z)}),E)}),L=(0,a.createStore)(!1,{sid:"-6vslrs"}),I=(0,a.createEvent)({sid:"-ises12"});(0,a.sample)({and:[{clock:I,source:(0,a.withFactory)({sid:"79bg8h",fn:()=>(0,p.f)(L)}),fn:e=>({filters:{withBaggage:e},type:"push"}),target:i}],or:{sid:"76mp9v"}}),L.on(o,((e,t)=>t.withBaggage)).reset(l);const U=(0,a.createStore)(!1,{sid:"p92n5i"}),G=(0,a.createEvent)({sid:"nf8r45"});(0,a.sample)({and:[{clock:G,source:(0,a.withFactory)({sid:"-igy35d",fn:()=>(0,p.f)(U)}),fn:e=>({filters:{direct:e},type:"push"}),target:i}],or:{sid:"in02c5"}}),U.on(o,((e,t)=>t.direct)).reset(l);const J=(0,a.createStore)(!1,{sid:"-3cp56h"}),K=(0,a.createEvent)({sid:"-g10rje"});(0,a.sample)({and:[{clock:K,source:{directValue:U,withoutVisaTransfersValue:(0,a.withFactory)({sid:"kuly90",fn:()=>(0,p.f)(J)})},fn:({directValue:e,withoutVisaTransfersValue:t})=>({filters:{noVisaAtTransfer:!e&&t},type:"push"}),target:i}],or:{sid:"6dwq52"}}),J.on(o,((e,t)=>!t.direct&&t.noVisaAtTransfer)).reset(l);const X=U,Y=(0,a.combine)({and:[{direct:U,noVisaAtTransfer:J,withBaggage:L}],or:{sid:"tlhbt8"}});var H=r(25387),Q=r.n(H),ee=r(76830),te=r(20611),re=r(76262),ae=r.n(re),ne=r(17563);let se;function ie(e,t){const r=ae()([se.Direct,se.WithoutVisa,se.Baggage],e);return(0,ne.stringifyUrl)({url:"",query:{...r,...t}})}!function(e){e.Direct="filter_stops",e.Baggage="filter_baggage",e.WithoutVisa="filter_transfers_without_visa"}(se||(se={}));var ce=r(89935),oe=r.n(ce),le=r(46898),de=r.n(le);const ue=oe()(((e,t)=>e.direct?{...t,[se.Direct]:!0}:t)),pe=oe()(((e,t)=>e.withBaggage?{...t,[se.Baggage]:!0}:t)),he=oe()(((e,t)=>e.direct||!e.noVisaAtTransfer?t:{...t,[se.WithoutVisa]:!0}));function fe(e){return de()([ue(e),pe(e),he(e)])({})}const me=oe()(((e,t)=>{let r;return r=se.Direct in e&&e.filter_stops,{...t,direct:r}})),ge=oe()(((e,t)=>{let r;return r=se.Baggage in e&&e.filter_baggage,{...t,withBaggage:r}})),be=oe()(((e,t)=>{let r;return r=!e.filter_stops&&se.WithoutVisa in e&&e.filter_transfers_without_visa,{...t,noVisaAtTransfer:r}})),ye=oe()(((e,t)=>({...t,direct:"0"===e?.transfersCount?.[0]}))),we=oe()(((e,t)=>({...t,withBaggage:Boolean(e?.baggage)}))),ve=oe()(((e,t)=>({...t,noVisaAtTransfer:Boolean(e?.withoutVisa)}))),_e=(0,a.createEvent)({sid:"e32y82"}),{matchPage:xe,pages:ke}=g.$.outputs,{$searchParamsPlain:je,$href:De}=te.D.outputs,{removeQueryParams:$e,navigateTo:Ce,createQueryParameterApi:Fe}=te.D.inputs,Se=(0,a.combine)({and:[Y,fe],or:{sid:"r8ulg2"}}),Te=Fe({name:"filter_stops",clientOnly:!1}),Be=Fe({name:"filter_baggage",clientOnly:!1}),Ne=Fe({name:"filter_transfers_without_visa",clientOnly:!1}),Ee=(0,a.combine)({and:[{direct:Te.$value,baggage:Be.$value,withoutVisa:Ne.$value},({direct:e,baggage:t,withoutVisa:r})=>{const a={};return e&&(a[se.Direct]=!0),t&&(a[se.Baggage]=!0),r&&!a[se.Direct]&&(a[se.WithoutVisa]=!0),a}],or:{sid:"b7w3xw"}}),Ve=(0,a.withFactory)({sid:"64ffoh",fn:()=>(0,ee.D)({source:(0,a.sample)({and:[{clock:[_e,De.updates,z.updates]}],or:{sid:"8x2tfz"}}),timeout:0,name:"debounce: explore filters reset"})});(0,a.sample)({and:[{clock:Ve,filter:(0,a.withFactory)({sid:"-e3niz7",fn:()=>(0,u.x)((0,a.withFactory)({sid:"-z1pb85",fn:()=>(0,d.or)((0,a.withFactory)({sid:"-z1pb5k",fn:()=>(0,p.f)(q)}),(0,a.withFactory)({sid:"-l03w3n",fn:()=>(0,p.f)(z)}))}),(0,a.combine)({and:[Ee,e=>Object.keys(e).length>0],or:{sid:"-z15ims"}}),(0,a.withFactory)({sid:"1tppa4",fn:()=>(0,p.f)(xe(ke.SearchPage).$isOpen)}))}),target:[l,$e.prepend((()=>({keys:[se.Baggage,se.Direct,se.WithoutVisa]})))]}],or:{sid:"1vjjjo"}}),(0,a.sample)({and:[{clock:i,source:{exploreFilters:Y,searchParams:je},filter:(0,a.withFactory)({sid:"ux1j6k",fn:()=>(0,u.x)(q,z)}),fn:({exploreFilters:e,searchParams:t},{filters:r,type:a})=>{const n=fe({...e,...r});return{search:new URLSearchParams(ie(t,n)),type:a}},target:Ce}],or:{sid:"bxgv18"}}),(0,a.sample)({and:[{clock:[_e,Ee.updates],filter:(0,a.withFactory)({sid:"-ar9yci",fn:()=>(0,u.x)(q,z,(0,a.withFactory)({sid:"3s3d8c",fn:()=>(0,p.f)((0,a.combine)({and:[Se,Ee,Q()],or:{sid:"3sn5vf"}}))}))}),target:c}],or:{sid:"d9aynn"}}),(0,a.sample)({and:[{clock:c,source:Ee,fn:function(e){return de()([me(e),ge(e),be(e)])({})},target:o}],or:{sid:"drg68k"}});var Re=r(5016),Me=r(23588);(0,a.sample)({and:[{clock:Re.j.outputs.$filtersState.updates,source:{exploreFiltes:Y,exploreFiltersFromSerp:(0,a.combine)({and:[Re.j.outputs.$filtersState,function(e={}){return de()([ye(e),we(e),ve(e)])({})}],or:{sid:"-sly9ry"}}),page:g.$.outputs.$page},filter:({exploreFiltes:e,exploreFiltersFromSerp:t,page:r})=>!Q()(e,t)&&"search"!==r?.type,fn:({exploreFiltersFromSerp:e})=>({filters:e,type:"replace"}),target:i}],or:{sid:"-pgi1fo"}}),(0,a.sample)({and:[{source:Y.updates,fn:e=>({baggage:e.withBaggage,transfersCount:e.direct?["0"]:[],withoutVisa:e.noVisaAtTransfer}),target:Me.z.inputs.exploreFiltersShouldChangeFx}],or:{sid:"-oiyl8n"}}),(0,a.sample)({and:[{clock:Me.z.outputs.filtersRelaxed,target:l}],or:{sid:"-o1wyug"}});var Pe=r(28225),Ae=r(31496),ze=r(85893);const We=({isSelected:e,onChange:t})=>{const{t:r}=(0,Pe.useTranslation)("service_explore");return(0,ze.jsx)(Ae.m,{isActive:!1,isDisabled:!1,isSelected:e,onChange:t,children:r("filters.direct.label")})},Ze=({isSelected:e,isDisabled:t,onChange:r})=>{const{t:a}=(0,Pe.useTranslation)("service_explore");return(0,ze.jsx)(Ae.m,{isActive:!1,isSelected:e,isDisabled:t,onChange:r,children:a("filters.withoutVisaTransfers.label")})},Oe=({isSelected:e,onChange:t})=>{const{t:r}=(0,Pe.useTranslation)("service_explore");return(0,ze.jsx)(Ae.m,{isActive:!1,isDisabled:!1,isSelected:e,onChange:t,children:r("filters.withBaggage.label")})},qe=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/feat-filters-data_filters/index.ts",lifecycle:{start:_e},api:{outputs:{$exploreFilters:Y,$baggageValue:L,$directValue:U,$withoutVisaTransfersValue:J,$isFiltersServiceEnabled:q,$isFiltersServiceValidContext:z,$isSerpHorizontalFiltersShown:Z},inputs:{pushFiltersToUrl:i,directTouched:G},containers:{WithBaggageFilter:(0,a.withFactory)({sid:"-jt8l3s",fn:()=>(0,n.SC)({view:Oe,bind:{isSelected:L,onChange:I}})}),DirectFilter:(0,a.withFactory)({sid:"wp20f9",fn:()=>(0,n.SC)({view:We,bind:{isSelected:U,onChange:G}})}),WithoutVisaTransfersFilter:(0,a.withFactory)({sid:"-ax3r5k",fn:()=>(0,n.SC)({view:Ze,bind:{isSelected:J,isDisabled:X,onChange:K}})})},internals:{changeExploreFilters:o}}})},29662:function(e,t,r){r.d(t,{G:function(){return Hr}});var a=r(30091),n=r(98116),s=r(95219),i=r(47420),c=r(27897),o=r(91585),l=r(47047),d=r(76588),u=r(41832),p=r(8681),h=r(79403),f=r(53788),m=r(15863),g=r(87722);const b={startPriceChartService:(0,n.createEvent)({sid:"pvginv"})};var y=r(20611),w=r(85513);const{$enabled:v,toggle:_}=(0,n.withFactory)({sid:"wy0we1",fn:()=>(0,l.d)(m.qs,!1)});v.on(w.j.outputs.$directValue,((e,t)=>t));const{$enabled:x,toggle:k}=(0,n.withFactory)({sid:"-vvs3j",fn:()=>(0,l.d)(m.qs,!1)});x.on(w.j.outputs.$baggageValue,((e,t)=>t));const j=(0,n.createEvent)({sid:"-csvy5h"}),D=(0,n.createEvent)({sid:"bb5qsf"}),$=(0,n.createEvent)({sid:"-pegkzb"}),{$enabled:C,toggle:F}=(0,n.withFactory)({sid:"dsiiv7",fn:()=>(0,l.d)(m.qs,!1)});(0,n.sample)({and:[{clock:j,source:w.j.outputs.$directValue,target:v}],or:{sid:"j3i01v"}}),(0,n.sample)({and:[{clock:j,source:w.j.outputs.$baggageValue,target:x}],or:{sid:"jicg2m"}});const S=(0,n.combine)({and:[{direct:v,withBaggage:x}],or:{sid:"-er8iim"}}),T=(0,n.combine)({and:[S,w.j.outputs.$exploreFilters,(e,t)=>({...t,...e})],or:{sid:"-jkibpm"}});(0,n.sample)({and:[{clock:D,source:T,fn:e=>({filters:e,type:"push"}),target:[w.j.inputs.pushFiltersToUrl,F]}],or:{sid:"kgfov0"}}),(0,n.sample)({and:[{clock:y.D.outputs.historyChanged,filter:C,target:[$,F]}],or:{sid:"kykwfx"}});const B={$filters:S,$exploreFilters:T,$directFilterValue:v,$baggageFilterValue:x,$isFiltersEnabled:w.j.outputs.$isFiltersServiceEnabled,$isFiltersValidContext:w.j.outputs.$isFiltersServiceValidContext},N={directFilterTouched:_,baggageFilterTouched:k,resetFiltersToExploreFilters:j,pushFiltersToUrl:D,filtersPushedToUrl:$};var E=r(82097),V=r(82203);const R=i.i.outputs.$tripType,M=i.i.outputs.$emptyDates,P=(0,n.createStore)(null,{sid:"-6e6psu"}),A=(0,n.combine)({and:[P,R,(e,t)=>e??t],or:{sid:"-2b1w5b"}}),z=(0,n.withFactory)({sid:"wh3xgv",fn:()=>(0,E.f)(A,V.X9.OneWay)}),W=(0,n.withFactory)({sid:"mz3mmn",fn:()=>(0,E.f)(A,V.X9.RoundTrip)}),Z=(0,n.createEvent)({sid:"z2926h"});(0,n.sample)({and:[{clock:[Z,R],target:P}],or:{sid:"-a43e2j"}});const O={userChangedTripType:Z},q={$tripType:A,$withTripTypeSwitch:M,$isOneWay:z,$isRoundTrip:W};var L=r(35529);const I=(0,L.Record)({depart_date:L.String,return_date:L.String.nullable(),value:L.Number}),U=(0,L.Record)({depart_low:L.Boolean.nullable(),depart_value:L.Number.nullable(),return_low:L.Boolean.nullable(),return_value:L.Number.nullable()}),G=(0,L.Record)({price_chart_v3:(0,L.Record)({prices:(0,L.Array)((0,L.Record)({price:I,stats:U}))})});function J(e){return{prices:e.price_chart_v3.prices.filter((({stats:e})=>null!=e.depart_low&&null!=e.depart_value)).map((({price:e,stats:t})=>({departDate:e.depart_date,departLow:t.depart_low,departValue:t.depart_value,returnDate:e.return_date,returnLow:t.return_low,returnValue:t.return_value,value:e.value})))}}var K=r(77349);const{$ariadneDates:X,$origin:Y,$destination:H,$tripClass:Q}=i.i.outputs,{createAriadneQuery:ee}=p.a.inputs,{$brand:te}=h.U.outputs,{$currency:re}=u.y.outputs,{$market:ae}=f.D.outputs,ne=(0,n.combine)({and:[X,function(e){if(!e){const e=new Date,t=(0,K.Z)(e,90),r=(0,s.cM)(e),a=(0,s.cM)(t);return{depart_date_from:r,depart_date_to:a,return_date_from:r,return_date_to:a}}if(e.depart_dates){const t=new Date(e.depart_dates[0]),r=(0,K.Z)(t,90),a=(0,s.cM)(t),n=(0,s.cM)(r);return{depart_date_from:a,depart_date_to:n,return_date_from:a,return_date_to:n}}return e}],or:{sid:"-el8bpa"}}),se=(0,n.combine)({and:[{brand:te,input:(0,n.combine)({and:[{currency:re,dates:ne,origin_city_iata:(0,n.combine)({and:[Y,g.Mo],or:{sid:"-2tjrj6"}}),destination_city_iata:(0,n.combine)({and:[H,g.Mo],or:{sid:"wiqh34"}}),one_way:q.$isOneWay,trip_class:Q,market:ae,filters:(0,n.combine)({and:[{with_baggage:B.$baggageFilterValue,direct:B.$directFilterValue},e=>({...e,convenient:!1})],or:{sid:"-8ytppf"}})}],or:{sid:"-2ddtbe"}})}],or:{sid:"-inc5xu"}}),{$enabled:ie,turnOn:ce,turnOff:oe}=(0,n.withFactory)({sid:"-ib1mnk",fn:()=>(0,l.d)(m.qs,!1)}),le=(0,n.withFactory)({sid:"-hrhx33",fn:()=>(0,l.d)((()=>ee({graphQL:{query:"\nquery GetPriceChartV3(\n  $brand: Brand!,\n  $input: PriceChartV3Input!,\n  ) {\n\tprice_chart_v3(\n\t\tinput: $input\n\t\tbrand: $brand\n\t) {\n\t\tprices {\n\t\t\tprice {\n\t\t\t\tvalue\n\t\t\t\tdepart_date\n\t\t\t\treturn_date\n\t\t\t}\n\t\t\tstats {\n\t\t\t\tdepart_low\n\t\t\t\tdepart_value\n\t\t\t\treturn_low\n\t\t\t\treturn_value\n\t\t\t}\n\t\t}\n\t}\n}\n",operationName:"price_chart",variables:{source:se,fn:(e,t)=>t}},enabled:ie,contract:G,mapData:J})))});(0,n.withFactory)({sid:"dyal2h",fn:()=>(0,d.Np)(le,{automatically:!0})}),(0,n.sample)({and:[{clock:b.startPriceChartService,target:le.refresh}],or:{sid:"dze697"}});const de=(0,n.combine)({and:[{enabled:ie,data:le.$data},({data:e,enabled:t})=>t?e?.prices??[]:[]],or:{sid:"-qpwjf6"}}),ue={priceChartData:le,$status:le.$status,$prices:de},pe={enablePriceChartRequesting:ce,disablePriceChartRequesting:oe,resetPriceChart:le.reset};var he=r(72675),fe=r(21247),me=r(38032),ge=r(77195);const{updateAnalyticsDatesSource:be}=i.i.inputs,ye=(0,n.createEvent)({sid:"-exf4z5"});(0,n.sample)({and:[{clock:ye,fn:()=>V.lW.PriceChart,target:be}],or:{sid:"-13epbv"}});const we=(0,n.withFactory)({sid:"-v726z8",fn:()=>(0,he.x)((0,n.withFactory)({sid:"-zh4x3t",fn:()=>(0,me.f)((0,n.withFactory)({sid:"-zh4x0d",fn:()=>(0,E.f)(i.i.outputs.$origin,null)}))}),(0,n.withFactory)({sid:"-zgl4ig",fn:()=>(0,me.f)((0,n.withFactory)({sid:"-zgl4f0",fn:()=>(0,E.f)(i.i.outputs.$destination,null)}))}))});(0,n.sample)({and:[{clock:ye,filter:we,target:[i.i.inputs.exact.changeExactDates,ge.H]}],or:{sid:"-ltacb"}});const ve={shouldFillForm:ye};var _e=r(42699);const xe=(e,t)=>`${e}_${t||"any"}`,{exact:ke,flexible:je,period:De}=i.i.outputs,{updateAnalyticsDatesSource:$e}=i.i.inputs,Ce=(0,n.createStore)((0,s.x2)(),{sid:"2nkodp"}),Fe=(0,n.combine)({and:[ke.$departDate,je.$departRange,De.$range,Ce,function(e,t,r,a){return t.from?new Date(t.from):r.from?new Date(r.from):e?(0,s.KK)(new Date(e)):a}],or:{sid:"-tcigz"}}),Se=(0,n.combine)({and:[Fe,je.$returnRange,De.$range,function(e,t,r){return t.to?new Date(t.to):r.to?new Date(r.to):(0,K.Z)(e,88)}],or:{sid:"nxvz9t"}}),Te=(0,n.combine)({and:[{departDate:ke.$departDate,flexibleDepartDateRange:je.$departRange,periodRange:De.$range,today:Ce},({departDate:e,flexibleDepartDateRange:t,periodRange:r,today:a})=>t.from??r.from??e??(0,s.ao)(a)],or:{sid:"-r7zyvh"}}),Be=ke.$returnDate,Ne=(0,n.createStore)(null,{and:{serialize:"ignore"},sid:"-t08vmd"}),Ee=(0,n.createStore)(null,{and:{serialize:"ignore"},sid:"f2geh1"}),Ve=(0,n.createEvent)({sid:"fzf61c"}),Re=(0,n.createEvent)({sid:"-j3imr5"}),Me=(0,n.createEvent)({sid:"8hdhco"});(0,n.sample)({and:[{clock:Me,fn:()=>V.lW.PriceChart,target:$e}],or:{sid:"-5qt60h"}}),(0,n.sample)({and:[{clock:Me,filter:(0,n.withFactory)({sid:"-yh13d5",fn:()=>(0,he.x)(B.$isFiltersEnabled,B.$isFiltersValidContext)}),target:N.pushFiltersToUrl}],or:{sid:"-5bypzq"}}),(0,n.sample)({and:[{clock:Me,source:{departDate:Ne,returnDate:Ee},target:ve.shouldFillForm}],or:{sid:"-570knh"}}),(0,n.sample)({and:[{clock:Ve,target:Ne}],or:{sid:"-4qiqun"}}),(0,n.sample)({and:[{clock:Re,target:Ee}],or:{sid:"g6tppg"}}),(0,n.sample)({and:[{clock:[b.startPriceChartService,Fe.updates,Se.updates],source:{defaultSelectedDeparture:Te,defaultSelectedReturn:Be},target:(0,n.withFactory)({sid:"-8ngdvy",fn:()=>(0,fe.h)({defaultSelectedDeparture:Ne,defaultSelectedReturn:Ee})})}],or:{sid:"g9koo9"}}),(0,n.sample)({and:[{clock:[Ve,Te],target:Ne}],or:{sid:"h60jok"}}),(0,n.sample)({and:[{clock:[Re,Be],target:Ee}],or:{sid:"h87q20"}}),(0,n.sample)({and:[{source:{selectedDeparture:Ne,selectedReturn:Ee,rangeEnd:Se,isRoundTrip:q.$isRoundTrip},fn:({selectedDeparture:e,selectedReturn:t,rangeEnd:r,isRoundTrip:a})=>function(e,t,r,a){return e?!t&&a||t&&(0,_e.Z)(e,t)?function(e,t){const r=(0,s.ao)(e);return(0,_e.Z)(r,t)?t:r}(e,r):t&&!a?null:t:t}(e,t,r,a),target:Ee}],or:{sid:"hmidhe"}});const Pe={$selectedDeparture:Ne,$selectedReturn:Ee},Ae={userSelectedDeparture:Ve,userSelectedReturn:Re,userSelectedDates:Me},ze={$rangeStart:Fe,$rangeEnd:Se},{$aviaPriceMultiplier:We}=o.t.outputs,{$selectedDeparture:Ze,$selectedReturn:Oe}=Pe,qe=(0,n.createStore)([],{sid:"-5f3ceh"}),Le=(0,n.combine)({and:[qe,e=>(0,c.xn)(e,(({departDate:e,returnDate:t})=>xe(e,t)))],or:{sid:"s1y1oq"}}),Ie=(0,n.combine)({and:[qe,e=>(0,c.xn)(e,(({departDate:e})=>e),(({departDate:e,departValue:t,departLow:r},a)=>{const n=a[e];return n?{price:Math.min(t,n.price),low:r||n.low}:{price:t,low:r}}))],or:{sid:"kv65yv"}});(0,n.sample)({and:[{clock:ue.$prices,filter:e=>Boolean(e),target:qe}],or:{sid:"-dr8dba"}});const Ue={$priceForDates:(0,n.combine)({and:[Le,Ze,Oe,We,(e,t,r,a)=>{if(!t)return null;const n=(0,s.cM)(t),i=r?(0,s.cM)(r):null,c=e[xe(n,i)];return c?c.value*a:null}],or:{sid:"-nhxgag"}})},Ge={$prices:qe,$priceMap:Le,$minDeparturePriceMap:Ie};var Je=r(9005);const Ke=(0,n.combine)({and:[ze.$rangeStart,ze.$rangeEnd,(e,t)=>((e,t)=>{try{return(0,Je.Z)({start:e,end:t})}catch(e){return[]}})(e,t)],or:{sid:"fy32ow"}}),Xe={$departChart:(0,n.combine)({and:[Ke,Ge.$priceMap,Ge.$minDeparturePriceMap,Pe.$selectedReturn,i.i.outputs.$seatCount,(e,t,r,a,n)=>((e,t,r,a,n)=>r.map((r=>{const i=(0,s.cM)(r),c=xe(i,a&&a<i?i:a),o=e[c];if(!o){const e=t[i];return{date:r,price:e?e.price*n:null,low:!!e&&e.low}}return{date:r,price:o.departValue*n,low:o.departLow||!1}})))(t,r,e,a?(0,s.cM)(a):"",n)],or:{sid:"-iln3rd"}}),$returnChart:(0,n.combine)({and:[Ke,Ge.$priceMap,Pe.$selectedDeparture,i.i.outputs.$seatCount,(e,t,r,a)=>r?((e,t,r,a)=>t.map((t=>{const n=(0,s.cM)(t),i=xe(r,n),c=e[i];return c?{date:t,price:c.returnValue?c.returnValue*a:null,low:c.returnLow||!1}:{date:t,price:null,low:!1}})))(t,e,(0,s.cM)(r),a):[]],or:{sid:"ucvr72"}})};var Ye=r(11640);const He={$fullnessPercentage:(0,n.combine)({and:[Ge.$prices,ze.$rangeStart,(e,t)=>((e,t)=>{if(!t||!e.length)return 0;const r=(0,Je.Z)({start:t,end:(0,Ye.Z)(t,1)}),a=new Map;for(const t of e){const e=xe(t.departDate,null);a.set(e,t)}return r.map((e=>{const t=xe((0,s.cM)(e),null);return a.get(t)})).filter((e=>e?.departValue)).length/r.length*100})(e,t)],or:{sid:"-fby0sy"}})};var Qe=r(30040),et=r(10924);const{createReporter:tt}=et.I.inputs,{$enabled:rt,turnOn:at,turnOff:nt}=(0,n.withFactory)({sid:"ap7dth",fn:()=>(0,l.d)(m.qs,!1)});(0,n.sample)({and:[{clock:at,target:pe.enablePriceChartRequesting}],or:{sid:"gxedfv"}}),(0,n.sample)({and:[{clock:Ae.userSelectedDates,target:nt}],or:{sid:"h05ceo"}}),(0,n.sample)({and:[{clock:nt,target:[N.resetFiltersToExploreFilters,pe.disablePriceChartRequesting]}],or:{sid:"hefzu2"}});const st=(0,n.sample)({and:[{clock:[B.$exploreFilters,O.userChangedTripType],filter:rt}],or:{sid:"vvect"}}),it=(0,n.sample)({and:[{clock:[at,st],source:{origin:i.i.outputs.$origin,destination:i.i.outputs.$destination,selectedReturn:Pe.$selectedReturn,exploreFilters:B.$exploreFilters},fn:({origin:e,destination:t,selectedReturn:r,exploreFilters:a})=>({origin:e?.iata,destination:t?.iata,mode:r?V.X9.RoundTrip:V.X9.OneWay,filters:a})}],or:{sid:"4gpsw7"}});tt({data:{category:"price_chart",label:"screen",action:"opened",service:Qe.t6.Explore}})({clock:it,payload:e=>({pageName:"main",userEvent:!0,source:null,...e})});const ct={$isModalVisible:rt},ot={openModal:at,closeModal:nt},lt={...Ae,...pe,...b,...ve,...N,...O,...ot},dt={...Xe,...Pe,...He,...Ue,...ue,...B,...q,...ct};var ut=r(67294),pt=r(4190),ht=r(6328),ft=r(99491),mt=r(85394),gt=r(86064),bt=r(51057),yt=r(28225),wt=r(94184),vt=r.n(wt),_t=r(99186),xt=r(1156),kt=r(39535),jt=r(85893);const Dt=({children:e,onClick:t},r)=>(0,jt.jsx)(xt.z,{ref:r,className:"s__vFAoBjQfERkUm9BajsNW",size:kt.qE.XS,priority:kt.Ji.Tertiary,onClick:t,children:e}),$t=(0,ut.memo)((0,ut.forwardRef)(Dt));var Ct=r(45989),Ft=r(86523),St=r(49963),Tt=r(44619),Bt=r(97405);const Nt=({departDate:e,minPrice:t,className:r,onClick:a,textKey:n},s)=>{const{t:i}=(0,yt.useTranslation)("service_price_chart"),c=(0,Ft.d)("ts_day_month",e),o={ref:s,className:r,onClick:a,size:kt.qE.M};return"number"!=typeof t?(0,ut.createElement)(xt.z,{...o,key:"unknown_price",priority:kt.Ji.Secondary,"data-depart-date":c,testId:"one-way-button"},(0,jt.jsx)(Ct.Z,{children:(0,jt.jsx)(Bt.fw,{name:"fade",children:(0,jt.jsx)(St.x,{tag:"span",type:Tt.y.Body1Semi,children:i(n,{date:c})})},Number(e))})):(0,ut.createElement)(xt.z,{...o,key:"known_price",priority:kt.Ji.Primary,"data-depart-date":c,testId:"one-way-button"},(0,jt.jsx)(Ct.Z,{children:(0,jt.jsx)(Bt.fw,{name:"fade",children:(0,jt.jsx)(St.x,{tag:"span",type:Tt.y.Body1Semi,children:i(n,{date:c})})},Number(e))}))},Et=(0,ut.memo)((0,ut.forwardRef)(Nt));var Vt=r(3151),Rt=r(2437);const Mt=({departDate:e,returnDate:t,minPrice:r,className:a,onClick:n,textKey:s,currency:i},c)=>{const{t:o}=(0,yt.useTranslation)("service_price_chart"),l=(0,Ft.d)("ts_day_month"),d=(0,Ft.d)("interval_date"),u=(0,Ft.d)("ts_day_month",e),p=(0,Ft.d)("ts_day_month",t),h=(0,Ft.d)("price_short"),f=(0,Vt.Z)(e,t)?l(e):d(new Rt.Xp({start:e,end:t})),m=r=>(0,jt.jsx)(Ct.Z,{children:(0,jt.jsx)(Bt.fw,{name:"fade",children:r},`${Number(e)}${Number(t)}`)}),g={ref:c,className:a,onClick:n,size:kt.qE.M};return"number"!=typeof r?(0,ut.createElement)(xt.z,{...g,key:"unknown_price",priority:kt.Ji.Secondary,"data-depart-date":u,"data-return-date":p,testId:"round-trip-button"},m(o(s,{date:f}))):(0,ut.createElement)(xt.z,{...g,key:"known_price",priority:kt.Ji.Primary,"data-depart-date":u,"data-return-date":p,testId:"round-trip-button"},m(o(s,{date:f})),m(o("exactPrice",{price:h({value:r,currency:i.toUpperCase()})})))},Pt=(0,ut.memo)((0,ut.forwardRef)(Mt));var At="s__xCI4SAiSkGVbcG5LyuPg";const zt=({departDate:e,returnDate:t,minPrice:r,onClick:a,textKey:n,currency:s},i)=>(0,jt.jsx)("div",{className:"s__A9OCC3uwrVobddgFoyr6","data-test-id":"price-chart-main-button",children:t?(0,jt.jsx)(Pt,{ref:i,departDate:e,returnDate:t,minPrice:r,className:At,textKey:n,onClick:a,currency:s}):(0,jt.jsx)(Et,{ref:i,departDate:e,minPrice:r,className:At,textKey:n,onClick:a})}),Wt=(0,ut.memo)((0,ut.forwardRef)(zt));var Zt=r(62221),Ot=r(313),qt=r(17550),Lt=r(67948),It=r(83863);let Ut;!function(e){e.Weekday="weekday",e.Number="number"}(Ut||(Ut={}));var Gt={root:"s__y1PiBcuEX3QRszHvIarc",ka:"s__ciJbDhiJVhGCXTBa0hWb",az:"s__tVcsKpRxudax5kB2nfQs"};const Jt=({date:e,type:t,language:r})=>{const a=(0,Ft.d)("ts_day_short");return(0,jt.jsx)("time",{className:vt()(Gt.root,Gt[r]),dateTime:(0,It.Z)(e,{representation:"date"}),"data-test-id":"price-chart-date",children:t===Ut.Number?e.getDate():a(e)})},Kt=(0,ut.memo)(Jt);const Xt=({date:e})=>{const t=(0,Ft.d)("ts_month_full");return(0,jt.jsx)("span",{className:"s__ClewYbLd_Va_em3wf8qw",children:t(e)})},Yt=(0,ut.memo)(Xt);const Ht=({price:e,highestPrice:t,className:r,children:a},n)=>(0,jt.jsx)("div",{ref:n,className:vt()("s__tzsO75qjdmWCaav9OjaG",null!==e&&"s__VPWF3Vp_Y2xjw9Tg3y8e",r),style:{transform:null===e?"translateY(0)":`translateY(${100-e/t*100}%)`},children:a}),Qt=(0,ut.memo)((0,ut.forwardRef)(Ht)),er=({price:e,currency:t})=>{const{t:r}=(0,yt.useTranslation)("component_price_chart"),a=(0,Ft.d)("price_short");return null==e?(0,jt.jsx)(jt.Fragment,{children:r("unknownPrice")}):(0,jt.jsx)(jt.Fragment,{children:r("minPrice",{price:a({value:e,currency:t.toUpperCase()})})})};const tr=({selected:e=!1,disabled:t=!1,bar:r,onSelect:a,onHover:n})=>{const{t:s}=(0,yt.useTranslation)("component_price_chart"),{handleClick:i,handleFocus:c,handleMouseOver:o,handleTap:l,handleTouchMove:d}=function(e,t,r,a){const n=(0,ut.useRef)(!1),s=(0,ut.useCallback)((()=>{n.current=!0}),[]),i=(0,ut.useCallback)((s=>{n.current?n.current=!1:t||(s.preventDefault(),r(e),a&&a(e))}),[e,t,a,r]);return{handleClick:(0,ut.useCallback)((()=>{r(e)}),[e,r]),handleFocus:(0,ut.useCallback)((()=>{a&&a(e)}),[a,e]),handleMouseOver:(0,ut.useCallback)((()=>{a&&a(e)}),[a,e]),handleTap:i,handleTouchMove:s}}(r,t,a,n);return(0,jt.jsx)("button",{disabled:t,className:"s__S4Ahf152kT8leO67kydB",onClick:i,onFocus:c,onMouseOver:o,onTouchMove:d,onTouchEnd:l,children:(0,jt.jsx)("span",{className:Lt.Z.visuallyHidden,children:s(e?"selected":"select")})})},rr=(0,ut.memo)(tr);var ar=r(69772),nr=r(45088);r(21703);const sr=(0,ut.createContext)({});const ir=[nr.CA],cr=[200,200],or=({className:e,...t})=>{const{window:r}=function(){const e=(0,ut.useContext)(sr);if(!e)throw new Error("No access to scrollable context");return e}();return r?.current?(0,jt.jsx)(ar.ZP,{sticky:"reference",plugins:ir,className:vt()("s__REe7l8c5VdCzeVYIucHG",e),placement:"top",animation:"shift-away-subtle",duration:cr,maxWidth:"calc(100vw - 10px)",appendTo:r.current,popperOptions:{modifiers:[{name:"preventOverflow",options:{boundary:r.current,padding:0,tether:!1}},{name:"flip",options:{fallbackPlacements:[]}}]},...t}):null},lr=(e,t)=>Math.round(e.scrollLeft/t),dr=e=>Math.floor(e)>10,ur=(e,t,r)=>({before:t?e.findIndex((e=>(0,Vt.Z)(e.date,t))):0,after:r?e.findIndex((e=>(0,Vt.Z)(e.date,r))):e.length-1}),pr=(e,t)=>e<t.before||e>t.after;var hr=r(67803),fr=r(4135),mr=r(19013),gr=r(13882);var br="s__hwH1Z_QkkRIp2eqz3Xjv",yr="s__Rekej5BAmG4GDc3U5Nvv",wr="s__YL36NaWgcVNphGKiA1Xq",vr="s__rgaSs4gGWi93LMhTtley",_r="s__zQju0JakVC9md9AP1Bo2";const xr=({data:e,currency:t,language:r,className:a,selectedBar:n,onBarSelect:i,barWidth:c=0,activeBar:o,onBarActivate:l,onBarDeactivate:d,shouldAnimate:u=!1,style:p,mobile:h=!1,disabledBars:f,...m})=>{const{t:g}=(0,yt.useTranslation)("component_price_chart"),b=function(e){return(0,ut.useMemo)((()=>{const t=e.map((e=>e.price)).filter((e=>null!==e));return Math.max(...t)}),[e])}(e),{barData:y,barRefs:w}=function(e,t,r){const a=(0,ut.useMemo)((()=>e.map((()=>(0,ut.createRef)()))),[e]),n=null!==t?t:r;let s=null;return null!==n&&(s={...e[n],ref:a[n]}),{barRefs:a,barData:s}}(e,o,n),v=(0,s.x2)();return(0,jt.jsxs)(jt.Fragment,{children:[(0,jt.jsxs)("table",{style:p,className:vt()("s__hwCLMLY2q8q5aHtX5GoN",a),onMouseLeave:d,...m,children:[(0,jt.jsx)("thead",{className:"s__Y3f2M4AsDkOO6AZTVu6D",children:(0,jt.jsxs)("tr",{children:[(0,jt.jsx)("th",{children:g("day")}),(0,jt.jsx)("th",{children:g("date")}),(0,jt.jsx)("th",{children:g("month")}),(0,jt.jsx)("th",{colSpan:2,children:g("price")})]})}),(0,jt.jsx)("tbody",{className:"s__wdp6gTqfaR1YIZ6GLjPq","data-test-id":"price-chart-table",children:e.map((({date:a,low:s,price:u},p)=>{const m=(0,Ot.Z)(a,v),g=o===p,y=n===p,_=y&&(!h||g),x=pr(p,f),k=!((e,t)=>0===t&&(0,hr.Z)((0,fr.Z)(e),e)>1||function(e){return(0,gr.Z)(1,arguments),1===(0,mr.Z)(e).getDate()}(e))(a,p),j=((e,t,r,a,n)=>{if(e)return 0;const s=n-r,i=(0,hr.Z)((0,fr.Z)(t),t)+1;return Math.min(s,i)*a})(k,a,p,c,e.length);return(0,jt.jsxs)("tr",{"aria-hidden":m,className:vt()("s__OtDunPhDE3tKwHUc_snj",s&&vr,null===u&&_r,g&&wr,_&&"s__qsUpI6aJxtK13uWlyswx",x&&"s__I_oKm0WqE7_BGJ4M40ik",m&&"s__poaeSCPXJQaRCVJSvIhm"),style:{width:c},"data-test-id":`column-${(0,It.Z)(a,{representation:"date"})}`,children:[(0,jt.jsx)("td",{className:br,children:(0,jt.jsx)(Kt,{date:a,type:Ut.Number,language:r})}),(0,jt.jsx)("td",{className:br,children:(0,jt.jsx)(Kt,{date:a,type:Ut.Weekday,language:r})}),(0,jt.jsx)("td",{className:vt()("s__E0nBivrG4KztuZAVPA_e",k&&"s__eCUl4EfaWxnBlxAUtk7O"),style:{width:j},children:(0,jt.jsx)(Yt,{date:a})}),(0,jt.jsxs)("td",{className:"s__Jzf8OEBSekxqxdOuYgZg",children:[(0,jt.jsx)("span",{className:Lt.Z.visuallyHidden,children:(0,jt.jsx)(er,{price:u,currency:t})}),m?(0,jt.jsx)("span",{className:yr}):(0,jt.jsx)(Qt,{ref:w[p],price:u,highestPrice:b,className:yr,children:null===u&&!x&&(0,jt.jsx)(qt.g,{className:"s__aK18ZOeBupFSwOhl3tpE"})})]}),(0,jt.jsx)("td",{className:"s__Fgb18aL0LfJ24p837ryO",children:(0,jt.jsx)(rr,{bar:p,selected:y,onSelect:i,onHover:x?d:l,disabled:x})})]},p)}))})]}),y&&(0,jt.jsx)(or,{visible:!0,delay:300,reference:y.ref,content:(0,jt.jsx)(St.x,{type:Tt.y.Body1Semi,children:(0,jt.jsx)(er,{price:y.price,currency:t})}),className:vt()("s__P4A1cGK31GVAR3D3vLKI",wr,y.low&&vr,null===y.price&&_r),...!u&&{duration:0}})]})},kr=()=>{const[e,t]=(0,ut.useState)(null),[r,a]=(0,ut.useState)(!0),n=(0,ut.useCallback)((()=>{a(!0),t(null)}),[]),s=(0,ut.useCallback)((r=>{a(null===e),t(r)}),[e]);return{activeBar:e,handleBarDeactivation:n,handleBarActivation:s,shouldAnimate:r}},jr=(e,t,r)=>({selectedBar:e.findIndex((e=>(0,Vt.Z)(e.date,t))),handleBarSelection:(0,ut.useCallback)((t=>{r(e[t].date)}),[e,r])});let Dr;var $r="s__jmqszUuakXaOcfEbGWME",Cr="s__lONPu9Yolx4CPlJvtLSQ",Fr="s__Y2DTGYKZMW6YVAGX2Ljg";const Sr=({className:e,visibleBarAmount:t,selectedDate:r,onDateSelect:a,disableBeforeDate:n,disableAfterDate:i,...c})=>{const{ref:o,width:l}=(0,Zt.y)(),d=(0,ut.useMemo)((()=>({window:o})),[o]),{activeBar:u,handleBarActivation:p}=kr(),h=l/t,f=(l-h)/2,m=dr(h),g=((e,t)=>{if(!e.length)return e;const r=e[0].date;return(0,Je.Z)({start:(0,K.Z)(r,-t),end:(0,K.Z)(r,-1)}).map((e=>({date:e,price:null,low:!1}))).concat(e)})(c.data,Math.floor(t/2)),b=ur(g,n||(0,s.x2)(),i),{selectedBar:y,handleBarSelection:w}=jr(g,r,a),{handleScroll:v}=function({selectedBar:e,onBarSelect:t,onBarActivate:r,barWidth:a,windowRef:n,disabledBars:s,halfViewportWidth:i}){!function({windowRef:e,selectedBar:t,barWidth:r,halfViewportWidth:a}){const n=t*r-a,s=(0,ut.useRef)(!0);(0,ut.useEffect)((()=>{e.current&&(s.current?(e.current.scrollTo({left:n}),setTimeout((()=>{s.current=!1}),300)):e.current.scrollTo({left:n,behavior:"smooth"}))}),[n,e])}({windowRef:n,barWidth:a,halfViewportWidth:i,selectedBar:e});const c=(0,ut.useCallback)((e=>{var a;r(e),a=()=>t(e),clearTimeout(Dr),Dr=setTimeout(a,300)}),[r,t]);return{handleScroll:(0,ut.useCallback)((e=>{const t=((e,t)=>0===t?0:Math.floor((e+t/2)/t))(e.target.scrollLeft+i,a);pr(t,s)||c(t)}),[a,s,i,c])}}({barWidth:h,selectedBar:y,disabledBars:b,windowRef:o,halfViewportWidth:f,onBarActivate:p,onBarSelect:w});return(0,jt.jsx)(sr.Provider,{value:d,children:(0,jt.jsx)("div",{"body-scroll-lock-ignore":"",ref:o,className:vt()($r,e),onScroll:v,children:(0,jt.jsx)(xr,{...c,className:vt()(Cr,!m&&Fr),data:g,barWidth:h,selectedBar:y,onBarSelect:w,activeBar:u,disabledBars:b,style:{paddingRight:f}})})})};var Tr=r(78620),Br={button:"s__z2YvugR04A9M7NOONeo3",forward:"s__iZqflwueALV0RQp_rkMH",icon:"s__OluA7umKHTQMllgt58LW"};const Nr=({type:e,disabled:t=!1,className:r,onClick:a,dataTestId:n})=>{const{t:s}=(0,yt.useTranslation)("component_price_chart");return(0,jt.jsxs)(xt.z,{className:vt()(Br.button,Br[e],r),priority:kt.Ji.Secondary,size:kt.qE.Custom,disabled:t,onClick:a,testId:n,children:[(0,jt.jsx)(Tr.I,{className:Br.icon}),(0,jt.jsx)("span",{className:Lt.Z.visuallyHidden,children:s(e)})]})},Er=(0,ut.memo)(Nr);const Vr=({data:e,className:t,visibleBarAmount:r,selectedDate:a,onDateSelect:n,disableBeforeDate:s,disableAfterDate:i,dataTestId:c,...o})=>{const{ref:l,width:d}=(0,Zt.y)(),u=d/r,p=dr(u),h=(0,ut.useMemo)((()=>({window:l})),[l]),{selectedBar:f,handleBarSelection:m}=jr(e,a,n),{activeBar:g,handleBarActivation:b,handleBarDeactivation:y,shouldAnimate:w}=kr(),v=ur(e,s,i),{handleScroll:_,canScrollBack:x,handleScrollBack:k,canScrollForward:j,handleScrollForward:D}=function({windowRef:e,totalBarAmount:t,barWidth:r,visibleBarAmount:a,selectedBar:n}){const[s,i]=(0,ut.useState)(!1),[c,o]=(0,ut.useState)(!0),l=Math.floor(a/3);(0,ut.useEffect)((()=>{if(dr(r)&&e.current){const t=n*r,s=e.current.scrollLeft,i=s+a*r;if(!(t>=s&&t<=i)){const t=(n-1)*r;e.current.scrollTo({left:t})}}}),[r,n,a,e]);const d=(0,ut.useCallback)((e=>{const{scrollLeft:t,scrollWidth:r,clientWidth:a}=e.target;i(t>0),o(t+a<r)}),[]);return{canScrollBack:s,handleScrollBack:(0,ut.useCallback)((()=>{if(!e.current)return;const t=lr(e.current,r),a=Math.max(0,t-l);e.current.scrollTo({left:a*r,behavior:"smooth"})}),[r,e,l]),canScrollForward:c,handleScrollForward:(0,ut.useCallback)((()=>{if(!e.current)return;const a=lr(e.current,r),n=Math.min(t-1,a+l);e.current.scrollTo({left:n*r,behavior:"smooth"})}),[r,e,l,t]),handleScroll:d}}({windowRef:l,barWidth:u,totalBarAmount:e.length,visibleBarAmount:r,selectedBar:f});return(0,jt.jsx)(sr.Provider,{value:h,children:(0,jt.jsxs)("div",{className:vt()("s__DkZh9IUbmlg1DG1hWTrc",t),tabIndex:-1,"data-test-id":c,children:[(0,jt.jsx)(Er,{type:"back",className:vt()("s__Zrfrgn19TLUJhnYJdmQw",!p&&Fr),onClick:k,disabled:!x,dataTestId:"button-back"}),(0,jt.jsx)("div",{ref:l,className:$r,onScroll:_,tabIndex:-1,children:(0,jt.jsx)(xr,{...o,className:vt()(Cr,!p&&Fr),data:e,barWidth:u,activeBar:g,selectedBar:f,onBarSelect:m,onBarActivate:b,onBarDeactivate:y,shouldAnimate:w,disabledBars:v})}),(0,jt.jsx)(Er,{type:"forward",className:vt()("s__wfNlOuDQr0jUW1GdFv5r",!p&&Fr),onClick:D,disabled:!j,dataTestId:"button-forward"})]})})},Rr=e=>e.mobile?(0,jt.jsx)(Sr,{...e}):(0,jt.jsx)(Vr,{...e});var Mr=r(3745),Pr=r(80191),Ar="s__SnfzS_wSJYi6OaYtErTn";const zr=({direct:e,withBaggage:t,directTouched:r,baggageTouched:a})=>{const{t:n}=(0,yt.useTranslation)("service_explore");return(0,jt.jsxs)("div",{className:"s__Ynebr4DVwAXBC56NLUkU","data-test-id":"price-chart-filters",children:[(0,jt.jsx)(Mr.r,{checked:e,label:n("filters.direct.label"),labelPosition:"left",className:Ar,onChange:r,testId:"filter-direct"}),(0,jt.jsx)(Pr.i,{}),(0,jt.jsx)(Mr.r,{checked:t,label:n("filters.withBaggage.label"),labelPosition:"left",className:Ar,onChange:a,testId:"filter-with-baggage"})]})};function Wr(e,t){return["selectButtonText",t?"unknownPrice":e?"knownPrice":"unknownPrice"].join(".")}var Zr="s__EJ8tXD7Pvj4CMnEEnwJK";const Or=[gt.L.Mobile,gt.L.MobileLandscape],qr=({className:e,showFilters:t,...r})=>{const{t:a}=(0,yt.useTranslation)("service_price_chart"),n=(0,pt.useUnit)(_t.l.outputs.$language),s=(0,pt.useUnit)(u.y.outputs.$currency),i=(0,pt.useUnit)({priceForDates:dt.$priceForDates,selectedDeparture:dt.$selectedDeparture,selectedReturn:dt.$selectedReturn,departChart:dt.$departChart,returnChart:dt.$returnChart,filters:dt.$filters,status:dt.$status,changeDepartDate:lt.userSelectedDeparture,changeReturnDate:lt.userSelectedReturn,selectDates:lt.userSelectedDates,directFilterTouched:lt.directFilterTouched,baggageFilterTouched:lt.baggageFilterTouched}),c=(()=>{const e=(0,ut.useRef)(null),t=(0,ut.useRef)(null),r=(0,ut.useRef)(null),a=(0,ut.useCallback)((()=>{t.current?.focus()}),[]),n=(0,ut.useCallback)((()=>{e.current?.focus()}),[]),s=(0,ut.useCallback)((()=>{r.current?.focus()}),[]);return{mainButton:{ref:r,focus:s},returnChart:{ref:e,focus:n},departChart:{ref:t,focus:a}}})(),o=(0,mt.c)(bt.AV),l=function(e){switch(e?.name){case gt.L.Mobile:return 13.5;case gt.L.MobileLandscape:return 16.5;default:return 18}}(o),d=o?.is(Or)??!1,p=null!==i.priceForDates,h=vt()("s__DWnwnArSW4QFWNY6cLs5",e,{s__gcHNnJ_tQVV6yXaNUJwb:t}),f=(0,ut.useCallback)((e=>{i.changeDepartDate(e),d||(i.selectedReturn?c.returnChart.focus():c.mainButton.focus())}),[d,c.mainButton,c.returnChart,i]),m=(0,ut.useCallback)((e=>{i.changeReturnDate(e),d||c.mainButton.focus()}),[i,d,c.mainButton]);return i.selectedDeparture?"pending"===i.status?(0,jt.jsx)("div",{className:h,children:(0,jt.jsx)(ht.$,{className:"s__etrUx944odV3mQPXGs1A",size:d?ft.Ey.M:ft.Ey.L})}):(0,jt.jsxs)("div",{className:h,...r,children:[(0,jt.jsxs)("div",{className:Zr,"data-test-id":"price-chart-there-wrapper",children:[(0,jt.jsx)($t,{ref:c.departChart.ref,onClick:i.selectedReturn?c.returnChart.focus:c.mainButton.focus,children:a("skipDepartDate")}),(0,jt.jsx)(Rr,{mobile:d,language:n,currency:s,data:i.departChart,selectedDate:i.selectedDeparture,visibleBarAmount:l,onDateSelect:f,dataTestId:"price-chart-there"}),(0,jt.jsx)($t,{onClick:c.departChart.focus,children:a("backToDateSelection")})]}),i.selectedReturn&&(0,jt.jsxs)("div",{className:Zr,"data-test-id":"price-chart-back-wrapper",children:[(0,jt.jsx)($t,{ref:c.returnChart.ref,onClick:c.mainButton.focus,children:a("skipReturnDate")}),(0,jt.jsx)(Rr,{mobile:d,language:n,currency:s,data:i.returnChart,disableBeforeDate:i.selectedDeparture,selectedDate:i.selectedReturn,visibleBarAmount:l,onDateSelect:m,dataTestId:"price-chart-back"}),(0,jt.jsx)($t,{onClick:c.returnChart.focus,children:a("backToDateSelection")})]}),(0,jt.jsxs)("div",{className:"s__PjyzpFiexpvdctFUO4SF",children:[t&&(0,jt.jsx)(zr,{...i.filters,directTouched:i.directFilterTouched,baggageTouched:i.baggageFilterTouched}),(0,jt.jsx)(Wt,{currency:s,ref:c.mainButton.ref,textKey:Wr(p,d),departDate:i.selectedDeparture,returnDate:i.selectedReturn,minPrice:i.priceForDates,onClick:i.selectDates})]})]}):null};var Lr=r(65752),Ir=r(84069);const Ur=({tripType:e,onChange:t,dataTestId:r="price-chart-switch",...a})=>{const{t:n}=(0,yt.useTranslation)("component_trip_type_switch");return(0,jt.jsxs)(Ir.R,{value:e,onChange:t,...a,dataTestId:r,children:[(0,jt.jsx)(Ir.R.Option,{value:V.X9.OneWay,dataTestId:"one-way-option",children:n("oneWay").toLowerCase()}),(0,jt.jsx)(Ir.R.Option,{value:V.X9.RoundTrip,dataTestId:"round-trip-option",children:n("roundTrip").toLowerCase()})]})},Gr=(0,n.withFactory)({sid:"oq0cwe",fn:()=>(0,Lr.bU)({if:(0,n.withFactory)({sid:"7dpjcy",fn:()=>(0,he.x)(q.$withTripTypeSwitch,q.$tripType)}),then:(0,n.withFactory)({sid:"-ryq0an",fn:()=>(0,Lr.SC)({view:Ur,bind:{tripType:q.$tripType,onChange:O.userChangedTripType}})})})});var Jr=r(46531),Kr=r(5393),Xr=r(9071);const Yr={PriceChartViewContainer:qr,TripTypeSwitchContainer:Gr,PriceChartModalContainer:()=>{const{t:e}=(0,yt.useTranslation)("service_price_chart"),{isModalVisible:t,showFilters:r,closeModal:a}=(0,pt.useUnit)({isModalVisible:dt.$isModalVisible,closeModal:lt.closeModal,showFilters:w.j.outputs.$isFiltersServiceEnabled});return(0,jt.jsxs)(Jr.G,{width:800,visible:t,onClose:a,stickToBottomOnMobile:!0,dataTestId:"price-chart-popup",children:[(0,jt.jsx)(Jr.G.Navigation,{children:(0,jt.jsx)(Xr.w.RightAccessory,{children:(0,jt.jsx)(Kr.P,{onClick:a})})}),(0,jt.jsxs)("div",{className:"s__sEGXXv6cGrSHooUjV7jz","data-test-id":"price-chart",children:[(0,jt.jsx)(St.x,{tag:"h2",className:"s__eypxAR0k4zuyMUV5nlr1",type:Tt.y.Title2Bold,mobileType:Tt.y.Title4Semi,testId:"price-chart-title",children:(0,jt.jsx)(yt.Trans,{defaults:e("priceChartWithControl"),components:{control:(0,jt.jsx)(Gr,{})}})}),(0,jt.jsx)(qr,{showFilters:r})]})]})}},Hr=(0,a.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/price_chart/index.ts",lifecycle:{start:lt.startPriceChartService},api:{inputs:lt,outputs:dt,containers:Yr}})},4135:function(e,t,r){r.d(t,{Z:function(){return s}});var a=r(19013),n=r(13882);function s(e){(0,n.Z)(1,arguments);var t=(0,a.Z)(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}},45989:function(e,t,r){var a,n,s=r(94578),i=r(67294),c=r(12666),o=r(220),l="out-in",d="in-out",u=function(e,t,r){return function(){var a;e.props[t]&&(a=e.props)[t].apply(a,arguments),r()}},p=((a={})["out-in"]=function(e){var t=e.current,r=e.changeState;return i.cloneElement(t,{in:!1,onExited:u(t,"onExited",(function(){r(c.d0,null)}))})},a[d]=function(e){var t=e.current,r=e.changeState,a=e.children;return[t,i.cloneElement(a,{in:!0,onEntered:u(a,"onEntered",(function(){r(c.d0)}))})]},a),h=((n={})["out-in"]=function(e){var t=e.children,r=e.changeState;return i.cloneElement(t,{in:!0,onEntered:u(t,"onEntered",(function(){r(c.cn,i.cloneElement(t,{in:!0}))}))})},n[d]=function(e){var t=e.current,r=e.children,a=e.changeState;return[i.cloneElement(t,{in:!1,onExited:u(t,"onExited",(function(){a(c.cn,i.cloneElement(r,{in:!0}))}))}),i.cloneElement(r,{in:!0})]},n),f=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={status:c.cn,current:null},t.appeared=!1,t.changeState=function(e,r){void 0===r&&(r=t.state.current),t.setState({status:e,current:r})},t}(0,s.Z)(t,e);var r=t.prototype;return r.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){return null==e.children?{current:null}:t.status===c.d0&&e.mode===d?{status:c.d0}:!t.current||((r=t.current)===(a=e.children)||i.isValidElement(r)&&i.isValidElement(a)&&null!=r.key&&r.key===a.key)?{current:i.cloneElement(e.children,{in:!0})}:{status:c.Ix};var r,a},r.render=function(){var e,t=this.props,r=t.children,a=t.mode,n=this.state,s=n.status,l=n.current,d={children:r,current:l,changeState:this.changeState,status:s};switch(s){case c.d0:e=h[a](d);break;case c.Ix:e=p[a](d);break;case c.cn:e=l}return i.createElement(o.Z.Provider,{value:{isMounting:!this.appeared}},e)},t}(i.Component);f.propTypes={},f.defaultProps={mode:l},t.Z=f},40667:function(e,t,r){r.d(t,{e:function(){return i}});var a=r(85893),n=r(67294);const s=({className:e,...t},r)=>(0,a.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:r,style:{display:"inline-block"},...t,children:(0,a.jsx)("path",{d:"M11 3H8v16h3V3ZM16 7h-3v12h3V7ZM3 11h3v8H3v-8ZM21 11h-3v8h3v-8Z"})}),i=(0,n.memo)((0,n.forwardRef)(s));i.displayName="Icon24ControlsGraph"}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/shared-9ef8215703247bd1f7e76f9d341771feb837f5a0.9002b42137658774a5a3.min.js.map