(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[31934],{74590:function(e,t,a){"use strict";a.d(t,{G:function(){return ie}});var s=a(30091),r=a(98116),i=a(30040),n=a(31438),o=a(96864),l=a(2845),c=a(27497),d=a(37025),u=(a(26699),a(25387)),p=a.n(u),g=a(99186),m=a(84082),h=a(41832),f=a(38352);const{$informerCloseTimestamp:_,$informerCloseSearchCount:y}=d.m.outputs,k=(0,r.createEvent)({sid:"s9thhy"}),v=(0,r.createEvent)({sid:"vt3w4j"}),b=(0,r.createEvent)({sid:"az05bf"}),x=o.W.outputs.flags.foreignCardsSettingFlag.$value.map((e=>e)),C=o.W.outputs.flags.foreignCardsSettingFlag.$value.map((({enabled:e})=>e)),S=x.map((({directions:e})=>e)),w=x.map((({placements:e})=>e)),$=(0,r.combine)({and:[g.l.outputs.$language,x,(e,t)=>{const a=t.informerText;return"ru"===e?a.ru:a.en}],or:{sid:"-uhnqlg"}}),j=(0,r.combine)({and:[{informerCloseTimestamp:_,foreignCardsFlag:x},({informerCloseTimestamp:e,foreignCardsFlag:t})=>{const{informerSuspensionTime:a}=t;if(null===e)return!0;const s=Date.now()-e;return Boolean(s>=1e3*a)}],or:{sid:"uo14ua"}}),I=(0,r.combine)({and:[{informerCloseSearchCount:y,foreignCardsFlag:x},({informerCloseSearchCount:e,foreignCardsFlag:t})=>{const{informerSuspensionSearchCount:a}=t;return null===e||a<e}],or:{sid:"iwnaqa"}}),N=f.s.outputs.$searchParams.map((e=>e?.segments?e.segments.map((({origin_country:e,destination_country:t})=>[e,t])):null)),F=(0,r.combine)({and:[N,S,(e,t)=>!!e&&((e,t)=>t.every((t=>((e,t)=>e.some((e=>((e,t)=>e.every(((e,a)=>{const s=t[a];return"INT"===e?!("RU"===s||"KX"===s):e===s})))(e,t))))(e,t))))(t,e)],or:{sid:"-pppv23"}}),B=(0,r.combine)({and:[N,h.y.outputs.$currency,m.B.outputs.$geoIpCountry,(e,t,a)=>"rub"!==t||"ru"!==a&&null!==a&&null!==e&&e.flat().includes(a.toLocaleUpperCase())],or:{sid:"gsxzb5"}}),E={inputs:{informerClicked:v,informerClosed:k,informerInitialized:b},outputs:{$informerText:$,$isVisible:(0,r.combine)({and:[j,I,F,o.W.outputs.$userPaymentOptions,B,C,(e,t,a,s,r,i)=>{if(!i)return!1;if(!a)return!1;if(!r)return!1;const n=s?.includes("ww_card");return!n&&(p()(s,["ru_card"])?e:t||e)}],or:{sid:"-jev469"}}),$isMatchingFlagDirections:F,$isForeignCardsExperimentEnabled:C,$foreignCardsPlacements:w}},{$informerCloseTimestamp:P,$informerCloseSearchCount:T}=d.m.outputs,{resetForeignCardsInformerStorageDataFx:D,updateInformerSearchCountFx:R}=d.m.inputs,{inputs:A,outputs:L}=E;(0,r.sample)({and:[{clock:A.informerClicked,fn:()=>i.t6.Serp,target:l.a.inputs.popupOpened}],or:{sid:"-4ehclb"}}),(0,r.sample)({and:[{clock:A.informerClosed,target:D}],or:{sid:"-4b6l15"}}),(0,r.sample)({and:[{clock:A.informerInitialized,source:{paymentOptions:o.W.outputs.$userPaymentOptions,informerCloseTimestamp:P,informerCloseSearchCount:T},filter:({paymentOptions:e,informerCloseTimestamp:t,informerCloseSearchCount:a})=>Boolean(e&&e.length>0)&&Boolean(null===t||null===a),target:D}],or:{sid:"-3wvxlr"}}),(0,r.sample)({and:[{clock:c.N.outputs.$searchStatus,source:{isMatchingFlagDirections:L.$isMatchingFlagDirections,informerCloseTimestamp:P,informerCloseSearchCount:T},filter:({isMatchingFlagDirections:e,informerCloseTimestamp:t,informerCloseSearchCount:a},s)=>{const r=null===a;return Boolean(e&&!(null===t)&&s===n.S.Finished&&!r)},target:R}],or:{sid:"-2vhx97"}});var O=a(4190),H=a(47166),z=a.n(H),q=a(89421),U=a(67294),M=a(49963),V=a(44619),Z=a(5393),G=a(16097),K={root:"s__ed9PgmUdvzCPKjef7xll",text:"s__sxtLlVk88CnRbyLQOm2a","close-button":"s__oKSi2dsZruDsVGerSCNz",chevron:"s__pxCvAKUVHXMi5lOIdn8q",container:"s__kowd2q4BbgkeNLGQEvLD","container_preview-v3":"s__s1b4TdynL2TgXyAjqCte"},X=a.p+"86b357325c7ba8ec33e5.svg",Q=a.p+"5061cfff8a19b865c66f.svg",W=a(85893);const Y=z().bind(K),J=({isNightMode:e})=>{const t=e?X:Q;return(0,W.jsx)("img",{src:t,alt:"cards"})},ee=({text:e,onClose:t,onClick:a,isNightMode:s=!1,className:r,hasChevron:i})=>{const n=(0,U.useCallback)((e=>{e.stopPropagation(),t()}),[t]);return(0,W.jsxs)("div",{className:Y("root",r),onClick:a,children:[(0,W.jsx)(J,{isNightMode:s}),(0,W.jsx)(M.x,{type:V.y.Body2Regular,className:Y("text"),children:e}),!i&&(0,W.jsx)(Z.P,{size:"small",onClick:n,className:Y("close-button"),touchZone:{height:36,paddingLeft:8,paddingRight:8}}),i&&(0,W.jsx)(G.V,{className:Y("chevron")})]})},te=z().bind(K),{outputs:ae,inputs:se}=E,re={ForeignCardsInformerContainer:({placement:e,className:t})=>{const{informerText:a,isVisible:s,isNightMode:r,foreignCardsPlacements:i}=(0,O.useUnit)({informerText:ae.$informerText,isVisible:ae.$isVisible,isNightMode:q.H.outputs.$isNight,foreignCardsPlacements:ae.$foreignCardsPlacements}),{handleCLick:n,handleClose:o}=(0,O.useUnit)({handleCLick:se.informerClicked,handleClose:se.informerClosed});if(!s||!i.includes(e))return null;const l="ticket"===e;return(0,W.jsx)(ee,{text:a,onClick:n,onClose:o,className:te(t,{container:!l,"container_preview-v3":!l}),isNightMode:r,hasChevron:l})}},ie=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp/services/foreign_cards_informer/index.ts",api:{inputs:E.inputs,outputs:E.outputs,containers:re}})},76918:function(e,t,a){"use strict";a.d(t,{S:function(){return V}});var s=a(30091),r=a(47166),i=a.n(r),n=a(97608),o=a(5393),l=a(49963),c=a(44619),d=a(63263),u=a(39535),p=a(4190),g=a(98116),m=a(29260),h=a(29422),f=a(4517),_=a(33345),y=a(94547),k=a(28258),v=a(85658);const b={MOBILE_REDIRECT_CLIENT_STORAGE_KEY:"mobile_app_redirect"},x=(0,y.kl)(b.MOBILE_REDIRECT_CLIENT_STORAGE_KEY),C=(0,g.createEvent)({sid:"9svy8g"}),S=(0,g.createEvent)({sid:"rooqv1"}),w=(0,g.createEvent)({sid:"-rvuh30"}),$=(0,g.createEvent)({sid:"ygurqx"}),j=(0,g.createStore)(!1,{sid:"-7y2nvt"}),I=(0,g.createStore)(!0,{sid:"ddzxai"}),N=(0,g.combine)({and:[v.u.outputs.$isPortraitOrientation,f.r.outputs.$mobileAppRedirectFlag.$value,(e,t)=>t.enabled&&"new"===t.version&&e],or:{sid:"golkj7"}}),F=f.r.outputs.$mobileAppRedirectFlag.$value.map((({payload:e})=>e||{})),B=F.map((({showBannerAction:e})=>e??null)),E=(0,g.createEffect)((()=>"1"===x.read()||"1"===_._4.getItem(b.MOBILE_REDIRECT_CLIENT_STORAGE_KEY)),{sid:"t3xups"}),P=(0,g.createEffect)((()=>{x.write("1",{expires:(0,h.Z)(new Date,{weeks:1})}),_._4.setItem(b.MOBILE_REDIRECT_CLIENT_STORAGE_KEY,"1")}),{sid:"qh6fc3"});(0,g.sample)({and:[{clock:S,fn:()=>!1,target:j}],or:{sid:"emaznb"}}),(0,g.sample)({and:[{clock:S,target:P}],or:{sid:"f15fo2"}}),(0,g.sample)({and:[{clock:C,target:E}],or:{sid:"f3wemv"}}),(0,g.sample)({and:[{clock:E.doneData,target:I}],or:{sid:"fi7229"}}),(0,g.sample)({and:[{clock:E.doneData,source:{showBannerAction:B,hasBannerBeenShown:I},filter:({showBannerAction:e,hasBannerBeenShown:t})=>!t&&"appLaunch"===e,target:w}],or:{sid:"fky112"}}),(0,g.sample)({and:[{clock:(0,g.withFactory)({sid:"dlazy4",fn:()=>(0,m.m)({startSearch:k.E.inputs.startSearch,initFinished:E.doneData})}),source:{showBannerAction:B,hasBannerBeenShown:I},filter:({showBannerAction:e,hasBannerBeenShown:t})=>!t&&"searchStart"===e,target:w}],or:{sid:"g2jg0m"}}),(0,g.sample)({and:[{clock:w,fn:()=>!0,target:j}],or:{sid:"gxbx8u"}});const T={inputs:{bannerClosedByUser:S,init:C,showBanner:w,downloadButtonClicked:$},outputs:{$isOpen:j,$isEnabled:N,$bannerData:F},internals:{initBannerFx:E,closeBannerFx:P,$hasBannerBeenShown:I,mobileAppRedirectBannerCookie:x}};let D;!function(e){e.Skip="skip",e.Download="download"}(D||(D={}));const R={outputs:{$imageUrl:T.outputs.$bannerData.map((({imageUrl:e})=>e??"https://img.avs.io/serp/web2app/8")),$title:T.outputs.$bannerData.map((({headline:e})=>e||null)),$bullets:T.outputs.$bannerData.map((({bullets:e})=>e||[])),$actionButtons:T.outputs.$bannerData.map((({actionButton:e,skipLabel:t})=>{const a=[];return e&&a.push({title:e.label,icon:e.type,url:e.url,type:D.Download}),t&&a.push({title:t,type:D.Skip}),a}))}};var A=a(19987),L=a(49525),O=a(85893);const H={ios:(0,O.jsx)(A.N,{}),android:(0,O.jsx)(L.w,{})};var z=a(1156);const q=({onClick:e,priority:t,icon:a,title:s,href:r})=>{const i=r?"a":void 0;return(0,O.jsxs)(z.z,{onClick:e,priority:t,href:r,tag:i,size:u.qE.M,children:[a,s]})},U=i().bind({content:"s__W_yRf6ilt5_jlS7ti1Dh",modal:"s__sVvsGXjZU3xSHDAjJiTQ",navigation:"s__HB09OBBgd7BrPAdNEUxH",panel:"s__A0bExmx8GSupHNAw5VTn",checkbox:"s__uJh4xunLkUmE4jlIE0LE",bullet:"s__BTLZwIJ4ea5OUByXs0JA","bullet-text":"s__bYyo_3Nm38rSiY1prH06","button-container":"s__l38XaHg6Uh07DXOhp62Y","button-container-distant":"s__hhscSC7XmYbpKzh4Io9x","button-container-only":"s__IzlIid5IgfniVjc1Pn6N"}),M={MobileAppRedirectBannerContainer:()=>{const{isEnabled:e,isOpen:t,title:a,imageUrl:s,bullets:r,buttons:i,bannerClosedByUserEvent:g,downloadButtonClickedEvent:m}=(0,p.useUnit)({isEnabled:T.outputs.$isEnabled,isOpen:T.outputs.$isOpen,title:R.outputs.$title,imageUrl:R.outputs.$imageUrl,bullets:R.outputs.$bullets,buttons:R.outputs.$actionButtons,bannerClosedByUserEvent:T.inputs.bannerClosedByUser,downloadButtonClickedEvent:T.inputs.downloadButtonClicked}),h=r.length>0,f=Boolean(a);return e?(0,O.jsx)(n.u,{visible:t,onClose:g,noHeader:!0,stickToBottomOnMobile:!1,className:U("modal"),noAutoFocus:!0,children:(0,O.jsxs)("div",{className:U("content"),style:{backgroundImage:`url("${s}")`},children:[(0,O.jsx)("div",{className:U("navigation"),children:(0,O.jsx)(o.P,{background:"bright",onClick:g})}),(0,O.jsxs)("div",{className:U("panel"),children:[f&&(0,O.jsx)(l.x,{type:c.y.Title3Bold,className:U("title"),children:a}),r.map(((e,t)=>(0,O.jsxs)("div",{className:U("bullet"),children:[(0,O.jsx)(d.X,{checked:!0,className:U("checkbox")}),(0,O.jsx)(l.x,{type:c.y.Body3Paragraph,className:U("bullet-text"),children:e})]},t))),i.length>0&&(0,O.jsx)("div",{className:U("button-container",{"button-container-distant":h,"button-container-only":!h&&!f}),children:i.map(((e,t)=>e.type===D.Skip?(0,O.jsx)(q,{onClick:g,priority:u.Ji.Tertiary,title:e.title},t):(0,O.jsx)(q,{href:e.url,priority:u.Ji.Primary,title:e.title,icon:H[e.icon]||null,onClick:m},t)))})]})]})}):null}},V=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp/services/mobile_app_redirect/index.ts",api:{inputs:T.inputs,outputs:T.outputs,internals:T.internals,constants:b,containers:M}})},38210:function(e,t,a){"use strict";a.r(t),a.d(t,{SerpWidget:function(){return tr}}),a(38130),a(4517);var s=a(30091),r=a(98116),i=a(23588),n=a(38352),o=a(47420),l=a(28258),c=a(96864),d=a(74590),u=a(33531),p=a(30040),g=a(27636),m=a(38387),h=a(10924),f=a(82672);let _,y;!function(e){e.Serp="serp",e.Explore="explore"}(_||(_={})),function(e){e.Filter="filter",e.Sorting="sorting",e.Pagination="pagination"}(y||(y={}));const k=f.$.outputs.matchPage(f.$.outputs.pages.SearchPage).$isOpen.map((e=>e?_.Serp:_.Explore)),[v,b]=(0,r.withFactory)({sid:"-kynh3",fn:()=>(0,g.K)(l.E.outputs.$searchSession.map((e=>e?.searchId??null)))}),x=(0,r.restore)(i.z.outputs.deviceSearchIdUpdated,null,{sid:"-ypg5b"}),{$isMobile:C}=m.l.outputs,S={outputs:{$searchId:v,$deviceSearchId:x,$isMobile:C,serpAnalyticsReporter:h.I.inputs.createReporter({data:{service:p.t6.Serp},payload:{search_id:v,device_search_id:x,is_mobile:C,page_name:k}})},internals:{$pageName:k,$searchIdOverride:b}};a(26699);const w=e=>!!e&&!["lang_change","refresh_error","search_captcha","expired_search","debug_settings","chunk_load_client_timeout","currency_change","aviacashback_change"].includes(e),{$originCityIata:$,$destinationCityIata:j}=n.s.outputs,{serpAnalyticsReporter:I}=S.outputs,{$tripClass:N,$tripDirection:F}=n.s.outputs,{$userPaymentOptions:B}=c.W.outputs,E=(0,r.restore)(i.z.outputs.searchStartSourceChanged,null,{sid:"-gf0ucp"}),P=E.map(w),T=o.i.outputs.$paymentMethod.map((e=>[e])),D=(0,r.createEvent)({sid:"yrwv5r"});(0,r.sample)({and:[{clock:l.E.inputs.startSearch,source:{source:E,origin:$,destination:j,payment_methods:T,trip_class:N,trip_type:F,userEvent:P,userPaymentOptions:B,isForeignCardsExperimentEnabled:d.G.outputs.$isForeignCardsExperimentEnabled,prechecked_filters:u.h.outputs.$precheckedFilters,prechecked_filters_type:u.h.outputs.$precheckedFiltersSources},fn:({userPaymentOptions:e,isForeignCardsExperimentEnabled:t,...a})=>({...a,...t&&e?{search_payment_options:e}:{}}),target:D}],or:{sid:"-cgmpsh"}}),I({clock:D,payload:(e,{payload:t})=>({...e,...t}),data:{category:"search",label:"search",action:"started"}});var R=a(38032),A=a(85349),L=a(52112),O=a(63059),H=a(44236),z=a.n(H),q=a(76262),U=a.n(q),M=a(74423),V=a.n(M),Z=a(69937),G=a.n(Z),K=a(7108),X=a.n(K),Q=a(63360),W=a.n(Q),Y=a(66415),J=a.n(Y),ee=a(46898),te=a.n(ee),ae=a(40104),se=a.n(ae),re=a(36519);const{serpAnalyticsReporter:ie}=S.outputs,{$filteredCheapestTicket:ne,$minFilteredTicketPrice:oe}=L.o.outputs,{$meta:le}=O.m.outputs,{$proposalCollection:ce}=L.o.outputs,de=(0,r.createStore)(!1,{sid:"-tlpixl"}),ue=(0,r.restore)(i.z.outputs.searchStartSourceChanged,null,{sid:"4q1t73"}),pe=ne.map((e=>e?.sign??null)),ge=(0,r.combine)({and:[ce,e=>te()([W(),se()((e=>!X()(e.worstBags[re.F.Baggage]))),J()("price"),G(),V()("unifiedPrice")])(e)??null],or:{sid:"m0lfv4"}}),me=le.map((e=>e?.filteredTicketsCount??0)),he=le.map((e=>e?.directTicketsCount??0)),fe=(0,r.createStore)({filters:[],segments:{}},{sid:"-5ybs8y"});(0,r.sample)({and:[{clock:l.E.outputs.resultChunksLoaded,source:{segmentIds:n.s.outputs.$segmentIds},fn:({segmentIds:e},[t])=>((e,t)=>{const a=Object.keys(U()(["departure_arrival_time","airports"],t)),{departure_arrival_time:s,airports:r}=t,i=e.map((e=>{const t=Number(e),a=s?.[t]??{},i=r?.[t]??{};return[t,[...Object.keys(a),...Object.keys(i)]]})).filter((([,e])=>e.length>0)).reduce(((e,[t,a])=>({...e,[t]:a})),{});return{filters:[...a,...z()(Object.values(i).flat())],segments:{...i}}})(e,t.extended_boundaries??{}),target:fe}],or:{sid:"vyzgk6"}});const _e=(0,r.sample)({and:[{clock:l.E.outputs.searchFinished,source:{tickets_count:me,direct_tickets_count:he,minprice_signature:pe,min_unified_price:oe,min_unified_price_baggage:ge,non_active_filters:fe,source:ue},filter:(0,r.withFactory)({sid:"-tdzk5c",fn:()=>(0,R.f)(de)}),fn:e=>({...e,userEvent:!1})}],or:{sid:"-28tsgi"}});(0,r.sample)({and:[{clock:_e,fn:()=>!0,target:de}],or:{sid:"x0dgwq"}}),(0,r.withFactory)({sid:"xf7wxh",fn:()=>(0,A.m)({clock:l.E.inputs.startSearch,target:de})}),ie({clock:_e,payload:(e,{payload:t})=>({...e,...t}),data:{category:"search",label:"search",action:"finished"}});const{serpAnalyticsReporter:ye}=S.outputs;ye({clock:(0,r.sample)({and:[{clock:l.E.outputs.searchFailed,fn:e=>({source:null,error_info:e.type,userEvent:!1})}],or:{sid:"22smr0"}}),payload:(e,{payload:t})=>({...e,...t}),data:{category:"search",label:"search",action:"failed"}});var ke=a(27497),ve=a(94307),be=a(39104),xe=a.n(be),Ce=a(78085),Se=a.n(Ce);a(20611);var we=a(52151),$e=a.n(we),je=a(11151),Ie=a.n(je);const Ne=e=>te()([Ie()((e=>e.flights)),J()((e=>e.duration)),$e(),V()("operatingCarrier")])(e.segments),{$pageSize:Fe}=ve.P.outputs,{$ticketSignatures:Be,$ticketCollection:Ee,$proposalCollection:Pe,$ticketProposalCollection:Te}=L.o.outputs,{serpAnalyticsReporter:De}=S.outputs,Re=(0,r.createStore)(null,{sid:"99jro"}),Ae=(0,r.createStore)(0,{sid:"-qnz4ag"}).on(Re.updates,(e=>e+1)).reset(l.E.inputs.startSearch),Le=(0,r.combine)({and:[Be,Ee,Pe,Te,Fe,(e,t,a,s,r)=>{const i=((e,t,a)=>(s,r)=>{const i=e[r],n=t[a[r][0]],o=i?.badges?.[0]?.type??"",l=Ne(i);return{ticket_signatures:[...s.ticket_signatures,r],main_airlines:[...s.main_airlines,l],main_gate_ids:[...s.main_gate_ids,n.agentId],unified_prices:[...s.unified_prices,n.unifiedPrice],main_badges:[...s.main_badges,o]}})(t,a,s);return te()([xe()(0,r),Se()(i,{ticket_signatures:[],main_airlines:[],main_gate_ids:[],unified_prices:[],main_badges:[]})])(e)}],or:{sid:"-2dq48l"}});(0,r.sample)({and:[{clock:L.o.inputs.ticketsDataUpdated,source:Fe,fn:(e,{ticketSignatures:t,proposalCollection:a,ticketProposalCollection:s})=>te()([xe()(0,e),Se()(((e,t)=>`${e}${a[s[t][0]].id}`),"")])(t),target:Re}],or:{sid:"-uga2ir"}}),(0,r.withFactory)({sid:"-ucfid8",fn:()=>(0,A.m)({clock:l.E.inputs.startSearch,target:Re})}),De({clock:(0,r.sample)({and:[{clock:(0,r.sample)({and:[{clock:Re.updates,filter:Boolean}],or:{sid:"767l0c"}}),source:{arrivedTicketsCounter:Ae,arrivedTickets:Le},filter:(0,r.withFactory)({sid:"-o5tn1o",fn:()=>(0,R.f)(ke.N.outputs.$isSearchFinished)}),fn:({arrivedTicketsCounter:e,arrivedTickets:t})=>({arrival_counter:e,source:null,userEvent:!1,...t})}],or:{sid:"-kelvr0"}}),payload:(e,{payload:t})=>({...e,...t}),data:{category:"search",label:"first_tickets",action:"arrived"}});const{serpAnalyticsReporter:Oe}=S.outputs,{$tripDirection:He}=n.s.outputs,ze=(0,r.restore)(i.z.outputs.searchStartSourceChanged,null,{sid:"-3vypdb"}),qe=(0,r.restore)(o.i.outputs.synchronizer.expectedPriceValueParsed.map(Number),null,{sid:"u287rh"}),Ue=ze.map(w);Oe({clock:(0,r.sample)({and:[{clock:l.E.outputs.searchMetaLoaded,source:{trip_type:He,expected_price:qe,source:ze,userEvent:Ue},filter:(e,{search_id:t})=>Boolean(t),fn:(e,t)=>({...e,search_tags:t.tags??null})}],or:{sid:"-notrdb"}}),payload:(e,{payload:t})=>({...e,...t}),data:{category:"search",label:"search",action:"id_assigned"}});var Me=a(28398);const{serpAnalyticsReporter:Ve}=S.outputs;Ve({clock:(0,r.sample)({and:[{clock:Me.d.outputs.ticketSharingClicked,source:{ticketSign:Me.d.outputs.$ticketSharingSignature,source:Me.d.outputs.$ticketSharingSource},fn:({ticketSign:e,source:t},a)=>({way:a.toLowerCase(),ticket_signature:e,source:t})}],or:{sid:"6px7jm"}}),payload:(e,{payload:t})=>({...e,...t}),data:{category:"search",label:"ticket_sharing",action:"started"}}),Ve({clock:(0,r.sample)({and:[{clock:Me.d.outputs.startNativeShare,source:{ticketSign:Me.d.outputs.$ticketSharingSignature,source:Me.d.outputs.$ticketSharingSource},fn:({ticketSign:e,source:t})=>({ticket_signature:e,source:t})}],or:{sid:"7q7mpg"}}),payload:(e,{payload:t})=>({...e,...t}),data:{category:"search",label:"ticket_sharing",action:"started"}});var Ze=a(5016),Ge=a(31401),Ke=a(74359),Xe=a(41609),Qe=a.n(Xe),We=a(2568),Ye=a.n(We);const{serpAnalyticsReporter:Je}=S.outputs,{$filteredCheapestTicket:et,$minFilteredTicketPrice:tt}=L.o.outputs,{$filtersState:at}=Ze.j.outputs,st=(0,r.createEvent)({sid:"ldzgj"}),rt=(0,r.createStore)(!0,{sid:"-gflrs"}).on(st,((e,{source:t})=>(e=>e!==Ge.ng.SavedFilters)(t)));(0,r.sample)({and:[{clock:[Ze.j.inputs.filtersChangedByUser,Ze.j.inputs.filtersChangedAndSortingRelaxedByUser],target:st}],or:{sid:"-zb5ve4"}}),(0,r.sample)({and:[{clock:u.h.inputs.savedFiltersApplied,fn:({filters:e})=>({changes:Ke.Dp.fromDto(e),source:Ge.ng.SavedFilters}),target:st}],or:{sid:"-yv7u6n"}}),Je({clock:(0,r.sample)({and:[{clock:st,source:{state_total:at,minprice_signature:et.map((e=>e?.sign??null)),min_unified_price:tt,userEvent:rt},fn:(e,t)=>({...e,state_total:Qe()(e.state_total)?null:e.state_total,source:t.source,state:t.changes,state_total_signature:Ye()(JSON.stringify(e.state_total))})}],or:{sid:"eqvrn9"}}),payload:(e,{payload:t})=>({...e,...t}),data:{category:"search",label:"filter",action:"applied"}});const{serpAnalyticsReporter:it}=S.outputs,nt=(0,r.createEvent)({sid:"six8sn"});(0,r.sample)({and:[{clock:Ze.j.inputs.savedSortingApplied,fn:e=>({order:e,source:Ge.tL.SavedFilters}),target:nt}],or:{sid:"-ihfsjw"}}),(0,r.sample)({and:[{clock:Ze.j.inputs.sortingChangedByUser,target:nt}],or:{sid:"-i2lcj5"}}),(0,r.sample)({and:[{clock:[Ze.j.inputs.sortingRelaxedByUser,Ze.j.inputs.filtersChangedAndSortingRelaxedByUser],source:{order:Ze.j.outputs.$initialSortingOrder},fn:({order:e})=>({order:e,source:Ge.tL.GeneralFilters}),target:nt}],or:{sid:"-hzudkc"}}),it({clock:(0,r.sample)({and:[{clock:nt,fn:({source:e,order:t})=>({sort_state:t,sort_source:e,userEvent:e===Ge.tL.GeneralFilters,source:null})}],or:{sid:"cfrik3"}}),payload:(e,{payload:t})=>({...e,...t}),data:{category:"search",label:"sort",action:"applied"}});const{serpAnalyticsReporter:ot}=S.outputs,{$searchSession:lt}=l.E.outputs,ct=(0,r.createEvent)({sid:"s9voq4"}),dt=(0,r.combine)({and:[{limit:ve.P.outputs.$page,pageSize:ve.P.outputs.$pageSize,order:Ze.j.outputs.$sortingOrder,state:Ze.j.outputs.$filtersState,boundaries:Ze.j.outputs.$filtersBoundaries},({limit:e,pageSize:t,order:a,state:s,boundaries:r})=>({filters:Ke.Dp.toDto(s,r),limit:e*t,order:a})],or:{sid:"-uoqkto"}}),ut=lt.map((e=>e?.transactionId??null)),pt=(0,r.combine)({and:[{result_request_id:ut,min_unified_price:L.o.outputs.$minFilteredTicketPrice,action_state_total:dt,is_search_finished:ke.N.outputs.$isSearchFinished}],or:{sid:"-il4j8n"}});ot({clock:(0,r.sample)({and:[{clock:ct,filter:({result_request_id:e})=>null!==e}],or:{sid:"-5l5g3l"}}),payload:(e,{payload:t})=>(e.action_type,y.Filter,{...e,...t}),data:{category:"search",label:"results",action:"requested"}});const gt={internals:{sendAnalytics:ct,$searchAnalyticsState:pt,$actionStateTotal:dt,$resultRequestId:ut}},{serpAnalyticsReporter:mt}=S.outputs,ht=(0,r.createEvent)({sid:"-ci5axi"});(0,r.sample)({and:[{clock:l.E.outputs.searchFailed,source:{isSearchFinished:ke.N.outputs.$isSearchFinished},filter:({isSearchFinished:e})=>e,fn:(e,{type:t,transactionId:a})=>({error_info:t,result_request_id:a,userEvent:!1}),target:ht}],or:{sid:"2jay5c"}}),mt({clock:ht,payload:(e,{payload:t})=>({...e,...t}),data:{category:"search",label:"results",action:"failed"}});const{serpAnalyticsReporter:ft}=S.outputs,_t=(0,r.createEvent)({sid:"-w03fyi"});(0,r.sample)({and:[{clock:l.E.internals.fetchResultsFx.done,source:{isSearchFinished:ke.N.outputs.$isSearchFinished},filter:({isSearchFinished:e})=>e,fn:(e,{params:t,result:a})=>{const s=a.data?.find((e=>"results"===e.chunk_id));return{result_request_id:t.data.session.transactionId,userEvent:!1,filtered_tickets_count:s?.meta?.filtered_tickets_count??0,tickets_count:s?.meta?.total_tickets_count??0,direct_tickets_count:s?.meta?.direct_tickets_count??0,soft_tickets_count:s?.soft_tickets?.tickets.length??0}},target:_t}],or:{sid:"-g805ns"}}),ft({clock:_t,payload:(e,{payload:t})=>({...e,...t}),data:{category:"search",label:"results",action:"applied"}});const{sendAnalytics:yt,$searchAnalyticsState:kt}=gt.internals,{filtersChangedByUser:vt,filtersChangedAndSortingRelaxedByUser:bt,filtersRelaxedByUser:xt}=Ze.j.inputs;(0,r.sample)({and:[{clock:[vt,bt],source:kt,fn:(e,t)=>({...e,action_type:y.Filter,source:t.source,userEvent:!0}),target:yt}],or:{sid:"-anpm52"}}),(0,r.sample)({and:[{clock:xt,source:kt,fn:(e,t)=>({...e,action_type:y.Filter,source:t,userEvent:!0}),target:yt}],or:{sid:"-9sx4wu"}});const{sendAnalytics:Ct,$searchAnalyticsState:St}=gt.internals,{pageChanged:wt}=ve.P.inputs;(0,r.sample)({and:[{clock:wt,source:St,fn:e=>({...e,action_type:y.Pagination,source:"show_more_results_button",userEvent:!0}),target:Ct}],or:{sid:"b1btj8"}});const{sendAnalytics:$t,$searchAnalyticsState:jt}=gt.internals,{sortingRelaxedByUser:It,sortingChangedByUser:Nt}=Ze.j.inputs;(0,r.sample)({and:[{clock:It,source:jt,fn:e=>({...e,action_type:y.Sorting,source:Ge.tL.GeneralFilters,userEvent:!0}),target:$t}],or:{sid:"2y39o3"}}),(0,r.sample)({and:[{clock:Nt,source:jt,fn:(e,t)=>({...e,action_type:y.Sorting,source:t.source,userEvent:!0}),target:$t}],or:{sid:"3hc2fq"}});var Ft=a(69067);const{serpAnalyticsReporter:Bt}=S.outputs;Bt({clock:(0,r.sample)({and:[{clock:Ft.H.outputs.adClicked,source:{slotByPlacement:Ft.H.outputs.$slotByPlacement,bannerParamsByPlacement:Ft.H.outputs.$bannerParamsByPlacement},fn:({slotByPlacement:e,bannerParamsByPlacement:t},a)=>{const{bannerId:s,campaignId:r,placeId:i}=t[a]??{};return{type:e[a]?.type,placement:a,bannerId:s,campaignId:r,placeId:i}}}],or:{sid:"-c5cwx1"}}),payload:({type:e,placement:t,bannerId:a,campaignId:s,placeId:r},{payload:i})=>({...i,type:e,placement:t,banner_id:a,campaign_id:s,place_id:r}),data:{category:"ad",label:"placement",action:"clicked"}});const{serpAnalyticsReporter:Et}=S.outputs;Et({clock:(0,r.sample)({and:[{clock:Ft.H.outputs.adRequested,source:{slotByPlacement:Ft.H.outputs.$slotByPlacement},fn:({slotByPlacement:e},t)=>({type:e[t]?.type,placement:t})}],or:{sid:"p3ftvx"}}),payload:({type:e,placement:t},{payload:a})=>({...a,type:e,placement:t}),data:{category:"ad",label:"placement",action:"requested"}});const{serpAnalyticsReporter:Pt}=S.outputs;Pt({clock:(0,r.sample)({and:[{clock:Ft.H.outputs.adRendered,source:{slotByPlacement:Ft.H.outputs.$slotByPlacement,bannerParamsByPlacement:Ft.H.outputs.$bannerParamsByPlacement},fn:({slotByPlacement:e,bannerParamsByPlacement:t},a)=>{const{bannerId:s,campaignId:r,placeId:i}=t[a]??{};return{type:e[a]?.type,placement:a,bannerId:s,campaignId:r,placeId:i}}}],or:{sid:"-iya79l"}}),payload:({type:e,placement:t,bannerId:a,campaignId:s,placeId:r},{payload:i})=>({...i,type:e,placement:t,banner_id:a,campaign_id:s,place_id:r}),data:{category:"ad",label:"placement",action:"showed"}});const{serpAnalyticsReporter:Tt}=S.outputs;Tt({clock:(0,r.sample)({and:[{clock:Ft.H.outputs.adClosed,source:{slotByPlacement:Ft.H.outputs.$slotByPlacement,bannerParamsByPlacement:Ft.H.outputs.$bannerParamsByPlacement},fn:({slotByPlacement:e,bannerParamsByPlacement:t},a)=>{const{bannerId:s,campaignId:r,placeId:i}=t[a]??{};return{type:e[a]?.type,placement:a,bannerId:s,campaignId:r,placeId:i}}}],or:{sid:"vk5g3b"}}),payload:({type:e,placement:t,bannerId:a,campaignId:s,placeId:r},{payload:i})=>({...i,type:e,placement:t,banner_id:a,campaign_id:s,place_id:r}),data:{category:"ad",label:"placement",action:"closed"}});var Dt=a(32330),Rt=a.n(Dt),At=a(27183),Lt=a.n(At),Ot=a(59399),Ht=a(13009),zt=a(93325),qt=a.n(zt),Ut=a(28252),Mt=a.n(Ut);const Vt=({state:e,keys:t,payload:a})=>{const s={...Lt()({},t,e),...a};return Mt()(t,s,e)},{visibleUpdated:Zt,significantUpdated:Gt}=Ht.O.inputs,{serpAnalyticsReporter:Kt}=S.outputs,{$isSearchExpired:Xt,$isSearchFinished:Qt}=ke.N.outputs,Wt=(0,r.createStore)(!1,{sid:"9hr5h4"}),Yt=(0,r.createEvent)({sid:"-5rjcvh"}),Jt=(0,r.createStore)({},{sid:"igqsnz"});(0,r.sample)({and:[{clock:Zt,source:Jt,fn:(e,t)=>{const{flight:{carrier:a},visible:s}=t;return Vt({state:e,keys:[a],payload:{visible:s}})},target:Jt}],or:{sid:"-wcxlbc"}}),(0,r.sample)({and:[{clock:Gt,source:Jt,fn:(e,t)=>{const{flight:{carrier:a},hash:s}=t,r=Lt()(0,[a,"renderCounter"],e);return Vt({state:e,keys:[a],payload:{renderCounter:r+1,currentHash:s}})},target:Jt}],or:{sid:"-veajxl"}});const ea=(0,r.createEvent)({sid:"-x462bp"});(0,r.withFactory)({sid:"hi6mbj",fn:()=>(0,Ot.g)({source:(0,r.sample)({and:[{clock:(0,r.sample)({and:[{clock:[Zt,Gt],source:Jt,fn:(e,t)=>{const{visible:a,flight:{carrier:s}}=t,r=te()(Lt()({},[s]))(e);return Rt()(a)?t:{...t,visible:r.visible}}}],or:{sid:"k6o8hj"}}),filter:({visible:e})=>e}],or:{sid:"-97zh4q"}}),timeout:1e3,target:ea})}),(0,r.sample)({and:[{clock:(0,r.sample)({and:[{clock:ea,source:Jt,fn:(e,t)=>({state:e,payload:t})}],or:{sid:"-rckc75"}}),filter:({state:e,payload:t})=>{const{flight:{carrier:a},hash:s}=t,r=Lt()(null,[a],e);if(null===r)return!1;const{isSend:i,visible:n,currentHash:o}=r;return Boolean(s===o&&!i&&n)},target:Yt}],or:{sid:"jb2cc5"}}),(0,r.sample)({and:[{clock:Yt,source:Jt,fn:(e,{payload:t})=>{const{flight:{carrier:a}}=t;return Vt({state:e,keys:[a],payload:{isSend:!0}})},target:Jt}],or:{sid:"kq77iq"}}),(0,r.withFactory)({sid:"lc6z96",fn:()=>(0,A.m)({clock:l.E.inputs.startSearch,target:Jt})}),Kt({clock:(0,r.sample)({and:[{clock:Yt,source:{is_search_finished:Qt,is_search_expired:Xt,userEvent:Wt},fn:(e,{state:t,payload:a})=>{const{flight:{version:s,carrier:r,carriers:i,cheapestTicketPrice:n,cheapestTicketSign:o},position:l}=a,c=Lt()(0,[r,"renderCounter"],t),d=te()([Lt()([],["flight","schedule"]),qt()(0),Lt()(0,["length"])])(a),u=Lt()(0,["flight","schedule","departure","length"],a),p=te()([Lt()([],["flight","schedule"]),qt()(1),Lt()(0,["length"])])(a),g=Lt()(0,["flight","schedule","returns","length"],a);return{...e,source:null,render_counter:c,airline:r,min_unified_price:n,different_airline:i.length>1,ticket_position:l,depart_flights_count:1===s?d:u,return_flights_count:1===s?p:g,ticket_signatures:[o],interchange_flight:a.flight.hasException}}}],or:{sid:"-ox51uq"}}),payload:(e,{payload:t})=>({...e,...t}),data:{category:"schedule_listing",label:"ticket",action:"showed"}});var ta=a(41832),aa=a(60918),sa=a.n(aa),ra=a(30494),ia=a.n(ra);const{$ticketCollection:na,$proposalCollection:oa}=L.o.outputs,la=(0,r.createDomain)("fares",{sid:"dghyeo"}),ca=la.createStore({},{sid:"-qzwg4c"}),da=la.createStore({},{sid:"-csgefo"});(0,r.sample)({and:[{source:na,fn:e=>ia()((e=>e.extraFares??null),e),target:ca}],or:{sid:"tp3sy4"}}),(0,r.sample)({and:[{source:{ticketExtraFares:ca,proposalCollection:oa},fn:({ticketExtraFares:e,proposalCollection:t})=>{const a=Object.entries(e).map((([e,t])=>t?[e,Object.values(t).flatMap((e=>e.map((e=>e.proposalId))))??[]]:[e,[]]));return Object.fromEntries(a.map((([e,a])=>[e,sa()("price","asc",a.map((e=>t[e])))])))},target:da}],or:{sid:"u3y8yv"}});const ua={outputs:{$ticketExtraFares:ca,$ticketExtraFaresProposals:da}},pa=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp/services/fares/index.ts",api:{...ua}});let ga;!function(e){e.Autosearch="autosearch",e.SearchResults="search_results"}(ga||(ga={}));var ma=a(88846),ha=a.n(ma);const fa=e=>e?.fare_baggage?{baggage:e.fare_baggage,delta_price:e.delta_price}:null,_a=e=>(e.fare_baggage?.count??0)*(e.fare_baggage?.weight??0);function ya(e,t){const a=((e,t)=>t.map((t=>({delta_price:t.price-e.price,is_selected:e.id===t.id,fare_baggage:t?.minimumFare?.baggage,fare_handbags:t?.minimumFare?.handbags,fare_change:t?.minimumFare?.changeBeforeFlight,fare_return:t?.minimumFare?.returnBeforeFlight}))))(e,t),s=(r=e).minimumFare?.baggage&&r.minimumFare?.baggage?.count>0;var r;const i=(e=>(e.minimumFare?.baggage?.count??0)*(e.minimumFare?.baggage?.weight??0))(e);if(!s){const e=a.find((e=>!e.is_selected&&e.fare_baggage&&e.fare_baggage?.count>0));return{downsell:null,upsell:fa(e)}}const n=a.filter((e=>!e.is_selected&&(e=>!!e.fare_baggage?.count&&e.fare_baggage?.count>0)(e))).find((e=>_a(e)>i)),o=fa(n),l=a.filter((e=>!e.is_selected&&e?.fare_baggage?.count&&e?.fare_baggage?.count>0&&_a(e)<i)).sort(((e,t)=>_a(e)-_a(t)))[0];if(!l){const e=a.find((e=>!e.is_selected&&!e.fare_baggage?.count));return{downsell:fa(e),upsell:o}}return{downsell:fa(l),upsell:o}}var ka=a(63772),va=a.n(ka);const{serpAnalyticsReporter:ba}=S.outputs,{$isSearchExpired:xa,$isSearchFinished:Ca}=ke.N.outputs,{$ticketCollection:Sa,$proposalCollection:wa,$ticketProposalCollection:$a,$allTicketSignatures:ja}=L.o.outputs,{$currency:Ia}=ta.y.outputs,{startSearch:Na}=l.E.inputs,{ticketComeIntoView:Fa,ticketComeOutOfView:Ba,ticketHashChanged:Ea}=L.o.outputs,{$ticketExtraFaresProposals:Pa}=pa.outputs,Ta=(0,r.createStore)({},{sid:"-49jxcn"}).on(Fa,((e,t)=>({...e,[t]:!0}))).on(Ba,((e,t)=>({...e,[t]:!1}))).reset(Na),Da=(0,r.createStore)({},{sid:"-mpgjtp"}).on(Ea,((e,t)=>({...e,[t]:e[t]?e[t]+1:1}))).reset(Na),Ra=(0,r.createStore)([],{sid:"2egghj"}),Aa=f.$.outputs.matchPage(f.$.outputs.pages.SearchPage).$isOpen.map((e=>e?ga.SearchResults:ga.Autosearch)),La=(0,r.createEvent)({sid:"efizyq"});(0,r.sample)({and:[{clock:Fa,source:{ticketCollection:Sa,allTicketSignatures:ja},filter:({ticketCollection:e},t)=>Boolean(e[t]?.hashsum),fn:({ticketCollection:e,allTicketSignatures:t},a)=>({signature:a,position:t.indexOf(a),hash:e[a].hashsum}),target:La}],or:{sid:"-danjni"}});const Oa=(0,r.createEvent)({sid:"-l1xs61"});(0,r.sample)({and:[{clock:(0,r.withFactory)({sid:"s6sfyh",fn:()=>(0,Ot.g)(La,1e3)}),source:{alreadySentTicketsHashes:Ra,ticketsInView:Ta,ticketCollection:Sa},filter:({alreadySentTicketsHashes:e,ticketsInView:t,ticketCollection:a},{hash:s,signature:r})=>{const i=a?.[r]?.hashsum,n=!va()(i)&&i===s;return!e.includes(s)&&t[r]&&n},fn:(e,t)=>t,target:Oa}],or:{sid:"-cd43gh"}}),(0,r.sample)({and:[{clock:Oa,source:Ra,fn:(e,{hash:t})=>[...e,t],target:Ra}],or:{sid:"-3eeslv"}}),(0,r.withFactory)({sid:"-3ak8gc",fn:()=>(0,A.m)({clock:Na,target:Ra})}),ba({clock:(0,r.sample)({and:[{clock:Oa,source:{ticketCollection:Sa,proposalCollection:wa,ticketProposalCollection:$a,source:Aa,isSearchExpired:xa,isSearchFinished:Ca,currency:Ia,ticketsRenderCounter:Da,ticketExtraFaresProposals:Pa},fn:({ticketCollection:e,proposalCollection:t,ticketProposalCollection:a,ticketsRenderCounter:s,source:r,isSearchExpired:i,isSearchFinished:n,currency:o,ticketExtraFaresProposals:l},{signature:c})=>{const d=e[c],u=Lt()([],c,a),p=t[u[0]],g=t[u[1]]||null,m=te()([V()("segments"),Se()(((e,t)=>e+t.flights.length),0)])(d),h=u.map((e=>t[e]?.agentId?.toString())),f=Se()(((e,t)=>e+(t.transfers?.length||0)),0,d?.segments??[]),_=d.segments.reduce(((e,t)=>{const{flights:a}=t;for(const t of a)e.push({departure:t.departureTimestamp,arrival:t.arrivalTimestamp});return e}),[]),y=Se()(((e,t)=>e+te()([Lt()([],"transfers"),ha()(Lt()(0,"duration")),Se()(((e,t)=>e+t),0)])(t)),0,d.segments),k=[p,g].reduce(((e,t)=>t?(e.push({gate_id:t.agentId,weight:t.weight,main:t.id===p.id}),e):e),[]),v=((e,t)=>({fare_baggage:e?.minimumFare?.baggage??null,fare_handbags:e?.minimumFare?.handbags??null,fare_change:e?.minimumFare?.changeBeforeFlight??null,fare_return:e?.minimumFare?.returnBeforeFlight??null,fare_baggage_upsell_options:ya(e,t)}))(p,l[c]);return{ticket_signature:d.sign,main_airline:Ne(d),airlines:d.carriers,ticket_position:d.position??null,gate_ids:h,flights_count:m,price:p.price,unified_price:p.unifiedPrice,second_unified_price:g?.unifiedPrice??null,currency:o,top_productivities:k,flights_time:_,layovers_count:f,layovers_length:y,main_badge:d.badges?.[0]?.type??null,ticket_badges:d.badges??[],ticket_tags:d.tags,ticket_popularity:d?.debug?.popularity??null,render_counter:s[c]??null,is_search_finished:n,is_search_expired:i,seats_available:p.seatsAvailable??null,main_proposal_tags:p.tags,cashback:p?.cashback??null,main_gate_id:p?.agentId,score:d.score??null,source:r,userEvent:!0,...v}}}],or:{sid:"-orruz0"}}),payload:(e,{payload:t})=>({...e,...t}),data:{category:"listing",label:"ticket",action:"showed"}});var Ha=a(5500),za=a(24036),qa=a(84082),Ua=a(99186),Ma=a(23446),Va=a(39018),Za=a(50196);const{matchPage:Ga,pages:Ka}=f.$.outputs,Xa=(e,t)=>{if(!e)return;const{type:a,iata:s}=e,r=a===Ha.A.Airport?t.airports[s].city_code:s;return t.cities[r]?.country},Qa=(0,r.createDomain)("gtm-analytic-search-started",{sid:"-pg4ek9"}),Wa=Qa.createEvent({sid:"i49ixu"}),Ya=Qa.createEvent({sid:"mhqyjb"}),Ja=Qa.createStore(null,{sid:"8mct9i"}).on(i.z.outputs.searchStartSourceChanged,((e,t)=>t)),es=(0,r.combine)({and:[{searchParams:n.s.outputs.$searchParams,direction:n.s.outputs.$direction,firstSegmentDirection:n.s.outputs.$firstSegmentDirection},({searchParams:e,direction:t,firstSegmentDirection:a})=>{if(!e)return null;const{tripType:s}=e,r=s===za.D.RoundTrip?a:t;return r.returnDate=(0,Za.k3)(Lt()([],"segments",e)),r}],or:{sid:"t0879n"}}),ts=Qa.createStore(null,{sid:"-fqv2s1"}),as=(0,r.combine)({and:[{searchParams:n.s.outputs.$searchParams,direction:es,geoIpCountry:qa.B.outputs.$geoIpCountry,language:Ua.l.outputs.$language,isLoggedIn:c.W.outputs.$userLoggedIn,directionCountries:ts},({searchParams:e,direction:t,geoIpCountry:a,language:s,isLoggedIn:r,directionCountries:i})=>{const n=t?.departDate?(0,Ma.x)("yyyy-MM-dd",t.departDate):void 0,o=t?.returnDate?(0,Ma.x)("yyyy-MM-dd",t.returnDate):void 0;return{origin:t?.origin?.iata,origin_country:i?.originCountry,destination:t?.destination?.iata,destination_country:i?.destinationCountry,depart_date:n,return_date:o,trip_class:e?.trip_class,market:e?.market,currency:e?.currency,ip_country:a,has_login:r?1:0,language:s,...e?.passengers}}],or:{sid:"9ro1se"}});(0,r.sample)({and:[{clock:l.E.outputs.searchMetaLoaded,target:[Wa,Ya]}],or:{sid:"iy4ik4"}}),(0,r.sample)({and:[{clock:Wa,source:es,fn:(e,{places:t})=>{if(!e)return{};const{origin:a,destination:s}=e;return{originCountry:Xa(a,t),destinationCountry:Xa(s,t)}},target:ts}],or:{sid:"j0vhix"}}),(0,r.sample)({and:[{clock:Ya,source:{source:Ja,isSerpPageOpen:Ga(Ka.SearchPage).$isOpen,defaultSearchPayload:as},fn:({source:e,isSerpPageOpen:t,defaultSearchPayload:a})=>({type:"search--started",search_type:t?"regular":"auto",search_source:e,...a}),target:Va.n.inputs.sendEvent}],or:{sid:"jyexpy"}});const ss={outputs:{$defaultSearchPayloadToGTM:as}};var rs=a(63308);(0,r.sample)({and:[{clock:i.z.outputs.bookingRedirectStarted,source:ss.outputs.$defaultSearchPayloadToGTM,fn:(e,{price:t,baggage:a,url:s})=>({type:"booking_redirect--started",...e,price:t,baggage:a,url:s}),target:Va.n.inputs.sendEvent}],or:{sid:"-pgq4ar"}}),(0,r.sample)({and:[{clock:rs.B.outputs.ticketBuyRedirected,source:ss.outputs.$defaultSearchPayloadToGTM,fn:(e,{data:t})=>{const{proposal:a}=t,s=a.worstBags?.[re.F.Baggage];return{type:"booking_redirect--started",...e,price:a.price,baggage:s&&s?.count>0?1:0,url:a.deeplink}},target:Va.n.inputs.sendEvent}],or:{sid:"-owxixr"}});var is=a(2503),ns=a(54236),os=a(37213),ls=a(77606),cs=a.n(ls);const ds=(e,t,a)=>{if(cs()(t))return null;const s=e.value*t[e.currency]/t[a];return Number(s.toFixed())},us=(0,r.combine)({and:[{locale:ns.z.outputs.$localeDeprecated,marker:os.b.outputs.$marker,auid:is.Y.outputs.$auid}],or:{sid:"-lzt25o"}}),ps=n.s.outputs.$searchParams.map((e=>({search_params:{segments:e?.segments.map((({origin:e,destination:t,date:a})=>({origin:e,destination:t,date:a}))),trip_class:e?.tripClass,passengers:e?.passengers},trip_type:e?.tripType})));(0,r.sample)({and:[{clock:i.z.outputs.searchStart,source:{userParams:us,searchParams:ps},fn:({userParams:e,searchParams:t})=>({type:"stoyan_start_search",...e,...t}),target:Va.n.inputs.sendEvent}],or:{sid:"-ukwq3n"}}),(0,r.sample)({and:[{clock:l.E.outputs.searchFinished,source:{userParams:us,searchParams:ps},fn:({userParams:e,searchParams:t})=>({type:"stoyan_search_finished",...e,...t}),target:Va.n.inputs.sendEvent}],or:{sid:"-u27pxd"}}),(0,r.sample)({and:[{clock:l.E.outputs.resultChunksLoaded,source:{userParams:us,searchParams:ps,currencyRates:ta.y.outputs.$currencyRates,currency:ta.y.outputs.$currency},fn:({userParams:e,searchParams:t,currencyRates:a,currency:s},[r])=>{const i=r.cheapest_ticket?.proposals?.[0]?.price.value;return{type:"stoyan_update_tickets",...e,...t,cheapest_ticket_price_rub:i?ds({value:i,currency:s},a,"rub"):null}},target:Va.n.inputs.sendEvent}],or:{sid:"-tjipr3"}}),(0,r.sample)({and:[{clock:i.z.outputs.bookingRedirectStarted,source:{userParams:us,searchParams:ps,currencyRates:ta.y.outputs.$currencyRates,currency:ta.y.outputs.$currency},fn:({userParams:e,searchParams:t,currencyRates:a,currency:s},{price:r,carriers:i,agentId:n,agentLabel:o})=>({type:"stoyan_price_click",...e,...t,price_rub:ds({value:r,currency:s},a,"rub"),price_usd:ds({value:r,currency:s},a,"usd"),first_operating_carrier:i[0],gate_id:n,gate_label:o}),target:Va.n.inputs.sendEvent}],or:{sid:"-s4xn5v"}}),(0,r.sample)({and:[{clock:rs.B.outputs.ticketBuyRedirected,source:{userParams:us,searchParams:ps,currencyRates:ta.y.outputs.$currencyRates,currency:ta.y.outputs.$currency,ticketCollection:L.o.outputs.$ticketCollection},fn:({ticketCollection:e,userParams:t,searchParams:a,currencyRates:s,currency:r},{data:i})=>{const{proposal:{price:n,agentId:o,agentLabel:l},ticketSign:c}=i,d=e?.[c];return{type:"stoyan_price_click",...t,...a,price_rub:ds({value:n,currency:r},s,"rub"),price_usd:ds({value:n,currency:r},s,"usd"),first_operating_carrier:d?.carriers[0],gate_id:o,gate_label:l}},target:Va.n.inputs.sendEvent}],or:{sid:"2jcw5z"}});var gs=a(68557),ms=a(69195);const{serpAnalyticsReporter:hs}=S.outputs;hs({clock:(0,r.sample)({and:[{clock:gs.d.outputs.fetchBletQuery.start,source:{request_id:gs.d.outputs.$requestId,ticket_signature:gs.d.outputs.$ticketSignature,is_search_finished:ke.N.outputs.$isSearchFinished,source:ms.r.outputs.$openTicketSource}}],or:{sid:"eh03e8"}}),payload:(e,{payload:t})=>({...t,...e}),data:{category:"ticket",label:"blet",action:"requested"}});const fs=e=>{if(!e)return null;const[t,a]=[e.downsell,e.upsell].map((e=>e?{delta_price:{currency_code:e.deltaPrice.currencyCode,value:e.deltaPrice.value},available:e.available,is_from_config:e.isFromConfig,penalty:e.penalty?{currency_code:e.penalty.currencyCode,value:e.penalty.value}:null}:null));return{downsell:t,upsell:a}},_s=e=>{if(!e)return null;const[t,a]=[e.downsell,e.upsell].map((e=>e?{delta_price:{currency_code:e.deltaPrice.currencyCode,value:e.deltaPrice.value},count:e.count,height:e.height,length:e.length,sum_dimension:e.sumDimension,total_weight:e.totalWeight,weight:e.weight,width:e.width,isLargeHandbags:e.isLargeHandbags}:null));return{downsell:t,upsell:a}},{serpAnalyticsReporter:ys}=S.outputs;ys({clock:(0,r.sample)({and:[{clock:gs.d.outputs.chunksLoaded,source:{request_id:gs.d.outputs.$requestId,ticket_signature:gs.d.outputs.$ticketSignature,is_search_finished:ke.N.outputs.$isSearchFinished,source:ms.r.outputs.$openTicketSource},fn:(e,t)=>{if(!t.data.search?.ticket)return e;const{fareChangeUpsellOptions:a,fareReturnUpsellOptions:s,fareBaggageUpsellOptions:r,fareHandbagsUpsellOptions:i}=t.data.search.ticket;return{...e,fare_change_upsell_options:fs(a),fare_return_upsell_options:fs(s),fare_baggage_upsell_options:_s(r),fare_handbags_upsell_options:_s(i)}}}],or:{sid:"-tq7ixb"}}),payload:(e,{payload:t})=>({...t,...e}),data:{category:"ticket",label:"blet",action:"responded"}});var ks=a(4449);const{serpAnalyticsReporter:vs}=S.outputs;vs({clock:(0,r.sample)({and:[{clock:ks.X.outputs.searchFailed,source:{request_id:gs.d.outputs.$requestId,ticket_signature:gs.d.outputs.$ticketSignature,is_search_finished:ke.N.outputs.$isSearchFinished,source:ms.r.outputs.$openTicketSource},fn:(e,{status:t,type:a,message:s})=>({...e,error_type:a,status_code:t,message:s})}],or:{sid:"-hbh5jr"}}),payload:(e,{payload:t})=>({...t,...e}),data:{category:"ticket",label:"blet",action:"failed"}});const{serpAnalyticsReporter:bs}=S.outputs;bs({clock:(0,r.sample)({and:[{clock:ks.X.outputs.fetchBletQuery.aborted,source:{request_id:gs.d.outputs.$requestId,ticket_signature:gs.d.outputs.$ticketSignature,is_search_finished:ke.N.outputs.$isSearchFinished}}],or:{sid:"e9pms0"}}),payload:(e,{payload:t})=>({...t,...e}),data:{category:"ticket",label:"blet",action:"cancelled"}});var xs=a(76830),Cs=a(74169);const{serpAnalyticsReporter:Ss}=S.outputs,ws=(0,r.createDomain)("analytic-ticket-drawer--showed",{sid:"2i806l"}),$s=ws.createEvent({sid:"-dic7d7"}),js=ws.createStore(!1,{sid:"55vgly"}).on($s,(()=>!0)).reset([i.z.outputs.ticketPopupOpen,i.z.outputs.ticketPopupClosed,i.z.outputs.resetSearchResultsPage]);Ss({clock:(0,r.sample)({and:[{clock:$s,source:{requestId:ks.X.outputs.$requestId,ticketSignature:ks.X.outputs.$ticketSignature,drawerProposals:Cs.j.outputs.$drawerProposals,allProposalsLength:Cs.j.outputs.$allProposalsLength},fn:({requestId:e,ticketSignature:t,drawerProposals:a,allProposalsLength:s})=>{const r=a[0];return{ticket_signature:t,request_id:e,gate_ids:a.map((e=>e.agentId)),prices:a.map((e=>e.price)),currency:r.currency,total_proposals:s,has_aviasales_ota:void 0}}}],or:{sid:"-xglk03"}}),payload:(e,{payload:t})=>({...t,...e}),data:{category:"ticket",label:"drawer",action:"showed"}}),(0,r.sample)({and:[{clock:(0,r.withFactory)({sid:"-vjbh8l",fn:()=>(0,xs.D)({source:Cs.j.inputs.isDrawerInViewPortChanged,timeout:1e3,name:"debounce: serp drawer in view port"})}),source:{analyticsSent:js,isLoading:ks.X.outputs.$isLoading,isStickyDrawer:Cs.j.outputs.$isStickyDrawer},filter:({isLoading:e,isStickyDrawer:t,analyticsSent:a},s)=>!a&&s&&!e&&!t,target:$s}],or:{sid:"-ej1m0b"}}),(0,r.sample)({and:[{clock:(0,r.withFactory)({sid:"-unfetn",fn:()=>(0,xs.D)({source:Cs.j.inputs.isStickyDrawerChanged,timeout:1e3,name:"debounce: serp sticky drawer"})}),source:{analyticsSent:js,isLoading:ks.X.outputs.$isLoading,isDrawerInViewPort:Cs.j.outputs.$isDrawerInViewPort},filter:({isLoading:e,analyticsSent:t,isDrawerInViewPort:a},s)=>!t&&a&&!e&&!s,target:$s}],or:{sid:"-dn5jld"}}),(0,r.sample)({and:[{clock:ks.X.outputs.chunksLoaded,source:{analyticsSent:js,inView:Cs.j.outputs.$isDrawerInViewPort,isStickyDrawer:Cs.j.outputs.$isStickyDrawer},filter:({inView:e,analyticsSent:t,isStickyDrawer:a})=>!t&&e&&!a,target:$s}],or:{sid:"-d2t5n0"}});var Is=a(42016);const{serpAnalyticsReporter:Ns}=S.outputs;Ns({clock:(0,r.sample)({and:[{clock:Is._.inputs.bletProposalModalOpened,source:{ticketSign:ms.r.outputs.$ticketSign,hasBaggage:ms.r.outputs.$hasBaggage,proposals:Is._.outputs.$proposals,isSearchFinished:ke.N.outputs.$isSearchFinished},fn:({ticketSign:e,hasBaggage:t,proposals:a,isSearchFinished:s},{source:r})=>{const i=a?.map((e=>e.price)),n=[...i||[]].sort();return{source:r,ticket_signature:e,baggage_state:t,gate_ids:a?.map((e=>e.agentId)),total_proposals:a?.length,is_search_finished:s,proposals_prices:i,min_price:n[0],second_min_price:n[1]}}}],or:{sid:"zfahsg"}}),payload:(e,{payload:t})=>({...t,...e}),data:{category:"ticket",label:"proposals_info",action:"showed"}});var Fs=a(4588),Bs=a.n(Fs),Es=a(81833),Ps=a(26821);const{serpAnalyticsReporter:Ts}=S.outputs;Ts({clock:(0,r.sample)({and:[{clock:Es.m.internals.analyticsSent,source:{ticketSign:ms.r.outputs.$ticketSign,flightInfo:Es.m.outputs.$flightInfo,flight:Es.m.outputs.$flight,marketingCarrier:Es.m.outputs.$marketingCarrier},fn:({ticketSign:e,flightInfo:t,marketingCarrier:a,flight:s})=>{const r=Bs()(["exists","paid","alcoholic_paid","nonalcoholic_paid"]),{seat:i,amenities:n,stats:o,aircraftsFrequencies:l}=t||{},c={pitch:i?.pitch,width:i?.width,row_layout:n?.layout?.rowLayout};return{food:r(n?.food),wifi:r(n?.wifi),beverage:r(n?.beverage),entertainment:r(n?.entertainment),power:r(n?.power),seat:c,stats:o,aircraftsFrequencies:l,ticket_signature:e,source:"ticket_info",carrier:a?.carrier,flight_number:a?.number,equipment_code:s?.equipment,origin:s?.departureAirportIata,destination:s?.arrivalAirportIata}}}],or:{sid:"-3femx8"}}),payload:(e,{payload:t})=>({...t,...e}),data:{category:"ticket",label:"flight_info",action:"showed"}}),Ts({clock:(0,r.sample)({and:[{clock:Ps.z.inputs.flightInfoModalOpened,source:{ticket:ms.r.outputs.$ticket},filter:ms.r.outputs.$ticket.map(Boolean)&&(0,r.withFactory)({sid:"-o0v29x",fn:()=>(0,R.f)(ke.N.outputs.$isSearchExpired)}),fn:({ticket:e},{segmentIndex:t,flightIndex:a})=>{const{segments:s,sign:r}=e,i=s?.[t]?.flights?.[a];return i?{ticket_signature:r,source:"ticket_info",carrier:i.operatingCarrier,flight_number:i.number,equipment_code:i.equipment,origin:i.departureAirportIata,destination:i.arrivalAirportIata}:{ticket_signature:r,source:"ticket_info"}}}],or:{sid:"-10j566"}}),payload:(e,{payload:t})=>({...t,...e}),data:{category:"ticket",label:"flight_info",action:"showed"}});var Ds=a(89677);const{serpAnalyticsReporter:Rs}=S.outputs,As=e=>null===e?null:{value:e.value,currency_code:e.currencyCode},Ls=e=>null===e?null:{count:e.count,height:e.height,length:e.length,sum_dimension:e.sumDimension,total_weight:e.totalWeight,weight:e.weight,width:e.width},Os=e=>null===e?null:{available:e.available,is_from_config:e.isFromConfig,penalty:As(e.penalty)};Rs({clock:(0,r.sample)({and:[{clock:Ds.K.inputs.changeFareButtonClicked,source:{ticketSign:ms.r.outputs.$ticketSign,fares:Ds.K.outputs.$fares},fn:({ticketSign:e,fares:t})=>({ticket_signature:e,fares:t.map((({price:e,proposal:t,deltaPrice:a,isCurrent:s})=>{const{minimumFare:r}=t,i={value:e.value,currency_code:e.currency};return{fare_baggage:Ls(r.baggage),fare_handbags:Ls(r.handbags),is_selected:s,fare_return:Os(r.returnBeforeFlight),fare_change:Os(r.changeBeforeFlight),delta_price:As(a),price:i}}))})}],or:{sid:"l0koa6"}}),payload:(e,{payload:t})=>({...t,...e}),data:{category:"ticket",label:"fare_info",action:"showed"}});var Hs=a(72655);const{serpAnalyticsReporter:zs}=S.outputs,qs={[Hs.R.Proposal]:"proposal",[Hs.R.DrawerWidget]:"drawer_widget",[Hs.R.StickyDrawer]:"sticky_drawer"};zs({clock:(0,r.sample)({and:[{clock:rs.B.outputs.ticketBuyRedirected,source:{isSearchExpired:ke.N.outputs.$isSearchExpired,isSearchFinished:ke.N.outputs.$isSearchFinished,ticketCollection:L.o.outputs.$ticketCollection},fn:({isSearchExpired:e,isSearchFinished:t,ticketCollection:a},{data:s})=>{const{eventType:r,ticketSign:i,proposal:n,deviceClickId:o,proposalPosition:l,zone:c}=s,d=a?.[i],u=n.acceptedCards?.map((({system:e,region:t})=>`${t}_${e}`));return{source:qs[r],ticket_signature:i,proposal_productivity:n.debugInfo?.productivity,proposal_multiplier:n.debugInfo?.multiplier,gate_id:n.agentId,device_click_id:o,fare_baggage:n.minimumFare.baggage,fare_handbags:n.minimumFare.handbags,fare_change:n.minimumFare.changeBeforeFlight,fare_return:n.minimumFare.returnBeforeFlight,proposal_weight:n.weight,unified_price:n.unifiedPrice,is_search_finished:t,is_search_expired:e,cashback:n.cashback,proposal_position:l,baggage_option:n.worstBags?.[re.F.Baggage],proposal_payment_options:u,ticket_position:d?.position,main_badge:d?.badges?.[0]?.type,zone:c}}}],or:{sid:"ojkufh"}}),payload:(e,{payload:t})=>({...t,...e}),data:{category:"search",label:"booking_redirect",action:"started"}});var Us=a(27114);const{serpAnalyticsReporter:Ms}=S.outputs;Ms({clock:(0,r.sample)({and:[{clock:Us.t.inputs.ticketHeadClicked,source:{ticketSign:ms.r.outputs.$ticketSign,requestId:gs.d.outputs.$requestId},fn:({ticketSign:e,requestId:t},{zone:a})=>({zone:a,ticket_signature:e,request_id:t})}],or:{sid:"-ehouhu"}}),payload:(e,{payload:t})=>({...t,...e}),data:{category:"ticket",label:"ticket_header",action:"clicked"}});const{serpAnalyticsReporter:Vs}=S.outputs;Vs({clock:(0,r.sample)({and:[{clock:Ps.z.internals.fetchBletFlightInfoQuery.aborted,source:{request_id:Ps.z.outputs.$requestId,ticket_signature:gs.d.outputs.$ticketSignature,is_search_finished:ke.N.outputs.$isSearchFinished}}],or:{sid:"-e90ai8"}}),payload:(e,{payload:t})=>({...t,...e}),data:{category:"ticket",label:"flight_info_blet",action:"cancelled"}});const{serpAnalyticsReporter:Zs}=S.outputs;Zs({clock:(0,r.sample)({and:[{clock:Ps.z.internals.fetchBletFlightInfoQuery.start,source:{request_id:Ps.z.outputs.$requestId,ticket_signature:gs.d.outputs.$ticketSignature,is_search_finished:ke.N.outputs.$isSearchFinished}}],or:{sid:"-j2tlhs"}}),payload:(e,{payload:t})=>({...t,...e}),data:{category:"ticket",label:"flight_info_blet",action:"requested"}});const{serpAnalyticsReporter:Gs}=S.outputs;Gs({clock:(0,r.sample)({and:[{clock:Ps.z.internals.fetchBletFlightInfoQuery.finished.success,source:{request_id:Ps.z.outputs.$requestId,ticket_signature:gs.d.outputs.$ticketSignature,is_search_finished:ke.N.outputs.$isSearchFinished},filter:(e,{result:t})=>Boolean(t.data.search||t.data.flightInfo)}],or:{sid:"vozlio"}}),payload:(e,{payload:t})=>({...t,...e}),data:{category:"ticket",label:"flight_info_blet",action:"responded"}});const{serpAnalyticsReporter:Ks}=S.outputs;Ks({clock:(0,r.sample)({and:[{clock:Ps.z.outputs.searchFailed,source:{request_id:Ps.z.outputs.$requestId,ticket_signature:gs.d.outputs.$ticketSignature,is_search_finished:ke.N.outputs.$isSearchFinished},fn:(e,{status:t,errors:a})=>({...e,errors:a.map((({type:e,message:t})=>({error_type:e,message:t}))),status_code:t})}],or:{sid:"v1yb0"}}),payload:(e,{payload:t})=>({...t,...e}),data:{category:"ticket",label:"flight_info_blet",action:"failed"}});var Xs=a(76918);let Qs;!function(e){e.Popup="popup",e.StickyBanner="sticky_banner"}(Qs||(Qs={}));const{serpAnalyticsReporter:Ws}=S.outputs,Ys=(0,r.createEvent)({sid:"yf3ozx"});Ws({clock:Ys,data:{service:p.t6.Serp,category:"feature",label:"app_redirect",action:"showed"},payload:(e,{payload:t})=>({...e,...t})}),(0,r.sample)({and:[{clock:Xs.S.inputs.showBanner,fn:()=>({view:Qs.Popup}),target:Ys}],or:{sid:"runolw"}});const{serpAnalyticsReporter:Js}=S.outputs,er=(0,r.createEvent)({sid:"n21td9"});Js({clock:er,data:{service:p.t6.Serp,category:"feature",label:"app_redirect",action:"clicked"},payload:(e,{payload:t})=>({...e,...t})}),(0,r.sample)({and:[{clock:Xs.S.inputs.downloadButtonClicked,fn:()=>({view:Qs.Popup}),target:er}],or:{sid:"-ttpvm4"}}),(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp/services/analytics/index.ts",api:{}}),a(90722),a(30185);const tr=()=>null},69067:function(e,t,a){"use strict";a.d(t,{H:function(){return $}});var s=a(47166),r=a.n(s),i=a(15126),n=a(98116),o=a(51717),l=a(85349),c=a(28258),d=a(38352);const u=(0,n.createEvent)({sid:"845nqt"}),{$returnDate:p}=d.s.outputs,g=(0,n.createStore)({},{sid:"mi44qo"}),{$tripClass:m,$passengers:h}=(0,n.withFactory)({sid:"-8xbo78",fn:()=>(0,o.X)({source:d.s.outputs.$searchParams,shape:{$tripClass:e=>e?.tripClass??null,$passengers:e=>e?.passengers??null}})}),{$origin:f,$destination:_,$departDate:y}=(0,n.withFactory)({sid:"-54yoa4",fn:()=>(0,o.X)({source:d.s.outputs.$firstSegmentDirection,shape:{$origin:e=>e?.origin??null,$destination:e=>e?.destination??null,$departDate:e=>e?.departDate??null}})}),k=(0,n.combine)({and:[{tripDirection:d.s.outputs.$tripDirection,tripClass:m,passengers:h,origin:f,destination:_,departDate:y,returnDate:p},e=>e],or:{sid:"-9le4ke"}}),v=i.H.inputs.createAdverisementModel(k);(0,n.sample)({and:[{clock:c.E.inputs.startSearch,target:v.inputs.slotsReset}],or:{sid:"-1xqiiq"}}),(0,n.withFactory)({sid:"-1jfv3c",fn:()=>(0,l.m)({clock:c.E.inputs.startSearch,target:g})}),(0,n.sample)({and:[{clock:v.outputs.adLoaded,source:{bannerParamsByPlacement:g},fn:({bannerParamsByPlacement:e},{placement:t,bannerId:a,campaignId:s,placeId:r})=>({...e,[t]:{bannerId:a,campaignId:s,placeId:r}}),target:g}],or:{sid:"-1gow4j"}});const b={...v.inputs,adClosed:u},x={...v.outputs,adClosed:u,$bannerParamsByPlacement:g};var C=a(85893);const S=i.H.inputs.createAdverisementContainer({model:v}),w=r().bind({root_placement_bottom:"s__pFNh1bGdFozxH1HzAPwG"}),$={inputs:b,outputs:x,containers:{AdvertisementContainer:({placementId:e})=>{const t=w(`root_placement_${e}`);return(0,C.jsx)(S,{className:t,placementId:e})}}}},94307:function(e,t,a){"use strict";a.d(t,{P:function(){return _}});var s=a(98116),r=a(23588),i=a(85349),n=a(63059);const o=(0,s.createStore)(1,{sid:"qr70vm"}),l=(0,s.createStore)(10,{sid:"j760tm"}),c=(0,s.createEvent)({sid:"-v0nhau"}),d=(0,s.createEvent)({sid:"4d3clz"}),u=(0,s.combine)({and:[{page:o,pageSize:l,meta:n.m.outputs.$meta},({page:e,pageSize:t,meta:a})=>{if(!a)return 0;const s=e*t;return Math.max(0,a.filteredTicketsCount-s)}],or:{sid:"-1es8mk"}});(0,s.sample)({and:[{clock:c,target:o}],or:{sid:"-2wij79"}}),(0,s.withFactory)({sid:"-2i7vrv",fn:()=>(0,i.m)({clock:d,target:o})});const p={pageChanged:c,pageReset:d},g={pageChanged:c,$page:o,$pageSize:l,$hiddenTicketsCount:u};(0,s.sample)({and:[{source:r.z.outputs.changeSearchResultsPage,fn:({page:e})=>e,target:p.pageChanged}],or:{sid:"-xaw8bz"}}),(0,s.sample)({and:[{source:r.z.outputs.resetSearchResultsPage,target:p.pageReset}],or:{sid:"ucps2y"}});var m=a(28258),h=a(31401),f=a(27497);(0,s.sample)({and:[{clock:g.pageChanged,source:{page:g.$page,pageSize:g.$pageSize},fn:({page:e,pageSize:t})=>e*t,target:m.E.inputs.updateLimit}],or:{sid:"ucdlwh"}}),(0,s.sample)({and:[{clock:g.pageChanged,target:m.E.inputs.continueSearch}],or:{sid:"do8ste"}}),(0,s.sample)({and:[{clock:g.pageChanged,fn:()=>({status:h.lm.Pending,source:"page"}),target:f.N.inputs.searchContinueStatusChanged}],or:{sid:"e2jg8s"}});const _={inputs:p,outputs:g}},63059:function(e,t,a){"use strict";a.d(t,{m:function(){return d}});var s=a(98116),r=a(28258);const i=(0,s.createDomain)("results_meta",{sid:"g0stm2"}),n=i.createEvent({sid:"-c6d7lx"}),o=i.createStore(null,{sid:"-12j248"});(0,s.sample)({and:[{clock:n,target:o}],or:{sid:"-kqp46r"}});const l={metaUpdated:n},c={$meta:o};(0,s.sample)({and:[{clock:r.E.outputs.resultChunksLoaded,fn:([e])=>{return{filteredTicketsCount:(t=e).meta.filtered_tickets_count,totalTicketsCount:t.meta.total_tickets_count,directTicketsCount:t.meta.direct_tickets_count};var t},target:l.metaUpdated}],or:{sid:"-1fptz4"}});const d={inputs:l,outputs:c}},38130:function(e,t,a){"use strict";a.d(t,{e:function(){return ee}});var s=a(30091),r=a(98116),i=a(27636),n=a(38387),o=a(38352),l=a(4517),c=a(5016),d=a(33345);const u="saved_filters",{$firstSegmentHash:p,$segmentsHash:g,$tripDirection:m}=o.s.outputs,{$isDesktop:h}=n.l.outputs,{$initialSortingOrder:f}=c.j.outputs,_=(0,r.createEvent)({sid:"-3wbdcc"}),y=(0,r.createEvent)({sid:"hq4er7"}),k=(0,r.createStore)({},{sid:"-jptnfl"}).on(y,((e,t)=>({...e,...t}))),v=(0,r.createStore)(null,{sid:"-zhcoip"}).reset(g.updates);(0,r.sample)({and:[{clock:[g,y],source:{filtersStorage:k,segmentsHash:g,firstSegmentHash:p,tripDirection:m,initialSortingOrder:f,isDesktop:h},filter:d.ed,fn:d.CG,target:v}],or:{sid:"ytbynw"}});const b=l.r.outputs.$savedFiltersFlag.map((({enabled:e})=>e)),[x,C]=(0,r.withFactory)({sid:"1gdiim",fn:()=>(0,i.K)(l.r.outputs.$savedFiltersFlag.map((({maxSessionDuration:e=1440})=>60*e*1e3)))}),S=(0,r.createEffect)((e=>d._4.setItem(u,JSON.stringify(e))),{sid:"-rlkwjq"}),w=(0,r.createEffect)((()=>{const e=d._4.getItem(u);if(!e)return d._4.setItem(u,JSON.stringify({})),{};try{return JSON.parse(e)}catch(e){return{}}}),{sid:"-9cn6z8"});(0,r.sample)({and:[{clock:k,target:S}],or:{sid:"q737yr"}}),(0,r.sample)({and:[{clock:_,target:w}],or:{sid:"qbhkpn"}}),(0,r.sample)({and:[{clock:w.doneData,source:x,fn:d.Nv,target:k}],or:{sid:"qrflx4"}});const $={writeFiltersToStorage:y},j={$isSavedFiltersEnabled:b,$filtersForCurrentDirection:v,$savedFilters:k,$savedFiltersLifetime:x},I={start:_};var N=a(4190),F=a(28225),B=a(49963),E=a(44619),P=a(16375),T=a(1156),D=a(39535),R=a(27497),A=a(28258),L=a(33531),O=a(31401);const{filtersRelaxedByUser:H,filtersChangedByUser:z}=c.j.inputs,{savedFiltersApplied:q}=L.h.inputs,{startSearch:U}=A.E.inputs,M=(0,r.createEvent)({sid:"-p9hujl"}),V=(0,r.createStore)(!1,{sid:"-ju0aim"});(0,r.sample)({and:[{clock:q,fn:()=>!0,target:V}],or:{sid:"1drzuc"}}),(0,r.sample)({and:[{clock:[U,z,M],fn:()=>!1,target:V}],or:{sid:"1h2rei"}}),(0,r.sample)({and:[{clock:M,fn:()=>O.IK.SavedFiltersWidget,target:H}],or:{sid:"1vx7f9"}});const Z={$isInformerShown:V,resetFilters:M};var G={root:"s__wPEFsVyV_DgCEJn0_7Yz",footer:"s__nLpQhqT6C7lnSbxV9oVv",emoji:"s__LXvb5xuMzo3s0t3K4gd9"},K=a(85893);const X={SavedFiltersInformerContainer:()=>{const{t:e}=(0,F.useTranslation)("service_saved_filters"),{resetFiltersEvent:t,isInformerShown:a,isSearchExpired:s}=(0,N.useUnit)({resetFiltersEvent:Z.resetFilters,isInformerShown:Z.$isInformerShown,isSearchExpired:R.N.outputs.$isSearchExpired});return!a||s?null:(0,K.jsxs)("div",{className:G.root,"data-test-id":"saved-filters-informer-container",children:[(0,K.jsx)(B.x,{type:E.y.Body3Regular,children:e("filtersAppliedText")}),(0,K.jsxs)("div",{className:G.footer,children:[(0,K.jsx)(T.z,{inline:!0,"data-test-id":"saved-filters-informer-button",size:D.qE.S,priority:D.Ji.Secondary,onClick:t,children:(0,K.jsx)(B.x,{className:G.button,type:E.y.Body2Semi,children:e("resetButtonText")})}),(0,K.jsx)(P.m,{className:G.emoji,width:64,height:64})]})]})}};var Q=a(29260),W=a(78260);const Y=(0,r.createStore)(null,{sid:"58bqms"}).on(A.E.outputs.searchMetaLoaded,((e,{search_id:t})=>t)),J=(0,r.createEffect)((e=>{W.Yd.setContextValue("search_id",e)}),{sid:"-2sgrke"});(0,r.sample)({and:[{clock:(0,r.withFactory)({sid:"4lwdvg",fn:()=>(0,Q.m)([(0,r.sample)({and:[{clock:[c.j.inputs.filtersChangedByUser,c.j.inputs.filtersRelaxedByUser,c.j.inputs.sortingChangedByUser,c.j.inputs.sortingRelaxedByUser,c.j.inputs.filtersChangedAndSortingRelaxedByUser],filter:j.$isSavedFiltersEnabled}],or:{sid:"-a9z654"}}),A.E.outputs.resultChunksLoaded])}),source:{filtersState:c.j.outputs.$filtersState,filtersBoundaries:c.j.outputs.$filtersBoundaries,sortingOrder:c.j.outputs.$sortingOrder,segmentsHash:o.s.outputs.$segmentsHash,searchParams:o.s.outputs.$searchParams,tripDirection:o.s.outputs.$tripDirection,searchId:Y},filter:d.Qs,fn:d.ik,target:$.writeFiltersToStorage}],or:{sid:"-kj477y"}}),(0,r.sample)({and:[{clock:(0,r.sample)({and:[{clock:A.E.inputs.startSearch,filter:j.$isSavedFiltersEnabled}],or:{sid:"61l1ne"}}),source:{filtersForCurrentDirection:j.$filtersForCurrentDirection,firstSegmentHash:o.s.outputs.$firstSegmentHash},filter:({filtersForCurrentDirection:e})=>(0,d.GB)(e),fn:({filtersForCurrentDirection:e,firstSegmentHash:t})=>({filters:e?.filtersState||{},firstSegmentHash:t}),target:L.h.inputs.savedFiltersApplied}],or:{sid:"-j3fjg0"}}),(0,r.sample)({and:[{clock:(0,r.sample)({and:[{clock:A.E.outputs.searchMetaLoaded,filter:j.$isSavedFiltersEnabled}],or:{sid:"708315"}}),source:j.$filtersForCurrentDirection,filter:d.RE,fn:({sort:e})=>e,target:c.j.inputs.savedSortingApplied}],or:{sid:"-i4si29"}}),(0,r.sample)({and:[{clock:Y,target:J}],or:{sid:"-hljpam"}});const ee=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp_results/services/saved_filters/index.ts",api:{inputs:$,outputs:j,containers:X},lifecycle:{start:I.start}})},33345:function(e,t,a){"use strict";a.d(t,{CG:function(){return de},GB:function(){return J},ed:function(){return ae},Qs:function(){return te},RE:function(){return ee},ik:function(){return V},Nv:function(){return Z},_4:function(){return pe}});var s=a(69937),r=a.n(s),i=a(74423),n=a.n(i),o=a(89935),l=a.n(o),c=a(29893),d=a.n(c),u=a(2982),p=a.n(u),g=a(77606),m=a.n(g),h=a(37453),f=a.n(h),_=a(59051),y=a.n(_),k=a(27183),v=a.n(k),b=a(46898),x=a.n(b),C=a(88846),S=a.n(C),w=a(26094),$=a.n(w),j=a(76262),I=a.n(j),N=(a(3945),a(40104)),F=a.n(N),B=a(5500),E=a(31656);const P=e=>x()(f(),S()((([e,t])=>{const a=v()([],"selectedDates",t);return m()(a)?[e,I()("selectedDates",t)]:[e,t]})),p())(e),T=l()(((e,t)=>x()(f(),S()((([t,a])=>{const[s,r]=v()([],"departure",a),i=v()(null,["departureArrivalTime",t,"departure_time","min"],e),n=v()(null,["departureArrivalTime",t,"departure_time","max"],e);return y()(s)&&y()(r)||i===s&&n===r?[t,I()("departure",a)]:[t,a]})),p())(t))),D=l()(((e,t)=>x()(f(),S()((([t,a])=>{const[s,r]=v()([null,null],"arrival",a),i=v()(null,["departureArrivalTime",t,"arrival_time","min"],e),n=v()(null,["departureArrivalTime",t,"arrival_time","max"],e);return y()(s)&&y()(r)||i===s&&n===r?[t,I()("arrival",a)]:[t,a]})),p())(t))),R=l()(((e,t)=>{const a=x()((e=>v()({},"departureArrivalTime",e)),P,T(e),D(e),d()(m()))(t);return m()(a)?I()("departureArrivalTime",t):{...t,departureArrivalTime:a}})),A=e=>{const t=["withoutVirtualInterline","withoutShortLayover","withoutAirportChange","withoutVisa","withoutNightTransfers","withoutCovidRestrictions","withoutLowcosts","withoutInterlines","baggage"].filter((t=>!0!==n()(t,e)));return I()(t,e)},L=e=>{const t=["airports","alliances","airlines","agents","paymentMethods","transfersAirports","transfersCount","sameDepartureArrivalAirports"].filter((t=>m()(n()(t,e))));return I()(t,e)},O=l()(((e,t)=>{const a=n()(["transfersDuration","min"],e),s=n()(["transfersDuration","max"],e),i=x()([n()(["transfersDuration","value"]),r()])(t),o=n()(["transfersDuration","value",1],t);return void 0!==a&&void 0!==s&&i===a&&o===s?I()("transfersDuration",t):t})),H=l()(((e,t)=>t?.price?.value===e?.price?.max?I()("price",t):t)),z=l()(((e,t)=>t?.tripDuration===e?.tripDuration?.max?I()("tripDuration",t):t)),q=l()(((e,t)=>x()(A,L,O(e),H(e),z(e),R(e))(t))),U=/([A-Z]+-[A-Z]+)/g,M=l()(((e,t)=>E.D.toDto(t,e))),V=({filtersState:e,filtersBoundaries:t,sortingOrder:a,segmentsHash:s,searchParams:r,searchId:i})=>{const n=x()(I()(["pinFlightSignatures"]),q(t),M(t))(e),o=(e=>x()([v()([],["segments"]),S()((({origin_type:e,destination_type:t})=>e===B.A.Airport||t===B.A.Airport)),$()(!0)])(e))(r),l=s.match(U)||[];return x()(F()(Boolean),f(),S()((([e,t])=>{const s=(r=n.segments?.[e]||{},I()(["arrival_date"],r));var r;if(!m()(s)){const e={...I()(["segments"],n),segments:{0:s}};return[t,{searchId:i,searchParamsHash:t,filtersAppliedTime:Date.now(),filtersState:e,sort:a,searchByAirport:o}]}const l=I()(["segments"],n);return[t,{searchId:i,searchParamsHash:t,filtersAppliedTime:Date.now(),filtersState:l,sort:a,searchByAirport:o}]})),p())(l)},Z=(e,t)=>{const a=Date.now();return x()(f(),F()((([,t])=>a-t.filtersAppliedTime<e)),p())(t)};var G=a(11560),K=a.n(G),X=a(24036),Q=(a(26699),a(5016));const{INITIAL_SORTING:W,INITIAL_SORTING_IN_RESULTS:Y}=Q.j.constants,J=e=>!!e&&!m()(e.filtersState),ee=e=>!!e&&![W,Y].includes(e.sort),te=e=>Boolean(e.segmentsHash)&&Boolean(e.searchId)&&Boolean(e.searchParams)&&[X.D.OneWay,X.D.RoundTrip].includes(e.tripDirection),ae=e=>Boolean(e.segmentsHash)&&[X.D.OneWay,X.D.RoundTrip].includes(e.tripDirection),se=e=>e.split("-").reverse().join("-"),re=e=>v()({},"filtersState.segments.0",e),ie=e=>{const t=(new Map).set("airports_arrival","airports_departure").set("airports_departure","airports_arrival");return x()(re,K()((e=>t.has(e)?t.get(e):e)))(e)};function ne(e,t){return e?t[e]??null:null}const oe=l()((({filtersStorage:e,firstSegmentHash:t,tripDirection:a},s)=>{if(!s)return null;const r=ne(t,e),i=ne(se(t),e),n=r?.searchParamsHash===s.searchParamsHash,o=i?.searchParamsHash===s.searchParamsHash;if(a===X.D.OneWay?n:n||o)return s;const l=I()(["segments"],s.filtersState);return{...s,filtersState:l}})),le=l()((({filtersStorage:e,firstSegmentHash:t,tripDirection:a},s)=>{if(!s)return null;if(a!==X.D.RoundTrip)return s;const r=ne(t,e),i=ne(se(t),e),n=r?.filtersState.segments||i?.filtersState.segments,o=s.searchParamsHash===r?.searchParamsHash,l=s.searchParamsHash===i?.searchParamsHash;return o&&n?{...s,filtersState:{...s.filtersState,segments:{0:re(r),1:re(i)}}}:l&&n?{...s,filtersState:{...s.filtersState,segments:{0:ie(r),1:ie(i)}}}:s})),ce=({filtersStorage:e,firstSegmentHash:t,tripDirection:a})=>{if(a===X.D.Multiway)return null;const s=ne(t,e),r=ne(se(t),e);if(a===X.D.OneWay){if(J(s))return s;if(J(r))return r}if(a===X.D.RoundTrip){if(J(s)&&J(r))return s.filtersAppliedTime>r.filtersAppliedTime?s:r;if(!J(s)&&J(r))return r;if(J(s)&&!J(r))return s}return null},de=e=>x()([ce,le(e),oe(e)])(e),ue=(()=>{const e="_test_session_storage_access_";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}})(),pe={setItem:(e,t)=>ue?window.localStorage.setItem(e,t):null,getItem:e=>ue?window.localStorage.getItem(e):null,removeItem:e=>ue?window.localStorage.removeItem(e):null}},30185:function(e,t,a){"use strict";a.d(t,{n:function(){return D}});var s=a(30091),r=a(4190),i=a(27497),n=a(4449),o=a(47166),l=a.n(o),c=a(67294),d=a(129),u=a(66864),p=a(49963),g=a(44619),m=a(54446),h=a(38694),f=a(3745),_=a(5070),y=a(66656),k=a(67170),v=a(85893);const b=l().bind({root:"s__QUyrHEV_gmyGOQth9ek9","status-row":"s__xgycSXS5Xy5YEG6m4lQR","upsell-row":"s__JMgJRua2K1OUjgYdoj6k","upsell-row_disabled":"s__Z7klJac7XAEmUKNcdkLz","status-text-wrapper":"s__JI31sP63z45R2NU_yLPu","upsell-text":"s__Rl8QYVb7fxoUC5bRsPfo",icon:"s__wUWg_wgE3jry1fzzhI3a",icon_enabled:"s__z926MlaL16haD_fJMiIL","status-text":"s__iZIyotlQp7d78kmhdmHv","status-text_enabled":"s__QGlMW3bAD1d3vGIDlca2","delta-price":"s__bY6FeXDkRDwXQ_wG3b1w","info-icon":"s__FEVavjXf7tt9uWrFgQy4"}),x=({baggageIcon:e,baggageStatusText:t,baggageUpsellText:a,isToggleEnabled:s,isToggleVisible:r,isSearchExpired:i,deltaPrice:n,baggageTooltipText:o,isDisabled:l,handleSwitchChange:x})=>{const{handleTooltipClick:C,handleOutsideTooltipClick:S,handleTooltipMouseEnter:w,handleTooltipMouseLeave:$,isTooltipVisible:j}=(()=>{const[e,t]=(0,c.useState)(!1),a=(0,y.Wm)(),s=(0,c.useCallback)((()=>{t((e=>!e))}),[]),r=(0,c.useCallback)((()=>{t(!1)}),[]),i=(0,c.useCallback)((()=>{a||t(!0)}),[a]),n=(0,c.useCallback)((()=>{a||t(!1)}),[a]),o=(0,c.useCallback)((()=>{t(!1)}),[]);return(0,c.useEffect)((()=>{const t=document.querySelector(`.${k.U}`);return e&&t?.addEventListener("touchmove",o),()=>{t?.addEventListener("touchmove",o)}}),[o,e]),{isTooltipVisible:e,handleTooltipClick:s,handleOutsideTooltipClick:r,handleTooltipMouseEnter:i,handleTooltipMouseLeave:n}})(),I=(0,c.useCallback)((e=>{e.preventDefault(),x()}),[x]),N=(0,c.useMemo)((()=>"ENABLED"===e?(0,v.jsx)(d.$,{className:b("icon",{icon_enabled:!0})}):(0,v.jsx)(u.m,{className:b("icon")})),[e]),F=Boolean(a)&&!i;return(0,v.jsxs)("div",{className:b("root"),children:[(0,v.jsxs)("div",{className:b("status-row"),children:[(0,v.jsxs)("div",{className:b("status-text-wrapper"),children:[N,(0,v.jsx)(p.x,{type:"ENABLED"===e?g.y.Body2Semi:g.y.Body2Regular,className:b("status-text",{"status-text_enabled":"ENABLED"===e}),children:t})]}),o&&(0,v.jsx)(_.u,{placement:"bottom-end",fallbackPlacements:["top-end"],content:o,onClickOutside:S,visible:j,touch:!0,children:(0,v.jsx)("div",{onClick:C,onMouseEnter:w,onMouseLeave:$,className:b("info-icon"),children:(0,v.jsx)(m.E,{})})})]}),F&&(0,v.jsxs)("div",{className:b("upsell-row",{"upsell-row_disabled":l}),onClick:I,children:[(0,v.jsxs)("div",{className:b("upsell-text"),children:[(0,v.jsx)(p.x,{type:g.y.Body2Regular,className:b("status-text"),children:a}),n&&(0,v.jsxs)(p.x,{type:g.y.Body2Semi,className:b("delta-price"),children:["+",(0,v.jsx)(h.t,{value:n.value,currency:n.currencyCode})]})]}),r&&(0,v.jsx)(f.r,{disabled:l,checked:s||!1,readOnly:!0})]})]})};var C=a(98116);const S=(0,C.createEvent)({sid:"-dt8ki3"}),w=(0,C.createEvent)({sid:"9wokqy"}),$={outputs:{$baggageUpsell:(0,C.createStore)(null,{sid:"-ajq1e5"}).on(n.X.outputs.chunksLoaded,((e,t)=>t?.data?.search?.ticket.baggageProposalUpsell??null)).reset(w)},inputs:{handleSwitchChange:S,baggageUpsellReset:w}},{outputs:j,inputs:I}=$;var N=a(69195),F=a(52112);const{inputs:B}=$;(0,C.sample)({and:[{clock:B.handleSwitchChange,fn:()=>"baggage_upsell",target:n.X.inputs.ticketChangeHandlerSourceUpdated}],or:{sid:"-mi9iun"}}),(0,C.sample)({and:[{clock:B.handleSwitchChange,source:{baggageUpsell:$.outputs.$baggageUpsell,ticketSign:N.r.outputs.$ticketSign},filter:({ticketSign:e})=>Boolean(e),fn:({baggageUpsell:e,ticketSign:t})=>({ticketSign:t,value:Boolean(!e?.isToggleEnabled)}),target:F.o.inputs.baggageUpsellUpdated}],or:{sid:"-m1rp1t"}});var E=a(23588),P=a(31401);const{inputs:T}=$;(0,C.sample)({and:[{clock:[E.z.outputs.ticketPopupClosed,E.z.outputs.resetSearchResultsPage],target:T.baggageUpsellReset}],or:{sid:"-5s55t0"}}),(0,C.sample)({and:[{clock:T.handleSwitchChange,source:{baggageUpsell:$.outputs.$baggageUpsell,ticketSign:N.r.outputs.$ticketSign},filter:({ticketSign:e})=>Boolean(e),fn:({baggageUpsell:e,ticketSign:t})=>({ticketSign:t,tariffType:e?.isToggleEnabled?P.$p.OtherBaggage:P.$p.HasBaggage}),target:E.z.inputs.baggageUpsellSwitchChangeFx}],or:{sid:"-5nqt24"}});const D=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp_ticket/services/baggage_upsell/index.ts",api:{containers:{BaggageUpsellContainer:()=>{const{baggageUpsell:e,isSearchExpired:t,areTicketActionItemsBlocked:a,handleSwitchChanged:s,isDirectScheduleLoading:o}=(0,r.useUnit)({baggageUpsell:j.$baggageUpsell,isSearchExpired:i.N.outputs.$isSearchExpired,areTicketActionItemsBlocked:n.X.outputs.$areTicketChangeHandlersBlocked,isDirectScheduleLoading:n.X.outputs.$requiredTicketFromDirectScheduleLoading,handleSwitchChanged:I.handleSwitchChange});if(null===e)return null;const l=o||a;return(0,v.jsx)(x,{baggageIcon:e.baggageIcon,baggageStatusText:e.baggageStatusText,baggageUpsellText:e.baggageUpsellText,isToggleEnabled:e.isToggleEnabled,isToggleVisible:e.isToggleVisible,isSearchExpired:t,deltaPrice:e.deltaPrice,baggageTooltipText:e.baggageTooltipText,isDisabled:l,handleSwitchChange:s})}}}})},42016:function(e,t,a){"use strict";a.d(t,{_:function(){return z}});var s=a(30091),r=a(98116),i=a(27497),n=a(74169),o=a(69195),l=a(72655),c=a(63308);const d=(0,r.createEvent)({sid:"z5pnrk"}),u=(0,r.createEvent)({sid:"3jivrd"}),p=(0,r.createEvent)({sid:"-jtp8pd"}),g=(0,r.createEvent)({sid:"wrvmnf"}),m=(0,r.createStore)(!1,{sid:"w27mah"}).on(p,(()=>!0)).reset(g),h=n.j.outputs.$bletProposals;(0,r.sample)({and:[{clock:d,source:o.r.outputs.$ticketSign,fn:(e,{proposal:t,event:a,zone:s})=>({event:a,ticketSign:e,proposalData:{id:t.id,deeplink:t.deeplink,position:t.position,source:l.R.Proposal,zone:s}}),target:c.B.inputs.bookingClicked}],or:{sid:"s750z3"}}),(0,r.sample)({and:[{clock:p,target:n.j.inputs.proposalModalOpened}],or:{sid:"t4oh64"}}),(0,r.sample)({and:[{clock:g,target:n.j.inputs.proposalModalClosed}],or:{sid:"t7fg4x"}});const f={$isOpen:m,$proposals:h},_={handleBuyClicked:d,bletProposalModalOpened:p,bletProposalModalClosed:g,shownAnalyticsSent:u};(0,r.sample)({and:[{clock:i.N.outputs.searchExpired,target:_.bletProposalModalClosed}],or:{sid:"wtp12y"}}),(0,r.sample)({and:[{clock:n.j.inputs.handleShowMoreClicked,fn:()=>({source:"bottom_drawer"}),target:_.bletProposalModalOpened}],or:{sid:"jxpo8y"}});var y=a(23588);(0,r.sample)({and:[{clock:y.z.outputs.resetSearchResultsPage,target:_.bletProposalModalClosed}],or:{sid:"-ut10k5"}}),a(26699);var k=a(67294),v=a(4190),b=a(28225),x=a(85893),C=a(47166),S=a(46531),w=a(49963),$=a(44619),j=a(5393),I=a(59191),N=a(9071),F=a(41003);const B=C.bind({root:"s__dJaGGVaySLwU5ceg_tqt",passengers:"s__UgBsqFg_a_8kdMU1CG0P",popup:"s__v1_cre_gNuPQe3c8CuXa","close-text":"s__aETGbUgUoPG21zib8T6_"}),E=(0,k.memo)((({isVisible:e,onClose:t,passengersCountText:a,proposals:s,isExpired:r,isLoading:i,getCashbackTitle:n,onProposalClick:o,firstOperatingCarrier:l,ticketPrice:c,onUpdateClick:d,hasError:u,onErrorClick:p,isDisabled:g,cashbackInformerSlot:m})=>{const{t:h}=(0,b.useTranslation)("uiKit");return(0,x.jsxs)(S.G,{className:B("popup"),visible:e,onClose:t,noAutoFocus:!0,width:480,children:[(0,x.jsxs)(S.G.Navigation,{transparent:!0,children:[(0,x.jsxs)(N.w.Title,{children:[(0,x.jsx)(w.x,{type:$.y.Body2Semi,children:h("ticket.proposalList.title")}),a&&(0,x.jsx)(w.x,{type:$.y.CaptionRegular,className:B("passengers"),children:a})]}),(0,x.jsx)(N.w.RightAccessory,{children:(0,x.jsx)(F.r,{onClick:t,children:(0,x.jsx)(j.P,{})})})]}),(0,x.jsxs)("div",{className:B("root"),children:[m,(0,x.jsx)(I.t,{proposalListRef:null,proposals:s,isLoading:i,isExpired:r,getCashbackTitle:n,onProposalClick:o,firstOperatingCarrier:l,ticketPrice:c,onUpdateClick:d,hasError:u,onErrorClick:p,isDisabled:g,isModal:!0})]})]})}));E.displayName="BletProposalModal";var P=a(59051),T=a.n(P),D=a(31401),R=a(39102),A=a(4449),L=a(30871);const{CashbackInformerContainer:O}=L.p.containers,{CashbackLabelContainer:H}=R.r.containers,z=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp_ticket/services/blet_proposal_modal/index.ts",api:{containers:{BletProposalModalContainer:()=>{const{t:e}=(0,b.useTranslation)("component_serp_bottom_drawer"),{isVisible:t,bletProposals:a,isLoading:s,isSearchExpired:r,passengersCount:o,ticketPriceFromResults:l,firstOperatingCarrier:c,hasError:d,isDirectSearchLoading:u,onClose:p,handleBuyClick:g,handleUpdateResultsClick:m,retryDrawerRequest:h,visiblePlacements:y}=(0,v.useUnit)({isVisible:f.$isOpen,bletProposals:f.$proposals,isLoading:A.X.outputs.$isLoading,isSearchExpired:i.N.outputs.$isSearchExpired,passengersCount:n.j.outputs.$passengersCount,ticketPriceFromResults:n.j.outputs.$ticketPriceFromResults,firstOperatingCarrier:n.j.outputs.$firstOperatingCarrier,hasError:n.j.outputs.$hasError,isDirectSearchLoading:A.X.outputs.$requiredTicketFromDirectScheduleLoading,onClose:_.bletProposalModalClosed,handleBuyClick:_.handleBuyClicked,handleUpdateResultsClick:n.j.inputs.handleUpdateResultsClicked,retryDrawerRequest:n.j.inputs.retryDrawerRequest,visiblePlacements:L.p.outputs.$visiblePlacements}),C=u||s,S=(0,k.useCallback)(((e,t,a)=>{g({event:e,proposal:t,zone:a})}),[g]),w=(0,k.useMemo)((()=>{const e=y.includes(D.g_.Proposals);return a.some((({cashback:e})=>!T()(e)&&e>=1))&&e?(0,x.jsx)(O,{placement:D.g_.Proposals}):null}),[a,y]),$=o>1?e("passengersCount",{count:o}):"";return(0,x.jsx)(E,{proposals:a,getCashbackTitle:e=>null!==e&&e.value>=1?(0,x.jsx)(H,{cashback:e,placement:D.g_.BottomDrawer}):null,onProposalClick:S,firstOperatingCarrier:c,ticketPrice:l,onUpdateClick:m,isLoading:C,isExpired:r,onErrorClick:h,hasError:d,passengersCountText:$,isDisabled:C,isVisible:t,onClose:p,cashbackInformerSlot:w})}},inputs:_,outputs:f}})},66672:function(e,t,a){"use strict";a.d(t,{i:function(){return Yt}});var s=a(30091),r=a(67294),i=a(4190),n=a(28225),o=a(46531),l=a(49963),c=a(44619),d=a(9071),u=a(6328),p=a(99491),g=a(5393),m=a(47166),h=a.n(m),f=a(85893),_=a(94184),y=a(49338);const k=(e,t)=>+(t/e*100).toFixed(2),v=(e,t,a)=>+((t+a)/e*100).toFixed(2),b=(e,t)=>+(t/e*100).toFixed(2),x=(e,t)=>+(t/e*100).toFixed(2);var C=a(49546),S=a.n(C),w=a(77606),$=a.n(w);const j=["green","purple","yellow"],I=e=>e.charAt(0).toUpperCase()+e.slice(1),N=(e,t)=>C(e)?((e,t)=>"inch"===t?(e=>2.54*e)(e):e)(e,t):null;var F={variables:"s__OW8zwQFeSuWL_K1TSXej",root:"s__kC34KCqVbvNCx9WBlCoV",title:"s__aFFW6HgG15QSIsx00UoE",list:"s__x2aaUVWBk2vPlPNhR30M",listItem:"s__sdp0JBkEgeBCPGAg_nAO",listOnTime:"s__dkp2bFIoRZOp9WhZwbXX",listShortDelay:"s__Itj8g3k0mGY7ns49R_Di",listLongDelay:"s__gyaJGJcmgCB8BuBIqZJJ",listCancelled:"s__kpqzND7BsITOwAy7BALU",bar:"s__PfQAsGZPQCz6TmXh9V4v",barItem:"s__muysBqMskpgv8DPHpu0f",barOnTime:"s__HjIHqGBlf6V3s1TOGrvj",barLongDelay:"s__Zrm1EYLhX_8XR6yd1wwV",barShortDelay:"s__PUlXWuXmOHlBtv55dQQX",barCancelled:"s__dn3cTmTgKzrRStrXXaj1"};const B=["onTime","shortDelay","longDelay","cancelled"],E=e=>{const{t:t}=(0,n.useTranslation)("uiKit");return(0,f.jsxs)("div",{className:_(F.variables,F.root),children:[(0,f.jsx)(l.x,{className:F.title,type:c.y.Body1Semi,children:t("flight_info.arrivalStatistics.title")}),(0,f.jsx)("div",{className:F.bar,children:B.map((t=>{const a=e[t],s=I(t);return a?(0,f.jsx)("div",{className:_(F.barItem,F[`bar${s}`]),style:{width:`${a}%`},children:a>=15&&(0,f.jsx)(l.x,{className:"bar-value",type:c.y.CaptionBold,children:`${a}%`})},t):null}))}),(0,f.jsx)("ul",{className:F.list,children:B.map((a=>{const s=e[a],r=I(a);return s?(0,f.jsx)("li",{className:_(F.listItem,F[`list${r}`]),children:(0,f.jsx)(l.x,{className:F.title,type:c.y.Body2Regular,children:t(`flight_info.arrivalStatistics.types.${a}`)})},a):null}))})]})};var P={variables:"s__zTjcd5zSGS4drTVeRwEL",root:"s__ysDS092p9N7n6egmui49",title:"s__e5IkOUpUgN0B3saCGmMJ",item:"s__Ajr2MxIdvI1xRQv9raTQ","item-title":"s__AnrGbL9uaaVs2S5mMmiC",percent:"s__thK04RySYemu17rDDh8Z",green:"s__VNn9HYTWBGkwgeDhJHr6",purple:"s__xxuw1kiJfnvvi3forSCJ",yellow:"s__gNhE9zqgbrfPwcRjCKh2","percent-bar":"s__zEYLKAKKLsV33SSdFRZY","percent-label":"s__c2EatsXGtgpCIiOHh0AU"};const T=(0,r.memo)((({data:e})=>{const{t:t}=(0,n.useTranslation)("uiKit"),a=((e,t)=>{if(w(e))return[];const a=Object.keys(e).sort(((t,a)=>e[a]-e[t])).slice(0,3),[s]=a,r=100-a.reduce(((t,a)=>t+e[a]),0),i=e[s]?100/e[s]:100,n=a.map(((t,a)=>({name:t,value:e[t],color:j[a],width:i*e[t]})));return r>0?[...n,{name:t,value:r,color:"grey",width:i*r}]:n})(e,t("flight_info.aircraftsFrequencies.other"));return(0,f.jsxs)("div",{className:_(P.variables,P.root),children:[(0,f.jsx)(l.x,{className:P.title,type:c.y.Body1Semi,children:t("flight_info.aircraftsFrequencies.title")}),(0,f.jsx)("div",{className:P.list,children:a.map((e=>(0,f.jsxs)("div",{className:P.item,children:[(0,f.jsx)(l.x,{className:P["item-title"],type:c.y.Body2Regular,children:e.name}),(0,f.jsxs)("div",{className:_(P.percent,P[e.color]),children:[(0,f.jsx)("div",{className:P["percent-bar"],style:{width:`${e.width}%`}}),(0,f.jsxs)(l.x,{className:P["percent-label"],type:c.y.CaptionBold,children:[e.value,"%"]})]})]},e.name)))})]})}));T.displayName="AircraftsFrequenciesCard";const D=({className:e,...t},a)=>(0,f.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:a,style:{display:"inline-block"},...t,children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.853 15c-.379.322-.78.615-1.198.87a24.99 24.99 0 0 1-1.75 1.13H18c.552 0 1.013.482.707.94-.421.631-1.251 1.06-2.207 1.06h-10c-.956 0-1.786-.429-2.207-1.06-.306-.459.155-.94.707-.94h4.242a24.975 24.975 0 0 1-2.55-1.689C4.448 13.75 3 11.326 3 9V5.571C3 5.256 3.256 5 3.571 5H19.43c.315 0 .571.256.571.571V7h.5c1.933 0 3.5 1.669 3.5 4s-1.575 4-3.508 4h-3.639ZM5 9V7h13v2c0 .329-.046.664-.131 1H5.162A3.358 3.358 0 0 1 5 9Zm15 0c0 1.364-.515 2.762-1.351 4h1.843C21.5 13 22 12 22 11s-.5-2-1.5-2H20Z"})}),R=(0,r.memo)((0,r.forwardRef)(D));R.displayName="Icon24AmenitiesDrinks";var A=a(16469);const L=({className:e,...t},a)=>(0,f.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:a,style:{display:"inline-block"},...t,children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 21H9c-.5 0-1-.511-1-1v-1H4c-1 0-2-1.022-2-2V6.778C2 5.8 2.818 5 3.818 5h16.364c1 0 1.818.791 1.818 1.778V17c0 .978-1 2-2 2h-4v1c0 .489-.5 1-1 1Zm4.111-4c.489 0 .889-.375.889-.833V7.833c0-.458-.4-.833-.889-.833H4.89C4.4 7 4 7.375 4 7.833v8.334c0 .458.4.833.889.833H19.11Zm-4.615-4.204-3.992 2.084c-.672.347-1.504-.1-1.504-.795V9.917c0-.704.832-1.143 1.504-.796l3.992 2.084c.672.357.672 1.234 0 1.59Z"})}),O=(0,r.memo)((0,r.forwardRef)(L));O.displayName="Icon24AmenitiesMedia";const H=({className:e,...t},a)=>(0,f.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:a,style:{display:"inline-block"},...t,children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 2v3H5a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1v3a7.001 7.001 0 0 0 6 6.93V22a1 1 0 1 0 2 0v-3.07A7.001 7.001 0 0 0 19 12V9a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2V2a1 1 0 0 0-1-1h-1v4H9V1H8a1 1 0 0 0-1 1Zm0 7h10v3a5 5 0 0 1-10 0V9Z"})}),z=(0,r.memo)((0,r.forwardRef)(H));z.displayName="Icon24AmenitiesUsb";var q=a(64956),U=a(4923);const M={drinks:R,food:A.T,media:O,usb:z,wifi:q.G,alco:U.o,drinks_alco:R},V=(0,r.memo)((({description:e,type:t,isAvailable:a})=>{let s=null;return t&&M[t]&&(s=M[t]),(0,f.jsxs)("div",{className:_("s__YRYvyK3jqh5J86TqYUfu","s__OBgy1xe0346264PtRJZW",{s__saHeI9BAsehj38cRsRsc:!!a}),children:[(0,f.jsx)("div",{className:"s__B_XTBGwb8WGJmEwOlJFC",children:s&&(0,f.jsx)(s,{})}),(0,f.jsx)(l.x,{type:c.y.Body2Regular,className:"s__frX6ucdzUJtPbTJDNY0H",children:e})]})}));V.displayName="Amenity";const Z={entertainment:"media",power:"usb",food:"food",wifi:"wifi",alcoholic:"alco",nonalcoholic:"drinks",premium_alcoholic:"drinks_alco",alcoholic_and_nonalcoholic:"drinks_alco"},G=(e,t)=>t.slice().sort(((t,a)=>{const s="function"==typeof e?e(t):t[e],r="function"==typeof e?e(a):a[e];return s.localeCompare(r,"en")}));const K=({amenities:e})=>{const t=(e=>{const{availableAndFree:t,availableAndPaid:a,notAvailable:s}=Object.keys(e).reduce(((t,a)=>{if("beverage"===a){const s=e[a];return s&&s.description&&s.type?(s.exists||t.notAvailable.push({type:Z[s.type],isAvailable:!1,description:s.description}),"alcoholic"===s.type&&(s.exists&&!s.alcoholicPaid&&t.availableAndFree.push({type:Z[s.type],isAvailable:!0,description:s.description}),s.exists&&s.alcoholicPaid&&t.availableAndPaid.push({type:Z[s.type],isAvailable:!0,description:s.description})),"nonalcoholic"===s.type&&(s.exists&&!s.nonalcoholicPaid&&t.availableAndFree.push({type:Z[s.type],isAvailable:!0,description:s.description}),s.exists&&s.nonalcoholicPaid&&t.availableAndPaid.push({type:Z[s.type],isAvailable:!0,description:s.description})),"premium_alcoholic"!==s.type&&"alcoholic_and_nonalcoholic"!==s.type||(!s.exists||s.alcoholicPaid||s.nonalcoholicPaid||t.availableAndFree.push({type:Z[s.type],isAvailable:!0,description:s.description}),s.exists&&(s.nonalcoholicPaid||s.alcoholicPaid)&&t.availableAndPaid.push({type:Z[s.type],isAvailable:!0,description:s.description})),t):t}if("layout"===a)return t;const s=e[a];return s&&s.description?(s.exists&&!s.paid&&t.availableAndFree.push({type:Z[a],isAvailable:!0,description:s.description}),s.exists&&s.paid&&t.availableAndPaid.push({type:Z[a],isAvailable:!0,description:s.description}),s.exists||t.notAvailable.push({type:Z[a],isAvailable:!1,description:s.description}),t):t}),{availableAndFree:[],availableAndPaid:[],notAvailable:[]});return[...G("description",t),...G("description",a),...G("description",s)]})(e),{t:a}=(0,n.useTranslation)("uiKit");return(0,f.jsxs)("div",{className:"s__FC9tLktqfBohEAx4OorV",children:[(0,f.jsx)(l.x,{className:"s__PL0j2Lgu7Vtma9Jf6aQz",type:c.y.Body1Semi,children:a("flight_info.amenitiesListTitle")}),t.map(((e,t)=>(0,f.jsx)("div",{className:"s__s4ghMdTthTZ0JWKDReMy",children:(0,f.jsx)(V,{type:e.type,description:e.description,isAvailable:e.isAvailable})},t)))]})};a(26699);var X,Q,W=a(2437),Y=a(86523);!function(e){e.Default="default",e.Small="small"}(X||(X={})),function(e){e.Narrow="narrow",e.Standard="standard",e.Wider="wider"}(Q||(Q={}));var J={root:"s__ecviVc391C7q6eqW4ulg",small:"s__eDXaVDudgsvKYwhajA6g",title:"s__MqFxvt54I0tiC43sFhpb",description:"s__QjhWZx65Eu5XsyR34J66",narrow:"s__HzLvV6iqPiSKDxSlxzfL",standard:"s__iikCMeMuS4_NLbo4Vo7X",wider:"s__NHi3t29acmH2GtjJvSDa"};const ee=(0,r.memo)((({title:e,children:t,description:a,descriptionType:s,type:r=X.Default})=>(0,f.jsxs)("div",{className:_(J.root,J[r]),children:[(0,f.jsxs)("header",{children:[(0,f.jsx)(l.x,{className:J.title,type:c.y.Body1Semi,children:e}),a&&s&&(0,f.jsx)(l.x,{className:_(J.description,J[s]),type:c.y.CaptionSemi,children:a})]}),t]})));ee.displayName="SeatsCard";var te={root:"s__eA1TocmQCwpjm2jg8iQd",narrow:"s__k6eEvMSHmU_ggwHBk4iD",pointer:"s__ghoiMbG52RfIQA_u_xfA",standard:"s__r5l58lempBEK3I3nttGa",wider:"s__UeKeTvFyP6zrBNp2Vsic",range:"s__G4BYQokirfD8yWlqqw9D"};const ae=()=>(0,f.jsx)("div",{className:te.pointer,children:(0,f.jsx)("svg",{width:"8",height:"7",viewBox:"0 0 8 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.16392 0.54248C3.5466 -0.135362 4.52287 -0.135364 4.90554 0.542478L7.70906 5.50838C8.0854 6.175 7.60377 7 6.83825 7H1.23122C0.465703 7 -0.0159341 6.175 0.360408 5.50838L3.16392 0.54248Z"})})}),se=({type:e})=>(0,f.jsxs)("div",{className:_(te.root,te[e||Q.Standard]),children:[(0,f.jsx)("div",{className:te.range}),(0,f.jsx)(ae,{})]});var re={small:"s__qLoqvokwyEZeMkZ2Zo3e",schema:"s__bIetlE2SQXi3ysZhEyqd",schemaArrow:"s__xqgzoW5OKGrmYl5TMrK6",schemaView:"s__Fv5KsMJB177Pd90xnW27",schemaSeat:"s__QP2Vd9RzxzR5mFDCJlbA",notation:"s__BLF0pU_ieyeuKa01DoD1"};const ie=(0,r.memo)((({value:e,size:t,type:a})=>{const{t:s}=(0,n.useTranslation)("uiKit"),r=(0,Y.d)("size",W.fb.centimeter(e)),i=Object.values(Q).includes(t)?s(`flight_info.seatsStep.description.${t}`):null;return(0,f.jsx)(ee,{title:s("flight_info.seatsStep.title"),type:a,description:i,descriptionType:t,children:(0,f.jsxs)("div",{className:re[a],children:[(0,f.jsxs)("div",{className:re.schema,children:[(0,f.jsx)("div",{className:re.schemaArrow}),(0,f.jsxs)("div",{className:re.schemaView,children:[(0,f.jsx)("div",{className:re.schemaSeat}),(0,f.jsx)("div",{className:re.schemaSeat})]})]}),(0,f.jsx)(se,{type:t}),(0,f.jsx)(l.x,{className:re.notation,type:c.y.Body2Regular,children:r})]})})}));ie.displayName="SeatsStep";var ne="s__KuMhVUZhirpZUI2Y3t1Q",oe="s__Nkv31lTt_1hkHSzU2hi7";const le=(0,r.memo)((({value:e,size:t,type:a})=>{const{t:s}=(0,n.useTranslation)("uiKit"),r=(0,Y.d)("size",W.fb.centimeter(e)),i=Object.values(Q).includes(t)?s(`flight_info.seatsStep.description.${t}`):null;return(0,f.jsx)(ee,{title:s("flight_info.seatsWidth.title"),type:a,description:i,descriptionType:t,children:(0,f.jsxs)("div",{className:"s__odaY6SDF8yj8AWQ2sIMZ",children:[(0,f.jsxs)("div",{className:"s__kbTT_TsNATthulA2d9LY",children:[(0,f.jsx)("div",{className:"s__pdwciK2w_4QXYSgadv1Q"}),(0,f.jsxs)("div",{className:"s__xfmYmz8ieXoRZJ51IUKN",children:[(0,f.jsx)("div",{className:ne}),(0,f.jsx)("div",{className:oe}),(0,f.jsx)("div",{className:ne}),(0,f.jsx)("div",{className:oe}),(0,f.jsx)("div",{className:ne})]})]}),(0,f.jsx)(se,{type:t}),(0,f.jsx)(l.x,{className:"s__yUr_kaEngd3bpxoo6iZ5",type:c.y.Body2Regular,children:r})]})})}));le.displayName="SeatsWidth";var ce={variables:"s__Ci4KPGlsEMagJl9o05LT",root:"s__R3jWDhJoebtFRBlJXOk_",rootSmall:"s__oC0JVc64IZ6gkgN7m9mx",body:"s__Djj0CFMwpSSpQPuyhysZ",footer:"s__UzVwqR2cZ3NZmLLDs5Ne",airplane:"s__YooEjd6suRiPqpHI4c_c",seats:"s__VNSTY9QNjr883UPZ0ZPw",row:"s__qwuHULsnmG66YdFN4j5w",group:"s__ukpxiv3Zv7UxXKfDDRqH",seat:"s__TrNeBAoLLjuhImaiKs_S",large:"s__JRoeqFYYCplZ9FN5jaUL",medium:"s__hbI5BapTEiaYuDEtAhU0",small:"s__lgWCyDzf8rgQqBshQGxR"};const de=()=>(0,f.jsx)("div",{className:ce.airplane,children:(0,f.jsxs)("svg",{width:"90",height:"120",viewBox:"0 0 90 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsxs)("g",{clipPath:"url(#clip0)",children:[(0,f.jsx)("path",{d:"M1.01916 120L1.01901 89.9829C0.437865 55.5577 12.8119 27.509 32.7106 7.70902C36.6753 3.39423 40.4541 1 43.0009 1H46.9991C49.4017 1 53.2465 3.43654 57.2684 7.68743C77.215 27.6933 89.5616 55.6598 88.981 89.9831C88.981 89.9831 89 120 88.9809 120H89.9804C90 120 89.9804 90 89.9804 90C90.6517 50.3146 73.928 22.9806 57.9944 7C53.7621 2.52672 49.7241 0 46.9991 0H43.0009C40.1316 0 36.1477 2.49071 32.0057 7C16.048 22.8785 -0.65167 50.2365 0.019587 90C0.022254 90.158 0.019587 120 0.019587 120H1.01916Z",fill:"#CDD4DE"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.0661 32.9518C32.5031 31.0078 37.3065 29.6799 42.3423 29C42.4406 29 42.6863 29.292 42.6997 29.8168L42.6595 41.6311C42.6774 42.2106 42.4093 42.6076 42.311 42.6167L41.8463 42.6122C36.1224 42.6122 30.9437 43.4335 25.9705 45.1265C25.9526 45.1356 25.9392 45.1402 25.9348 45.1402C25.8588 45.09 25.7158 44.766 25.8052 44.2412C26.3861 40.7823 26.9669 37.3325 27.5478 33.8964C27.6327 33.4081 27.8785 33.0339 28.0661 32.9518ZM19.5335 38.0019C19.8284 37.6459 20.2306 37.1896 20.664 36.7561C18.3181 43.3135 15.0027 55.8487 14.4218 58.1668C14.3771 58.3539 14.2967 58.5273 14.2029 58.6551C14.0554 58.8468 13.0188 60.2249 12 61.9908C14.0912 52.0795 18.5818 40.2242 19.4486 38.157C19.4799 38.0749 19.4978 38.0429 19.5335 38.0019ZM23.941 34.1848C23.0562 36.5623 19.3878 47.6829 17.6809 54.5414C19.1108 52.5062 20.8176 50.2383 21.0679 49.9097C21.689 48.5453 22.31 47.2129 22.9267 45.8987C23.2786 43.8935 23.6262 41.903 23.9721 39.922L23.9721 39.9218L23.9721 39.9217L23.9722 39.9215C24.3245 37.9038 24.675 35.8959 25.0268 33.8928L24.705 33.4684C24.5777 33.5893 24.4503 33.708 24.323 33.8266L24.3228 33.8267C24.1955 33.9453 24.0683 34.0639 23.941 34.1848ZM62.9817 45.1146C58.1247 43.4536 52.7985 42.614 47.1551 42.614L46.7396 42.6185C46.5876 42.6094 46.3195 42.2215 46.3374 41.6101L46.2927 29.8369C46.3106 29.2939 46.5564 29.0018 46.6591 29.0018C51.6949 29.6818 56.4938 31.0097 60.9308 32.949C61.1229 33.0312 61.3687 33.4099 61.4491 33.8982L63.1917 44.2431C63.2798 44.7737 63.1379 45.0961 63.0653 45.1402L62.9817 45.1146ZM63.0653 45.1402L63.0711 45.142H63.0622L63.0653 45.1402ZM68.336 36.7561C70.7265 43.4321 74.0911 56.2229 74.5737 58.1623C74.6229 58.3494 74.7078 58.5319 74.8016 58.6597C74.9446 58.8468 75.9812 60.2294 77 62C74.7033 51.0619 69.6095 38.2894 69.5558 38.1616C69.5206 38.0716 69.5027 38.0482 69.4723 38.0082L69.4709 38.0064C69.2609 37.7555 68.8275 37.2535 68.336 36.7561ZM66.059 45.8557C65.3664 41.8492 64.6693 37.8609 63.9723 33.8909L64.2895 33.4711C64.5487 33.7084 64.8079 33.9456 65.0581 34.1875C65.9383 36.5513 69.5934 47.6171 71.3137 54.5304C69.9285 52.5682 68.2797 50.3642 67.9222 49.8942C67.452 48.8566 66.9765 47.8324 66.4956 46.7969C66.3506 46.4844 66.205 46.1709 66.059 45.8557Z",fill:"#CDD4DE"}),(0,f.jsx)("path",{d:"M86 120V85.6521C86 81.8987 84.6804 78.2648 82.2721 75.3859C74.2402 65.7846 61.7885 60.9999 45 60.9999C28.2115 60.9999 15.7598 65.7846 7.72788 75.3859C5.31956 78.2648 4 81.8987 4 85.6521L4 120H5L5 85.6521C5 82.1333 6.23709 78.7265 8.49489 76.0275C16.3181 66.6758 28.4864 61.9999 45 61.9999C61.5136 61.9999 73.6819 66.6758 81.5051 76.0275C83.7629 78.7265 85 82.1333 85 85.6521V120H86Z",fill:"#CDD4DE"})]}),(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"clip0",children:(0,f.jsx)("rect",{width:"90",height:"120",fill:"white"})})})]})});var ue;!function(e){e.Large="large",e.Medium="medium",e.Small="small"}(ue||(ue={}));const pe=e=>Array(e).fill(null).map(((e,t)=>t)),ge={small:4,medium:3,large:3},me=({size:e,seatSize:t,layout:a})=>(0,f.jsx)("div",{className:ce.row,children:a.map(((e,a)=>(0,f.jsx)("div",{className:ce.group,children:pe(e).map(((e,a)=>(0,f.jsx)("div",{className:_(ce.seat,ce[t])},a)))},a)))},e),he=(0,r.memo)((({layout:e,type:t})=>{const{t:a}=(0,n.useTranslation)("uiKit"),s=e.split("-").map(Number),r=(e=>{let t=ue.Small;return e<=4&&(t=ue.Large),e<=6&&(t=ue.Medium),t})(s.reduce(((e,t)=>e+t),0)),i=`root${I(t)}`,o=pe(ge[r]);return(0,f.jsx)(ee,{title:a("flight_info.seatsLayout.title"),type:t,children:(0,f.jsxs)("div",{className:_(ce.variables,ce.root,ce[i]),children:[(0,f.jsxs)("div",{className:ce.body,children:[(0,f.jsx)(de,{}),(0,f.jsx)("div",{className:ce.seats,children:o.map(((e,t)=>(0,f.jsx)(me,{size:e,seatSize:r,layout:s},t)))})]}),(0,f.jsx)("div",{className:ce.footer,children:(0,f.jsx)(l.x,{type:c.y.Body2Regular,children:e})})]})})}));he.displayName="SeatsLayout";var fe="s__zBt3wVamNkIRoSvur0dU",_e="s__OuYYHTYSmOkt74BNi5vx",ye="s__qUoVpZBZzsqBiuot3Mbd",ke="s__f3jHwY_osFCPFyjgxH7b",ve="s__cY_WFNcI6Tr62PRHYlbY";const be=({seat:e,amenities:t,pitch:a,width:s,type:r})=>{const i=null!==a,n=null!==s;return(0,f.jsxs)("div",{className:fe,children:[e&&i&&(0,f.jsx)("div",{className:ve,children:(0,f.jsx)(ie,{value:a,size:e?.pitchDescription,type:r})}),e&&n&&(0,f.jsx)("div",{className:ve,children:(0,f.jsx)(le,{value:s,size:e.widthDescription,type:r})}),t?.layout?.rowLayout&&(0,f.jsx)("div",{className:ve,children:(0,f.jsx)(he,{layout:t?.layout?.rowLayout,type:r})})]})};var xe=a(69937),Ce=a(96351),Se=a(31402),we=a(46898),$e=a(37453),je=a(66149);const Ie=(0,r.memo)((({flightInfo:e})=>{const{t:t}=(0,n.useTranslation)("uiKit"),a=(s=e,(0,r.useMemo)((()=>s?.seat?.pitch&&s?.seat?.width&&s?.amenities?.layout?.rowLayout?X.Small:X.Default),[s]));var s;const{amenities:i,aircraftsFrequencies:o,seat:d,stats:u}=e,p=Boolean(d?.pitch||d?.width||i?.layout?.rowLayout),g=(e=>{if(!e)return null;const t=e.observations-e.diverted;return t>0?{onTime:k(t,e.ontime),shortDelay:v(t,e.late15,e.late30),longDelay:b(t,e.late45),cancelled:x(t,e.cancelled)}:null})(u),m=N(d?.width,d?.widthNotation),h=N(d?.pitch,d?.pitchNotation);return(0,f.jsxs)(f.Fragment,{children:[p&&(0,f.jsx)(be,{type:a,seat:d,amenities:i,pitch:h,width:m}),i&&(0,f.jsx)("div",{className:fe,children:(0,f.jsx)(K,{amenities:i})}),o&&(0,f.jsx)("div",{className:fe,children:(0,f.jsx)(T,{data:o})}),g&&(0,f.jsx)("div",{className:fe,children:(0,f.jsx)(E,{onTime:g.onTime,shortDelay:g.shortDelay,longDelay:g.longDelay,cancelled:g.cancelled})}),(0,f.jsx)(l.x,{type:c.y.CaptionRegular,className:"s__rIPjghuu8gqgNJR3z2XC",children:t("ticket.flightInfo.disclaimer")})]})}));Ie.displayName="FlightInfoContent";var Ne=a(15157),Fe=a(34611),Be={info:"s__xVD2XEgqstu9nUxe1LGo",content:"s__Ml7Bn3wD2XIS7PmOyCyP",wrapper:"s__hPdp1uE74AqFqnuwjckd",description:"s__IOVyO8T7fYlSSDI0e337",more:"s__HXrBjBChvm3a67NrWVj2"};const Ee=m.bind(Be),Pe=({className:e,carrierIata:t,onCarrierLogoClick:a,getAirlineName:s})=>{const{t:r}=(0,n.useTranslation)("uiKit"),i=s?.(t)||t,o=(0,f.jsx)(Fe.p,{marketingCarrierIata:t,marketingCarrierName:i});return(0,f.jsx)(Ne.o.Item,{className:Ee("info",e),contentClassName:Be.content,type:"standard",rightElement:o,onClick:a,children:(0,f.jsxs)("div",{className:Be.wrapper,children:[(0,f.jsx)(l.x,{type:c.y.Body2Regular,className:Be.description,children:`${r("ticket.operatingCarrier.details.description",{carrierName:i})} `}),(0,f.jsx)(l.x,{type:c.y.Body2Regular,className:Be.more,children:r("ticket.operatingCarrier.details.more")})]})})},Te=({className:e,flightDurationTitle:t,aircraftWidthType:a,flightName:s,showHeaderTitle:r,headerFlightTitleRef:i=null})=>{const{t:o}=(0,n.useTranslation)("uiKit"),d=o("ticket.flightInfo.flight",{flightName:s}),u=a?o(`ticket.flightInfo.aircraftWidth.${a}`):null;return(0,f.jsxs)("div",{className:e,children:[r&&(0,f.jsx)(l.x,{type:c.y.Title1Bold,className:"s__wmUEjQ0GtNfLFS8w_GTH",ref:i,children:d}),(0,f.jsx)(l.x,{type:c.y.Body2Semi,className:ye,children:t}),a&&(0,f.jsx)(l.x,{type:c.y.Body2Semi,className:ye,children:u})]})};var De=a(24530),Re=a(38694);const Ae=(e,t)=>Math.ceil(e)-Math.ceil(t);var Le=a(85576);const Oe=(0,r.memo)((({price:e,basePrice:t})=>{const a=t?Ae(e.value,t.value):e.value,s=Boolean(t)&&a>=0,r=a<0;return(0,f.jsxs)(l.x,{className:"s__f06a6rQDIJLh3_YqOpsI",type:c.y.Title4Bold,children:[s&&`+${Le.q}`,r&&`−${Le.q}`,(0,f.jsx)(Re.t,{value:Math.abs(a),roundingMode:"ceil",currency:e.currency})]})}));Oe.displayName="FareCardPrice";var He=a(20580),ze=a(1156),qe=a(39535);const Ue=(0,r.memo)((({price:e,basePrice:t,onClick:a})=>{const{t:s}=(0,n.useTranslation)("uiKit"),r=t?Ae(e.value,t.value):e.value,i=t&&r>0;return(0,f.jsx)(ze.z,{inline:!0,priority:i?qe.Ji.Primary:qe.Ji.Secondary,onClick:a,children:i?(0,f.jsx)(n.Trans,{ns:"uiKit",i18nKey:"fares.upgradeTariff",children:(0,f.jsx)(Re.t,{value:Math.abs(r),roundingMode:"ceil",currency:e.currency})}):s("fares.changeTariff")})}));Ue.displayName="FareCardChangeButton";var Me=a(33036),Ve={root:"s__mlsQwwHzgdpT166jT2OD",isSelected:"s__qHh3445WDSqLoYTc5EcE",clickable:"s__IFW0CtovlbtGEB7QgOIG",inner:"s__igqHKwp4lUcDnYycV2fQ",header:"s__bAOTWrPjBTKEKN3B_hSE",options:"s__rlv2cD7wmHydVfsluW8V","header-small":"s__hXZrGNN0Ml0zAzh8z_iU","header-left":"s__BufjSHLRB2J5OVXXCxmb",title:"s__DZYSL_WSIuYyIcn1lOOx","title-small":"s__yQlXw9Tz_61vd8CUKX6A","button-change-container":"s__I7o3CZwjSkcySg3iCdJb"};const Ze=m.bind(Ve),Ge=(0,r.memo)((({className:e,title:t,isSelected:a=!1,price:s,basePrice:i,options:n,isButtonVisible:o=!1,buyButtonSlot:d=null,additionalTextSlot:u=null,changeFareButtonSlot:p=null,onClick:g=De,onUpgradeClick:m=De,showPrice:h=!0})=>{const _=Ze(Ve.root,e,{isSelected:a,clickable:g!==De}),y=(0,r.useCallback)((e=>{e.stopPropagation(),m()}),[m]),k=(0,Me.s)(n);return(0,f.jsx)("div",{className:_,onClick:g,children:(0,f.jsxs)("div",{className:Ve.inner,children:[t&&h&&(0,f.jsxs)("div",{className:Ve.header,children:[(0,f.jsxs)("div",{className:Ve["header-left"],children:[(0,f.jsx)(l.x,{className:Ve.title,type:c.y.Body2Semi,children:t}),h&&s&&(0,f.jsx)(Oe,{price:s,basePrice:i})]}),d]}),t&&!h&&(0,f.jsx)("div",{className:Ve["header-small"],children:(0,f.jsx)(l.x,{className:Ve["title-small"],type:c.y.Body1Bold,children:t})}),n&&(0,f.jsx)(He.a,{className:Ve.options,options:k}),u,p,o&&s&&(0,f.jsx)("div",{className:Ve["button-change-container"],children:(0,f.jsx)(Ue,{onClick:y,price:s,basePrice:i})})]})})}));Ge.displayName="FareCard";var Ke=a(36519),Xe=a(35887),Qe=a(129),We=a(66864),Ye=a(85622),Je=a(34633);var et={variables:"s__UnHsruLaAma920NEuUTd",root:"s__egLIB479Cw5FblQJWSBG",content:"s__dO4HZdKhQzQXcCrVtNMA",notAvailable:"s__SU3HGJzct4l9rrMZXlZY",itemName:"s__UZddvlEQS3NYNLJRfPhn",itemCount:"s__F4b5k7zt0gZW7TPOzJFA",iconWrap:"s__uYgYokW5yXqB8uhGTAMB",withoutBorder:"s__KsoQtadEknDfGadx0_aw",itemInner:"s__vdj5bnUm71OIwi3EMmsQ",itemContainer:"s__jjfnz4mhQpKS7jtFg0PZ",icon:"s__jx79NLUkRiCpuq7uPl8f",itemDescription:"s__PasuqpYBpzVCOIwkTj8R",disclaimer:"s__OJ6BqfLV1H6N4umDO0bE",disclaimerChildren:"s__o36nsrci3xF1oUo4IDn0"};const tt=({text:e,className:t})=>(0,f.jsx)(l.x,{className:_(et.disclaimer,[t]),testId:"flight-info-luggage-disclaimer",type:c.y.Body2Regular,children:e}),at=(0,r.memo)((({bags:e,passengers:t})=>{const{t:a}=(0,n.useTranslation)("uiKit"),s=(0,Y.d)("size_dimensions"),r=(0,Y.d)("mass_regular"),i=(e=>!e[Ke.F.Handbags]&&!e[Ke.F.Baggage])(e),o=!e[Ke.F.Baggage],d=!(!t.children&&!t.infants),u=t.adults,p=!!e[Ke.F.Baggage]?.count;return(0,f.jsxs)("div",{className:_(et.variables,et.root),children:[(0,f.jsx)(l.x,{type:c.y.Body1Semi,children:i?a("flight_info.luggage.title.isUnknown"):a("flight_info.luggage.title.withCount",{count:u})}),i?(0,f.jsx)(tt,{text:a("flight_info.luggage.disclaimer.unknownLuggage"),className:"--single"}):(0,f.jsxs)(f.Fragment,{children:[d&&p&&(0,f.jsx)(tt,{text:a("flight_info.luggage.disclaimer.children"),className:et.disclaimerChildren}),(0,f.jsx)("div",{className:et.content,"data-test-id":"flight-info-luggage-content",children:[Ke.F.Handbags,Ke.F.Baggage].map((t=>{const i=((e,t)=>t===Ke.F.Handbags?(e=>!e[Ke.F.Handbags]&&e[Ke.F.Baggage]?.count?{count:1,source:""}:e[Ke.F.Handbags])(e):e[t])(e,t),n=!!i?.count,d=i?.weight,p=C(d)?r(W.fb.kilogram(d)):null,g=i?.dimensions,m=g&&(0,Xe.z)(g),h=(({weight:e,dimensions:t})=>e&&t?`${e}, ${t}`:e&&!t?e:!e&&t?t:null)({weight:p,dimensions:m&&s(m)}),y=(({bagInfo:e,passengersCount:t,t:a})=>{let s;return s=e?e.count?a("flight_info.luggage.count.available",{count:e.count*t}):a("flight_info.luggage.count.notIncluded"):a("flight_info.luggage.count.unknown"),s})({bagInfo:i,passengersCount:u,t:a}),k=((e,t)=>t===Ke.F.Handbags?(e=>e?Ye.r:Je.E)(e):(e=>e?Qe.$:We.m)(e))(n,t),v=n?`--${t}-available`:`--${t}-not-available`,b=t===Ke.F.Baggage&&!o;return(0,f.jsx)("div",{className:_(et.item,{[et.notAvailable]:!n,[et.withoutBorder]:b}),children:(0,f.jsxs)("div",{className:et.itemContainer,children:[(0,f.jsx)("div",{className:et.iconWrap,children:(0,f.jsx)(k,{className:_(et.icon,[v]),"data-test-id":"flight-info-luggage-icon"})}),(0,f.jsxs)("div",{className:et.itemInner,children:[(0,f.jsxs)("div",{children:[(0,f.jsx)(l.x,{className:et.itemName,type:c.y.Body2Regular,children:a(`flight_info.luggage.type.${t}`)}),h&&(0,f.jsx)(l.x,{className:et.itemDescription,type:c.y.Body3Regular,testId:"flight-info-luggage-desc",children:h})]}),(0,f.jsx)("div",{children:(0,f.jsx)(l.x,{className:et.itemCount,type:c.y.Body2Semi,children:y})})]})]})},t)}))}),o&&(0,f.jsx)(tt,{text:a("flight_info.luggage.disclaimer.unknownLuggage"),className:"--bottom"})]})]})}));at.displayName="BaggageCard";const st=({className:e,passengersInfo:t,bagsInfo:a,fareOptions:s=[]})=>0!==s.length?(0,f.jsx)("div",{className:e,children:(0,f.jsx)(Ge,{options:s})}):t?(0,f.jsx)("div",{className:e,children:(0,f.jsx)(at,{bags:a,passengers:t})}):null;var rt=a(77015);const it=(0,r.memo)((({flight:e,flightInfo:t,status:a,bagsInfo:s,marketingCarrier:i,passengersInfo:o,fareOptions:d,onCarrierLogoClick:g,getAirlineName:m,showHeaderTitle:h=!0,onHeaderTitleVisibilityChange:k,fareSlot:v})=>{const{t:b}=(0,n.useTranslation)("uiKit"),x=(N=t,(0,r.useMemo)((()=>{return N?.amenities?.layout?.rowLayout?(e=N?.amenities?.layout?.rowLayout,e.split("-").map(Number).reduce(((e,t)=>e+t),0)>6?"wide":"narrow"):null;var e}),[N?.amenities?.layout?.rowLayout])),C=((e,t)=>{const{t:a}=(0,n.useTranslation)("uiKit"),s=(0,je.DR)({durationMinutes:t.duration});return(0,r.useMemo)((()=>{if("plane"!==(t.transport||"plane"))return a("ticket.itinerary.tripDuration",{duration:s});const r=t.aircraft||((e={})=>we([$e,Ce(Se(1)),xe])(e))(e?.aircraftsFrequencies);return r?a("ticket.flightInfo.flightDurationOnAircraft",{duration:s,aircraft:r}):a("ticket.itinerary.flightDuration",{duration:s})}),[e,t,a,s])})(t,e),S=e.airlineId!==i.airlineId,w=`${i.carrier}-${i.number}`,$=r.useRef(null),j=r.useRef(null),I=y(100,(()=>{const e=$?.current?.parentElement;if(!e||!j?.current)return;const{top:t}=e.getBoundingClientRect(),{top:a}=j.current.getBoundingClientRect(),s=!(a<=t-j.current.clientHeight+8);k&&k(s)}));var N;return r.useEffect((()=>{const e=$?.current?.parentElement;return e?.addEventListener("scroll",I),()=>{e?.removeEventListener("scroll",I)}}),[$,I]),(0,f.jsxs)("div",{className:_("s__iXiifiPOilSvpFwuGgMT","s__WaZo_SvW82dgKqgLI0bQ","s__OGr956na3c9gQwy9yCaC"),ref:$,children:[(0,f.jsx)(Te,{className:"s__sfoEwoL3eZ2CrpCAr1iY",flightDurationTitle:C,aircraftWidthType:x,flightName:w,showHeaderTitle:h,headerFlightTitleRef:j}),(0,f.jsxs)("div",{className:"s__j7WWEyIvdd7H1uFoQk4x",children:[S&&(0,f.jsx)(Pe,{className:fe,carrierIata:e.operatingCarrier,onCarrierLogoClick:g,getAirlineName:m}),Boolean(v)&&(0,f.jsx)("div",{className:_e,children:v}),s&&(0,f.jsx)(st,{className:_(_e,{s__d_fP_h8yT2Boyc_eIbGu:a===rt.e.Pending}),bagsInfo:s,passengersInfo:o,fareOptions:d}),a===rt.e.Pending&&(0,f.jsx)("div",{className:fe,children:(0,f.jsx)("div",{className:ke,children:(0,f.jsx)(u.$,{size:p.Ey.L,priority:p.Ly.Primary,className:"card-spinner"})})}),a===rt.e.Failure&&(0,f.jsx)("div",{className:fe,children:(0,f.jsx)("div",{className:ke,children:(0,f.jsx)(l.x,{type:c.y.Body2Regular,className:"s__QF9HDQp7aG4ohUT0epKg",children:b("ticket.flightInfo.emptyData")})})}),a===rt.e.Success&&t&&(0,f.jsx)(Ie,{flightInfo:t})]})]})}));it.displayName="FlightInfo";const nt=({model:e,fareSlot:t,handleHeaderTitleVisibilityChange:a})=>{const{outputs:s,inputs:n}=e,{airlines:o,flight:l,flightInfo:c,status:d,bagsInfo:u,marketingCarrier:p,passengersInfo:g,fareOptions:m,carrierLogoClicked:h}=(0,i.useUnit)({airlines:s.$airlines,flight:s.$flight,flightInfo:s.$flightInfo,status:s.$commonStatus,bagsInfo:s.$bagsInfo,marketingCarrier:s.$marketingCarrier,passengersInfo:s.$passengersInfo,fareOptions:s.$fareOptions,carrierLogoClicked:n.carrierLogoClicked}),_=(0,r.useCallback)((e=>o[e]?.name||e),[o]),y=(0,r.useCallback)((()=>{if(p&&l){const e={marketingCarrierIata:p.carrier,marketingCarrierName:_(p.carrier),operatingCarrierIata:l.operatingCarrier,operatingCarrierName:_(l.operatingCarrier)};h(e)}}),[h,l,_,p]);return p&&l?(0,f.jsx)(it,{flight:l,flightInfo:c,status:d,bagsInfo:u,passengersInfo:g,fareOptions:m,marketingCarrier:p,onCarrierLogoClick:y,getAirlineName:_,showHeaderTitle:!0,onHeaderTitleVisibilityChange:a,fareSlot:t}):null},ot=h().bind({"root-spinner":"s__v_f0P4bdUHtCB9cWhKVU"});var lt=a(98116),ct=a(21247),dt=a(47047),ut=a(27636),pt=a(37213),gt=a(54236),mt=a(4517),ht=a(43639),ft=a(78194),_t=a(55902),yt=a(63877);const kt=(e,t,a,s)=>{const r="done"===e&&$()(a),i="done"===t&&$()(s),n=("fail"===e||r)&&("fail"===t||i);return t===rt.e.Pending||e===rt.e.Pending?rt.e.Pending:n?rt.e.Failure:"done"===t||"done"===e?rt.e.Success:rt.e.Idle},vt=(e,t,a)=>a?{delay:t?.delay,aircraftsFrequencies:e||void 0,stats:t?.stats}:{},bt=e=>(t,a)=>a&&a.available?a.available&&a.penalty&&0===a.penalty.value?{text:t(`service_ticket_flight_info:fares:${e}.available`),availability:"available"}:{text:t(`service_ticket_flight_info:fares:${e}.partiallyAvailable`),availability:"available"}:{text:t(`service_ticket_flight_info:fares:${e}.notAvailable`),availability:"not_available"},xt=e=>(t,a,s)=>{if(!s||0===s.count)return{text:a(`service_ticket_flight_info:fares:${e}.notAvailable`),availability:"not_available"};if(s.weight){const r=t("mass_regular",W.fb.kilogram(s.weight));return{text:a(`service_ticket_flight_info:fares:${e}.withWeight`,{count:s.count,weight:r}),availability:"available",dimension:s.dimensions,sumDimension:s.sumDimension}}return{text:a(`service_ticket_flight_info:fares:${e}.available`),availability:"available",dimension:s.dimensions,sumDimension:s.sumDimension}},Ct=xt("baggage"),St=xt("handbags"),wt=bt("change"),$t=bt("return");var jt=a(76588),It=a(80472),Nt=a(35529);const Ft=(0,Nt.Dictionary)(Nt.Number,Nt.String),Bt=(0,Nt.Record)({aircrafts_frequencies:Ft}),Et=(0,Nt.Dictionary)(Nt.Unknown),Pt=(0,Nt.Dictionary)(Nt.Unknown),Tt=(0,Nt.Dictionary)(Nt.Unknown),Dt=(0,Nt.Dictionary)(Nt.Unknown),Rt=(0,Nt.Dictionary)(Nt.Unknown),At=(0,Nt.Dictionary)(Nt.Unknown),Lt=(0,Nt.Dictionary)(Nt.Unknown),Ot=(0,Nt.Record)({wifi:Lt,food:At,entertainment:Rt,power:Dt,beverages:Pt,layout:Tt}),Ht=(0,Nt.Record)({amenities:(0,Nt.Optional)(Ot),seat:(0,Nt.Optional)(Et)}),zt=((0,Nt.Record)({flight_info:Ht}),(0,Nt.Record)({departureAirportFsCode:Nt.String,arrivalAirportFsCode:Nt.String,airlineFsCode:Nt.String,flightNumber:Nt.String,codeshares:Nt.Number,directs:Nt.Number,observations:Nt.Number,ontime:Nt.Number,late15:Nt.Number,late30:Nt.Number,late45:Nt.Number,cancelled:Nt.Number,diverted:Nt.Number,ontimePercent:Nt.Number,delayObservations:Nt.Number,delayMean:Nt.Number,delayStandardDeviation:Nt.Number,delayMin:Nt.Number,delayMax:Nt.Number,allOntimeCumulative:Nt.Number,allOntimeStars:Nt.Number,allDelayCumulative:Nt.Number,allDelayStars:Nt.Number,allStars:Nt.Number})),qt=(0,Nt.Record)({fs:Nt.String,iata:Nt.String,icao:Nt.String,name:Nt.String,phoneNumber:(0,Nt.Optional)(Nt.String),active:Nt.Boolean}),Ut=(0,Nt.Record)({fs:Nt.String,iata:Nt.String,icao:Nt.String,faa:Nt.String,name:Nt.String,street1:(0,Nt.Optional)(Nt.String),city:Nt.String,cityCode:Nt.String,stateCode:(0,Nt.Optional)(Nt.String),postalCode:(0,Nt.Optional)(Nt.String),countryCode:Nt.String,countryName:Nt.String,regionName:Nt.String,timeZoneRegionName:Nt.String,weatherZone:Nt.String,localTime:Nt.String,utcOffsetHours:Nt.Number,latitude:Nt.Number,longitude:Nt.Number,elevationFeet:Nt.Number,classification:Nt.Number,active:Nt.Boolean}),Mt=(0,Nt.Record)({ratings:(0,Nt.Array)(zt),request:(0,Nt.Record)({airlineCode:(0,Nt.Record)({requestedCode:Nt.String,fsCode:Nt.String}),flightNumber:(0,Nt.Record)({requested:Nt.String,interpreted:Nt.String}),departureAirport:(0,Nt.Optional)((0,Nt.Dictionary)(Nt.Unknown)),codeType:(0,Nt.Optional)((0,Nt.Dictionary)(Nt.Unknown)),url:Nt.String}),appendix:(0,Nt.Record)({airlines:(0,Nt.Array)(qt),airports:(0,Nt.Array)(Ut)})});var Vt=a(2568),Zt=a.n(Vt),Gt=a(57640);const Kt=e=>Gt.H.FLIGHT_API_URL.includes("://")?"":`${e.includes("://")?"":"https://"}${e}`,Xt=(0,lt.withFactory)({sid:"2r2o3",fn:()=>(0,jt.s5)({params:(0,lt.withFactory)({sid:"804jng",fn:()=>(0,jt.t6)()}),request:{method:"GET",url:e=>(e=>{const t=`${e.flight.operating_carrier}${e.flight.number}`,a=Zt()(`complex_master_api_token_here:${t}`);return`${Kt(e.locationHost)}${Gt.H.FLIGHT_API_URL}/v1/flights/${t}.json?signature=${a}`})(e)},response:{contract:(0,It.v)(Bt),mapData:({result:e})=>$()(e)?null:(e=>{const t=e.aircrafts_frequencies;return Object.keys(t).length?Object.keys(t).reduce(((e,a)=>(e[a]=Math.round(100*t[a]),e)),{}):null})(e)}})}),Qt=(0,lt.withFactory)({sid:"nvw2mm",fn:()=>(0,jt.s5)({params:(0,lt.withFactory)({sid:"5sygqf",fn:()=>(0,jt.t6)()}),request:{method:"GET",url:e=>(e=>{const t=`${e.flight.operating_carrier}-${e.flight.number}`,a=Zt()(`complex_master_api_token_here:${t}`);return`${Kt(e.locationHost)}${Gt.H.FLIGHT_API_URL}/reports/${t}.json?signature=${a}`})(e)},response:{contract:(0,It.v)(Mt),mapData:({result:e})=>{const t=e?.ratings;return $()(t)?null:(e=>{const[t]=e;return{delay:t?{percent:Math.round(100-100*(t.ontimePercent||1)),mean:t.delayMean}:void 0,stats:t?{observations:t.observations,ontime:t.ontime,late15:t.late15,late30:t.late30,late45:t.late45,cancelled:t.cancelled,diverted:t.diverted}:void 0}})(t)}}})}),Wt=(0,lt.withFactory)({sid:"-qun9sd",fn:()=>(0,dt.s)((({$tripClass:e,$segments:t,$passengers:a,$flightTerms:s,$airlines:r,$buttonProposal:i})=>{const n=(0,lt.createEvent)({sid:"6xqnm6"}),o=(0,lt.createEvent)({sid:"g2ucz9"}),l=(0,lt.createEvent)({sid:"twd5a"}),c=(0,lt.createEvent)({sid:"rebl85"}),d=(0,lt.createEvent)({sid:"-gspgqc"}),u=(0,lt.createStore)(null,{sid:"-645196"}).reset(o),p=(0,lt.createStore)(null,{sid:"ox6zup"}).reset(o),g=(0,lt.createStore)(null,{sid:"-3xm4jx"}).reset(o),m=(0,lt.createStore)(null,{sid:"3jmal8"}).reset(o),h=(0,lt.createStore)([],{sid:"-lhzfad"}).reset(o),f=(0,lt.createStore)(null,{sid:"-j2kkjl"}).reset(o),_=(0,lt.createStore)(!1,{sid:"m81ahk"}).on(c,(()=>!0)).reset(o),y=(0,lt.createStore)(!1,{sid:"1q9lve"}).on(d,(()=>!0)).reset(o),k=(0,lt.combine)({and:[Xt.$status,Qt.$status,Xt.$data,Qt.$data,kt],or:{sid:"h6u6tr"}}),v=k.map((e=>[rt.e.Success,rt.e.Failure].includes(e)));(0,lt.sample)({and:[{clock:c,target:u}],or:{sid:"-956xm3"}});const[b,x]=(0,lt.withFactory)({sid:"hkmw78",fn:()=>(0,ut.K)((0,lt.combine)({and:[Xt.$data,Qt.$data,v,vt],or:{sid:"-br5e3e"}}))});return(0,lt.sample)({and:[{clock:d,source:{locale:gt.z.outputs.$localeDeprecated,lengthUnit:ht.J.outputs.$lengthUnit,marker:pt.b.outputs.$marker,segments:t,tripClass:e},fn:({locale:e,lengthUnit:t,marker:a,segments:s,tripClass:r},i)=>{const n=i?.segmentIndex,o=i?.flightIndex;if(S()(n)&&S()(o)&&s){const i=s[n]?.flights?.[o],l=window.location.host,c="kilometer"===t?_t._z.CM:_t._z.INCH;return(0,yt.j)(i,l,e,a,r,c)}return null},target:n}],or:{sid:"-8aegdv"}}),(0,lt.sample)({and:[{clock:d,source:{segments:t},fn:({segments:e},t)=>{const a=t?.segmentIndex,s=t?.flightIndex;return S()(a)&&S()(s)&&e?e[a]?.flights?.[s]:null},target:p}],or:{sid:"-6e7yt3"}}),(0,lt.sample)({and:[{clock:d,source:{flightTerms:s,passengersInfo:a,faresV2Flag:mt.r.outputs.$faresV2Flag,faresV1Flag:mt.r.outputs.$faresFlag,translate:ft.J.outputs.$t,localize:ht.J.outputs.$localize,buttonProposal:i},fn:({flightTerms:e,passengersInfo:t,faresV2Flag:a,faresV1Flag:s,translate:r,localize:i,buttonProposal:n},o)=>{const l=a.enabled,c=s.enabled;if(e&&o){const{segmentIndex:a,flightIndex:s}=o,d=e[a][s],{marketingCarrierDesignator:u}=d;if(l)return{marketingCarrier:u};const p={passengersInfo:t,bagsInfo:{[Ke.F.Baggage]:d.baggage,[Ke.F.Handbags]:d.handbags},marketingCarrier:u};return n&&(p.fareOptions=(({translate:e,localize:t,proposal:a,segmentIndex:s,flightIndex:r,isFaresExpEnabled:i})=>{if(!i)return[];const n=a.flightTerms[s][r],o={code:n.fareCode,handbags:n.handbags,baggage:n.baggage,...n.additionalTariffInfo};return[St(t,e,o.handbags),Ct(t,e,o.baggage),wt(e,o.changeBeforeFlight),$t(e,o.returnBeforeFlight)]})({segmentIndex:a,flightIndex:s,translate:r,localize:i,proposal:n,isFaresExpEnabled:c})),p}return{}},target:(0,lt.withFactory)({sid:"-z24i7z",fn:()=>(0,ct.h)({fareOptions:h,bagsInfo:g,marketingCarrier:f,passengersInfo:m})})}],or:{sid:"-5s872n"}}),(0,lt.sample)({and:[{clock:n,filter:Boolean,target:[Xt.start,Qt.start]}],or:{sid:"7vvnzk"}}),{outputs:{$commonStatus:k,$flightInfo:b,$flight:p,$bagsInfo:g,$marketingCarrier:f,$passengersInfo:m,$fareOptions:h,$isOpen:_,$isRequestCompleted:v,$airlines:r,fetchData:n,$isShown:y,$flightInfoParams:u},inputs:{carrierLogoClicked:l,flightInfoModalClosed:o,flightInfoShowed:d,flightInfoModalOpened:c},internals:{$flightInfoOverride:x}}}))}),Yt=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp_ticket/services/flight_info/index.ts",api:{inputs:{createFlightInfo:Wt},containers:{FlightInfoModalContainer:({model:e,fareSlot:t})=>{const{outputs:a,inputs:s}=e,{marketingCarrier:m,flightInfoModalClosedEvent:h,isOpen:_,isShown:y}=(0,i.useUnit)({marketingCarrier:a.$marketingCarrier,flightInfoModalClosedEvent:s.flightInfoModalClosed,isOpen:a.$isOpen,isShown:a.$isShown}),{t:k}=(0,n.useTranslation)("widget_flight_info"),[v,b]=(0,r.useState)(!1),x=(0,r.useCallback)((e=>{b(!e)}),[b]),C=k("header",{flightName:`${m?.carrier}-${m?.number}`}),S=(0,r.useMemo)((()=>!y&&_?(0,f.jsx)("div",{className:ot("root-spinner"),children:(0,f.jsx)(u.$,{size:p.Ey.L,priority:p.Ly.Primary})}):(0,f.jsx)(nt,{model:e,fareSlot:t,handleHeaderTitleVisibilityChange:x})),[y,_,e,t,x]);return(0,f.jsxs)(o.G,{visible:_,onClose:h,theme:"gray",children:[(0,f.jsxs)(o.G.Navigation,{children:[(0,f.jsx)(d.w.Title,{children:v&&(0,f.jsx)(l.x,{type:c.y.Body1Semi,children:C})}),(0,f.jsx)(d.w.RightAccessory,{children:(0,f.jsx)(g.P,{onClick:h})})]}),S]})}}}})},81833:function(e,t,a){"use strict";a.d(t,{m:function(){return Pe}});var s=a(30091),r=a(98116),i=a(65454),n=a(23588),o=a(31401),l=a(90722),c=a(53788),d=a(47047),u=a(31438),p=a(76588),g=a(49546),m=a.n(g),h=a(69195),f=a(47420),_=a(76586),y=a(27497),k=a(4517),v=a(68557),b=a(37762),x=a(66672),C=a(4449),S=a(55902),w=a(80472),$=a(54824),j=a(35529);const I=(0,j.Record)({data:(0,j.Record)({search:(0,j.Record)({ticket:(0,j.Record)({flightFare:(0,j.Record)({options:(0,j.Array)(S.YY)})})}).nullable()}),errors:S.DY}),N=(0,r.withFactory)({sid:"9pebiq",fn:()=>(0,$.$)({name:"Blet-Fare-For-Legacy-Flight-Info",params:(0,r.withFactory)({sid:"-wsd3pv",fn:()=>(0,p.t6)()}),graphQL:{query:"query GetFareForLegacyFlightInfo(\n    $searchId: String!,\n    $locale: Language!,\n    $filters: FiltersStateInput,\n    $signature: String!,\n    $directFlightGroupKey: String,\n    $bletFiltersInput: BletFiltersInput,\n    $flightNumber: FlightNumber!\n  ){\n  search(\n    searchId: $searchId,\n    locale: $locale,\n    filters: $filters,\n  ) {\n    ticket(signature: $signature, directFlightGroupKey: $directFlightGroupKey, bletFiltersInput: $bletFiltersInput) {\n      flightFare (flightNumber: $flightNumber) {\n        options {\n          mainText\n          secondaryText\n          isDimensionsIconVisible\n          tooltipText\n          tooltipInformerType\n          state\n        }\n      }\n    }\n  }\n}",variables:e=>e},request:{url:v.d.outputs.$url},response:{mapData:({result:e})=>e.data.search?.ticket.flightFare||null,contract:(0,w.v)(I)}})}),{createFlightInfo:F}=x.i.inputs,B=h.r.outputs.$ticket.map((e=>e?e.segments:[])),E=(0,r.createEvent)({sid:"fva62r"}),P=(0,r.createEvent)({sid:"z7qnay"}),T=(0,r.combine)({and:[{ticketProposals:h.r.outputs.$filteredTicketProposals},({ticketProposals:e})=>e?e[0]:null],or:{sid:"2ho5fp"}}),D=T.map((e=>e?.flightTerms??[])),R=(0,r.createEvent)({sid:"k9k2zw"}),{outputs:A,inputs:L,internals:O}=(0,r.withFactory)({sid:"-8mke6b",fn:()=>(0,d.d)(F,{$airlines:b.x.outputs.$airlines,$tripClass:f.i.outputs.$tripClass,$passengers:f.i.outputs.$passengers,$segments:B,$flightTerms:D,$buttonProposal:T})}),{carrierLogoClicked:H,flightInfoModalOpened:z,flightInfoModalClosed:q,flightInfoShowed:U}=L,M=(0,r.createStore)(!1,{sid:"lvvjdd"}).on(E,(()=>!0)).reset([q,P]),V=(0,r.createStore)(!1,{sid:"uwatre"}).reset(q),{$commonStatus:Z,$flightInfo:G,$flight:K,$bagsInfo:X,$marketingCarrier:Q,$passengersInfo:W,$fareOptions:Y,$isOpen:J,fetchData:ee,$isRequestCompleted:te,$flightInfoParams:ae,$isShown:se}=A;(0,r.sample)({and:[{clock:ee,source:{faresV2Flag:k.r.outputs.$faresV2Flag,variables:v.d.outputs.$variables,isSearchExpired:y.N.outputs.$isSearchExpired},filter:({faresV2Flag:e,isSearchExpired:t})=>e.enabled&&!t,fn:({variables:e},t)=>({...e,flightNumber:{airlineId:t?.flight.airlineId,number:t?.flight.number}}),target:N.start}],or:{sid:"-lcmbr7"}}),(0,r.sample)({and:[{clock:z,source:{areTicketChangeHandlersBlocked:C.X.outputs.$areTicketChangeHandlersBlocked},filter:({areTicketChangeHandlersBlocked:e})=>!e,fn:(e,t)=>t,target:U}],or:{sid:"d09zxy"}}),(0,r.sample)({and:[{clock:(0,r.combine)({and:[J,e=>e],or:{sid:"s9b6lf"}}),target:_.hO.inputs.flightInfoModalVisibleChanged}],or:{sid:"djispl"}}),(0,r.sample)({and:[{clock:y.N.outputs.$searchStatus,filter:e=>e===u.S.Started,target:q}],or:{sid:"dm9roe"}}),(0,r.sample)({and:[{clock:te,filter:Boolean,target:R}],or:{sid:"e147p5"}}),(0,r.sample)({and:[{clock:q,target:N.reset}],or:{sid:"efynpw"}}),(0,r.sample)({and:[{clock:N.finished.failure,filter:p.eE,fn:({error:e})=>({type:S.PB.UserOffline,message:`${e?.explanation||""}`,error:e}),target:E}],or:{sid:"eipmop"}}),(0,r.sample)({and:[{clock:N.finished.failure,filter:p.QO,fn:({error:e})=>({type:S.PB.ParseError,message:`${e?.explanation||""}`,error:e}),target:E}],or:{sid:"f1emuz"}}),(0,r.sample)({and:[{clock:P,source:{flightInfoParams:ae,segments:B,variables:v.d.outputs.$variables},filter:({flightInfoParams:e,segments:t})=>{const a=e?.segmentIndex,s=e?.flightIndex;return Boolean(m()(a)&&m()(s)&&t)},fn:({flightInfoParams:e,segments:t,variables:a})=>{const s=e?.segmentIndex,r=e?.flightIndex,i=t[s]?.flights?.[r];return{...a,flightNumber:{airlineId:i.airlineId,number:i.number}}},target:N.start}],or:{sid:"fvnbhu"}}),(0,r.sample)({and:[{clock:P,filter:te,fn:()=>!0,target:V}],or:{sid:"r7mnrs"}}),(0,r.sample)({and:[{clock:te,source:{pending:N.$pending},filter:({pending:e},t)=>Boolean(t)&&e,fn:()=>!0,target:V}],or:{sid:"rbh7xb"}}),(0,r.sample)({and:[{clock:N.finished.finally,fn:()=>!1,target:V}],or:{sid:"rt2mwv"}}),(0,r.sample)({and:[{clock:N.finished.failure,filter:e=>!(0,r.withFactory)({sid:"-b51u2i",fn:()=>(0,p.eE)(e)})&&!(0,r.withFactory)({sid:"-b51sfy",fn:()=>(0,p.QO)(e)}),fn:({error:e})=>{const t=e?.response?.errors?.[0],a=t?.message||"",s=S.PB.SystemError,r=t?.path,i=e?.status;return{type:s,message:a,path:r,status:i,error:e}},target:E}],or:{sid:"s7x2xm"}});const re=k.r.outputs.$faresV2Flag.map((({enabled:e})=>e)),ie={outputs:{$commonStatus:Z,$flightInfo:G,$flight:K,$bagsInfo:X,$marketingCarrier:Q,$passengersInfo:W,$fareOptions:Y,$isOpen:J,$bletFare:N.$data,$airlines:b.x.outputs.$airlines,$flightInfoParams:ae,$isShown:se,$isFaresFlightInfoBletError:M,$isFaresFlightInfoSpinnerVisible:V,$isRequestCompleted:te,$isFaresV2ExperimentEnabled:re},inputs:{carrierLogoClicked:H,flightInfoModalOpened:z,flightInfoShowed:U,flightInfoModalClosed:q,retryFaresFlightInfoRequest:P},internals:{analyticsSent:R,$flightInfoOverride:O.$flightInfoOverride}},{inputs:ne,outputs:oe}=ie;(0,r.sample)({and:[{clock:ne.carrierLogoClicked,target:i.FH.inputs.contentDataUpdated}],or:{sid:"-nujhb6"}}),(0,r.sample)({and:[{clock:n.z.outputs.ticketFlightInfoOpened,target:ne.flightInfoModalOpened}],or:{sid:"-nrsicd"}}),(0,r.sample)({and:[{clock:oe.$isRequestCompleted,source:c.D.outputs.$market,filter:(e,t)=>t,fn:e=>({title:[o.qb.FlightInfoShowed,e].join("__")}),target:l.x.inputs.sendUxFeedback}],or:{sid:"-ndhuwz"}});const{inputs:le,outputs:ce}=ie;(0,r.sample)({and:[{clock:C.X.outputs.$areTicketChangeHandlersBlocked,source:{flightInfoParams:ce.$flightInfoParams,isOpen:ce.$isOpen,isShown:ce.$isShown},filter:({isOpen:e,isShown:t},a)=>!a&&e&&!t,fn:({flightInfoParams:e})=>e,target:le.flightInfoShowed}],or:{sid:"lpyzcd"}});var de=a(67294),ue=a(47166),pe=a.n(ue),ge=a(4190),me=a(28225),he=a(6328),fe=a(99491),_e=a(57729),ye=a(89677),ke=a(97374),ve=a(85893);const{FlightInfoModalContainer:be}=x.i.containers,{outputs:xe,inputs:Ce}=ie,{$bletFare:Se,$isFaresFlightInfoBletError:we,$isFaresFlightInfoSpinnerVisible:$e,$isFaresV2ExperimentEnabled:je,...Ie}=xe,Ne=pe().bind({"blet-fare":"s__ZDRU4GfQB8Qcz7L1uWhB","root-spinner":"s__kb1y4BQbYbfR6EteN8Cz"}),{inputs:Fe,outputs:Be,internals:Ee}=ie,Pe=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp_ticket/services/ticket_flight_info/index.ts",api:{inputs:Fe,outputs:Be,internals:Ee,containers:{TicketFlightInfoContainer:()=>{const{t:e}=(0,me.useTranslation)("service_ticket_flight_info"),{bletFare:t,fareInformerOpened:a,isFaresFlightInfoBletError:s,retryFaresFlightInfoRequest:r,isFaresFlightInfoSpinnerVisible:i,isFaresV2ExperimentEnabled:n}=(0,ge.useUnit)({bletFare:Se,fareInformerOpened:ye.K.inputs.fareInformerOpened,isFaresFlightInfoBletError:we,isFaresFlightInfoSpinnerVisible:$e,retryFaresFlightInfoRequest:Ce.retryFaresFlightInfoRequest,isFaresV2ExperimentEnabled:je}),o=(0,de.useMemo)((()=>n?s?(0,ve.jsx)(_e.t,{onActionButtonClick:r,withBackground:!0,customTitle:e("fares.errorTitle"),className:Ne("blet-fare")}):i?(0,ve.jsx)("div",{className:Ne("root-spinner"),children:(0,ve.jsx)(he.$,{size:fe.Ey.L,priority:fe.Ly.Primary})}):t?(0,ve.jsx)(ke.a,{options:t.options,onInformerTooltipClick:a,className:Ne("blet-fare")}):null:null),[n,t,a,s,r,i,e]);return(0,ve.jsx)(be,{model:{inputs:ie.inputs,outputs:Ie},fareSlot:o})}}}})},27114:function(e,t,a){"use strict";a.d(t,{t:function(){return y}});var s=a(30091),r=a(4190),i=a(38387),n=a(74169),o=a(47166),l=a.n(o),c=a(4407),d=a(76323),u=a(36388),p=a(49963),g=a(44619),m=a(85893);const h=l().bind({root:"s__i4HcPZFIKEF3OLqWdXyM",img:"s__Y9Up_hzYasHVMu1A18PA",title:"s__Ee6vsHHjZV8WQTB8sryL",subtitle:"s__SMsDvzYgIebON5gsXHun"}),f=({titleText:e,subTitleText:t,image:a,ticketHeadClick:s})=>(0,m.jsxs)("div",{className:h("root"),children:[(0,m.jsx)(c.E,{className:h("img"),width:56,height:56,src:a,onClick:()=>s({zone:"picture"})}),(0,m.jsx)(d.X,{type:u.l.Title2Bold,className:h("title"),onClick:()=>s({zone:"title"}),children:e}),(0,m.jsx)(p.x,{className:h("subtitle"),type:g.y.Body3Regular,onClick:()=>s({zone:"subtitle"}),children:t})]}),_={inputs:{ticketHeadClicked:(0,a(98116).createEvent)({sid:"-6ui5ng"})}},y=(0,s.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/serp_ticket/services/ticket_header/index.ts",api:{inputs:_.inputs,containers:{TicketHeaderContainer:()=>{const{isDesktop:e,data:t,ticketHeadClick:a}=(0,r.useUnit)({isDesktop:i.l.outputs.$isDesktop,data:n.j.outputs.$ticketHeaderData,ticketHeadClick:_.inputs.ticketHeadClicked});if(e||null===t)return null;const{titleText:s,subTitleText:o,image:l}=t;return(0,m.jsx)(f,{titleText:s,subTitleText:o,image:l,ticketHeadClick:a})}}}})},88360:function(e,t,a){var s=a(65776);e.exports=function(e,t){var a=e.length;if(a)return s(t+=t<0?a:0,a)?e[t]:void 0}},32330:function(e,t,a){var s=a(92822)("isBoolean",a(51584),a(69087));s.placeholder=a(69306),e.exports=s},96351:function(e,t,a){var s=a(92822)("maxBy",a(84753));s.placeholder=a(69306),e.exports=s},93325:function(e,t,a){var s=a(92822)("nth",a(98491));s.placeholder=a(69306),e.exports=s},31402:function(e,t,a){var s=a(92822)("nthArg",a(85405));s.placeholder=a(69306),e.exports=s},39104:function(e,t,a){var s=a(92822)("slice",a(12571));s.placeholder=a(69306),e.exports=s},42583:function(e,t,a){var s=a(92822)("toLower",a(7334),a(69087));s.placeholder=a(69306),e.exports=s},51584:function(e,t,a){var s=a(44239),r=a(37005);e.exports=function(e){return!0===e||!1===e||r(e)&&"[object Boolean]"==s(e)}},84753:function(e,t,a){var s=a(56029),r=a(53325),i=a(67206);e.exports=function(e,t){return e&&e.length?s(e,i(t,2),r):void 0}},98491:function(e,t,a){var s=a(88360),r=a(40554);e.exports=function(e,t){return e&&e.length?s(e,r(t)):void 0}},85405:function(e,t,a){var s=a(88360),r=a(5976),i=a(40554);e.exports=function(e){return e=i(e),r((function(t){return s(t,e)}))}},12571:function(e,t,a){var s=a(14259),r=a(16612),i=a(40554);e.exports=function(e,t,a){var n=null==e?0:e.length;return n?(a&&"number"!=typeof a&&r(e,t,a)?(t=0,a=n):(t=null==t?0:i(t),a=void 0===a?n:i(a)),s(e,t,a)):[]}},7334:function(e,t,a){var s=a(79833);e.exports=function(e){return s(e).toLowerCase()}},4923:function(e,t,a){"use strict";a.d(t,{o:function(){return n}});var s=a(85893),r=a(67294);const i=({className:e,...t},a)=>(0,s.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:a,style:{display:"inline-block"},...t,children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.359.067a1 1 0 0 1 .574 1.292L16.533 5H20a1 1 0 0 1 .747 1.664L13 15.38V20c2 0 3 1 3 2H8c0-1 1-2 3-2v-4.62L3.253 6.664A1 1 0 0 1 4 5h10.39L16.067.641a1 1 0 0 1 1.292-.574ZM6.227 7h7.394l-1.154 3H8.894L6.227 7Zm8.88 3 2.666-3h-2.01l-1.153 3h.497Z"})}),n=(0,r.memo)((0,r.forwardRef)(i));n.displayName="Icon24AmenitiesAlco"},16469:function(e,t,a){"use strict";a.d(t,{T:function(){return n}});var s=a(85893),r=a(67294);const i=({className:e,...t},a)=>(0,s.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:a,style:{display:"inline-block"},...t,children:(0,s.jsx)("path",{d:"M4.8 2.4a.8.8 0 0 0-.8.8V8c0 3.726 3.033 3.2 2.858 5.592C6.683 15.985 6.4 18.4 6.4 20a1.6 1.6 0 1 0 3.195-.113c-.011-1.599-.281-3.952-.453-6.295C8.967 11.2 12 11.726 12 8V3.2a.8.8 0 1 0-1.6 0v4a.8.8 0 0 1-1.6 0v-4a.8.8 0 1 0-1.6 0v4a.8.8 0 0 1-1.6 0v-4a.8.8 0 0 0-.8-.8Zm11.2 0a.8.8 0 0 0-.8.8V20a1.6 1.6 0 0 0 3.2 0c0-.058-.004-.115-.01-.172-.033-1.038-.354-2.558-.626-4.012-.307-1.64-.24-2.216.636-2.216S20 12.884 20 12V6.4a3.998 3.998 0 0 0-3.92-3.995A.802.802 0 0 0 16 2.4Z"})}),n=(0,r.memo)((0,r.forwardRef)(i));n.displayName="Icon24AmenitiesFood"},64956:function(e,t,a){"use strict";a.d(t,{G:function(){return n}});var s=a(85893),r=a(67294);const i=({className:e,...t},a)=>(0,s.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:a,style:{display:"inline-block"},...t,children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 8.86v.003c0 .384-.134.77-.402 1.064a1.275 1.275 0 0 1-1.824.095C15.258 5.97 8.716 5.97 4.21 10.032c-.53.487-1.312.434-1.804-.105-.58-.635-.531-1.672.096-2.222 5.52-4.94 13.49-4.94 19 0 .33.296.498.724.498 1.155ZM11.992 20a.919.919 0 0 1-.68-.31l-1.419-1.555c-.453-.497-.347-1.354.203-1.682a3.81 3.81 0 0 1 3.773 0c.579.329.675 1.185.222 1.683l-1.419 1.555a.918.918 0 0 1-.68.309Zm-5.698-5.81c-.588-.645-.55-1.714.116-2.243 3.329-2.634 7.854-2.634 11.174 0 .666.519.704 1.598.125 2.232l-.01.01c-.472.52-1.215.562-1.765.138-2.355-1.83-5.52-1.83-7.874 0-.55.434-1.293.381-1.766-.137Z"})}),n=(0,r.memo)((0,r.forwardRef)(i));n.displayName="Icon24AmenitiesWifi"},49525:function(e,t,a){"use strict";a.d(t,{w:function(){return n}});var s=a(85893),r=a(67294);const i=({className:e,...t},a)=>(0,s.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:a,style:{display:"inline-block"},...t,children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.436 8.84 6.671 4.298c-.487-.252-.944-.339-1.333-.28l7.56 7.26 2.538-2.438ZM4 6.163c0-.51.22-1.302.44-1.604l7.726 7.422-7.744 7.439a1.892 1.892 0 0 0-.168-.203C4.112 19.063 4 18.94 4 18.579V6.163Zm2.67 13.538c-.502.26-.97.345-1.367.276l7.595-7.294 2.555 2.454-8.784 4.564Zm12.268-6.376-2.536 1.319-2.773-2.664 2.757-2.649 2.55 1.322c1.418.734 1.419 1.937.002 2.672Z"})}),n=(0,r.memo)((0,r.forwardRef)(i));n.displayName="Icon24LogotypesGooglePlay"},66864:function(e,t,a){"use strict";a.d(t,{m:function(){return n}});var s=a(85893),r=a(67294);const i=({className:e,...t},a)=>(0,s.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:a,style:{display:"inline-block"},...t,children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2h-1v2h2.2C17.746 5 19 6.26 19 7.813v9.375A2.806 2.806 0 0 1 16.2 20h-.203c-.009.428-.044.672-.184.813C15.624 21 15.25 21 14.5 21s-1.125 0-1.313-.188c-.14-.14-.175-.384-.184-.812h-2.006c-.009.428-.044.672-.184.813C10.624 21 10.25 21 9.5 21s-1.125 0-1.313-.188c-.14-.14-.175-.384-.184-.812H7.8C6.254 20 5 18.74 5 17.187V7.813A2.806 2.806 0 0 1 7.8 5H10V3H9a1 1 0 0 1-1-1Zm3 3h2V3h-2v2Zm1 6.83L9.17 9 8 10.17 10.83 13 8 15.83 9.17 17 12 14.17 14.83 17 16 15.83 13.17 13 16 10.17 14.83 9 12 11.83Z"})}),n=(0,r.memo)((0,r.forwardRef)(i));n.displayName="Icon24LuggageBaggageOff"},129:function(e,t,a){"use strict";a.d(t,{$:function(){return n}});var s=a(85893),r=a(67294);const i=({className:e,...t},a)=>(0,s.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:a,style:{display:"inline-block"},...t,children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2h-1v2h2.2C17.746 5 19 6.26 19 7.813v9.375A2.806 2.806 0 0 1 16.2 20h-.203c-.009.428-.044.672-.184.813C15.624 21 15.25 21 14.5 21s-1.125 0-1.313-.188c-.14-.14-.175-.384-.184-.812h-2.006c-.009.428-.044.672-.184.813C10.624 21 10.25 21 9.5 21s-1.125 0-1.313-.188c-.14-.14-.175-.384-.184-.812H7.8C6.254 20 5 18.74 5 17.187V7.813A2.806 2.806 0 0 1 7.8 5H10V3H9a1 1 0 0 1-1-1Zm3 3h2V3h-2v2Zm6 5.262L15.748 9l-5.431 5.476-2.065-2.081L7 13.656 10.316 17 17 10.262Z"})}),n=(0,r.memo)((0,r.forwardRef)(i));n.displayName="Icon24LuggageBaggageOn"},34633:function(e,t,a){"use strict";a.d(t,{E:function(){return n}});var s=a(85893),r=a(67294);const i=({className:e,...t},a)=>(0,s.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:a,style:{display:"inline-block"},...t,children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 7V6a3 3 0 0 0-3-3h-4a3 3 0 0 0-3 3v1a4 4 0 0 0-4 4v5a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-5a4 4 0 0 0-4-4Zm-7-2h4a1 1 0 0 1 1 1v1H9V6a1 1 0 0 1 1-1Zm2 6.83L9.17 9 8 10.17 10.83 13 8 15.83 9.17 17 12 14.17 14.83 17 16 15.83 13.17 13 16 10.17 14.83 9 12 11.83Z"})}),n=(0,r.memo)((0,r.forwardRef)(i));n.displayName="Icon24LuggageHandOff"},85622:function(e,t,a){"use strict";a.d(t,{r:function(){return n}});var s=a(85893),r=a(67294);const i=({className:e,...t},a)=>(0,s.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:a,style:{display:"inline-block"},...t,children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 7V6a3 3 0 0 0-3-3h-4a3 3 0 0 0-3 3v1a4 4 0 0 0-4 4v5a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-5a4 4 0 0 0-4-4Zm-7-2h4a1 1 0 0 1 1 1v1H9V6a1 1 0 0 1 1-1Zm7 5.262L15.748 9l-5.431 5.476-2.065-2.081L7 13.656 10.316 17 17 10.262Z"})}),n=(0,r.memo)((0,r.forwardRef)(i));n.displayName="Icon24LuggageHandOn"},49960:function(e,t,a){"use strict";a.d(t,{i:function(){return n}});var s=a(85893),r=a(67294);const i=({className:e,...t},a)=>(0,s.jsxs)("svg",{width:36,height:36,viewBox:"0 0 36 36",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:a,style:{display:"inline-block"},...t,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m32.06 6.06-27 27-2.12-2.12 3.33-3.332A4 4 0 0 1 4 24V12a4 4 0 0 1 4-4h17.879l4.06-4.06 2.122 2.12ZM8.88 25l3.56-3.56L11 20h-1l-3 3v1a1 1 0 0 0 1 1h.879Zm1.621-8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"}),(0,s.jsx)("path",{d:"M28 28H14.364l3-3H28a1 1 0 0 0 1-1v-3l-3.818-3.818 6.57-6.57c.16.432.248.9.248 1.388v12a4 4 0 0 1-4 4Z"})]}),n=(0,r.memo)((0,r.forwardRef)(i));n.displayName="Icon36CommonPictureFailed"},4407:function(e,t,a){"use strict";a.d(t,{E:function(){return u}});var s=a(85893),r=a(67294),i=a(94184),n=a(49960);const o=({className:e})=>(0,s.jsx)("div",{className:i("s__zhPlglKFfILcQDdDbXpc",e),children:(0,s.jsx)(n.i,{})});o.displayName="ErrorPlaceholder";const l=(0,r.memo)(o),c=(e,t)=>{const{width:a,height:s,extension:r="",theme:i=""}=t;return e.replace("{width}",a.toString(10)).replace("{height}",s.toString(10)).replace("{extension}",r).replace("{theme}",i)};const d=(0,r.forwardRef)((({lazy:e=!0,fadeIn:t=!0,shimmer:a=!0,contrastOverlay:n=!1,src:o,srcSet:d,srcTemplate:u,width:p,height:g,extension:m,theme:h,alt:f,customLoadingPlaceholder:_,customErrorPlaceholder:y,className:k,imgClassName:v,errorPlaceholderClassName:b,onLoad:x,onError:C,...S},w)=>{const[$,j]=(0,r.useState)(!1),[I,N]=(0,r.useState)(!1),{src:F,srcSet:B}=(0,r.useMemo)((()=>void 0!==u?((e,{width:t,height:a,...s})=>{const r=c(e,{...s,width:t,height:a});return{src:r,srcSet:`${r} 1x, ${c(e,{...s,width:2*t,height:2*a})} 2x, ${c(e,{...s,width:3*t,height:3*a})} 3x`}})(u,{width:p,height:g,extension:m,theme:h}):{src:"string"==typeof o?o:o?.src,srcSet:void 0}),[u,o,p,g,h,m]),E=(0,r.useRef)(null),P=(0,r.useCallback)((e=>{try{x&&x(e),j(!1)}catch(e){N(!0),j(!1)}}),[x]),T=(0,r.useCallback)((e=>{C&&C(e),N(!0),j(!1)}),[C]);return(0,r.useEffect)((()=>{E.current?.complete||!a&&!_||j(!0)}),[]),(0,s.jsxs)("div",{ref:w,className:i("s__nTb4VGFJp3ixAI4eEe9g",{s__rnbDhIV3it6rSU6OnypQ:!0,s__s6lhICQfIvPJajPTRq8l:$&&!_,s__c6LE8aEH0xXFxK7wK7Pl:n&&!$},k),style:{"--image_width":p??o?.width,"--image_height":g??o?.height},children:[I&&(y||(0,s.jsx)(l,{className:b})),$&&_,(0,s.jsx)("img",{src:F,srcSet:d??B,ref:E,className:i({s__u970sMSen6mw5vizRoPD:!0,s__IfTcK9HkqMS6SVk5wCFs:t,s___upxsVkNisXgoGZIqsEJ:!$&&!I},v),loading:e?"lazy":"eager",alt:f||"",onLoad:P,onError:T,...S})]})}));d.displayName="Image";const u=(0,r.memo)(d)},18812:function(e,t,a){"use strict";function s(e){var t,a,r;if(Array.isArray(e)){for(a=Array(t=e.length);t--;)a[t]=(r=e[t])&&"object"==typeof r?s(r):r;return a}if("[object Object]"===Object.prototype.toString.call(e)){for(t in a={},e)"__proto__"===t?Object.defineProperty(a,t,{value:s(e[t]),configurable:!0,enumerable:!0,writable:!0}):a[t]=(r=e[t])&&"object"==typeof r?s(r):r;return a}return e}a.d(t,{Y:function(){return s}})}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/serp.17036be5c31113c0a700.min.js.map