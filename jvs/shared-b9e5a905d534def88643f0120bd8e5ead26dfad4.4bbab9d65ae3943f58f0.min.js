"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[98308],{54428:function(e,t,o){o.d(t,{O:function(){return uo}});var a={};o.r(a),o.d(a,{$authRequestStatus:function(){return Me},$authStatus:function(){return _e},$isAuthorized:function(){return Le},$isAuthorizedOverride:function(){return Se},$isInitialUserDataReceived:function(){return Oe},allInitialUserDataRequestFinished:function(){return Fe},authorizeFx:function(){return je},authorized:function(){return $e},jwtAuthFx:function(){return Ae},resetAuthStatus:function(){return Ce}});var i=o(30091),s=o(98116);const n=(0,s.createEvent)({sid:"4xjb2w"});var r=o(4190),l=o(6328),c=o(38032),d=(o(21703),o(82097)),u=o(29260),h=o(27636),p=o(96864);let g,f;!function(e){e.Unknown="unknown",e.Authorized="Authorized",e.Unauthorized="unauthorized"}(g||(g={})),function(e){e.Idle="idle",e.Pending="pending",e.Success="success",e.Failure="failure"}(f||(f={}));const m=(0,s.createDomain)({sid:"-7bkiks"});o(26699);var w=o(30040),v=o(38387),b=o(10924),y=o(20611),k=o(54448),x=o(82672),j=o(47047),A=o(78364);const C={enabled:!1,default:{main:[],other:[]}};var M=o(35529);const _=(0,M.Union)((0,M.Literal)("google"),(0,M.Literal)("vk"),(0,M.Literal)("mail_ru"),(0,M.Literal)("yandex"),(0,M.Literal)("ok"),(0,M.Literal)("wechat"),(0,M.Literal)("line"),(0,M.Literal)("facebook"),(0,M.Literal)("apple"),(0,M.Literal)("twitter"),(0,M.Literal)("telegram"),(0,M.Literal)("yahoo")),L=(0,M.Array)(_),S=(0,M.Record)({main:L,other:L.optional()}),$=(0,M.Record)({enabled:M.Boolean,default:S,assisted:S.optional()}),F=(0,M.Record)({web:$.optional().nullable()}),O={outputs:{authMethodsFlag:(0,s.withFactory)({sid:"81sbpk",fn:()=>(0,j.d)((()=>A.f.inputs.createFlag({name:"usc-feat-authMethods",contract:F,mapValue:({web:e})=>e,defaultValue:C})))})}},{matchPage:D,pages:N}=x.$.outputs,{authMethodsFlag:z}=O.outputs,E=(0,s.withFactory)({sid:"i5zzre",fn:()=>(0,k.or)(D(N.AssistedPage).$isOpen,D(N.ProfileOrderPage).$isOpen,D(N.ProfileMyOrdersPage).$isOpen)}),I=z.$value.map((e=>e?.enabled??!1)),R=(0,s.combine)({and:[{methods:z.$value,isAssistedPageOpened:E},({isAssistedPageOpened:e,methods:t})=>e?t?.assisted??t?.default:t?.default],or:{sid:"v2bjxx"}}),U=R.map((e=>e?.main??[])),P=R.map((e=>e?.other??[])),B={outputs:{$authMethods:(0,s.combine)({and:[U,P,(e,t)=>[...e,...t]],or:{sid:"tdc1ja"}}),$authMethodsGroups:R,$isAuthorizationEnabled:I},internals:{$mainAuthMethods:U,$otherAuthMethods:P}};var T=o(72675),q=o(21247),V=o(85349),W=o(15863),H=o(18547),Z=o(53788),G=o(79403);const K=(0,o(78260).cr)("usercom",{name:"service/auth"}),J=(e,t)=>{(0,s.sample)({and:[{clock:"fail"in e?e.fail:e,fn:({params:e,error:o})=>({msg:`[auth service] ${t} failed`,error:o,extra:e?{method:e.method,provider:e.provider,isMarketingAccepted:e.isMarketingAccepted,params:e.params}:void 0}),target:K.sendErrorLog}],or:{sid:"y7ucx2"}})},Y=(0,r.createGate)({and:[],or:{sid:"5fud4c"}}),Q=(0,s.attach)({and:{source:p.W.outputs.$guestia,mapParams:(e,t)=>({...e,guestia:t}),effect:m.createEffect((({method:e,isMarketingAccepted:t,params:o,guestia:a})=>{if(!a)throw new Error("Guestia method called before initialization");return a.login(e,t,o)}),{sid:"9swk0p"})},or:{sid:"1llo8c"}});J((0,s.sample)({and:[{clock:Q.fail,filter:({error:e})=>"Auth window closed by user"!==e.error_message}],or:{sid:"-ry5th0"}}),"loginFx");const{$enabled:X,toggle:ee}=(0,s.withFactory)({sid:"ee6wys",fn:()=>(0,j.d)(W.qs,!1)}),te=m.createEvent({sid:"-qu6t0b"}),oe=m.createEvent({sid:"-lwxj0d"}),ae=m.createEvent({sid:"vg86wj"}),ie=m.createEvent({sid:"-ll5hfu"}),se=m.createEvent({sid:"-9qmryh"}),ne=m.createStore(null,{sid:"-kcxmxq"}).on(te,((e,{method:t})=>t)),re=(0,s.createStore)(!0,{sid:"-ni5mab"}),le=m.createStore(null,{sid:"jmt4cf"}).on(ae,(e=>!e)),ce=(0,s.combine)({and:[{showSubscriptionCheckbox:re,shouldPreCheckSubscriptionCheckbox:(0,s.withFactory)({sid:"gqh34v",fn:()=>(0,c.f)(H.x.outputs.$isPrivacyCountry)})},({showSubscriptionCheckbox:e,shouldPreCheckSubscriptionCheckbox:t})=>e?t:null],or:{sid:"-qcmu7k"}}),de=(0,s.withFactory)({sid:"rxtdyk",fn:()=>(0,W.d1)(Q,m)}),ue=m.createStore(null,{sid:"-orobey"}),he=m.createStore({},{sid:"-kmsvsw"}),pe=(0,s.withFactory)({sid:"-6jtj86",fn:()=>(0,T.x)(Z.D.outputs.$isRuMarket,G.U.outputs.$isAviasalesBrand)});(0,s.sample)({and:[{clock:Q.doneData,fn:({userInfo:e})=>e,target:oe}],or:{sid:"-xz1x8o"}}),(0,s.sample)({and:[{clock:te,source:{subscriptionCheckboxValue:le},fn:({subscriptionCheckboxValue:e},{method:t,params:o})=>({method:t,params:o,isMarketingAccepted:e}),target:Q}],or:{sid:"-xvr5oi"}}),(0,s.sample)({and:[{clock:te,source:{source:ue,optionalAnalyticsData:he},fn:({source:e,optionalAnalyticsData:t},o)=>({source:o.source??e,optionalAnalyticsData:o.optionalAnalyticsData??t}),target:ie}],or:{sid:"-x1ih1n"}});const ge=Q.fail;(0,s.withFactory)({sid:"-wh633a",fn:()=>(0,q.h)({source:ie,targets:{source:ue,optionalAnalyticsData:he}})}),(0,s.withFactory)({sid:"-w181vt",fn:()=>(0,V.m)({clock:[Y.close,se],target:[ue,he,X]})});const fe=b.I.inputs.createReporter({data:{category:"profile",label:"login",service:w.t6.Usercom},payload:{isMobile:v.l.outputs.$isMobile,optionalAnalyticsData:he,pageName:y.D.outputs.$pathname,searchId:p.W.internals.$searchId,source:ue,topMethods:B.internals.$mainAuthMethods,userEvent:!0,loginNetwork:B.outputs.$authMethods,mailoutAccepted:ce}});fe({clock:Q,data:{action:"clicked"},payload:({method:e},{payload:t})=>{const{optionalAnalyticsData:o,topMethods:a,...i}=t,s=a.includes(e);return{...o,...i,topMethods:a,fromTop:s,loginNetwork:e}}}),fe({clock:Q.done,data:{action:"success"},payload:({params:e},{payload:t})=>{const{optionalAnalyticsData:o,topMethods:a,...i}=t,s=a.includes(e.method);return{...o,...i,topMethods:a,fromTop:s,loginNetwork:e.method,mailoutAccepted:e.isMarketingAccepted}}}),fe({clock:Q.fail,data:{action:"failed"},payload:({params:e,error:t},{payload:o})=>{const{optionalAnalyticsData:a,topMethods:i,...s}=o,n=i.includes(e.method);return{...s,...a,topMethods:i,fromTop:n,loginNetwork:e.method,errorInfo:t.error_message??t.message??"Unknown error in login"}}}),fe({clock:Y.open,data:{action:"opened"},payload:(e,{payload:t})=>{const{optionalAnalyticsData:o,...a}=t;return{...a,...o,...e.optionalAnalyticsData,source:e.source??t.source}}}),fe({clock:Y.close,data:{action:"closed"},payload:(e,{payload:t})=>{const{optionalAnalyticsData:o,...a}=t;return{...a,...o,...e.optionalAnalyticsData,source:e.source??t.source}}});const me={inputs:{login:te,subscriptionCheckboxValueToggled:ae,toggleShowAllMethods:ee},outputs:{LoginGate:Y,$loginFxStatus:de,$loginOptionalAnalyticsData:he,$loginSource:ue,$shouldShowAllMethods:X,$shouldBeCensored:pe,$showSubscriptionCheckbox:re,$subscriptionCheckboxValue:le,$lastLoginMethod:ne,loggedIn:oe,loginFailed:ge,constants:{DEFAULT_LOGIN_METHODS:["google","facebook","apple"],AVAILABLE_LOGIN_METHODS:["apple","facebook","google","line","mail_ru","ok","telegram","twitter","vk","wechat","yahoo","yandex"]}},internals:{loginFx:Q}},we=m.createEffect((e=>e.getJWT()),{sid:"-ehwtya"}),ve=m.createEffect((({guestia:e,jwt:t})=>e.forceSetJWT(t)),{sid:"-fok4zi"});J(we,"getJwtFromGuestiaFx");const be=m.createEvent({sid:"v1brue"}),ye=m.createStore(null,{sid:"-klfov1"}),ke=(0,s.sample)({and:[{clock:ve.done,fn:({params:{jwt:e}})=>e}],or:{sid:"m6n3kp"}});(0,s.sample)({and:[{clock:[be,ke,we.doneData],target:ye}],or:{sid:"-5fud6k"}});const xe={$jwt:ye},je=(0,s.attach)({and:{source:p.W.outputs.$guestia,effect:e=>{if(!e)throw new Error("Guestia method called before initialization");return e.authorize()}},or:{sid:"-4sigea"}});J(je,"authorizeFx");const Ae=(0,s.attach)({and:{source:p.W.outputs.$guestia,effect:(e,{provider:t,idToken:o})=>{if(!e)throw new Error("Guestia method called before initialization");return e.jwtAuth(t,o)}},or:{sid:"b1fe5p"}});J(Ae,"jwtAuthFx");const Ce=m.createEvent({sid:"aj2pir"}),Me=m.createStore(f.Idle,{sid:"wofcgx"}).on([je,Q,Ae],(()=>f.Pending)).on([je.done,Q.done,Ae.done],(()=>f.Success)).on([je.fail,Q.fail,Ae.fail],(()=>f.Failure)).reset(Ce),_e=(0,s.combine)({and:[{authRequestStatus:Me,jwt:ye},({authRequestStatus:e,jwt:t})=>e===f.Success||e===f.Failure?t?g.Authorized:g.Unauthorized:g.Unknown],or:{sid:"-946meb"}}),[Le,Se]=(0,s.withFactory)({sid:"ux2xbh",fn:()=>(0,h.K)((0,s.withFactory)({sid:"-7akohb",fn:()=>(0,d.f)(_e,g.Authorized)}))}),$e=(0,s.sample)({and:[{clock:Le,filter:Boolean}],or:{sid:"v2abfe"}}),Fe=(0,s.withFactory)({sid:"a10nyp",fn:()=>(0,u.m)([je.finally,p.W.inputs.fetchUserDataFx.finally])}),Oe=m.createStore(!1,{sid:"-8tloek"}).on(Fe,(()=>!0)),De={$authRequestStatus:Me,$authStatus:_e,$isAuthorized:Le,$isInitialUserDataReceived:Oe,authorized:$e,allInitialUserDataRequestFinished:Fe},Ne={authorizeFx:je,jwtAuthFx:Ae,$isAuthorizedOverride:Se},{$isAuthorized:ze,$isInitialUserDataReceived:Ee}=a,Ie=(0,s.withFactory)({sid:"-adrva9",fn:()=>(0,c.f)(ze)}),Re={outputs:{$isInitialUserDataReceived:Ee,$isAuthorized:ze,$isUnauthorized:Ie}};var Ue=o(85893);const Pe=({children:e,showSpinnerOnLoad:t=!1})=>(0,r.useUnit)(Re.outputs.$isInitialUserDataReceived)?(0,Ue.jsx)(Ue.Fragment,{children:e}):t?(0,Ue.jsx)(l.$,{}):null;Pe.Authorized=({children:e})=>(0,r.useUnit)(Re.outputs.$isAuthorized)?(0,Ue.jsx)(Ue.Fragment,{children:e}):null,Pe.Unauthorized=({children:e})=>(0,r.useUnit)(Re.outputs.$isUnauthorized)?(0,Ue.jsx)(Ue.Fragment,{children:e}):null;var Be=o(67294),Te=o(28225),qe=o(49963),Ve=o(44619),We=o(63263),He=o(44757),Ze=o(41003),Ge=o(1156),Ke=o(39535),Je=o(94184),Ye={variables:"s__TUdVliOmtbp7_LIhzKiv",button:"s__HwTb5X6L7z4nYKZUc1JL",yandex:"s__ddiez3JivFdchCqEw5KA",facebook:"s__Hmg4_ny5YCVLH4bYtlRQ",mail_ru:"s__jIm7EB11YDCj4DiMpOQi",ok:"s__tSPb4GvHbaF_YEkgTPjU",vk:"s__wKwvKlyTK8MYabPb7tag",yahoo:"s__H8fAdMHoHC07UcWf5oq8",google:"s__as8afAOIALrrFQENKabF",apple:"s__fXd17Z8cI0V1Ung1YEb5",twitter:"s__FLYDqatQA2bDv6m1BgK_",icon:"s__aL_DWotyLTB4_KPGD8NX"},Qe=o(49666),Xe=o(81087),et=o(19987),tt=o(86616),ot=o(29203),at=o(88899),it=o(41735),st=o(54646);const nt=({className:e,...t},o)=>(0,Ue.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:o,style:{display:"inline-block"},...t,children:(0,Ue.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m3 8 3.924 8.796L5.512 20H8.96l5.226-12h-3.429L8.63 13.082 6.52 8H3Zm9.466 6.86c0 1.11.899 2.024 2.11 2.024 1.246 0 2.182-.95 2.182-2.094 0-1.127-.9-2.024-2.11-2.024-1.246 0-2.182.968-2.182 2.094ZM17.15 4 13.7 11.991h3.851L21 4h-3.851Z"})}),rt=(0,Be.memo)((0,Be.forwardRef)(nt));rt.displayName="Icon24LogotypesYahoo";var lt=o(98885);const ct=["google","facebook","apple","vk","mail_ru","twitter","yandex","ok"],dt={vk:Xe.W,apple:et.N,facebook:tt.g,twitter:ot.t,ok:at.v,mail_ru:it.U,yandex:st.I,google:Qe.K,yahoo:rt},ut=({method:e,censored:t,onClick:o})=>{const a=function(e,t){const{t:o}=(0,Te.useTranslation)("uiKit");return o(t&&"facebook"===e?`login_form.censoredMethodNames.${e}`:`login_form.methodNames.${e}`)}(e,t),i=function(e,t){return t&&"facebook"===e?lt.B:dt[e]}(e,t);return i?(0,Ue.jsxs)(Ge.z,{className:Je(Ye.variables,Ye.button,Ye[e]),priority:Ke.Ji.Primary,size:Ke.qE.M,onClick:()=>o(e),children:[(0,Ue.jsx)(Ge.z.Icon,{className:Ye.icon,children:(0,Ue.jsx)(i,{})}),(0,Ue.jsx)(Ge.z.Label,{children:a})]}):null},ht=({onLoginClick:e,availableLoginMethods:t,termsOfUseUrl:o="/terms-of-use",privacyUrl:a="/privacy",showSubscription:i=!1,onChangeSubscription:s,onOtherMethodsClick:n,subscriptionValue:r,showAllMethods:l=!1,subscriptionCheckboxText:c,censored:d=!1,testId:u})=>{const{t:h}=(0,Te.useTranslation)("uiKit"),{visibleMethods:p,hiddenMethods:g,showOtherMethodsButton:f,handleToggleSubscription:m,handleSubscriptionCheckboxChange:w}=(({showAllMethods:e,availableLoginMethods:t=ct,subscriptionValue:o,onChangeSubscription:a})=>{const{visibleMethods:i,hiddenMethods:s}=function(e,t){return t||e.length<=4?{visibleMethods:e,hiddenMethods:[]}:{visibleMethods:e.slice(0,3),hiddenMethods:e.slice(3)}}(t,e),n=!e&&s.length>0,r=e=>{a&&a(e)};return{visibleMethods:i,hiddenMethods:s,showOtherMethodsButton:n,handleChangeSubscription:r,handleToggleSubscription:()=>{r(!o)},handleSubscriptionCheckboxChange:e=>{r(e.target.checked)}}})({availableLoginMethods:t,showAllMethods:l,subscriptionValue:r,onChangeSubscription:s});return(0,Ue.jsxs)("div",{className:"s__NkWQt1UPjCvsWejocqHh","data-test-id":u??"login-form",children:[(0,Ue.jsxs)("div",{className:"s__KUsyftqNr1cDSD2SAjGp",children:[p.map((t=>(0,Ue.jsx)(ut,{method:t,censored:d,onClick:e},t))),f&&(0,Ue.jsxs)(Ge.z,{size:Ke.qE.M,className:"s__H3k4YIcr2eDnZluVNkK_",priority:Ke.Ji.Secondary,onClick:n,children:[(0,Ue.jsx)(Ge.z.Icon,{className:"s__fLOeJgMUz3Ty6i1SiZNC",children:(0,Ue.jsx)(He.D,{})}),(0,Ue.jsx)(Ge.z.Label,{children:h("login_form.showMoreButton",{count:g.length})})]})]}),(0,Ue.jsxs)("div",{className:"s__Mb2cW8JqQIwlV6CvEuvg",children:[i&&(0,Ue.jsx)("div",{className:"s__QSlhB0P5F2Z6cjTfQngf",onClick:m,children:(0,Ue.jsx)(We.X,{className:"s__ESsiGa2UDA_v14rSyegu",label:(0,Ue.jsx)(qe.x,{tag:"span",className:"s__GbiR6nyWpRvfj6X4o71s",type:Ve.y.CaptionRegular,children:c||h("login_form.subscription")}),checked:r,onChange:w})}),(0,Ue.jsx)(qe.x,{className:"s__OMZLJDtbxJb62FX2QPV5",type:Ve.y.FootnoteRegular,children:(0,Ue.jsxs)(Te.Trans,{i18nKey:"login_form.policy",ns:"uiKit",children:[(0,Ue.jsx)(Ze.r,{href:o,changeColorOnHover:!0,target:"_blank",rel:"noopener noreferrer","data-test-id":"terms-of-use-link"}),(0,Ue.jsx)(Ze.r,{href:a,changeColorOnHover:!0,target:"_blank",rel:"noopener noreferrer","data-test-id":"privacy-link"})]})})]})]})};var pt=o(59399),gt=o(63160),ft=o(99186),mt=o(6436),wt=o(2905);const vt={[wt.qb]:"898676391515-g5p7ih2rij9q1r4tscd801h0oe5skqqr.apps.googleusercontent.com",[wt.R2]:"500718966925-0gdedk4ufhu7pl3mbtgmrdpihac7hsgs.apps.googleusercontent.com"};function bt(e){return vt[e]}const yt=m.createEvent({sid:"eppduc"}),kt=e=>{e.isDisplayed()&&yt()},xt=(0,s.attach)({and:{source:G.U.outputs.$brand,effect:m.createEffect((e=>{const t=(0,s.scopeBind)(Ae);return new Promise(((o,a)=>{window.requestIdleCallback((()=>{!async function(e,t){await new Promise((e=>{const t=document.createElement("script");t.src="https://accounts.google.com/gsi/client",t.onload=e,document.head.appendChild(t)})),window?.google?.accounts?.id?.initialize(e),window?.google?.accounts?.id?.prompt(t),window?.google}({client_id:bt(e),auto_select:!0,callback:async e=>{try{await t({provider:"google",idToken:e.credential}),o(null)}catch(e){a(e)}}},kt)}))}))}),{sid:"-3zxtrz"})},or:{sid:"-h0tr24"}});J(xt,"authByOneTapFx");const jt=m.createEffect((()=>window&&"function"==typeof window.requestIdleCallback),{sid:"r6e4b9"}),At=m.createEvent({sid:"-tymj9s"}),Ct=xt.done,Mt=xt.fail;(0,s.sample)({and:[{clock:At,target:jt}],or:{sid:"dk38b9"}}),(0,s.sample)({and:[{clock:jt.doneData,filter:Boolean,target:xt}],or:{sid:"dydvqn"}});const _t={initGoogleOneTap:At,authByOneTapShowed:yt},Lt={authByOneTapFailed:Mt,authByOneTapDone:Ct},{authByOneTapDone:St,authByOneTapFailed:$t}=Lt,{authByOneTapShowed:Ft}=_t,Ot=b.I.inputs.createReporter({data:{category:"profile",label:"login",service:w.t6.Usercom},payload:{isMobile:v.l.outputs.$isMobile,loginNetwork:"google",mailoutAccepted:null,pageName:y.D.outputs.$pathname,searchId:p.W.internals.$searchId,source:"google_one_tap",userEvent:!0}});Ot({clock:St,data:{action:"success"}}),Ot({clock:Ft,data:{action:"opened"}}),Ot({clock:$t,data:{action:"failed"},payload:({error:e},{payload:t})=>({...t,errorInfo:e.error_message??"Unknown error in userOneTapAuth"})});const Dt=m.createEvent({sid:"u2oy0v"}),Nt=m.createEvent({sid:"hdz54t"});var zt=o(65740);const Et=(0,s.attach)({and:{effect:ve},or:{sid:"st6m3x"}}),It=(0,s.withFactory)({sid:"-tqamj4",fn:()=>(0,W.CJ)({clock:Et.done,until:(0,s.withFactory)({sid:"nvjul2",fn:()=>(0,T.x)(ye)})})}),Rt=(0,s.createEffect)((()=>window.postMessage("signInOpened",window.location.origin)),{sid:"f8kbiy"}),Ut=(0,s.createEffect)((e=>{const t=(0,s.scopeBind)(Et);window.addEventListener("message",(o=>{"jwt-from-mobile"===o.data.messageType&&t({guestia:e,jwt:o.data.payload})}))}),{sid:"gn5zg1"}),Pt={authorizedInWebview:It},Bt=(0,s.withFactory)({sid:"iwsthd",fn:()=>(0,j.s)((({loginSource:e,optionalAnalyticsData:t,shouldCheckWebView:o=!1})=>{const a=(0,s.createEvent)({sid:"-3trv41"}),i=(0,s.withFactory)({sid:"-9k725r",fn:()=>(0,W.mC)({field:t,clock:a})});return(0,s.sample)({and:[{clock:a,source:{optionalAnalyticsData:i},fn:(t,o)=>({...t,...o,source:o?.source||e}),target:ie}],or:{sid:"vs7w6h"}}),o?(0,s.withFactory)({sid:"wnk61s",fn:()=>(0,zt.s)({source:a,if:gt.U.outputs.$isWebView,then:Rt,else:Dt})}):(0,s.sample)({and:[{clock:a,fn:e=>({title:e?.title,subtitle:e?.subtitle}),target:Dt}],or:{sid:"x2yenw"}}),(0,s.sample)({and:[{clock:Nt,target:se}],or:{sid:"xk010d"}}),{showLoginPopup:a}}))}),Tt={inputs:{createLoginPopup:Bt,onLoginPopupClosed:Nt},outputs:{loginPopupOpened:Dt}};var qt=o(48695);const Vt=(0,s.attach)({and:{source:p.W.outputs.$guestia,effect:e=>{if(!e)throw new Error("Guestia method called before initialization");return e.logout()}},or:{sid:"m3iu60"}});J(Vt,"logoutFx");const Wt=m.createEvent({sid:"ijqijt"}),Ht=m.createEvent({sid:"-favkxp"});(0,s.sample)({and:[{clock:Wt,target:Vt}],or:{sid:"-hmnll6"}}),(0,s.sample)({and:[{clock:Vt.done,target:[Ht,Ce]}],or:{sid:"-h8cy5s"}});const Zt=(0,s.createStore)(null,{sid:"h0rrwg"}).on(Wt,((e,{logoutSource:t})=>t)),Gt=(0,s.combine)({and:[{isMobile:v.l.outputs.$isMobile,source:Zt,pageName:y.D.outputs.$pathname,loginNetwork:p.W.outputs.$userLastLoginMethod,userEvent:!0,market:Z.D.outputs.$market}],or:{sid:"rqdiyj"}}),Kt=(0,s.withFactory)({sid:"-cqso6d",fn:()=>(0,qt.C)({clock:Wt,source:Gt})});b.I.inputs.createReporter({data:{service:w.t6.Usercom,category:"profile",label:"logout",action:"success"}})({clock:(0,s.sample)({and:[{clock:Ht,source:Kt}],or:{sid:"-dx416s"}}),payload:e=>e});const Jt={logout:Wt},Yt={loggedOut:Ht},Qt={logoutFx:Vt};p.W.inputs.createGuestiaSubscription("jwt_changed",be),(0,s.sample)({and:[{clock:p.W.outputs.guestiaInited,target:we}],or:{sid:"g16tm8"}}),(0,s.sample)({and:[{source:ye,target:mt.R.internals.fillJwt}],or:{sid:"gfhh1m"}}),(0,s.sample)({and:[{clock:p.W.outputs.guestiaInited,target:je}],or:{sid:"guvpnq"}}),(0,s.sample)({and:[{clock:p.W.outputs.guestiaInited,filter:gt.U.outputs.$isWebView,target:Ut}],or:{sid:"gyq9t9"}}),(0,s.sample)({and:[{clock:[oe,je.done,It],target:p.W.inputs.fetchUserDataFx}],or:{sid:"hdkpu0"}});const Xt=(0,s.attach)({and:{source:ft.l.outputs.$language,mapParams:(e,t)=>({notification_language:t}),effect:p.W.inputs.updateUserSettingsFx},or:{sid:"-hebeou"}});(0,s.withFactory)({sid:"iakdfo",fn:()=>(0,pt.g)({source:(0,s.sample)({and:[{source:Le,filter:Boolean}],or:{sid:"-3cno8l"}}),timeout:1e3,target:Xt})});const eo=(0,s.withFactory)({sid:"-r7e3ps",fn:()=>(0,W.CJ)({clock:(0,s.sample)({and:[{clock:je.doneData.map((({jwt:e})=>!e)),filter:Boolean}],or:{sid:"-uwj7w7"}}),until:(0,s.withFactory)({sid:"kq315p",fn:()=>(0,T.x)(B.outputs.$isAuthorizationEnabled,(0,s.withFactory)({sid:"-r27onm",fn:()=>(0,c.f)(v.l.outputs.$isMobile)}))})})});(0,s.sample)({and:[{clock:eo,target:_t.initGoogleOneTap}],or:{sid:"j97etf"}}),(0,s.sample)({and:[{clock:Ht,target:p.W.inputs.resetUser}],or:{sid:"jci6dl"}}),(0,s.sample)({and:[{clock:[H.x.outputs.gdprServiceInited,ce.updates],source:ce,target:le}],or:{sid:"-j043qq"}}),(0,s.sample)({and:[{clock:Nt,source:ce,target:le}],or:{sid:"-ijm9xw"}});var to=o(67334);const{createLoginPopup:oo,onLoginPopupClosed:ao}=Tt.inputs,{showLoginPopup:io}=(0,s.withFactory)({sid:"4that6",fn:()=>(0,j.d)(oo,{loginSource:"login_popup"})});(0,s.sample)({and:[{clock:to.A.outputs.authorize,target:je}],or:{sid:"wo0f3p"}}),(0,s.sample)({and:[{source:Me,target:to.A.inputs.changeAuthRequestStatusInHeliosFx}],or:{sid:"wqre2i"}}),(0,s.sample)({and:[{clock:to.A.outputs.loginPopupOpened,target:io}],or:{sid:"x5lu39"}}),(0,s.sample)({and:[{clock:(0,s.withFactory)({sid:"-gfseo0",fn:()=>(0,u.m)({events:[ao,to.A.outputs.loginPopupOpened],reset:to.A.inputs.loginPopupClosedFx})}),target:to.A.inputs.loginPopupClosedFx}],or:{sid:"x8ct22"}}),(0,s.sample)({and:[{clock:to.A.outputs.loginRequested,target:Q}],or:{sid:"xqi0mz"}}),(0,s.sample)({and:[{source:de,target:to.A.inputs.changeLoginFxStatusInHeliosFx}],or:{sid:"y4so2d"}}),(0,s.sample)({and:[{source:ye,target:to.A.inputs.changeJWTInHeliosFx}],or:{sid:"y83fmj"}}),(0,s.sample)({and:[{clock:to.A.outputs.logoutRequested,target:Wt}],or:{sid:"ymxvna"}}),(0,s.sample)({and:[{clock:Ht,target:to.A.inputs.userLoggedOutFx}],or:{sid:"z18j2o"}});const so={...me.inputs,...Jt,...Tt.inputs},no={...De,...me.outputs,...Yt,...Tt.outputs,...xe,...Pt,...B.outputs,constants:me.outputs.constants,flags:O.outputs},ro={...me.internals,...Qt,...Ne,...B.internals},lo=({source:e,optionalAnalyticsData:t,showAllMethods:o,onOtherMethodsClick:a,onLoginClick:i})=>{(0,r.useGate)(no.LoginGate,{source:e,optionalAnalyticsData:t});const{t:s}=(0,Te.useTranslation)("service_usercom_auth"),{isCCPA:n,isAuthorizationEnabled:l,subscriptionCheckboxValue:c,showSubscriptionCheckbox:d,loginMethods:u,shouldShowAllMethods:h,shouldBeCensored:p}=(0,r.useUnit)({isCCPA:H.x.outputs.$isCCPA,isAuthorizationEnabled:no.$isAuthorizationEnabled,subscriptionCheckboxValue:no.$subscriptionCheckboxValue,showSubscriptionCheckbox:no.$showSubscriptionCheckbox,loginMethods:no.$authMethods,shouldShowAllMethods:no.$shouldShowAllMethods,shouldBeCensored:no.$shouldBeCensored}),g=(0,r.useUnit)({subscriptionChange:so.subscriptionCheckboxValueToggled,login:so.login,otherMethodsClick:so.toggleShowAllMethods}),f=n?s("containers.loginForm.subscriptionCheckboxText"):void 0;return l?(0,Ue.jsx)(ht,{availableLoginMethods:u,showSubscription:d,subscriptionValue:c??void 0,subscriptionCheckboxText:f,showAllMethods:o??h,onLoginClick:o=>{i&&i(o),g.login({source:e,method:o,optionalAnalyticsData:t})},censored:p,onChangeSubscription:g.subscriptionChange,onOtherMethodsClick:a??g.otherMethodsClick}):null},co={AuthWrapper:Pe,LoginFormContainer:(0,Be.memo)(lo)},uo=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/usercom/services/auth/index.ts",lifecycle:{start:n},api:{inputs:so,outputs:no,internals:ro,containers:co}})},49666:function(e,t,o){o.d(t,{K:function(){return n}});var a=o(85893),i=o(67294);const s=({className:e,...t},o)=>(0,a.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:o,style:{display:"inline-block"},...t,children:[(0,a.jsx)("path",{d:"M20 12.183c0-.544-.044-1.09-.14-1.626H12.16v3.081h4.409a3.7 3.7 0 0 1-1.632 2.431v2h2.63c1.545-1.394 2.433-3.452 2.433-5.886Z",fill:"#4285F4"}),(0,a.jsx)("path",{d:"M12.161 19.998c2.201 0 4.057-.708 5.41-1.93l-2.63-2c-.732.488-1.676.765-2.777.765-2.129 0-3.934-1.408-4.582-3.301H4.868v2.06c1.386 2.702 4.207 4.406 7.293 4.406Z",fill:"#34A853"}),(0,a.jsx)("path",{d:"M7.58 13.533a4.702 4.702 0 0 1 0-3.063V8.409H4.867a7.865 7.865 0 0 0 0 7.184l2.711-2.06Z",fill:"#FBBC04"}),(0,a.jsx)("path",{d:"M12.161 7.166a4.484 4.484 0 0 1 3.131 1.2l2.33-2.284A7.932 7.932 0 0 0 12.162 4C9.075 4 6.253 5.705 4.867 8.409l2.711 2.06c.645-1.895 2.453-3.303 4.582-3.303Z",fill:"#EA4335"})]}),n=(0,i.memo)((0,i.forwardRef)(s));n.displayName="Icon24ColorGoogle"},44757:function(e,t,o){o.d(t,{D:function(){return n}});var a=o(85893),i=o(67294);const s=({className:e,...t},o)=>(0,a.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:o,style:{display:"inline-block"},...t,children:(0,a.jsx)("path",{d:"M12.5 3h-1l-5 5L8 9.5l4-4 4 4L17.5 8l-5-5ZM17.5 16l-5 5h-1l-5-5L8 14.5l4 4 4-4 1.5 1.5Z"})}),n=(0,i.memo)((0,i.forwardRef)(s));n.displayName="Icon24ControlsExpand"},19987:function(e,t,o){o.d(t,{N:function(){return n}});var a=o(85893),i=o(67294);const s=({className:e,...t},o)=>(0,a.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:o,style:{display:"inline-block"},...t,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.481 2c.113 1.153-.293 2.288-.886 3.123-.62.822-1.61 1.45-2.575 1.37-.126-1.11.363-2.289.91-3.008.618-.817 1.692-1.442 2.551-1.485Zm3.072 6.28c-.107.065-1.88 1.159-1.86 3.39.023 2.694 2.28 3.585 2.307 3.594-.014.062-.353 1.286-1.2 2.526-.707 1.094-1.447 2.163-2.624 2.181-.56.014-.937-.153-1.33-.326-.41-.18-.838-.369-1.507-.369-.71 0-1.156.195-1.587.382-.372.162-.733.32-1.242.34-1.12.043-1.976-1.165-2.708-2.249-1.465-2.211-2.605-6.232-1.076-8.968.74-1.342 2.09-2.206 3.534-2.229.636-.013 1.245.24 1.78.462.409.17.773.322 1.072.322.262 0 .617-.146 1.03-.315.651-.268 1.448-.595 2.26-.506.555.016 2.134.226 3.153 1.763l-.002.001Z"})}),n=(0,i.memo)((0,i.forwardRef)(s));n.displayName="Icon24LogotypesApple"},98885:function(e,t,o){o.d(t,{B:function(){return n}});var a=o(85893),i=o(67294);const s=({className:e,...t},o)=>(0,a.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:o,style:{display:"inline-block"},...t,children:(0,a.jsx)("circle",{cx:12,cy:12,r:6})}),n=(0,i.memo)((0,i.forwardRef)(s));n.displayName="Icon24LogotypesCensored"},86616:function(e,t,o){o.d(t,{g:function(){return n}});var a=o(85893),i=o(67294);const s=({className:e,...t},o)=>(0,a.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:o,style:{display:"inline-block"},...t,children:(0,a.jsx)("path",{d:"M13.32 21v-9.001h2.366L16 8.897h-2.68l.004-1.552c0-.81.073-1.243 1.18-1.243h1.48V3h-2.368c-2.843 0-3.844 1.505-3.844 4.035v1.862H8V12h1.772V21h3.548Z"})}),n=(0,i.memo)((0,i.forwardRef)(s));n.displayName="Icon24LogotypesFacebook"},41735:function(e,t,o){o.d(t,{U:function(){return n}});var a=o(85893),i=o(67294);const s=({className:e,...t},o)=>(0,a.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:o,style:{display:"inline-block"},...t,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.939 8.767c-.844-.882-1.994-1.445-3.216-1.445-2.417 0-4.542 2.24-4.542 4.784 0 2.518 2.125 4.734 4.542 4.734 1.222 0 2.345-.51 3.188-1.382l.013.47c-.012 1.438 1.787 2.4 2.998 1.413 2.674-2.174 2.834-7.76.093-10.744-2.622-2.854-6.97-3.42-10.269-1.376-4.311 2.674-4.398 7.836-2.772 10.769 2.406 4.344 7.556 4.427 9.407 3.605 1.225-.543.68-2.204-.5-1.708-2.328.98-6.246-.003-7.615-3.297-1.256-3.02.037-6.234 2.057-7.687 1.902-1.365 5.476-1.766 8.14.664 2.858 2.607 1.645 7.106.63 8.192-.26.276-.728.054-.686-.377l-.003-6.584c0-.185-.122-.771-.716-.771h-.096c-.38 0-.653.32-.653.743v-.003Zm-3.166.204c1.586 0 2.899 1.109 2.99 2.953l.004.372c-.085 1.621-1.266 2.992-3.06 2.992-1.61 0-2.838-1.205-2.838-3.113 0-1.704 1.015-3.204 2.845-3.204h.06Z"})}),n=(0,i.memo)((0,i.forwardRef)(s));n.displayName="Icon24LogotypesMail"},88899:function(e,t,o){o.d(t,{v:function(){return n}});var a=o(85893),i=o(67294);const s=({className:e,...t},o)=>(0,a.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:o,style:{display:"inline-block"},...t,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.988 12.289c2.703 0 4.9-2.083 4.9-4.644S14.692 3 11.989 3C9.285 3 7.086 5.084 7.086 7.645c0 2.561 2.199 4.644 4.902 4.644Zm0-6.567c1.119 0 2.029.863 2.029 1.923s-.91 1.923-2.03 1.923c-1.118 0-2.029-.863-2.029-1.923s.911-1.923 2.03-1.923Zm4.841 9.241a9.468 9.468 0 0 1-2.846 1.117l2.74 2.597a1.31 1.31 0 0 1 0 1.925c-.56.53-1.47.53-2.03 0L12 18.05l-2.69 2.552c-.282.265-.65.398-1.017.398-.367 0-.734-.133-1.015-.398a1.312 1.312 0 0 1 0-1.925l2.74-2.597a9.484 9.484 0 0 1-2.846-1.117c-.671-.4-.873-1.24-.45-1.876.421-.637 1.308-.829 1.98-.428a6.515 6.515 0 0 0 6.598 0c.672-.401 1.558-.21 1.98.428.423.635.22 1.476-.45 1.876Z"})}),n=(0,i.memo)((0,i.forwardRef)(s));n.displayName="Icon24LogotypesOdnoklassniki"},29203:function(e,t,o){o.d(t,{t:function(){return n}});var a=o(85893),i=o(67294);const s=({className:e,...t},o)=>(0,a.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:o,style:{display:"inline-block"},...t,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.435 20 3 19.998 9.338 12.9 3.163 4H9.9l3.228 4.653 4.153-4.652h2.462L14.201 10.2 21 20h-6.737l-3.861-5.554L5.435 20zm9.973-1.778L11.75 12.94l-1.063-1.552-3.9-5.608H8.71l3.07 4.384 1.06 1.556 4.531 6.503h-1.964z"})}),n=(0,i.memo)((0,i.forwardRef)(s));n.displayName="Icon24LogotypesTwitter"},81087:function(e,t,o){o.d(t,{W:function(){return n}});var a=o(85893),i=o(67294);const s=({className:e,...t},o)=>(0,a.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:o,style:{display:"inline-block"},...t,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.125 5.125C4 6.249 4 8.06 4 11.68v.64c0 3.62 0 5.43 1.125 6.555C6.249 20 8.06 20 11.68 20h.64c3.62 0 5.43 0 6.555-1.125C20 17.751 20 15.94 20 12.32v-.64c0-3.62 0-5.43-1.125-6.555S15.94 4 12.32 4h-.64C8.06 4 6.25 4 5.125 5.125zM6.7 8.867c.087 4.16 2.167 6.66 5.813 6.66h.207v-2.38c1.34.133 2.353 1.113 2.76 2.38h1.893c-.52-1.894-1.886-2.94-2.74-3.34.854-.494 2.054-1.694 2.34-3.32h-1.72c-.373 1.32-1.48 2.52-2.533 2.633V8.867H11v4.613c-1.067-.267-2.413-1.56-2.473-4.613H6.7z"})}),n=(0,i.memo)((0,i.forwardRef)(s));n.displayName="Icon24LogotypesVkontakte"},54646:function(e,t,o){o.d(t,{I:function(){return n}});var a=o(85893),i=o(67294);const s=({className:e,...t},o)=>(0,a.jsx)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:o,style:{display:"inline-block"},...t,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.528 21 13 14h2v7h2V3h-3.267c-3.21 0-5.91 1.888-5.91 5.664 0 2.694 1.194 4.154 2.984 4.96L7 21h2.528Zm4.214-16H15v7h-1.258C11.687 12 10 11.17 10 8.59 10 5.92 11.84 5 13.742 5Z"})}),n=(0,i.memo)((0,i.forwardRef)(s));n.displayName="Icon24LogotypesYandex"},29260:function(e,t,o){o.d(t,{m:function(){return n}});var a=o(98116);function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function s(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e){var t=function(e){return Object.keys(e).some((t=>!["events","reset","target"].includes(t)&&a.is.unit(e[t])))}(e)?{events:e}:e,{events:o,reset:n,target:l=(0,a.createEvent)({name:"target",sid:"p73fff"})}=t;return a.is.unit(l)&&a.is.targetable(l)||r("target should be a targetable unit"),n&&!a.is.unit(n)&&r("reset should be a unit"),(0,a.withRegion)(l,(()=>{var e=Object.keys(o),t=Array.isArray(o)?[...e].fill(""):{},r=(0,a.createStore)(e.length,{and:{serialize:"ignore"},name:"$counter",sid:"-ahoahx"}),c=(0,a.createStore)(t,{and:{serialize:"ignore"},name:"$results",sid:"oy8iyn"});(0,a.sample)({and:[{source:l,target:r.reinit}],or:{sid:"blex0c"}}),c.reset(l),n&&((0,a.sample)({and:[{source:n,target:r.reinit}],or:{sid:"bnm3fi"}}),c.reset(n));var d=function(e){var t=(0,a.createStore)(!1,{and:{serialize:"ignore"},name:"$isDone",sid:"-rf2fac"}).on(o[e],(()=>!0)).reset(l);n&&t.reset(n),r.on(t,(e=>e-1)),c.on(o[e],((t,o)=>{var a=Array.isArray(t)?[...t]:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){s(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},t);return a[e]=o,a}))};for(var u of e)d(u);var h=(0,a.sample)({and:[{source:c,clock:[...Object.values(o)]}],or:{name:"eventsTrriggered",sid:"-lro8bq"}});(0,a.sample)({and:[{source:h,filter:r.map((e=>0===e),{skipVoid:!1}),target:l}],or:{sid:"-dlkr2s"}})})),l}function r(e){throw new Error(e)}}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/shared-b9e5a905d534def88643f0120bd8e5ead26dfad4.4bbab9d65ae3943f58f0.min.js.map