(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[80295],{54870:function(e,t,s){"use strict";s.d(t,{C:function(){return B}});var i=s(30091),n=(s(21703),s(98116)),o=s(76588),a=s(5500),r=s(47047),l=s(72675),c=s(8681),d=s(47420),u=s(63762),p=s(99186),m=s(79403),h=s(63246),_=s(87722),x=s(78260),g=s(35529),f=s(45711);const y=(0,g.Literal)("NATIONAL_PARK"),k=(0,g.Record)({ark_id:f.Jm,type:y,name:(0,g.Dictionary)(f.Cu,g.String),slug:g.String,iata:g.String.nullable()}),j=(0,g.Record)({entity:k}),b=(0,g.Record)({locations_main_page_v1:(0,g.Array)(j)}),v=(e,t)=>{const[s]=e.locations_main_page_v1,{entity:i}=s;return{id:i.ark_id,type:i.type,name:i.name[t],slug:i.slug,iata:i.iata}},{createAriadneQuery:C}=c.a.inputs,{$language:w}=p.l.outputs,{$brand:N}=m.U.outputs,{$destination:S}=d.i.outputs,{changeDestination:I}=d.i.inputs,{nationalParkScreen:E}=u.n.outputs,{$isClient:D}=h.y.outputs,P=(0,n.createEvent)({sid:"-sxv8g"}),A=(0,n.withFactory)({sid:"4ytivr",fn:()=>(0,r.d)((()=>C({params:(0,n.withFactory)({sid:"phdyqi",fn:()=>(0,o.t6)()}),enabled:(0,n.withFactory)({sid:"-iyqh1f",fn:()=>(0,l.x)(E.$active,D)}),graphQL:{query:"\n  query GetNationalPark($arkIds: [String!]!, $locales: [String!]!, $brand: Brand!) {\n    locations_main_page_v1(\n      brand: $brand,\n      input: { \n        ark_ids: $arkIds,\n      }\n    ) {\n      entity {\n        ark_id\n        type\n        name(filters: { locales: $locales })\n        slug\n        iata\n      }\n    }\n  }\n",operationName:"national_parks",variables:{source:(0,n.combine)({and:[{brand:N,locales:(0,n.combine)({and:[w,e=>[e]],or:{sid:"-61trjx"}})}],or:{sid:"vni5d2"}}),fn:(e,t)=>({...t,arkIds:e?[e]:null})}},contract:b,mapData:{source:w,fn:v}})))});(0,n.sample)({and:[{clock:E.opened,source:S,filter:e=>(0,_.J_)(e)&&((0,_.Ao)(e)||(0,_.Tu)(e)),fn:e=>(0,_.Mo)(e),target:A.start}],or:{sid:"sl7qf6"}}),(0,n.sample)({and:[{clock:A.finished.success,fn:({result:e})=>({name:e.name.su,iata:e.id,type:a.A.NationalPark,slug:e.slug,isVirtual:!1}),target:I}],or:{sid:"t29ctd"}});const T=(0,x.cr)("explore",{name:"national_parks"});(0,n.sample)({and:[{clock:A.finished.failure,fn:({error:e,params:t})=>{const{errorType:s,...i}=e;return{msg:"Failed to load national park",error:new Error(s),extra:{arkId:t,...i}}},target:T.sendErrorLog}],or:{sid:"typ7to"}}),(0,n.withFactory)({sid:"ttia52",fn:()=>(0,o.Fs)(A,{adapter:(0,n.withFactory)({sid:"-i6tplq",fn:()=>(0,o.P3)({maxEntries:100})}),staleAfter:"10m"})});const B=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/explore/services/national_park/index.ts",lifecycle:{start:P},api:{outputs:{$park:A.$data},internals:{nationalParkQuery:A}}})},51389:function(e,t,s){"use strict";s.d(t,{IN:function(){return u},cF:function(){return r},nS:function(){return c}});var i=s(67294),n=s(50308),o=s.n(n);const a=e=>{const t=document.querySelector(".mobile-app-banner-full");t&&t.contains(e.target)&&e.stopImmediatePropagation()},r=e=>{(0,i.useEffect)((()=>window?(e&&window.addEventListener("mouseup",a,!0),()=>window.removeEventListener("mouseup",a,!0)):o()),[e])};var l=s(97650);const c=(e,t)=>{const{threshold:s=.5,triggerOnce:n=!0,...o}=t??{},[a,r]=(0,l.YD)({threshold:s,triggerOnce:n,...o});return(0,i.useEffect)((()=>{r&&e()}),[e,r]),a};function d(e){const{scrollTop:t,scrollHeight:s,clientHeight:i}=e;return Math.abs(t+i-s)<1}const u=()=>{const[e,t]=(0,i.useState)(!1),[s,n]=(0,i.useState)(null),o=(0,i.useCallback)((()=>{s&&t(d(s))}),[s]);return(0,i.useEffect)((()=>{const e=()=>{s&&t(d(s))};return s?.addEventListener("scroll",e),()=>{s?.removeEventListener("scroll",e)}}),[s]),{isScrolledToBottom:e,setScrollElement:n,update:o}}},50191:function(e,t,s){"use strict";function i(e){return{lat:e.latitude,lon:e.longitude}}function n(e){return{latitude:e.lat,longitude:e.lng}}s.d(t,{Tc:function(){return n},kI:function(){return i}})},27946:function(e,t,s){"use strict";s.d(t,{S3:function(){return i},hH:function(){return n},vK:function(){return o}});const i=e=>{const{clientWidth:t,clientHeight:s}=e.getContainer();return{width:t,height:s}},n=(e,t,s=0)=>e.x<t.x+t.width+s&&s+e.x+e.width>t.x&&e.y<t.y+t.height+s&&e.height+e.y+s>t.y,o=(e,t,s)=>{const i=[],n=Array(e.length).fill(!1),o=(i,n,a,r)=>{n[i]=!0;for(let i=0;i<e.length;i+=1){const l=e[i];!n[i]&&t(a,l)&&(s?.(),o(i,n,e[i],r),r.push(e[i]))}};for(let t=0;t<e.length;t+=1){const s=e[t],a=[s];n[t]||(o(t,n,s,a),i.push(a))}return i}},32671:function(e,t,s){"use strict";s.d(t,{I:function(){return g}});var i=s(30091),n=s(98116),o=s(30040),a=s(95219),r=s(10924),l=s(47420),c=s(95628);const{createReporter:d}=r.I.inputs,u={service:o.t6.Guides,category:"trap"},p=l.i.outputs.exact.$departDate.map((e=>e?(0,a.cM)(e):null)),m=l.i.outputs.exact.$returnDate.map((e=>e?(0,a.cM)(e):null)),h=c.R.outputs.$guideId,_=(0,n.combine)({and:[{direction:c.R.outputs.$guideId,isIata:c.R.outputs.$isIata},({direction:e,isIata:t})=>!t&&e?e:null],or:{sid:"-af3jfp"}}),x={outputs:{$departDateISO:p,$returnDateISO:m,$locationId:h,$destination:_},inputs:{forwardToAnalyticsWithDefaults:d({data:u,payload:{pageName:"main",source:null,location_id:h,origin:l.i.outputs.$origin.map((e=>e?.cityIata??null)),destination:_,depart_date:p,return_date:m,guide_ark_id:h}})}},g=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/analytics/index.ts",api:x})},86117:function(e,t,s){"use strict";s.r(t),s.d(t,{directionScreenFeedService:function(){return Ki}});var i=s(30091),n=s(67294),o=s(4190),a=s(33864),r=s(98116),l=s(65752),c=s(32419),d=s(47420),u=s(88998),p=s(85893);const m=({className:e,...t},s)=>(0,p.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,className:e,"data-test-id":"icon",ref:s,style:{display:"inline-block"},...t,children:[(0,p.jsxs)("g",{clipPath:"url(#EmojiAirplane__a)",children:[(0,p.jsx)("path",{d:"m7.039 16.155-4.8-2.606c-.559-.281.615-1.223 1.005-1.2 1.71.101 6.806.806 6.806.806l-3.011 3ZM7.808 16.924l2.606 4.8c.277.562 1.222-.615 1.196-1.005-.101-1.71-.803-6.807-.803-6.807l-3 3.012Z",fill:"#33B8FF"}),(0,p.jsx)("path",{d:"m8.64 7.418-.611 1.016c-.064.109.015.187.123.123l1.017-.61-.529-.53ZM10.703 8.31l-.612 1.016c-.063.109.015.188.124.124l1.016-.607-.528-.533ZM6.566 6.54l-.611 1.016c-.064.109.015.188.124.124l1.016-.611-.529-.529ZM16.541 15.319l-1.016.611c-.109.064-.188-.015-.124-.124l.611-1.016.53.529ZM15.649 13.26l-1.016.611c-.11.064-.188-.015-.124-.123l.607-1.017.533.529ZM17.422 17.392l-1.016.612c-.108.063-.187-.015-.123-.124l.61-1.016.53.528Z",fill:"#99A8AE"}),(0,p.jsx)("path",{d:"m14.033 3.6-.923-.919s-2.329 1.613-2.055 2.967c1.361.273 2.978-2.048 2.978-2.048Z",fill:"url(#EmojiAirplane__b)"}),(0,p.jsx)("path",{d:"m14.115 3.518-.922-.92-.083.083.923.919.082-.083Z",fill:"#99A8AE"}),(0,p.jsx)("path",{d:"m11.258 5.145.307.304s1.583-1.343 1.718-2.018c-.68.135-2.025 1.714-2.025 1.714Z",fill:"url(#EmojiAirplane__c)"}),(0,p.jsx)("path",{d:"m9.84 3.191-.923-.919S6.592 3.885 6.862 5.24C8.22 5.509 9.84 3.19 9.84 3.19Z",fill:"url(#EmojiAirplane__d)"}),(0,p.jsx)("path",{d:"M9.922 3.109 9 2.19l-.086.083.926.918.082-.082Z",fill:"#99A8AE"}),(0,p.jsx)("path",{d:"m7.061 4.732.308.308s1.586-1.343 1.717-2.018c-.679.132-2.025 1.71-2.025 1.71Z",fill:"url(#EmojiAirplane__e)"}),(0,p.jsx)("path",{d:"M2.505 2.824c-.776-.072-1.035.39-1.5.858-.757.758.266 1.073 1.905 1.778l9.84 4.23 4.826-4.811S7.91 3.319 2.505 2.824Z",fill:"#33B8FF"}),(0,p.jsx)("path",{d:"m3.367 4.976 1.478-1.481c4.807.439 11.029 1.53 12.345 1.766l.045-.045S10.189 3.934 4.785 3.44L3.236 4.984l10.009 4.293.06-.063-9.938-4.238Z",fill:"#20A0FF"}),(0,p.jsx)("path",{d:"m20.471 10.016.923.919s-1.616 2.317-2.978 2.047c-.274-1.357 2.055-2.966 2.055-2.966Z",fill:"url(#EmojiAirplane__f)"}),(0,p.jsx)("path",{d:"m20.554 9.934.922.918-.082.083-.923-.919.083-.082Z",fill:"#99A8AE"}),(0,p.jsx)("path",{d:"m18.922 12.784-.307-.308s1.346-1.579 2.025-1.71c-.135.671-1.718 2.018-1.718 2.018Z",fill:"url(#EmojiAirplane__g)"}),(0,p.jsx)("path",{d:"m20.884 14.197.922.92s-1.616 2.317-2.977 2.047c-.274-1.354 2.055-2.967 2.055-2.967Z",fill:"url(#EmojiAirplane__h)"}),(0,p.jsx)("path",{d:"m20.966 14.115.923.919-.083.082-.922-.918.082-.083Z",fill:"#99A8AE"}),(0,p.jsx)("path",{d:"m19.335 16.965-.308-.308s1.347-1.578 2.025-1.71c-.134.676-1.717 2.018-1.717 2.018Z",fill:"url(#EmojiAirplane__i)"}),(0,p.jsx)("path",{d:"M21.247 21.499c.072.772-.4 1.035-.862 1.496-.754.754-1.073-.266-1.781-1.898l-4.241-9.802 4.826-4.811c-.004 0 1.564 9.63 2.058 15.015Z",fill:"#33B8FF"}),(0,p.jsx)("path",{d:"m19.087 20.644 1.486-1.474c-.443-4.793-1.534-10.991-1.77-12.304l.044-.045s1.287 7.02 1.785 12.409l-1.545 1.545-4.312-9.975.06-.06 4.252 9.904Z",fill:"#20A0FF"}),(0,p.jsx)("path",{d:"M23.122.877C22.8.56 20.33.687 18.038 2.967c-4.043 4.027-7.722 7.68-9.192 9.146-1.23 1.226-3.195 5.478-2.854 5.816.338.337 4.606-1.616 5.84-2.839 1.518-1.515 5.125-5.093 9.194-9.146 2.284-2.28 2.412-4.748 2.096-5.067Z",fill:"url(#EmojiAirplane__j)"}),(0,p.jsx)("path",{d:"M10.463 13.481c-.225-.225-2.3 1.755-3.42 2.873C5.92 17.47 5.08 18.55 5.23 18.698c.15.146 1.227-.687 2.352-1.808 1.117-1.121 3.104-3.184 2.88-3.409Z",fill:"url(#EmojiAirplane__k)"}),(0,p.jsx)("path",{d:"M21.739 3.6a1.752 1.752 0 0 0-.146-.428l.532-.337c.079.232.09.454.067.641l-.453.124ZM22.099 2.752l-.548.346a1.42 1.42 0 0 0-.266-.36l.476-.477c.165.158.27.326.338.491ZM22.181 3.57a1.35 1.35 0 0 1-.09.304c-.034.078-.322.112-.319.03 0-.064-.003-.139-.018-.222l.427-.112ZM20.363 2.22c.134.026.28.075.427.146l.338-.532a1.456 1.456 0 0 0-.642-.068l-.123.454ZM21.206 1.86l-.345.548c.128.067.252.153.36.266l.477-.477a1.377 1.377 0 0 0-.492-.337ZM20.392 1.778a1.348 1.348 0 0 0-.303.09c-.079.033-.113.322-.03.318.063 0 .139.004.221.019l.112-.427Z",fill:"#302C3B"})]}),(0,p.jsxs)("defs",{children:[(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__b",x1:11.777,y1:3.858,x2:12.851,y2:4.933,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{offset:.394,stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.535,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.702,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.88,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__c",x1:12.166,y1:4.185,x2:12.523,y2:4.543,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.233,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.508,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.802,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__d",x1:7.582,y1:3.448,x2:8.657,y2:4.523,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{offset:.394,stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.535,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.702,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.88,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__e",x1:7.971,y1:3.775,x2:8.328,y2:4.132,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.233,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.508,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.802,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__f",x1:20.211,y1:12.267,x2:19.136,y2:11.192,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{offset:.394,stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.535,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.702,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.88,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__g",x1:19.882,y1:11.877,x2:19.524,y2:11.519,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.233,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.508,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.802,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__h",x1:20.624,y1:16.449,x2:19.549,y2:15.374,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{offset:.394,stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.535,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.702,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.88,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__i",x1:20.295,y1:16.059,x2:19.937,y2:15.701,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{stopColor:"#D8DDE0"}),(0,p.jsx)("stop",{offset:.233,stopColor:"#D3D9DC"}),(0,p.jsx)("stop",{offset:.508,stopColor:"#C5CDD1"}),(0,p.jsx)("stop",{offset:.802,stopColor:"#ADB9BE"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__j",x1:13.055,y1:7.902,x2:16.058,y2:10.905,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{offset:.297,stopColor:"#E6EBEF"}),(0,p.jsx)("stop",{offset:.588,stopColor:"#E1E7EB"}),(0,p.jsx)("stop",{offset:.932,stopColor:"#D3DBE0"}),(0,p.jsx)("stop",{offset:1,stopColor:"#CFD8DD"})]}),(0,p.jsxs)("linearGradient",{id:"EmojiAirplane__k",x1:7.574,y1:15.818,x2:8.112,y2:16.355,gradientUnits:"userSpaceOnUse",children:[(0,p.jsx)("stop",{stopColor:"#E6EBEF"}),(0,p.jsx)("stop",{offset:.208,stopColor:"#E1E7EB"}),(0,p.jsx)("stop",{offset:.453,stopColor:"#D3DADF"}),(0,p.jsx)("stop",{offset:.716,stopColor:"#BBC6CB"}),(0,p.jsx)("stop",{offset:.992,stopColor:"#9AA9AF"}),(0,p.jsx)("stop",{offset:1,stopColor:"#99A8AE"})]}),(0,p.jsx)("clipPath",{id:"EmojiAirplane__a",children:(0,p.jsx)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})]})]}),h=(0,n.memo)((0,n.forwardRef)(m));h.displayName="EmojiAirplane";var _=s(28225);function x({onClick:e}){const{t:t}=(0,_.useTranslation)("widget_guides_feed");return(0,p.jsx)(a.A,{children:(0,p.jsx)(a.A.Block,{className:"s__s26xarJjWXrrNlZUD1N4",children:(0,p.jsxs)(u.A,{noTitle:!0,children:[(0,p.jsx)(u.A.Icon,{children:(0,p.jsx)(h,{})}),(0,p.jsx)(u.A.Content,{children:t("iAmInCity.emptyState.description")}),(0,p.jsx)(u.A.Actions,{children:(0,p.jsx)(u.A.Action,{onClick:e,children:t("iAmInCity.emptyState.action")})})]})})})}const{iAmInCityScreen:g}=c.D.outputs,{forceDestinationChoice:f}=d.i.inputs,y=(0,r.withFactory)({sid:"5lmk2q",fn:()=>(0,l.bU)({if:g.$active,then:(0,r.withFactory)({sid:"-88622o",fn:()=>(0,l.SC)({view:x,bind:{onClick:f}})}),else:()=>null})});var k=s(72675),j=s(54448),b=s(76101),v=s(14210),C=s(33350),w=s(63762),N=s(24943);const S=(0,r.createDomain)({sid:"-5jb9hy"}),{directionScreen:I}=b.A.outputs,{iAmInCityScreen:E}=c.D.outputs,{countryScreen:D}=C.$.outputs,{nationalParkScreen:P}=w.n.outputs,{exactPricesResultsScreen:A}=N.q.outputs,T=S.createEvent({sid:"-q7nxyz"}),B={outputs:{$isVisible:(0,r.withFactory)({sid:"-4rqros",fn:()=>(0,k.x)(v.qF.outputs.$isFeedEnabled,(0,r.withFactory)({sid:"xdfckq",fn:()=>(0,j.or)(I.$active,A.$active,E.$active,D.$active,P.$active)}))}),initialized:T}};s(21703);var M=s(46898),$=s.n(M),L=s(76588),R=s(80472),U=s(27636),z=s(78260),O=s(63246),H=s(8661),F=s(95628),G=s(41832),W=s(38387),q=s(2885),Z=s(87007),Q=s(76551);let J;!function(e){e.header="header",e.trap_preview="trap_preview",e.bullets="bullets",e.layer_carousel="layer_carousel",e.layer_grid="layer_grid",e.layers_list="layers_list",e.providers="providers",e.pins_group_2="pins_group_2",e.carousel_expanded="carousel_expanded",e.carousel_compact="carousel_compact",e.bullet="bullet",e.text="text",e.header_with_images="header_with_images",e.hotels="hotels",e.locations_list="locations_list",e.carousel_v2="carousel_v2"}(J||(J={}));const V=e=>t=>t.type===e,Y=V(J.header),X=V(J.trap_preview),K=V(J.bullets),ee=V(J.layer_carousel),te=V(J.layer_grid),se=V(J.layers_list),ie=V(J.providers),ne=V(J.pins_group_2),oe=V(J.bullet),ae=V(J.text),re=V(J.carousel_expanded),le=V(J.carousel_compact),ce=V(J.header_with_images),de=V(J.hotels),ue=V(J.locations_list),pe=V(J.carousel_v2),me=({width:e,height:t,theme:s,url:i})=>{const n=window?Math.max(Math.floor(window.devicePixelRatio),1):1,o=i.replace("{width}",(e*n).toString(10)).replace("{height}",(t*n).toString(10));return s?o.replace("{theme}",s):o},he=e=>Boolean(e.premium?.overlay),_e=e=>e.premium?.badge,xe=e=>!!e.data&&e.data.places.length<=2,ge=e=>{const t=[];for(const s of e)if(se(s)&&s.data)for(const e of s.data.layers)e.places&&e.button&&t.push({data:e,type:J.layer_carousel,analytics:s.analytics});else t.push(s);return t},fe=e=>{const t=[];let s=0;for(const i of e){const e=te(i)&&xe(i);ee(i)||e||s%2!=1||(t.pop(),s=0),(ee(i)||e)&&(s+=1),t.push(i)}return s%2==1&&t.pop(),t},ye=e=>({title:e.title,subtitle:e.subtitle,iconUrl:e.emoji.svg,iconImageUrl:e.icon_image_url,buttonText:e.button?.text}),ke=(0,z.cr)("guides",{name:"guides_feed",samplingRate:.2}),je=(0,r.createEvent)({sid:"-pjx24r"}),be=(0,r.restore)(je,null,{sid:"-mzi64s"}),ve=(0,r.combine)({and:[{currency:G.y.outputs.$currency,hotelParams:Z.$o.outputs.$searchHotelParams,defaultQuery:H.D.outputs.$defaultQuery,isReduceTrapTitle:v.qF.outputs.$isReduceTrapTitle,sourcePlace:be,trapNewDesignEnabled:Q.R.outputs.$trapNewDesignEnabled,mainScreenToDirectionScreenNewNavigationEnabled:Q.R.outputs.$mainScreenToDirectionScreenNewNavigationEnabled},({currency:e,hotelParams:t,defaultQuery:s,isReduceTrapTitle:i,sourcePlace:n,mainScreenToDirectionScreenNewNavigationEnabled:o,trapNewDesignEnabled:a})=>{const r={options:"exclude-walks",currency:e,...s,...t};return o&&n&&(r.source_place=n,r["features.main_screen_to_direction_screen_new_navigation"]=!0),i&&(r["features.reduce_trap_title"]=i),a&&(r["features.trap_new_design"]=!0),r}],or:{sid:"-novuye"}}),Ce=(0,r.createEvent)({sid:"b1hoy1"}),we=(0,r.restore)(Ce,!1,{sid:"-1pbbwx"}),{$data:Ne,$status:Se,reset:Ie,start:Ee,$error:De,$pending:Pe,$failed:Ae,__:Te,finished:{failure:Be}}=(0,r.withFactory)({sid:"vldffq",fn:()=>(0,L.s5)({enabled:O.y.outputs.$isClient,name:"guides_feed",request:{method:"GET",url:(0,r.combine)({and:[{apiPrefix:H.D.outputs.$apiPrefix,trapId:F.R.outputs.$direction},({apiPrefix:e,trapId:t})=>`${e}/v3/feed/${t}`],or:{sid:"yjtzr7"}}),query:ve,headers:H.D.outputs.$defaultHeaders},response:{contract:(0,R.v)(q.dd),mapData:{source:W.l.outputs.$isMobile,fn:({result:e},t)=>{const s=e.blocks,i=$()(ge,fe);return{...e,blocks:t?s:i(s)}}}}})}),[Me,$e]=(0,r.withFactory)({sid:"-n3l8b",fn:()=>(0,U.K)(Ne)}),Le=Me.map((e=>{const t=e?.blocks.find((e=>e.type===J.locations_list));if(!t)return[];const s=t.data?.locations.map((e=>e.navigation.ark_id));return s})),Re=(0,r.combine)({and:[{error:De,data:Me},({error:e,data:t})=>(0,r.withFactory)({sid:"-8g1gm0",fn:()=>(0,L.Bh)(404)})({error:e})||0===t?.blocks.length],or:{sid:"7gwrjt"}});(0,r.sample)({and:[{source:Be,filter:L.QO,fn:()=>new Error("guides_feed contract validation failed"),target:ke.sendErrorLog}],or:{sid:"-j4ebe0"}});const Ue={internal:{fetchFx:Te.executeFx,$dataOverride:$e},inputs:{fetch:Ee,reset:Ie,readyToFetchFeed:Ce,setSourcePlace:je},outputs:{$data:Me,$status:Se,$noData:Re,$error:De,$pending:Pe,$failed:Ae,$nearbyLocationsIds:Le,$shouldFetchFeed:we}},ze=S.createEvent({sid:"-r3a7qz"}),Oe=S.createEvent({sid:"da2mpf"}),He=S.createEvent({sid:"1f34od"}),Fe=S.createEvent({sid:"-b158r6"}),Ge=S.createEvent({sid:"jbs3cq"}),We=S.createEvent({sid:"4rnfju"}),qe=S.createEvent({sid:"-embvm2"}),Ze={inputs:{blockShowed:Fe,providerClick:S.createEvent({sid:"gp6ld"}),textExpandClick:We,showMoreHotelsClicked:ze,hotelItemShowed:Oe},internals:{providerClickedAnalytics:Ge,sendTextExpandAnalitics:qe,sendHotelItemShowedAnalitics:He}};var Qe=s(47047),Je=s(5500),Ve=s(8681),Ye=s(99186),Xe=s(79403),Ke=s(53788),et=s(82203),tt=s(35529),st=s(45711);const it=(0,tt.Record)({slug:tt.String}),nt=(0,tt.Record)({entity:it.extend({type:(0,tt.Literal)("NATIONAL_PARK")}).nullable(),content:(0,tt.Record)({ark_id:st.Jm})}),ot=(0,tt.Union)(nt,tt.Unknown),at=(0,tt.Record)({locations_main_page_v2:(0,tt.Array)(ot)}),rt=e=>e.locations_main_page_v2.reduce(((e,t)=>{if(nt.guard(t)){const{entity:s,content:i}=t;e[i.ark_id]={id:i.ark_id,slug:s?.slug}}return e}),{}),{$brand:lt}=Xe.U.outputs,{$language:ct}=Ye.l.outputs,{createAriadneQuery:dt}=Ve.a.inputs,{$currency:ut}=G.y.outputs,{$market:pt}=Ke.D.outputs,{$tripClass:mt,$origin:ht}=d.i.outputs,{updateAnalyticsDirectionSource:_t}=d.i.inputs,xt=(0,r.withFactory)({sid:"-bdprsl",fn:()=>(0,Qe.d)((()=>dt({params:(0,r.withFactory)({sid:"-r74a7z",fn:()=>(0,L.t6)()}),graphQL:{query:"\n  query GetLocationsMainPageV2($brand: Brand!, $input: LocationsV2Input!) {\n    locations_main_page_v2(\n      brand: $brand,\n      input: $input,\n    ) {\n      entity {\n        type\n        slug\n      }\n      content {\n        __typename\n        ... on NationalParkContent {\n          ark_id\n        }\n      }\n    }\n  }\n",operationName:"locations_main_page_v2",variables:{source:(0,r.combine)({and:[{language:ct,brand:lt,origin:ht,market:pt,currency:ut,trip_class:mt}],or:{sid:"-mna74j"}}),fn:(e,{language:t,brand:s,origin:i,currency:n,market:o,trip_class:a})=>({brand:s,locales:[t],input:{ark_ids:e??[],iatas:[],origin:i?.cityIata??i?.iata??"",market:o,currency:n,trip_class:a}})}},contract:at,mapData:rt,validate:({result:e})=>{try{return rt(e.data),!0}catch{return!1}}})))}),{$data:gt,$pending:ft}=xt,yt=(0,r.createEvent)({sid:"-k0zad3"});(0,r.sample)({and:[{clock:yt,fn:()=>et.yh.NearbyLocations,target:_t}],or:{sid:"-p5mntb"}}),(0,r.sample)({and:[{source:yt,fn:({arkId:e,title:t})=>({destination:{iata:e,name:t,type:Je.A.NationalPark}}),target:w.n.outputs.nationalParkScreen.open}],or:{sid:"-oqs7sk"}});const kt={inputs:{fetchLocations:xt.start,openPark:yt},outputs:{$data:gt,$pending:ft}};var jt=s(73806),bt=s(51456),vt=s(27946);const Ct=(0,r.createEvent)({sid:"-ht63wb"}),wt={inputs:{setMapboxInstance:Ct},outputs:{$mapboxInstance:(0,r.restore)(Ct,null,{sid:"4kpsqw"})}};var Nt=s(89101),St=s(89421);const{createMapStyle:It}=Nt.B.inputs,{$apiPrefix:Et,$defaultQuery:Dt,$defaultHeaders:Pt}=H.D.outputs,{$data:At,refresh:Tt}=(0,r.withFactory)({sid:"k3jktg",fn:()=>(0,L.s5)({name:"guides_travel_map_in_feed",params:(0,r.withFactory)({sid:"-1o4tkf",fn:()=>(0,L.t6)()}),request:{method:"GET",url:{source:Et,fn:({direction:e},t)=>`${t}/v2/travel_maps/${e}`},query:(0,r.combine)({and:[{defaultQuery:Dt,currency:G.y.outputs.$currency},({defaultQuery:e,currency:t})=>({...e,currency:t})],or:{sid:"tdfnxt"}}),headers:Pt},response:{contract:(0,R.v)(q.g6),mapData:({result:e})=>(0,bt.TP)(e)}})}),Bt=At.map((e=>e?.groups??null)).map((e=>e?.find((e=>"districts"===e.type))??null)).map(bt.Fq),Mt=(0,r.createEvent)({sid:"-cvfeo0"}),$t=At.map((e=>e?.polygons_geo_json??null)),Lt=(0,o.createGate)({and:[],or:{sid:"cbura1"}}),{$data:Rt}=It({$directionMapShowed:(0,r.createStore)(!0,{sid:"1kz1c"}),readyToFetchMapStyle:Mt,$placeData:At});(0,r.sample)({and:[{clock:[$t.updates,St.H.outputs.$theme.updates],target:Mt}],or:{sid:"svfcep"}}),(0,r.sample)({and:[{clock:Lt.open,source:{direction:F.R.outputs.$direction,isMobile:W.l.outputs.$isMobile},filter:({isMobile:e,direction:t})=>!e&&Boolean(t),fn:({direction:e})=>({direction:e}),target:Tt}],or:{sid:"t9pzu3"}});const Ut={outputs:{$mapStyleData:Rt,$travelMapData:At,$initialDistrictPins:Bt,TrapPreviewGate:Lt},internals:{fetchTravelMap:Tt}},{createDistrictPins:zt}=jt.qu.inputs,{$mapboxInstance:Ot}=wt.outputs,{$initialDistrictPins:Ht}=Ut.outputs,Ft=(0,r.combine)({and:[{map:Ot},({map:e})=>{if(!e)return null;const{width:t,height:s}=(0,vt.S3)(e);return{minX:0,minY:0,maxX:t,maxY:s-72}}],or:{sid:"ejt9l1"}}),{setDistrictPinSize:Gt,recalculatePinsPosition:Wt,$pins:qt,$mapDistrictPins:Zt}=zt({$boundingBox:Ft,$mapboxInstance:Ot,$isCalculationEnabled:O.y.outputs.$isClient,$selectedPinId:(0,r.createStore)(null,{sid:"6wc6ol"}),$poisFromDistrict:(0,r.createStore)([],{sid:"g972sd"}),$initialDistrictPins:Ht});Zt.reset(bt.mH.inputs.fetch);const Qt={inputs:{setDistrictPinSize:Gt,recalculatePinsPosition:Wt},outputs:{$mapDistrictPins:Zt,$pins:qt}};var Jt=s(54236),Vt=s(54428);const Yt=(0,r.sample)({and:[{clock:[d.i.outputs.exact.$departDate.updates,d.i.outputs.exact.$returnDate.updates,d.i.outputs.$passengers.updates]}],or:{sid:"vemoam"}});(0,r.sample)({and:[{clock:[Vt.O.outputs.$jwt.updates,v.qF.outputs.$isFeedEnabled.updates,G.y.outputs.$currency.updates,Jt.z.outputs.$localeDeprecated.updates,F.R.outputs.$direction.updates,Yt],source:{locale:Jt.z.outputs.$localeDeprecated,direction:F.R.outputs.$direction,flag:v.qF.outputs.$isFeedEnabled},filter:({direction:e,flag:t,locale:s})=>Boolean(s&&e&&t),target:Ue.inputs.fetch}],or:{sid:"d1thv9"}}),(0,r.sample)({and:[{source:F.R.outputs.$direction,filter:e=>!e,target:Ue.inputs.reset}],or:{sid:"dn9h0c"}}),(0,r.sample)({and:[{source:Ue.outputs.$nearbyLocationsIds,filter:e=>Boolean(e.length),target:kt.inputs.fetchLocations}],or:{sid:"e23x13"}}),(0,r.sample)({and:[{clock:Ue.outputs.$data,filter:Boolean,fn:()=>null,target:Ue.inputs.setSourcePlace}],or:{sid:"egyd1u"}});var Xt=s(54870),Kt=s(32671),es=s(39018);const{forwardToAnalyticsWithDefaults:ts}=Kt.I.inputs,{sendEvent:ss}=es.n.inputs;ts({clock:Ze.inputs.blockShowed,data:{action:"showed",label:"trap_content",category:"direction"},payload:(e,{payload:t})=>({...t,...e,userEvent:!1})}),(0,r.sample)({and:[{clock:Ze.inputs.providerClick,fn:({trap_id:e,role:t,contacts:s,order:i})=>({trap_id:e,occupation:t,click_url:s[0].url,item_position:i,content_source:"direction"}),target:Ze.internals.providerClickedAnalytics}],or:{sid:"g5orgp"}}),ts({clock:Ze.internals.providerClickedAnalytics,data:{action:"clicked",label:"content_providers",category:"direction"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})}),(0,r.sample)({and:[{clock:Ze.internals.providerClickedAnalytics,fn:()=>({type:"koroche_open_local_contact"}),target:ss}],or:{sid:"hk9u1x"}}),ts({clock:Ze.inputs.showMoreHotelsClicked,data:{action:"clicked",label:"hotels",category:"direction"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})}),(0,r.sample)({and:[{clock:Ze.inputs.textExpandClick,source:{location_id:F.R.outputs.$direction,location_name:Xt.C.outputs.$park.map((e=>e?.slug??null))},fn:({location_id:e,location_name:t},{trap_id:s})=>({trap_id:s,location_id:e??"",location_name:t??""}),target:Ze.internals.sendTextExpandAnalitics}],or:{sid:"iv0chm"}}),ts({clock:Ze.internals.sendTextExpandAnalitics,data:{action:"clicked",label:"trap_description",category:"direction"},payload:(e,{payload:t})=>({...t,...e,userEvent:!0})}),(0,r.sample)({and:[{clock:Ze.inputs.hotelItemShowed,source:G.y.outputs.$currency,fn:(e,t)=>({source:"explore",hotel_id:t.search_hotel_link_v2?(0,Z.wB)(t.search_hotel_link_v2):void 0,rating:t.rating,stars:t.stars,price_per_night:t.price_from,currency:e}),target:Ze.internals.sendHotelItemShowedAnalitics}],or:{sid:"-eptihc"}}),ts({clock:Ze.internals.sendHotelItemShowedAnalitics,data:{action:"showed",label:"offer",category:"hotels"},payload:(e,{payload:t})=>({...t,...e,userEvent:!1})});const is={feed:Ue,widget:B,analytics:Ze,nearbyParks:kt,districtPins:Qt,mapboxInstance:wt,previewMap:Ut};var ns,os=s(94184),as=s.n(os),rs=s(47956),ls=s(44904),cs=s(31087),ds=s(43587),us=s(1156),ps=s(39535),ms=s(49963),hs=s(44619),_s=s(16097),xs="s__RekoOrh__Tnih48WfITv",gs=s(4407);function fs(){return fs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},fs.apply(this,arguments)}var ys=function(e){return n.createElement("svg",fs({width:6,height:6,xmlns:"http://www.w3.org/2000/svg"},e),ns||(ns=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 0v6h6a6 6 0 01-6-6z"})))},ks={badge:"s__Uu0HBD_do1PC0Tv6xfP9",corner:"s__PZEgVk4tSGRmYYdxIBOJ",topCorner:"s__sU_wQHYEWmzGo65JhAiA",bottomCorner:"s__VuykG0ooMedk_DVNpLHg"};function js({className:e,title:t,textColor:s,backgroundColor:i}){const n=(0,o.useUnit)(St.H.outputs.$isNight),a=n?s.dark_color:s.light_color,r=n?i.dark_color:i.light_color;return(0,p.jsxs)("div",{className:as()(e,ks.badge),style:{backgroundColor:r},children:[(0,p.jsx)(ms.x,{type:hs.y.Body3Semi,className:ks.title,truncateMode:hs.k.SingleLine,children:(0,p.jsx)("span",{style:{color:a},children:t})}),(0,p.jsx)(ys,{className:as()(ks.corner,ks.topCorner),style:{fill:r}}),(0,p.jsx)(ys,{className:as()(ks.corner,ks.bottomCorner),style:{fill:r}})]})}function bs({imageUrl:e,title:t,subtitle:s,badge:i,imageSize:n,className:o,backgroundColor:a,onClick:r}){return(0,p.jsxs)("div",{className:as()("s__J7ZHoXiwzo0NlyQfNdl8",o),onClick:r,children:[(0,p.jsxs)("div",{className:"s__gDAoDmcTafqbS4XaQGhA",style:{backgroundColor:a},children:[(0,p.jsx)("div",{className:"s__tvMi0GyQpAEV0SNuDWER",children:(0,p.jsx)(gs.E,{className:"s__upXpP1tdGkRi3QFVqhBJ",srcTemplate:e,width:n,height:n,contrastOverlay:!0})}),i&&(0,p.jsx)(js,{className:"s__wivxTYp25ApkKji4cYAx",title:i.text,textColor:i.style.text_color,backgroundColor:i.style.background_color})]}),(0,p.jsx)(ms.x,{className:"s__htwsw6zjDoxP9OamSur7",type:hs.y.Body2Semi,truncateMode:s?hs.k.SingleLine:hs.k.TwoLines,children:t}),s&&(0,p.jsx)(ds.AT,{className:"s__wR2wIYJIvP7F2sLlnK1X",type:hs.y.Body3Regular,truncateMode:hs.k.SingleLine,children:s})]})}function vs({block:e,className:t,onAllPlacesClick:s,onPlaceClick:i}){const{isMobile:a}=(0,o.useUnit)({isMobile:W.l.outputs.$isMobile}),{places:r,button:l,title:c,subtitle:d}=e,u=(0,n.useMemo)((()=>1===r.length),[r.length]),m=(0,n.useMemo)((()=>2===r.length),[r.length]),h=(0,n.useMemo)((()=>r.length>2?179:131),[r.length]),{scrollForward:_,scrollBackward:x,isAtStart:g,isAtEnd:f,carouselRef:y}=function({gapWidth:e,itemWidth:t}){const s=(0,n.useRef)(null),[i,o]=(0,n.useState)(!0),[a,r]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=s.current,t=()=>{if(!e)return;const{scrollLeft:t,scrollWidth:s,clientWidth:i}=e;o(t<=0),r(t+i>=s)};return e&&(e.addEventListener("scroll",t,{passive:!0}),t()),()=>{e&&e.removeEventListener("scroll",t)}}),[]);const l=(0,n.useCallback)((()=>{if(!s.current)return 0;const{clientWidth:n}=s.current;return i||a?2*t+.5*e-n/2:t+e}),[a,i,t,e]);return{scrollBackward:(0,n.useCallback)((()=>{if(!s.current)return;const e=l();s.current.scrollBy({left:-e,behavior:"smooth"})}),[l]),scrollForward:(0,n.useCallback)((()=>{if(!s.current)return;const e=l();s.current.scrollBy({left:e,behavior:"smooth"})}),[l]),isAtStart:i,isAtEnd:a,carouselRef:s}}({gapWidth:12,itemWidth:179}),k=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"s__ZaZ1VrXfLB8M7_wu1m0c",children:[(0,p.jsx)(ms.x,{className:"s__bmro3VPqhm1mqz8lcc3k",type:hs.y.Title2Bold,children:c}),(0,p.jsx)(ms.x,{className:"s__xtWUwvCpODvWN6KzMIu4",type:hs.y.Body1Regular,children:d})]}),l&&(0,p.jsx)("div",{className:"s__QoRk3CxSeHBXTzTUbZHg",children:(0,p.jsx)(us.z,{size:ps.qE.M,mod:ps.Ly.Default,priority:ps.Ji.Secondary,onClick:()=>{"group_id"===l.navigation.type?s({type:"group_id",groupId:l.navigation.group_id}):s({type:"deeplink",deeplink:l.navigation.deeplink})},children:l.text})})]});return(0,p.jsxs)("div",{className:as()("s__QzzU9ndQYi74HJkyRFMj",t),children:[a?k:(0,p.jsx)("div",{className:as()("s__mo6xtq1Ik6yHdZNqMKw2",!g&&"s__AM_75s0JLxwVeoMiKt3z"),children:k}),(0,p.jsxs)("div",{className:as()("s__ptrtW089nOQCy0LUJjea",u&&"s__NCfSfQ8W5wb9zaWXWgpL",m&&"s__j7m0suAEl0efg1aMeSIx"),children:[(0,p.jsxs)("nav",{className:"s__mJ1WdncPYj0iqcXKufVr",children:[!g&&(0,p.jsx)("div",{onClick:x,className:as()(xs,"s__R98iaMYTkU3w07GWc_fy"),children:(0,p.jsx)(_s.V,{})}),!f&&(0,p.jsx)("div",{onClick:_,className:as()(xs,"s__PYB28ZkMHYdIqr0QwQSQ"),children:(0,p.jsx)(_s.V,{})})]}),(0,p.jsx)("div",{ref:y,className:"s__MqN2qpZNcisvmwv7vkf1",children:r.map(((e,t)=>(0,p.jsx)(bs,{title:e.name,subtitle:e.description,imageUrl:e.image_url,imageSize:h,className:"s__hGhEkst2vs5lbU1Geex7",badge:e.badge,backgroundColor:e.background_color,onClick:()=>{"group_id"===e.navigation.type?i({type:"group_id",groupId:e.navigation.group_id,placeId:e.id}):i({type:"deeplink",deeplink:e.navigation.deeplink})}},t)))})]})]})}const Cs=(0,r.createEvent)({sid:"mshtq6"}),ws=(0,r.createEvent)({sid:"-792wq3"}),Ns=(0,r.createEvent)({sid:"sibucg"}),Ss=(0,r.createEvent)({sid:"-2gn0sd"}),Is=(0,r.createEvent)({sid:"-g3s300"}),Es=(0,r.createEvent)({sid:"-okkx99"});(0,r.sample)({and:[{clock:Cs,filter:e=>"group_id"===e.type,fn:e=>e,target:Ns}],or:{sid:"-u1t6hr"}}),(0,r.sample)({and:[{clock:Cs,filter:e=>"deeplink"===e.type,fn:e=>e,target:Ss}],or:{sid:"-tmexvn"}}),(0,r.sample)({and:[{clock:ws,filter:e=>"group_id"===e.type,fn:e=>e,target:Is}],or:{sid:"-tikdq4"}}),(0,r.sample)({and:[{clock:ws,filter:e=>"deeplink"===e.type,fn:e=>e,target:Es}],or:{sid:"-t36540"}}),(0,r.sample)({and:[{clock:Is,fn:({groupId:e})=>({mapOpenSource:cs.Oj.POI_CAROUSEL,openSource:cs.Ur.DIRECTION,layer:e}),target:rs.I.inputs.open}],or:{sid:"-snrwhw"}}),(0,r.sample)({and:[{clock:Ns,source:F.R.outputs.$direction,fn:(e,{groupId:t,placeId:s})=>({guideId:e,mapOpenSource:cs.Oj.POI_CAROUSEL,openSource:cs.Ur.DIRECTION,poiQueryOpenSource:cs.ik.DIRECTION,layer:t,poi:s}),target:ls.Y.inputs.open}],or:{sid:"-s5mowz"}}),(0,r.sample)({and:[{clock:Is,source:F.R.outputs.$direction,fn:(e,{groupId:t})=>({guideId:e,mapOpenSource:cs.Oj.POI_CAROUSEL,openSource:cs.Ur.DIRECTION,layer:t}),target:rs.I.inputs.open}],or:{sid:"2t4nn4"}}),(0,r.sample)({and:[{clock:[Ss,Es],fn:({deeplink:e})=>e,target:(0,r.createEffect)((e=>{window.open(e,"_blank")}),{sid:"qvdpt2"})}],or:{sid:"3cdger"}});const Ds={inputs:{placeClick:Cs,groupClick:ws}},Ps=(0,r.withFactory)({sid:"nfw0sf",fn:()=>(0,l.SC)({view:vs,bind:{onAllPlacesClick:Ds.inputs.groupClick,onPlaceClick:Ds.inputs.placeClick}})}),As=(0,i.G6)({api:{containers:{CarouselBlockContainer:Ps}},importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/direction_screen_carousel_v2_plugin/index.ts"});var Ts=s(77657),Bs=s(10001);const Ms=({className:e,onClick:t})=>{const{t:s}=(0,_.useTranslation)("widget_guides_feed"),i=(0,o.useUnit)(W.l.outputs.$isMobile);return(0,p.jsx)(a.A.Block,{className:as()("s__XVRobUCPxHXtnuPHim2R",e),children:(0,p.jsxs)(u.A,{size:i?Ts.g.Mobile:Ts.g.Desktop,children:[(0,p.jsx)(u.A.Icon,{mod:Bs.i.Warning}),(0,p.jsx)(u.A.Title,{children:s("feedError.title")}),(0,p.jsx)(u.A.Content,{className:"s__Amr1EFFuZL9J6G932CoN",children:s("feedError.description")}),(0,p.jsx)(u.A.Actions,{children:(0,p.jsx)(u.A.Action,{onClick:t,children:s("feedError.button")})})]})})};const $s=()=>(0,p.jsx)("div",{className:"s__E5bRl_do_3RFkFOo6qAl"});var Ls="s__ssaVwzkhdH9AA7LsqKnb";const Rs=({className:e})=>(0,o.useUnit)(W.l.outputs.$isMobile)?(0,p.jsx)("div",{className:Ls}):(0,p.jsx)(ds.qH,{className:as()(e,"s__OVYzT5vefsJXP1OI9VbJ"),children:(0,p.jsx)("div",{className:Ls,children:(0,p.jsx)("div",{className:"s__uK0BP9FyWjSkRkfChKdX"})})});const Us=()=>(0,p.jsxs)("div",{className:"s__jVTQX1mWxipTlsC8v8Ep",children:[(0,p.jsx)("div",{className:"s__ek7QU8qYWllho7FaYN4N"}),(0,p.jsx)("div",{className:"s__pEL0bDUiYPiu7MSloWXs"})]}),zs=()=>{if((0,o.useUnit)(W.l.outputs.$isMobile))return null;const e=new Array(4).fill(null).map(((e,t)=>(0,p.jsx)(Us,{},t)));return(0,p.jsxs)(ds.qH,{className:"s__kYocTABYF1NVLfqje3JS",children:[(0,p.jsx)("div",{className:"s__Z8ONhy56vcMdeKLy7djc"}),(0,p.jsx)("div",{className:"s__Q1Jm_i2cIvjwQO2F_mM5",children:e}),(0,p.jsx)("div",{className:"s__U3bPSCnCIhooxFvJ1JNw"})]})},Os=e=>(0,p.jsxs)("div",{className:as()("s__wCCkNnHKriMlx8fUtSHx",e.className),children:[(0,p.jsx)($s,{}),(0,p.jsx)(Rs,{}),(0,p.jsx)(zs,{})]});var Hs={feed:"s__CgGJxL7EiL38uQHQvyvh",feedCarouselV2:"s__DaApSJUKd58eU0bQeSUo",error:"s__mQrGgMigebYYgHohc1rQ",skeleton:"s__yLLHK6u6fYFUXgQ7Emcl",oneColumnBlock:"s__B7p0LmZpRmNDiVGQADpH",twoColumnsBlock:"s__EsDLCwfEswK6jTce3Fp4",carouselV2:"s__ItndWgbwEDWPePWiPLZX",header:"s__ngIenD8OjESCID1fupnw"};const Fs=({block:e,className:t})=>(0,p.jsx)("div",{className:as()("s__zvnyuBEEWpOC2Yf4h1iA",t),children:(0,p.jsxs)("div",{className:"s__VGRhQN7gvrPwIIwHv5xx",children:[(0,p.jsx)(ms.x,{className:"s__lB4Bv_jz95LwFy06oZN7",type:hs.y.Title2Bold,children:e.title}),e.subtitle&&(0,p.jsx)(ms.x,{className:"s__vfF4tB3sF9cv23HbczaF",type:hs.y.Body2Paragraph,mobileType:hs.y.Body1Paragraph,children:e.subtitle})]})});var Gs=s(50112),Ws=s(97405),qs={trapPreview:"s__MtFQQRTA1RXpcGCDAayP",header:"s__J85UgdBV_lgZmmgo16W6",title:"s__TI7i0ZWzCwqRQYGYxIIq",image:"s__dTjEihgoGDUdcxZkVb4G",map:"s__Zs8FGxe9vA8ozuTBJnml",imageWrapper:"s__w6KAF65k3oHY8NkVyefp",bubble:"s__GxiYWYx8ufJ5ZjzhUHZ8",bubbles:"s__Lft1c1BdrasxQN0cw8Gf",bubblesRow:"s__c5DN58P332JuUgxPFxBn"},Zs=s(62221);let Qs;!function(e){e[e.S=0]="S",e[e.M=1]="M",e[e.L=2]="L"}(Qs||(Qs={}));const Js=e=>{switch(e){case Qs.L:return hs.y.Body2Semi;case Qs.M:return hs.y.Body3Semi;case Qs.S:return hs.y.CaptionSemi;default:return hs.y.Body2Semi}},Vs=({iconUrl:e,title:t,className:s,size:i=Qs.L})=>(0,p.jsxs)("div",{className:as()("s__IeNsOhmbbJRXbjGYNHy4",s),children:[e&&(0,p.jsx)(ds.Mf,{imageAlt:"",imageUrl:e,className:as()("s__nFArTuidbQMAreL3aGiF",i===Qs.M&&"s__n1Q2SQZef6xc3IvGXhgK",i===Qs.S&&"s__XNgLUUOsugNHo5YYsmNZ")}),(0,p.jsx)(ms.x,{type:Js(i),children:t})]}),Ys=(e,t)=>(0,p.jsx)(Vs,{className:qs.bubble,title:e.title,iconUrl:e.emoji.svg,size:t},e.id),Xs=({block:e,onClick:t,cardWithTopIcon:s})=>{const i=(0,o.useUnit)(St.H.outputs.$theme),{bubblesRef:a,mapRef:r,currentSize:l,shouldRemoveLongestBubble:c}=(()=>{const{ref:e,width:t,isAlreadyRendered:s}=(0,Zs.y)(),{ref:i,width:o,isAlreadyRendered:a}=(0,Zs.y)(),[r,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(Qs.L),u=s||a,p=t-o,m=(0,Ws.D9)(u?p:0);return(0,n.useEffect)((()=>{if(u&&m&&m!==p&&p<=24)switch(c){case Qs.L:return void d(Qs.M);case Qs.M:d(Qs.S);break;case Qs.S:if(!0===r)return;l(!0),d(Qs.L)}}),[u,m,p,c,r]),{bubblesRef:i,mapRef:e,currentSize:c,shouldRemoveLongestBubble:r}})(),d=(0,n.useMemo)((()=>me({url:e.trap_preview.image_url,theme:i,width:311,height:128})),[e,i]),{isImageLoaded:u,onImageLoad:m}=(0,Ws.h3)(d),h=e.layers,_=(0,n.useMemo)((()=>h.length>4?h.slice(0,3):h.slice(0,4)),[h]),x=(0,n.useMemo)((()=>c?(e=>{const t=e.reduce(((e,t)=>t.title.length>e.title.length?t:e));return e.filter((e=>e.id!==t.id))})(_):_),[_,c]),g=h.length>(c?3:4),f=x.slice(0,2),y=x.slice(2);return(0,p.jsxs)(ds.qH,{cardWithTopIcon:s,title:e.trap_preview.title,iconUrl:e.emoji?.svg,className:qs.trapPreview,classNames:{header:qs.title},onClick:t,children:[(0,p.jsxs)("div",{ref:r,className:qs.map,onClick:t,children:[(0,p.jsx)("div",{className:qs.imageWrapper,children:(0,p.jsx)("img",{className:as()(qs.image,qs.transition,u&&qs.visible),onLoad:m,src:d})}),(0,p.jsxs)("div",{ref:a,className:qs.bubbles,children:[(0,p.jsx)("div",{className:qs.bubblesRow,children:f.map((e=>Ys(e,l)))}),y.length>0&&(0,p.jsxs)("div",{className:qs.bubblesRow,children:[y.map((e=>Ys(e,l))),g&&(0,p.jsx)(Vs,{className:qs.bubble,size:l,title:"+"+(h.length-x.length)})]})]})]}),(0,p.jsx)(ds.of,{testId:"places-on-map-btn",children:e.button.text})]})};var Ks=s(25650);const ei=({children:e,className:t,onClick:s})=>(0,p.jsxs)(us.z,{className:as()("s__VysbEy0KNzDKYxayzq9b",t),priority:ps.Ji.Primary,size:ps.qE.Custom,onClick:s,testId:"places-on-map-btn",children:[(0,p.jsx)(us.z.Icon,{className:"s__YdcSPJacOxXpgC4K8BJv",children:(0,p.jsx)(Ks.a,{})}),e]});const ti="guides-feed-preview-map",{DistrictPin:si}=jt.qu.containers,ii=({pin:e})=>{const{setSize:t}=(0,o.useUnit)({setSize:is.districtPins.inputs.setDistrictPinSize}),{ref:s,height:i,width:a,isAlreadyRendered:l}=(0,Zs.y)(),c=e.displayType===jt.ZF.PIN?-i/2:0,d=jt.ai;return(0,n.useEffect)((()=>{l&&t({type:e.displayType,id:e.id,width:a+d,height:i+d})}),[a,i,l,e.id,e.displayType,t,d]),(0,p.jsx)(Gs.Jx,{style:{zIndex:(0,r.withFactory)({sid:"-td3w7y",fn:()=>(0,jt.wY)(!1,e.displayType)}),pointerEvents:"none"},latitude:e.controlledCoordinates.latitude,longitude:e.controlledCoordinates.longitude,offset:[0,c],children:(0,p.jsx)("div",{ref:s,children:(0,p.jsx)(si,{pin:e,isHovered:!1,isSelected:!1})})})},ni=(0,n.memo)(ii),oi=({block:e,onClick:t,cardWithTopIcon:s})=>{const{mapStyles:i,placeData:a,districtPins:r,recalculatePinsPosition:l}=(0,o.useUnit)({mapStyles:is.previewMap.outputs.$mapStyleData,placeData:is.previewMap.outputs.$travelMapData,districtPins:is.districtPins.outputs.$pins,recalculatePinsPosition:is.districtPins.inputs.recalculatePinsPosition});return(()=>{const e=(0,Gs.Sx)(),{setMapboxInstance:t,isClient:s}=(0,o.useUnit)({setMapboxInstance:is.mapboxInstance.inputs.setMapboxInstance,isClient:O.y.outputs.$isClient}),i=e[ti];(0,n.useEffect)((()=>(i&&s&&t(i.getMap()),()=>{t(null)})),[s,i,t])})(),(0,o.useGate)(is.previewMap.outputs.TrapPreviewGate),i&&a?(0,p.jsxs)(ds.qH,{cardWithTopIcon:s,className:"s__JMzMda7NAjZA0ibpfXZw",children:[e.header&&(0,p.jsx)(ms.x,{className:"s__HSfbsT433vHdrMgnrswK",type:hs.y.Title3Bold,children:e.header}),(0,p.jsx)("div",{className:"s__zrsQgHXs37VGAVQAY4Kx",onClick:t,children:(0,p.jsx)(ds.c3,{id:ti,mapStyle:i,zoom:a.start_zoom,startPoint:a.start_point,className:"s__URSQ9Mg00X6WZISFTRtw",onLoad:l,children:r?.map((e=>(0,p.jsx)(ni,{pin:e},e.id)))})}),(0,p.jsx)(ei,{className:"s__d8ejIJwAkS5Txq2Gu5GH",onClick:t,children:e.button.text})]}):(0,p.jsx)(Rs,{className:"s__lczZn09j1PxvU_UzRA5J"})},ai=e=>(0,o.useUnit)(W.l.outputs.$isMobile)?(0,p.jsx)(Xs,{...e}):(0,p.jsx)(Gs.Ib,{children:(0,p.jsx)(oi,{...e})});const ri=({block:e,onPinClick:t,onShowPlacesClick:s,cardWithTopIcon:i})=>(0,o.useUnit)(W.l.outputs.$isMobile)?(0,p.jsx)(ds.HY,{cardWithTopIcon:i,...ye(e),onButtonClick:()=>s(e.id),children:e.places.map((s=>(0,p.jsx)(ds.d$,{title:s.name,subtitle:s.description,url:s.image_url,onClick:()=>t(e.id,s),icon:_e(s),iconSize:ds.Jh.LARGE,showOverlay:he(s)},s.id)))}):(0,p.jsx)(ds.Ri,{cardWithTopIcon:i,title:e.title,subtitle:e.subtitle,iconUrl:e.emoji.svg,iconImageUrl:e.icon_image_url,buttonText:e.button?.text,onButtonClick:()=>s(e.id),className:as()("s__DHMesDGIYSwTue9geQhS",i&&"s__FtJY0h3EuZE9Ao2qIn56"),children:(0,p.jsx)("div",{className:"s__iDoqv0dIyWu9XQ4YP4iE",children:e.places.slice(0,2).map((s=>(0,p.jsx)(ds.ek,{onClick:()=>t(e.id,s),image:({className:e})=>(0,p.jsx)("div",{className:e,children:(0,p.jsxs)(ds.G0,{imageUrl:s.image_url,size:170,caption:s.name,customOverlay:s.premium?.badge===cs.gZ.PAID,children:[(0,p.jsx)(ds.G0.Icon,{type:_e(s),size:ds.Jh.LARGE}),he(s)&&(0,p.jsx)(ds.G0.Overlay,{})]})}),content:()=>(0,p.jsx)(ms.x,{className:as()("s__p_f_JkqWWfCZswTPvwKi"),type:hs.y.Body2Regular,truncateMode:hs.k.TwoLines,children:s.name})},s.id)))})});function li(e,t){return e?151:t?374:181}const ci=({block:e,shouldShrink:t=!1,onPinClick:s,onShowPlacesClick:i,cardWithTopIcon:a})=>{const r=(0,o.useUnit)(W.l.outputs.$isMobile),l=t=>e.places.slice(0,t),c=(0,n.useMemo)((()=>r?e.places.length%2==0?e.places:l(e.places.length-1):l(5)),[r]);return(0,p.jsx)(ds.Ri,{cardWithTopIcon:a,buttonText:e.button?.text,iconUrl:e.emoji?.svg,iconImageUrl:e.icon_image_url,title:e.title,subtitle:e.subtitle,onButtonClick:()=>i(e.id),children:(0,p.jsx)("div",{className:as()("s__V55baHNdteFQiPQCXGwK",t&&"s__MmivruYWZBCywkv5pSBq"),children:c.map(((t,i)=>{const n=0===i&&c.length>=5;return(0,p.jsx)(ds.ek,{className:n?"s__I9n3VYkWcmGONZun9nbf":void 0,onClick:()=>s(e.id,t),image:({className:e})=>(0,p.jsx)("div",{className:e,children:(0,p.jsxs)(ds.G0,{imageUrl:t.image_url,size:li(Boolean(r),n),customOverlay:t.premium?.badge===cs.gZ.PAID,children:[(0,p.jsx)(ds.G0.Icon,{className:n?"s__VjH235oHaBBicNwPfhhL":void 0,size:ds.Jh.LARGE,type:_e(t)}),he(t)&&(0,p.jsx)(ds.G0.Overlay,{})]})},t.id)},t.id+1)}))})})};var di=s(80871);const ui=({iconUrl:e,title:t,subtitle:s,icon:i,onClick:n})=>(0,p.jsx)(us.z,{className:"s__IjB25u3OIW88_go93cW8",onClick:n,priority:ps.Ji.Tertiary,mod:ps.Ly.Custom,children:(0,p.jsxs)(us.z.Label,{className:"s__iZjCmZM3uQQtdUTIbtU2",children:[(0,p.jsx)("img",{className:"s__PC4qWyaL917pT1XUmn1R",src:e}),(0,p.jsxs)("div",{className:"s__kgILwQSPifsWQGdIu3aR",children:[(0,p.jsxs)("div",{className:"s__d9kubra9d3ZW_xCuym4d",children:[(0,p.jsx)(ms.x,{className:"s__ZjxmQXvpIs7f502uToCw",type:hs.y.Body1Semi,children:t}),i&&(0,p.jsx)(ds.TC,{badge:i,isSmall:!0,className:"s__kM14qShDkVAb714h6aTo"})]}),(0,p.jsx)(ds.AT,{className:"s__R7Qf6fHVzjd0q5pKgRo6",type:hs.y.CaptionRegular,children:s})]}),(0,p.jsx)(di.i,{className:"s__BB10lBMM8gh4XWmyCTlc"})]})});const pi=({block:e,onLayerClick:t,cardWithTopIcon:s})=>(0,p.jsx)(ds.qH,{cardWithTopIcon:s,className:"s__EPnihRy1JPxMgniuiCqD",iconUrl:e.emoji?.svg,title:e.title,children:(0,p.jsx)("div",{children:e.layers.map((e=>(0,p.jsx)(ui,{title:e.title,subtitle:e.subtitle,iconUrl:e.emoji.svg,icon:e.premium?.badge,onClick:()=>t(e.id)},e.id)))})}),mi=({block:e,trap_id:t})=>{const s=(0,o.useUnit)(is.analytics.inputs.providerClick);return(0,p.jsx)(ds.Cl,{providers:e.providers,onProviderClick:e=>{s({...e,trap_id:t})}})};const hi=e=>(0,p.jsx)(ds.qH,{cardWithTopIcon:e.cardWithTopIcon,className:"s__d0ravPA2niHSVSHq3GJi",title:e.block.title,classNames:{header:"s__ccBo3asYNanA5yK9Iwvw"},children:(0,p.jsx)("div",{className:"s__uI2AEWJQNC3nMzcQlhEx",children:e.block.places.map((t=>(0,p.jsx)(ds.ek,{image:({className:e})=>(0,p.jsx)("div",{className:e,children:(0,p.jsxs)(ds.G0,{imageUrl:t.image_url,size:151,caption:t.name,customOverlay:t.premium?.badge===cs.gZ.PAID,children:[(0,p.jsx)(ds.G0.Icon,{type:_e(t),size:ds.Jh.LARGE}),he(t)&&(0,p.jsx)(ds.G0.Overlay,{})]})}),content:({className:e})=>(0,p.jsx)(ms.x,{className:as()("s__mcotWPISr27tVebdwGr2",e),type:hs.y.Body2Regular,truncateMode:hs.k.TwoLines,children:t.name}),onClick:()=>e.onPinClick(void 0,t)},t.id)))})});var _i=s(50308),xi=s.n(_i),gi=s(97650);const fi=(0,n.createContext)(null),yi=({children:e})=>{const t=(0,n.useRef)(new Set),s=(0,o.useUnit)(F.R.outputs.$direction);return(0,n.useEffect)((()=>{t.current.clear()}),[s]),(0,p.jsx)(fi.Provider,{value:t,children:e})},ki=({blockItem:e,children:t,className:s,threshold:i=.75})=>{const[a,r]=(0,gi.YD)({threshold:i}),{sendBlockShowedAnalytics:l}=(0,o.useUnit)({sendBlockShowedAnalytics:is.analytics.inputs.blockShowed}),c=(0,n.useContext)(fi),d=(0,n.useCallback)((()=>{e.analytics.block_order&&(c?.current.add(e.analytics.block_order),l(e.analytics))}),[e,l]);return(0,n.useEffect)((()=>{r&&e.analytics.block_order&&!c?.current.has(e.analytics.block_order)&&d()}),[r,e.analytics.block_order,d]),(0,p.jsx)("div",{className:s,ref:a,children:t})};const ji=({className:e})=>(0,p.jsxs)("div",{className:as()("s__JsgyY4HfJr9w4Tt87n77",e),children:[(0,p.jsx)("div",{className:"s__pEjZ3eQZBsR8r0qhMCW7"}),(0,p.jsx)("div",{className:"s__OrqvCiulpdQmIrJT5gJh",children:(0,p.jsx)("div",{className:"s__CsIQ2Lzb982nEuP7z1As"})})]}),bi=({cardWithTopIcon:e,blockItem:t,Component:s,componentProps:i={},className:a,SkeletonComponent:r=ji})=>{const{defaultHeaders:l}=(0,o.useUnit)({defaultHeaders:H.D.outputs.$defaultHeaders}),[c,d]=(0,n.useState)(t.data),[u,m]=(0,n.useState)(!1),[h,_]=(0,gi.YD)({threshold:0,triggerOnce:!0});return(0,n.useEffect)((()=>{!c&&_&&t.url&&(m(!0),async function(e,t){const s=await fetch(e,{headers:t});if(!s.ok)throw new Error(`Failed to load feed block ${e}`);return s.json()}(t.url,l).then(d).catch(xi()).finally((()=>{m(!1)})))}),[t,_,c]),c?(0,p.jsx)(ki,{className:a,blockItem:t,children:(0,p.jsx)(s,{...i,block:c,cardWithTopIcon:e})}):!_||u?(0,p.jsx)("div",{ref:h,className:a,children:(0,p.jsx)(r,{})}):null};const vi=({className:e})=>{const t=new Array(4).fill(null).map(((e,t)=>(0,p.jsx)(Us,{},t)));return(0,p.jsx)("div",{className:as()("s__CfIZUixCGJi31y99CF86",e),children:(0,p.jsxs)(ds.qH,{className:"s__F89Cx0t10qO0wshM3Cwy",children:[(0,p.jsx)("div",{className:"s__V6nar_mYkry_PM2sxKOf"}),(0,p.jsx)("div",{className:"s__il9f2adspwcVlvmm05oA",children:t}),(0,p.jsx)("div",{className:"s__nkVX_yz6BIzN6JpRvXGA"})]})})};const Ci=({block:e,trap_id:t})=>{const s=(0,o.useUnit)(is.analytics.inputs.textExpandClick),[i,a]=(0,n.useState)((()=>Boolean(e.expanded?.button_text))),[r,l]=(0,n.useState)((()=>e.text)),c=(0,n.useCallback)((()=>{a((e=>!e)),l(e?.expanded?.text??e.text),s({trap_id:t})}),[e,t,s]);return(0,p.jsxs)("div",{className:"s__Zzeh5m_UOmeyC5wtHtjJ",children:[(0,p.jsx)(ds.Jv,{type:hs.y.Body1Paragraph,transformOnMobile:!0,children:r}),i&&(0,p.jsx)("div",{className:"s__eZlF061BSFfjwSzsNTdd",children:(0,p.jsx)("button",{className:"s__cTszDADsjK1IfsQx4CBY",type:"button",onClick:c,children:(0,p.jsx)(ms.x,{type:hs.y.Body1Paragraph,mobileType:hs.y.Body2Regular,children:e.expanded?.button_text})})})]})};var wi=s(62423),Ni="s__iuTF51mDayOrxDApMU5h",Si=s(34701),Ii=s(87115);const Ei=({badges:e})=>e?(0,p.jsx)("div",{className:"s__O6uHZche2BGqOQdqjHOp",children:e.map(((e,t)=>(0,p.jsx)(Si.C,{priority:Ii.Tt.Primary,className:"s__Mu5iCFdIe7ytqbiklXNl",size:Ii.OD.S,customHexColor:e.style.background_color,children:(0,p.jsxs)("div",{className:"s__o0xIhucRRU6U2QbY4Ink",children:[e.icon?.svg&&(0,p.jsx)("img",{className:"s__Jd9twqyZtGIIOm9D_v3Z",alt:"",src:e.icon.svg}),(0,p.jsx)(ms.x,{type:hs.y.Body3Semi,truncateMode:hs.k.SingleLine,style:{color:e.style.text_color},children:e.text})]})},t)))}):null,Di=({block:e,onShowPlacesClick:t,onPinClick:s,cardWithTopIcon:i})=>(0,o.useUnit)(W.l.outputs.$isMobile)?(0,p.jsx)(ds.HY,{cardWithTopIcon:i,...ye(e),buttons:(0,p.jsx)(ds.WB,{text:e.landing_button?.text,cashBackType:wi.N9.CashbackHotelTrap}),onButtonClick:()=>t(e.id),children:e.places.map((t=>(0,p.jsx)(ds.d$,{title:t.name,subtitle:t.description,url:t.image_url,className:Ni,icon:t.premium?.badge,iconSize:ds.Jh.LARGE,onClick:()=>s(e.id,t),children:(0,p.jsx)(Ei,{badges:t.badges})},t.id)))}):(0,p.jsx)(ds.Ri,{cardWithTopIcon:i,buttonText:e.button?.text,iconUrl:e.emoji.svg,iconImageUrl:e.icon_image_url,title:e.title,subtitle:e.subtitle,onButtonClick:()=>t(e.id),buttons:(0,p.jsx)(ds.WB,{text:e.landing_button?.text,cashBackType:wi.N9.CashbackHotelTrap}),children:(0,p.jsx)("div",{className:"s__dqSzzcPOSGkDrldDpH4a",children:e.places.slice(0,4).map((t=>(0,p.jsx)(ds.ek,{className:Ni,onClick:()=>s(e.id,t),image:({className:e})=>(0,p.jsxs)("div",{className:e,children:[(0,p.jsx)(ds.G0,{size:181,imageUrl:t.image_url,customOverlay:t.premium?.badge===cs.gZ.PAID,children:(0,p.jsx)(ds.G0.Icon,{type:t.premium?.badge,size:ds.Jh.LARGE})}),(0,p.jsx)(Ei,{badges:t.badges})]},t.id),content:()=>(0,p.jsxs)("div",{className:"s__ZAGCvzQJ8KuEJVhPPaIV",children:[(0,p.jsx)(ms.x,{type:hs.y.Body2Regular,truncateMode:hs.k.TwoLines,children:t.name}),(0,p.jsx)(ms.x,{type:hs.y.Body3Regular,className:"s__xWJbgLybuQqKyK84HxGB",truncateMode:hs.k.SingleLine,children:t.description})]})},t.id)))})});const Pi=e=>{const t=e.length>=8?8:4;return e.slice(0,t)},Ai=({block:e,onPinClick:t,onShowPlacesClick:s,cardWithTopIcon:i})=>(0,o.useUnit)(W.l.outputs.$isMobile)?(0,p.jsx)(ds.HY,{cardWithTopIcon:i,...ye(e),onButtonClick:()=>s(e.id),children:e.places.map((s=>(0,p.jsx)(ds.d$,{title:s.name,subtitle:s.description,url:s.image_url,imageWidth:140,className:"s__CcLt91TSct5iSHVmdPPF",titleTextType:hs.y.Body2Regular,onClick:()=>t(e.id,s),icon:_e(s),iconSize:ds.Jh.MEDIUM,showOverlay:he(s)},s.id)))}):(0,p.jsx)(ds.Ri,{cardWithTopIcon:i,buttonText:e.button?.text,iconUrl:e.emoji.svg,iconImageUrl:e.icon_image_url,title:e.title,subtitle:e.subtitle,onButtonClick:()=>s(e.id),children:(0,p.jsx)("div",{className:"s__LMXR5kvoviMvxwW42Id0",children:Pi(e.places).map((s=>(0,p.jsx)(ds.ek,{onClick:()=>t(e.id,s),image:({className:e})=>(0,p.jsx)("div",{className:e,children:(0,p.jsxs)(ds.G0,{imageUrl:s.image_url,size:181,caption:s.name,customOverlay:s.premium?.badge===cs.gZ.PAID,children:[(0,p.jsx)(ds.G0.Icon,{type:_e(s),size:ds.Jh.LARGE}),he(s)&&(0,p.jsx)(ds.G0.Overlay,{})]})},s.id),content:()=>(0,p.jsx)(ms.x,{type:hs.y.Body2Regular,className:"s__nrG2fAJqtJBl5KvpKjYi",truncateMode:hs.k.TwoLines,children:s.name})},s.id)))})});const Ti=({block:e,className:t})=>{const{emoji:s,text:i}=e;return(0,p.jsxs)(ds.Qu,{className:as()("s__h__pZWIdhUrO1dn74oGB",t),children:[(0,p.jsx)(ds.Qu.Icon,{className:"s__a7Spp0TL5EfbKeCYdn3a",src:s.svg}),(0,p.jsx)(ds.Qu.Text,{text:i,type:hs.y.Body1Paragraph,mobileType:hs.y.Body3Paragraph})]})};const Bi=({img:e,zIndex:t})=>{const s=(0,o.useUnit)(W.l.outputs.$isMobile)?44:52,i=me({url:e.url,width:s,height:s}),{isImageLoaded:n,onImageLoad:a}=(0,Ws.h3)(i);return(0,p.jsx)("div",{className:"s__WSmUyDIH3H4Hv24eLPIC",style:{zIndex:t},children:(0,p.jsx)("img",{className:as()("s__kzKG4FQokrYwCzXoMLkg",n&&"s__HOSaDRIYl4oiUShQaKyp"),src:i,alt:e.description?.text??"",onLoad:a})})},Mi=({block:e,isFirstBlock:t})=>(0,p.jsxs)("div",{className:as()("s__Ve6HTMOLIKF1Tunf46kQ",!t&&"s__Uq1ZsaDAkGetkerBbvZk"),children:[(0,p.jsxs)("div",{className:"s__DYcMFFR3cNg4ry3TMdM8",children:[(0,p.jsx)(ms.x,{className:"s__E1U07jlof2EVUWchAa32",type:hs.y.Title2Bold,transformOnMobile:!0,children:e.title}),(0,p.jsx)(ms.x,{className:"s__k2UIuDKC3ya0A1sUVXk6",type:hs.y.Body2Paragraph,children:e.subtitle})]}),(0,p.jsx)("div",{className:"s__WUHA2PYUeuxZIaIG8b1U",children:e.images.map(((e,t)=>(0,p.jsx)(Bi,{img:e,zIndex:t},t)))})]});var $i=s(51389),Li=s(92617),Ri=s(94590);const Ui=({hotel:e,className:t})=>{const{t:s}=(0,_.useTranslation)("widget_guides_feed");return(0,p.jsxs)("div",{className:as()("s__hHI2tdQkFmbfGl9jXvOO",t),children:[(0,p.jsxs)("div",{className:"s__k0U2d_NbgPqRc6O3Xv8N",children:[(0,p.jsx)(Si.C,{className:"s__SkAEeJVj3mlc89fqCt80",size:Ii.OD.S,color:Ii.JV.Green,borderStyle:Ii.Pk.Brick,children:e.rating}),(0,p.jsx)(ds.ME,{value:e.stars})]}),(0,p.jsx)(ms.x,{type:hs.y.Body2Regular,truncateMode:hs.k.TwoLines,children:e.name}),(0,p.jsxs)("span",{className:"s__EJn_VurKzbI83JN3_i7n",children:[(0,p.jsxs)(ms.x,{className:"s__MVr7ds2BQCTKDosG5oP5",type:hs.y.Body1Semi,children:[`${s("hotels.priceFrom")}`," ",(0,p.jsx)(ds.fE,{price:e.price_from})]}),(0,p.jsx)(ms.x,{className:"s__J3u7zY1LVw4XqwjDYggt",type:hs.y.CaptionRegular,children:s("hotels.priceForPeriod")})]})]})};const zi=({pin:e,onHotelClick:t,onViewItem:s})=>{const i=(0,$i.nS)((()=>s(e))),n=e.badges.length?e.badges[0]:null,o=(0,Li.r)({link:e.search_hotel_link||null,link_v2:e.search_hotel_link_v2||null,openSource:Z.h0.direction_screen});return(0,p.jsx)(ds.d$,{ref:i,href:o,title:e.name,url:e.main_photo_url,content:({className:t})=>(0,p.jsx)(Ui,{className:t,hotel:e}),onClick:()=>t({search_hotel_link_v2:e?.search_hotel_link_v2||null,entrypoint:Ri.H_.ExploreDirectionHotels}),className:"s__q6rxgaIqjaxwMzSLoKJb",children:n&&(0,p.jsx)(Si.C,{className:"s__CpLdVj3ceowDk6KSXtjk",size:Ii.OD.S,customHexColor:n.color,children:n.name})},e.id)},Oi=({block:e,onHotelClick:t,onMoreHotelsClick:s,onViewItem:i,cardWithTopIcon:n})=>(0,p.jsx)(ds.HY,{cardWithTopIcon:n,title:e.title,subtitle:e.subtitle,iconUrl:e.emoji.svg,buttonText:e.button.text,buttonLink:e.data.search_location_link,buttons:(0,p.jsx)(ds.WB,{text:e.landing_button?.text,cashBackType:wi.N9.CashbackHotelSerp}),onButtonClick:()=>s(e.data.search_location_link),children:e.data.hotels.map((e=>(0,p.jsx)(zi,{pin:e,onHotelClick:t,onViewItem:i},e.id)))});const Hi=({pin:e,onHotelClick:t,onViewItem:s})=>{const i=(0,$i.nS)((()=>s(e))),n=e.badges.length?e.badges[0]:null,o=(0,Li.r)({link:e.search_hotel_link||null,link_v2:e.search_hotel_link_v2||null,openSource:Z.h0.direction_screen});return(0,p.jsx)(ds.ek,{ref:i,href:o,onClick:()=>t({search_hotel_link_v2:e?.search_hotel_link_v2||null,entrypoint:Ri.H_.ExploreDirectionHotels}),image:({className:t})=>(0,p.jsx)("div",{className:t,children:(0,p.jsxs)("div",{className:"s__OVdfTtI388AaQ1uXuS_k",children:[(0,p.jsx)(ds.G0,{size:181,imageUrl:e.main_photo_url}),n&&(0,p.jsx)(Si.C,{className:"s__pi9KYAm61Wo7ROUztJxf",size:Ii.OD.S,customHexColor:n.color,children:n.name})]})}),content:()=>(0,p.jsx)(Ui,{hotel:e})})},Fi=({block:e,onHotelClick:t,onMoreHotelsClick:s,onViewItem:i,cardWithTopIcon:n})=>(0,p.jsx)(ds.Ri,{cardWithTopIcon:n,buttonText:e.button.text,iconUrl:e.emoji.svg,iconImageUrl:e.icon_image_url,title:e.title,subtitle:e.subtitle,buttonLink:e.data.search_location_link,buttons:(0,p.jsx)(ds.WB,{text:e.landing_button?.text,cashBackType:wi.N9.CashbackHotelSerp}),onButtonClick:()=>s(e.data.search_location_link),children:(0,p.jsx)("div",{className:"s__Z9ZQbpYzvxkR47MO5c8_",children:e.data.hotels.slice(0,4).map((e=>(0,p.jsx)(Hi,{pin:e,onViewItem:i,onHotelClick:t},e.id)))})}),Gi=({block:e,cardWithTopIcon:t})=>{const{isMobile:s,onHotelClick:i,sendShowMoreHotelsClickedAnalytics:n,sendHotelItemShowedAnalytics:a}=(0,o.useUnit)({isMobile:W.l.outputs.$isMobile,onHotelClick:Z.$o.inputs.hotelClicked,sendShowMoreHotelsClickedAnalytics:is.analytics.inputs.showMoreHotelsClicked,sendHotelItemShowedAnalytics:is.analytics.inputs.hotelItemShowed}),r=s?Oi:Fi;return(0,p.jsx)(r,{cardWithTopIcon:t,block:e,onHotelClick:i,onMoreHotelsClick:e=>{n({click_url:e})},onViewItem:a})};const Wi=({location:e,isLong:t,className:s,arkId:i})=>{const n=(0,o.useUnit)(is.nearbyParks.inputs.openPark),a=Boolean(e.subtitle);return(0,p.jsx)(us.z,{className:as()("s__ovRdzP8PzsgL2SWg52G5",s),priority:ps.Ji.Tertiary,mod:ps.Ly.Custom,onClick:()=>{n({title:e.title,arkId:i})},children:(0,p.jsxs)(us.z.Label,{className:"s__DLafGzsn03N6vKf794Qf",children:[(0,p.jsx)("div",{style:{borderRadius:8},className:"s__y9y9X7GhWYy2xIQb_OBL",children:(0,p.jsx)(gs.E,{srcTemplate:e.image_url,width:56,height:56,alt:"",className:"s__YkZzMzqb2BFPmyluSoXb",draggable:!0})}),(0,p.jsxs)("div",{className:"s__D7eET6YRFyaeXqqSfWhx",children:[(0,p.jsxs)("div",{className:as()("s__qoMSb4PHGQYWPaSt1wgT",t&&"s__mCDGul1GvHSa7gGPERlR"),children:[(0,p.jsx)(ms.x,{truncateMode:a?hs.k.SingleLine:hs.k.TwoLines,type:hs.y.Body2Semi,children:e.title}),a&&(0,p.jsx)(ms.x,{truncateMode:hs.k.SingleLine,className:"s__n9qP2B7dQ2MAfy04jj6X",type:hs.y.Body3Regular,children:e.subtitle})]}),(0,p.jsx)(di.i,{className:"s__g7s6Z6oYMl_ZcgfaReAc"})]})]})})};const qi=({className:e})=>(0,p.jsx)("div",{className:as()("s__Jk95R_J5Ru0mObs35yhh",e)});var Zi="s__llkvj8bykBp2BetUqoyY",Qi="s__lIVQFtQc8BttPVzYIQQp",Ji="s__Kvxrdm5JGiE_CWNi9tqQ";const Vi=({block:e})=>{const{locations:t,locationsLoading:s}=(0,o.useUnit)({locations:is.nearbyParks.outputs.$data,locationsLoading:is.nearbyParks.outputs.$pending}),i=e.locations.filter((e=>"direction_screen"===e.navigation.type)),{length:n}=i;return 0===n?null:s?(0,p.jsx)("ul",{className:Zi,children:i.map(((e,t)=>(0,p.jsx)(qi,{className:as()(Qi,1===n&&Ji)},t)))}):(0,p.jsx)("ul",{className:Zi,children:i.filter((e=>t?.[e.navigation.ark_id])).map((e=>(0,p.jsx)("li",{className:as()(Qi,1===n&&Ji),children:(0,p.jsx)(Wi,{location:e,isLong:1===n,arkId:e.navigation.ark_id})},e.navigation.ark_id)))})},{CarouselBlockContainer:Yi}=As.containers,Xi=()=>{const{data:e,direction:t,isError:s,isLoading:i,isMobile:a,openModal:r,openPoi:l,refetch:c,isArkId:d,isReduceTrapTitle:u,trapNewDesignEnabled:m}=(0,o.useUnit)({data:Ue.outputs.$data,isLoading:Ue.outputs.$pending,isError:Ue.outputs.$failed,refetch:Ue.inputs.fetch,openModal:rs.I.inputs.open,openPoi:ls.Y.inputs.open,isMobile:W.l.outputs.$isMobile,direction:F.R.outputs.$direction,isArkId:F.R.outputs.$isArkId,isReduceTrapTitle:v.qF.outputs.$isReduceTrapTitle,trapNewDesignEnabled:Q.R.outputs.$trapNewDesignEnabled}),h=(0,n.useCallback)((e=>(s,i)=>{if(i)return a||r({layer:s??null,analytics:e.analytics,openSource:cs.Ur.DIRECTION,mapOpenSource:cs.Oj.DIRECTION,guideId:t}),void l({layer:s??null,poi:i.id,openType:i.open_type??cs.B8.MAP,guideId:t,openSource:cs.Ur.DIRECTION,poiOpenSource:cs.sL.feed,poiQueryOpenSource:cs.ik.DIRECTION,analytics:e.analytics,mapOpenSource:cs.Oj.DIRECTION});r({layer:s??null,analytics:e.analytics,openSource:cs.Ur.DIRECTION,mapOpenSource:cs.Oj.DIRECTION,guideId:t})}),[t,r,l,a]),_=(0,n.useMemo)((()=>e?.blocks.map(((e,t)=>{if(ce(e)&&e.data)return(0,p.jsx)(ki,{className:as()(Hs.twoColumnsBlock,Hs.header),blockItem:e,children:(0,p.jsx)(Mi,{isFirstBlock:0===t,block:e.data})},t);if(Y(e)&&e.data)return(0,p.jsx)(Fs,{className:as()(Hs.twoColumnsBlock,Hs.header),block:e.data},t);if(X(e)&&e.data)return(0,p.jsx)(ki,{className:as()(Hs.twoColumnsBlock,Hs.item),blockItem:e,children:(0,p.jsx)(ai,{cardWithTopIcon:!u,block:e.data,onClick:()=>h(e)()})},t);if(le(e)&&e.data)return(0,p.jsx)(ki,{className:as()(Hs.twoColumnsBlock,Hs.item),blockItem:e,children:(0,p.jsx)(Ai,{cardWithTopIcon:!u,block:e.data,onPinClick:h(e),onShowPlacesClick:h(e)})},t);if(K(e)&&e.data)return(0,p.jsx)(ki,{className:as()(!a&&Hs.oneColumnBlock,Hs.item),blockItem:e,children:(0,p.jsx)(ds.Z9,{cardWithTopIcon:!u,block:e.data})},t);if(ee(e)&&e.data)return(0,p.jsx)(ki,{blockItem:e,className:as()(!a&&Hs.oneColumnBlock,Hs.item),children:(0,p.jsx)(ri,{cardWithTopIcon:!u,block:e.data,onPinClick:h(e),onShowPlacesClick:h(e)})},t);if(te(e)&&e.data){const s=!a&&xe(e);return(0,p.jsx)(ki,{className:as()(s?Hs.oneColumnBlock:Hs.twoColumnsBlock,Hs.item),blockItem:e,children:(0,p.jsx)(ci,{cardWithTopIcon:!u,block:e.data,shouldShrink:s,onPinClick:h(e),onShowPlacesClick:h(e)})},t)}return se(e)&&e.data?(0,p.jsx)(ki,{className:as()(Hs.twoColumnsBlock,Hs.item),blockItem:e,children:(0,p.jsx)(pi,{cardWithTopIcon:!u,block:e.data,onLayerClick:h(e)})},t):ie(e)&&e.data?(0,p.jsx)(ki,{className:as()(Hs.twoColumnsBlock,Hs.item),blockItem:e,children:(0,p.jsx)(mi,{block:e.data,trap_id:e.analytics.trap_id})},t):re(e)?(0,p.jsx)(bi,{className:as()(Hs.twoColumnsBlock,Hs.item),blockItem:e,SkeletonComponent:vi,Component:Di,componentProps:{onPinClick:h(e),onShowPlacesClick:h(e)},cardWithTopIcon:!u},t):de(e)?(0,p.jsx)(bi,{className:as()(Hs.twoColumnsBlock,Hs.item),blockItem:e,SkeletonComponent:vi,Component:Gi,cardWithTopIcon:!u},t):ne(e)&&e.data&&a?(0,p.jsx)(ki,{className:Hs.item,blockItem:e,children:(0,p.jsx)(hi,{block:e.data,cardWithTopIcon:!u,onPinClick:h(e)})},t):oe(e)&&e.data?(0,p.jsx)(ki,{blockItem:e,className:as()(Hs.twoColumnsBlock,Hs.item),children:(0,p.jsx)(Ti,{block:e.data})},t):ae(e)&&e.data?(0,p.jsx)(ki,{className:as()(Hs.twoColumnsBlock,Hs.item),blockItem:e,children:(0,p.jsx)(Ci,{block:e.data,trap_id:e.analytics.trap_id})},t):ue(e)&&e.data?(0,p.jsx)(ki,{className:as()(Hs.twoColumnsBlock,Hs.item),blockItem:e,children:(0,p.jsx)(Vi,{block:e.data})},t):pe(e)&&e.data?(0,p.jsx)(ki,{className:as()(Hs.twoColumnsBlock,Hs.item,Hs.carouselV2),blockItem:e,children:(0,p.jsx)(Yi,{block:e.data})},t):null}))),[e,a,h,u]);return(d||e)&&i?(0,p.jsx)(Os,{className:Hs.skeleton}):s?(0,p.jsx)(Ms,{className:Hs.error,onClick:c}):s||i||!e?null:(0,p.jsx)("div",{className:as()(Hs.feed,m&&Hs.feedCarouselV2),children:_})};const Ki=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/direction_screen_feed/index.ts",lifecycle:{start:is.widget.outputs.initialized},api:{outputs:{initialized:is.widget.outputs.initialized},containers:{GuidesFeed:()=>{const{isVisible:e,readyToFetch:t,noData:s}=(0,o.useUnit)({isVisible:is.widget.outputs.$isVisible,readyToFetch:is.feed.inputs.readyToFetchFeed,noData:is.feed.outputs.$noData});return(0,n.useEffect)((()=>(e&&t(!0),()=>{t(!1)})),[t,e]),e?s?(0,p.jsx)(y,{}):(0,p.jsx)(a.A,{className:"s__G2Q1DzjMEAeMOM73mngC",children:(0,p.jsx)(yi,{children:(0,p.jsx)(Xi,{})})}):null}},inputs:{setPlaceSource:is.feed.inputs.setSourcePlace}}})},73806:function(e,t,s){"use strict";s.d(t,{FE:function(){return D},ai:function(){return S},rr:function(){return x},ZF:function(){return h},SR:function(){return I},Y:function(){return E},wY:function(){return j},v6:function(){return k},A4:function(){return v},a8:function(){return b},qu:function(){return F}});var i={};s.r(i),s.d(i,{DistrictPin:function(){return T}});var n=s(30091),o=s(67294),a=s(49963),r=s(44619),l=s(4190),c=s(94184),d=s.n(c),u=s(38387),p=s(89421),m={root:"s__gNblTg0YCm1tYvI1ZJWK",anchor:"s__rbUgofmGn92lCSMYigYO",bottom:"s__K7u9P81Jv316ts8sL34h",none:"s__ZhyhUg5lnpNPohLiJktg",cluster:"s__Mal45KK0Vz0HrZFu8aXV",cluster_moving:"s__y_deWUHeHcSbGzLCBmmQ",pin:"s__P5t5vSZlx7J05HbS_OvM",arrow:"s__odqe7PxMsj1UMkvteCSD"};let h,_,x;!function(e){e.CLUSTER="cluster",e.PIN="pin"}(h||(h={})),function(e){e.BOTTOM="bottom",e.NONE="none"}(_||(_={})),function(e){e.TOP="top",e.BOTTOM="bottom",e.LEFT="left",e.RIGHT="right"}(x||(x={}));var g=s(31087),f=s(51456),y=s(50191);const k=(e,t,s,i)=>{const n=i?e?.dark_theme:e?.light_theme;return t||s?e?.hover:n};function j(e,t){return e?5:t&&(e=>e===h.CLUSTER||e===h.PIN)(t)?4:3}const b=e=>e.type===g.AS.PLACE,v=(e,t,s)=>{const{x:i,y:n}=t.project((0,y.kI)(e.coordinates)),o=i+e.originalSize.width/3,a=i-e.originalSize.width/3,r=n-e.originalSize.height/3,l=n-2*e.originalSize.height/3;return o>=s.minX&&a<=s.maxX&&r>=s.minY&&l<=s.maxY};var C;function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},w.apply(this,arguments)}var N=function(e){return o.createElement("svg",w({width:15,height:5,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),C||(C=o.createElement("path",{d:"M.5 0c1.488 0 2.915.758 3.968 2.106l1.71 2.192c.73.936 1.914.936 2.645 0l1.71-2.192C11.584.758 13.011 0 14.5 0H.5z"})))};const S=3,I=2,E=1,D=10;var P=s(85893);const A=({pin:e,isHovered:t,isSelected:s})=>{const{isMobile:i=!1,isNight:n}=(0,l.useUnit)({isMobile:u.l.outputs.$isMobile,isNight:p.H.outputs.$isNight}),{displayType:c,anchor:_}=e,x=k(e.pin_colors,t,s,n),g=i?I:S,{width:f,ref:y}=function(e){const{defaultWidth:t="auto",defaultHeight:s="auto",paddingHeight:i=0,paddingWidth:n=0}=e??{},[a,r]=(0,o.useState)(null);return{ref:r,width:(0,o.useMemo)((()=>{const e=a?.getBoundingClientRect().width;return e?e+n:t}),[a,t,n]),height:(0,o.useMemo)((()=>{const e=a?.getBoundingClientRect().height;return e?e+i:s}),[a,s,i])}}({paddingWidth:20+2*g});return(0,P.jsxs)("div",{"data-test-id":"district-pin",className:d()(m.root,m[c]),style:{border:`1px solid ${x}`,boxShadow:`0px ${g}px 0px ${x}`,width:c===h.CLUSTER?"100%":f,opacity:"auto"===f?0:1},children:[(0,P.jsx)(a.x,{ref:y,tag:"span",className:m.text,type:r.y.Body2Bold,mobileType:r.y.Body2Bold,children:e.name}),(0,P.jsx)(N,{className:d()(m.anchor,m[_]),style:{filter:`drop-shadow(0px ${i?3:4}px 0px ${x})`}})]})},T=(0,o.memo)(A);var B=s(98116),M=s(27946);const $=({pin:e,map:t,mapPinRectToRect:s,mapPinToCoordinates:i,mapPinToSize:n})=>{const{x:o,y:a}=((e,t,s)=>s.project((0,y.kI)(t(e))))(e,i,t),{width:r,height:l}=n(e);return s({width:r,height:l,x:o,y:a})},L=e=>({...e,x:e.x-e.width/2,y:e.y-e.height}),R=(e,t,s)=>{const i=$({pin:e,mapPinToSize:e=>e.originalSize,mapPinRectToRect:L,mapPinToCoordinates:e=>e.coordinates,map:s}),n=$({pin:t,mapPinToSize:e=>e.originalSize,mapPinRectToRect:L,mapPinToCoordinates:e=>e.coordinates,map:s});return(0,M.hH)(i,n)};function U(e,t,s,i){const n=e.map((e=>function(e,t){const{pins:s,x:i,y:n,...o}=e,a=t.unproject([i,n]);return{originalSize:o,clusterSize:o,arrowSize:o,controlledCoordinates:(0,y.Tc)(a),coordinates:(0,y.Tc)(a),pins:s}}(O(e,t,s),t)));return(0,M.vK)(n,((e,s)=>R(e,s,t)),i).map((e=>{const i=e.map((e=>e.pins)).flat(),{pins:n,...o}=O(i,t,s);return function(e,t,s,i){const n=e.length>1,o=i?28:34,a=t.x,r=t.y-t.height+o,l=a-t.width/2;return[...e].sort((e=>(t,s)=>{const{y:i}=e.project((0,y.kI)(t.coordinates)),{y:n}=e.project((0,y.kI)(s.coordinates));return i-n})(s)).map(((e,t)=>{let i={};if(n){const n=l+e.clusterSize.width/2,a=t%2?n+16:n,c=r+t*(o+4),d=s.unproject([a,c]);i=(0,y.Tc)(d)}else i=e.coordinates;return{...e,...z(n),controlledCoordinates:i}}))}(n,o,t,s)}))}const z=e=>({displayType:e?h.CLUSTER:h.PIN,anchor:e?_.NONE:_.BOTTOM});function O(e,t,s){const i=s?28:34,n=e.length>1,o=n?e.filter((e=>e.type===g.AS.PLACE)):e,a=o.map((e=>{const s=t.project((0,y.kI)(e.coordinates)),i=n?e.clusterSize:e.originalSize;return{id:e.id,...s,...i}})),r=a.reduce(((e,t)=>e.x<t.x?e:t)),l=a.reduce(((e,t)=>e.x>t.x?e:t)),c=a.reduce(((e,t)=>e.y>t.y?e:t)).y,d=(l.x-r.x)/2+r.x,{width:u}=a.reduce(((e,t)=>e.width>t.width?e:t));return{x:d,y:c,width:u,height:a.length*(i+4),pins:o}}const H={createDistrictPins:function({$mapboxInstance:e,$isCalculationEnabled:t,$selectedPinId:s,$poisFromDistrict:i,$boundingBox:n,$initialDistrictPins:o}){const a=(0,B.createStore)(null,{sid:"-lvh660"}),r=(0,B.createStore)([],{sid:"p1cnz9"}),l=(0,B.createEvent)({sid:"-8o3we"}),c=(0,B.createEvent)({sid:"-w5ew2j"}),d=(0,B.createEvent)({sid:"-apefy3"}),p=(0,B.createEvent)({sid:"4k283s"}),m=(0,B.createEvent)({sid:"z2moij"});return(0,B.sample)({and:[{clock:c,source:{pins:a},filter:({pins:e},{type:t,id:s})=>{const i=e?.find((e=>e.id===s))?.originalSize.width??0;return t===h.PIN&&0===i},fn:(e,t)=>t,target:l}],or:{sid:"-b584oz"}}),(0,B.sample)({and:[{clock:c,source:{pins:a},filter:({pins:e},{type:t,id:s})=>{const i=e?.find((e=>e.id===s))?.clusterSize.width??0;return t===h.CLUSTER&&0===i},fn:(e,t)=>t,target:d}],or:{sid:"-amj4ip"}}),(0,B.sample)({and:[{clock:l,source:{pins:a},filter:({pins:e})=>Boolean(e),fn:({pins:e},{id:t,width:s,height:i})=>e.map((e=>e.id===t?{...e,originalSize:{width:s,height:i}}:e)),target:a}],or:{sid:"-9su8h7"}}),(0,B.sample)({and:[{clock:d,source:{pins:a},filter:({pins:e})=>Boolean(e),fn:({pins:e},{id:t,...s})=>e.map((e=>e.id===t?{...e,clusterSize:s}:e)),target:a}],or:{sid:"-97e9c4"}}),(0,B.sample)({and:[{clock:[o.updates,e.updates],source:{districtPins:o,map:e},filter:({districtPins:e,map:t})=>Boolean(e&&t),fn:({districtPins:e})=>(e=>e.map((e=>{const t=(e=>(0,f.VO)(e)?{width:40,height:42}:{width:0,height:0})(e);return{...e,controlledCoordinates:e.coordinates,originalSize:t,clusterSize:t,arrowSize:t}})))(e),target:a}],or:{sid:"yfyj6h"}}),(0,B.sample)({and:[{clock:[p,a.updates,t.updates,i.updates],source:{pins:a,map:e,isCalculationEnabled:t,selectedDistrictPinId:s,poisFromDistrict:i,boundingBox:n},filter:({pins:e,map:t,isCalculationEnabled:s,boundingBox:i})=>Boolean(e&&t)&&s&&Boolean(i),fn:({pins:e,map:t,poisFromDistrict:s,selectedDistrictPinId:i,boundingBox:n})=>e.filter((e=>(e.id!==i||!s.length)&&v(e,t,n))),target:m}],or:{sid:"yxjy61"}}),(0,B.sample)({and:[{clock:m,source:{map:e,isMobile:u.l.outputs.$isMobile},filter:({map:e})=>Boolean(e),fn:({map:e,isMobile:t},s)=>(({districtPins:e,map:t,isMobile:s})=>{const i=function(e,t,s){let i=!1;const n=()=>{i=!0};let o=(0,M.vK)(e,((e,s)=>R(e,s,t)),n);if(!i)return function(e){return e.flat().map((e=>({...e,displayType:h.PIN,anchor:_.BOTTOM,controlledCoordinates:e.coordinates})))}(o);for(;i;)i=!1,o=U(o,t,s,n);return o.flat()}(e,t,s);return i})({districtPins:s,map:e,isMobile:t??!1}),target:r}],or:{sid:"-ya4l74"}}),{setDistrictPinSize:c,recalculatePinsPosition:p,$pins:r,$mapDistrictPins:a}}},F=(0,n.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/map_district_pins/index.ts",api:{inputs:H,containers:{...i}}})},92617:function(e,t,s){"use strict";s.d(t,{r:function(){return l}});var i=s(4190),n=s(67294),o=s(14210),a=s(79403),r=s(14573);const l=({link:e,link_v2:t,openSource:s})=>{const{isHotelsEnabled:l,brand:c}=(0,i.useUnit)({isHotelsEnabled:o.qF.outputs.$isHotelsEnabled,brand:a.U.outputs.$brand});return(0,n.useMemo)((()=>t&&(0,r.q2)(t)&&l||!e?null:((e,t)=>{const s=new URL(e),i={};s.searchParams.forEach(((e,t)=>{i[t]=e}));const n=new URLSearchParams({...i,utm_source:t.brand,utm_campaign:t.openSource}).toString();return s.search=n,s.toString()})(e,{brand:c,openSource:s})),[t,e,c,s,l])}},87007:function(e,t,s){"use strict";s.d(t,{h0:function(){return f.h},wB:function(){return p.wB},$o:function(){return y}});var i=s(30091),n=s(98116),o=s(29893),a=s.n(o),r=s(59051),l=s.n(r),c=s(14210),d=s(20611),u=s(47420),p=s(14573);const m=(0,n.createEvent)({sid:"5z8nrh"}),h=(0,n.createStore)(null,{sid:"-dt1r9n"}),_=(0,n.createStore)(null,{sid:"br7my2"}),x=(0,n.combine)({and:[{hotelDeepLink:h,isHotelsEnabled:c.qF.outputs.$isHotelsEnabled},({hotelDeepLink:e,isHotelsEnabled:t})=>!(!t||!e)&&(0,p.q2)(e)],or:{sid:"-kza2lc"}});(0,n.sample)({and:[{clock:h.updates,source:{searchParams:d.D.outputs.$searchParams,shouldHotelsModalOpen:x,entrypoint:_},filter:({shouldHotelsModalOpen:e})=>Boolean(e),fn:({searchParams:e,entrypoint:t},s)=>{const i=new URL(s);i.searchParams.set("source",t);const n=`${e.toString()}&${i.searchParams.toString()}`,o=new URLSearchParams(n);return{pathname:i.pathname,search:o,type:"push"}},target:d.D.inputs.navigateTo}],or:{sid:"-q5dscw"}}),(0,n.sample)({and:[{clock:m,fn:({entrypoint:e})=>e,target:_}],or:{sid:"-p7uc5v"}}),(0,n.sample)({and:[{clock:m,fn:({search_hotel_link_v2:e})=>e,target:h}],or:{sid:"-oszw54"}});const g={inputs:{hotelClicked:m},outputs:{$searchHotelParams:(0,n.combine)({and:[{departDate:u.i.outputs.exact.$departDate,returnDate:u.i.outputs.exact.$returnDate,passengers:u.i.outputs.$passengers,origin:u.i.outputs.$origin},({departDate:e,returnDate:t,passengers:s,origin:i})=>{const{period:n,...o}=(0,p.hM)(e??void 0,t??void 0)??{},r={adults:s.adults,children:s.children,infants:s.infants,period:n?.toLowerCase(),origin:i?.iata,...o};return a()(l())(r)}],or:{sid:"z9lg4l"}})},internal:{$hotelDeepLink:h,$hotelEntrypoint:_}};var f=s(50255);const y=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/travel_map_hotel/index.ts",api:g})},50255:function(e,t,s){"use strict";let i,n;s.d(t,{g:function(){return i},h:function(){return n}}),function(e){e.EXACT="EXACT",e.FLEXIBLE="FLEXIBLE",e.RANGES="FLEXIBLE_DATES",e.PERIOD="TRIP_PERIOD"}(i||(i={})),function(e){e.direction_screen="direction_screen",e.poi="poi",e.district="district"}(n||(n={}))},14573:function(e,t,s){"use strict";s.d(t,{hM:function(){return l},q2:function(){return a},wB:function(){return r}});var i=s(95219),n=s(50255);const o=/\/hotels\/(\d+)/,a=e=>o.test(e),r=e=>e.match(o)?.[1];function l(e,t){return e?{period:n.g.EXACT,depart_date:(0,i.cM)(e),one_way:`${!t}`,return_date:t&&(0,i.cM)(t)}:null}},89101:function(e,t,s){"use strict";s.d(t,{B:function(){return p}});var i=s(30091),n=s(98116),o=s(76588),a=s(80472),r=s(89421),l=s(35529);const c=l.Unknown,d=l.Unknown,u={inputs:{createMapStyle:function({$directionMapShowed:e,readyToFetchMapStyle:t,$placeData:s}){const i=(0,n.withFactory)({sid:"-s980zw",fn:()=>(0,o.s5)({name:"guides_map_styles",params:(0,n.withFactory)({sid:"1zs0kg",fn:()=>(0,o.t6)()}),request:{method:"GET",url:({url:e})=>e},response:{contract:(0,a.v)(c)}})}),l=(0,n.withFactory)({sid:"-6a83v",fn:()=>(0,o.s5)({name:"guides_map_polygons",params:(0,n.withFactory)({sid:"ikcsd9",fn:()=>(0,o.t6)()}),request:{method:"GET",url:({url:e})=>e},response:{contract:(0,a.v)(d)}})}),{$data:u,start:p,reset:m}=l,{$data:h,start:_,reset:x}=i,g=(0,n.createEvent)({sid:"au66at"}),f=(0,n.restore)(g,null,{sid:"zd58x0"}),y=(0,n.createEvent)({sid:"gyeg1l"});(0,n.sample)({and:[{clock:t,source:{theme:r.H.outputs.$theme,placeData:s,directionMapShowed:e},filter:({placeData:e})=>Boolean(e),fn:({placeData:e,theme:t,directionMapShowed:s})=>((e,t,s)=>{const i=e.replace("{theme}",t||"light"),n=new URL(i);return s&&n.searchParams.set("source","direction_screen"),n.toString()})(e.polygons_geo_json,t,s),target:g}],or:{sid:"-hgkgtf"}});const k=(0,n.combine)({and:[h,u,s,(e,t,s)=>{if(!e||!t||!s)return null;const i=e,n=t,o=s.polygons_source_id,a={type:"geojson",data:n};return{style:{...i,layers:[],sources:{...i.sources,[o]:a}},layers:i.layers,polygonsSource:n}}],or:{sid:"-exijs4"}}),j=(0,n.combine)({and:[s,h,(e,t)=>{if(!e||!t)return null;const{sources:s={}}=t;return s[e.polygons_source_id].data}],or:{sid:"r1s0kt"}});return(0,n.sample)({and:[{clock:j.updates,filter:Boolean,fn:e=>({url:e}),target:p}],or:{sid:"oblz04"}}),(0,n.sample)({and:[{clock:g,source:f,filter:Boolean,fn:e=>({url:e}),target:_}],or:{sid:"or07m8"}}),(0,n.sample)({and:[{clock:y,target:[m,x]}],or:{sid:"p6y8tp"}}),{$data:k,mapStyleQuery:i,polygonsQuery:l,reset:y}}}},p=(0,i.G6)({importMetaUrl:"file:///home/jenkins/agent/workspace/selene/client/src/product/guides/services/travel_map_style/index.ts",api:u})},74423:function(e,t,s){var i=s(92822)("get",s(27361));i.placeholder=s(69306),e.exports=i},34701:function(e,t,s){"use strict";s.d(t,{C:function(){return k}});var i=s(85893),n=s(67294),o=s(94184),a=s(44619),r=s(49963),l=s(6824),c={icon:"s__V7LMLTfSJRdALnpPF1PK",left:"s__VoNvttdKJ6qfWPb1j7_i",right:"s__EMaQzc7pXKxvIwRJJl7F"};const d=(0,n.memo)((({position:e=l.e.Left,children:t})=>(0,i.jsx)("div",{className:o(c.icon,c[e]),children:t})));d.displayName="BadgeIcon";var u=s(87115);const p={[u.OD.L]:24,[u.OD.M]:22,[u.OD.S]:20,[u.OD.XS]:16},m={[u.JV.Cosmic]:u.JV.Fog,[u.JV.Lemon]:u.JV.Yellow},h={[u.OD.L]:8,[u.OD.M]:6,[u.OD.S]:6,[u.OD.XS]:4},_=e=>`${e}px`,x=e=>`var(--${e})`;var g={variables:"s__AwdxdA1BQ2SygjSeJCPu",badge:"s__uz5lF8uh_bEv3gLII5pd",custom:"s__liBl3rOcrVuXT5DIYC8x",round:"s__zYDsdUsCmPZJ8RGZFNgg",brick:"s__pQ2LI0xzdhwO_zHLQgpr",text:"s__xH6AzuqGdfBJKW3BpSIM",isLoading:"s__hqqrWV71PMX9ypP_LtL3","ticket-badge-flare":"s__qWJHb7okDNW7QKtBawk4"};const f={[u.OD.L]:a.y.Body1Semi,[u.OD.M]:a.y.Body2Semi,[u.OD.S]:a.y.Body3Semi,[u.OD.XS]:a.y.CaptionSemi},y=({children:e,color:t=u.JV.Green,size:s=u.OD.M,priority:l=u.Tt.Primary,borderStyle:c=u.Pk.Round,className:y,isLoading:k,customHexColor:j,testId:b})=>{const{icon:v,restChildren:C}=(e=>n.Children.toArray(e).reduce(((e,t)=>(t.type===d?e.icon=t:e.restChildren.push(t),e)),{icon:null,restChildren:[]}))(e),w=(({size:e,color:t,priority:s,borderStyle:i,customHexColor:n})=>{const o=t===u.JV.Custom,a=s===u.Tt.Primary,r=i===u.Pk.Brick?2:0,l=m[t]||t,c=x(a?"white":`${l}_800`),d=x(a?`${l}_500`:`${l}_50`);return{height:_(p[e]),padding:`0 ${_(h[e]-r)}`,...!o&&{color:c,backgroundColor:d},...Boolean(n)&&{backgroundColor:n}}})({size:s,priority:l,color:t,borderStyle:c,customHexColor:j}),N=Boolean(v)&&s!==u.OD.XS,S=o(g.variables,g.badge,g[c],{[g.isLoading]:k,[g.custom]:t===u.JV.Custom},y);return(0,i.jsxs)("strong",{className:S,style:w,"data-test-id":b,children:[N&&v,(0,i.jsx)(r.x,{tag:"span",type:f[s],truncateMode:a.k.SingleLine,className:g.text,children:C})]})},k=(0,n.memo)(y);k.Icon=d},87115:function(e,t,s){"use strict";var i,n,o,a;s.d(t,{JV:function(){return i},OD:function(){return o},Pk:function(){return a},Tt:function(){return n}}),function(e){e.Green="green",e.Blue="blue",e.Red="red",e.Yellow="yellow",e.Purple="purple",e.Pink="pink",e.Lemon="lemon",e.Cosmic="cosmic",e.Fog="fog",e.Custom="custom"}(i||(i={})),function(e){e.Primary="primary",e.Secondary="secondary"}(n||(n={})),function(e){e.L="l",e.M="m",e.S="s",e.XS="xs"}(o||(o={})),function(e){e.Round="round",e.Brick="brick"}(a||(a={}))},6824:function(e,t,s){"use strict";var i;s.d(t,{e:function(){return i}}),function(e){e.Left="left",e.Right="right"}(i||(i={}))}}]);
//# sourceMappingURL=https://private-static.prod.k8s.int.avs.io/selene-source-maps/guides_feed.f8fb1af5cef48680b3a5.min.js.map